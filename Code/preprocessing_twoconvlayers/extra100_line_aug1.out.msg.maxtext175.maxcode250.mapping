aba9d646785c8b1decb1a15ee157b0179a15bef9	mmc sh_mmcif reset error code for any opcode if a command execution has produced an error it has to be reset as a part of the error handling
35b815392a6b6c268baf3b63d7f2ba350597024f	netfilter nf_tables_netdev fix error path in module initialization unregister the chain type and return error otherwise this leaks the subscription to the netdevice notifier call chain
400ffaa2acd72274e2c7293a9724382383bebf3e	bcache fix use-after-free in btree_gc_coalesce if we goto out_nocoalesce after we free new_nodes0 we end up freeing new_nodes0 again this was generating a lockdep warning the fix is to set new_nodes0 to null since the out_nocoalesce path safely ignores null entries in the new_nodes array this regression was introduced in change-id i76564d7257800583214376b4bacf236cda90c89c
5c64a8df0ca88c79c9cb74674c2481e5f7ede511	sbitmap dont update the allocation hint on clear after resize if we have a bunch of high-numbered bits allocated and then we resize the struct sbitmap_queue when those bits get cleared well update the hint and then have to re-randomize it repeatedly avoid that by checking that the cleared bit is still a valid hint no measurable performance difference in the common case
9456f7d1beb8f7cfd99300e6028b3b2667c2ebd5	add defines for internal class names will probably flesh the documentation of the classes out a bit too at some later point
f4dce5c9364fffc8947008b17a7e16ea9009950d	coding style changes just some minor coding style changes while i had to look at the code
d21bd67bbbc635424b336b7c881dbcdf6098f9f5	dont use in intel_lvds_compute_config move towards atomic by using the legacy modesets drm_atomic_state instead
7564463c64e824a9cf545bcfbfbe6f159a5b9d8c	asoc add support for on-board analogue microphones on speyside wm8962
ef146fa40cc3af1dcb13688f41cc06a9c0deb01c	cls_bpf make binding to classid optional the binding to a particular classid was so far always mandatory for cls_bpf but it doesnt need to be therefore lift this restriction as similarly done in other classifiers only a couple of qdiscs make use of class from the tcf_result others dont strictly care so let the user choose his needs those that read out class can handle situations where it could be null an explicit check for tcf_unbind_filter is also not needed here as the previous was __number__ so the xchg will return that and therefore a callback to the qdiscs unbind_tcf is skipped
dc0caefdf48713fce373c8663e5a0d292a424746	arm omap1 ams-delta fix incorrect section tags while resolving section mismatches introduced with recent patches to for-next a few dangerous driver unaware section tagging already present in mainline have been identified fix them
7222c832254a75dcd67d683df75753d4a4e125bb	usb_alloc_dev fix setting of with commit usb core let usb device know device node the port1 argument of usb_alloc_dev gets overwritten as follows unsigned port1 if port1 port1 later on this now overwritten port1 gets assigned to port1 however since xhci_find_raw_port_number isnt idempotent the aforementioned commit causes a number of kasan splats like the following bug kasan slab-out-of-bounds in at addr __address__ read of size __number__ by task workqueue usb_hub_wq hub_event __number__ __number__ __address__ __address__ __number__ __address__ __address__ __address__ __address__ __number__ __address__ __address__ call trace __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ afterwards xhci reports some functional errors xhci_hcd __number__ error unexpected setup address command completion code xhci_hcd __number__ error unexpected setup address command completion code usb device not accepting address __number__ error fix this by not overwriting the port1 argument in usb_alloc_dev but storing the raw port number as required by of in an additional variable raw_port
f1220c7d6b21aca65bc52dda8bf94c3ceb1d10d7	staging bcm replaced member accessing by variable
9981a3146cd9f07075dcac1611ca7c06f597d66b	mfd omap-usb-host raw read and write endian fix all omap ip blocks expect le data but cpu may operate in be mode need to use endian neutral functions to registers instead of __raw_readlw and __raw_writelw functions code need to use readlw_relaxed and writelw_relaxed functions if the first simply register the second will byteswap it if host operates in be mode changes are trivial sed like replacement of __raw_xxx functions with xxx_relaxed variant
5c164646e25a5a073875c6ca346efa0d5afb6934	media bttv use rather then the card info when registering the tuner bttv_init_card2 sets to a value from the tvcards array and then may update it by reading a card specific eeprom or gpio detection after bttv_init_card2 bttv_init_tuner gets called and it should clearly use the updated dynamic has_radio value from rather then the const value in the tvcards array this fixes the radio not working on my hauppauge wintv
6afcb3b7393f5aa388a0d077c490ed411ab3cd27	tomoyo fix unused kernel config option introduced by commit tomoyo make several options configurable were by error not used
54aa095ffcc52f9e81bc84159f4af223730d3681	remove empty function after the switch to functions and the removal of rtc_device_unregister the remove function does not do anything delete it
073d3dbe9a7c38888d8dafe09df421b174a6cffa	pci rockchip add remove support currently if we try to unbind the platform device the remove will succeed but the removal wont undo most of the registration leaving partially-configured pci devices in the system this allows for example a simple lspci to crash the system as it will try to touch the freed via driver structures on rk3399 echo __number__ lspci so lets implement device remove
aa90f49036a6a9dd917c5f571497a28e6a6e5bcc	scsi_dh_alua move optimize_stpg evaluation when the optimize_stpg module option is set we should just set it once during port_group allocation doing so allows us to override it later with device specific settings
29b75eb2d56a714190a93d7be4525e617591077a	futex replace barrier in unqueue_me with read_once commit e91467ecd1ef bug in futex unqueue_me introduced a barrier in unqueue_me to prevent the compiler from rereading the lock pointer which might change after a check for null replace the barrier with a read_once for the following reasons __number__ read_once is a weaker form of barrier that affects only the specific load operation while barrier is a general compiler level memory barrier read_once was not available at the time when the barrier was added __number__ aside of that read_once is descriptive and self explainatory while a barrier without comment is not clear to the casual reader no functional change tglx massaged changelog link
a6e7fe5c042c171d912783a8bf0918b7f68aefe4	staging unisys visorchipset use correct type for dev_no is only assigned the value of which is a u32 no point promoting it to a u64
a4bf6153b317754e058ad9c7f5f02367e0bfdcc8	hid logitech-hidpp add a sysfs file to tell we support power_supply this way upower can add a simple udev rule to decide whether or not it should use the internal unifying support or just the generic kernel one
32ebc292119a92e3f753a287923d2d31846247f6	remove bxt restore arbitration around ctx switch this wadisablectxrestorearbitration was only used for preproduction hw which is no longer in use remove the workaround to simplify the code
a481377013c1c07dac0421886db7a6b4c3081c49	serial mxs-auart convert to the patch converts mxs-auart driver to by using helper functions
922021854bd8a0221fcb05aec2c13409cffb924e	bluetooth expose debugfs entry own address type for some testing it is important to know the current own addres type but also be able to change it the change is lost over powery cycles and only intended for debugging
bd842b8ca7f207b99a5476a8174e62c29a2ff80e	libnvdimm pmem use for driver private data save a pointer chase by storing the driver private data in the request_queue rather than the gendisk
feeac225bed91c8da221e32a433780a5edcb14e8	wil6210 print ciphers in debug info print at debug level all cipher and akm suites
25e75703410a84b80623da3653db6b70282e5c6a	capabilities call has_ns_capability from has_capability declare the more specific has_ns_capability first in the code and then call it from has_capability the declaration reversal isnt stricty necessary since they are both declared in header files but it just makes sense to put more specific functions first in the code
a5cf79e3ace423360126a4eeb5089c19c99ae060	staging comedi ni_pcimio use mite_alloc allocate struct mite_device dynamically instead of searching for one on the mite_devices list constructed by the mite module
39fe33f98b64501f5816f743c052215e7f66700b	spi atmel fix scheduling while atomic a call to clk_get_rate appears to be called in the context of an interrupt cache the bus clock for the frequency calculations in transmission this fixes a bug scheduling while atomic and warning cpu __number__ pid __number__ at atmel_spi_unlock
c0589fa78ae534acb741370872c4e13578d2f164	remove dead urls urls to and no longer resolve remove all references to these urls in the driver source and documentation
17f830bb83ff64533f02cfd4b114d4a5957c2ee7	pci pciehp use pci_exp_sltcap_psn define use pci_exp_sltcap_psn to make it easier to find code that uses the physical slot number field in the pcie slot capabilities register no functional change
774dfc9bb7f2ab1950a790a8f13eca3d5c580033	gart fix register offset correctly dt passes the exact gart register ranges without any overlapping with mc register ranges gart register offset needs to be adjusted by one passed by dt correctly
f05f33fae3c720bd555ceb15b46beb4c642b663a	staging nvec fix comparison to null replace the use of comparison to null use instead checkpatch detected these issues
04e1b2e52b17195c9a1daa5935c55a4c8716095c	futex split out the first waiter attachment from lookup_pi_state we want to be a bit more clever in futex_lock_pi_atomic and separate the possible states split out the code which attaches the first waiter to the owner into a separate function no functional change link
cd7dc7a42cb541916316f6350dcc69f7af4c289c	asoc imx-mc13783 cleanup
4de5933780f897b89e4863fa545c08a086325353	crypto tcrypt add more camellia tests add tests for ctr lrw and xts modes
9aca813e1401dcafe1c0a9d3b03795e254571504	media v4l vsp1 bru support non-premultiplied colors at the bru output the bru outputs premultiplied colors enable color data normalization when the format configured at the output of the pipeline isnt premultiplied
a29310497038410ad17ff5ec257d3c34568b96d4	remove empty function after the switch to functions and the removal of rtc_device_unregister the remove function does not do anything delete it
06b57e4550d400c2e7dcafbde6fdb1fcb6fcdcee	init padding only if a device exists if no device exists its pointless to calculate the padding data for the schemata files
e18dbf7efcb7a727e5db773597ddfd6981a530e6	sh_eth add support for r8a7790 soc this is a copy of support for with the mode bit of struct sh_eth_cpu_data set also update r8a7779 to r8a777x
3bf742ffd48e7d1cea864741a123203207b33b80	extcon max77693 fix uninitialised variable warning
500bd02fb17e5d9296c77ccc07db61fd5d4922a4	remove pointless indirections from bigsmp_apic link
4a2e2d0d6bb3689fd317b1c89b7b6eb19b632600	crypto enable dt probing of the driver by providing an of match table with a suitable compatible string we can ensure the ux500-hasht driver is probed by supplying an associated dt node in a given platforms device tree
0ca00fc1f808602137dc6d51f17747b3bb0fc34d	fix blue flame quota logic blue flame is a latency enhancement feature that allows the driver to write the packet data directly to the nics registers thus making the read of the packet data from host memory redundant we maintain a quota for the blue flame which is reloaded whenever we identify that the hardware is processing send requests and processes them fast enough so by the time we post the next send request it was able to process all the pending ones this indicates that the hardware is capable of processing more blue flame requests efficiently the blue flame quota is decremented whenever we send using blue flame the current code erroneously clears the budget if we did not use blue flame for the current post send operation and we fix it here
04abac5fd6ad9341434add1c27047f4b16ada92c	bonding remove unnecessary initialization bond_3ad_bind_slave calls ad_initialize_port and then immediately assigns correct values making some of that initialization unnecessary
d51dafaf07bf78ff0db4f2c238287dd9ccf42c08	assert all timeline requests are gone before fini during i915_gem_timeline_fini assert that all the timelines request are completed and removed from the timeline
f49d1e058d23a5fabeb1499be739af8b3db52164	ceph handle lookup_rcu in ceph_d_revalidate we can now handle the snapshot cases under rcu as well as the non-snapshot case when we dont need to queue up a lease renewal allow lookup_rcu walks to proceed under those conditions
882e3f8e6966109ad837cfe79e97cf3deb3ae19b	target_core_sbc use noop for synchronize_cache windows does not expect synchronize_cache to be not supported and will generate a bsod upon shutdown when using rd_mcp backend so better use a noop here
1b7cd0044e4a9f69aaf00511870b07fcdeda591d	net remove duplicate code netdev_rx_handler_register checks to see if the handler is already busy which was recently separated into netdev_is_rx_handler_busy so use the same function inside register to avoid code duplication essentially this change should be a no-op
1f23f12151ab508728dd5fca12180e2fce6c6949	cfq-iosched get rid of unnecessary local variable use of local varibale n seems to be unnecessary remove it this brings it inline with function __cfq_group_st_add which is also doing the similar operation of adding a group to a rb tree no functionality change here
9987f76ad286887978803ece6cdcf34582279a29	serial mxs-auart set the fifo size to dma buffer size when dma is enabled with hardware flow control enabled the fifo size must be set to the size of the dma buffer as this is the size the tty subsystem can use
1bf59bf6ded8411058b4c9acc45d9dd8d6965464	gfs2 make two similar quota code fragments into a function there should be no functional change bar the removal of a test of the ms_readonly flag which would never be reachable this merges the common code from qd_fish and qd_trylock into a single function and calls it from both those places
104b2d8776a42e2b8f9d349adfd71af0794e2a8a	rtc m41t80 use devm_add_action_or_reset if devm_add_action fails we are explicitly calling the cleanup to free the resources allocated lets use the helper devm_add_action_or_reset and return directly in case of error as we know that the cleanup function has been already called by the helper if there was any error
37e4f91aa391310de77346055600068f8a81f730	i2c i2c-bcm2835 drop class based scanning to improve bootup time this driver has been flagged to drop class based instantiation the removal improves boot-up time and is unneeded for embedded controllers users have been warned to switch for some time now so we can actually do the removal keep the deprecated flag so the core can inform users that the behaviour finally changed now after another transition period this flag can go too
eb1716af887375f1e2099f69bb89dfc5bd169bfa	btrfs avoid double free of when btrfs_read_qgroup_config or btrfs_quota_enable return non-zero weve already freed the the final btrfs_free_qgroup_config called from quota_disable makes another call we set to null on the mentioned error paths turning the ulist_free in btrfs_free_qgroup_config into a noop
b0898fdaffb2932aba0108986b90d9d69888e189	i2c designware-pci use irqf_cond_suspend flag the mentioned flag fixes a warning on intel edison board since one of the i2c controller shares irq line with watchdog timer
e8b3fe8f383bbf055cbd69b776fcbbb5ed3befcd	asoc topology abi use __le32 instead of __u32 in snd_soc_tplg_dapm_widget this fixes the endianness of the abi parameters in the struct the field num_kcontrols is also extended from __number__ bits to __number__ bits
712d65915a3ad5bffaa8cd97e6dd951e1d10eabd	greybus tiny movement around
9ce6e50406ba2c3781df8dc196c85a9437ff0410	dmaengine coh901318 use dma_complete for dma completion status
1f8665320fa1a232fda22bcc7f88daeb83628385	wlcore disable multicast filter in ap mode enable ap support for allmulticast for mdns it can be enabled by bringing up the interface with ip command with argument allmulticast on
444f8bda81a35ae7b1e7558e971b2dbc397d3ca9	media usb remove useless return variables this patch remove variables that are initialized with a constant are never updated and are only used as parameter of return return the constant instead of using a variable verified by compilation only the coccinelle script that find and fixes this issue is type t constant c identifier ret t ret c when ret return ret return c
9ec60972a38011ad8a5676f4cd5e51ac508c36b6	perf hists add missing fields when collapsing a hist entry so that the perf report wont lost the cpu utilization information for example if therere two process that have same name perf report pid snip overhead sys us command pid before perf report comm snip overhead sys us after perf report comm snip overhead sys us link
4ea425b63a3dfeb7707fc7cc7161c11a51e871ed	vfs avoid unnecessary wb_sync_none writeback during sys_sync and reorder sync passes wakeup_flusher_threads0 will queue work doing complete writeback for each flusher thread thus there is not much point in submitting another work doing full inode wb_sync_none writeback by writeback_inodes_sb after this change it does not make sense to call nonblocking and block device flush before calling sync_inodes_sb because wakeup_flusher_threads is completely asynchronous and thus these functions would be called in parallel with inode writeback running which will effectively void any work they do so we move sync_inodes_sb call before these two functions
8e89a356feb6f196824a72101861d931a97ac2d2	s390 standardize mmap_rnd usage in preparation for splitting out et_dyn aslr this refactors the use of mmap_rnd to be used similarly to arm and x86 and extracts the checking of pf_randomize
15b94fa32a422f4b97dc34e4b7060ec83d10bee5	acpi ec fix a memory leak issue in acpi_ec_query when query handler is not found result is actually stil __number__ and struct acpi_ec_query is not null so the deletion code of struct acpi_ec_query at the end of the function cannot be invoked as a consequence memory leak can be observed the issue is introduced by this commit commit subject acpi ec fix an issue caused by the serialized _qxx this patch fixes such memory leakage
6a41dd0922e3c63e677c2d8f7906ce6a3e097af1	btrfs account for the correct number of extents for delalloc reservations direct io can easily pass in an buffer that is greater than btrfs_max_extent_size so take this into account when reserving extents in the delalloc reservation code thanks
3db93420f780d39dbef22ef6a5485aac009e02dc	iwlwifi mvm advertise randomised netdetect mac address according to the nl80211 documentation we can neither advertise scheduled scan nor netdetect address randomisation however all the products that currently require this dont have a need for the full randomisation therefore advertise the feature anyway which results in host- based randomisation done whenever the system suspends this is sufficient for the platforms currently requiring this feature if we ever extend this in the future to do full randomisation in the firmware then certainly this will still be sufficient for the current requirements so it doesnt make a lot of sense to split the feature bits
425f6d603371d1592830f27cc9779181a7146d6b	drop empty function no need to ack non-existent interrupts
abc1fd4f92d86168790a9eaf9834713a41da788e	target minor cleanups to core_tmr_drain_tmr_list this patch adds a handful minor cleanups to core_tmr_drain_tmr_list that remove an unnecessary null check use list_for_each_entry_safe instead of list_entry and makes the drain_tmr_list walk use instead of directly referencing the passed function parameter
9338026107166b54d54ef875978c9c3dca3aaee5	batman-adv remove unused variable from orig_node struct
2856ac13b8ab41a17b1c65e4eed51543e55f4bac	use a workqueue per omap2_mcspi controller currently all the spi controllers share the work queue this patch allocates a work queue per controller
7667fe69e743c338bb121678dd14f1dc3ae27acb	usb ehci-fsl use devm_ioremap_resource use devm_ioremap_resource to make cleanup paths simpler
6a171b29937984a5e0bf29d6577b055998f03edb	serial allow hardware flow control to be used in the most common use case the synopsys dw uart driver does not set the set_termios callback function this prevents upstat_autocts from being set when the uart flag crtscts is set as a result the driver will use software flow control as opposed to hardware flow control to fix the problem the set_termios callback function is set to the dw specific function the logic to set upstat_autocts is moved so that any clock error will not affect setting the hardware flow control
57106e5ca55bea70e3e296a3e7546aefe0d1dabe	pinctrl sh-pfc remove empty gpio_function_free is optional and can just be left unimplemented
6e6668845fe593414a938b7726d6359b5570ac5a	reenable interrupts when alloc_pid fails because init has exited were forgetting to reenable local interrupts on an error path
868055fdd2399cbb0cb3fe0cd7b5047a3a77b8b9	usb gadget rndis change the value passed to rndis_signal_disconnect the patch usb gadget rndis use rndis_params instead of confignr should change all invocations of rndis_signal_disconnect this patch fixes that
9cb02eefecd0d75a8b4bb73bb66dd14c22feaac2	mmc mediatek fix module autoload if the driver is built as a module autoload wont work because the module alias information is not filled so user-space cant match the registered device with the corresponding module export the module alias information using the module_device_table macro before this patch modinfo grep alias after this patch modinfo grep alias alias alias
88c6eb0e3b81a30514d21679735fa25d028c2299	mmc sdhci-of-at91 use sdhci_quirk2_need_delay_after_int_clk_rst quirk the atmel sdhci device needs the sdhci_quirk2_need_delay_after_int_clk_rst quirk without it the internal clock could never stabilised when changing the sd clock frequency
8633c0846160af0b8cfb983bbccd94ae42922af8	ixgbe fix memory leak in ixgbe when receiving traffic on ddp enabled rings this patch fixes a memory leak that was introduced in the __float__ kernel the leak occurred when fcoe was enabled and traffic was passed over the fcoe rings reserved for fcoe the memory leak was due to us not populating the compound page information on the order __number__ pages needed for fcoe
fc6138b6cfc0319791ff860aecd06126b0c6e578	staging wilc1000 change handle_set_ip_addresss return type to void when handle_set_ip_address is called in hostifthread that is a kernel thread it is not checked return type of this function this patch changes return type to void and removes braces if statement due to have a single statement
c56dbd57f3627203f2384ae1a5e71cf41904370e	wl12xx fix race between and recovery the iteration on the wlvif list in was perfomed before locking which would lead to a kernel panic in case a recovery was queued at the same time and would delete the wlvifs from the list
cef6a948271d5437f96e731878f2e9cb8c9820b7	nvme command abort handling fixes aborts all requeued commands prior to killing the request_queue for commands that time out on a dying request queue set the do not retry bit on the command status so the command cannot be requeued finanally if the driver is requested to abort a command it did not start do nothing
0ddf1d77505fd97daa7fc70bb0498c54a5c33725	scsi hpsa do not require board not ready status after hard reset immediately following a hard board reset there are some mandatory delays during which we must not access the board and during which we might miss the not ready status therefore it is a mistake to look for and expect to see the not ready status
d1054ee492a89b134fb0ac527b0714c277ae9c0f	handle enospc after failing to insert a mappable node even after adding individual page support for gtt mmaping we can still fail to find any space within the mappable region and drm_mm_insert_node will then report enospc we have to then handle this error by using the shmem access to the pages testcase
2c452dd8af9da98b4b0ae1f12f8059160c7b11b5	asoc codec duplicated callback function goes to component on wm9713 codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
0fe0adf82f95ed5ce5a75512b281f6cbc89cefa1	alsa hda replace with standard consts in
e93d12ae3be91d18b2a46deebb90a3f516db3d3c	null_blk use sector_div instead of do_div dividing a sector_t number should be done using sector_div rather than do_div to optimize the sector_t case and with the latest do_div optimizations we now get a compile-time warning for this note expected uint64_t long long unsigned int but argument is of type sector_t long unsigned int warning comparison of distinct pointer types lacks a cast this changes the newly added code to use sector_div it is a simplified version of the original patch as linus torvalds pointed out that we should not be using an expensive division function in the first place this version was suggested by matias bjorling
601b9d9c7bd04f81a96896c9859cd37bd6a78d51	asoc sti-sas fix x86 compilation issue fixes for compilation warnings and errors reported by kbuild test robot for x86_64 and i386
d212b4633c3a99561939f2d423eacf3263850bcd	hv_netvsc fix accessing freed memory in netvsc_change_mtu struct netvsc_device is freed in rndis_filter_device_remove so we save the into a temp variable for later usage please also include this patch into stable branch
2fd632a00383e812db7186f903ebed808d9951bd	enable cacheable attribute read-allocate hints read-allocation hints are not enabled for both the gic-its and gicr tables this forces the hardware to always read the table contents from an external memory ddr which is slow compared to cache memory most of the tables are often read by hardware so its better to enable read-allocate hints in addition to write-allocate hints in order to improve the gicr_pend gicr_prop collection device and vcpu tables lookup time
f5062003465c20cfe584d9129a463322ad5cf4ea	nfs set an attribute barrier on all updates ensure that we update the attribute barrier even if there were no invalidations provided that this value is newer than the old one
a97e5e6fd027840fc28c72470c581ba68ee9732a	dm thin metadata remove nr_blocks arg from __create_persistent_data_objects remove nr_blocks arg from __create_persistent_data_objects in dm-thin-metadata it was always passed as zero
bcffb10f287c89ca6e4f89ef748301a9e22384d0	dont let get_time reset m41t93_flag_of if the rtc reports the time might be invalid due to oscillator failure m41t93_flag_of flag must not be reset by get_time as the read operation doesnt make the time valid without this patch only the first get_time reported an invalid time the second get_time reported a valid time althought the reported time is probably wrong due to oscillator failure instead of resetting in get_time with this patch m41t93_flag_of is reset in set_time when a valid time is to be written
3dbeb83c245bbdc906eb54821d1cd77a25f56741	staging comedi fix printk issue in this is a patch to the file that fixes up a printk warning found by the tool converted printks to dev_version
9846e70b9bcd9ec11f82a47df159d1b1dfb02eee	qeth remove extraneous length from format length specifier in the format is not supported at least not documented remove it and also an extraneous for the array
47e27d5e92c46a3a62d4dfd8895b1ddb8613f531	ipv6 token allow for clearing the current device token the original tokenized iid support implemented via f53adae4eae5 net ipv6 add tokenized interface identifier support didnt allow for clearing a device token as it was intended that this addressing mode was the only one active for globally scoped ipv6 addresses later we relaxed that restriction via net ipv6 only invalidate previously tokenized addresses and we should also allow for clearing tokens as theres no good reason why it shouldnt be allowed
f1e3c289498f26d98b65ddaae0cd892c98a6ce84	btrfs prevent rcu warning when dereferencing radix tree slot mark the dereference as protected by lock not doing so triggers an rcu warning since the radix tree assumed that rcu is in use
ec6a52668d0bbc6d648e978c327150254bf1ce7f	sysctl add ctl_table chains into cstring paths for any component of table passed to __register_sysctl_paths that actually serves as a path add that to the cstring path that is passed to __register_sysctl_table the result is that for most calls to __register_sysctl_paths we only pass a table to __register_sysctl_table that contains no child directories
a7d5f58d7dfb2f342ef7d676f58d1ec762ebb8ad	phylib use mdio_devs12 the bare register numbers are used despite has mdio_devs12 for those
74d9daafa5e0b4f9183540b41b337d42662f537b	bluetooth btusb limit hardware error handling to intel snowfield peak in general all intel bluetooth devices support retrieving of additional exception information however for older generations including wilkens peak and stone peak it is not as simple so for now only enable the intel specific error handling for snowfield peak and later devices
13a66d2f9d86fc002322767acc4a955f8bc40a71	initial support
c0b8da1e7613a11ce7e44560aae507b62da1f846	ipv6 fix finding best source address in ipv6_dev_get_saddr commit ipv6 do not iterate over all interfaces when finding source address on specific interface did not properly update best source address available plus it introduced possible null pointer dereference bug was reported by erik kline based on patch proposed by hajime tazaki iterate over all interfaces when finding source address on specific interface
f2fe2fa1fbad72e469f49da3716f176a9b53fb75	freevxfs fix lack of inode initialization there is nothing worse than just allocated inode without being initialized _once
eed695d70e7eff55595f222b55b96f105d4a27ca	scsi lpfc fix sg_reset on scsi device causing kernel crash fix sg_reset on scsi device causing kernel crash driver could reference stale node pointers in task mgmt call changed to use resetting cmd and look up node pointer in task mgmt function
c298125f4bc30fdbe4b7c33460ef57271cc51a7d	kvm mmio lock coalesced device when checking for available entry move the check whether there are available entries to within the spinlock this allows working with larger amount of vcpus and reduces premature exits when using a large number of vcpus
ef484423f5d4775db09ef61f1bab98862a70656d	staging vt6656 rename device_alloc_bufs to vnt_alloc_bufs changing device to vnt
e0e12a9282a879577ba8e35c73ff5d94ae1f50b9	viafb set correct polarity for second adapter this patch sets the correct polarity for the second adapter when viafb_samm_on is set and viafb_dual_fb is not set just one step to make this mode useful
024931694730a2ad31bc1e7c58a028abe441180b	staging lustre lmv_obd remove redundant test filp null is already checked so no need to check it again
1f33a51d9771b34be3cb6f7fb96a325e17bbac7b	tty serial remove btm from wait_until_sent during the bkl removal process the bkl was switched to tty_lock btm now we should start pruning the btm further lets start with wait_until_sent of the serial layer this will allow us to switch to the tty port helpers and thus clean it up much in wait_until_sent there are some uport members accessed but neither of them is protected by btm at the location they are set means function call set in tty_ioctl uart_ioctl uart_set_info set in add_one_port prior to tty_register_device set usually in tty_ioctl tty_mode_ioctl tty_set_termios uart_set_termios uart_change_speed uart_update_timeout call to if the tx_empty hook needs some lock to protect accesses to registers it should take spinlock like __number__ does otherwise there still might be races with isrs this should also fix the issue andreas is seeing btm in comparison to bkl doesnt have any hidden functionality like unlocking during sleeping references
b7382d44a530cd8c1bc156ddc123e3f09ae68746	staging most add missing call to ida_simple_remove this patch adds two missing calls to function ida_simpel_remove
549f66e0286bb800e024d80582f9c95c6f4f5947	asoc wm8994 remove redundant oom message let memory subsystem handle the error logging
f19885fadfdb0bf410b5e31c7dc2f2be7815e454	staging sep call to sep_ioctl may leave driver in unusable state if sep_ioctl is called from a process that does not own current transaction it unlocks unheld and returns leaving acquired the patch fixes the mutex lock-unlock mismatch found by linux driver verification project
c699995663b40d61afcc14ca27f0106f13151772	pwm meson add missing spin_lock_init the driver uses the spin_lock but does not initialize it fix it
1c30e0177e4f41a11cb88b0f1f056ccebfe0fff4	mm numa make numa-migrate related functions static numamigrate_update_ratelimit and numamigrate_isolate_page only have callers in this patch makes them static
bff03e81502cb9ac99daeeb47b4d0e779cc48fde	asoc nau8825 jack connection decision with different insertion logic the original design only covers the jack insertion logic is active low add more condition to cover no matter the logic is active low and high
9aa8ec676b6ef151ab11868d16a928d92410d25e	i2c omap prevent the overwrite of the errata flags i2c_probe set the flag but omap_i2c_init cleared the flag again prevent the overwrite of the errata the errata handling to a unified place in probe to prevent such errors
9d8cd306a8f4cf104d5ef2e2f8f8f4f4854770a2	__d_move fold manipulations with list_del list_add is a slightly pessimised list_move list_del init_list_head is a slightly pessimised list_del_init interleaving those makes the resulting code even worse and harder to
6c98d31ee83ddd351e89d5e2002e678fdaf9d2af	fix no-vmid job __float__ amdgpu __number__ vm ib without id __float__ amdgpu error scheduling ibs __float__ amdgpu failed to run job root cause is fence is signaled during sync transfer
9cc8f9fe0f9e84771f2872f8939d37414ef9d58d	asoc intel common update dsp register poll implementation poll implementation is not quite accurate especially for smaller values of timeout or timeout values close to the actual timeout needed use jiffies to set the timeout value and time_before to get the accurate time so update the dsp register poll implementation to provide accurate timeout using jiffies
4adf4351145e65dd98407299496ef00d82430b48	net thunderx add pci driver shutdown routine
19913b6db3aa417d855318c9cf5b40fbc1f28e52	tpm fix call order in tpm_dev_add_device cdev_add must be done before uevent is propagated in order to avoid races tpm_chip_register tpm_dev_add_device must be done as the last step before exposing device to the user space in order to avoid races in addition clarified description in tpm_chip_register
20af74ef140f0fbc477f90817c58241107782e10	devres use to_pci_dev use to_pci_dev instead of open-coding it
d2fd147c59d187dcf65e2acf6b7c9c34f2f760e1	alsa ad1848 utilize the module_isa_driver macro this driver does not do anything special in module this patch eliminates the module boilerplate code by utilizing the module_isa_driver macro
6f425321e02a1b6c5e90b70f8fab7c140fcaeefb	dont unconditionally try to deref aliasing ppgtt since the beginning the functions which try to properly reference the aliasing ppgtt have deferences a potentially null aliasing_ppgtt member since the accessors are meant to be global this will not do introduced originally in commit a70a3148b0c61cb7c588ea650db785b261b378a3 author ben widawsky bwidawsk.net date wed jul __number__ __number__ make proper functions for vms
b3a8cb18ce284b5c47517b681c42fcb9d8a99992	tile switch from ts_polling to tif_polling_nrflag standardize the idle polling indicator to tif_polling_nrflag such that both tif_need_resched and tif_polling_nrflag are in the same word this will allow us using fetch_or to both set need_resched and check for polling_nrflag in a single operation and avoid pointless wakeups changing from the non-atomic flags to the atomic shouldnt be a big issue since most polling state changes were by a full memory barrier anyway link
42089697244ba8e64fa43fb5e6d50d47a8e4cb00	detect number of instances of uncore cbox the cbox manages the interface between the core and the llc so the instances of uncore cbox is equal to number of cores link
bef5da60595f5706232e2502876f8545743b9b41	fix a warning message to show correct maximum length since will accept a probe definition up to __number__ __number__ and bytes it must show __number__ instead of __number__ in warning message note that there is one possible case of exceed __number__ if user prepare __number__ bytes null-terminated string and syscall write it with the count __number__ then it can be accepted however if user puts a after that it must rejected so imho the warning message should indicate shorter one since it is safer link
425688986a086196e52c88106d0646bbd4ba5405	staging wilc1000 rename u8scansource of struct scan_attr this patch renames u8scansource of struct scan_attr to src to avoid camelcase naming convention
f6fe2be3c6d6f0127742ae1cc2e3ffe9ad31ea8b	f2fs should put_page for summary page we should call put_page for preloaded summary pages in do_garbage_collect
0d8bb414cf51aa4fd847741233057da50f72a7a3	ixgbevf use ether_addr_copy instead of memcpy use the macro to copy the ethernet address instead of memcpy
bca1a290033d20981e11f81ae4207e4d0fa5b1e6	btrfs add a reschedule point in btrfs_find_all_roots i can easily trigger the following warnings when enabling quota in my virtual machinerunning opensuse steps are firstly creating a subvolume full of fragment extents and then create many snapshots __number__ in my test case __float__ bug soft lockup stuck for __float__ task ti __float__ eip eflags __number__ cpu __number__ __float__ eip is at btrfs __float__ eax __number__ ebx ecx __number__ edx __float__ esi edi ebp esp __float__ ds es fs gs ss __number__ __float__ cr0 __number__ cr2 cr3 cr4 __float__ stack __float__ __number__ __number__ __number__ __float__ __number__ __number__ __number__ __number__ __number__ __number__ __float__ __number__ __number__ __number__ __number__ __number__ __float__ call trace __float__ btrfs __float__ btrfs __float__ btrfs __float__ __float__ btrfs __float__ __float__ btrfs __float__ __float__ __float__ by adding a reschedule point at the end of btrfs_find_all_roots i no longer hit these warnings
d31652a26bc9e752a99b6ac3b61353129934e451	nfc fix target mode p2p link establishment with commit we set the active_target pointer from nfc_dep_link_is_up in order to support the case where the target detection and the dep link setting are done atomically by the driver that can only happen in initiator mode so we need to check for that otherwise we fail to bring a p2p link in target mode
80bd33acdaa21fafa8ff4391ccdf879d227111bb	mtd gpmi only scan two chips for imx6 we cannot scan two chips for imx23 and imx28 imx23 the ready-busy1 line is not connected for some board imx28 we do not set the pinctrl for ready-busy1 so we only scan two chips for imx6
a500e0e73514ee2b838e439d3eb0750dda1da20f	drivers hv kvp copy the address family information this is part of the ip injection protocol in that the host expects this field to reflect what addresses address families are currently bound to the interface the kvp daemon is currently collecting this information and sending it to the kernel component i had overlooked copying this and sending it back to the host this patch addresses this issue
0f5a751ace250097d3ad7835df7d376f21f44509	enable gpio prior to starting hardware to help with bisection of future refactoring to share more of the code for handling a spi_message pull the enabling of gpio based prior to all the hardware setup for starting a transfer
afe5c118bd07edcb00503bd0f4ab83a6e56ae9d8	staging comedi adv_pci_dio post increment subdev in for aesthetics post-increment the subdev index when used to get a comedi_subdevice pointer instead of incrementing it after the subdevice is initialized
34624d6631b6b3a1df16407a847286bb6233a96b	netxen suppress false lro warning messages when interface is down driver prints false warning messages during lro configuration through ethtool
7bd0a8e74acc608b77008a6ee9c0198c684ea38b	set to null for pipes that are about to be disabled is only relevant for pipes that are going to be active post-modeset set the pointer to null for all pipes that are going to be disabled this is done to help catch bugs where some piece of code would go looking at even if the data there is stale v2 clear new_config in disable_crtc_nofb too imre
bdf1340cf20f8cb127850a6174aa9437c0941161	brcmfmac fix sdio suspend and resume commit brcmfmac add wowl support for sdio devices changed the behaviour by removing the mmc_pm_keep_power flag for non-wowl scenario which needs to be restored another necessary change is to mark the card as being non-removable with this in place the suspend resume test passes successfully doing echo devices echo mem note that power may still be switched off when system is going in s3 state reported-by fu zhonghui
a7c4183be2d6a7da8c97a9b671b5f3aed321127e	asoc wm8994 disable line output discharge prior to ramping vmid
317d4adfd37729452c840821c71d1162d5d63f39	scsi hpsa get physical device handles for io accel mode __number__ as well as mode __number__
3f4beddff34832fa38c574c55d1fc60c286cb894	staging comedi dmm32at rename dmm32at_ailmsb for aesthetics rename these defines used for the registers
77e8058810303e5c18b462adb4f761dbb4f3b657	spi bugfix does not get reset when submitting an identical spi_message multiple times via spi_sync the does not get reset to __number__ in __spi_validate before adding up all resulting in frame_length actual_length on all but the first spi_sync call
3fd681b68cd34eacb106b25fcb10bb202a3232c5	alpha handle pgtable_page_ctor fail
fc5c13ccd990fa2c8bb6351053c0cf37025fd37f	staging r8712u fix sparse warnings in sparse reports the following check warning restricted __le16 degrades to integer warning restricted __le16 degrades to integer
9033a5f9ac83538502a2bddc62311b09d966799e	spi cadence use to_platform_device use to_platform_device instead of open-coding it
542a564d2ddbd2c37536b4dff8e45fa0fc239bcc	sh-pfc make function gpios support optional the target is to get rid of function gpios completely to reach this make function gpios support optional by skipping the function gpio chip registration if no function gpios are defined in soc data
ab256e5ad02b36951f01bf6b5cfda25f14820847	add a check if there are too many reserved qps the number of reserved qps is affected both from the firmware and from the drivers requirements this patch adds a check that validates that this number is indeed feasable
3d50d51a530d7c672cfbac03fef365b1fa7a244e	bluetooth set hci_quirk_simultaneous_discovery for btusb_ath3012 atheros controllers can do both le scan and inquiry at once
7b3343b7e804bb89ad24a0a8c4e8e1010a418f14	allow several mpt methods to be null hypervisors are different the mpt ops is a only superset of all possibly supported hypervisors there might be other way out of the mpt to achieve same target vfio-based kvmgt wont provide map_gfn_to_mfn method to establish guest ept mapping for aperture since it will be done in mmio is also trapped elsewhere etc
d47fa5315cca0c7c06b97abfbd77859d5296be2c	media hackrf move rf gain ctrl enable behind module parameter used avago mga-81563 rf amplifier could be destroyed pretty easily with too strong signal or transmitting to bad antenna add module parameter enable_rf_gain_ctrl which allows enabling rf gain control otherwise default without the module parameter rf gain control is set to grabbed state which prevents setting value to the control
5f2210627f8d3c5f7842b4c20d65d9f81690be49	staging comedi s526 remove devpriv macro this macro relies on a local variable having a specific name
17d1587f553dbdc9a55fe253903437f7e3e3448e	unexport do_munmap
167c1af9443757bb9d27ceff8ba4304302cb0651	gpiolib-of staticize the pin range calls commit gpiolib provide provision to register pin ranges declared the global while they should be static as they are only ever used in this file lets convert them to static
b79462a8b9f9a452edc20c64a70a89ba3b0a6a88	team fix checks in team_get_first_port_txable_rcu should be checked if cur is txable not port introduced by commit team use function team_port_txable for determing enabled and up port
812787b8e4ea1a1c9144fe06ebf9b45371b2f5ce	cxgb4 use napi_complete_done api in napi handler
3d0c24cd9bedf5a0665d60c8219a0a84c05abeb3	scsi megaraid_sas return leaked mpt frames to mpt frame pool the following patch for megaraid_sas will return leaked mpt frames from any polled dcmds that timeout to the mpt frame pool
646dd2f0a980949b05042792fbadd72b735c3eda	arm s3c24xx fix interrupt pending register offset of the eint controller the external pending interrupt register address eintpend offset is not without this patch the external interrupts are not properly acknowledged which may lead to an interrupt storm and the system hang as soon as any external interrupt is requested
5eb764edee52e837638b8d55ceace2c68e248cd2	switchdev align comment with other comments in block
5a488b9d2c25d98cdd11d09de311bfc83ba09fbd	btrfs fix unexpected balance crash due to bug_on mounting a btrfs can resume previous balance operations asynchronously an user got a crash when one drive has some corrupt sectors since balance can cancel itself in case of any error we can gracefully return errors to upper layers and let balance do the cancel job
069cb27017de6476d47a70fbf144f69200d3e854	bluetooth improve data packing in sar mode there is no need to decrease pdu size with l2cap sdu lenght in start l2cap sdu frame start packtet is just __number__ bytes longer as specified and we can keep payload as long as possible when testing sar l2cap against pts l2cap channel is usually configured in that way that sdu mps __number__ pts expets then __number__ i-frames from iut start continuation and end frame without this fix we sent __number__ i-frames we could pass a test by using option in l2test and send just two bytes less than sdu length with this patch no need to use option
b63b5e819d5b21ae493c17c356018ffa98d3ee1c	mmc core correct invalid error checking the effect of the existing code is that we continue blindly when we should warn about an invalid allocation unit reported-by resolves-bug
0794aed3028544e10997e14aa7685ec10a5b4203	fix context object leak for legacy contexts dynamic context pinning for lrcs introduced a leak in legacy mode reinstate context unreference in i915_gem_free_request for legacy contexts leak reported by fixed by this patch bugzilla
465939a1fa283cf2a5194362c5accf4429c99c42	memcg dont need to free memcg via rcu or workqueue now memcg has the same life cycle with its corresponding cgroup and a cgroup is freed via rcu and then mem_cgroup_css_free will be called in a work function so we can simply call __mem_cgroup_free in mem_cgroup_css_free this actually reverts commit memcg free mem_cgroup by rcu to fix oops
f1a61a8888afb9c21bb7efdd25f2755b01f065d3	convert attributes to new naming spec add the missing voltage chan_type to the powerdown attributes
72a86ccd3a4b60dacddc97095e13f32ee6117314	fix registration of null pointer when the new allocation code was introduced a stray pointer to iio_dev structure was left in the chip state structure this was never set but was then registered with the core
5c2b8a162b5f8616f709bf20d5ec88f709485522	cleanup on addition to bootmem data list the objects of struct bootmem_data_t are linked together to form double-linked list sequentially based on its minimal page frame number the current implementation implicitly supports the following cases which means the inserting point for current bootmem data depends on how list_for_each works that makes the code a little hard to read besides list_for_each and list_entry can be replaced with list_for_each_entry the linked list is empty there has no entry in the linked list whose minimal page frame number is bigger than current one
9ae79876d8c9e2ff7d083ad799fcf98488af49b6	usb host lpc32xx fix warnings caused by enabling unprepared clock if common clock framework is configured the driver generates a warning which is fixed by this change warning cpu __number__ pid __number__ at modules linked in sc16is7xx snd_soc_uda1380 cpu __number__ pid __number__ comm udevd not tainted hardware name lpc32xx soc flattened device tree backtrace dump_backtrace from show_stack from dump_stack from warn_slowpath_common from warn_slowpath_null from clk_core_enable from clk_enable from ohci_nxp ohci_hcd_nxp_probe ohci_nxp from platform_drv_probe from driver_probe_device from __driver_attach from bus_for_each_dev from driver_attach from bus_add_driver from driver_register from __platform_driver_register from ohci_nxp ohci_nxp_init ohci_nxp from do_one_initcall from do_init_module from load_module from sys_finit_module from
85c9ccd4f026aad8e91ec1c182206e807cff932d	dont write bitmap while earlier writes might be in-flight as we dont wait for writes to complete in bitmap_daemon_work they could still be in-flight when bitmap_unplug writes again or when bitmap_daemon_work tries to write again this can be confusing and could risk the wrong data being written last so make sure we wait for old writes to complete before new writes start
bd0c30e310d43c49debe380e344307b677e182a6	fix for possible null pointer dereference there is otherwise a risk of a possible null pointer dereference was largely found by using a static code analysis program called cppcheck
8b38b3a16719ee86f9aa2fd1bc479db7d5b28e48	compute the elsp register location once similar to the issue with reading from the context status buffer see commit move csb mmio reads out of the execlists lock we frequently write to the elsp register __number__ writes per interrupt and know we hold the required spinlock and forcewake throughout we can further reduce the cost of writing these registers beyond the i915_write_fw by precomputing the address of the elsp register we also note that the subsequent read serves no purpose here and are happy to see it go v2 address i915_write mistakes in changelog text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ saves __number__ bytes of address recomputation
e00f7bd221292b318d4d09c3f0c2c8af9b1e5edf	virtio silence uninitialized variable warning smatch complains that we might not initialize queue the issue is callers like setup_vq from where num could be something like __number__ and vring_align is __number__ in that case vring_size is less than page_size it wont happen in real life but were getting the value of num from a register so its not really possible to tell what value it holds with static analysis lets just silence the warning
c63bcc6ff135397b38cdb510c173e4a6629cede5	sh pfc get_config_reg shift clean up clean up the f_width shift code in get_config_reg
d632ce989c811863a1ce9b1c53dae2cf06b35c49	bonding in bond_mc_swap bonds mc addr list is walked without lock use netif_addr_lock_bh to acquire the appropriate lock before walking
d25f113f969eb9a0ae3a61d3937a0fbfe7ecdbdd	asoc codec duplicated callback function goes to component on pcm512x codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
0504c074b546651f19f23a214b76d145d3a0f5af	switch to
b73210aec44ddf73ca856cbca2d25daeccf47025	platform-drivers-x86 intel_rar_register convert to define_pci_device_table and also remove unused variable my_id_table
987226a5d3a356792650f8e9028132a79815f6ef	ubifs switch to ubifs_leb_write stop using ubi_leb_write directly and switch to the ubifs_leb_write helper
378f85ed54a424bc7e1edb9c3c7cd3a7efef9f9c	fixup for nvaf special
91e08ab0c8515450258d7ad9033bfe69bebad25a	prevent kasan false positive warnings the oops stack dump code scans the entire stack which can cause kasan stack-out-of-bounds false positive warnings tell kasan to ignore it link
c60b486d4bbb65c764b654588bb0e90bd953d1d5	staging ks7010 refactor newly separated function checkpatch emits various warnings and checks warning avoid multiple line dereference check alignment should match open parenthesis warning line over __number__ characters check blank lines arent necessary before a close brace these are all whitespace fixes refactor whitespace inline with kernel coding style fix various checkpatch warnings
4bf7111f50167133a71c23530ca852a41355e739	support initrd loaded above for boot efi kernel directly without bootloader if the kernel support xlf_can_be_loaded_above_4g we should not limit initrd under
52bcd9986ae6adc69b5e986c09da6fede8ed8119	cpufreq blackfin call cpufreq_frequency_table_put_attr drivers which have an exit path must call cpufreq_frequency_table_put_attr if they have called cpufreq_frequency_table_get_attr in their init path this driver was missing this part and is fixed with this patch
afb6a6a01b51b6712485ea045e2b882061d250d9	staging omapdrm fix crash when freeing bad fb during unload dont cleanup the framebuffer if it is not valid
77ba9119adc48a0bb890ca121f6b8f09162c9182	usb dwc2 gadget dont modify pullup state in host mode modifying the pullup state during host mode trig a new enumeration of attached device thus avoid modifying pullup in host mode
600832fd3dffe2ddaa431cd84cd3b34a7e449285	staging unisys fix camelcase in spar_controlvm_channel_ok_client fix camelcase parameter name pchannel ch
7587f64d546d6a05dab0a7d1ac964e7ac12072f0	mtd m25p80 use opcode_quad_read_4b for addressing commit drivers mtd m25p80 add quad read support in added both the opcode_quad_read and the opcode_quad_read_4b but incorrectly uses opcode_quad_read for both and addressing use opcode_quad_read_4b in the case to fix this
f16593034a30bcbef8f63c37d0f2b9e1a0902c2d	usb dwc2 host fix ahbcfg for rk3066 the comment for ahbcfg for rk3066 parameters also used for rk3288 claimed that ahbcfg was incr16 but it wasnt since the bits werent shifted properly the ended up being masked and we ended up programming for the hbstlen lets set it to incr16 properly as per wu liang feng at rockchip this may increase transmission efficiency i did blackbox tests with writing to a usb-based sd reader forcefully capping cpu freq to try to measure efficiency cd echo userspace scaling_governor echo __number__ scaling_setspeed for i in __number__ do dd done with the above tests i found that speeds went from to note that most other tests i did including reading from the same usb reader didnt show any difference in performance
54011e266499ec80104136bcecec5e8c7e21340c	add components for mdp5 for mdp5 based platforms the master device isnt the mdp5 platform device but the top level mdss device which is a parent to mdp5 and interface dsi hdmi edp etc devices in order to add components on mdp5 platforms we first need to populate the mdss children locate the mdp5 child and then parse its ports to get the display interfaces
bd60e381fab88979c3312265d18bb635c314d242	regmap fix ret would return an uninitialized value this patch give a warning when calling regmap_register_patch with parameter num_regs __number__ when the num_regs parameter is zero and krealloc doesnt fail then the code would return an uninitialized value however calling this function with num_regs __number__ would be a waste as it essentially does nothing
e4f5224464739a89e6a6c9169211ef4f76165056	acpi use resource_size in use the resource_size function instead of explicit computation rjw subject and changelog
014483bcccc5edbf861d89dc1a6f7cdc02f9f4c0	mm mark mm-inline functions as __always_inline gcc sometimes ignores inline directives even for small and simple functions this supposed to be fixed in gcc __float__ but it was released only yesterday
b3e9c12949c1e66f3190e430ad096e53df4e1328	atmel_lcdfb use display information in info not in var for panning we must not use any information in the passed var besides xoffset yoffset and vmode as otherwise applications might abuse it
c81933857bc1192968bfae736a469a126672143b	fix a style error removed a few spaces to fix style errors
b03b467944b3e88a36a33b5429425c42dbd5b8a0	test if is set before walking page tables if get_fs user_ds we better test if is not zero before walking page tables the page table walk code would try to lock however if mm is zero this might crash now it is arguably incorrect trying to access userspace if is zero however we have seen that and s390 would be the only architecture which would crash in such a case so we better make the page table walk code a bit more robust and report always a fault instead
5269fef77e14c22b1fde44bc0973a18cf233f778	media v4l ti-vpe set correct field parameter for output and capture buffers the vpe driver wasnt setting the correct field parameter for dequed capture type buffers for the case where the captured output is progressive set the field to v4l2_field_none for the completed destination buffers when the captured output is progressive for output type buffers a queued buffers field is forced to v4l2_field_none if the pixel formatconfigured through s_fmt for the buffer type v4l2_buf_type_video_output_mplane specifies the field type isnt interlaced if the pixel format specified was v4l2_field_alternate and the queued buffers field isnt v4l2_field_top or v4l2_field_bottom the vb2 buf_prepare op returns an error this ensures compliance and that the dequeued output and captured buffers contain the field type that the driver used internally
4db17745c22429b89c55dbb8d9a072103bacd0de	arm ux500 stop passing hash dma channel config information though pdata dma channel configuration information should be setup in the driver the ux500 hash driver now does this so theres no need to send it though here too
684497bfe8b4485325554b96b160b5ddb6e9ebaf	annotate hardware config module parameters in when the kernel is running in secure boot mode we lock down the kernel to prevent userspace from modifying the running kernel image whilst this includes prohibiting access to things like it must also prevent access by means of configuring driver modules in such a way as to cause a device to access or modify the kernel image to this end annotate statements that refer to hardware configuration and indicate for future reference what type of parameter they specify the parameter parser in the core sees this information and can skip such parameters with an error message if the kernel is locked down the module initialisation then runs as normal but just sees whatever the default values for those parameters is note that we do still need to do the module initialisation because some drivers have viable defaults set in case parameters arent specified and some drivers support automatic configuration pnp or pci in addition to manually coded parameters this patch annotates drivers in
87937bf8cae495d4eafdae226e0726c25c3ff9f9	xfs remove unused flags arg from _xfs_buf_get_pages
b5c4437872de508073355e927b1fcdba4980cba7	staging iio meter ade7854-i2c code style improvements code reformatting based on with alignment should match open paranthesis cases corrected
37bc15d8dde2d98a1083757e037678b6287e7555	staging wilc1000 remove unnecessary typecast remove ununecessary typecast for patch was generated by coccinelle tool
c3c1e29c8ad11dec67d01203759272da0d0df3aa	watchdog sbsa set wdog_hw_running when watchdog is already running this patch uses the new flag wdog_hw_running in driver according to the definition of this flag it should be set if watchdog is running after booting before its opened
d5133e75171d6b503b2491b882e00365515c6a81	staging rtl8192u remove unnecessary spaces fix issues with unnecessary whitespace before a quoted newline in
9e87f22ac6353b50425c5da412fe2418a48e25a3	hid multitouch detect serial protocol microsofts documentation about multitouch protocols tells that if a device presents one touch per report then it should be treated as a serial protocol
9479b0af489c836cc0d04b01ee5a7d48d79d3d51	ipv4 explicitly compute net in ip_fragment
846cd66788b11105a62785078360c8854aa98310	net initialize all members in skb_gro_remcsum_init skb_gro_remcsum_init initializes the member only leading to compiler warnings about a possibly uninitialized member in function warning may be used uninitialized in this function in function warning may be used uninitialized in this function while these are harmless for now skb_gro_remcsum_process sets offset before changing delta skb_gro_remcsum_cleanup checks if delta is non-zero before accessing offset its safer to let the initialization function initialize all members
8f97437eb54f32bb8678904c2f827a853a3d076c	arm omap3 clock data add clockdomain for hdq functional clock add the correct clockdomain for the hdq functional clock this is needed for the clock and hwmod pm code to work correctly
57de5a0a40db97bb390d3ac1f4c2e74b9f3515c3	nvme-rdma fix device removal handling device removal sequence may have crashed because the controller and admin queue space was freed before we destroyed the admin queue resources thus we want to destroy the admin queue and only then queue controller deletion and wait for it to complete more specifically we __number__ own the controller deletion make sure we are not competing with another deletion __number__ get rid of inflight reconnects if exists which also destroy and create queues __number__ destroy the queue __number__ safely queue controller deletion and wait for it to complete
ec98e9ab6f2475ff57c12d069e78b90548c0f60e	pci designware fix configuration base address when using reg the code has calculated cfg0_base and cfg1_base when parsing reg or ranges property of pci dts node so remove duplicate calculation when using reg resource cfg is not used so this code computed an incorrect configuration base
0786f7b225ba1edd801dc4bfbf6191d058b943a2	remove the unneeded assignment in function __find_resource this line was introduced by resources add arch hook for preventing allocation in reserved areas but the struct tmp was already assigned to in the above line so this seems superfluous just remove it
499a76dc830d32fa8a0c56360b89d4596789f85e	staging comedi adl_pci9111 remove extra i8253_cascade_ns_to_timer_2div the comedi core always calls the do_cmdtest function before it calls the do_cmd function the do_cmdtest for this driver calls i8253_cascade_ns_to_timer_2div to validate the this call sets the dev_private div1 and div2 values needed to program the __number__ timer there is no need to call the i8253 function a second time in the do_cmd function
79f387e710bcf19974345f26f13d253804684364	staging rtl8192e rename mgntactset_802_11_powersavemode use naming schema found in other rtlwifi devices rename mgntactset_802_11_powersavemode to _rtl92e_ps_set_mode
87a69ad6409b2c7a95e2e6e4ddbc380046cb7730	sparc use the core irq stats function let the core do the irq_desc resolution no functional change link
a460bece027301e079b9e53c5e0f67c8e3eaebc1	rbtree use read_once in rb_empty_root with commit d72da4a4d97 rbtree make lockless searches non-fatal our rbtrees provide weak guarantees that allows us to do lockless and very speculative reads of the tree such readers cannot see partial stores on nodes ie as well as root as such similar to the write_once semantics when doing rotations use read_once when checking the root node in rb_empty_root
dad1b00977f9dc8120b48f9711deb4aa6462a3a6	nvme remove reserved double word the specification was updated the remove the double word just after number of configuration groups and capabilities update the identify structure to reflect it
f2296adccfe973fbc326ed9b2fe55d56e206e3d5	remove a superfluous assignment statement due to a previous patch initializing is sufficient and initializing dma_device is no longer needed
3b4b6dfc202dc5bedb03f2fae4ccc3f5b95dd563	dmaengine imx-dma remove imxdma_setup_mem2mem_hw function this function is only used once in the driver and has a lot of checks that are not needed anymore for this reason its been merged with imxdma_enable_hw
e502babe0a85226f2417b60a8710cf8192879180	sysrq fix possible race with exiting task sysrq should grab the tasklist lock otherwise calling force_sig is not safe as it might race with exiting task which might be set to null already
206147112860418fa9363cf94ec2c172bdf4313a	f2fs return directly if block has been removed from the victim if one block has been to written to a new place just return in move data process this patch check it again with holding page lock
0a9ae0d7f8249da5906c8cac7d56768975c38de4	pre-fixes for checkpatch since ill need to modify i915_gem_object_bind_to_gtt fix the errors now to get checkpatch to not complain danvet resolve conflict with chris improved debug output and bikeshed the new variable with a bit while at it
09e1aa1aaa797a40d1f9657007e7c0a90eec96cf	staging rtl8712 invert the test on check_fwstate to reduce indentation negate if condition to be able to return immediately in case of error and then continue with the rest of the function without extra indentation level this was found using the following coccinelle script expression statement s e s else return expression statement s identifier l e s else rc goto l
62d3ab49b8a5438d11a11605ea1a6d2fe0118f32	fix inclusive vfs_fsync_range end both of the file targets calls to vfs_fsync_range got the end offset off by one the range is inclusive not exclusive it would sync a bit more data than was required the sync path already tested the length of the range and fell back to llong_max so i copied that pattern in the rw path this is untested i found the errors by inspection while following other code
b83007024219c0135aa18ca5e756b3935c3b8e31	media saa7134 check register address in g_register prevent reading out-of-range register values
f49c90db4d2351f354c4f6902f6718637cd23393	ath9k add a macro to identify pcoem chips this can be used if we need to apply register settings for all pcoem solutions in the ar9003 family
1a3abbd0b9a16e40fd4718f99896c437a193c0a1	hwmon emc2103 fix return value kstrtol returns appropriate error values use those instead of hardcoding silences several sparse messages of following type why not propagate result from kstrtol instead of
4a7267c9a03b9627e5e85c80b307eb4541bab902	bcma handle return value of pci_assign_resource this fixes the following warning cc in function bcma_core_pci_fixup_addresses error ignoring return value of pci_assign_resource declared with attribute warn_unused_result
930067e235f23c98e444615a03e1f01148cc6d71	pci pciehp use pci_is_bridge to simplify code use pci_is_bridge to simplify code no functional change requires pci rename pci_is_bridge to pci_has_subordinate requires pci add new pci_is_bridge interface
3801a7fd8615365a58960561d3bd3479b485ed3e	fix open-coded array_size
40acbab6a7402ec89fac673bed6bbbc2b430d60e	mtd nand s3c2410 show parent device in sysfs fix a bug where parent device symlinks arent shown in sysfs while at it make use of the default owner set by mtdcore
5f2bfe2f1de8b745dc294acaf2ca2ad68e09b374	smack fix a null dereference in wrong smack_import_entry usage commit e774ad683f42 smack pass error code through pointers made this function return proper error codes instead of null reflect that this is a fix for a null dereference introduced in commit smack ipv6 host labeling echo this should return einval it doesnt cat derefences
e0b7a79524771ad368abefbbcbd73f130f8e500e	clk pistachio lock the pll when enabled upon rate change currently when the rate is changed the driver makes sure the pll is enabled before doing so this is done because the pll cannot be locked while disabled once locked the drivers returns the pll to its previous state this is a bit cumbersome and can be simplified this commit reworks the functions for the integer and fractional plls upon rate change the pll is now locked only if its already enabled also the driver locks the pll on this makes sure the pll is locked when enabled and not locked when disabled
c0841e34fd9bbcef58c537151de8c83d2c910099	remove xsave_init __init obfuscation so this code surprised me and being surprised when reading fpu code does not help maintainability of an already overly complex subsystem remove the obfuscation and just dont use __init annotation for now anyone who wants to free these bytes of xstate_enable_boot_cpu should implement it cleanly
fbb052f9fe6839ff85839d729ae1f44ff7c03760	staging rtl8192e fix deep_indentation warnings in rtllib_parse_info_param replace with min_t remove condition that is always true
5631792053f094a8e2f01d5ddcc2550ad4da22f0	kvm s390 provide prog irq ilc on sie faults on sie faults the ilc cannot be detected automatically as the icptcode is __number__ the ilc indicated in the program irq will always be __number__ therefore we have to manually specify the ilc in order to tell the guest which ilen was used when forwarding the psw
3359e7c2e904eac4e76d5b8b5e9390a622863df8	ptp gianfar use helpers for converting ns to timespec this patch changes the driver to use ns_to_timespec64 and timespec64_to_ns instead of open coding the same logic
f2fc7d0eddf86b0233faa34aa5af6780ea48bc08	block blk-flush fixed indent code style fixed code indent should use tabs where possible
ef5b6e127761667f78d99b7510a3876077fe9abe	netfilter ipset fix interface comparision in hash-netiface sets ifname_compare assumes that is zero-padded this isnt always the case e1000 driver does pci_namepdev __number__ in e1000_probe so once device is registered memory contains or something like that which makes eth1 compare fail use plain strcmp instead
93a87e5e794fb71a51f97fbde6c0010680b62d70	mlxsw spectrum_router dont reflect dead neighs when a neighbour is considered to be dead we should remove it from the devices table regardless of its nud state without this patch after setting a port to be administratively down we get the following errors when we periodically try to update the kernel about neighbours activity __float__ mlxsw_spectrum __number__ sw1p3 failed to find matching neighbour for
6f8be28012f46352e5e54752a00946901a926c03	revert avoid guc loading for now on kabylake this reverts commit
f3b4d68fc21cc536f4f6b4b539864e33eca00bc0	asoc wm8991 replace the codec field of the snd_soc_widget struct is eventually going to be removed use instead
b3314d9ac55f4aa13fd339ee16e95828414f51d4	usb musb trivial cleanup enabled driver can be simplified to driver
6d6a138f13e7cb5f20e4ee1c841b4bdaee5e0251	move export_symbol after functions fix some checkpatch warnings warning export_symbolfoo should immediately follow its
0d38c240f97602d9a4553252bb710521f49bb264	report login failures only once report the following message only once if no acl has been configured yet for an initiator port rejected login because no acl has been configured yet for initiator
867aae6ebe593db73fb8a676475ee20227292cfe	only check for spinlock being held in smp kernels spin_is_locked is always false on up kernels spin_lock_irqsave does no locking so we cant tell whether the lock is held or not therefore this warning is only valid for smp kernels
de46bfab79a372ccec8d32947b5fab9a2a10e801	media media usb gspca konica dont print error when allocating urb fails kmalloc will print enough information in case of failure
371a255e863857f988a91a3850d6feeaa4f3c536	mac80211 make ieee80211_check_concurrent_iface netdev-independent ieee80211_check_concurrent_iface need not use the netdev remove the use of the netdev here to prepare the function for p2p device addition
9bfc3f0d48c0e6aac05b02638dd0b502b522dec7	use pmc reset use pmc reset rather then car system reset as recommended by the hardware team
59fe66313a41843bc4c237275e64f81cde121ac8	clk versatile remove unneeded error message if kzalloc fails we will already have many messages in the log and we do not need another message to know that kzalloc for sp810 has failed
f06c7885c3dd3db8eb771e10615ee41425607e95	mac80211 fix smatch lock errors in mesh smatch was complaining check mesh_path_add error double lock bottom_half mesh_path_add error double unlock bottom_half mesh_path_add error double unlock bottom_half mpp_path_add error double lock bottom_half mpp_path_add error double unlock bottom_half mpp_path_add error double unlock bottom_half mesh_path_flush_by_nexthop error double lock bottom_half mesh_path_flush_by_nexthop error double unlock bottom_half mesh_path_del error double lock bottom_half mesh_path_del error double unlock bottom_half so dont lock unlock with _bh while bottom halves are already disabled
297cf5025b3bda59e15d6ba1f84022ebd409925b	powerpc some changes in numa_setup_cpu this patches changes some error handling logics in numa_setup_cpu when cpu node is not found so if the cpu is possible but not present is kept in numa_cpu_lookup_table so later if the cpu is added we could set correct numa information for it if the cpu is present then we set the first online node to numa_cpu_lookup_table instead of __number__ in case __number__ might not be an online
c322892fa7084480efb0708d7d8d60d5c83de2eb	ath10k extend the max_scan time it was observed few times the artificial max_scan limit we are using mainly to detect fw hangs can be not enough for instance while being associated and during heavy traffic what we do if the fw wont return with scan results within the max_time time is a scan abort this is especially visible with fw which in combination with dual band hw scanning __number__ channels can end up with hw_scan close to __number__ seconds
41682e03d4fdc947dbd22725d70f222cc7746852	fix misuse of init_completion the init_completion call does reinit not only the variable carrying the flag that the completion finished but also initialized the waitqueue associated with the completion on the contrary the init_completion call only reinits the flag in case there was anything still stuck in the waitqueue subsequent call to init_completion would be able to create possible race condition this patch uses the proper function and moves init_completion into call of the driver to be issued only once note that such scenario is impossible since two threads can never enter the mxs_spi_txrx_dma since whole this section is protected by mutex in spi core this by no means allows this issue to exit though
9bd2857188d920f358cfb740fc6f88e1a17a837e	b43 n-phy fix typo in tx power fix
8732db67c6b6dcdb455b73773ea2fc1e1d5024b1	rxrpc fix exclusive client connections exclusive connections are currently reusable which they shouldnt be because rxrpc_alloc_client_connection checks the exclusive flag in the rxrpc_connection struct before its initialised from the function parameters this means that the dont_reuse flag doesnt get set fix this by checking the function parameters for the exclusive flag
6fa96d72f79a15579da2bb63c65cafb210915b48	btrfs free checksum list on scrub_extent fail when scrub_extent failed we need to free previois created checksum list
dbd751eed83614b7300a0331ae3ab2e70cc1e73c	ld9040 add power control sequence some ld9040 panels do not start without providing power control sequence during initialization the patch fixes the driver by providing such sequence for all panels
7bcd2b111f3ac77370ec7efe93e16e19878827c1	ntb_netdev improve logging improve driver logging to be more helpful
f8bb820da4ae863c676156627973a950129559fb	spi check tx_buf and rx_buf in spi_unmap_msg some spi device drivers use the same tx_buf and rx_buf repeatly for better performance such as but spi core grab tx_buf of transfer and set them as once they are null thus in the second time the will be replaced by and the data which produced by the last tx or rx may be wrongly sent to the device or handled by the upper level protocol this patch just keep the orignal value of if they are null after this transfer processed
080eec4fb478f10c6f171875634fc3174da1a1c3	ath6kl clear the ie in firmware if not set remove check so that ie in firmware is cleared if not set without this fix any previously set ie will be used incorrectly in the next frame for example consider the scenario where a p2p device scan is followed by a regular station scan the p2p ie set by the p2p scan needs to be cleared otherwise the station scan will contain the p2p ie kvalo indentation fixes
b2532eb9abd88384aa586169b54a3e53574f29f8	tcp fix ooo_okay setting vs small queues tcp small queues tcp_tsq_handler can hold one reference on preventing being set we should relax test done to set to take care of this extra reference minimal truesize of skb containing one byte of payload is skb_truesize1 without this fix we have more chance locking flows into the wrong transmit queue
352a2d5bfc336d980af69cb0ed24f86d9026f377	ensure gpio context is initialised commit a2797be force restore if context loss is not detectable broke gpio support for omap when booting with device-tree because a restore of the gpio context being performed without ever initialising the gpio context in other words the context restored was bad this problem could also occur in the non device-tree case however it is much less likely because when booting without device-tree we can detect context loss via a platform specific api and so context restore is performed less often nevertheless we should ensure that the gpio context is initialised on the first pm-runtime resume for gpio banks that could lose their state regardless of whether we are booting with device-tree or not the context loss count was being initialised on the first pm-runtime suspend following a resume by populating the get_count_loss_count function pointer after the first pm-runtime resume to make the code more readable and logical initialise the context loss count on the first pm-runtime resume if the context is not yet valid
79e7654cae5a6d6cee333f0366023ecc3ff8abe0	ata_piix add module_parm_desc to prefer_ms_hyperv in reference to the commit cd006086fa5d91414d8ff9ff2b78fbb593878e3c ata_piix defer disks to the hyper-v drivers by default this trivial patch adds a description to prefer_ms_hyperv module_parm_desc string formatting modified
781c848aa3e005415e03381640e2d886d4fd4f31	convert to use part of effort of getting rid of custom lustre allocation macros
7340426affacb4b5988f9cf1c3dbfc28e9679360	embed display into private context exynos_drm_display is used by internal exynos drm framework for representing pair as it should be mapped to vidi private context it seems more reasonable to embed it directly in that context as a result further code simplification will be possible moreover it will be possible to handle multiple vidi devices in the system
af50f3a8b61cfdfcf4a01b01ec2759200d362605	ata sata_dwc_460ex tidy up sata_dwc_clear_dmacr this consolidates the reads from each of the branches to one place making the code a lot nicer to look at
71aec257ec52caadf8ea3c297e6cff39fec49a2d	new flag for preemption when mcbp supported we will set pre_enb bit for those ibs with preempt flag tagged
d3368a58776bfdd7ca22db35ea83567e9657b6e5	staging unisys visorchipset_init simplify initial checks
97a6ba5bd0b54544fabe090711fabefc7a703a5f	pm devfreq exynos-ppmu handle return value of clk_prepare_enable clk_prepare_enable can fail here and we must check its return value
6ab59018370345b0909af7c1f24553b2608c5fbc	mips qi_lb60 probe rtc driver from dt and use it as power controller since we already have a devicetree node for the jz4740-rtc driver we dont have to probe it from platform code besides using the jz4740-rtc driver as the power controller for the qi_lb60 platform allows us to remove the jz4740 platform power-off code since this is the only jz4740-based board upstream
2b2a87a12d2e0aede29e45911aeb0c520066b0c0	arm l2c provide generic function for calling set_debug method provide a generic function which always calls the set_debug method this will be used later in the series as some work-arounds require that the debug register be written
f1db320ec5788d5fcc05c0285bd0980319185497	xen-netback remove dead code the array mmap_pages is never touched in the initialization function this is remnant of mapping mechanism which does not exist upstream in current upstream code this array only tracks usage of pages inside netback those pages are allocated when contructing a skb and passed directly to network subsystem
bbd8a4584235c5492209d79ebcaa7c817585c1ba	staging r8188eu remove phostapdpriv member of struct adapter phostapdpriv does not used
2128df143d840a20e12818290eb6e40b95cc4ac0	arm64 llvmlinux use current_stack_pointer in use the global current_stack_pointer to get the value of the stack pointer this change supports being able to compile the kernel with both gcc and clang
7e278157921f95d7313ede005cb07b72b7011962	microblaze change section flags for nommu all files which uses user unified macros from strnlen_user and strncpy_user generate this warning messages assembler messages warning ignoring changed section attributes for setting up discard executable section flang for __ex_table_section macro removed all these warnings
ff976d724a74e4522e9ca2de1fb37ac4520f454f	nvme rename io_timeout to nvme_io_timeout io_timeout is a little too generic and might be used by other parts of the kernel in the future
e2d8c43b4eed79dee4248b040e6d66c447ccac3b	staging comedi adv_pci1710 rename interrupt helper functions for aesthetics rename the helper functions that are called by the interrupt function to handle reading the analog input samples also change the parameters to the helpers to the comedi_device and comedi_subdevice pointers
2172c1f5aa58310784f358ca20fdddfcdc2a0d7b	micro-optimize nhmex_rbox_get_constraint flipping the lsb doesnt require four lines of code this shaves a few bytes of the generated code including a branch link
0a63b09dd6e321d4488347d6283685d08ee4bb7f	crypto caam fix job ring discovery in controller driver the sec controller driver creates platform devices for its child job ring nodes currently the driver uses for_each_compatible routine which traverses the whole device tree to create the job rings for the platform device the patch changes this to search for the compatible property of job ring only in the child nodes the job rings are created as per the number of children associated with the crypto node
4bf48150541b5f3335a6438f51b75f9d9d95e256	media dib8000 fix compilation error as reported by kbuild test robot with a random config in function undefined reference to __udivdi3
9800ee6f50a3b94181d4df57542b9379e331decb	serial sh-sci fix probe error paths when probing fails the driver must not try to cleanup resources that have not been initialized fix this
8ef9594764617e3fd4500205b080b53c45c14c4b	bridge vlan tunnel id info range fill size calc cleanups this fixes a bug and cleans up tunnelid range size calculation code by using consistent variable names and checks in size calculation and fill functions tested for a few cases of vlan-vni range mappings output from patched iproute2 vlan showtunnel port vid tunid vxlan0 __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__
6283e328fb8148a8a5753e95c04c16aaef2287c0	cpufreq db8500 support all frequencies this adds support for the __number__ mhz frequency mode of the db8500 soc and prints the available frequencies at init time
cc4e719e83cd4149bc96b7e1d1a73fe61797df6e	fix the leak in integrity_read_file
db1c45154a82195ad0b4d45d0e330ebac6883b70	avoid diagnose loop the spinlock implementation calls the diagnose immediately if the sigp sense running reported the target cpu as not running the diagnose is a hint to the hypervisor to schedule the target cpu in preference to the source cpu that issued the diagnose it can happen that on return from the diagnose the target cpu has not been scheduled yet if the target logical cpu is on another physical cpu and the hypervisor did not want to migrate the logical cpu avoid the immediate repeat of the diagnose instruction instead do the retry loop before the next invocation of diagnose
704cb30c5a0a2285208e5887a62d542926a52b3e	gdp cropping fails when we remove __number__ pixels horizontally gdp source width should be equal to the destination width to get rid of this issue
ffb8eee4f140bbfc333381168d6fe1a7e7dc7af7	watchdog xilinx move no_timeout to probe function no_timeout should be local variable because it is used only in probe function
0317e6c0f1dc1ba86b8d9dccc010c5e77b8355fa	i2c designware do not disable adapter after transfer disabling the adapter after each transfer adds additional delays for each i2c transfer even if we dont wait for it to be disabled anymore on next transfer we will need to if we have several transfers in a row now during the transfer init we check if ic_tar can be changed dynamically the status register for no activity and tx buffer being empty in this case we dont need to disable it when a transfer fails the adapter will still be disabled this is a conservative approach when transfers succeed the adapter is left enabled and its configured so to disable interrupts alternating register reads on __number__ slaves perf stat chrt __number__ __number__ before __float__ seconds time elapsed after __float__ seconds time elapsed
50ee93afcaa970620d1fb5a9894109a2ab152868	vfs nameidata_to_filp dont throw away file on error if open fails dont put the file this allows it to be reused if open needs to be retried
fc32b1fdce1f85ea5a1277478f5d916ac3d6a284	do not wait for flips in intel_crtc_disable_noatomic intel_crtc_disable_noatomic is called from hw readout during init resume and possibly reset during init its too early to have a page flip queued before suspending all page flips should be finished and during hw reset all page flips should be removed its a bug when there are pending flips here complain with warn_on instead of handling it link
6e898bfd6e9e5cd0f7f8275ad4dc41a3acf7c75a	tilepro use to_delayed_work use to_delayed_work instead of open-coding it
4b30eebfc35c67771b5f58d9274d3e321b72d7a8	asoc rcar avoid ssi_modex settings for ssi8 ssi8 is is sharing pin with ssi7 and nothing to do for ssi_modex it is special pin and it needs special settings whole system but we cant confirm it because we never have ssi8 available board this patch fixup ssi_modex settings error for ssi8 on connection test but should be confirmed behavior on real board in the future
a06df4b08cee2cd201b3cbb7ee8312ea68cc2047	greybus unlock hd mutex on free when free_hd is called hd_mutex is held it is the responsibility of free_hd to drop that mutex
940192e3c651eb6b97b42cb4c28e9e8471675cd2	arm move assignment out of printf we move the assignment of values of register out of the seq_printf calls it is obviously more readable
98be6966ed7ed977881305aff5a1bfb305090f43	perf evlist fix parsing with no sample_id_all bit set the perf_evlist__event2evsel is changed to handle non-sample events such as mmap events that have no id sample appended when sample_id_all is not set note that such events have a fixed format so that the selected event evsel they are associated with is immaterial link
4c18442e536ec24cc5ca23c5bbaa80bd53020b95	do not leave queue acquired if timeout happens in kgd_hqd_destroy if timeout happens kgd_hqd_destroy just returns leaving queue acquired it may cause a deadlock so the patch proposes to release queue before return found by linux driver verification project
1b1baff6e50df855238ce5e6c0e7dbb8a261fb32	udf fix a null pointer dereference in udf_sb_free_partitions this patch fixes a regression caused by commit bff943af6fe udf fix memory leak when mounting due to which it was triggering a kernel null point dereference in case of interrupted mount or when allocating memory to failed in function udf_sb_alloc_partition_maps
a42f9d83b5c05dc6e678a1f0cd9767502c2c58de	unnecessary because can not remove this disk and in any case we arent holding rcu_read_lock
37e90a220abc4c5dee1fc42382cbca595a0e95bd	media rc ir-raw change type of available_protocols to atomic64_t changing available_protocols to atomic64_t allows to get rid of the mutex protecting access to the variable this helps to simplify the code
1fda5b7566561c8e1fc6fd572cbdc7ec32051b16	staging rtl8188eu fix code indention found by checkpatch error code indent should use tabs where possible uint in_len uint
47ecd3c4e09ee8dfd1dbd2728278ccec78ab43b9	remove amdgpu_cs_handle_lockup in fence waiting it never return yet so drop this function here
503275bf371fbab01a14f2e9fd1ac7aa20c81645	use cached to simplify code the pci core caches the pcie max payload size supported in so use that instead of pcie_capability_read_dword
f704e1103e05a65c83b85c66d947e57bc20d6edd	hsi omap_ssi fix module unloading removal of ssi controller debugfs directory must happen after the clients have been removed from it
c2957563ad0965c8bfb393dcd22ddb683dd1ff1c	extcon max14577 fix handling return value of regmap_irq_get_virq the function can return negative values so its result should be assigned to signed variable the problem has been detected using proposed semantic patch __number__ __number__
d1829b38241394c0c66d407a165fbd6d9897c241	nfsd4 fix free_stateid return endianness
cc169c7c31253e80e0d504f0cd5dbb9f1e3d3ac5	perf buildid-cache use pr_debug instead of verbose pr_info use pr_debug instead of the combination of verbose and pr_info if verbose is same as replace it link
e88ccab12a9e85c536544f1464bd75610b1c46d6	support iommu_mmio flag teach the short-descriptor format to create device mappings when asked
2445c4a44f200a3137dbaaa3603f2f095c9fdd45	fix removal order drm device should be destroyed before releasing resources
ec449f40bb3e19c77f62ddabf7c1fe3ccefece6f	openvswitch fix mpls action validation linux stack does not implement gso for packet with multiple encapsulations therefore there was check in mpls action validation to detect such case but this check introduced bug which deleted one or more actions from actions list following patch removes this check to fix the validation kernel
7cf64f861b7a43b395f0855994003254b06a7e5a	kernel-provide-a-__smp_call_function_single-stub-for-config_smp-fix x86_64 allnoconfig error redefinition of __smp_call_function_single note previous definition of __smp_call_function_single was here
050429a78b2dbec763a6bb5423ea5a1fcc9adca3	spi bcm53xx make local symbol static make local symbol static because this is used only in this file
560ce1dc7c87ade27faaf07d381a9a5a2ffc9934	use drm_crtc_send_vblank_event replace the legacy drm_send_vblank_event with the new helper function link
fc43e651bf39ef174a86fde4c4593f796b1474c1	usb serial mos7840 remove unused write urb remove code to manage a write urb that was never allocated
9ca1c5a4bf4105d6f2f2a46892495953dd3e2fec	clk cache parent clocks only for muxes caching parent clocks makes sense only when a clock has more than one parent mux clocks avoid doing this for every other clock
9865249fd19d1416f70aa73ac7f214cbee4f6b51	ipv6 dont recompute net in ip6_rcv avoid silly redundant code
b29582b15ff4049de5780e27a28ed7b3ded3f969	delete an unnecessary check before the function call umc_device_unregister the umc_device_unregister function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
5dbdbf67c3574cec17640ad63109b3b2ef322617	staging comedi addi_apci_1032 board does not have digital outputs this board does not have digital outputs remove the subdevice init for them
c475594d838c5c872e734f693a700df8c01b39d4	efivars use string functions in pstore_write instead of open-coding the string operations for comparing the prefix of the variable names use the provided string functions this patch also changes the calls to to so that the right function gets called in the case of gsmi which doesnt have a valid efi structure as well make sure that we only consider variables with the right vendor string
801a6aa9a63c90724e8899982ad8c7f16be1e2cd	fix debugfs reg address width the mmio space is wider now so we mask the lower __number__ bits instead of __number__
8fbe6a541f50eeec5e3e49bd92db23ade9496673	kvm guest disable stealtime on reboot to avoid mem corruption else host continues to update stealtime after reboot which can corrupt initramfs area found when tracking down initramfs unpack error on initial reboot with qemu-kvm __number__ no problem with single-core
aecf4e9bafa586bcc11d00e831ca1ddd00f6c6a7	asoc max9877 remove unused function declaration remove unused function declaration from header
3280c3c84d003b2dd37a788a4a6225a909c2d3e1	acpi-cpufreq replace with the former duplicate the functionalities of the latter but are neither documented nor arch-independent link
d5f831090191fa26a539e12456af64547ab11dde	thermal power_allocator trace the real requested power the power allocator governor uses ftrace to output a bunch of internal data for debugging and tuning currently the requested power it outputs is the weighted requested power that is what each cooling device has requested multiplied by the cooling device weight it is more useful to trace the real request without any weight being applied this commit only affects the data traced there is no functional change
7ccf62941a38701ec9a42b4a0fa2868af456e96a	usb musb da8xx set phy in otg mode by default the da8xx otg phy has some issues when it is forced in host or peripheral mode actually most of the time otg is the best mode because host or peripheral mode are only required for hardware that miss some circuitry init the phy mode otg mode by default
addce19f58c52a03314e2d8a1e30708dabf9bf30	staging unisys respond to msgs post device_create fix problem that prevents us from responding to any device message after device_create by neglecting to null out pending_msg_hdr after the device_create response we were effectively preventing any subsequent messages to the device from working because device_epilog will correctly bail out early if it sees that pending_msg_hdr is still set non-null as that is an indicator to mean that an unanswered message is still outstanding this problem was discovered as part of testing iovm service partition recovery because device_epilog was in fact bailing out when it was called from my_device_changestate which of course prevented us from transitioning the device to the paused state however the incorrect behavior would occur for any subsequent command directed at the device not just for changestate
3565fe53334cd3f0d59ff5db0872de9370775a19	dmaengine rcar-dmac use list_add on rcar_dmac_desc_put for each descriptor in addition to the memory used by the descriptors structure itself the driver allocates a list of chunks as well as a buffer for hardware descriptors descriptors themselves are preallocated and allocation of the chunks and buffer is performed the first time the descriptor is used the memory isnt freed when the transfer is completed as the chunks and buffer will be needed again when the descriptor is reused internally so the driver keeps the memory around if only a few descriptors are used concurrently the current list_add_tail implementation will result in all preallocated descriptors being used before going back to the first one and will thus allocate chunks and a buffer for all preallocated descriptors using list_add will put the complete descriptor at the head of the list of available descriptors so the next transfer will be more likely to reuse a descriptor that already has associated memory instead of one that has never been used before
d2c85ac24ed7636934f469fac8836b87c7e6cb40	hsi correctly handle return value of kzalloc since kzalloc can be failed in memory pressure its return value should be checked and handled
84ebd795613488992b273220c2937d575d27d2a9	ext4 fake direct mode for currently attempts to open a file with o_direct in mode causes the open to fail with this makes it very hard to test mode so we will let the open succeed but then always fall back to o_dsync buffered writes
4959444165523e68118035bebb727b9431746765	rtl8xxxu rtl8192cu introduce a pointer to efuse
bc8474549e94efddb5d5791af0a015d13115b67b	fix up error handling in alloc_iommu only check for error when has been assigned and only assign when the function cant fail anymore
a57aa93f44f34ce6e3b3ed0b114d5eea46234aef	video fbdev uvesafb remove redundant null check in uvesafb_remove because uvesafb_par is allocated as part of fb_info in uvesafb_probe so we dont need to do null check for both fb_info and uvesafb_par in uvesafb_remove this patch also fix a warning report by uvesafb_remove warn variable dereferenced before check par
f5f35830fb84364a24794fe6c7101f85318481d2	phy phy-stih407-usb use explicit reset_control_get_exclusive api were making all reset line users specify whether their lines are shared with other ip or they operate them exclusively in this case the line is exclusively used only by this ip so use the api accordingly
a0ec360f6b83146fa4ba1a681bdd751382f9f90e	sh convert cpg code to sh_clk_ops convert the cpg code to use sh_clk_ops
41b2d62702730b0c6bc5a40722e423bb0338311a	ath9k use warn_on_once in ath_rc_get_highest_rix the device seems to survive the issue so no need to flood the logs about
cd5b318daf4aecd249c3f07df93700c0f749484c	rhashtable-test add cond_resched to thread test this should fix for soft lockup bugs triggered on slow systems
7d54a904285b6e780291b91a518267bec5591913	apply post-sync write for pipe control invalidates when invalidating the tlbs it is documentated as requiring a post-sync write failure to do so seems to result in a gpu hang exposure to this hang on ivb seems to be a result of removing the extra stalls required for snb pipecontrol workarounds commit author chris wilson chris-wilson.co.uk date fri jul __number__ __number__ only apply the snb pipe control to gen6 note manually switch the pipe_control cmd to __number__ dwords to avoid a silent functional conflict with this way will get a loud but conflict with next since the scratch_addr has been deleted there reported-and-tested-by bugzilla danvet added note about merge conflict with
258c1dd76bf1223a0f67ff8d799b5eb383a3a632	staging comedi comedi_fops remove unnecessary use in places where the value has been stored in a local variable use the variable instead of repeating
a6b24f83601530f69ee36ac48527336e3c79bea8	omapdss apply simplify dss_mgr_enable dss_mgr_enable has some extra assigns to which can be removed
da620d722a7b7b16bf8571150acd7fd9e155809f	asoc rsnd care snd_kcontrols index rsnd might be used in multi-codec sound card then same name kcontrol will be registered many times and it will be error this patch fixes this issue by using
b0c568de32bad5dc19722ba90ebe07e358675e51	clip bridge windows to fit in upstream windows every pci-pci bridge window should fit inside an upstream bridge window because orphaned address space is unreachable from the primary side of the upstream bridge if we inherit invalid bridge windows that overlap an upstream window from firmware clip them to fit and update the bridge accordingly bhelgaas changelog link
7c60d1984afa482f0648d963206124df6dca325e	remove connectors_active from state checking connectors are updated atomically now so the only interaction with the encoder is through if its null the encoders not part of any crtc and if its not null then active should be equal to
99d7662a04c4f9822b042f22ae37f8c7355c2d5a	tcp tso allow deferring under reordering state while doing experiments with reordering resilience we found linux senders were not able to send at full speed under reordering because every incoming sack was releasing one mss this patch removes the limitation as we did for cwr state in commit a0ea700e409 tcp tso allow ca_cwr state in tcp_tso_should_defer neal cardwell had a concern about limited transmit so yuchung conducted experiments on gfe and found nothing worth adding an extra check on fast path if tcp_ca_disorder sysctl_tcp_reordering goto send_now
91ca9ed7975529ebb48d14b958fcbe41d0f6a438	staging lustre fix space issue in this patch fixes a space issue in the file
fe7599079b03d521d376da88920cc7b87f71ae25	btrfs qgroup allow user to clear the limitation on qgroup currently we can only set a limitation on a qgroup but we can not clear it this patch provide a choice to user to clear a limitation on qgroup by passing a value of clear_value-1 to kernel
35fea0649edcdbd75e3aeadd84d366f7e46a60ab	media mc44s803 use dvbv5 parameters on set_params instead of using dvbv3 parameters rely on dvbv5 parameters to set the tuner
a46fa260f6f5e8f80a725b28e4aee5a04d1bd79e	net phy dp83867 fix warning check for setting the internal delay fix warning logical of collectively exhaustive tests is always true change the internal delay check from an or condition to an and condition
ea15b7b219b19c9ddb668ab3d5d727f46900605e	staging vt6656 put comment about debug print define on same line as code a small comment at the end of the line mentioning the debug level is enough no need to repeat the entire line of code just for that
e138ead73f872559778bb0c326e795206f96d3ce	nfs null dereference in dev_remove in commit nfs replace global bl_wq with per-net one we made msg a pointer instead of a struct stored in stack memory but we forgot to change the memset here so were still clearing stack memory instead clearing the struct like we intended it will lead to a kernel crash
bbd848e0fade51ae51dab86a0683069cef89953f	block reinstate early return of from blkdev_issue_discard commit block add __blkdev_issue_discard incorrectly disallowed the early return of if the device doesnt support discard or secure discard this early return of has always been part of blkdev_issue_discard interface so there isnt a good reason to break that behaviour especially when it can be easily reinstated the nuance of allowing early return of vs disallowing late return of is if the overall device never advertised support for discards and one is issued to the device it is beneficial to inform the caller that discards are not supported via but if a device advertises discard support it means that at least a subset of the device does have discard support but it could be that discards issued to some regions of a stacked device will not be supported in that case the late return of must be disallowed
e47f3db4587c5486d3d5838fd4bef4f9c3b12205	mtd nand pass proper oob_required parameter we now have an interface for notifying the nand_ecc_ctrl functions when oob data must be returned to the upper layers and when it may be left untouched this patch fills in the oob_required parameter properly from when utilized properly in the lower layers this parameter can improve performance reduce complexity for nand hw and sw that can simply avoid transferring the oob data
03916db9348c079d8d214f971cc114bb51c6b869	replace nr_vmx_msr with its definition using array_size directly makes it easier to read the code while touching the code replace the division by a multiplication in the recently added build_bug_on
a48f165509c18d47f1505888a21918e8a06d590f	arm shmobile r8a7790 sysc setup code add r8a7790 sysc power management support converted to use broken out sysc code
d60923c465809cec44fb08c53da6cf0c53040dc1	e1000e merge multiple conditional statements into one cleanup a set of conditional tests
c8c21f3b48dfeb1922cdbc08a3691ebf87173adc	staging lustre use const static file_operations struct this commit corrects the following sparse warning regarding a file_operations structure being non-static and constifies the structure in question as well warning symbol lprocfs_stats_seq_fops was not declared should it be
922d9ced718268e464a0884ecee09da436e00d70	staging comedi comedi_fops always clear events comedi_event is called from low-level drivers to handle asynchronous command event flags that are stored in for subdevice s it normally clears the event flags as well as a safety check it does nothing if no asynchronous command is running but it leaves unchanged in this case for additional safety change it to always clear the event flags to avoid leaving stale event flags set when another asynchronous command is set up
e7895e422e4da63daedacad0a2ed1a5a6b502d66	perf probe split del_perf_probe_events the del_perf_probe_events does __number__ things __number__ find existing events which match to filter __number__ delete such trace events from kernel but sometimes we need to do something with the trace events so split the funtion into two so that it can access intermediate trace events name using strlist if needed link
0b26985a7d76645598d98fec6922ddd1ec8cbc55	pm clk ensure we dont allocate a size of count clks it is entirely possible for of_count_phandle_wit_args to return a error return value so we need to check for this otherwise we end up allocating a negative number of clk objects
bfe723f6eae285e399615d99f297d1646a6253fe	asoc sirf-audio-codec remove snd_soc_codec_set_cache_io call there was a overlap between the snd_soc_codec_set_cache_io cleanup and the addition of the sirf-audio-codec resulting in the sirf-audio-codec driver still using the old signature of snd_soc_codec_set_cache_io which will cause a compile error since the core is able to automatically setup io for this driver we can just remove both the snd_soc_set_cache_io call and the control_data assignment
7d1c2858c49095ab748f55354b89dbd6b18d28b9	ttyprintk fix wrong tty_unregister_driver call in the error path ttyprintk driver calls tty_unregister_driver wrongly in the error path of tty_register_driver also setting ttyprintk_driver to null is utterly superfluous so lets get rid of it too
0959f22ee66734c212fc733f7616ba321ef7f47f	alsa snd-usb add delay quirk for playback design products playback design products need a delay after setting the usb interface
5b12d0ac20dd9084995d10e1ec5bd43b7ec90f41	staging iio adc fix warning prefer kmalloc_array over kmalloc this patch fixes the checkpatch warning warning prefer kmalloc_array over kmalloc with multiply kmalloc_array is preffered for allocating for arrays
4760904fb4a2841c9ac651e36610724929122385	staging comedi usbdux remove subdevice pointer math convert the comedi_subdevice access from pointer math to array access
c0ea452e422a1fc78ec8c639df64012d0b8dbb4a	bnx2x fix memory leak in bnx2x_init_firmware when cycling the interface down and up bnx2x_init_firmware knows that the firmware is already loaded but nevertheless it allocates certain arrays anew init_data init_ops init_ops_offsets iro_arr the old arrays are leaked fix the leaks by returning early if the firmware was already loaded because if the firmware is loaded so are the arrays
a94dd879e2939798294c56468add3d6a8ef04137	watchdog s3c2410_wdt remove unneeded initialization initializing clk to null as a condition does not help as null is not an invalid condition clk remove this initialization altogether as there is no state retention
20482c786a04df130b1e7847589d09b8fd807dcf	staging comedi me_daq remove dio_channel_nbr from boardinfo all the boards supported by this driver have __number__ dio channels remove the boardinfo and just open code the value in the attach
8b2aaedee4eaa94e816144ed54b9707b96be29f8	ipv6 fix smatch warning with commit d6ddef9e641dipv6 fix not join all-router mcast group when forwarding set i check dev after its dereference that leads to a smatch complaint ipv6_add_dev warn variable dereferenced before check dev see line __number__ __number__ protected by rtnl_lock __number__ ndev old dereference __number__ __number__ join all-node multicast group __number__ ipv6_dev_mc_incdev __number__ __number__ join all-router multicast group if forwarding is set __number__ if dev iff_multicast remove the check to avoid the complaint as dev cant be null
4bf58435fae39ec2ea01a2ff9934d377add234b1	dm remove incomplete block_pc support dm tries to copy a few fields around for block_pc requests but given that no dm-target ever wires up scsi_cmd_ioctl block_pc cant actually be sent to dm
f53c346c08425b6448cf9729e882e4057ea505f0	asoc twl6040 simplify sample rate constraint handling we can manage the sample rate constraints without the need to maintain a variable and a pointer this simplifies the handling of the constraint and makes it more robust
41d22663cb6a4108091c050cba3c470a3e175dd9	nfsd4 remove unused nfs4_check_deleg argument
d7f3e207397d7b4868e33d3f88396a06f4d5a8c7	rcu convert printk calls this commit converts printk calls to the corresponding calls
ff7e9f99f7effb385a9be2f7198743c1ad2bb126	mwl8k configuring correct mac address in broadcast key while configuring the broadcast key in the hardware in multi-bss environment bsses other than first were incorrectly configured with the mac address of first bss fixing it with correct mac addresses
4d24136c8ea03ecfdb6b8256571da8b520b92d8b	e1000e __number__ workaround for link drop issue when connected to certain switches the __number__ phy might drop link unexpectedly work around the issue by setting the mean square error higher than the hardware default
f24eeb191229b040deb3e813913e06a4316c6d3f	vlv sanitize rps interrupt mask during gpu idling we apply the rps interrupt workaround on vlv everywhere except when writing the mask directly during idling the gpu for consistency do this also there while at it also extend the code comment about affected platforms i couldnt reproduce the issue on vlv fixed by this workaround by removing the workaround from everywhere while its reproducible on snb using so also add a note that it hasnt been verified if the workaround really applies to
942e4a30eb87a7565c1cd28a08825f58b0794711	asoc rt5645 add dmi google reks for chrome
a492cd52b530cbcf42eb7349e6b435804a7a9271	revert bluetooth add support for communicating keys with userspace this reverts commit if we use separate messages and list for smp specific keys we can simplify the code conflicts
0798cff46bb2fc9ac24d5d465216db235a8f11f6	use list_safe_reset_next instead of opencoding provides a macro for updating the next element in a safe list-iter so lets use it so that it is hopefully clearer to the reader about the unusual behaviour and also easier to grep
0166fcd09f9343a0371ab47c92e969600512504d	rtc rtc-m41t93 use devm_rtc_device_register devm_rtc_device_register is device managed and makes cleanup paths simpler
cd21067f69240041d36e491ff5597e0217615465	ftrace warn on error when modifying ftrace function we should print some warning and kill ftrace functionality when the ftrace function is not set correctly otherwise ftrace might do crazy things without an explanation the error value has been ignored so far note that an error that happens during updating all the traced calls is handled in ftrace_replace_code we print more details about the particular failing address via ftrace_bug there link
5634e016cf6e2e0c9651081f5c554f59e1050fc5	usb dwc2 host wait for controller stabilization some high speed mass storage devices fail to enumerate with following error cannot enable port maybe the usb cable is this happens only when the device is plugged while the controller is in hibernation state after exiting hibernation the controller detects the device as a low speed device and fail to enumerate it problem occurs only if bit is programmed in a too short delay after exiting hibernation dumping hprt register in _dwc2_hcd_resume directly after dwc2_exit_hibernation shows that level becomes valid approximately after exiting hibernation since dwc2_exit_hibernation is called from atomic context move the delay out of this function delay value is experimental and not mentioned in synopsys documentation to be on the safe side delay is used
f33d0081ff3ffb7180a9794e60318458d7671b36	regulator palmas remove a redundant setting for warm_reset current code read of property twice and set twice read and set it once is enough
5be8e0702619eb3e77ec41c3b8825d0bbdfd8cda	race between start and stop service threads when ptlrpc_start_thread fails to create a new thread it will finalize and free a struct ptlrpc_thread created and used here considering this it can be a problem when ptlrpc_svcpt_stop_thread is driven and handles the struct ptlrpc_thread right after or right before failure of cfs_create_thread because this situation let the both of ptlrpc_start_thread and ptlrpc_svcpt_stop_threads access the freed ptlrpc_thread and cause os panic or it may happen that ptlrpc_svcpt_stop_threads waits forever holding an already-freed waitq this patch adds an error handling into ptlrpc_start_thread to fix this problem intel-bug-id lustre-change
7bd000cb0c6f7edf159993cd772206d36599e822	drbd dont forget error completion when unsuspending io possibly sequence of events synctarget is made primary then loses replication link only path to good data on syncsource behavior is then controlled by the on-no-data-accessible policy which defaults to ond_io_error may be set to ond_suspend_io if ond_io_error is in fact the current policy we clear the susp_fen io suspended due to fencing policy flag do not set the susp_nod io suspended due to no data flag but we forgot to call the io error completion for all pending suspended requests while at it also add a race check for a theoretically possible race with a new handshake network hickup we may be able to re-send requests and can avoid passing io errors up the stack
cfe8f97c8243cec6614524779424f2de9c335c5c	alsa usb-audio rename fast track ultra mixer quirk functions this is in preparation for more ftu controls to come should help keeping names a bit shorter
2bb812df63bbd246bd39d10f2e810b2a0a59e99e	dm cache discard block size must be a multiple of cache block size otherwise the cache blocks may span two discard blocks which we dont handle when doing the discard lookup
b60f2f66a58c43e8c928336ec72f64e72f1237ea	serial amba-pl011 factor out code for writing lcr_h register the code to cope with a split lcr_h register is non-trivial so put it into its own function to avoid duplication
bb8fe8ea0067083e0452d5c67a4ab70ad72cc52f	power supply sbs-battery fix the sbs interrupt request since we use the default primary handler for the irq irqf_oneshot must be set otherwise the request fails and the following errors are displayed genirq threaded irq requested with and for irq __number__ sbs-battery failed to request irq
107818e2dad943ec357f6fdfa70377317a142d9d	tcm_fc set and unset fcp_sppf_targ_fcn when registering and unregistering as an target port we should be setting the service params correctly
3796f1e2ca38deebd30aa755ea52562b6926c73e	pci skip cardbus assigned resource reset during pci bus rescan otherwise when rescan is used for cardbus assigned resources will get cleared
d806b46e5f496a6335ebd7f8432d2533507ce9a2	mmc block fix tag condition with packed writes apparently a cut-and-paste error do_data_tag is using brq for data size even though brq has not been set up instead use blk_rq_sectors
2ccc8731e5054058d5fb990744b4f72a79018d34	hwmon jc42 simplify hysteresis mask define jc42_cfg_hyst_mask as the mask _before_ shifting instead of after shifting this simplifies the current code slightly and will simplify the code to come even more
eaf7bfb0925975c955d5069d70bbd05f34db6846	pinctrl pinctrl-mxs remove empty pinmux disable function
66893ea3757ceb2a95b57ac0fec6632003155f5b	staging adis16203 remove locking on raw reads of iio_chan_info_calibbias adis16203_read_raw does not need lock for iio_chan_info_calibbias since adis_read_reg_16 is already atomic and nothing else needs to be protected
40a13e2493c9882cb4d09054d81a5063cd1589a2	ixgbevf use a private workqueue to avoid certain possible hangs use a private workqueue to avoid hangs that were otherwise possible when performing stress tests such as creating and destroying many vfs repeatedly
5982a5565a08abf3b9ff18941b3e3cc94f7c8286	igb always enable vlan __number__ even if is not loaded this patch makes it so that we always add vlan __number__ this is important as we need to guarantee the pf can receive untagged frames in the case of sr-iov being enabled but vlan filtering not being enabled in the kernel
2fb5ef09de7c8ab30f7aa315e700a46f51ac4b98	net dsa mv88e6xxx extract single vlan retrieval rename _mv88e6xxx_vlan_init in _mv88e6xxx_vtu_new eventually called from a new _mv88e6xxx_vtu_get function which abstracts the vtu getnext vid-1 trick to retrieve a single entry
087b6ff682ff62c49c9a36ddfd24fc781367b1d1	ath9k_hw fix mac clock rate for ar9287 this chip uses the async fifo feature and runs the mac at __number__ mhz
ca2d2bb6618396ec0a79b182fcd1591ef62b07cb	staging avoid dereference of a freed is used later when uninstalling the module as there is another kfree in the proper place this patch removes the wrong one
1ca4d0b6b903125b86df0586e5cb3db0b6674bb7	ath6kl fix error handling ath6kl_target_config_wlan_params the error handling in ath6kl_target_config_wlan_params was just weird fix that this also fixes some of the open parenthesis alignment issues reported by checkpatch
343af6379e950266ee3d4f638a3ffe0b01b08eab	staging iio magnetometer remove exceptional on function name in this names are otherwise used as pointers without found using coccinelle identifier f identifier f
74e4d82757f7479bab6b854783f84a5b9f2df78f	btrfs let callers of btrfs_alloc_root pass gfp flags we dont need to use gfp_nofs in all contexts eg during mount or for dummy root tree but we might for the the log tree creation
3c345825c899df0751b01143b159ddaefb91a220	rcu expedited wakeups need to be fully ordered expedited grace periods use workqueue handlers that wake up the requesters but there is no lock mediating this wakeup therefore memory barriers are required to ensure that the handlers memory references are seen by all to occur before returns to its caller possibly detected by syzkaller
e28cd4d0a223e1bcea616326e2281900e7e7e9a2	drm automatically all connectors as the drm_connector is now safe for multiple calls to automatically perform a registration on all known connectors drm drv_register and unregister from drm_drv_unregister drivers can still call drm_connector_register and drm_connector_unregister individually or defer as required link
dffeacd95ed626b4f94f9af5c49145c615422e91	staging fsl-mc dprc shorten dprc interrupt name improve readibility of the dprc interrupt name in sysfs by shortening this and just using the device name there is only one interrupt dprc used so no further differentiation is needed
4a316f7916d53c9c6e482b37f556102b5cf80546	dont use cpus_weight cpus_weight and for_each_cpu_mask are deprecated so replace them with cpumask_weight and for_each_cpu respectively
a7c4efbfbe45f7f9e09bc6ff27e9762b89354449	hdmi audio gets the tmds clock by crtc_clock hdmi audio should use crtc_clock to get the tmds clock this patch renames mode to adjusted_mode to unify the name
4d485661d799e81f98097057d445f4803cef2af0	arm cleanup omap hwmod error checking omap_hwmod_lookup only returns null on error never an error pointer checking the returned pointer using is_err_or_null is needless overhead use a simple check instead omap devices always have a valid platform device attached see omap_device_alloc so theres no point validating the platform device pointer we will have already oopsed long before if this is not the case here lastly is only ever null or a valid omap device pointer oh comes from the statically declared hwmod tables and the pointer is only filled in by omap_device_alloc at a point where the omap device pointer must be valid
cf92fefd040e6117fbcd4ce2baa9c54ae515e0c6	dont wait for vblank and stop calling cleanup_planes in commit_tail drm_atomic_helper_cleanup_planes only calls the cleanup_fb plane helpers which we dont implement as a cma framebuffer based driver there is no reason to wait for vblanks in commit_tail only to do nothing afterwards
eea422709fd89aec27be408f451557ebedd19f11	scsi fc remove redundant check of an unsigned long being less than zero the check for an unsigned long being less than zero is always false so it is a redundant check and can be removed detected by static analysis with by pvs-studio
c431e678127578c1b86fe976556d79dd669ad953	use __ioread32_copy instead of open-coding it now that we have a generic library function for this replace the open-coded instance
6273f1810f95f4deeb2f0d6810f301726ad32308	usb ehci add condition for delay during the resume without this condition all controllers will do this delay and increase the resume time only enabled and unsuspended port needs this delay but some buggy hardwarelike synopsys usb controller will clear suspend bit once they resume signal so it takes resume bit as consideration tested it at freescale sabrelite board
50021ff1ad5da500a09ca4866467a12cf66f37cb	improve code readability add a couple of temporary variables and use shorter names for existing variables in drm_fb_helper_add_one_connector for better readability link
abcf834b80eefb2ded56254ce7de94d2ab258d22	watchdog wm831x convert to gpio_request_one use the more modern api
27e6772b0d492375621f496a114617bf9c17c8d2	set spt correctly in extended inquiry data vpd page lio supports protection types so setting a hard-coded is fine for now
bd508666e58ecf1712f8a132ab435cf0ef2d3d3c	remove unnecessary runtime pm operations in booting we can see a below message __float__ exynos-mixer __number__ unbalanced pm_runtime_enable already pm_runtime_enable is called by probe function remove from mixer_bind and mixer_unbind
6decffd5f6afaf55722d9c85b8739621dca63d0f	ioat remove chanerr mask setting for ioat the existing code set a value in the pci_chanerrmsk_int register for a workaround to address a pre-silicon bug on the intel __number__ io hub that has been fixed when the hardware was released there is no need for this code
e32ad07cea1f198db1cc6c2055dd8471b562a535	ab8500_fg dont clear the ccmuxoffset bit the ccmuxoffset bit is not kept set this will force the columb counter of the ab8500 to use the measure offset calibration this should increase the accuracy of the fuel gauge
d90e3a35e90af7f8beceebefc90e62eae237c5ed	kvm x86 drop unneeded null test if the null test is needed the call to cancel_delayed_work_sync would have already crashed normally the destroy function should only be called if the init function has succeeded in which case ioapic is not null problem found using coccinelle
a2d33d87d8a4a5047597439fb917f57e4264a79a	__number__ propogate the bugs field now we are using the uart_8250_port this is trivial
4bb1f1ed0063870f34ae5783cda08924964bac0b	rbd move locking out of rbd_header_set_snap move the calls to get the header semaphore out of rbd_header_set_snap and into its caller
1d516c41d9b19e3c264c5da8c64e7f5d503e8268	add an implement for check_power_state equal for ci
4984c23735132790e8f2dfdd35849dba3bd7264f	sfc use __iowrite64_copy instead of a slightly different local function __iowrite64_copy isnt quite the same as efx_memcpy_64 but it looks close enough the length is in units of qwords not bytes it never byte-swaps but that doesnt make a difference now as pio is only enabled for x86_64 it doesnt include any memory barriers but thats ok as there is a barrier just before pushing the doorbell mlx4_en uses it for the same purpose compile-tested only
7705b6d8eac89067e5177835468c99e71e2cd40c	media v4l soc-camera call soc_camera_power_on after adding the client to the host soc_camera_power_on calls clients method which can try to access the client hardware this however is typically only possible after calling hosts method because thats where the host driver usually turns the master clock on
57240f04343177ae505ec422501f495f367d11a8	staging bcm renamed variable writeoffset write_off
64bea46e3ff28701aa34be48b93c7907ebbdb31e	hso always read interface number from the current altsetting always read binterfacenumber from the current altsetting not from the first one available in the altsetting array this is coming from code review not related to any specific bug
76ed94be65c8bd80b565865c186dd9f24bb2f23b	ath9k_hw set pci_express capability true for ar9480 the ar_srev register does not seems to indicate whether ar9480 is pci_express capable or not though the other information like macversion etc can be obtained properly this fix is essential as aspm wont be intialized and its related driver functionality ath9k_hw_configpcipowersave wont be called
9fa8e980bb0a56e46ddd97731f83f608c39aa7a5	mv643xx_eth allocate receive queue initialized to zero zero pointer in rx_skb is how respective rxq_deinit finds out out that a skb slot is unallocated if rxq_refill fails on oom condition subsequent teardown would result in an attempt to kfree invalid pointers
ddb2ff731b53ae28ec3a2af0da96a108b8bad814	arm add support for the cortex-a12 processor the a12 behaves as the does with respect to setting the smp bit and doesnt require tlb ops broadcasting to be explicitly enabled like the a9 does note that as the actlr cannot usually be written from non-secure it is the responsibility of the to set this bit per core it is done here in linux as last resort in case of bad firmware
079db0c6e3854b3af9808268f3b884fa48ed0034	bluetooth amp fix possible null dereference check that link key exist before accessing
1418bf076d08edd47a610ea3844c6f6012949a51	ceph checking for is_err instead of null ceph_osdc_alloc_request returns null on error it never returns error pointers
91dbc08d64fba7c1426a32be4c57ebb63c4be124	scsi replace scsi_data_buffer with sg_table in sg functions replace parameter struct scsi_data_buffer with struct sg_table in sg functions to make them generic
e59646895778f1e645b4e2f02d99aaec7a144ce1	media gspca jl2005bcd remove deprecated create_singlethread_workqueue the workqueue work_thread is involved in streaming the camera data it has a single work and hence doesnt require ordering also it is not being used on a memory reclaim path hence the singlethreaded workqueue has been replaced with the use of system_wq system workqueues have been able to handle high level of concurrency for a long time now and hence its not required to have a singlethreaded workqueue just to gain concurrency unlike a dedicated per-cpu workqueue created with create_singlethread_workqueue system_wq allows multiple work items to overlap executions even on the same cpu however a per-cpu workqueue doesnt have any cpu locality or global ordering guarantee unless the target cpu is explicitly specified and thus the increase of local concurrency shouldnt make any difference work item has been flushed in sd_stop0 to ensure that there are no pending tasks while disconnecting the driver
8dee3eea3ccd3b6c00a8d3a08dd715d6adf737dd	never read forcewake the same designer from the previous patch has told us to never read forcewake we only do this for the posting_read so simply change that to something within the same cacheline for no reason in particular other than it sounds nice in the _mt case we can leverage the gtfifodbg check for the posting_read this partially reverts commit date thu jul __number__ __number__ fix forcewake related hangs on snb v2 commit message comments about posting read from daniel note vlv forcewake doesnt need any changes for this special treatment since forcewake_vlv is in a totally different register range and the readback forcewake_ack_vlv readback that follows is in the same range danvet added note
14956643550f2d2748ab08b7cbdbb3342bc942c4	ipv6 slight optimization in ip6_dst_gc entries is always greater than rt_max_size here since if entries is less than rt_max_size the fib6_run_gc function will be skipped
f730e3dc6dc4698d55fd9bf6de33a5436900e9bd	rsxx changing the adapter name to the official name changing the adapter name from flashsystem-80 to the official name flash adapter full height
7d6069e571d7c0882210ab5e885de4a940ef9391	omapdss sdi replace with references with addition of output entities a device connects to an output and an output connects to overlay manager replace the references with to access the manager correctly when enabling the sdi output check whether the output entity connected to display is not null
fda8b13ddce96335de2c6ae46bd3b14829318afe	media s5c73m3 check v4l2_of_parse_endpoint return value the v4l2_of_parse_endpoint function can fail so check the return value
2c1b54d331bde7afbf8da24789cce2402e155495	dont do validation on raw events mips licensees may want to modify performance counters to count extra events also now that the user is working on raw events the manual is being used for sure and feeding unsupported events shouldnt cause hardware failure and the like performance evaluation and have a tendency to change as the micro- architecture evolves even for minor revisions that may not be distinguishable by prid its not very practicable to maintain a list of all events and there is no real benefit patchwork
7fdc5561ca705dbecdabbcc33165c73330e4d13b	media em28xx remove dead code as reported by smatch get_ressource info ignoring unreachable code
fed0b588be2f55822013808a2968c228258d921b	posix_acl fix reference leaks in posix_acl_create get_acl gets a reference which we must release in the error cases
236d9039480059f97dc9d3cd75e3651582b62997	hwmon nct6775 drop lock the lock is acquired for each operation the chip this occurs either during initialization when it is not needed or during updates when the update_lock is held as well and it is not needed either
ea9dd9d655adf16b083b79ad84e5b012543f659f	extcon change permission state sysfs entry rw r this patch change permission from to only read the specific process in the user-space couldnt change the state of cable when cable is attached or detached
6fe345afd778cfa374c75a325f8c5b4801d89205	staging unisys fix camelcased notifier globals fix these camelcased names busdev_server_notifiers busdev_server_notifiers busdev_client_notifiers busdev_client_notifiers update references to use the fixed names
ec44fd429879f7d4f28021f1a7f9fb0b5f831aab	fix setting in current code is set to lm3530_als_window_mv and is __number__ this does not make sense i think what we want here is setting to lm3530_als_window_mv both als_vmin and als_vmax local variables will be set to and by a few lines latter thus also remove a redundant assignment for als_vmin and als_vmax in this patch
06d186010ccfbaed6981991d221bd7769b891537	acpica interpreter add additional debug info for an error case emit the name of the namespace node for the error case when there is no subobject attached to the node
dcce583792d2b9a83dd9cb62551831f09f971fda	hid rmi do not fetch more than __number__ bytes in a query a firmware bug is present on the xps haswell edition which silently split the request in two responses when the caller ask for a read of more than __number__ bytes the fw sends the first __number__ then the __number__ next but it says that it answered the __number__ bytes in the first report this occurs only on the retrieving of the of x and y of the f11 function we only use the first __number__ bytes of the ctrl register so we can get only those __number__ bytes to prevent the bug from happening resolves
b699f09d0d003cc1622aec30d81f3158da6790aa	media media davinci vpbe_display fix releasing of active buffers from commit-id b3379c6201bb3555298cdbf0aa004af260f2a6a4 vb2 only call start_streaming if sufficient buffers are queued the vb2 framework warns on warn_on if all the active buffers are not released when streaming is stopped initially the vb2 silently released the buffer internally if the buffer was not released by the driver this patch fixes following issue warning cpu __number__ pid __number__ at modules linked in cpu __number__ pid __number__ comm vpbe_display tainted g w unwind_backtrace from show_stack from warn_slowpath_common from warn_slowpath_null from __vb2_queue_cancel from vb2_queue_release from vpbe_display_release from v4l2_release from __fput from task_work_run from do_exit from do_group_exit from get_signal_to_deliver from do_signal from do_work_pending from end trace cut here warning cpu __number__ pid __number__ at modules linked in cpu __number__ pid __number__ comm vpbe_display tainted g w unwind_backtrace from show_stack from warn_slowpath_common from warn_slowpath_null from vb2_buffer_done from __vb2_queue_cancel from vb2_queue_release from vpbe_display_release from v4l2_release from __fput from task_work_run from do_exit from do_group_exit from get_signal_to_deliver from do_signal from do_work_pending from end trace
fe37ed6a2dd63b5cc945b6b354c02b58473c0abf	drm mali-dp dont set drm_plane_commit_active_only we need to explicitly disable our planes so dont set the flag which would otherwise skip the plane disable when the crtc is disabled
5689b786f77308e7aa10fd736e87b270ae42026e	power reset ltc2952 fix style function pointers the function pointers for the timers and pm_power_off are assigned with style foo lets change it instead to the more c style foo func
8fc31ce8896fc3cea1d79688c8ff950ad4e73afe	remove invalid warning from list_update_cgroup_event the warning introduced in commit do not set for unscheduled cgroups assumed that a cgroup switch always precedes list_del_event this is not the case remove warning make sure that is null until a cgroup event is sched in or __number__ link
c3eaa088277709d3e489c19a5a5b698eefbeb434	use drm_mode_vrefresh rather than open coding it
e596af827960c41a6051d4e719bafcfb7da11b64	mac80211 mesh flush paths outside of plink lock lockdep warned of a lock dependency between the mesh_plink lock and the internal lock for the rhashtable the problem is that the rhashtable code uses a spin lock with softirqs enabled while mesh_plink_timer executes a walk to flush paths on a state change inside a softirq with the plink lock held this leads to the following deadlock if the timer fires while rht lock is held on this cpu and plink lock is held on another cpu cpu0 cpu1 local_irq_disable deadlock fix by waiting until we drop the plink lock to flush paths
0eae2fde164caaa013a3f7341fd3e7e36e8e2865	usb dwc3 pci add property calling platform_device_add_properties replaces existing properties so the property doesnt get set add this property to each platform
18c441a6c3741991bfb87a3c6c541d30f0eb9c7c	support xrc qps allow users to connect xrc qps through the rdma_cm
3c75108fce9be6c72c45e50973b3cbb0fcdb4f19	scsi bnx2fc tx bds cache in write tasks when there is a single bd for the entire data to be transmitted use the bd inside the sgl context and set the cached sge indication in the task context
3c08712f0e88180bd17bb58ef08d94c48fe532fb	staging comedi adv_pci1724 remove use of comedi_error the comedi_error function is just a wrapper around dev_err that adds the prefix to the message and a terminating new-line character the addition of the driver_name is just added noise and some of the users of comedi_error add unnecessary additional new-line characters use dev_err directly instead of comedi_error to avoid any confusion and so that all the comedi generated kernel messages have the same format
e3ac79e087ffe8a1f953ed44a74acf7616cb0b25	move the check for periodic mode inside state handling we need to check more than the periodic mode for proper operation in all runtime combinations to avoid code duplication move the check into the enter state handling no functional change split out from a larger combo patch link
c2f4527e70352a9c84af7f2357e8d28255d62beb	staging rts5139 fix sparse warning for static declarations in this patch fixes the following sparse warning in warning symbol rts51x_pre_reset was not declared should it be warning symbol rts51x_post_reset was not declared should it be
78f7411668aa0b2006d331f6a288416dd91b8e5d	uprobes do not use in install_breakpoint paths from install_breakpoint no longer makes sense all callers should simply treat it as success change the code to return zero and simplify register_for_each_vma
cfe8255f0afcf5d2d1dbfa093223cafe38773fa7	xtensa xt2000 drop redundant sysmem initialization sysmem structure initialization in xt2000 platform_init is identical to the one done in init_arch just before the call to platform_init
04aff96ad49d297fa530bb01aa09f1f39e65189a	iio accel mma9553 return __number__ as indication of success use return __number__ instead of return ret to mark clearly the success return path
f1a03b76fecdb23983e2ad7e817e98d093ece9f7	xprtrdma refactor tasklet scheduling restore the separate function that schedules the reply handling tasklet i need to call it from two different paths
3dcef2ca02f46c469bda7be8890d9f13aa0c7d69	liquidio limits this patch removes the dependency of number of on number of cpus
399ae7254e13de9239d74574f9fc39fb91a536cf	alsa staticize codec_send_command codec_send_command is used only in this file make it static
1c1cc454aa694a89572689515fdaaf27b8c9f42a	allow non-ats devices in iommuv2 domains with the grouping of multi-function devices a non-ats capable device might also end up in the same domain as an iommuv2 capable device so handle this situation gracefully and dont consider it a bug anymore
68acb8e60d672cba0fd1d3545ba33343931c7a24	hfsplus switch to d_make_root
3b1d0b9d0b6f4b76293c8f30cc95aa946bd34150	gfs2 update rgblk_free to use rbm replace open coded version with a call to gfs2_rbm_from_block
cf4c024b908353fcc48309374d39e3399d67dfd1	sunrpc trim off ec bytes in gssapi v2 unwrap as bruce points out in rfc __number__ section in wrap tokens that provide for confidentiality the first __number__ octets of the wrap token the header as defined in section shall be appended to the plaintext data before encryption filler octets may be inserted between the plaintext data and the header in wrap tokens with confidentiality the ec field shall be used to encode the number of octets in the its possible for the client to stuff different data in that area on a retransmission which could make the checksum come out wrong in the drc code after decrypting the blob we should trim off any extra count bytes in addition to the checksum blob
fa100163d38ef8607652681fbe6f75491032610e	mtd nand hisi504 use the mtd instance embedded in struct nand_chip struct nand_chip now embeds an mtd device make use of this mtd instance
91e0efcd4c23d98479a2f44753a53bc3456bba97	usb serial ch341 clean up control debug messages clean up the control-transfer debug messages by dropping redundant information and unnecessary casts
563af186df08002d2600c4e718ad8f3bde109f53	dm thin wake worker when discard is prepared when discards are prepared it is best to directly wake the worker that will process them the worker will be woken anyway via periodic commit but there is no reason to not wake_worker here
6e65104504feaff41848defcef9c2c16c119f90c	brcmfmac check result of usb firmware request this prevents silence failures with driver waiting infinitely for a callback
6a6b3f3e13decfc4b97263a83ea4e80ac8cc89ae	ath9k fix kernel panic on unplugging the device when the device is yanked out ath_pci_remove starts doing the cleanups unregistering the hardware etc so we should bail out immediately when we get drv_flush callback from mac80211 when the card is being unplugged the panic occurs after we had associated to an ap eip eflags __number__ cpu __number__ eip is at ath9k eax __number__ ebx ecx __number__ edx esi __number__ edi __number__ ebp esp ds es fs gs ss __number__ process pid __number__ stack __number__ __number__ __number__ __number__ __address__ __number__ __number__ __number__ __number__ call trace ath9k mac80211 mac80211 mac80211 mac80211 cfg80211 cfg80211 cfg80211 mac80211 mac80211 ath9k ath9k
5819c2fa55d4a6eaf7fe025a393dce98fc4b2116	asoc restore idle_bias_off initialization this was accidentally lost in commit f1d45cc3ae96 asoc consolidate platform and codec
4ccfd6383a1a4838ed034120f00d02dbdc681d6f	net ethernet ti cpsw fix assert_rtnl warning during resume are required to be called with rtnl_lock taken otherwise assert_rtnl warning will be triggered which happens now during system resume from suspend cpsw_resume cpsw_ndo_open assert_rtnl hence fix it by surrounding cpsw_ndo_open by calls
916188a46618313eedb07acac00fa575c503ff25	omapdss cleanup wb functions instead of doing direct register dispc_wb_enable and dispc_wb_is_enabled functions can use the common overlay functions to set and check the enable bit
bb79036215e2ca9d7ef5bd1461981396989c40da	intel-mid_wdt error code is just an integer error code when printed is more readable if its represented as plain decimal integer otherwise user will see something like intel_mid_wdt error stopping watchdog __address__ which is not quite understandable should i interpret it as a make it clear to use plaint integer specifier while here move struct device local variable definition to the top of functions
de3bfc4a16165cfc5f1504981f836d39a5f39a64	mtd nand omap2 fix return value check in omap_nand_probe in case of error the function dma_request_chan returns err_ptr and never returns null the null test in the return value check should be replaced with is_err information from dt
a33411b26e43d67d361298a822ecfd76a177183f	extcon max77693 fix checkpatch warning fixes the following warning warning space prohibited before semicolon
06529407329841ed836b30e4a99905a522ffa323	usb gadget f_hid check return value of class_create class_create might fail so check its return value and react appropriately
7b6ab33c28980ae26de09654a0d5db6080c76921	staging ipack provide several carrier callbacks we provide callbacks to the clockrate a module is accessed at get the error state of a slot the timeout state of a slot
5469d4f22e0c18fc5499b11269d2c528094bcf1e	clk shmobile div6 avoid division by zero in anyone may call clk_round_rate with a zero rate value so we have to protect against that
c8550db532bd6e9b88342d25b222c4b339a6fc40	staging netlogic remove blank spaces after a cast remove uneeded blank spaces after a cast checkpatch found these issues
b1aced6f2dfd8c11a36643b020aa8d7040eb0557	ion update system heap shrinker to use the new interface update the ion system heap shrinker to use the new interfaces that landed in __float__
fbf501c347b2eea8451a615bd823b6b91a1a8eed	pci clarify pci_exp_type_pci_bridge comment the pci_exp_type_pci_bridge is a function that is a bridge to see pcie spec sec
c65a5a562e3b55297767a4022543867e01a66080	staging rtl8192e revert one previous commit this patch reverts commit staging rtl8192e fix incorrect type in assignment in as it is changing code and introducing bug to skip the endian conversion here tmp variable is used to hold the endian-corrected values and network-data requires fixed endianness
c7f23180c6025fc93d1b743a49a97c4bb0c26f19	clk shmobile check for failure we were not checking the return from devm_add_action which can fail start using the helper devm_add_action_or_reset and return directly as we know that the cleanup has been done by this helper
06e92c33999fd66128c2256b0461455633c3d53c	r6040 invoke when appropriate joe reported to me that right after a bring up of a r6040 interface the ethtool output had no consistent output with respect to link duplex and speed fix this by adding a missing phy_start call in r6040_up and conversely a phy_stop call in r6040_down to properly initialize phy states
c759174e73ab4a2190244c903649032ac748586d	gpio mpc8xxx be sure to clamp return value as we want gpio_chip calls to be able to return negative error codes and propagate to drivers we need to go over all drivers and make sure their return values are clamped to we do this by using the ret design pattern
9c943f4ed479d58a2814239815e45fc0b61f4116	staging comedi me4000 remove the pci resource error messages remove the error messages about the pci base address not being available they are just noise
4c205ab53489894c77f81fe9a0c0ff6345b83e76	staging media use module_i2c_driver macro module_i2c_driver is used for drivers whose init and exit paths does only register and unregister to i2c api so here remove some boilerplate code by using module_i2c_driver
7b4500bc519686712471924972022df88b12ff93	perf annotate fix failure when filename has special chars when filename contains special chars perf annotate fails with an error perf annotate native_safe_halt sh line __number__ syntax error near unexpected token sh line __number__ objdump __address__ __address__ fix it by surrounding filename in double quotes link
0143d8b7460e790ee522dcef0072801e8818c4eb	scsi qla2xxx implement beacon support for isp83xx
188c1ab7769dd7c092f9b1be5f69aa34d4a6f9d6	add struct_mutex locking for since describe_obj looks at state guarded by the struct_mutex we need to be holding it __float__ drv_suspend starting subtest debugfs-reader __float__ cut here __float__ warning cpu __number__ pid __number__ at __float__ cpu __number__ pid __number__ comm cat not tainted __float__ hardware name bios __float__ __number__ __address__ __address__ __number__ __float__ __address__ __address__ __address__ __address__ __float__ __address__ __address__ __address__ __address__ __float__ call trace __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ end trace __float__ cut here
d640e757949e2991215838c0edbfd6afc37e5b06	mfd twl-core change ids to to facilitate upcoming cleanup in twl stack no functional changes
c7b82cc8d95e69afe2dc1038fb73abc048a3bca5	vxge dont receive packets when the napi budget __number__ processing any incoming packets with a with a napi budget of __number__ is incorrect driver behavior this matters as netpoll will shortly call drivers with a budget of __number__ to avoid receive packet processing happening in hard irq context
30373b639aa46d9f28f6b030cab9c0a54b9705d5	gpio tegra make of_device_id array const make of_device_id array const because all of functions handle it as const
0c0aa8446433849f19761ebb7cd2f58fde387a04	hwrng pixocell use devm_clk_get use devm_clk_get to make cleanup paths simpler
41ccebaecef50e56f822791a52b7bd9e9608e5e6	restructure pcie_pme_suspend to prevent compiler warning previously we had this if wakeup ret if ret ret is only evaluated when wakeup is true and it is always initialized in that case but gcc isnt smart enough to figure that out and warns warning ret may be used uninitialized in this function restructure the code slightly to make it easier for gcc and maybe for humans as well acked-by rafael j wysocki
b6378cb3e545912a19e6355aa9171326fdc004d8	edac i5100 fix erroneous define for m1err according to __number__ the define for m1err in the ferr_nf_mem register is wrong it should be at position __number__ not __number__ __number__ intel __number__ memory controller hub chipset __number__
e933c70de0e2590d41f5edd3133e7ee12b4e0bc6	openrisc dont mask signals if we fail to setup signal stack setup_rt_frame needs to return an indication of whether it succeeded or failed in setting up the signal stack frame if setup_rt_frame fails then we must not modify
0ad2f378e1af7996d6f8355c02181ff3cc7ab260	check invalid deviceid upon slot table waitq wakeup tasks sleeping on the slot table waitq wake to the rpc_prepare_task state reset the task for io through the mds if the deviceid is invalid the reset functions put the io pages through the pageio layer which has the advantage of re-coalescing which allows for the mds and ds having different exit the awakened task without executing the rpc_call_done routine
d882d73eb72d7e5d57645c8d40195f4a7ad76f6c	regulator tps6105x constify regulator_desc
2855b9fe416e55d01a1946b142d87abd4cceb6ea	tg3 remove unused link config code when tg3 devices are shutdown the driver uses the tg3_phyflg_is_low_power flag to enable a static phy configuration any attempt to use the link configuration variables is dead code this patch removes such code
4578240b48ed33f4377748701616a870fe5a1a94	gma500 re-order calling on the fix setup so we set up after the drm layer noted by kirill a shutemov
7ee330c7b3b738847bf297912b371bbcec3bc994	can c_can fix calculation of transmitted bytes on tx complete the number of bytes transmitted was not updated correctly if several can messages with different length were transmitted in one bunch thus programs like ifconfig showed wrong transmit byte counts reason was that the message object whose dlc is to be read was not necessarily the active one at the time when c_can_ifacemsgctrl_reg __number__ if_mcont_dlc_mask was executed
40d276ede92e85e4f414ac655c217e0bf5292cbb	greybus bootrom create gb_bootrom_cancel_timeout we set timeouts using gb_bootrom_set_timeout which hides the internal implementation workqueues while canceling timeouts we do cancel_delayed_work_sync which exposes the internal implementation and doesnt look that clean create gb_bootrom_cancel_timeout to hide the internal implementation here as well
7805d2bdfe47151a1973f86bc98e1582523ecece	arm kirkwood stop printk tclk value at boot for dt boards commit arm kirkwood convert to dt irqchip and clocksource dropped the call to kirkwood_timer_init when booting with dt this results in kirkwood_tclk not being set and the boot message is now kirkwood mv88f6281-a0 this patch modifies the message for printing only the kirkwood id as it allows to detect if were running variants with a simple dmesg
2dee5c43da3a981489a4f18972827139afcbee82	x86 fix section conflict for numachip a variable cannot be both __read_mostly and const this is a meaningless combination just make it only const this fixes the lto build with numachip enabled link
f5c0b0910ac4c1bc93474d7593cc73622fdfc822	blk-mq show symbolic names for hctx state and flags instead of showing the hctx state and flags as numbers show the names of the flags
ede29a020ec3b493748c5eb780aa9d5977f72db8	mtd nand fsmc kill structure fields the and fields of struct fsmc_nand_platform_data are never set anywhere so they are always the corresponding fields in struct fsmc_nand_data are set to the value of the same fields in fsmc_nand_platform_data therefore we remove those two fields and pass directly to mtd_device_register like many other nand drivers already do at the same time we remove the comment about the fact that we pass partition info since we are no longer doing this
1aecca3e83e5da981ade916920d3d2a6b9644cc3	nfsv3 dont open code stream position calculation in decode_getacl3resok use the new xdr_stream_pos helper instead
97eac21babe47e1a8ed4cac4f8874c5746cf6e36	cleanup crashkernel reservation functions shorten variable names realign code space out for better readability no code changed text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ md5 link
6d3729ac1332e3b63b7a140d29fb60ef77d61af6	use the new event functions
d813ae9a105219255c07d382059de831186c10d0	regmap include the last register in debugfs output off by one in the array iteration
1a1ed1ba6778a5bc5702cebe276ab080a0b78115	perf inject fix broken perf inject perf inject was broken it would not inject any build_id into the stream furthermore it would strip samples from the stream the reason was a missing initialization of the event attribute structure the callback was pointing to a simple repipe but there was no initialization of the internal data structures to keep track of events and event ids that later caused event id lookups to fail and sample would get removed the patch simply adds back the call to perf_event__process_attr to initialize the evlist structure and now build_ids are again injected link
a471be41f2bfe4ee3a4b38b0e5af17d0abfd3aa6	rocker track when fdb entry is touched the entry is touched once when created and touched again for each update the touched time is used to calculate fdb entry age
9b79ca855e2ff70eb287e3601e6a344306093e9f	move open braces to previous lines in move open braces to previous lines in to meet kernel coding standards
5b29c573f3dcb22534489194ba97aeb495cc65ca	wil6210 more tx debug print tx descriptors print ring index for all tx related messages sort prefixes tx for transmit txc for completion added d for descriptor related prints
609d59acb68ab5175768b818438ea2c95ab9a980	rtlwifi btcoex add pnp notidy to avoid mismatch when driver is going to sleep it does not leave thus the btcoex may have mismatch when driver wakes up to avoid that btcoex needs to clear the state when it receives a pnp notify then it can properly set up the hw when driver wakes up
57eedc316ea19680d50eb3789cbddf50a8986719	media bttv fix indenting bttv_s_fbuf warn inconsistent indenting
27389d7823f573be8eaff32fb4abe564e181eb71	perf tools validate perf event header size the size variable includes the header so must be at least sizeofstruct perf_event_header error out immediately if that is not the case also dont byte-swap the header until it is actually fetched from the mmap region link
fe2d1851e9dc69da8de5dfe3fc748d041c31e25a	scsi sd use sd_printk instead of printk sd_ioctl still use printk for log output it should use sd_printk instead of printk as well as other all scsi messages should output via instead of printk
ea3b2ea24ef0f2ef9c6795b19cff456195b6728a	mtd nand initialize bitflip_threshold prior to bbt scanning as of edbc454 mtd driver _read returns max_bitflips mtd_read returns must be set for mtd devices having ecc prior any mtd_read call otherwise mtd_read will falsely return normally is initialized when the mtd is added however this is too late for nand mtds as scan_bbt is invoked prior the existing initialization of this is a problem since scan_bbt calls mtd_read in the case of a flash-based bad block table it resulted in a falsely reported bitflips indication during bbt read which lead to constant scrubbing of the flash bbt blocks initialize to its default value if not already set by the driver prior to invocation of scan_bbt
3898182b500fca6dbc2fa2fc1c16397dba1938c8	asoc zx fix warnings no need to set here the core will do it remove field if calls are used which set it automatically generated by
af671d8b2c2ace771e08566b20774cc08ee53316	cpufreq pmac64 provide cpufreq transition latency for older g5 models currently cpufreq ondemand governor cannot used on older g5 models because the transition latency is set to cpufreq_eternal provide a value based on a measurement on xserve g5 which happens to be also the highest allowed latency
ae9d2fb482fa48f637b6705e6fef6f7f999ec779	audit fix uninitialized variable in audit_add_rule as reported by the testing service in function audit_rule_change warning err may be used int err
59252d187763ef3675fba1623be6996761fc2400	remove obsolete sh-cmt-32-fast platform_device_id entry since commit arm shmobile sh7372 remove legacy c soc code there are no more users left of the sh-cmt-32-fast platform device name hence remove the corresponding platform_device_id entry from the driver
366e292df678caed1fb3644989e6b5ae2333808c	remove open-coded drm_connector_register_all drm_dev_register will now register all known connectors so we no longer have to do so manually link
b3fef7f10010e7946b3db1a34d8e0208e4f10001	pwm spear remove unused from struct spear_pwm_chip
5669ccee21d87622f30a724b3fe0d04ec5b0afae	uprobes introduce copy_to_page extract the code from xol_get_insn_slot into the new simple helper copy_to_page it will have more users soon
8a66fdae771487762519db0546e9ccb648a2f911	mmc toshsd fix unbalanced locking fix returning irq_handled with spin_lock held
0e7b824c4ef9f5bcf5e48cdce164a7b349dde969	btrfs dont make a file partly checksummed through file clone to reproduce the bug mount dd umount mount nodatasum dd clone_range echo __number__ cat dmesg btrfs no csum found for inode __number__ start __number__ btrfs csum failed ino __number__ off __number__ csum __number__ private __number__ its because part of the file is checksummed and the other part is not and then btrfs will complain checksum is not found when we read the file disallow file clone if src and dst file have different checksum flag so we ensure a file is completely checksummed or unchecksummed
0c09d3150902d8ca7e763d508ac1a93701b21321	regulator anatop use correct __devexit_p annotation __devexit functions are discarded when config_hotplug is not set so the symbol needs to be referenced carefully
dcce0489477f07ac1331aee71f18d6274e19a9c1	kvm trace events update list of exit reasons the list of exit reasons for the kvm_userspace_exit event was missing recent additions bring it into sync again
7d64a94be2f9fadb1dd95742650f1fdbac69f25b	proc reduce cache miss in sctp_snmp_seq_show this is to use the generic interfaces to aggregate the data by going through all the items of each cpu sequentially
50564a794d64ace92c189d7cb5b591a60d3de9c2	arm integrator print the linux irq in ll_debug code the static hw irqs have no meaning in the interrupt handler and does not correlate to the irq numbers anymore print the linux irq number instead
29cdd4e4ec91aae239192bb122d377d15a9d75e3	dma-debug release free_entries_lock before saving stack trace saving stack trace can take a while and once the entry is allocated free_entries_lock is no longer needed
1b2240eff66cb44f1d1c7c2c2497ff50ad3d1538	omap remove omap_tag_lcd and omap_tag_fbmem these tags are no longer used and can be removed
1364b02fbf6e2d298ff2428ace81f9c6517b4bd8	staging comedi remove unused inline functions remove the inline functions uvirt_to_kva and kvirt_to_kva they are not referenced by any of the code
f7357273198adc86fe11c2a7be8a0816f44103bb	md skip cluster setup in case of error while reading bitmap if the bitmap read fails the error code set is however we dont check for errors and go ahead with cluster_setup skip the cluster setup in case of error
6a2f39b78b16b50488f34c8c0e1cfdae2abd9183	iio fix tcs3472 buffer size and drop obsolete
59b5d2497e2ffe11ef0c45f80ad693d9347daf9d	media media usb pwc pwc-if dont print error when allocating urb fails kmalloc will print enough information in case of failure
f660f6066716b700148f60dba3461e65efff3123	softirq display irq_poll for irq-poll statistics this library was moved to the generic area and was renamed to irq-poll hence update output accordingly
123e20b14530b57bd75e295961d2c1f8c48455bf	mmc host omap_hsmmc fix mmc for omap3 legacy booting starting with commit mmc host omap_hsmmc use devm_regulator_get_optional for vmmc mmc on omap3 stopped working for legacy booting this is because legacy booting sets up some of the resource in the platform init code and for optional regulators always seem to return for the legacy booting lets fix the issue by checking for device tree based booting for now then when omap3 boots in device tree only mode this patch can be just reverted devm_regulator_get_optional for vmmc
ab636481863a1039f5ca3643cfb04d4ae0c965cd	convert to iommu_capable api function
fc8ed7be738ffb1b3b0140ed2de6def38b9a7101	perf top browser remove spurious helpline update it will be immediately replaced in perf_top_browser__run link
b7cf1dc3414de59f178734466f6cfff5171a8ffb	usb dwc3 ulpi use new api the old read write callbacks in struct ulpi_ops have been deprecated in favor of new callbacks that pass the parent device directly replace the used callbacks in dwc3s ulpi component with the new api
973e1d1de0f8af2be7f8c94418f2cda559bd7543	clk vt8500 fix sdmmc clk special cases this patch adds some additional handling for the sdmmc special case in round_rate and set_rate which results in invalid divisor messages at boot time
e4250b3e5cebd971457906ad9021490b05de48e4	clarify the skip message when a frame or a field is skipped output a warning message instead of an error message
f631718de3ca24a9ae03595e937fe0b64cfaf456	ftrace move ftrace_init to right after memory initialization initialize the ftrace records immediately after memory initialization as that is all that is required for the records to be created this will allow for future work to get function tracing started earlier in the boot process
23fe8f8b1101ec77befc995ab15fad82d9d91d16	block drbd fix drbd_req_new initialization mempool_alloc does not support __gfp_zero since elements may come from memory that has already been released by mempool_free remove __gfp_zero from mempool_alloc in drbd_req_new and properly initialize it to __number__
dcc357e63727b63995dd869f015a748c9235eb42	drop allocation flag masks not needed any more
94d933745928ad6d8c40da89b4d0ccb2511578fc	ppc4xx_edac convert driver to use the new edac abi the legacy edac abi is going to be removed port the driver to use and benefit from the new api functionality
02e6ef9fba3ed85e31b13cbd6bb2185412b44c9e	alsa firewire-lib process_rx_data_blocks can be static
3f4c4bdd9d4d069e3d5e6154bfdd809f7923a90b	ath9k dump modal eeprom header debugfs file location
ca95ff3a9f9edea919a53a297a4cba178b6cdf5f	iwlwifi mvm fix extended dwell time fw adds __number__ msec for every dwell time in low band so we need to set __number__ msec less dont use extended dwell time when fragmented scan is needed because fw adds __number__ msec per probe and it can easily exceed max out of channel time
6f0b826da4a33e83501d6c1dc977afa0f5f7166f	use memdup_user rather than duplicating its implementation reuse existing functionality from memdup_user instead of keeping duplicate source code this issue was detected by using the coccinelle software return directly if this copy operation failed
e8dffe6c2004278c588b3bb441a3dbe998a3f2e4	asoc rsnd fix possible null pointer dereference asoc rsnd enable clock-frequency for both supports both clock-frequency settings for adg which will be used for audio_olkoutn but some board doesnt need it thus it is not mandatory but above patch didnt care about the case of clock-frequency dt property was not present this patch ignores adg settings if audio_olkoutn was not used kuninori tidyup not to break non audio_olkoutn case
6a52325f61760c6a7d7f3ea9736029bc9f63e7f3	rbd rearrange rbd_header_from_disk this just moves code around for the most part it was pulled out as a separate patch to avoid cluttering up some upcoming patches which are more substantive the point is basically to group everything related to initializing the snapshot context together the only functional change is that rbd_header_from_disk now ensures the in-core header it is passed is zero-filled this allows a simpler error handling path in rbd_header_from_disk
81cc2e434a9e8514bfad030683f7464c26306e35	nfp add support for ethtool report number of rings via ethtool api
faec7c9779e4c6d8614adf6626726ced67658442	staging rtl8192u delete unnecesary braces in delete unnecesary braces and fix coding style these lines when it is necessary in fix errors warning braces are not necessary for single statement blocks
888ffc5923e4343a78575918ab781e85fa22d244	coredump at the end shouldnt bypass core_uses_pid logic goto end should not bypass the backward compatibility with core_uses_pid code move this label up while at it it is ugly to copy into and then inc the pointer for argv_split change format_corename to increment pat_ptr instead remove the dead if __number__ in format_corename we already checked it is not zero
5c1ff33640293499f9b16450029c9fb4dc06543e	ext4 fix free space estimate in ext4_nonda_switch values stored in s_freeclusters_counter and s_dirtyclusters_counter are both in cluster units remove the cluster to block conversion applied to s_freeclusters_counter causing an inflated estimate of free space because s_dirtyclusters_counter is not similarly converted rename free_blocks and dirty_blocks to better reflect the units these variables contain to avoid future confusion this fix corrects enospc failures for xfstests __number__ and __number__ on bigalloc file systems
e9fff7767e36d1ad993f9b4c0a2b5fc173268585	iwlwifi mvm bt coex remove duplicate code in rate control the code limiting the ampdu length due to bt traffic was duplicated remove the redundant code
1daef6d27b558d0bde72302ba7062b746887a643	leds use kcalloc instead of kzalloc to allocate array the advantage of kcalloc is that will prevent integer overflows which could result from the multiplication of number of elements and size and it is also a bit nicer to read the semantic patch that makes this change is available in
2610ab7767bba916f65094d71cfed3b8281cba08	asoc refactor some conditions and loop in soc_bind_dai_link transform some loops from for_eachx if fx work_onx to new structure for_eachx if continue work_onx this will allow future modification of fx with less impact to the code
4bd3fd443aa4bc3cede05de201e9cf3277059477	drop struct_mutex from cursor paths the kms state itself is already protected by the modeset locks acquired by the drm core the only thing left is gem bo state and since the cursor code expects small objects which are statically mapped at create time and then invariant over the lifetime of the gem bo theres nothing to protect see armada_gem_dumb_create armada_gem_linear_back which assigns which is the only thing used by the cursor code only tricky bit is to switch to the _unlocked unreference function
8a4725306522c875fca4bff4bd14a46e97690f48	qede dont check netdevice for rx-hash receive-hashing is a fixed feature so theres no need to check during the ingress datapath whether its set or not
ec9d6dcefc767f6ea79ab7d676be8a88e8a94ee4	staging ks7010 use tabs for indentation fix all occurences of checkpatch error code indent should use tabs where possible errors in
ac1a1de31515d950f858ba47d2bba74ff9a2614d	net netrom when adding a route verify length of mnemonic string struct nr_route_structs mnemonic permits a string of up to __number__ bytes to be used if userland passes a not zero terminated string to the kernel adding a node to the routing table might result in the kernel attempting to read copy a too long string mnemonic is part of the routing protocol routing table updates only broadcast __number__ bytes the byte in the mnemonic array exists only as a termination character for the kernel codes convenience fixed by rejecting mnemonic strings that have no terminating in the first __number__ characters do this test only netrom_node to avoid breaking netrom_neigh where userland might passing an uninitialized mnemonic field initial patch by dan carpenter
7acec26cec5aa75e0dc54da1fb0b1f8acf575273	cfg80211 wext does not need to set monitor channel in managed mode there is not a valid reason to attempt setting the monitor channel while in managed mode since this code path only deals with this mode remove the code block johannes ill note that the comment indicated it was for backward compatibility but the code wasnt functional since switching the monitor channel isnt supported any when in managed mode as that mode owns the channel configuration additionally since monitor cant be done on a managed mode interface this would only have had any effect to start with if a separate monitor interface is present in which case its better to change the channel through that anyway if even possible
51c5d8d1499b8442e863fe756f76e7f4ea7476fb	mmc at91_mci remove the use of irq_to_gpio remove the use of irq_to_gpio in the card detection interrupt handler the information is available in the board structure and we can avoid using a function that has little meaning
043c4789726e6abb5be6115cb054af4926481952	fix error return code the function sh_eth_drv_probe return __number__ for success and negative value for most of its internal tests failures there is one exception that is error case going to for this error case the function abort its success execution path but returns non negative value making it difficult for a caller function to notice the error this patch fixes the error case that do not return negative value this was found by coccinelle but the code change was made by hand this patch is not robot generated a simplified version of the semantic match that finds this problem is as follows return ret __number__ when ret e1 when when ret e2 when forall return ret
d0db7afa1b767d95e3e14632718da5a9794129bc	revert mm memcontrol fix possible css ref leak on oom revert commit mm memcontrol fix possible css ref leak on oom johannes points out there is a task_in_memcg_oom check before calling mem_cgroup_oom
532c5f69e223ec846511fa4a14fa1fc8bca142a2	et131x use pci express capability accessors use pci express capability access functions to simplify et131x driver
7ef71b70e18a82bb363905f72672317d0e1e8810	bus omap-ocp2scp fix module alias remove extra space between platform prefix and driver name in module_alias
8aaf2717d9e8328b1ee04c9bdb68091a0a7c5fdc	staging comedi me4000 remove subdevice pointer math convert the comedi_subdevice access from pointer math to array access
fbb57f6d35f510e13d4f7e0af67ee232146c20da	staging r8188eu fix smatch warning in smatch shows the following warning rtw_set_ie info ignoring unreachable code the cause is a module exit tracing statement after a return
9d4b68b23947e7bdf3f2707e76bd61572c523f6c	bluetooth fix handling of getsockname for hci sockets the hci_dev check is not protected and so move it into the socket lock in addition return the hci channel identifier instead of always __number__ channel
a7363de71acf92b8f955a42da7326146c66b4841	remove redundant const from function return type marking function return types as const is redundant as these are rvalues and as such constant by definition code checkers and gcc will warn about this so remove the modifier
c4d8199ba1a7aa390b06db23f4532e2c1875aefb	usb renesas_usbhs protect by spin lock this patch protects the and by spin lock in the usbhs_status_get_each_irq because other functions will write them during spin lock otherwise the driver will clears the brdysts bempsts wrongly and then the transaction will not finish also since the driver should use the intsts0 and brdysts and bempsts as the same timing the patch protects them
6a3ae8412f9e9cee0e8647954f4f7f2c50664ca2	usb keyspan pull in one indent level we can remove the if check because checking for while i is sufficient this lets us pull the code in one indent level
2f733cad3699c6fd1cc3350ab43c9f684b976e73	leds lp5523 remove unnecessary writing commands this patch reduces the number of programming commands count of sending commands old code __number__ program size __number__ counts for clearing program memory new code __number__ pattern buffer is initialized to __number__ in this function just update new program data and remaining buffers are filled with __number__ so its needless to clear whole area
88a7fcf961a27fbd248e3c914fc9df8327f7cdbb	perf annotate do not ignore call instruction with indirect target do not ignore call instruction with indirect target when its already identified as a call this is an extension of commit e8ea1561952b perf annotate use raw form for register indirect call instructions to generalize annotation for all instructions with indirect calls this is needed for certain powerpc call instructions that use address in a register such as bctrl btarl apart from that when kcore is used to disassemble function all call instructions were ignored this patch will fix it as a side effect by not ignoring them for example before with kcore mov callq __address__ jmpq __number__ mov after with kcore mov callq __address__ jmpq __number__ mov suggested about bctrl instruction link
e59576d4beaf232d1048bac391393c94b1b00745	iio adc ad7923 use apis apis are device managed and make code simpler
62aa292b3eae920a80c2fd0ed0601a70328627f6	hsi omap_ssi_port avoid pm_runtime_get_sync in ssi_start_dma and ssi_start_pio these functions may be called from atomic context so avoid synchronous runtime pm calls
ad3ab1bba9bf3fcd13a4e3f868a438013174dcc1	asoc imx-ssi use devm functions using devm_ functions can make the code simpler and smaller
a7aabcc8a5f5e7834abb538ad97db04d29968fbe	use array_size to calculate array size it is preferred to use array_size for size calculation instead using it makes the code more readable
170ed807340b4db0a5e010c2e4da43cf5a2c9a29	release during turning usb ports acpi power resource and checking the existence of ports power resource when setting usb ports acpi power resource there will be some xhci hub requests this will cause dead lock since has been held before setting acpi power resource in the xhci_hub_control the usb_acpi_power_manageable function might fall into sleep so release before invoking it
d298caae9a920e1745599ddd4a19073d9a033df0	asoc dapm fix connected widget capture path query make sure we check the correct path for capture
5a144be39c3a32b3072529ccee79e4ec9eb9b275	hid sony use ds3 mac address as unique identifier on usb the ds3 mac address is reported as a unique identified when using bluetooth for usb there is no unique identifier reported yet so use the mac address
cc93473525099f6e4c291d0f2383545cc92e50d0	omap rx51 remove unused old omapfb stuff rx51 uses the new dss2 display driver but the board file still contained some code for the old omapfb driver the old code can be removed
e684fa34c3a28b4893d43629a02a765a2a71e63e	i40e only warn once of ptp nonsupport in speed only warn once that ptp is not supported when linked at yes using a static this way means that this once-only message is not port specific but once only for the life of the driver regardless of the number of ports that should be plenty change-id ie6476530056df408452e195ef06afd4f57caa4b2
b9ce54c9f59894e787e3067d2f758c297fcd6fd0	audit fix decimal constant description use proper decimal type for comparison with u32 compilation warning was introduced by audit make testing for a valid loginuid explicit in function audit_data_to_entry warning this decimal constant is unsigned only in iso c90 enabled by default if audit_loginuid __number__
2f5effcbd097a37690c86b80a3c242dd8338d59c	iio pressure-core st expand and rename lps331aps channel descriptor due to the macro used the task of reading understanding and maintaining the lps331aps channel descriptor is substantially difficult this patch is based on the view that its better to have easy to read maintainable code than to save a few lines here and there for that reason were expanding the array so initialisation is completed in full
8853780ec1e37bb91a1ccef9c05e412cb1cfd9e0	media ascot2e dont use variable length arrays the linux stack is short we need to be able to count the number of bytes used at stack on each function so we dont like to use variable-length arrays as complained by smatch warning variable length array is used the max usecase of the driver seems to be __number__ bytes __number__ for the register so lets be safe and allocate __number__ bytes for the write buffer this should be enough to cover all cases if not lets print an error message
109bf06e2a88a04607c93d8223e4be0af09ebc8c	staging comedi comedi_buf absorb comedi_read_array_from_buffer this function is only called by comedi_buf_read_samples absorb it
b92af2b8844c964fc7e1905f797a8d780c7212de	asoc s6105-ipcam convert to table based dapm setup use table based setup to register the dapm widgets and routes this on one hand makes the code a bit shorter and cleaner and on the other hand the board level dapm elements get registered in the cards dapm context rather than in the codecs dapm context while we are at it also remove the snd_soc_dapm_enable_pin in the init callback since pins are enabled by default also drop the snd_soc_dapm_sync calls since they are ignored by the core anyway until the card has been fully instantiated
0b77f766f3ef9875e2bb0035c9b89b4f9469b78d	hwmon k10temp remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
f91d2f4337cdf8009da21cb93173099caf7981d4	usb gadget storage fix sparse warning fsg_common_set_inquiry_string expects pointers as second and third argument lets fix that by passing null instead of plain __number__ just so we silence sparses warning using plain integer as null pointer warning using plain integer as null pointer
fcdd57c8902a936a616df2066d873b38ef3ed364	ubifs fix remount error path dans smatch checker found out that there was a bug in the error path of the ubifs_remount_rw function instead of jumping to the out label which cleans-things up we just returned this patch fixes the problem
3ce41ea1478e9dcc3a0e47189c443ba3c7670b70	scsi bnx2fc replace scsi_dma_map with dma_map_sg scsi_dma_map doesnt work for npiv since vport dev isnt fully initialized for more details and commit c59fd9ebc46da8d48b76955d4d48e3597f8c8726
460eac3fee0e9acf27ed11a2acccdbd754213a23	media media i2c ths7303 drop module param debug this patch drops module param debug as it was never used
a5c96b518c373fba35a8dc2e4e5fead24aeefb1c	caif-hsi changed test on aggregation_timeout aggregation_timeout is an unsigned long a test for less than zero can never become true compare with zero instead
f7d3c970f43a599c7545bfa821761cdb1bef8e23	dont debug log missing sequences this is not interesting they are not missing they are just not part of the vbt sequences for the panel
e835ebc816047f85d1fd834a2a1d5305684a43f2	rtc rtc-at32ap700x use module_platform_driver_probe use module_platform_driver_probe macro which makes the code smaller and simpler
e1ea97fef0cd579fd7ef3851548e068eaf2ad9f0	remove unnecessary null test this patch removes the null test on lun_cg lun_cg is initialized at the beginning of the function to since lun_cg is dereferenced prior to the null test it must be a valid pointer the following coccinelle script is used for detecting the change expression identifier statement e null s1 else s2
68d4cb809ef84f9a0ea6a23c4c0dc0ae48355f78	watchdog imx2_wdt use preferred bit macro instead of open coded values this is a nonfunctional change declare register bit values with bit helper macro the issues are reported by checkpatch check prefer using the bit macro file imx2_wdt_wcr_wda __number__ __number__ external reset wdog_b etc
039ec0b8dc71912fa707242a338b5c0dbfe0104a	arm ux500 remove incorrect db9540 prcmu tcdm base location the tightly coupled data memory for the db9540 is actually in the same place as the db8500s this definition is just plain wrong
183f37fa3503332740c76f1b493f4304ec889358	btrfs do not log extents when we only log new names when we log new names we need to log just enough to recreate the inode during log replay and there is no need to log extents along with it this actually fixes a bug revealed by xfstests __number__ where it shows that were logging some extents that have not updated metadata so we dont get proper extent_data items to be copied to log tree
68ce7bfcd995a8a393b1b14fa67dbc16fa3dc784	fs clean up the flags definition in add an explanation for the flags used by fs_ioc_gsetflags and remind people that changes should be revised by linux-fsdevel and linux-api add flags that are used on-disk for ext4 and remove fs_directio_fl since it was used only by gfs2 and support was removed in __number__ in commit c9f6a6bbc28 the ability to mark files for direct access when opened normally is both unused and pointless so this patch removes support for that feature now we have _two_ remaining flags left but since we want to discourage people from assigning new flags thats ok
dffa91230f5202a78ccc97960ae1c84e533b036a	at91 fix warnings in function at91_pinctrl_probe_dt warning assignment discards qualifiers from pointer target type in function at91_gpio_probe warning assignment discards qualifiers from pointer target type
9b4a6364a6b3176511956ad186f8dffbe2e60c3e	revert sh_eth enable rx descriptor word __number__ shift for r8a7790 this reverts commit fd9af07c3404ac9ecbd0d859563360f51ce1ffde the hardware manual states that the frame error and multicast bits are copied to bits of rd0 not bits ive tested that this is true for rfs1 crc error rfs3 frame too short rfs4 frame too long and rfs8 multicast also adjust a comment to agree with this
0d8505045e99d986007e8b4cc6c8836633e96cf3	dmaengine mxs constify platform_device_id the platform_device_id is not modified by the driver and core uses it as const
3a382772b51bbf55b23701746102bd75b9fe883f	bluetooth use devm_kzalloc in file devm_kzalloc eliminates the need to free memory explicitly thereby saving some cleanup code
d2e88e7c081efb2c5a9e1adb2a065d373167af4b	fix log2size setting for stream tables should be set to log2entries where entries is the number of entries in the stream table not just the first level this patch fixes the register setting which was previously being set to the size of the l1 thanks to a multi-use size variable
741bf0c7be835d7fdecac5d942e88b5d43958f40	platform x86 chromeos_laptop add i915 gmbuses to adapter names add the two other i2c buses vga and panel from i915 chromebook pixel has input and light sensor devices on these busses
c48ed51c0d101ec4351530bdd6e1a01808f0a441	irqchip gicv3 its irqchip implementation the usual methods that are used to present an irqchip to the rest of the kernel link
496cda8e75d90301cb1e6bbebea643c6bac1e6d6	ata remove the second argument of kunmap_atomic
92d71bc6951364c20f7d8c70a83cd93a68a63ea7	kvm nvmx remove unnecessary double caching of maxphyaddr after speed-up of cpuid_maxphyaddr it can be called frequently instead of heavyweight enumeration of cpuid entries it returns a cached pre-computed value it is also inlined now so caching its result became unnecessary and can be removed message-id gnote
7d4914db8fda6d38d92b1b8a740bafbd6c6d89a1	xtensa fix prefetch in the raw_copy_to_user from is the input buffer it should be prefetched with prefetch not prefetchw
fbde1414acc0440024083bf0c391b259bcfc4826	libnvdimm btt clean up internal interfaces consolidate the parameters passed to arena_is_valid into just nd_btt and an info block to increase re-usability similarly btt_arena_write_layout doesnt need to be passed a uuid as it can be obtained from
17e1a42f2e377ec5809af79eb651d9ed5958fb97	tg3 missing break statement in tg3_get_5720_nvram_info there is a missing break statement so flash_5762_eeprom_hd gets treated like flash_5762_eeprom_ld
df62b1e663904e257fd5b174a9b29e6be6d0e902	cpc925_edac convert driver to use the new edac abi the legacy edac abi is going to be removed port the driver to use and benefit from the new api functionality
a31887dc9be1a65cde2562ed10e7fbf5c82581a2	hwmon jc42 add support for microchip mcp9808 temperature sensor mcp9808 is not officially compliant to jc-42 similar to mcp9804 but its registers are compatible to jc-42
4d47dfb8ef95bd13663fe8e93ab6e5d63cc1bb4b	disable avi infoframe emission when writing infoframes we also do a disable later when we write a specific infoframe but here we do it to prevent sending a stale one before updating the infoframes
442ca4d656645505346017c37ac137cde680bf38	selinux return directly after a failed kzalloc in common_read return directly after a call of the function kzalloc failed at the beginning
32c2b4bda62839c527b47bc843aebcdd535c9519	avoid incrementing hangcheck whilst waiting for external fence if we are waiting upon an external fence from the pov of hangcheck the engine is stuck on the last submitted seqno currently we give a small increment to the hangcheck score in order to catch a stuck waiter driver now that we both have an independent wait hangcheck and may be stuck waiting on an external fence resetting the gpu has little effect on that external fence as we cannot advance by resetting skip incrementing the hangcheck score
0b176ce3a7cbfa92eceddf3896f1a504877d974a	use barrier to set task state without a memory and compiler barrier the task state change can migrate relative to the condition testing in a blocking loop however the task state change must be visible across all cpus prior to testing those conditions failing to do this can result in the familiar lost wakeup and this task will hang until killed
4ee14ec65810702a95d195757d307c41ecfd1c71	mmc sdhci move away from using deprecated apis suspend and resume of cards are being handled from the protocol layer and consequently the apis are deprecated this means we can simplify the callbacks by removing the use of the deprecated apis
d80603c9d876efafd8b07469c891076de470e323	x86 efi properly pre-initialize table pointers consumers of the table pointers in struct efi check for efi_invalid_table_addr to determine validity hence these pointers should all be pre-initialized to this value rather than zero noticed by the discrepancy between efivars systab sysfs entry showing all tables and their pointers despite the code intending to only display the valid ones no other bad effects known but having the various table parsing routines bogusly access physical address zero is certainly not very desirable even though theyre unlikely to find anything useful there link __number__
b3246020e27ecc7c50cc77535936987d6eb6c869	batman-adv move deinitialization of soft-interface to destructor the deinitialization of the soft-interface created in should be done in the destructor and not directly before calling unregister_netdevice
1a4fd58f76cf331c93daaa1667daa25db297d0d4	sh-pfc make gpio support optional when implemented as a separate ip block gpios should be handled by a separate driver to make this possible gpio support needs to be optional in the sh-pfc driver if no gpio data registers are supplied in the soc information structure skip registration of the gpiochip
3f4202652ea742a79294bd7b8a945ff96696b966	iio si7005 add support for hoperf th02 this patch adds support for hoperf th02 humidity and temperature sensor as it uses same register definitions as si7005 th02 datasheet
9eac685dbc3fe955c4896605cd16e24612494576	removed assignment in if statement the following coccinelle script found the match expression e0 e1 e2 statement s0 if e1 e2 e0 e1 e2 if e1 e0 s0
75432fd2913e03696f56289a853754ef0124545f	bfin_mac use an unique mdio bus name
3339a5b165c2769a84346cac342ade67d7b7a510	media it913x-fe ver __float__ correct snr reading from frontend correction of reading from frontend and represents a snr nonlinear scale of minimum signal to full signal
765dd3bb44711b4ba36c1e06f9c4b7bfe73ffef7	rxrpc dont multiply with hz twice rxrpc_resend_timeout has an initial value of __number__ hz use it as-is
91c6a05f72a996bee5133e76374ab3ad7d3b9b72	mm faster kmalloc_array kcalloc when both arguments to kmalloc_array or kcalloc are known at compile time then their product is known at compile time but search for kmalloc cache happens at runtime not at compile time link
81c3a77207450cb4187e8af700797e7d3209a568	greybus uart properly interpret receive data size in gb_uart_request_recv the receive data size is in little-endian format do the proper byte swapping of that value before using it found by make check
751869e6ef489e33c66a254fa004c92e76ef1a43	media staging easycap initialize ntsc parameter before usage this parameter is now initialized at init_easycap this way we assure it wont be used uninitialized
f16189aca0e2c6395e7fd6593c3a3063764c628d	remove redundant checks i2c_smbus_write_byte_data returns negative errno on failure or __number__ on success return the value obtained from it directly
d42537bc479c9a0fdafc12c69b7f38a7a0379beb	iwlwifi remove unused tlv capability flags the driver doesnt support the firmwares that dont have these capabilities the code that actually used these flags has been removed already but the flags were left for an unclear reason remove them
fa943bed68c85e1ebac4b9dd6398ad6fd0f53567	arm vic respect list of valid sources the current irq domain implementation in the vic allocates __number__ interrupts for each vic instance no matter whether the controller actually use all the irqs or not alter this so we only allocate a domain up until the last irq marked valid
ef0cc7fef4721aa19663da7475c8b862f0a35e0b	ahci qoriq adjust the default register values on ls1043a updated the registers values to enhance sata performance and reliability
d80be7c75136fb58ed7264ac8a49dd917ace77a1	mm mempolicy remove unneeded functions for uma configs mempolicies only exist for config_numa configurations therefore a certain class of functions are unneeded in configurations where config_numa is disabled such as functions that duplicate existing mempolicies lookup existing policies set certain mempolicy traits or test mempolicies for certain attributes remove the unneeded functions so that any future callers get a compile- time error and protect their code with config_numa as required
7b17c2f7292ba1f3f98dae3f7077f9e569653276	dm fix a race condition related to stopping and starting queues ensure that all ongoing dm_mq_queue_rq and dm_mq_requeue_request calls have stopped before setting the queue stopped flag this allows to remove the queue stopped test from dm_mq_queue_rq and dm_mq_requeue_request this patch fixes a race condition because dm_mq_queue_rq is called without holding the queue lock and hence blk_mq_s_stopped can be set at any time while dm_mq_queue_rq is in progress this patch prevents that the following hang occurs sporadically when using dm-mq info task blocked for more than __number__ seconds call trace __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__
013514946cbd85dea2a12e8848f2cfb775eecd52	staging dgnc braces should be used on all arms of this statement fix checlpatch warning heck braces should be used on all arms of this statement
9383be420460908df0118d54894ef65317821f3a	ath9k use a subroutine to check for short scan
a97ac35b5d9e948ccfcbc04c69e9d2c94e788e94	powercap rapl add new cpu ids add support for broadwell model and haswell model
6c5a53c67057bddf7f8e26c93a8e045215f61539	replace simple_strtoull by kstrtoull dont overwrite kstrtoulls errno
a3d08fa56b2b867460e58ecdb649b49804aaa5fd	extract common code in vi_common_early_init change-id i9ed25353c559e27bc1b1d5b50f977b0ff03de87f
c16134976fb27d325ae037a8b39b537a77ba1d12	input tca8418 fix loading this driver as a module from a device tree loading the tca8418 driver as a module on a device tree based system needs a module_alias because the driver name does not match the automatic name generation rules of a compatible entry on i2c bus
11f1a7768cb9179b1f1ce6b8027df7531e0704e7	check for null pointer in dmar_acpi_dev_scope_init when ir_dev_scope_init is called via a rootfs initcall it will check for irq_remapping_enabled before it calls indirectly into dmar_acpi_dev_scope_init which uses the dmar_tbl pointer without any checks the amd iommu driver also sets the irq_remapping_enabled flag which causes the dmar_acpi_dev_scope_init function to be called on systems with amd iommu hardware too causing a boot-time kernel crash
c688d6211f57e1f6f8aaae5522a9223247febbd6	usb move assignment out of if block we should not be doing assignments within an if block so fix up the code to not do this change was created using coccinelle
46277b75da1b6c57159496d536acc2e9352a7ee0	adapt iommu driver to pci register name changes the symbolic register names for pci and pasid changed in pci code this patch adapts the amd iommu driver to these changes
22581f58ed3f0c9eb066d67b696b66f951df5c2b	raid5-cache clean up r5l_get_meta remove the only partially used local io variable to simplify the code flow
2426f3a5945ce1dfdb04aaf26748a987be49ff7c	bluetooth add convenience function for fetching irks there are many situations where we need to check if an le address is an rpa and if so try to look up the irk for it to simplify such cases this patch adds a convenience function for the job
d4dee48badbb7ccd740087321518abcc870eda65	namei dont bother with if is set with new calling conventions its trivial conflicts
f5a7856ec94ce0c1aeeac841d3fa05853f5f53fb	staging serqt_usb2 add blank line after declaration use a more common kernel coding style
49d6f67245c11a18d0454b2101fa224133f59323	convert pci_table entries to pci_device if pci_any_id is used this patch converts pci_table entries to use the pci_device macro if and are set to pci_any_id and thus improves readablity since the driver_data field isnt used anywhere we can also drop the assignments for class class_mask and driver_data
f0b99ca041258ed0eb27dc724de22d84dab78a7c	asoc da732x cleanup manual bias level transitions since the asoc core now takes care of setting the bias level to snd_soc_bias_off when removing the codec there is no need to do it manually anymore either the manual transition to snd_soc_bias_standby at the end of codec probe can also be removed as the core will automatically do this after the codec has been probed
307d2a5156eb5778fbc1fc29b0e31d34de9efcfc	mtd fsmc_nand use module_platform_driver_probe this patch uses module_platform_driver_probe macro which makes the code smaller and simpler
a207a4b2e8067cbc7f33924e7f2c0fa4ef43b459	ipv4 fix bugs in fib_compute_spec_dst based upon feedback from julian anastasov __number__ use route flags to determine not the packet flags __number__ leave saddr unspecified in flow key __number__ adjust how we invoke inet_select_addr pass as second arg and if it was zeronet use link scope __number__ use loopback as input interface in flow key
c19d57980b38a5bb613a898937a1cf85f422fb9b	recognise replacements when assembling arrays if a replacement is seen file it as such if we see two replacements or two normal devices for the one slot abort
27913fa08cf56df2c925e2dad7827be87d7644c1	staging comedi amplc_pc236_common use comedi_buf_write_samples use comedi_buf_write_samples to add the sample to the async buffer the async events comedi_cb_block and comedi_cb_eos will be detected and set by the core remove the unnecessary events in the driver
ec76d62999b73f818f7d777ce037157bd2d4af02	restrict buffer tracking to the psr pipe the current code tracks business across all pipes but were only really interested in the one pipe drrs is enabled on fairly tiny optimization but something i noticed while reading the code but it might matter a bit when showing a video or something only on the external screen while the panel is kept static also regroup the code slightly first compute new bitmasks then take appropriate actions
a9ecfbe7fcf2f600718c3f995cbb46043f7a7a5d	netfilter nf_tables remove unused struct members
2e536084f24f99f0a2cc0b6ce38ad8298ea58b22	use kernel fence interface when possible
23ade398c7c2809d031fe1d83ada11b3c08d73b4	reset uniphier add nand and emmc reset control add reset lines for the denali nand controller on all uniphier socs for the cadence emmc controller on socs
b1a14c6e40413f833dadc1d23b43c530f4b8e381	refactor stepping info retrieval have only one if ladder for platforms and only one range check for size makes it easier to handle new platforms remove the use of negative return values in char which might underflow to be positive for some negative error codes
146180c052a00172f4dc08eaade836fd02f61fb5	fix a couple integer overflow tests the div_round_upsize page_size operation can overflow if size is more than ullong_max page_size link
42a88e97bcdaf596ccd4017a4e064add0cf623db	fix dsi sideband register accessing so far we used the wrong opcodes to access the dsi registers so the register writes during dsi programming didnt actually succeed and left the registers unchanged this wasnt a problem for the initial modeset where the bios-programmed values happened to work but after resuming from s0ix these registers are reset and failing to program them results in a blank screen
1a20a63084be8fc5b0c1191231dfd311f7fc2afa	ext4 make ext4_shutdown static make the ext4_shutdown function static as suggested by running sparse make this was the only such warning in
649142074d86afebe0505431a93957505d244dd6	drivers hv vss introduce timeout for communication with userspace in contrast with kvp there is no timeout when communicating with userspace vss daemon in case it gets stuck performing operation no message will be sent to the host so it will take very long around __number__ minutes before backup fails introduce __number__ second timeout using schedule_delayed_work
9da44db1493a9d384ddc1bcd1553a1803ff985b6	perf hists add __hist_entry__snprintf function add __hist_entry__snprintf to take a perf_hpp_list as an argument instead of using this way we can display arbitrary list of entries regardless of the hists setup which will be useful in the upcoming c2c patch series link
b53b34f042fe17df21a431abc76896a72dbc5670	spi davinci use of_match_ptr at appropriate place its pointless to use of_match_ptr within config_of guard use of_match_ptr around davinci_spi_of_match when setting
8e9a8b1212da7a68eb57beec6e16f80ff4f27e6f	media v4l2-mc fix hardware version for pci devices it should be a bitwise or and not a logical one also add parenthesis to make sure it will be applied in the right order
691ca86a3a15a9c5054edb3c517a1aeb40e9fadc	simplify vce_v3_0_hw_init and ensure both rings default to not ready simplified the ring test and added logic to ensure rings are marked not ready by default
31133da702e4229acbd813350660f3053daa57c6	rtl8xxxu remove unneeded hack this removes an unneeded hack for and allows for initializing reg_fpga0_xab_rf_sw_ctrl at the same point as it is done for all other parts
308d9800b2c4f1fb344dbf055912d3140438bac0	btrfs cache extent states in defrag code path when locking file ranges in the inodes io_tree cache the first extent state that belongs to the target range so that when unlocking the range we dont need to search in the io_tree again reducing cpu time and making and therefore holding the io_trees lock for a shorter period
933ff9f20220e1339964c7a76a34ca9aaa4a8c37	tracing fix traceoff_on_warning handling on boot command line according to the documentation adding traceoff_on_warning to the boot command line should be enough to enable the feature but right now it is necessary to specify along with fixing that also verify if the value passed if any is either __number__ or off link
f43a033d44c3f2f6b153c9c63fff0132f4314f24	update cifs version number more than __number__ fixes since we last bumped the version number of update to version __float__ so it is easier in modinfo to tell that fixes are in
9502272163ace71d77d809937216fd669c02364b	alsa ppc use snd_ctl_enum_info and reduce the open codes also add missing const to the text array
16b7c275c055cc36218404b5d147be7f76575087	tools cpupower fix return checks for sysfs_get_idlestate_count red hat and fedora use a bug reporting tool that gathers data about broken systems called sosreport among other things it includes the output of cpupower idle-info executing cpupower idle-info on a system that has cpuidle disabled via results in a __number__ second hang in the cpupower application ie cpupower idle-info could not determine cpuidle driver analyzing cpu __number__ number of idle states hang the problem is that the cpupower code only checks for a zero return from sysfs_get_idlestate_count the function can return as above this patch fixes callers to sysfs_get_idlestate_count to check the right return values
94d5d6a0fbf33c5fde246b61b8c358cfeeba633f	clk rockchip add an id for rk3288 crypto clk add an id for crypto clk to the binding header so that it can be called in other part
3605d751d5dd82ad1586bed72a0ebc84d81e20c7	ath6kl fix busreqs so they can be reused when sg is cleaned up to reuse the busreqs in case of hardware restart they must be properly reinitialized if the scat_req pointer isnt reset to __number__ __ath6kl_sdio_write_async will assume there is sg work to be done causing a kernel oops
1c1a7b75bf6f705d9f9440dea0e6d682882e3284	hwmon stts751 add of device id table the driver doesnt have a struct of_device_id table but supported devices are registered via device trees this is working on the assumption that a i2c device registered via of will always match a legacy i2c device id and that the modalias reported will always be of the form but this could change in the future so the correct approach is to have an of device id table if the devices are registered via of
4f0110ced1b5d61e6df4871f6f800a9d3678bf26	alsa hda merge hdmi simple init functions just a minor code cleanup to use the same function for both amd and via
49e190ec332e96ba28f24b86f7a92f614707819b	ptp fix warnings warning ptr_err_or_zero can be used use ptr_err_or_zero rather than ptr_err generated by
c06b4f1947213cd0902610fafcabac02d49ad728	watchdog use local_clock for get_timestamp the get_timestamp function is always called with current cpu thus using local_clock would be more appropriate and it makes the code shorter and cleaner imho link
d52aec97e5bc40b84fbe348f9d0ab56a6f3face4	qeth enable in layer __number__ mode the patch enables netif_f_sg flag for osa in layer __number__ mode it also adds performance accounting for fragmented sends adds a conditional skb_linearize attempt if the skb had too many fragments for qdio sbal and fills attributes
5c86ac695c7e2402f60e30ad8174ceb66ef22a91	asoc atmel-ssc use module_platform_driver macro this patch removes some code duplication by using module_platform_driver
297d73023ac559ea0cb4f1638fc8563b8c763c1e	scsi hisi_sas downgrade internal abort exit print downgrade the exit print in hisi_sas_internal_task_abort to dbg level as info is not required
0113e34bec17578516eaa457b4a0ea255b0c1276	net ftgmac100 use kfree_skb where appropriate in order to get correct drop monitor notifications for dropped packets we should call kfree_skb instead of dev_kfree_skb
c7c5856b6f6f30de622bf87947363890b286553f	sound oss use setup_timer and mod_timer the function setup_timer combines the initialization of a timer with the initialization of the timers function and data fields the mulitiline code for timer initialization is now replaced with function setup_timer also quoting the mod_timer function comment mod_timer is a more efficient way to update the expire field of an active timer if the timer is inactive it will be activated use setup_timer and mod_timer to setup and arm a timer making the code compact and aid readablity
ecdfeee25f7e9779dc3eed608e54271e6ed17000	acenic include net_skb_pad headroom to incoming skbs some workloads need some headroom net_skb_pad to avoid expensive reallocations
c55b1de02d68e4343045391c0f4978c0bc5a9447	replace kmalloc by kzalloc
d0a76bbfe920e056e761bfcb77f3b95bd3bce98f	staging iio iio_dummy_evgen handle_simple_irq build fix handle_simple_irq has dropped the first parameter so fix it up in the driver to prevent the build from breaking
f9bb705e65f64710971e50624db5ef1857d9db39	update bits per component for display info displayport branch device may define max supported bits per component update display info based on this value if bpc is defined v2 cleanup to match the patches introduced earlier in this series v3 fill bpc for connectors display info in separate drm_dp_helper function daniel v4 remove updating bpc for display info as it may be overridden when parsing edid instead check bpc for dp branch device during compute_config v5 indentation fixes jim bride link
c254c9ec14d5c418c8f36ea7573edae2470a1dc1	jbd2 remove always true condition in __journal_try_to_free_buffer the check b_jlist bj_none in __journal_try_to_free_buffer is always true __jbd2_journal_temp_unlink_buffer also checks this in an assertion so just remove it
2bd5e4375aec8731c9818b2ac86ac035d3aebe86	media tvp5150 put endpoint node on error if the parallel mbus configuration is not correct the endpoint device node isnt currently put again in the error path fix it
e41f26e7d18951086611bc78cc35e244bd01d1ca	enable use of per-client gpu address space
96af5c6a8266003a2212d9d0b383603f1af9b109	asoc fsl fix build warning in fsl_dma the previous patch to fix initialization of dma buffers left behind an unused local variable that causes a build warning
3174b3b58cba69e5a5b806206cd37f7a8e05153e	net-next ethernet mediatek add device_node of gmac pointing into the netdev instance the patch adds the setup of the corresponding device node of gmac into the netdev instance which could allow other modules such as dsa to find the instance through the node in dt-bindings using of_find_net_device_by_node call
c6fd0fe85ab761829102b60d590d0fdd71a649bd	arm exynos use four additional chipid bits to identify exynos family use bits to identify the exynos family while setting up the serial port during the uncompression setup this uses four additional bits of chipid to identify the exynos family since this is required for identifying exynos5420 soc
7daed8dc2a4b48c5a7ea5b3243d01837ec1aed0a	r8152 fix wakeup settings avoid the driver to enable wol if the device doesnt support it
0516900adfa1955f91f1c310f9a2fa857949de1c	ahci clear to prevent unexpectly asserting intx due to pci subsystem behaviour unloading ahci driver will disable msi and enable intx when hba supports msix or multiple msi drivers irq handler doesnt clear register it works well when reading or writing data and is always non-zero but when unloading driver or any other operation which causes disable msix and enable intx pci subsystem uses config to enable intx because is non-zero hba will falsely assume some port needs interrupt service then it asserts intx to make things worse when ahci controller shares the same interrupt pin with other pci device that pci devices isr will be called and nobody de-asserts previous intx this patch clears in ahci_port_stop even when using msix or mmsi to prevent this case it ensures is zero before pci subsystem enables intx tj minor updates to the comment
03ea25f0c5f8929d27b2dcde26aa0b698fd12913	staging rtl8188eu core remove wrapper function remove wrapper function issue_probereq that can be replaced by a single line of code and rename _issue_probereq to issue_probereq this patch also fixes line over __number__ characters warning
1f779fb28aa07350d72976d304591d216ca86f0e	cgroup dont destroy the default root the default root is allocated and initialized at boot phase so we shouldnt destroy the default root when its umounted otherwise it will lead to disaster just try mount and then umount the default root and the kernel will crash immediately v2 no need to check for css_no_ref in tejun better call cgroup_put for the default root in kill_sb tejun add a comment
0da5303bdb55e67963e8b53ebf3a2aa75051cab4	cris handle pgtable_page_ctor fail
3ec92362cda4c4a2c1ba699b6e8f2cc2e3b4306a	drop workarounds for f0 revision pre-production hardware is not supported
31f5221327f2add1ea152ed9d12b7094ab59818f	drivers uio_dmem_genirq use dev_get_platdata use the wrapper function for retrieving the platform data instead of accessing directly this is a cosmetic change to make the code simpler and enhance the readability
480d0bf07ecf27da0a5f12774d9642072c364fa9	remove amdgpu_fence_is_signaled its just overhead to check the fence value when we signal them directly anyway
13da9e11e9b781e54fc5db6b65bdcdf6dd96022d	greybus core add drvdata accessors add greybus driver-data accessors
b5e17b71c6b2ff284b4018e272e18876ccfa9b2c	serial sh-sci remove duplicate interrupt check in verify port op the driver checks if the interrupt number is greater than nr_irqs and returns an error in that case the same check is already performed by the caller remove it
2e6a5c80e6fa8fd3af6c2ffc5ad6073e798a1690	cpufreq tegra fix implementation of of drivers should call cpufreq_frequency_table_put_attr if they have called cpufreq_frequency_table_get_attr earlier in init and they arent required to validate their cpufreq table in exit by calling cpufreq_frequency_table_cpuinfo tegras driver wasnt calling cpufreq_frequency_table_put_attr and was calling cpufreq_frequency_table_cpuinfo in exit fix both these issues in it
0b3bb77c3a07a94d878fd3219302c46209f7d71c	fbdev sh_mobile_meram device registers on save and reconfigure the meram registers when the meram is powered down and restored
b30d89d1055f9acd14b5eaf82d8f6a4763e91d85	hid acrux add missing hid_hw_stop in ax_probe error path hid_hw_stop must be called in ax_probe error path if hid_hw_start was successful
d7f6946630bc324b9d791bee6dc41ff0d9469b0b	xfrm use unsigned int in __xfrm6_pref_hash x86_64 is zero-extending arch so unsigned int is preferred over int for address calculations space savings function old new delta xfrm_hash_resize __number__ __number__ policy_hash_bysel __number__ __number__ policy_hash_direct __number__ __number__
1f827f5138292a6124430cdd37bcb68f30c05467	netfilter xt_hashlimit fix link error in arch because of division division of integers will cause linker error undefined reference to __udivdi3 fix this by replacing divisions with div64_64
785f62314984ea3af9dd830b020289ba2509ae69	release just the mfn list not mfn list and part of pagetables we call memblock_reserve for start of mfn list pmd aligned end of mfn list instead of of mfn aligned end of mfn list this has the disastrous effect that if at bootup the end of mfn_list is not pmd aligned we end up returning to memblock parts of the region past the mfn_list array and those parts are the pte tables with the disastrous effect of seeing this at bootup write protecting the kernel read-only data freeing unused kernel memory freed freeing unused kernel memory freed xen bad type saw __number__ exp __number__ for mfn pfn xen error getting mfn pfn from l1 entry __number__ for xen error getting mfn __number__ pfn __number__ from l1 entry __number__ for and so on
5dd6eeb2c0c3f5e1364b51a11a7e47629655b6ff	mfd omap-usb-host remove some unused functions removes some functions that are not used anywhere usbhs_readb usbhs_writeb this was partially found by using a static code analysis program called cppcheck
ae43b886f174297366d4e09a008ad8e6592d95df	dma pl330 remove the start operation for handling dma_terminate_all command original code carries out the start operation after flush operation but start operation is not required for dma_terminate_all command so this patch removes the unnecessary start operation and only carries out the flush operation for handling dma_terminate_all command fixed typos in changelog
c869ce5aaf8f470c8cf32638e7cd498f57118fa5	asoc nau8824 leave class d gain at chip default remove initial configuration of class d gain for and leave them at the chip default
df53721a60022263017c5d72e17a7780d0e5dc4c	arm shmobile kzm9d resigser smsc911x platform device with id as the kzm9d only has one smsc911x device it may be registered as a platform device with id this allows the kzm9d board to access the smsc911x device when config_regulator and config_regulator_fixed_voltage are set the motivation for which is twofold using regulators seems to be generally a good thing it will move the kzm9d defconfig one step closer to being able to be consolidated with other shmobile defconfigs an alternate but so far untested approach would be to update the definition of dummy_supplies in to use instead of smsc911x
70e01880a9b2c548d3911d0eed467d664aad5986	mark channels as unsigned the values reported by the ad7780 are unsigned with a binary offset __number__ is negative fullscale __number__ is zeroscale __address__ is positive fullscale so mark the channel in the channel spec as unsigned rather than signed
68c9918479834c19d0c2a1d38b75227b01355674	tidy connector hotplug handler punt messages to debug
37dd5ffc35f41d85c1b8b9e1012c9fb891af3c05	rtc rtc-da9055 remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure since commit device-core ensure drvdata null when no driver is bound thus it is not needed to manually clear the device driver data to null
40daf5ce553ae214ba5bf56af1550258e2e57ff4	staging lustre osc put constant on the right of binary operator move constants to the right of binary operators a simplified version of the semantic patch that makes this change is as follows constant c expression e binary operator b c e b e c c e e c
5cd4d0302cc3a53b4fb48006d448f44f666f1569	staging hv mousevsc cleanup error handling cleanup error handling in this driver use standard linux error codes
f55b564054e35dcd171e1191a477327528271f95	tipc dont create payload message using connection protocol routine modifies the logic that creates a connection termination payload message so that it no longer misuses a routine that creates a connection protocol message the revised code is now more easily understood and avoids setting several fields that are either not present in payload messages or were being set more than once
7f5bd0422e0a85dc48418de3950b7726f3fc5a7d	iwlwifi mvm dont enable protection for all ampdus currently rts protection was done whenever trasnmitting an ampdu this limits throughput in cases where theres no need for protection disable this too inclusive protection for now
d0fad89da9801b3945d2ee7243ecbc75b3da6f09	bluetooth silence warning enabling debug_strict_user_copy_checks causes the following warning in function copy_from_user inlined from rfcomm_sock_setsockopt at warning call to copy_from_user_overflow declared with attribute warning copy_from_user buffer size is not provably correct presumably due to buf_size being signed causing gcc to fail to see that buf_size cant become negative
29c262fed4067c52977ba279cf71520f9991a050	bnxt_en improve ethtool if autoneg is off we should always report the speed and duplex settings even if it is link down so the user knows the current settings the unknown speed and duplex should only be used for autoneg when link is down
f7b4575601dafb3cf3c568465ec6980de6d09b94	whitespace fixes and tidyup keeping checkpatch happy
512fe365373b9c95a70b4b6357503ee74d27214f	perf tools define _default_source for _bsd_source was deprecated in favour of _default_source since glibc __float__ to avoid build warning on _default_source should also be defined __number__ link
75f400b0e358b42c31162404c1e9e8511426f1e2	media document the obscure dvb_frontend_reinitialise the dvb_frontend_reinitialise function is a special case used by just one frontend document it for completeness
2bfc311a57f5694106fdd0db7ca1eb6a4b35f2a9	remoteproc drop wait in __rproc_boot in the event that rproc_boot is called before the firmware loaded completion has been flagged it will wait with the mutex held obstructing the request_firmware_nowait callback from completing the wait as rproc_fw_config_virtio has been reduced to only triggering auto-boot there is no longer a reason for waiting in rproc_boot so drop this
cab1c7fd8024ce896119535b5b067224b0b699aa	mac80211 fix ieee80211_sta_tx_notify for nullfunc function ieee80211_sta_reset_conn_monitor has been resetting probe_send_count too early and nullfunc check was never called after succesfull ack
ecb598d0b2ca4897a3962aed7680ee3d28dda6e8	mtd socrates_nand remove redundant dev_set_drvdata driver core will set the driver data to null upon detach or probe failure
539d6e11d266bceb597bc416060f9f2888bbd89f	greybus svc return proper error code on watchdog create error when the watchdog is not created properly we need to propagate the error for this and not just return success
807e5b80687c06715d62df51a5473b231e3e8b15	add steal time support to full dynticks cpu time accounting this patch adds guest steal-time support to full dynticks cpu time accounting after the following commit ff9a9b4c4334 sched time switch virt_cpu_accounting_gen to jiffy granularity time sampling became jiffy based even if we do the sampling from the context tracking code so steal_account_process_tick can be reused to account how many ticks are stolen-time after the last accumulation link
dd7e6dd546c69b6166268dedb787b0839c1fd4d5	usb gadget udc dummy remove messages now that we provide generic debugging messages from udc-core we can remove the same messages from this driver
1a7ed5bec407478b9ce5e3267708110277851614	usb gadget s3c-hsotg fix build on x86 and other architectures the readsl and writesl accessors are only defined on some architectures the driver currently depends on config_arm because the build breaks on x86 in particular switch to use of ioread32_rep and iowrite32_rep to fix build on all architectures and remove the config_arm dependency also update printk formatting to handle a long long dma_addr_t to avoid warnings on architectures
225aabaffe9ab42b2dd8770359442f019083275e	make sure the fw max encap size is enough for ipv6 tunnels otherwise the code that fills the ipv6 encapsulation headers could be writing beyond the allocated headers buffer
8a288960192591c405767d98ebe372f66df1a6c6	scsi qla4xxx fix call trace on rmmod with abort all active commands from eh_host_reset in-case of fix following call nov __number__ qla4xxx __number__ qla4_8xxx_disable_msix qla4xxx rsp_q nov __number__ qla4xxx __number__ pci int a disabled nov __number__ slab error in kmem_cache_destroy cache qla4xxx_srbs cant free all objects nov __number__ pid __number__ comm rmmod tainted g o nov __number__ call trace nov __number__ nov __number__ nov __number__ nov __number__ nov __number__ nov __number__ slab cache with size __number__ has lost its name nov __number__ iscsi registered transport qla4xxx nov __number__ qla4xxx __number__ pci int a gsi __number__ level low irq __number__
8e72d37eb304d9ec5dfb51bc2d83e900b79ee764	ipv6 export ip6_datagram_recv_ctl ip6_datagram_recv_ctl and ip6_datagram_send_ctl are used for handling ipv6 ancillary data since ip6_datagram_send_ctl is already publicly exported for use in modules ip6_datagram_recv_ctl should also be available to support ancillary data in the receive path
f14516fbf0f6bec7d98c1cb5b5c73ccd2bb4a5e9	remove rgnbase and rgnsize variables remove rgnbase and rgnsize variables from memblock_overlaps_region we use these variables only for passing to the memblock_addrs_overlap function and thats all lets remove them
ca320ac456099c29290568353d924157e626ede9	use pixel size for computing linear offsets into a sprite this fixes an original bug in the sprite code that miscomputed the source offset into a linear yuv packed framebuffer that was magnified into an oops with commit author damien lespiau intel.com date fri oct __number__ __number__ adjust sprite base address
2e2336445e696805b40d6a13cf25f26d49e20069	bluetooth fix mitm flag when initiating smp pairing the pairing process initiated through mgmt sets the value regardless of or le pairing this value will contain the mitm flag if the local io capability allows it when sending the smp pairing request we should check the value and ensure that the mitm bit gets correctly set in the bonding flags
058be4d6c67d9fc043623cb26e4abe5608755d65	backlight lp8788 explicitly apply pwm config extracted from pwm_args call pwm_apply_args just after requesting the pwm device so that the polarity and period are initialized according to the information provided in pwm_args this is an intermediate state and pwm_apply_args should be dropped as soon as the atomic pwm infrastructure is in place and the driver makes use of it
93797d87d63d36404907640e4e20bb976bff4744	irq check domain hwirq range for dt translate a dt node may have more than __number__ domain associated with it so make sure the hwirq number is within range when doing dt translation
7ff0de3faaeb0db80c2c9f03c119167e89594879	iio dac ad5764 use apis apis are device managed and make code simpler
4fcf1de5a79bfe8ee4c638bd3902d20cd59376de	correct defered count after processing qp_wait_list the qp_wait_list processing leaves the defered ack count at its prior value this can result in a premature send of an ack fixed by unconditionally reseting the defered ack count in hfi1_send_rc_ack
d629336b6af9ff214e9d1e7224946a000fc8f70f	dont set the fence number in dpfc_ctl on snb snb has another register where the actual fbc cpu fence number is stored the documenation explicitly states that the fence number in dpfc_ctl must be __number__ on snb and in fact when its not zero the gtt tracking simply doesnt work
96d4ac3f2f287a143adb1926eae86dbe255a7cce	minstrel_ht increase sampling frequency try to sample all available rates as sample attempts do not cost much airtime and are appropriately spaced based on the average a-mpdu length this helps with faster recovery on rate fluctuations
c84345597558349474f55be2b7d4093256e42884	pm wakeirq enable dedicated wakeirq for suspend we currently rely on runtime pm to enable dedicated wakeirq for suspend this assumption fails in the following two cases __number__ if the consumer driver does not have runtime pm implemented the dedicated wakeirq never gets enabled for suspend __number__ if the consumer driver has runtime pm implemented but does not idle in suspend lets fix the issue by always enabling the dedicated wakeirq during suspend depends-on bed570307ed7 pm wakeirq fix dedicated wakeirq for drivers not using autosuspend updated based on bed570307ed7 added description
6ae075485e2d91921bdd64e49896b1bae87d1ba2	ocfs2 remove unused code in dlm_new_lockres remove the branch that free because the condition is never satisfied when jump to label error
1b094a424d64e3e320a2786a2914539471cc408b	staging comedi ni_65xx tidy up the conversions introduce some convienence macros to handle the port to channel channel to port and channel mask calculations based on the __number__ channels per port of the hardware
6ceeeec04509ac40f91cfc8ffc129e22a136aafe	dont disable err_int on the irq handler we currently disable the err_int interrupts while running the irq handler because we fear that if we do an unclaimed register access from inside the irq handler well keep triggering the irq handler forever the problem is that since we always disable the err_int interrupts at the irq handler when we get a fifo underrun well always print both messages uncleared fifo underrun on pipe a pipe a fifo underrun because the was_enabled variable from ivybridge_set_fifo_underrun_reporting will always be false since we disable err int at the irq instead of actually fixing ivybridge_set_fifo_underrun_reporting lets just remove the disable err_int during the irq handler code as far as we know we shouldnt really be triggering err_int interrupts from the irq handler so if we ever get stuck in the endless loop of interrupts we can git-bisect and revert and we can even bisect and revert this patch in case im just wrong as a bonus our irq handler is now simpler and a few nanoseconds faster
d7be81a5916bdb1d904803958e5991a16f7ae4b2	ravb fix software timestamping in ravb_start_xmit dont call skb_tx_timestamp only when hardware timestamping is requested in the latter case software timestamps are suppressed and thus the call of skb_tx_timestamp does not have any effect instead call skb_tx_timestamp unconditionally in ravb_start_xmit since the function checks itself if software timestamping is required or should be skipped due to hardware timestamping
d8ce9395252fa9a264c04e7ab9949f4f7ec96f5b	bluetooth remove unneeded initialization in hci_alloc_dev we allocate memory with kzalloc so there is no need to call __number__ or similar
e08b5906ccf323e2ad7b0448329b7cbcfda4c94e	wil6210 reorder reset preparation sequence disable interrupts first to prevent spurious wmi events arrival
3a46588e4b843afaa8f989fb494172d10e007afb	parisc ftrace add call to ftrace_graph_is_dead in function graph code ftrace_stop is going away as it disables parts of function tracing that affects users that should not be affected but ftrace_graph_stop is built on ftrace_stop heres another example of killing all of function tracing because something went wrong with function graph tracing instead of disabling all users of function tracing on function graph error disable only function graph tracing to do this the arch code must call ftrace_graph_is_dead before it implements function graph link
baaaef1383d3708f02b2316d2d6f2bda0980fad7	staging ozwpan increase farewell report size farewell report size can be bigger than one byte increase array size to accomodate maximum __number__ bytes of farewell report
6905cae3a86f6411b62fda0c7a8e1c0d04eaef88	staging unisys visorutil remove unnecessary braces this fixes the following warning warning braces are not necessary for single statement blocks
54d672e922cdb7e015a22a3a2c096dcac5ba284f	alsa pxa2xx-ac97 remove redundant platform_set_drvdata commit device-core ensure drvdata null when no driver is bound removes the need to set driver data field to null
21bf9112b596cb91e4f63de859ea514f081031fd	ath10k dont reset htc endpoints unnecessarily endpoints are re-initialized upon htc start anyway so theres no need to do that twice in case of restarting htc in case of hardware recovery
2637e5fd232d421b680757944f613d4b1a36ae26	i2c octeon fix i2c fail problem when a process is terminated by a signal ive been debugging the abnormal operation of i2c on octeon if a process is terminated by signal in the middle of i2c operation next i2c read operation which is done by another process was failed so i changed to ignore signal in the middle of i2c operation after that the problem was not reproduced
103123305c4f695cbb11555d51a32ea14d6bed05	staging zsmalloc add single-page object fastpath in unmap improve zs_unmap_object performance by adding a fast path for objects that dont span pages
df1553c8debddc10c6fa9ebe39f5acf5b13bb190	asoc add basic wm8918 support the wm8918 is register compatible with the wm8904 with a subset of the functionality add the device id a subsequent patch will ensure that only the relevant functionality is exported to userspace
7a67092a25d854a4f5c53a6495d33e250896f9db	gen6_rp_interrupt_limits doesnt seem to exist on vlv i cant find gen6_rp_interrupt_limits anywhere in vlv docs reading it always returns zero from what i can tell and eliminating it doesnt seem to make any difference to the behaviour of the system
b4ffc1be9fde347f0407b96a7074a8dc2bf61a8a	alsa rme9652 use snd_pcm_hw_constraint_single use the new snd_pcm_hw_constraint_single helper function instead of calling snd_pcm_hw_constraint_minmax with the same value for min and max to install a constraint that limits the possible configuration values to a single value using snd_pcm_hw_constraint_single makes the indented result clearer
4aae977721f0367809cdc94584b6945073d9fe10	ntb_perf allow limiting the size of the memory windows on my system dma_alloc_coherent wont produce memory anywhere near the size of the bar so i needed a way to limit this its pretty much copied straight from ntb_transport
73b8922fefed64c9bcb70e25b30a069bb9e61f40	media drx-d add missing braces in no functional changes but removes a duplicate check if
8bcd37d8b21de13d068414c018c9599281294a01	mmc core mmc_blk_rw_cmd_err remove unused variable fix compilation warning warning variable set but not used struct mmc_queue_req
f3f32360b6d9e22ece894a4d49abdd2d9a82fe81	add wahdcdisablefetchwhenmasked we already have it for chv but was missing for bdw
b9d16a2a21aa9c264a29dd84d6f7b03581517a03	set x86_feature_extd_apicid for future processors decision to use a mask or mask in default_get_apic_id is controlled by setting capability bit x86_feature_extd_apicid currently we detect extended apic id support by accessing link transaction control register d18f0x68 in pci config space but not even that is needed as we can safely postulate that future amd processors will support apic ids and we can simply set that feature bit on them without the pci access link
bae9f746a18ee31bbeeb25ae6615805ed6eca173	cifs fix error handling cifs_user_readv coverity says cid __number__ dereference after null check forward_null __number__ in cifs_user_readv __number__ cur_len min_tconst size_t len total_read __number__ npages div_round_upcur_len page_size __number__ __number__ allocate a readdata struct __number__ rdata cifs_readdata_allocnpages __number__ cifs_uncached_readv_complete cid __number__ dereference after null check forward_null comparing rdata to null implies that rdata might be null __number__ if __number__ rc __number__ goto error __number__ __number__ __number__ rc cifs_read_allocate_pagesrdata npages we goto error rc will be non-zero and then we end up trying to do a kref_put on the rdata which is null fix this by replacing the goto error with a break
fbfa304963fa8bf990dac1d05a77800d1e123b66	kvm s390 clear kvm_dirty_regs when dropping to user space we should make sure that all kvm_dirty_regs bits are cleared before dropping to user space until now some would remain pending
8cfda3f8764136a5a3f17078e99c073a3d377c1e	staging comedi pcl816 remove ai_range_type from boardinfo all the board types use the same analog input range_table remove this data from the boardinfo
4260c13ba9102d466f017139de990dfffaf4d997	nfc update the llcp poll mask fix the poll mask depending on the socket state pollout was missing for example
e36a37691e53b54edb78209757fab0dd76c4614f	bluetooth disable fast connectable when disabling connectable when the connectable setting is disabled the fast connectable setting must also be disabled this is so that were consistent with the pre-requisites for enabling fast connectable one of which is that the connectable setting is enabled
be6cdfd17c1baa26bbe0e598cf9016f73ffe4cef	simplify pre-scaler ratio calculation the patch replaces dedicated function for scaling ratio calculation by fls calls
b972d0797180d8414351d9dc8ff65071c692d058	xfs annotate user variables passed as void some argument callbacks can contain user buffers and sparse warns about passing them as void pointers cast appropriately to remove the sparse warnings
c371de14b9a23aadb57accab0ca2e5dd28de7f16	usb serial wake up msr-wait queue on disconnect make sure processes waiting for modem-status changes are woken up at disconnect this is needed for custom subdriver tiocmiwait-implementations which do not yet handle hangup even though processes on the tty-port wait queue are woken up at hangup the wake-up call in usb-serial disconnect is still needed if a woken-up process may go back to sleep due to an incomplete tiocmiwait-implementation if a disconnect occurs after a hangup any process waiting for changes will not be woken up a second time by the tty-layer as the port will then have been disassociated from the tty
a9709e435454cf84d8971261ff8ded3a453b9b13	media media dont try to empty links list in media_entity_cleanup the media_entity_cleanup function only cleans up the entity links list but this operation is already made in media_device_unregister_entity in most cases this should be harmless besides having duplicated code since the links list would be empty so the iteration would not happen but the links list is initialized in media_device_register_entity so if a driver fails to register an entity with a media device and clean up the entity in the error path a null deference pointer error will happen so dont try to empty the links list in media_entity_cleanup since is either done already or havent been initialized yet
e70602a8b87649e9f7742d96929a8d83618fa320	was not cleared properly clear
a3716e70e1def691ad39e0f908fea0870ce010d9	netfilter nf_tables uninitialize element from the commit path this should happen once the element has been effectively released in the commit path not before this fixes a possible chain refcount leak if the transaction is aborted
24237c43aade30758aacabbf0e462fca19c48231	acer fix up sparse warning sparse using plain integer as null pointer __number__ __number__ __number__ __number__ handle __number__ __number__ status acpi_get_devicesprop acer_wmi_get_handle_cb __number__ void __number__
78a3fa4f3249055b472983065b30c02392cf7e2a	ovl use generic_readlink all filesystems that are backers for overlayfs would also use generic_readlink move this logic to the overlay itself which is a nice cleanup
80823ca1ba243d145c963212734e359e099051d8	omapdss remove unused macros macros to_dss_driver and to_dss_device are no longer used and the latter doesnt even work remove them
3f0cfa3bc11e7f00c9994e0f469cbc0e7da7b00c	e1000e support for byte queue limits changes to e1000e to use byte queue limits
ec48a1d981fe90ecb5bcfaaf1ae2c69d842cbbbc	coresight fix null pointer dereference in _coresight_build_path _coresight_build_path assumes that all the connections of a csdev has the child_dev initialised this may not be true if the particular component is not supported by the kernel tpiu but is present in the dt in which case building a path can cause a crash like this unable to handle kernel null pointer dereference at virtual address __number__ pgd __address__ __number__ __number__ __number__ __number__ internal error oops __number__ preempt smp modules linked in cpu __number__ pid __number__ comm bash not tainted hardware name arm juno development board r0 dt task __address__ ti __address__ __address__ pc is at lr is at pc __address__ lr __address__ pstate __number__ sp __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__
cbea21703b2484f83faef040ed1de30114794392	move counting read errors are considered to corrected if write-back and re-read cycle is finished without further problems thus moving the corrected_errors counting after the re-reading looks more reasonable imho
1ad6344acfbf19288573b4a5fa0b07cbb5af27d7	xen-pciback drop superfluous variables req_start is simply an alias of the offset function parameter and req_end is being used just once in each function and both variables were loop invariant anyway so should at least have got initialized outside the loop
9fcd67d1772c43d2f23e8fca56acc7219e991676	increment msn only when completing a request according to c9-147 msn should only be incremented when the last packet of a multi packet request has been received logically the requester associates a sequential send sequence number ssn with each wqe posted to the send queue the ssn bears a one- to-one relationship to the msn returned by the responder in each re- sponse packet therefore when the requester receives a response it in- terprets the msn as representing the ssn of the most recent request completed by the responder to determine which send wqes can be completed
fb0229dfec3df9247190f001f1b51d767f2ee035	mmc fix prototypes the mmc pm notifiers were recently reworked but the new code produces a lot of warnings when config_pm_sleep is disabled in file included from warning mmc_register_pm_notifier defined but not used the obvious solution is to add the inline keyword at the function definition as it should be for any function defined in a header file
0a179eaa436e58ed9fd00e09cdf01f1b3604d9a1	arm hwmod use init-time function pointer for _init_clkdm rather than use runtime checking inside _init_clkdm initialize soc specific function pointer at init time from commit message since soc_ops function pointers are now set during hwmod layer init
415b6185c541dc0a21457ff307cdb61950a6eb9f	pci imx6 fix config read timeout handling commit cc7b0d495589 pci designware update pci config space remap function made pci configuration requests non-posted which means we now get a synchronous abort when the cfg space read to probe for downstream devices times out synchronous aborts need to be handled differently from the async aborts we were getting before in particular the pc needs to be advanced when resolving the abort this is mostly a copy of what other pci drivers do on arm to handle those aborts bhelgaas changelog fixes
731073b9c99d46c6b6c01184f67ee6f75fd7a163	sky2 initialize napi before registering device there is race condition when call netif_napi_add after register_netdevice as can be called without napi initialized and trigger bug_on on napi_enable like on below messages __float__ sky2 driver version __float__ __float__ sky2 __number__ yukon-2 ec ultra chip revision __number__ __float__ sky2 __number__ irq __number__ for __float__ cut here __float__ kernel bug at __float__ invalid opcode __number__ preempt smp __float__ call trace __float__ sky2 __float__ __float__ __float__ __float__ __float__ __float__ __float__ __float__ to fix the problem patch changes the order of initialization bug report reported-and-tested-by
61fd58dc578d40c1cfe2691380c42860c6fff809	clk sunxi cpu_data is defined in header files of some architectures in some architectures the cpu_data is not a macro-function so the compiler will substitute the identifier with probably something wrong use cpu_mux_data instead of this_cpu_data
95addb2ae06f46cd13346ed87bbda3990438a69b	add read_bios_from_rom callback for vi parts read the vbios image directly from the rom
3e06eb3dacdff52749df85694cf6bc48283973c6	block do not put mq context in blk_mq_alloc_request_hctx in blk_mq_alloc_request_hctx blk_mq_sched_get_request doesnt get sw context so we dont need to put the context with blk_mq_put_ctx unless we will see preempt counter underflow
3c4019d3e0d77c8992225efe4fc7420677b8ab40	staging dgnc remove unnecessary braces this fixes the following warnings warning braces are not necessary for single statement blocks
72f4202f1ff20edfcc34368488d5bd760fac57b6	staging comedi ni_tio convert ni_660x_gate_pin_gate_select to a macro the bug_on in this function can never happen for aesthetics rename this camelcase inline function and convert it into a simple macro
bfa76bb12f23ecf0c6d07c302f4571a6fe9bc3e3	clocksource sh_cmt request irq for clock event device only clock sources dont need an irq request the irq only for channels used as clock event devices
74595e1764e271911c73e8ab816e0be269420134	arm pxa use gpio_to_irq for sharppm_sl replace custom pxa_gpio_to_irq macro with standard gpio_to_irq
1605d2715ad2e67ddd0485a26e05ed670a4285ca	media mtk-vcodec remove unused dma_attrs the local variable dma_attrs is set but never read link
d0abe2f3a9a541ded2e30ef7275f057fb7f0335a	use irq accessor functions instead of open coded access this is a preparatory patch for refactoring the internals if irq_data link
01175255fd8e3e993353a779f819ec8c0c59137e	sched remove __schedule non-standard frame annotation now that the x86 switch_to uses the standard c calling convention the stack_frame_non_standard annotation is no longer needed link
02c18c4737a7fc52d8a612d67c18f2900510dae3	mmc mxs-mmc check the return value from stmp_reset_block stmp_reset_block may fail so lets check its return value and propagate it in the case of error
0d3aba30b755fe9ccaf390f0e71f6fb9fd55bd87	alsa oxfw fix detect_loud_models return value this code causes a static checker warning detect_loud_models warn signedness bug returning the detect_loud_models function should return false on falure so that we dont try to set up the loud code for hardware that doesnt support it
5fc83f470d8ada25927701512cf94a53dab6c4c8	xprtrdma fix panic in rpcrdma_register_frmr_external is not yet initialized when it is used to unmap segments during an error exit use the same unmapping logic for all error exits if len used to be a bug_on check the broken code will never be executed under normal operation
362b646062b2073bd5c38efb42171d86e4f717e6	acpi export fadt pm_profile integer value to userspace there are a lot userspace approaches to detect the usage of the platform laptop workstation server and adjust kernel tunables accordingly scheduler power management these approaches need constant maintaining and are ugly to implement detect pcmcia controller laptop does not work on recent systems anymore on acpi systems there is an easy and reliable way if implemented in bios and most recent platforms have this value set export it to userspace
138a95547ab04f5f9d49bfb12bd764f7a7edbcf4	acpica acpi __float__ update nfit table for additional new fields acpica commit bc81a4494d7648a496e0a82f0d27562103ee1ec1 changes the nfit control region link
d3e9a1dc7c34c3c5a253091289a54883bf27f6ba	net sctp fix typo in correct spelling typo in
08cd3e1684894e7d541ea92efb8756f7f43453a7	staging comedi pcl711 add differential input support for __number__ boards the acl-8112 boards can do differential analog inputs add support for this mode
75f9ef0b7f1aae33b7be7ba8d9c23c8cb48c2212	teach arch_uprobe_post_xol to restart if possible sigill after the failed arch_uprobe_post_xol should only be used as a last resort we should try to restart the probed insn if possible currently only adjust_ret_addr can fail and this can only happen if another thread unmapped our stack after we executed call out-of-line most probably the application if buggy but even in this case it can have a handler for and in theory it can be even correct and do something non-trivial with its memory of course we cant restart unconditionally so arch_uprobe_post_xol does this only if returns even if currently this is the only possible error default_post_xol_opuprobe_fix_call can always restart but as jim pointed out it should not forget to pop off the return address pushed by this insn executed out-of-line note this is not perfect we do not want the extra handler_chain after restart but i think this is the best solution we can realistically do without too much uglifications
2bcab6c146fde0d0286b132068111f98b6217460	perf evlist remove unnecessary parentheses link
b30d49b294fe339719918965594f12eb7967dca0	wl12xx fix tx power setting the driver ignores bss_changed_txpower changes fix this by calling acx_tx_power when appropriate
6e66ea137ff5bd292ed734c53f569892068a7a70	track oacontrol register during parsing there is some thought that the data from the performance counters enabled via oacontrol should only be available to the process that enabled counting to limit snooping require that any batch buffer which sets oacontrol to a non-zero value also sets it back to __number__ before the end of the batch this requires limiting oacontrol writes to happen via mi_load_register_imm so that we can access the value being written this should be in line with the expected use case for writing oacontrol v2 drop an unnecessary true false
10d089bd4b289cbe08d2565f34e030c8980682f4	can flexcan replace open coded mailbox code by proper define this patch replaces a open coded variant of a mailbox code definition by an existing define improves code readability
fd3a5d5b8386c9a29116e048b5e4ee86545ba012	gpio twl4030 fix passing of pdata in the device tree case we still have some legacy code needing the callback functions that wont work properly without platform data to use platform data for twl4030-gpio we need to not trash the possible data
a6cb9ee7cabe68002c3f2ab07224ea27d2617cf1	pci retry bars restoration for type __number__ headers only some shortcomings introduced into pci_restore_state by commit pci check for pci bar restore completion and retry have been fixed by recent commit ebfc5b802fa76 pci fix regression in pci_restore_state v3 but that commit treats all pci devices as those with type __number__ configuration headers that is not entirely correct because type __number__ and type __number__ headers have different layouts in particular the area occupied by bars in type __number__ config headers contains the secondary status register in type __number__ ones and it doesnt make sense to retry the restoration of that register even if the value read back from it after a write is not the same as the written one it very well may be different for this reason make pci_restore_state only retry the restoration of bars for type __number__ config headers this effectively makes it behave as before commit for all header types except for type __number__
f3d229c68bb47170f04f81e51c9ed5d4286cebdb	netfilter xt_log dont use xchg for simple assignment at least on ia64 the bogus use of xchg here results in the compiler warning about an unused expression result as only an assignment is intended here convert it to such
05bb7013038a2b609aef14ad4e07afe031daec49	usb gadget r8a66597-udc fix flush fifo handling the bclr in can flush the fifo of cpu side only to flush the fifo of sie side we have to use the aclrm in pipenctr
4b27a1eb7b83da956c3939869ed22f5ca0e1f1e1	nfp remove nfp_net_irqs_wanted nfp_net_irqs_wanted doesnt really encapsulate much logic remove it and inline the calculations
e06ab3b8e82c89a8ada25f61fbd9f02d6ca3103f	asoc dapm only lock codec for if not using regmap if we do use regmap then regmap will take care of things for us we actually already have this check at a higher level for the current users but this makes sure we do the right thing in the future too if we need to
7602e05df73f3c775d5ef808c0bc4af9711e4438	mfd ab8500 fix dt irq mapping the ad8500 defines itself as interrupt-controller in dt but it doesnt assign dt node to irq domain when creates it as result of_irq_xx helpers dont work because they cant find necessary irq domain hence fix it by assigning ad8500 core device dt node to irq domain when its created this patch fixes ste u8500 snowball boot failure reported by kevin hilman
5c1104b9dc6bc65f71468c70408747034e5aa3f7	fix request smc_sk firmware case this patch fixes firmware request error on polaris protection mode because we need load smc_sk instead of smc under security protection mode
d2d3462f9f08da364c8fbd41e8e32229d610d49d	clarify purpose of each get_random_long kaslr will be calling get_random_long twice but the debug output wont distinguishing between them this patch adds a report on when it is fetching the physical vs virtual address with this once the virtual offset is separate the report changes from kaslr using kaslr using into physical kaslr using virtual kaslr using link
bd7413aef860baed78c76734050c1de4194ed61c	arm pxa pxa_cplds signedness bug in probe base_irq needs to be signed for the error handling to work also we can remove the initialization because we re-assign it later
329d0c0cf1be0ad711bc2f9853fdacc33c1f72b4	asoc rsrc-card remove unused ret rsrc-card cleanup for dpcm cleanuped rsrc-card driver but then unused ret was left below warning happen without this patch in function rsrc_card_startup warning unused variable ret
ef8d1d51aa5ebe4b17b5e837d520df1e398b7adb	qla2xxx setup data needed in isr before setting up the isr qla2xxx first calls request_irq and then does the setup of the queue entry data needed in the interrupt handlers in when using msi-x this could lead to a null pointer dereference when an irq fires between the request_irq call and the assignment of the qentry data structure to the field a possible case for such a race would be in the kdump case when the hbas irqs are still enabled but the driver is undergoing a new initialisation and thus is not aware of already activated irqs in the hba
eb0474544bc16a9dab53b26abd846e86ba814eb1	arm smp fix per cpu timer setup before the cpu is marked online the problem is related to the early enabling of interrupts and the per cpu timer setup before the cpu is marked online this doesnt need to be done in order to call calibrate_delay calibrate_delay monitors jiffies which are updated from the cpu which is waiting for the new cpu to set the online bit so simply calibrate_delay can be called on the new cpu just from the interrupt disabled region and move the local timer setup after stored the cpu data and before enabling interrupts this solves both the cpu_online vs cpu_active problem and the affinity setting of the per cpu timers
e0d9677ea387e386e9ce983f287d99b278ea4930	batman-adv clear control block of received socket buffers since other network components and some drivers uses the control block provided in skbs the network coding feature might wrongly assume that an skb has been decoded and thus not try to code it with another packet again this happens for instance when batman-adv is running on a bridge device fix this by clearing the control block for every received skb introduced by batman-adv network coding code and transmit packets if possible
85e34368dea6fc8a2d16464e01c85d3b7bd682bd	bluetooth fix dereference after null check move code dereferencing possible null pointer to the check branch
e537daa198ed2b0f3336c340e9abd540fd95125d	staging iio light add space around address checkpatch check pointing out the lack of space around the operator
bf5269574013772050a91ace0a137d33f1f4e4d5	staging rts5208 use pci_device_id rather than define_pci_device_table this patch enhances kernel style usage for the rts5208 driver we should prefer struct pci_device_id over define_pci_device_table to meet kernel coding style guidelines this issue was reported by checkpatch
ee72d150ada90d33cc6e222fbdd7f980c16d974d	bluetooth remove locking in hci_user_passkey_request_evt this patch removes hdev locking in hci_user_passkey_request_evt since it is not needed mgmt_user_passkey_request simply calls mgmt_event which does not require hdev locking at all
86e92ad299fb0be359efdd61812944497d4d8d52	dlm disable nagle for sctp for tcp we disable nagle and i cannot think of why it would be needed for sctp when disabled it seems to improve dlm_lock operations like it does for tcp
52f85729805b7a0ec5a7a70e2c814193929de2f0	dnotify replace dnotify_mark_mutex with mark mutex of dnotify_group there is no need to use a special mutex to protect against the race see for a description of this race instead the dnotify_groups mark mutex can be used
c789fffc56a1a6c4bd9cbd15269d86089d757214	ideapad-laptop include yoga __number__ __number__ in add rfkill whitelist this changes the entry to the whitelist of machines that do not have a physical rfkill switch unfortunately the yoga __number__ generation seems to use upper-case letters for the yoga __number__ pro-1370 while it uses normal capitalization for its yoga __number__ __number__ and __number__ siblings in order to catch all variants of the yoga __number__ im changing both the entry for the __number__ using yoga as the name and the entry for the pro __number__ using all-caps yoga to not match the exact model number but only the generation this way the __number__ and __number__ models share one entry but if the firmware changes from one format to the other it will still work the second entry for yoga __number__ pro that was recently added for some reason ended up not being added in alphanumeric order and im moving the yoga __number__ __number__ entry down while making the change so they are sorted more logically
ddd32b4289a6feda9ad9e68b0d85641c389a72ba	x86 mm correct vmflag test for checking vm_hugetlb commit tlb flush range support for x86 change flush_tlb_mm_range considerably after this we test whether vmflag equal to vm_hugetlb and it may be always failed because vmflag usually has other flags simultaneously our intention is to check whether this vma is for hughtlb so correct it according to this purpose link
dd5e72030429edfcdee7c0fcdce702ecc81a739e	alsa hda remove dead hda_ctl_bind_vol and hda_ctl_bind_sw codes
0de4c7c150feb942747bbf594340e86d344c94aa	rtc rtc-pcap use module_platform_driver_probe use module_platform_driver_probe macro which makes the code smaller and simpler
901d805c33fc4c029fc6b2d94ee5fb7d30278045	ubsan fix typo in format string handle_object_size_mismatch used to format a kernel pointer with pr_err this seemed to be a misspelling for but using this to format a kernel pointer does not make much sence here therefore use instead like in handle_missaligned_access link
16bebefe29d8495c89961a9d57ea1947547a5211	kvm x86 fnstcw and fnstsw may cause spurious exception since the operand size of fnstcw and fnstsw is updated during the execution the emulation may cause spurious exceptions as it reads the memory beforehand marking these instructions as mov since the previous value is ignored and dstmem16 to simplify the setting of operand size
c2f5ebd2148860537762c8d0d687efed73c2c2d0	bluetooth add constants for le advertising types add constants for adv_ind adv_direct_ind adv_scan_ind and adv_nonconn_ind advertising types
423795cbac3b6b1b9fea6845a9233ba2dcc61142	prefer to check for idleness in worker rather than sync-flush
0cdec5a4508398870b5c361a0aa993ee7fcd572c	staging rtl8188eu replace type_efuse_map_len call with its result efuse_map_len_88e this makes the code easier to read
7a42d83536a5ea7ea7b4ad279c34c4c4ce509b5a	usb dwc3 ep0 only change to address if set_config succeeds in case were switching back to usb_state_address from usb_state_configured if host sends a set configuration command for configuration zero we should only switch if the request is successfully processed by the gadget driver
607078fcb1614b505a4904ab51a2eb2ebf6b9d7b	staging octeon-usb remove internal function parameter sanity checks remove some function parameter sanity checks from internal functions where we can rely them being called with sane parameters
2e112345c22bcdf5d246db40f0587d7d11f1dc61	usb dwc3 core modify io memory resource after deferred probe completes when deferred probe happens driver will try to ioremap multiple times and will fail memory variable is a global variable modifications in this field will be accumulated on every probe fix this by moving the above operations after driver hold all required phys
0350cb48fb94e168d8b4d3ff65adbdbc73759cbf	tipc potential shift wrapping bug in map_set up_map is a u64 type but were not using the high __number__ bits
c6f3e7cb13bb9e9b1760f0dda37b96a6d1c6ef28	enable psp block for sriov sriov can support for loading ucode with psp block enable it
e7d9dd5ab15fa6d895929176592d6946bf329cf8	extcon return error code on failure function get_zeroed_page returns a null pointer if there is no enough memory in function extcon_sync it returns __number__ if the call to get_zeroed_page fails the return value __number__ indicates success in the context which is incosistent with the execution status this patch fixes the bug by returning bugzilla
fe89e69050489884b304ea67b580056395dbd2b1	mac802154 cleanup llsec param flags this patch changes the setting of llsec param flag with the bit macro
0826874a664f9e9479d50fda23923b87a50cda0d	allow vga on crtc __number__ this is left over from the old pll sharing code and isnt useful now that plls are shared when possible
d56b21361ca52afa5d7cb47c9792d0982666d9a5	kill intel_clear_scanline_wait this is a pretty racy way to close these races and we have much better means to cope with these races meanwhile for non-broken userspace we correctly wait for any outstanding rendering for broken userspace the hangcheck will save the day
75d1e6613c3ae4728c0ff15e23ab4226e8dfbfcf	staging unisys memregion eliminate unnecessary requested flag
56c87c0de528320b3efa0d2d5084749acf05d92c	fix sparse warning for static declarations this patch fixes the following sparse warnings warning symbol rsn_authen_cipher_suite was not declared should it be warning symbol ext_ieee80211_send_beacon_wq was not declared should it be
f33ce568366ab61b5685bae07306e40f17beb943	acpi scan move power state initialization to a separate routine to reduce indentation level and improve code readability move the initialization code related to device power states from acpi_bus_get_power_flags to a new routine acpi_bus_init_power_state
0210737c85860756efa7d936156e8a94412f5d5c	staging android ion do not bug on handle client mismatch the ion_free_nolock function should not bug on a handle client mismatch
65b96899ce7f12711656f0b3203554fd99e074a0	staging unisys virtpci place logical continuation at the end of a line move the logical continuation from the start of the second line of an if statement to the end of the first line
a9b586a52a97ca537882a879de583002d74d9e27	staging comedi me4000 tidy up me4000_ai_status_reg bit defines use the bit marco to define the bits of this register for aesthetics rename all the defines to remove the _bit from the name also use me4000_ai_status_reg instead of me4000_ai_ctrl_reg when reading the register they happen to be the same
4d7101d76572257dbbdca0e17f132a04e4b2b77d	at86rf230 fix cca ed values for rf233 this patch changes the rssi base value to for at86rf33 transceivers the code before assumes a rssi base value of which is for the at86rf231 transceiver only this change need to update the cca ed threshold mapping table
6f8a028fd17bbb3102c81dc4fd30f2d722234b5e	greybus gpbridge expose protocol_id in sysfs right now userspace doesnt have any way to find what protocol does a gpbridge device implement and this is essential for the scripts to know to expect what kind of device will be present inside the gpbn directory expose protocol_id in sysfs to fix that tested by checking that the field appears with gp module on evt __float__
5985d76cc1b62125301754c9b636a18c346bfc52	gpio pl061 set initcall level to module init replace subsys initcall by module initcall level since pinctrl driver is already launched before gpio driver its unnecessary to set gpio driver in subsys init call level
d2d51d8192f1e42a9351ab4d82f85f0c79e1780d	dont init gds pool if gds size is __number__ v2 si cards dont expose gds as a separate pool the cp manages gds and the umds use special cp packets to allocate gds memory v2 drop extra whitespace change bug
92616b5b3a7c7fa8148df82e7ff6183056f2bfc8	blkcg skip blkg printing if q isnt associated with disk blk-cgroup printing code currently assumes that there is a associated with every queue in the system but modules like floppy can instantiate request queues without registering disk which can lead to oops skip the which dont have associated with them factored out backing_dev_info check into blkg_dev_name
2dd02d742535fe0114f1957afe8685856bdfebac	hpsa correct return values from driver functions correct return codes for error conditions
485124cbb746eba343e0763b917cc303ae3d0916	ath9k add bb name string for ar9550
165f2cf6405a9e2153b69302845c7d5c9f3cb23b	sctp reduce indent level in sctp_copy_local_addr_list this patch is to reduce indent level by using continue when the addr is not allowed and also drop end_copy by using break
2a7a145e787a900cca5939c52d2df78c20b7b4de	remove empty function after the switch to functions and the removal of rtc_device_unregister the remove function does not do anything delete it
f0505610505caf8443cd5ea269a7936b64711fee	net dsa make mv88e6060 use nested mdiobus like mv88e6xxx and mdio-mux to avoid lockdep give false positives because of nested mdio busses switch to previously introduced nested variants
283e7ad0241155710f99a9f39d13313a53336926	init stricter checking of values in the kernel command-line previously would be accepted and interpreted just like this patch adds stricter checking so that additional characters after are rejected by the goal of this change is to help in unifying dms interpretation of its block device argument by using existing kernel code name_to_dev_t but dm rejects malformed pairs it seems reasonable for to reject them as well
7d790a21e5d4674fb25da62f560453bc3c248a93	ath9k enable tuning capacitance configuration for ar9330
30d86ba47f79d566fffe9ba577caf247d06a3796	asoc core change representation is used for mixer controls where the bits are within one register assign to be the same as for these types with this change we can tell if the mixer in question is mono is stereo within single register is stereo in two registers the patch provide a small inline function to query if the mixer is stereo or mono
f4c96e0120cf8fe75ce2706eb8de8dc1e9fd17ef	staging comedi das1800 tidy up analog output subdevice init for aesthetics add some whitespace to the subdevice init and rename the function
5e5387df0491679fb1210b231173c5279061e9c4	media media-entity enforce check of interface and links creation drivers should check if interfaces and interface links were created add a must_check for them
fcc0008fd02330f1c539a8dd831b00ca9b998cd8	bump chv pfi credits to __number__ when switch from using __number__ pfi credits to __number__ pfi credits when on chv the spec lists both __number__ and __number__ as suggested values but based on feedback from hardware folks we should actually be using __number__ originally i picked the __number__ basically by flipping a coin
dce44e03b0a3448ad11ac6c6e0cbe299e0400791	compat fix sparse address space warnings in compat_sys_old_getrlimit we pass a kernel pointer to sys_old_getrlimit inside a set_fs bracket this is okay so we can safely cast the affected pointer to __user in compat_clock_nanosleep_restart the variable rmtp holds a user pointer annotate it as such both of these warnings are ancient but were reported by fengguang wus test system due to other changes link
41c4c2b50d52346bdc994bd0e0c92f07bb1bb1f8	i40e allow look-up of mac address from open firmware or idprom look up the mac address from the eth_get_platform_mac_address function first before checking what the firmware provides we already handle the case of re-writing the mac-vlan filter so there is no need to add extra code for this however update the comment where we do this to indicate that it does impact the open firmware mac address case change-id i73e59fbe0b0e7e6f3ee9f5170d0bd3a4d5faf4db
599f434817c5cdf1af9fd9e7d4bef69bd0c02796	remove nonsense ib size checks those are just leftovers from the time we wrote the vm updates directly to the ring
16a20b52d1b0c900ea2e7363cf6e10267a445002	scsi ipr driver version bump driver version
6d5b59756033c2a029bde7262bb5f8d45f4ca952	target remove legacy device status check from transport_execute_tasks this patch removes a legacy se_dev_check_online check from within transport_execute_tasks that should no longer be necessary as transport_lookup_cmd_lun is already making this call using transport_cmd_check_stop from transport_execute_tasks should already be checking per se_cmd context for each descriptor upon active shutdown so no need to acquire again while executing se_task submission
b10b7fb31a217084de0cf834d0e72c24d9710015	ath9k p2p_client noa correctly in case we get bss_changed_p2p_ps early from mac80211 we didnt set noa timer correctly while p2p_ps_vif was null
d6dab7dd123ba6a737e69d89c8cca9c6d9b75aa9	hwmon fix pci device reference leak in quirk thankfully this only affects systems with one specific south bridge and is most probably harmless unless the hwmon module is heavily cycled
d294d0286af8afbb714e046a7cb9caa4c44fe133	rtl8187 make cts-to-self protection work cts protection was not working properly because the hw needs rts flag to be asserted and it need also rts duration field to be filled with cts-to-self duration this patch makes the driver to do this
260916dfb48c374f7840f3b86e69afd3afdb6e96	macvlan fix potential use-after free for broadcasts when we postpone a broadcast packet we save the source port in the skb if it is local however the source port can disappear before we get a chance to process the packet this patch fixes this by holding a ref count on the netdev it also delays the modification until after we allocate the new skb as you should not modify shared skbs
606f9067b573183035a0300c4595261ec9575c7d	move to the original info_mask is going away in favour of the broken out versions
e76bea9abd14a3a3af102fe30c5e9dd1b2e44d72	media dib0090 do the right thing if rf_ramp is null as warned by smatch dib0090_pwm_gain_reset error we previously assumed could be null see line __number__
fbf019909173c683d85f7f63b0a33746bf5e4a02	bcma print chip id in a more user-friendly form some chip ids are easier to when printed in a decimal form for example on my bcm53xx arch router this patch replaces found chip with id rev and package with a found chip with id __number__ rev and package
2da78ac3ba577e0e4c9f13cbfce51db5a74f7ba3	eeprom at24 coding style fixes align the arguments in broken lines with the arguments lists opening brackets and make happy by converting unsigned into unsigned int
59027d356666a2c1d576baacb98de9fb30e4c48e	acpi-cpufreq use cpufreq_freq_attr_rw to define the cpb attribute standardise the defintion of the cpb core performance boost attribute in the acpi-cpufreq driver via the cpufreq_freq_attr_rw macro rjw subject and changelog
23f0cb41a20e9850513fa4943f6a19525000cce2	bluetooth remove check for number of amp controller the number of controllers for the amp discover response has already been calculated and since the hci_dev_list lock is held it can not change so there is no need for any extra checks
490ab882e2719f5e809a0cb5af7fda4620b66dca	metag use common outgoing-cpu-notification code this commit removes the open-coded cpu-offline notification with new common code this change avoids calling scheduler code using rcu from an offline cpu that rcu is ignoring this commit is compatible with the existing code in not checking for timeout during a prior offline for a given cpu
66a5ca4b2c62c44692316f27b0fa39a037cce295	pm domains cleanup rename gpd genpd in debugfs interface to keep consisitency with the rest of the file use genpd as the name of the struct generic_pm_domain pointer instead of gpd this is just a rename no functional changes
ea44f4d04c9356dc844af5312a376b6528cec7c5	mwifiex enhance sd8897 mp aggregation limits sd8897 support buffers of and __number__ such ports can be accomodated so basically buffer size in single aggregation is supported
e715a54f4b3fa7d46802984833dc918e44b608e5	greybus es2 fix endian conversion issues convert all usb request fields between cpu and protocol endianness
63633cbf82840d972248f11d2122b261d0d4779a	uprobes introduce filter_chain add the new helper filter_chain currently it is only placeholder the comment explains what is should do we will change it later to consult every consumer to decide whether we need to install the swbp until then it works as if any consumer returns true this matches the current behavior change install_breakpoint to call filter_chain instead of checking null we obviously need this and this equally closes the race with _unregister change remove_breakpoint to call this helper too currently this is pointless because remove_breakpoint is only called when the last consumer goes away but we will change this
9e660acffcd1b5adc4ec1ffba0cbb584f86b8907	blk-throttle make blk_throtl_bio ready for hierarchy currently blk_throtl_bio issues the passed in bio directly if its within limits of its associated tg throtl_grp this behavior becomes incorrect with hierarchy support as the bio should be accounted to and throttled by the ancestor throtl_grps too this patch makes the direct issue path of blk_throtl_bio to loop until it reaches the top-level service_queue or gets throttled if the former the bio can be issued directly otherwise it gets queued at the first layer it was above limits as is always the top-level service queue currently this patch in itself doesnt make any behavior differences
aaf5ec2e51ab1d9c5e962b4728a1107ed3ff7a3e	handle hpd when it has actually occurred writing to pch_port_hotplug for each interrupt is not required handle it only if hpd has actually occurred like we handle other interrupts v2 make few variables local to if block ville v3 add check for both ville while at it remove the redundant check for hotplug_trigger from pch_get_hpd_pins v4 indentation ville
6f9dd30c22da4e48c4b7b837e9641f072e673161	efivars mark local function as static this fixes the following sparse warning warning symbol efivars_sysfs_exit was not declared should it be
93997f6ddb9d574cd58694f13c5b15212927bfa1	keys split call to call_usermodehelper_fns use call_usermodehelper_setup call_usermodehelper_exec instead of calling call_usermodehelper_fns in case theres an oom in this last function the cleanup function may not be called in this case we would miss a call to key_put
52f9a4d71b5ba980ea72013191e907127bc44eeb	fix ltcg memory initialization after suspend some registers were not initialized in init this causes them to be uninitialized after suspend
4ae82e5d23961515796d76850499db3866c5e73b	sc16is7xx use lsr_temt_bit in lsr_temt_bit lsr bit __number__ provides us exactly the information we need to determine if transmission is finished fifo level and shift register empty we can save ourselves reading fifo level explicitly if we use this bit
f77fd8a9b1a8151ae7a0e98a3b3baf8ab639d0e1	media coda fix job_ready debug reporting for bitstream decoding clarify whether job_ready returns false because the context is on hold waiting for new input buffers whether there are not enough input buffers to fill two into the bitstream or whether there is not enough data in the bitstream buffer for the bitstream reader hardware to read a whole frame
f50cccdd03ed4b22960308a5d2499519df13ee9b	switch to pci_alloc_irq_vectors trivial switch to the new api for this driver
3660cd4322fce986689b06225d9c12d77193c252	nfsv4 remove zeroing state kern warnings as of commit we no longer zero the state
ccf0119c95ef0095e7e698a47d01c7bdd43391fe	staging cxt1e1 fix checkpatch error assignment in if condition error in error do not use assignment in if condition
e7b97a4ce74ad44a419759b008edc75390aab20c	arm pxa magician optimize samsung lcd refresh to change the default samsung lcd refresh from an unrealistic to as no video applications on the htc magician can work that fast the optimalization lowers the ram latency at least by
78b035101999d8d071781778c019c387dc8bebb2	reduce r7xx vblank mclk threshold to __number__ most laptops seems to have a vblank period of less than __number__ and mclk switching works fine drop the quirk and set the default threshold to __number__ bug
c4a202c8ae001e7154a5fe22b64f751d37da2122	arm l2c ux500 remove cache size override the cache size should already be present in the l2 cache auxiliary control register it is part of the integration process to configure the hardware ip most platforms get this right yet still many cargo-cult program and assume that they always need specifying to the l2 cache code remove them so we can find out which really need this
a1eacd79a602707f97201edbac9a03edaaea1847	arm ep93xx use gpio_led_register_device use gpio_led_register_device to register the two leds connected to the ep93xx since this is a common feature for all ep93xx based boards create a new kconfig option ep93xx_soc_common to select the leds_gpio_register feature the struct gpio_led and struct gpio_led_platform_data variables have been changed to const struct because of commit leds make const they have also been marked as __initconst because the helper function gpio_led_register_device makes a deep copy of the platform data to allow it to live in init memory commit leds provide helper to register leds-gpio devices
87fc0ad2ad8a15de653f4cef7760fa35e689077f	treat size mismatch as a warning not an error in commit account for pmbr size in lba we started treating bad sizes in lba field of the partition that has the gpt protective as errors however we may run into these bad sizes in the real world if someone uses dd to copy an image from a smaller disk to a bigger disk since this case used to work even without using force_gpt keep it working and treat the size mismatch as a warning instead of an error
687a040038fb92c764adbb349ca132226677b417	drm plane check crtc coordinates against integer overflows in setplane ioctl help drivers a little by guaranteeing that and dont overflow
4e85e3d92fd1b52989882062f5cb143a31375b62	scsi qla2xxx check for scsi status on underruns
bc758133ed73d4b06952bec21da23e28e62bf3ba	do not enable irqs over calibrate_delay we should not ever enable irqs until were fully set up this opens up a window where interrupts can hit the cpu and interrupts can do wakeups wakeups need state that isnt set-up yet in particular this cpu isnt elegible to run tasks so if any cpu-affine task that got created in cpu_up_prepare manages to get a wakeup its affinity mask will get broken and well run into lots of interesting problems link
302beda9830f656c98afb25e26e94602b7a83fea	usb chipidea usbmisc_imx6q staticize staticize to fix the following sparse warnings warning symbol usbmisc_imx6q_drv_init was not declared should it be warning symbol usbmisc_imx6q_drv_exit was not declared should it be
7ad4e7f09372946d1bfd5359c45ccce024d0689e	fix bug that dpm funcs in missing in dpm module sysfs init func move to late_init from sw_init change-id ice4a73212d8e3106d05f04a27043820ffd32929e
ebe937f74b8a72cf3ceeae5c2194a160bb092901	bluetooth remove the device from the list in the destructor the current code removes the device from the device list in several places do it only in the destructor instead and in the error path of rfcomm_add_dev if the device couldnt be initialized
ad07d8b489b07510d98773472d2a3023701f88b6	extcon max8997 fix checkpatch warning fixes the following warning warning space prohibited before semicolon
2ebfaf5f10c6f00d4232f741c82c421eca8ae784	call drm_vblank_cleanup earlier at unload in its current place it just segfaults while trying to access the crtc structures __float__ call trace __float__ __address__ i915 __float__ __address__ drm __float__ __address__ drm __float__ __address__ i915 __float__ __address__ drm __float__ __address__ drm __float__ __address__ drm __float__ __address__ i915 __float__ __address__ drm __float__ __address__ drm __float__ __address__ i915 __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ drm __float__ __address__ i915 __float__ __address__ __float__ __address__ __float__ __address__ this means it has to be before intel_modeset_cleanup which cleans the crtc structures but if we move it to before intel_fbdev_fini we get warns because intel_fbdev_fini still tries to use the vblanks so the only acceptable point for drm_vblank_cleanup seems to be this place related commit commit cbb47d179fb345c579cd8cd884693903fceed26a author chris wilson chris-wilson.co.uk date mon sep __number__ __number__ add some missing steps to i915_driver_load error path testsuite bugzilla bugzilla
07d0320a86d63937ac13ab81b38949456ac2be0a	media media radio si470x radio-si470x-usb dont print error when allocating urb fails kmalloc will print enough information in case of failure
f831de1023d981859870b073796308c25295926c	staging comedi adv_pci1710 use comedi_async scans_done to detect eoa remove the private data member ai_act_scan and use the comedi_async scans_done member to detect the end-of-acquisition
53759be99772f39db5148a7066a768066592a1e7	net remove return value from list_netdevice the return value from list_netdevice is not used and no need so remove it
127d2868484b9769e08a8353e9e43023dcb8b9b3	power generic-adc-battery use to_delayed_work use to_delayed_work instead of open-coding it
d8b1e34e248d89f43bab18704894d537dc0b497e	mtd initialize buffer for whole next page fix do block-buffer initialize for the whole next page to zero
b7ac233515c6263d6cb471d9e0f57bdd7ea36894	ocfs2 cleanup unused paramters in ocfs2_calc_new_backup_super parameters new_clusters and first_new_cluster are not used in ocfs2_update_last_group_and_inode so remove them
320e14b8db51a2d635897d521db4e5c79c3a8390	ath10k fix some pci issues in some cases the device ends up sleeping while ath10k didnt expect it to leading to reading garbage from registers when shared irqs are used and the driver is in powered down state this effectively makes the device remain awake all the time even when all interfaces are down
f285f1610341af4181791938777e0affb5531278	asoc rt5677 remove null test for desc before gpiod_set_value_cansleep call its safe to call gpiod_set_value_cansleep with null desc
75b9b61bb8a18e75afe7b10dd55681e748fa27df	drivers net ethernet ti davinci_emac fix usage of cpdma_check_free_tx_desc fix which was done in the following commit in cpsw driver has to be taken forward to davinci emac driver as well commit d35162f89b8f00537d7b240b76d2d0e8b8d29aa0 author daniel mack gmail.com date tue mar __number__ __number__ __number__ net ethernet cpsw fix usage of cpdma_check_free_tx_desc commit fae50823d0 net ethernet davinci_cpdma add boundary for rx and tx descriptors introduced a function to check the current allocation state of tx packets the return value is taken into account to stop the netqork queue on the adapter in case there are no free slots however cpdma_check_free_tx_desc returns true if there is room in the bitmap not false so the usage of the function is wrong
48a0cc139fb89590fd66eea11b626b9b9f6b8e9d	fix indentation make the indentation of the source code consistent detected by smatch
a1459c1c9ebcd72f3d488fd10673e64b2bfcbd27	net phy spi_ks8895 dont leak references to spi devices the ks8895 driver is using spi_dev_get apparently just to take a copy of the spi device used to instantiate it but never calls spi_dev_put to free it since the device is guaranteed to exist between probe and remove there should be no need for the driver to take an extra reference to it so fix the leak by just using a straight assignment
158c776dba1f6b5eb2e3d5327cda719dc4820c1c	iw_cxgb4 pass the in connect reply events this allows client ulps to get the negotiated which is useful to avoid stalling the sq due to exceeding the ord
7a401744d517864f8f2f2afba589e58a71d03aa6	tools hv vssdaemon report freeze errors when ioctlfd fifreeze __number__ results in an error we cannot report it to syslog instantly since that can cause write to a frozen disk however the name of the filesystem which caused the error and errno are valuable and we would like to get a nice human-readable message in the log save errno before calling vss_operatevss_op_thaw and report the error right after unfortunately fithaw errors cannot be reported the same way as we need to finish thawing all filesystems before calling syslog we should also avoid calling endmntent for the second time in case we encountered an error during freezing of as it usually results in segsegv
9fdc723abf50e3317387f712c5c1b70f86ac0d74	ipw2x00 clean up a condition the original condition was page_size len when len page_size is intended this condition is not really sufficient but also not really if len page_size then it we will print a warning message in dmesg but there are no other effects maybe we should just remove the
af1c01349ecc2b8ab2c329e4dbd46e9018469bd1	bluetooth remove unnecessary l2cap channel state check in l2cap_att_channel were only interested in the bt_connected state so this state can directly be passed to l2cap_global_chan_by_scid this way theres no need to do any additional state check later
60884c2767e0d9314a49e1ee7a0661b3464989c1	asoc dapm release lock on error paths we added locking here but there were a couple error paths where we forgot to drop the lock before returning
905cce7f4309f3ec19c1ed67edd68b7e67e88f3e	mtd r852 fix device_create_file usage device_create_file can fail therefore we have to handle this case and abort
d2ef406866620f0450ad0b4c7fb5c2796c7bf245	dont return an invalid speed when a port is down when the ib port is down the active_speed value returned by the mad_ifc command is seven __number__ which isnt among the defined ib speeds in enum ib_port_speed and this invalid speed value is passed up to higher layers or applications who do port query fix that by setting the speed to be sdr the lowest possible when the port is down
c914570f28552eb4ed6f016ec7b1db292a7c924b	dmaengine of bail out early if dmas property is not present and dont print an error not configured is not an error
70164742783c371516199271d923731afc40e25e	refactor this patch abstracts the enable and disable register writes into their own functions in preparation for future changes to use soc specific values for the writes
f709b1824ecc7b005e58028cffe1a455fbcba7d4	staging rtl8723au be consistent and use bit instead of bitx
bf19d51b768ceeccab12f932cac73b60b1d20bab	bluetooth allow l2cap getpeername for bt_config state we have all the necessary remote information for getpeername when we are in the bt_config state so this should be allowed this is particularly important for le sockets where changing the security level will temporarily move the socket into bt_config state
e453f92eec6d72db0d7fe6bab2e0a710dc6cd927	regulator max8649 use devm_regulator_register simplifies the code
3d9b142131ef0cde259dbac5cce36f570fcb4902	netfilter nft_compat call to cleanup entry otherwise the reference to external objects eg modules are not released when the rules are removed
4b570521be54666e6ad7e5f47af92fd609fbd8b5	blk-mq request initialization optimizations we currently clear a lot more than we need to so make that a bit more clever make some of the init dependent on features like only setting start_time if we are going to use it
ae63bff0d7f333677e7ec532e9c315c74a510403	i40evf make use of bit macro to avoid signed left shift
2a92551845bbbc8421ba908cd14bbdf065e0f454	dell-laptop only enable rfkill on latitudes the rfkill functionality was removed from the dell-laptop driver because it was causing problems on various non latitude models and the blacklist kept growing and growing in the thread discussing this dell mentioned that they only qa the rfkill acpi interface on latitudes and indeed there have been no blacklist entries for latitudes note that the blacklist contained no vostros either and most vostros have a hardware switch too so we could consider supporting vostros with a hardware switch too
16e329aea90e4e404edce2828d701b1a3498487e	net dsa mv88e6xxx reorder definitions the related mv88e6xxx_ops structure was misplaced reorder it correctly to fix this
593ea59de723e32dd584ceb57efcdb96a5bca975	staging comedi dmm32at introduce dmm32at_reset for aesthetics factor the board reset and detection code out of the function
3e83b0ab5086c2a745237f1e6854d588305e8cfd	staging wlan-ng drop void pointer cast void pointers dont need to be cast to other pointer types semantic patch used expression x e type t identifier f t t t e
4339ed82b2fe11689353ab1955c8ee1af8b5c385	drm dont leak path blob property when updating previously when updating the path blob property we would leak the existing one make this symmetrical with the tile and edid blob pointers
a7163784961e513a6d8c60b264737af623d1f33c	arm shmobile r8a7790 add audio ctu support on dtsi
9c0343aa6cbbb62b8b829c87b15839f35bdebbf2	usb kobil_sct remove unused endpoint address remove unused interrupt-in endpoint address from private data
1bec6b333e241a9db47d3939fb08a4e174ece02f	mm memcg inline mem_cgroup_charge_common mem_cgroup_charge_common is used by both cache and anon pages but most of its body only applies to anon pages and the remainder is not worth having in a separate function
4aa3387bc2d56459fdb7da9e47f39d56b46db3a3	staging wilc1000 move handle_scandone function declaration handle_scandone function declaration is moved to front of file
d0b31b8b92fc246bdd2b85bba38a28a8343f4909	staging comedi usbdux generalize the usb_submit_urb functions generalize a helper function to replace
7a7ae4f19280a4da2dfbdca3a414b0fd5fef2cb4	scsi megaraid_sas change build_mpt_mfi_pass_thru to return void code refactoring to build_mpt_mfi_pass_thru to return void
871bdea6f8c64517635bec352b8bec6b72a26d80	handle bad user buffer in ioctl set_get_cmap ignored the result of causing ioctlvt to silently fail another side effect of this calling the pio_cmap ioctl with an invalid buffer would zero the default colormap and the palette for all vts all colors set to black leave the default colormap intact and return when to the userspace buffer fails
7b4e4d31268cbd885782bf3eee8027c852c9d191	drbd drbd_nl_resize fix missing put_ldev on error path
202b56890aead063f90b6995554d4602dbd7752e	mfd wm8994-core dont use managed regulator bulk get api the kernel warns and then crashes today if wm8994_device_init fails after calling devm_regulator_bulk_get that happens because there are multiple devices involved here and the order in which managed resources are freed isnt correct the regulators are added as children of whereas devm_regulator_bulk_get receives as the device though it gets the same regulators which were added as children of earlier during failures the children are removed first and the core eventually calls regulator_unregister for them as regulator_put was never done for them opposite of devm_regulator_bulk_get the kernel warns at and eventually it crashes from debugfs_remove_recursive fix the kernel warnings and crashes by using regulator_bulk_get instead of devm_regulator_bulk_get and explicitly freeing the supplies in exit paths tested on exynos __number__ dual core arm a15 machine
d060c1695345df6c82b5253acb7055698b2bf002	reorganize the overclock code the existing code which i changed last was very convoluted i believe it was attempting to skip the overclock portion if the previous pcode write failed when i last touched the code i was preserving this behavior there is some benefit to doing it that way in that if the first pcode access fails the later is likely invalid having a bit more confidence in my understanding of how things work i now feel its better to have clear readable code than to try to skip over this one operation in an unusual case
2902bc66fa7a6d959e033e5358fd836e2839b5db	net ethernet micrel fix an error code the dma_mapping_error function returns true or false we should return if it there is a dma mapping error
4a74de821af510fcb3224d16ceed6a6609730d9c	warn if we receive any rps interrupts on this extends commit author imre deak intel.com date mon nov __number__ __number__ warn if we receive any gen9 rps interrupts to platforms as suggested by paulo
137b833457864091610ca01d7443a67028a2b3ce	regmap cache use raw to sync rbtrees if we can this will bring no meaningful benefit by itself it is done as a separate commit to aid bisection if there are problems with the following commits adding support for coalescing adjacent writes
6653325a556ef5a838ed7d3a0a6552f0efc72739	cfg80211 replace nokia commit nokia hasnt gotten back to me in over __number__ month for a relicense change request there are only a few changes that they contributed so just reverting their changes but replacing with another set this change replaces this commit commit author kalle valo nokia.com date tue dec __number__ __number__ cfg80211 indent regulatory messages with spaces the regulatory messages in syslog look weird kernel cfg80211 regulatory domain us kernel end_freq bandwidth max_antenna_gain max_eirp kernel khz __number__ khz __number__ khz __number__ mbi __number__ mbm kernel __number__ khz __number__ khz __number__ khz __number__ mbi __number__ mbm kernel __number__ khz __number__ khz __number__ khz __number__ mbi __number__ mbm kernel __number__ khz __number__ khz __number__ khz __number__ mbi __number__ mbm kernel __number__ khz __number__ khz __number__ khz __number__ mbi __number__ mbm kernel khz __number__ khz __number__ khz __number__ mbi __number__ mbm indent them with four spaces instead of the tab character to get prettier output acked luis r. rodriguez atheros.com
53348f27168534561c0c814843bbf181314374f4	bootmem fix __free_pages_bootmem to use properly a226f6c899 frv clean up bootmem allocators page freeing algorithm separated out __free_pages_bootmem from free_all_bootmem_core __free_pages_bootmem takes argument but it assumes is either __number__ or ilog2bits_per_long note that all the current users match that assumption and this doesnt cause actual problems fix it by using __number__ order instead of bits_per_long link
49ba9b1bb3295fa690ae8f5091b093e61acf3ada	drbd remove useless error messages these messages can only trigger in case there is a pretty obvious internal programming error
fb43ceaf1d869215a0e704f0e83be993bdb07f56	staging comedi addi_apci_3120 move start_src check into apci3120_cyclic_ai for aesthetics move the check of the
94fa56a96a39914551694673fdb483b8924b0e56	fix usage message in context_switch when we inverted the behaviour of the flags we forgot to update the usage message
61e15f010e4a3647043e55e41f60197ba4aa9b4f	staging octeon combined seperate strings this patch fixes quoted string split across lines warning in
75365d04cd2d6fe04c9c52c69fd97b2d0a6c82ba	pnp card add missing put_device call this is required so that we give up the last reference to the device
f6baf35f7957aa6986e6897734a0cc4eb442cf94	use default pcibios_enable_device leon only we dont need anything arch-specific in pcibios_enable_device so drop the arch implementation and use the default generic one note that sparc has two pcibios_enable_device implementations other than the one removed here
9b984daec45632c4c1ef6e628dca4d2bc8f544ed	check edp power when doing aux channel communications verify that the edp vdd is on either with the panel being on or with the vdd force-on bit being set this demonstrates that in many instances vdd is not on when needed which leads to failed edid communications
39849d6946a84861a517c09ca0b691ce6d98c7a6	gfs2 add initialization for address space in super block spotted by andy price this should fix the odd messages from lockdep caused by
3c7051d7cc136a6b0293f8e6960f7c61afd6ae08	gpio mc9s08dz60 use devm_kzalloc api
afdf344e08fbec28ab2204a626fa1f260dcb68be	factor out logging mechanism refactor the code here to setup struct mce and call mce_log to log the error were going to reuse this in a later patch as part of the deferred error interrupt enablement no functional change is introduced link
e1960f8c5cd1420dd2ecf0754a136956246365e7	md dont allow to be set for device in an active array if an array is active devices can be marked faulty but simply removing the sync flag is wrong that only makes sense for an array which is not active and is probably only useful for testing anyway
582e20a03b9bcbddaeaffb38800323ddcc4a9173	nfc nci remove dead code the n_nci ldisc does not define a flush_buffer ldisc method so the check when opening the ldisc is always false
159a8e92fdf6967cb67e7639832f819fbc607242	pty mark pty_resize static nothing outside of references pty_resize
413f930eab1111e7591b0494e689309f1dbd34a0	staging wilc1000 hif_sema_driver can be static
5b64127e0529387d4538ecc3dfd49248baf619c5	convert non-modular to use builtin_platform_driver this file depends on a kconfig option which is a bool so we use the appropriate registration function which avoids us relying on an implicit inclusion of which we are doing currently while this currently works we really dont want to be including the header in non-modular code which wed be forced to do pending some upcoming code relocation from into so we fix it now by using the non-modular equivalent
5e011b433639a5485480a8abc9f5b70a049057cb	staging vt6655 device_alloc_rx_buf replace prdinfo with rd_info removing camel case
eb179d3975c804ad98eaa403425eb6e48cfd3cc2	libceph remove redundant declaration ceph_release_page_vector was defined twice in
b0bfdfc2bf7fa85317824c6a389fc373dfcef5bc	fix opal user range check and unused variables fixes check that the opal user is within the range and cleans up unused method variables
07968fe4acec6d49e39520ef407ea7f6874b7c2e	use gen_pool_dma_alloc to allocate iram buffer since gen_pool_dma_alloc is introduced we implement it to simplify code
02e0bea6c83c657617195135667e6a3f50d3bfb3	pci implement num_vf bus type callback
75be3e24eeedbc9ec5faf3483fe9b449abec94e8	brcmsmac reduce number of entries in tx dma rings currently up to __number__ frames can be queued for each dma ring this is excessive and now that we have better flow control we can get by with less experimentation has shown __number__ to work well
8b3aff7cdd6c2e7c9a3df755b23525e393195102	media omap3isp avoid a bug_on in media_entity_create_link if an uninitialised v4l2_subdev struct was passed to media_entity_create_link one of the bug_ons in the function will be hit since will be zero avoid this by checking whether the num_pads field is non-zero for the interface
82b906d6550ee5fe0d5553359b3c9692dd0aed31	pnfsblock set tk_status to pnfs_error to pass the io status to upper layer
5eabf82ecfc2300c05ad4dcdeca0f71015e51e36	pwm ep93xx split module author names split module author names in order to fix the following checkpatch warning warning quoted string split across lines
8c0614ca312c847ca5409ea11c39434dec69631d	usb chipidea fix return value check in ci_hdrc_pci_probe in case of error the function usb_phy_generic_register returns err_ptr and never returns null the null test in the return value check should be replaced with is_err
2d3c2260e7ef0b21f7f0db0fbfee0b092e1202f8	bluetooth dont try to reject failed le connections the check for the blacklist in hci_le_conn_complete_evt should be when we know that we have an actual successful connection being non-zero this patch fixes this ordering
fc33cc72423ed3474cd51bc8bd7c1cdc22a78e1a	netem fix build error on arches error __udivdi3 undefined
3174dd33fa8316d29f238f093291ca9bb25e6f58	nvme fix a race condition related to stopping queues avoid that nvme_queue_rq is still running when nvme_stop_queues returns
a72d9002f80bffd7e4c7d60e5a9caa0cddffe894	is used without initialized if call xen_vbd_translate failed the will be not initialized use instead still better to print relative info note that before commit dont trust the handle from the frontend the value bogus as it was the guest provided value from rather than the actual device
0463585ce5186e617aa5a04fa9f3f27160810a21	asoc wm9090 remove redundant oom message let memory subsystem handle the error logging
104c7949e20e84dedddb66c1fc4b599931382d21	arm omap fix return value check in beagle_opp_init in case of error the function omap_device_get_by_hwmod_name returns err_ptr not null pointer the null test in the return value check should be replaced with is_err dpatch engine is used to auto generated this patch
bb296b48038010dee1c55aa24264f3205ec949fd	greybus added warning message in case of missing widget additional warning message added to notify in case above layer tries to access widget that is already removed from the list
b4d18311d37b0b1b370a1ef3e4de92b97930f0a8	cgroup_freezer prepare update_if_frozen for locking change locking will change such that migration can happen while is in progress this means that update_if_frozen can no longer assume that all tasks in the cgroup coform to the current freezer state newly migrated tasks which havent finished freezer_attach yet might be in any state this patch updates update_if_frozen such that it no longer verifies task states against freezer state it now simply decides whether freezing stage is complete this removal of verification makes it meaningless to call from freezer_change_state drop it and move the fast exit test from freezer_read the only left caller to update_if_frozen
0a8d8a8667c7e66f4fa2498be18d47f8b296b430	setup clipped coordinates during fb reconstruction v2 plane state objects contain two copies of coordinates the original requested by userspace coordinates in the base drm_plane_state object and a second clipped copy what we actually want to program to the hardware in intel_plane_state weve only been setting up the former set of values during boot time fb reconstruction but we should really be initializing both note that the code here probably still needs some more work since we make a lot of assumptions about how the bios programmed the hardware that may not always be true especially on primary plane might not be positioned at primary plane could have been rotated by the bios primary plane might be scaled the bios fb might be a single extended mode fb that spans multiple displays v2 commit message description of assumptions we make reviewed-by(v1) ville syrjl linux.intel.com link
b55dd64720919ba8d6830fbaec9e779e4bdb0ae0	byt_gpu_freq can be static
84ccfc371f4a8d1ff86efd7ca7914e33b90325c2	spi fsl-espi improve return value handling in fsl_espi_bufs return a proper status code from fsl_espi_bufs instead of returning the number of remaining words and let the caller evaluate it
94df1040b1e6aacd8dec0ba3c61d7e77cd695f26	perf tests decompress kernel module before objdump if a kernel modules is compressed it should be decompressed before running objdump to parse binary data correctly this fixes a failure of object code reading test for me link
78f02cac9515127efd7dc45e82bbbdb969b3302a	h8300 zimage fix stack fix configure base address
29e477f23598b850b08bae22d142bd3abf491248	pm devfreq exynos-ppmu fix module autoload if the driver is built as a module autoload wont work because the module alias information is not filled so user-space cant match the registered device with the corresponding module export the module alias information using the module_device_table macro before this patch modinfo grep alias after this patch modinfo grep alias alias alias alias alias
5d7696bcce37010400412bbff53996b242556923	staging ks7010 indent
6de58dd625a7645008c5c450bf97a5793faf58c3	input synaptics refactor y inversion synaptics touchpads report increasing y from bottom to top this is inverted from normal userspace top of screen is __number__ coordinates thus the kernel driver reports inverted y coordinates to userspace this patch refactors this inversion
f7b488e23cadc76503cbf37d7c432cfb0a77f41f	acpica resources support for acpi __number__ wake bit in extendedinterrupt descriptor add support to both get and set the extended share flags for the interrupt resource descriptor reported by aaron lu
0db01ed89ee9a5474a6bbf55bda75baddf94b623	staging comedi dmm32at rename dmm32at_daclmsb for aesthetics rename these defines used for the registers
7dfb6d2ec4547a6fd83571f6beeee47db9184847	staging rtl8712 cleanup of timeout conversions this is only an api consolidation to make things more readable instances of var hz __number__ are replaced by msecs_to_jiffiesvar as msecs_to_jiffies will return __number__ if it is passed a value __number__ the __number__ check is not needed
93edc8bd7750ff3cae088bfca453ea73dc9004a4	kick the pv cpu unconditionally when _q_slow_val if _q_slow_val has been set the vcpu state must have been vcpu_hashed the extra check at the end of __pv_queued_spin_unlock is unnecessary and can be removed link
909633957d85561dab7655d69a9d17dd16231d92	arm64 fix return code check when changing emulation handler update_insn_emulation_mode returns __number__ on success so we should be treating any non-zero values as failure rather than the other way around otherwise writes to the sysctl file controlling the emulation are ignored and immediately rolled back
d04a75af450782db2937603bb6706bf6fa7c6f37	clk renesas cpg-mssr use always-on governor for clock domain as a pure clock domain does not have the concept of powering the domain itself the driver does not provide power_off and power_on callbacks however the genpd core may still perform a dummy power down causing to report the domains status being off-0 use the always-on governor to make sure the domain is never powered down and always shows up as on in pm_genpd_summary
f5daff3f7913b7cdddf0c2a27f113646090cd2c1	staging sm7xxfb fix alignment fix the alignment
4b973ee05673497de678338c00ade803e45f9bfa	alsa convert to module_platform_driver this reduces some boilerplate code
0856eba75cc65080997601aa6e5d02b46c8314d9	omapdss hdmi fix regsd write hdmi plls regsd field is only set by the driver if the plls output clock is over this is clearly an error as regsd should be set always
1f2e651c9aa4be5ace193b6a8f48e4b068a60207	mac80211 add debugfs file for last rx rate add a debugfs file showing the rate at which the last packet is received fix whitespace
b52e69217b5a02469f8431934f59c0d7103dd32f	tcp md5 fix a typo in tcp_v4_md5_lookup lookup key for tcp_md5_do_lookup has to be taken from addr_sk not sk which can be the listener
552dd7959c7d2c4f60ea4fc1f06985db76ec2beb	gpio da9055 use gpiochip data pointer this makes the driver use the data pointer added to the gpio_chip to store a pointer to the state container instead of relying on container_of
bff5e48e106b919492424f36a5b6a1bb21aa5c77	remove __cpuinit section tag that crept back in we removed __cpuinit support leaving no-op stubs quite some time ago however this one crept back in as of commit a803f0261bb2bb57aab sched initialize on processor start since we want to clobber the stubs too get this removed now
483ace0605a8e718e35db6d2219b9a7d08c8c28b	staging lustre change unsigned to unsigned int fixes warning warning prefer unsigned int to bare use of unsigned
829f0e97cc03b0c834cc5f86ff72b2ec389020ef	power ipaq_micro_battery remove deprecated create_singlethread_workqueue the workqueue wq is used for handling battery related tasks it has a single work item viz and hence it doesnt require execution ordering hence alloc_workqueue has been used to replace the deprecated create_singlethread_workqueue instance the wq_mem_reclaim flag has been set to ensure forward progress under memory pressure since there is a single work item explicit concurrency limit is unnecessary here
1d6ad05777c27c7e8cfb32997a78c8252b85fbb4	mmc sdhci-iproc clean up platform allocations if shdci init fails this patch adopts the changes from mmc sdhci-bcm2835 clean up platform allocations if sdhci init fails to sdhci-iproc
22b68b93ae2506bd56ee3bf232a51bc8ab955b56	rtlwifi fix kernel oops introduced with commit e49656147359 with commit e49656147359 use dev_kfree_skb_irq instead of kfree_skb the method used to free an skb was changed because the kfree_skb was inside a spinlock what was forgotten is that kfree_skb guards against a null value for the argument routine dev_kfree_skb_irq does not and a test is needed to prevent kernel panics
e4e8d968a319a311908b2dd8f241442b5c529b5f	staging ks7010 remove unused function in we get __number__ warning when building kernel with warning no previous prototype for ks_wlan_reset in fact these functions are unused in but should be removed so this patch removes the unused function
aac2e54f9eb63d5cfaac1a115a939508712050da	avoid nonatomic memory alloc under spinlock ll_intent_drop_lock may sleep in memory allocation which should not be called inside spinlock reviewed-on intel-bug-id
24be409beede1a7cbe95b1740c4cdade3b6a8187	return einval when caller specifies too many sges the returned value should be einval because it is caused by wrong caller and not by internal overflow event
4662e5ef54f01ff5333474a825f90ab74f95bc3d	usb phy reordering of otg fsm variables reorder variables in struct otg_fsm as they appear in otg and eh supplement to
94aae4caacda89a1bdb7198b260f4ca3595b7ed7	target simplify xcopy lookup helper target_xcopy_locate_se_dev_e4 is used to locate an se_dev based on the wwn provided with the xcopy request remove a couple of unneeded arguments and rely on the caller for the test
2572c24ca9f4a427b876f3e7718097e9c4b9ddc7	use hweight for calculating num_rbs match what we do for other asics
6f99a9160f1947569bc17b85fbe7353a1090dfe7	hpsa remove incorrect bug_ons checking for raid offload enable in set_encrypt_ioaccel2 and in hpsa_scsi_ioaccel_raid_map there were bug_ons that looked like this but in hpsa_ack_ctlr_events we have this stop sending new raid offload reqs via the io accelerator for i __number__ i __number__ hpsa_drain_accel_commandsh so we set offload_enabled __number__ for all drives then do this drain_accel_commands so that means accel commands could still be in flight ie perhaps having just been submitted into hpsa_scsi_ioaccel_raid_map concurrent with having just been set to zero
41b4e9a194f69b1c945038c559ea407a6b383e81	mmc atmel-mci fix incorrect setting of to null setting to null is incorrect sequence in state_sending_stop state of fsm this early setting leads to the skip of dma_unmap_sg in atmci_dma_cleanup which is a bug idea taken from dw_mmc by seungwon jeon
1ad292b51e358c8b6e9b8966889c21f1fe705489	get_plane_config for i9xx v13 read out the current plane configuration at init time into a new plane_config structure this allows us to track any existing framebuffers attached to the plane and potentially re-use them in our fbdev code for a smooth handoff v2 update for new pitch_for_width function jesse comment how get_plane_config works with shared fbs jesse v3 ville use pipesrc ville fix fourcc comment bob use drm_format_plane_cpp ville v4 use fb for tracking fb data object ville v5 fix up gen2 pitch limits ville v6 read out stride as well daniel v7 split out init ordering changes daniel dont fetch config if v8 use proper height in get_plane_config chris v9 fix config_fb check for modular configs jani v10 add comment about stolen allocation stomping v11 drop hw state readout hunk daniel v12 handle tiled bios fbs kristian pull out common bits jesse v13 move fb obj alloc out to _init
609fb07b2bdebe5d2c6a9da7e9d8e05155086418	megaraid_sas version update
fb5bb60cd004a00c1d11db680a37942ecdedb1c5	memblock dont silently align size in memblock_virt_alloc in original __alloc_memory_core_early for bootmem wrapper we do not align size silently we should not do that as later free with old size will leave some range not freed its obvious that code is copied from memblock_base_nid and that code is wrong for the same reason also remove that in memblock_alloc_base
fe5295374ec9ac56ba3b619c5c1792b3fd66d859	virtio_console free buffer if splice fails free the allocated scatter list if send_pages fails in function port_splice_write
055e0ad01418bc4d68106df8c8a2d0338fbf67ba	sfc correct mac filter bitfield definitions the rmft_dest_mac and tmft_src_mac register fields were previously documented as __number__ bits wide whereas a mac address has __number__ bits thankfully the hardware uses the correct width and the driver has used separate definitions that divide each of these into and fields fix the initial definitions for these fields and rewrite the latter definitions to use them
86a9c4a28b2c1a367d340db53570ebea02f33fca	brcm80211 fix null pointer access do not unconditionally access the chan variable in brcmf_cfg80211_mgmt_tx as it may be null use freq instead introduced by c2ff8cad64233b539c71a27e2a6e324001143ef0 brcm80211 make mgmt_tx in brcmfmac accept a null channel
629c1b9207386b00abd6453b72a19b15cd2202f8	handle sync polarity kill off some unknown
6cca7289d5cba80d61da711205cd230fc637e2e3	tipc use inlined rhashtable interface this patch converts tipc to the inlined rhashtable interface
ba5049945421b8d2f3e2af786a15d13b82316503	net macb replace macb_writel call by queue_writel to update queue isr macb_interrupt should not use macb_writelbp isr but only queue_writelqueue isr there is one irq and one set of ier idr __number__ registers per queue on gem hardware though only queue0 is actually used for now to receive frames other queues can already be used to transmit frames the queue_readl and queue_writel helper macros are designed to access the relevant irq registers __number__ isr interrupt status register ier interrupt enable register idr interrupt disable register imr interrupt mask register
f45787c687adcf3c01599bf8f32667fab5271e0d	staging comedi vmk80xx cleanup the comedi_lrange tables the vmk8055_range table is a duplicate of the comedi core provided range_unipolar5 table use that instead for aesthetic reasons clean up the formating of the vmk8061_range table
345efee3541f5931fbbd0f0bcebe9baa3ff2f5c2	mmc dw_mmc remove repetitive clear interrupt dw_mci_probe clear interrupts and disable all interrupts firstly while it clear interrupt again before enable some interrupts we cant see any reason to clear it twice here so remove the second one
43d8a72cd985ca5279a9eb84d61fcbb3ee3d3774	random remove variable limit the variable limit was used to identify the nonblocking pools unlimited random number generation as the nonblocking pool is a thing of the past remove the limit variable and any conditions around it preserve the branches for limit __number__
91d8f0416f3989e248d3a3d3efb821eda10a85d2	remove pointless early_printk message earlyprintk is not initialised yet by the setup_early_printk function so we can remove it link
58b21c22c66dd223d27405d54b47102a27bda0b7	fix crash in eviction from qxl_release_fence_buffer_objects this crash was already here before the conversion but qxl never leaked hard enough to hit this
24d0d03c2edcd24906cf04fe4f41fa619f1fe632	apparmorfs replace current_time with current_time current_time macro is not y2038 safe on __number__ bit systems the patch replaces all the uses of current_time by current_time this is also in preparation for the patch that transitions vfs timestamps to use __number__ bit time and hence make them y2038 safe current_time is also planned to be transitioned to y2038 safe behavior along with this change current_time macro will be deleted before merging the aforementioned change link
a164cee111085f9ee77f6038f006658249073523	bluetooth allow setting bt_security_fips with setsockopt update the security level check to allow setting bt_security_fips for an l2cap socket
1db51e6fb0f5596518975fd1b2f7ef050e9d58ef	asoc wm_adsp remove unused the kcontrol pointer in wm_coeff_ctl is not used now
afca99a2bf2cef3a6e5e574cb7bc0e0bdf5b3ffa	media tm6000-dvb fix module unload dvb_unregister_frontend has to be called before detach otherwise the unregister call will segfault this made tm6000-dvb module unload unusable
56a5ca8409072d9d982d0904f60a4a6096d2dec0	batman-adv remove useless find_router look up this is not used anymore with the new fragmentation and it might actually mess up the bonding code because find_router assumes it is only called once per packet
3bf17472226b0041b0c61363bd57a5cadbe620c4	iommu dmar extend struct irte for vt-d posted-interrupts the irte interrupt remapping table entry is either an entry for remapped or for posted interrupts the hardware distiguishes between remapped and posted entries by bit __number__ in the low __number__ bit of the irte if cleared the entry is remapped if set its posted the entries have common fields and dependent on the posted bit fields with different meanings extend struct irte to handle the differences between remap and posted mode by having three structs in the unions shared remapped posted link
422476c4641ec65906406f3d266b69a91dd3170c	dax move put_unlocked_mapping_entry in no functional change the static functions put_locked_mapping_entry and put_unlocked_mapping_entry will soon be used in error cases in grab_mapping_entry so move their definitions above this function
bc1d57fe5ff7574e6cf1d53bd88edbd87e127420	input elants_i2c get product id on recovery mode for fw update we use hw version to construct name of file holding touchscreen firmware so lets try reading it even if touchscreen initialization fails the firmware supports reading id even when device is in mode
d0bc218b0a75bbddc9ef54aac6d9cc65a7a58661	staging fix typo in correct spelling suppported to supported in
fb066adadd224d5e46320b3fa7a80311c09be0d9	mtd nand_base removed unnecessary command masking nand command passed to cmd_ctrl is masked with this patch removes this since masking is not necessary and masking is not performed in other places for same call
5d348401ed03450395ce674594c1c08c7d85bd8d	arm add __initconst for fec pdata
e1412d85a8e50d2b22970df29a804477582a6637	mmc mmci add bus support in variant data this patch adds bus enable to variant structure giving more flexibility to the driver to support more socs which have different clock register layout without this patch other new socs like qcom will have to add more code to special case them ulf hansson resolved conflict
bbbaa37428abac025fe11b83933473888ddf6fc1	crypto omap-aes use pm_runtime_put instead of pm_runtime_put_sync in tasklet after dma is complete the omap_aes_finish_req function is called as a part of the done_task tasklet during this its atomic and any calls to pm functions should not assume they wont sleep the patch replaces a call to pm_runtime_put_sync which can sleep with pm_runtime_put thus fixing a kernel panic observed on am33xx soc during aes operation tested on an am33xx soc device beaglebone board to reproduce the problem i used the tcrypt kernel module as modprobe tcrypt
71098615730f01cd5e70c7777b691572ee2bafb0	ath10k expand the wmi mgmt queue limit to __number__ it was obseverd many times the short queue limit can be easily exceeded in case of ap multiple bssid scenarios ath10k wmi mgmt_tx queue limit reached this was leading to tx packets drops this patch expands the queue limit to __number__ after many stress experiments high traffic and lot of management frames in the air the new value seems to fix the problem on platforms with limited resources
2229875dc00f38b95d04fecfc67858ba2221a563	mfd arizona factor out hard reset into helper functions this patch adds functions for enabling and disabling the physical reset line this will be helpful in future refactoring
f8e33475b0da98c4bffc91017a3fbbfb443a7bdb	fix processor numbers in opal icp when using the opal icp backend we incorrectly pass linux cpu numbers rather than hw cpu numbers to opal
486d2e632ca157558a738626c092973f309f3b45	virtio_balloon enable vqs early on restore virtio spec requires drivers to set driver_ok before using vqs this is set automatically after resume returns virtio balloon violated this rule by adding bufs which causes the vq to be used directly within restore to fix call virtio_device_ready before using vq
192539f4ce36e5b80b9eb1f4ccd759a92eed2ff9	iw_cxgb4 clean up send_connect clean up send_connect and make use of t6 specific active open request struct
c188fdc8176a8cb18b5d81cccac590311251208e	greybus audio reduce granularity earlier protects almost complete module function this can be reduced to specific operations
e2f55b54556ae6a3a365afead6bc8e46a2013d7f	video s3c-fb dont keep device runtime active when open allow the controller to be runtime suspended when the screen is blanked by not taking a runtime reference while the device is open this allows greater system wide power savings when used with a standard application layer and ensures that the screen does not blank unless requested
cb2da43e3d02b745408252fe4c447b23b1f4fc7b	blk-mq simplify blk_mq_hw_sysfs_cpus_show now that we have a cpu mask of cpus that are mapped to a specific hardware queue we can just iterate that to display the sysfs file
b328f3ce993c647c055f917afa947d6c2369461d	pci xilinx dispose of msi virtual irq dispose of virtual irq being created for msi interrupts
2854903ad1329d09d7ec35639fff0949e45d496d	arm mach-shmobile default to no earlytimer now when all socs and boards are converted to use shmobile_earlytimer_init change the default behavior of from using early timer to do nothing which is suitable for upcoming dt support
0813fbc913582feef688265f2a5d7c077d6a3d1f	netfilter nfnetlink_log use gfp_nowarn for skb allocation since the code explicilty falls back to a smaller allocation when the large one fails we shouldnt complain when that happens
df452fa120cfe0ac6aa4255425b303a9863e3cc1	staging hv vmbus directly invoke the channel callback now directly invoke the channel callback
b73690c8f8b5d12ed32e10fb787f54e4b4ca232b	arm kirkwood support basic hotplug for pci-e unconditionally register the pci-e bus even if the link is currently down when the link is brought up the bus can be scanned through or otherwise since the hw has no interrupt for link up userspace will have to take care of the timing an earlier version of this was contingent on config_hotplug but that is being removed from the kernel this also fixes printing the link message to be displayed on one line structured logging broke
57de31f6351ecad9212a26d2112b546e4c8b4a5b	mmc core use generic cmd6 time while switching to emmc hs200 mode conform to the emmc spec and use the cmd6 generic timeout from the ext_csd register when switching to hs200 mode
f7c799e950f96191a16f18606e43e6f861b2a361	dmaengine dw we do support merrifield soc in pci mode intel merrifield platform contains intel integrated dma idma which has a slightly different register mapping some bits in and channel registers and has to use platform data since there is no autoconfiguration the idma specification is available in the publicly available documentation for intel braswell and baytrail socs as lpe audio dma
9d52ce4bd3fa9e0cf1658791f2c680e20e0598a1	tipc ensure network address change doesnt impact configuration service enhances command validation done by tipcs configuration service so that it works properly even if the nodes network address is changed in mid-operation the default node address of is now recognized as an alias for this node even after a new network address has been assigned
2234a722394cf5b9fdcbf5459678fdee450e54f4	gianfar convert to skb paged frag api
7bb5d75ce91ca3725256c0d502624ed697231cde	arm edma remove unused transfer controller handlers fix build on omap the irqs are undefined on am33xx these error interrupt handlers were hardcoded as disabled so since they are unused code simply remove them
74e871ac6cb17f67cbefb569d98a8d05de666e07	rcu rename empty to empty_norm in preparation for boost rework this commit undertakes a simple variable renaming to make way for some rework of rcu priority boosting
656e3435752a66810ee0f8bcb8e012e9e6f26a42	asoc tpa6130a2 remove redundant oom message let memory subsystem handle the error logging
aa45590ae8581e25b909f2fed591c3499cd8e352	input soc_button_array use dev instead of dereferencing it use local variable dev instead of dereferencing it several times
1e6881c36ebbfd47298c42fa82b544c4988933fa	fuse cleanup request_end now that we atomically test having already done everything we no longer need other protection
2057020db384cb971cfd51296426f447e6d66b64	asoc rockchip spdif convert to use devm_snd_dmaengine_pcm_register use resource managed api then we can remove snd_dmaengine_pcm_unregister and snd_soc_unregister_component calls in error path and
5f8e7f17f6f5472d8029c22b1b8d3f9a4b1c8dff	libata enable lba flag in taskfile for ata_scsi_pass_thru enable lba in taskfile flags for ata_scsi_pass_thru
84ee353df07e9beec200da44ac70f583449fffb1	add __init to init_inodecache init_inodecache is only called by __init init_minix_fs
6b5738c2d973cdcbc93a2fcd74600e5934daabad	arm samsung use generic s3c_set_platdata for fb
4ce944074e5e2cb7ee48ff36608d65d0bc9c7647	mmc cavium support ddr mode for emmc devices add support for switching to ddr mode for emmc devices
1f8d271385d542796ab7917692908beef10acdc9	mips lasat remove unused function from sysctl code remove the function proc_dolasatint that is not used anywhere this was partially found by using a static code analysis program called cppcheck patchwork
ec31eed754e2fd43938e72ef9e1b60aa55ccb417	crypto caam add missing key_dma unmap struct caam_ctx needs to be unmapped when context is cleaned up
5137c8ca4be8cd54c1bc74bc1f163a57c7871b38	read hpd gpio in is_connected callback this patch adds a gpio read of hpd during the is_connected callback this fixes the case where hdmi is off going into suspend and the cable is plugged in while suspended in this case the hpd interrupt does not fire and is_connected will return false
f26d29e34e203296140334087fa3c81168626d76	usb gadget udc avoid dereference before null check in ep_queue coverity cid __number__
7282ac396ea617a0a4f8f89389f84690f8431d7d	batman-adv place kref_get for bla_claim near use it is hard to understand why the refcnt is increased when it isnt done near the actual place the new reference is used so using kref_get right before the place which requires the reference and in the same function helps to avoid accidental problems caused by incorrect reference counting
a281b788d6070526c63b7bbc43dcbe5906d3f487	retrieve first msi irq from msi_desc rather than pci_dev retrieve the first msi irq to compute the msi index from struct msi_desc rather than the struct pci_dev to avoid an additional memory access
1b97c2206474ca5dd7dad7cf40ea259d3d7489c2	staging rtl8192e rename dm_txpower_reset_recovery use naming schema found in other rtlwifi devices rename dm_txpower_reset_recovery to _rtl92e_dm_tx_power_reset_recovery
ce34fddb5bafb424a4aaa9f403feb7dbe776c7d1	change maps_open to use __seq_open_private cleanup and preparation maps_open can use __seq_open_private like proc_maps_open does deuglify
9451df0ee893dbdfca626f2888654f321d241460	usb staging media as102 convert to use module_usb_driver the as102 driver can be converted to use module_usb_driver which saves a lot of code and gets rid of an unwanted err call at the same time
479faaf00fde35e80a5be1389938b38e422d799d	acpi battery drop useless return statements
eb8451e0aee1816395506e97965d0917754072de	xtensa export __invalidate_icache_range when modular code calls flush_icache_range error __invalidate_icache_range undefined make1 __modpost error __number__
c1914a0936f79ed0236f670122e06e36e4d332ee	uprobes install_breakpoint should fail if is_swbp_insn t install_breakpoint returns if is_swbp_insnorig_insn t the caller treats this code as success this is doubly wrong the successful return should set uprobe_copy_insn but the real problem is that it shouldnt succeed if the probed insn is int3 the application should get sigtrap this wont happen with uprobe probably we can fix this we can add the uprobe_shared_bp flag and teach to handle this case correctly but this needs some complications and we have other insns which cant be probed lets make a simple fix for now i think this needs a cleanup uprobe_copy_insn should die copy_insn should be called by alloc_uprobe arch_uprobe_analyze_insn depends on ia32_compat but it is called only once link
672a2c87c83649fb0167202342ce85af9a3b4f1c	axonram fix gendisk handling it is invalid to call del_gendisk when is null fix error handling in axon_ram_probe to avoid doing that also del_gendisk does not drop a reference to gendisk allocated by alloc_disk that has to be done by put_disk add that call where needed
46e81af97281fead13612f501798c942dd781e5b	iwlwifi pcie fix unused variable gcc warning in iwl_pcie_int_cause_non_ict trans_pcie is used for lockdep purposes only since this might not be enabled trans_pcie finds itself without user leading to a complaint from gcc avoid using trans_pcie by inlining iwl_trans_get_pcie_trans
b82ed7d6805ef2a31503999edc80787083d4426f	do not return error code in the interrupt handler the interrupt handler should only ever return one of the three irqreturn_t constants and not an error code also make sure to always call iio_trigger_notify_done before leaving the trigger handler
d14d3557cb03903d7a477969f352ea9b57e0302d	staging ks7010 use foo instead of foo bar this issue was found by checkpatch
b4b700c5a61c6e6db976f60d4eb6ad369e838aa9	staging zsmalloc fix uninited variable warning this patch fixes an uninitialized variable warning in alloc_zspage it also fixes the secondary issue of prev_page leaving scope on each loop iteration the only reason this ever worked was because prev_page was occupying the same space on the stack on each iteration
41920d16360ebc8c482911078a17d9994fb77612	gpio propagate of_parse_phandle_with_args errors make of_get_named_gpio_flags propagate any error it receives from of_parse_phandle_with_args instead of inconditionally returning
0ca1a11a1d816c8fb0bb29b985666cef912958c1	pwm imx provide atomic pwm support for pwmv2 this commit provides apply callback implementation for pwmv2
5a0e0691147a7f841ddb54d067b165071dff592f	arm remove unused secure_flush_area api this patch removes the unused secure_flush_area function the only consumer of this function has moved to using the streaming dma apis
5d5efcbddc565f163debc462a65e8ac1f975a5f8	staging rtl8188eu checkpatch fixes alignment should match open parenthesis this is checkpatch fixes for file alignment should match open parenthesis
de8eae36057b50086278af1ec4d96fc9a2e35f0b	media media use strlcpy instead of custom code replace strncpy manually setting the terminating with an strlcpy call
46884442fc5bb81a896f7245bd850fde9b435509	random use the architectural hwrng for the shas iv in extract_buf to help assuage the fears of those who think the nsa can introduce a massive hack into the instruction decode and out of order execution engine in the cpu without hundreds of intel engineers knowing about it only one of which woud need to have the conscience and courage of edward snowden to spill the beans to the public use the hwrng to initialize the sha starting value instead of xoring it in afterwards
7457d5f588dfc038cef66e4645abbe9c06481504	rtc ds1307 remove clk_is_root this flag is a no-op now see commit clk deprecate clk_is_root so remove it
e090cc92761006c0787c2d2d4ff20dd6f52826d0	bnx2i update driver version to
90da0c0c1ee7f8fc5100de0f97dbb7c6796dc42f	rtc rtc-88pm860x remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure since commit device-core ensure drvdata null when no driver is bound thus it is not needed to manually clear the device driver data to null
ac620ba3d09bc96eca203658ad2e145adf911ac3	drm zte use crtc helper drm_crtc_from_index function zx_find_crtc does the exactly same thing as what crtc helper drm_crtc_from_index provides use the helper to save some code link
5686b06cea34e31ec0a549d9b5ac00776e8e8d6d	arm64 lockref add support for lockless lockrefs using cmpxchg our spinlocks are only tickets and our cmpxchg can deal with as one would this patch wires up the cmpxchg-based lockless lockref implementation for arm64
5e558ebd3d88d3492e0fd3b021d071fad7e2e3d2	convert init function to return error the init functions do not return any error they behave as the following panic thus leading to a kernel crash while another timer may work and make the system boot up correctly or print an error and let the caller unaware if the state of the system change that by converting the init functions to return an error conforming to the clocksource_of_ret prototype proper error handling rollback errno value will be changed later case by case thus this change just return back an error or success in the init function
1e47eef223bd53d54085832598afedf8bd6b5c77	btrfs remove unused parameter from __push_leaf_right unused since long ago
ccaf725a1fd7904ed3e771ed178c2aa1ccb21509	ftgmac100 fix potential ordering issue in napi poll we need to ensure the loads from the descriptor are done after the mmio store clearing the interrupts has completed otherwise we might still miss work a read back from the mmio register will push the posted store and ioread32 has a barrier on weakly aordered architectures that will order subsequent accesses
595a23fe1527261316e28d18cd06ac4b391d7ad1	iwl4965 fix confusingly prefixed with in format string
1b4d5beecbeb4608a0fdb77c3b8ba182f0cfb4b6	mn10300 dont use module_init in non-modular code the is built for obj-y and hence this code is always present it will never be modular so using module_init as an alias for __initcall can be somewhat misleading fix this up now so that we can relocate module_init from into in the future if we dont do this wed have to add to obviously non-modular code and that would be a worse thing note that direct use of __initcall is discouraged vs one of the priority categorized subgroups as __initcall gets mapped onto device_initcall our use of device_initcall directly in this change means that the runtime impact is zero it will remain at level __number__ in initcall ordering
b83a08fee18905ef3a7a6657f55b822744ed1756	arm board-generic update soc compatibility strings now that we have standardized soc definitions update the compatibility strings in board machine descriptors eventually we should just have soc compatiblity here and all board specific stuff should disappear
1d6a5e4ce883be40c05dc4080d24fab0b432a9ec	tty fix misspelling of current function in string replace the last argument of serial_paranoia_check by the actual function name this was done using coccinelle including the use of levenshtein distance as proposed by rasmus villemoes
02d0a493f3627df8c008417ba11e5f93f049f14c	drm misc cleanup drop unused drm_atomic and fix comment for drm_debug
ec97423afbd09c566fc3e756b4a6b50695dda0af	staging rtl8821ae fix invalid bit mask on msr_ap check since msr_ap is anding it with will never be true add a not operation to so that we will and with the last three bits which will result in a possibility that the condition will succeed
994a9df1e3ea3244e94309e4f893e9a5121116c9	asoc rcar remove from rsnd_gen_ops rsnd_gen_ops has callback function which cares if gen1 if gen2 path settings but the differences between are cared in and the path itself is same in this patch removes callback
dd71a17b1193dd4a4c35ecd0ba227aac3d110836	change the kernels imr lock bit to false currently when setting up an imr around the kernels section we lock that imr preventing further modification while superficially this appears to be the right thing to do in fact this doesnt account for a legitimate change in the memory map such as when executing a new kernel via kexec in such a scenario a second kernel can have a different size and location to its predecessor and can view some of the memory occupied by its predecessor as legitimately usable dma ram if this ram were then subsequently allocated to dma agents within the system it could conceivably trigger an imr violation this patch fixes the this potential situation by keeping the kernels section imr lock bit false by default link
4386f5662e639553552408c33014ca3e8d612b14	net ethernet bcmgenet use there are two generics functions so we can use them instead of defining the same code in the driver
e619cd3d618672bea8602d682ea63b42a1faf1bc	fix interrupt registration the driver sets bit in control register zero to one in order to enable the cp service interrupt however the irq subclass mask that normally corresponds to the cp service interrupt is so it looks like the author read the documentation with the __number__ bit sized cr0 register bit positions __number__ but didnt realize that bit numbers change if applied to a __number__ bit register __number__ due to the numbering scheme also use irq_subclass_register instead if ctl_set_bit since multiple services depend on the service signal subclass mask which is the correct bit this also explains why nobody noticed the bug since the bit is always enabled anyway pfault
6a9ddb36eeb897807341fc92d35b71b2d5d6d67d	i40e disable iov before freeing resources if vf drivers are loaded in the host os the call to pci_disable_sriov will cause these drivers remove routines to be called if the pf driver has already freed vf resources before this happens then the vf remove routine cant properly communicate with the pf driver causing all sorts of mayhem and error messages and hurt feelings to fix this we move the call to pci_disable_sriov up to the top of the function and let it complete before freeing any vf resources change-id i397c3997a00f6408e32b7735273911e499600236
313a7dfb239f9433e5892d5a640f97b165b3e452	media cxd2841er fix signal strength scale for isdb-t the scale for isdb-t was wrong too it was inverted and on a relative scale use a linear interpolation to make it look better the formula was empirically determined using __number__ frequencies __number__ mhz __number__ mhz and __number__ mhz measuring from to in steps of
a04c28d0797bb9b8743efe814672dea8e3b91c55	staging speakup kobjects add space around the operator this issue was found by checkpatch
d4c65fe4ed69a62a30a680789322ed677e3438af	iio adc spmi-vadc add missing of_node_put for_each_available_child_of_node performs an of_node_get on each iteration so a break out of the loop requires an of_node_put a simplified version of the semantic patch that fixes this problem is as follows expression local idexpression child for_each_available_child_of_noderoot child when of_node_putchild when e child return child of_node_putchild return
73454eaf2032c64f1d863ac7e91304e4bf903bfb	staging rtl8192 clean up function definition change function definition to match its prototype declaration this fixes the following warning generated by sparse warning symbol rtl8192_update_ratr_table was not declared should it be
4b1c2f41c2dda158bb7a3dded70775a76b581995	watchdog fix build warning fix compiler warning by making the function static warning no previous prototype for term
04c60f05a08aeb5ed412b08da037ed86419344a9	bluetooth move mgmt_event helper function to different location move the mgmt_event function higher up in the code so that no forward declaration is needed
aa0bad337ff231882dc8849f2234138281b5c414	media v4l vsp1 dont register media device when userspace api is disabled the media device doesnt need to be exposed to userspace when the vsp is fully controlled by the du driver dont register it in that case
9d681f5bfc85515a7b4a4af09337ed5e74f39ad9	asoc simple-card add off-codec widgets supports
4605bb55b91449a1a953a51f0334d3bc02351adb	perf evlist be more specific on currently perf evlist shows the number as if its always sampling frequency but we now support per-event settings so itd better to show more detailed info whether its freq or period perf record __number__ sleep __number__ perf record woken up __number__ times to write data perf record captured and wrote __float__ mb perf evlist __number__ __number__ link
94ea7257ef24a007cb0e26476ed8871f179a749f	bluetooth fix verifying confirm value when lacking remote oob data if we havent received remote oob data we cannot perform any special checks on the confirm value this patch updates the check after having received the public key to only perform the verification if we have remote oob data present
bf25c19979b2ee1019201b809e93b6bca9947cfd	mcb do not return zero on error path in mcb_pci_probe there is an error path in mcb_pci_probe where it returns zero instead of error code found by linux driver verification project
670fecc876c75a656ec0bc1e481ad1f848a95e61	handle multi level pd during validation all page directory levels should be in place after this
3bcd45b653e2d9c9bd04f245a14d26af895cd63a	staging wilc1000 wilc_wlan_handle_isr_ext add argument struct wilc this patch adds argument struct wilc and pass wilc to the function
88c513d478def1d40593481de45f0d73108edc5c	net dlink sundance use new api the ethtool api is deprecated we move this driver to new api
eef6e7b286e6dcf39a9b8c1d31477ee489451a8a	fix build breakage when use warn as intended
41c21a68308f2f268a01ec1a7fa5f650e320a0f3	perf evlist restore original errno after open failed if perf_evsel__open failed the errno was set and returned properly however since the perf_evlist__open called close on fds for all of evsel x cpu x thread after the failure the errno was overridden by other code ebadf so the caller of the function ended up seeing different error message and getting confused fit it by restoring original return value because one of caller of the function is in the python extension and it uses system errno internally itd be better restoring the original value rather than using the return value of the function directly imho im not a python expert link
e89792740d769cd30cc296289b00fb9ff7a762e8	media adv7842 add support to for the content type control this receiver now supports reading the it content type of the incoming video
f04015ecb5eb0bf25260de585f0c5f60e84f073a	tools lib traceevent use static functions in jbd2 plugin theres no need for following functions to be global process_jbd2_dev_to_name process_jiffies_to_msecs make them static link
da3c8deef6b392cfe9d19645de2fec9fc2005522	staging rtl8188eu replace kzalloc and memcpy by kmemdup this was generated by make coccicheck using scripts at
008b74438269b368d57a14452afbc194f7f9ff2f	lightnvm prevent gennvm module unload on use after the gennvm module has been initialized it might be attached to one or several devices in that case the module is in use make sure that it can not be unloaded
78a73e59db21b465fe60e795a0b7eadb0451370b	mfd export pm80x_regmap_config this fixes below build error when error pm80x_regmap_config undefined make1 __modpost error __number__ make modules error __number__
d0c9c93019e9b61f21ac22a5c23749873adc0038	edac dont allow empty dimm labels updating dimm_label to an empty string does not make much sense change the sysfs dimm_label store operation to fail a request when an input string is empty link
5c411bb18da78021e87cc192c5ed7ec0500f70ef	enable command parsing by default v2 rebased otc-tracker axia-4631 change-id i6747457e1fe7494bd42787af51198fcba398ad78 danvet resolve tiny conflict in module option text
3fb2ef111d6f799f3da8860c1a90ef3d9c36ea55	regulator tps65218 force set strobe to __number__ for dcdc3 the reset value for this register seems broken on certain versions of tps65218 chip so make sure the dcdc3 settings is proper needed for proper functionality of rtc-only modes
d1ade514e84ea55cba999edb04cb88daa4da94b8	asoc rsnd add renesas scu sampling rate convert unit includes and these have similar register xxxir initialization register is one of them these xxxir need be set to __number__ during initialization current rsnd driver has and we will have it is readable if these have same named function this patch adds and make sure it
be5ac3d3c11dea5b073555fba7cc59808bd2a286	print completion message at kern_info to match starting message the completion message in do_recovery is currently kern_debug while the starting message in aer_print_port_info is kern_info this changes the completion message to kern_info to match the starting message bhelgaas changelog use dev_info instead of dev_printkkern_info
0ed3398ed8086597ff53d119fa48fa466f2f2754	gpio timberdale use devm functions this eases memory allocation and provides appropriate logging
6f8d272a440ca7c61f5727300cbae642759d6765	asoc fix wm8995 regmap usage
4c171636bc2beca81b25b07fbe4ac2a6ab27f982	media v4l rcar_fdp1 use to format a string using to format in fdp1_try_fmt and fdp1_s_fmt may lead to more characters being printed when the byte following field pixelformat is not zero add __float__ to the format specifier to limit the number of printed characters to four the resulting format specifier is also used by other media drivers to print pixelformat value
02330acda7ef88865e62e2763df2cdd735607cb4	iio reject trailing garbage when parsing fixed point numbers when parsing a fixed point number iio stops parsing the string once it has reached the last requested decimal place this means that the remainder of the string is silently accepted regardless of whether it is part of a valid number or not this patch modifies the code to scan the whole string and only accept valid numbers since fract_mult is __number__ after the last decimal place any digit that may follows wont affect the result
fd8daa45f2bd9b876e0dbb9503ccc5a5252844f2	fix up limit in user priority limit has to be less than mlx4_en_num_up
517cb9f1bb0afd38bebe9b0af1b524b8a65afdb4	mmc dw_mmc fix modular build for exynos back-end the module_device_table entry for dw_mci_exynos_match was incorrectly copied from the platform back-end which causes this error when building the driver as a loadable module at top level error __mod_of_device_table aliased to undefined symbol dw_mci_pltfm_match this patch fixes the problem by just using the correct string
bc1782374b128103ae9689e0753e0610f35b6bfd	btrfs fix missing inherited flag in rename when we move a file into a directory with compression flag we need to inherite btrfs_inode_compress and clear btrfs_inode_nocompress as well but if we move a file into a directory without compression flag we need to clear both of them it is the way how our setflags deals with compression flag so keep the same behaviour here
39254a13d64bc69b83f4097dacc4117d7b865118	hid sony ds4 use brighter led colors these colors are more the default colors normally used on the ds4 the previous ones were faint and not so noticeable
3c8bb90efb6e3105206e4aaa9127395feeda5492	rtc fix hrtimer deadlock ben reported a lockup related to rtc the lockup happens due to cpu0 cpu1 rtc_irq_set_state __run_hrtimer rtc_handle_legacy_irq hrtimer_cancel while callback_running so the running callback never finishes as its blocked on use hrtimer_try_to_cancel instead and drop while waiting for the callback fix this for both rtc_irq_set_state and rtc_irq_set_freq
855fe6ea9600a6d4b406b0d66e86e6e60ace4ef4	staging sm7xxfb add module_device_table add module_device_table to support hot-plugging
6863ef8449f1908c19f43db572e4474f24a1e9da	xfs correctly map remote attr buffers during removal if we dont map the buffers correctly same as for operations then the incore buffer lookup will fail if a block number matches but a length is wrong then debug kernels will assert fail in _xfs_buf_find due to the length mismatch ensure that we map the buffers correctly by basing the length of the buffer on the attribute data length rather than the remote block count
6843bc3c568128e8771ba35cfefe95b7ec1c93a8	netfilter ipset move registration message to init from net_init commit netfiler ipset add net namespace for ipset moved the initialization print into net_init which can get called a lot due to namespaces move it back into init reduce to pr_info
649a1a0ef28e5db99e838060f415a111566c63ea	asoc report errors when we have a wm8962 irq and dont get fll lock we really should be getting the interrupt if we dont get one its very likely that the configuration is incorrect and audio will fail also increase the timeout substantially in this case for safety
42112a0f5d34601e5d0a1bc7c769ba39adda0769	x86 vsyscall fix cpu hotplug callback registration subsystems that want to register cpu hotplug callbacks as well as perform initialization for the cpus that are already online often do it as shown below get_online_cpus for_each_online_cpucpu init_cpucpu put_online_cpus this is wrong since it is prone to abba deadlocks involving the cpu_add_remove_lock and the when running concurrently with cpu hotplug operations instead the correct and race-free way of performing the callback registration is cpu_notifier_register_begin for_each_online_cpucpu init_cpucpu note the use of the double underscored version of the api cpu_notifier_register_done fix the vsyscall code in x86 by using this latter form of callback registration
e7c8c60bc5d48994a67e4b1c7bfb01d6979dbc54	i40e add support to program fdir sb rules for vf from pf through ethtool with this patch we can now add flow director sideband rules for a vf from its pf here is an example on how it can be done when vf id __number__ and queue __number__ ethtool ethx flow-type udp4 src-ip dst-ip src-port p1 dst-port p2 action __number__ user-def __number__ user-def specifies vf id and action specifies queue change-id ib37d6dff3823a4d85caffde638473891c38c2b89
41f3b52cf460d1641698bab84c2a3dc110d22b3a	staging bcm indentation fixes this patch fixes some indentation errors where multi-line statements where not indented
a48baac52aab9b017fb79f27795e69193e0f1d24	mfd htc-i2cpld remove unneded ret variable the ret variable is not needed since is not used in the function remove the variable and just return __number__ instead
6bc24526f8010f208a243cc73df4c6cc48fa18a4	regulator pwm use pwm_get_args where appropriate the pwm framework has clarified the concept of reference pwm config the platform dependent config retrieved from the dt or the pwm lookup table and real pwm state use pwm_get_args when the pwm user wants to retrieve this reference config and not the current state this is part of the rework allowing the pwm framework to support hardware readout and expose real pwm state even when the pwm has just been requested before the user calls
00ea8cba5ef7b783f11cb1a0b900b7c18d2ce0b6	always apply pci shutdown callbacks v2 we cant properly detect all hypervisors and we need this to properly tear down the hardware v2 trivial warning fix
6c17ee44d5240a247daef3cdc51a0c62d2b77d75	acpi lpss introduce a proxy device to power on lpss for dma the lpss dma controller does not have _ps0 and _ps3 methods moreover it can be powered off automatically whenever the last lpss device goes down in case of no power any access to the dma controller will hang the system the behaviour is reproduced on some hp laptops based on intel bay trail __number__ as well as on asus t100 transformer this patch introduces a so called proxy device that has the knobs to handle a power of the lpss island when the system needs to program the dma controller it calls to the acpi lpss power domain callbacks that wake or suspend the proxy device __number__
9f662b20d6cef8afbbf954de66dece78faf4bcc1	eeepc-laptop dont break user visible strings as per ch __number__ it is preferred that we dont break user visible strings in order to allow users to grep for them
c17ef430b9fd5f58074f5cdc0128d06a5ae92304	i40e fix bit logic error in failure case patch a036244c0686 i40e fix kernel panic on lldp introduced an error in bit logic originally this bit manipulation was meant to clear two bits to indicate that dcb was not enabled or capable an was incorrectly used instead of an bit operator to combine the two bitmasks into one this also created a static checker error since the resultant code was a no-op this patch fixes the error by using the correct bit-wise operator
c92c1d026b1e13f20fee3350975a4986608ff84a	greybus fw-mgmt add hooks to do mode-switch this is the last step to required to finish the mode switch story that is call the hook provided by interface layer to accomplish mode switch tested on evt __float__ with gpbridge-test module
3066af582fd8084d9767ee8a71b8778360813106	team use strlcpy with ethtool_drvinfo fields the fields must be null-terminated
ac8ad30777467c5258c52aa4899a8a07a3e56b54	crypto caam fix error handling in caam_rng_init in the error paths we should free the resources that were previously acquired so fix it accordingly
7266702805f9d824f92ce5c4069eca65d0f21d28	signal make sure we dont get stopped with pending task_work
74c08f982674cfd5dfeb2702d631db9bcdabf788	memory-hotplug dont replace lowmem pages with highmem the changelog for commit mm cma dont replace lowmem pages with highmem mentioned that lowmem pages can be replaced by highmem pages during cma migration fixed that issue quote from that changelog the filesystem layer expects pages in the block devices mapping to not be in highmem the mappings gfp mask is set in bdget but cma can currently replace lowmem pages with highmem pages leading to crashes in filesystem code such as the one below unable to handle kernel null pointer dereference at virtual address __number__ pgd __number__ __number__ __number__ internal error oops __number__ preempt smp arm cpu __number__ not tainted pc is at process fsstress pid __number__ stack limit backtrace from from from from __number__ __number__ from from memory-hotplug has same problem as cma has so the same fix can be applied to memory-hotplug as well fix it by reusing
f31b5d27be486b62901f78c693fc0d7a52afc1cd	tty serial __number__ make serial8250_console_setup non _init if i boot with and the omap driver is module i end up with console ttys0 disabled omap8250 ttys0 at mmio irq __number__ base_baud __number__ is a __number__ unable to handle kernel paging request at virtual address modules linked in cpu __number__ pid __number__ comm modprobe not tainted pc is at lr is at register_console from uart_add_one_port from serial8250_register_8250_port from omap8250_probe from platform_drv_probe from sys_init_module from code __number__ because serial8250_console_setup is already gone
a622cc51879f70344c03d4e0de59728e9f5c31b9	media sh_vou comment unused vars fix two warns below by commenting the unused code in function sh_vou_configure_geometry warning variable height_max set but not used unsigned int black_left black_top width_max height_max in function sh_vou_isr warning variable side set but not used static int side
676c002af672d05ccf64ddd0927cbf4d170cc6aa	media tc358743 ctrl_detect_tx_5v should always be updated the control for power detection must also be updated when the edid is not present
9b15acbfe937f9c48a81d6aa306f9fa8b53abc13	qlogic qed fix error codes in qed_resc_alloc we accidentally return success instead of here acked-by yuval mintz
9dcd74089a1ecf73ea4a355ee097b5b218ccf3dc	dmaengine at_xdmac use dma_pool_zalloc we should use dma_pool_zalloc instead of
dc477ad386fb9fc63b399879f40ff9930d9d48ff	usb kobil_sct remove unused transfer buffer allocs commit usb kobil_sct fix control requests without data stage removed the bogus data buffer arguments but still allocate transfer buffers which are not used
0c01bc486a6f5f397732f808ecbcd63665c605d8	bluetooth mgmt remove unwanted goto statements remove goto statements that do nothing else than jump to the next line of code
711584ea4c8ce47045c8ed4da3d6c6fdf513db92	list_for_each with list_for_each_entry helper replace list_for_each with list_for_each_entry helper
05a65f06f69fa6c487c2933f2971d9ec4e33eb0d	remove pagereserved manipulation remove the unnecessary manipulation of the pagereserved flags in the tegra smmu driver none of this is required as the pages remain private to the smmu driver
c14dd2680baaef02aa4d221a2b5d337fbfd71b00	ieee802154 at86rf230 remove empty callbacks there is no need to implement empty callbacks if there is nothing to do during the drivers will behave the same with no callbacks or empty callbacks during
d387a8d66670371e6be3b6d6bde2e38b8cade076	pci workaround for intel mps errata intel __number__ and __number__ series memory controllers have a known issue if read completion coalescing is enabled and the pci-e maximum payload size is set to to work around this issue disable read completion coalescing in the memory controller and root complexes unfortunately it must always be disabled even if no mps devices are present due to the possibility of one being hotplugged links to erratas thanks to jesse brandeburg and ben hutchings for providing insight into the problem
ee4c7709fbb29860c3200b1296a18adff01d2307	staging comedi aio_aio12_8 fix ai according to the user manual analog input bipolar data is complement and unipolar is straight binry use the core helpers to munge the data appropriately
b837e97fd35a6b551e3478ace0623a0bd744787c	avr32 wire up copy_file_range syscall this patch wires up the new copy_file_range syscall on avr32 on avr32 all parameters beyond the are passed on the stack system calls dont use the stack they borrow a callee-saved register instead this means that syscalls that take __number__ parameters must be called through a stub that pushes the last parameter on the stack
4d4e2c003bd6c6bdd85080bd096d54d5d251defa	video da8xx-fb preserve display width when changing hsync when looking at this driver for a client i noticed the code that configures the hsync pulse clobbers the display width in the same register it only preserves the ms part of the width in bit __number__ and zeros the ls part of the width in bits __number__ to __number__ this doesnt matter during initialization as the width is configured afterwards but subsequent use of the fbiput_hsync ioctl would clobber the width preserve bits __number__ to __number__ of lcd_raster_timing_0_reg when configuring the horizontal sync
06d9db7273c7bd5b07624b313faeea57a4b31056	usb musb gadget do only for valid dma addr musb does not use dma buffer for ep0 but it uses the same giveback function for all endpoints calls so for ep0 case will be __number__ and will result in kernel oops if tried to for requests in ep0 fixed it by doing only for valid dma addr and checking that is valid when unmapping
5e9d8172719b8d8879b19bd75b1560d24a4e074e	staging dgap fix bar should be foo as reported by checkpatch this patch fixes bar should be foo errors in as reported by checkpatch
9bb40585c9d934db3585e1f422e2ffb1dd5e9631	drivers video fbcmap remove the redundency and incorrect checkings fb_set_cmap already checks the parameters so need remove the redundancy checking this redundancy checking is also incorrect the related warning warning comparison of unsigned expression __number__ is always false
7ddb1b6bbf1e614e6700f226cb0a559c5c635336	perf stat move perf_stat initialization counter process code moving perf_stat initialization counter process code to make the reading path free of processing logic link
0023a061d75a37f50fb6952015b826d86de8d2c4	net lantiq_etop remove unused variable the variable i was declared but was never used and we were getting a build warning for that
0b5381a61821d1c074c76e01b27bf5f69cf2dd01	more accurate log this clarifies in the log whether the error is a global phb error or an individual pe being frozen
00b20a4de0fe0a0844cf1303b245ae15424fd63d	iwlwifi remove watchdog debugfs file this file isnt really all that useful as when the watchdog triggered its already too late and the setting doesnt persist unlike a module parameter that could be added to the right config file
eac40d9631a7db43570df859fa8a9922e9623607	rt2x00 rt2800lib update bbp register initialization for rt53xx update bbp register initialization for rt53xx chips to match with the latest driver based on nicinitrt5390bbpregisters from signed-off-by kevin lo
d9c64c500aecfc1623a9f21e5a563916d4730832	pci rcar remove unused platform data the rcar driver never uses the platform drvdata pointer so dont bother setting it no functional change intended
87f6c976f4104ae5a439ff2d78ea3fe7ce0ac280	greybus firmware break long lines break lines longer than __number__ cols and clean up an error message while at it
72360b91164aa35753942e5310ae1e1d16e28611	clk sunxi improve mux_clk error handling and reporting we now catch and report a failing ioremap also a failure in the final step of the clock registration is now handled and reported also warnings are turned into errors
28e3abe591e22717f7fabb9ffa839571b85df323	pci imx6 add dt bindings to configure phy tx driver settings the settings in gpr8 are dependent upon the particular layout of the hardware platform as such they should be configurable via the device tree look up phy tx driver settings from the device tree fall back to the original hard-coded values if they are not specified in the device tree
5d6aa3435275a5308684f90c17424b055ef7f572	arm shmobile bockw enable dma for sdhi0 pass hpb-dma slave ids in the sdhi0 platform data to enable dma in the sdhi driver sergei removed
c7b51bce636e4990662bb100bc17e1d4d6c02d34	dont need to remove from eeh cache twice since pcibios_release_device called by pci_stop_and_remove_bus_device has removed the device from the eeh cache we neednt do that again
831c986f5dfc9f29f5237697029f7faf24521413	regulator use tps65912_set_voltage_sel for both dcdcx and ldox commit regulator tps65912 use simple equations to get register address uses tps65912_get_sel_register to replace tps65912_get_dcdc_sel_register and tps65912_get_ldo_sel_register now tps65912_set_voltage_dcdc_sel and tps65912_set_voltage_ldo_sel has exactly the same implementation merge them to tps65912_set_voltage_sel function
96484348ad712aed2c6ad7229b848bc1bf6165a8	selinux cleanup selinux_xfrm_policy_lookup and selinux_xfrm_state_pol_flow_match do some basic simplification and comment reformatting
ba6a09d7c01fd88c26a0a4d83788026632ee3d37	fix coccinelle warnings warning return of in function i2c_atmel_req_canceled with return type bool return statements in functions returning bool should use instead of generated by
74d977b65e45bc9b536b429e7f3b5e3a8e459026	selinux detect invalid ebitmap when count is __number__ and the highbit is not zero the ebitmap is not valid and the internal node is not allocated this causes issues when routines like mls_context_isvalid attempt to use the ebitmap_for_each_bit and ebitmap_node_get_bit as they assume a highbit __number__ will have a node allocated
0845d45e900cad5f7f855a7a6a21c33477800b1f	e1000e modify configurations to avoid null pointer dereferences in e1000_open when e1000e_setup_rx_resources is failed in e1000_open e1000e_free_tx_resources in err_setup_rx segment is executed writel0 statement in e1000_clean_tx_ring in e1000e_free_tx_resources will cause a null poonter dereferencecrash because is only assigned in e1000_configure_tx in e1000_configure but it is after e1000e_setup_rx_resources this patch moves register writing to which can fix this problem it is inspired by igb_configure_tx_ring in the igb driver specially thank alexander duyck for his valuable suggestion
71c2fb03fc5800f24b66b730cbb9fddc22df40d3	usb cdc-acm remove unneeded on write path when writing data we were lock do some work unlock call function lock do some work unlock return return it turns out that function was only ever called in the one place so instead of for no good reason just inline the function and only grab the lock once this has sped up the pathological case of sending __number__ byte packets to a loop-back cdc-acm device from __number__ bytes per second to __number__ bytes a second on my workstation a tiny increase yes but noticable and now the spinlock isnt the hottest thing on the perf graph anymore yes we are still waiting for the hardware for the most part but getting rid of a spinlock_irq_save call for every packet is still a good thing and we end up deleting lines of code always a win overall this was found by using a teensy __float__ device and the test program and firmware located at
25d280aad82e559cc7bc762410cd35ea5b98e294	nfs allow the callback thread to freeze the callback thread has set_freezable at the top but it doesnt ever try to freeze within the loop have it call try_to_freeze at the top of the loop if a freeze event occurs recheck kthread_should_stop after thawing
04382a3303c22b0c536fbd0c94c1f012f2b8ed60	openvswitch read tcp flags only then the tranport header is present only the first ip fragment can have a tcp header check for this
58f42fd54144346898e6dc6d6ae3acd4c591b42f	cma fix migration mode __alloc_contig_migrate_range calls migrate_pages with wrong argument for migrate_mode fix it
5576bc7bef2919dd2b185bffb768bf9c0da76788	mtd nand pxa3xx_nand remove redundant of_match_ptr the data structure of_match_ptr protects is always compiled in hence of_match_ptr is not needed
9257f1daa8befd5c0a343031dd870236550e00c5	usb option silence interrupt errors avoid spamming the logs with errors when attempting to resubmit the interrupt urb while a disconnect of an in-use device is being processed
9ff25e6b3eb0012297288dfa87930c7b62ef6ab1	remove kernel parameter the kernel parameter was intended for working around broken chipsets dont supply the source id for aer events we recently added pci_bus_flags_no_aersid which can be set by quirks for the same purpose remove the kernel parameter for anything other than debugging asking users to find and use kernel parameters is a poor user experience instead we should add pci_bus_flags_no_aersid quirks for any hardware that needs it
0624760c96da3ffeaec8027a016475ae752d75e1	mac80211 fix potential null dereference smatch complains that we could dereference skb later in the function its probably unlikely but we may as well return here and avoid it change summary
23cd1f095adf110d118ef972914c714176cd48d0	i40e update vebs enabled_tc after reconfiguration when the port tc configuration changes as a result of dcbx the driver modifies the enabled tcs for the vebs it manages but in the process it did not update the enabled_tc value that it caches on a per veb basis so when the next reconfiguration event occurs where the number of tc value is same as the value cached in enabled_tc for a given veb driver does not modify its tc configuration by calling appropriate aq command believing it is running with the same configuration as requested now as the veb is not actually enabled for the tcs that are there any tc configuration command for vsi attached to that veb with tcs that are not enabled for the veb fails this patch fixes this issue change-id ife5694469b05494228e0d850429ea1734738cf29
947a37cd38796f5b196a934353165a001cbcb0a9	arm shmobile armadillo800eva fix clock inversion when operating in left-justfied mode both the frame-clock and the bit-clock need to be inverted to be standards compliant this means that the exta clock inversion setting in the armadillo800eva machine driver for cpu component should now be removed
4bdcaa054e1c73697b390c32c434d96836121306	media af9033 cancel_delayed_work_sync before device removal kfree af9033_remove was calling kfreedev with possibly still active a similar bug in si2157 caused kernel panics in call_timer_fn after rmmod cx23885
6d846c46683a4a8a54fbd30b0ff1434a7d898026	arm omap5 dra7 pm enable mercury retention mode on cpux powerdomains in addition to the standard power-management technique the omap5 dra7 mpu subsystem also employs an sr3-apg mercury power management technology to reduce leakage it allows for full logic and memories retention on mpu_c0 and mpu_c1 and is controlled by the prcm_mpu only fast-mode is supported on the omap5 and dra7 family of processors
15cab952139404d0e593cb1aaab0a3547ac0f95b	ptrace the killed tracee should not enter the syscall another problem if the tracee is killed after it reports syscall_entry it starts the syscall and debugger cant control this this confuses the users and this creates the security problems for ptrace jailers change tracehook_report_syscall_entry to return non-zero if killed this instructs syscall_trace_enter to abort the syscall
af99c187f167a9498fd548b81ec78890ef86c170	serial sirf introduce helper variable struct device_node
2e78416e763261fa8187429b7ea053d369fa7f79	update skylake ddi translation table for hdmi when debuging an intermittent corrupted screen i suspected on ddi translation table and checked we are out of date with the spec im not sure this will fix my bug yet but it is always good to follow the spec v2 ville caught a switched i-boost value thanks
4a65429457a5d271dd3b00598b3ec75fe8b5103c	fix zone calculation in arch_add_memory standby hotplug memory should be added to zone_movable on s390 after commit make arch_add_memory numa aware arch_add_memory used memblock_end_of_dram to find out the end of zone_normal and the beginning of zone_movable however commit memory-hotplug add hot-added memory ranges to memblock before allocate node_data for a node moved the call of memblock_add_node before the call of arch_add_memory in add_memory_resource and thus changed the return value of memblock_end_of_dram when called in arch_add_memory as a result arch_add_memory will think that all memory blocks should be added to zone_normal fix this by changing the logic in arch_add_memory so that it will manually iterate over all zones of a given node to find out which zone a memory block should be added to
8b011ebb5c371f8767e6e813a1aca3b7fc795f94	i40evf ignore bogus messages from fw occasionally on shutdown the fw will hand us a bunch of messages filled with zeros which can cause us to spin trying to handle them just ignore these and get on with shutting down change-id i347e9648f7153ad5a7b7e0847b87f7aad5f3e0da
10b218551444934b3ed864ec9eb81332d68d21ed	arm dts am43xx fix slewctrl_fast pinctrl binding according to am437x trm document spruhl7b revised december __number__ section pad control registers setting bit __number__ of the pad control registers actually sets the slewctrl value to slow rather than fast as the current macro indicates introduce a new macro slewctrl_slow that sets the bit and modify slewctrl_fast to __number__ but keep it for completeness current users of the macro i2c mdio and uart are left unmodified as slewctrl_fast was the macro used and actual desired state tested on am437x-gp-evm with no difference in software performance seen
f58f230a832ba8220a64f44aaafcce4b7358d826	get rid of superfluous __gfp_repeat __gfp_repeat has a rather weak semantic but since it has been introduced around it has been ignored for low order allocations efi_alloc_page_tables uses __gfp_repeat but it allocates an order-0 page this means that this flag has never been actually useful here because it has always been used only for page_alloc_costly requests link
58275f2f0a6acd750b0acdc62d6457fb3e0f264e	pci designware fix indent code style fix indent code style and replace msi interrupt controller of comment with msi controller to fix the following checkpatch issues error code indent should use tabs where possible warning please no spaces at the start of a line warning line over __number__ characters
f5ce6edd22cff94e7b4a17f26cad43e60ae3d080	tty amba-pl011 switch to using relaxed io accessors using relaxed io accessors allows gcc to better optimise this code as we eliminate the heavy memory barriers for example gcc can now cache the address of a register across a read-modify-write sequence rather than reloading the base address offset and access size flag
8da9fe8af8e3fd953b346c800976a5db6c0115a4	usb gadget udc core fix unregistering message currently were printing gadget driver name when registering and udc name when unregistering standardize on always printing gadget driver name
8e6947764f4b69d612519e9202f6e9ae982b6cd4	video arkfb remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
a24d389323b51f2f7c79c0db791ea7423f1f6d49	fix warnings no need to set here the core will do it remove field if calls are used which set it automatically generated by
0312d59130693adad85c2acfbc0b92a669930a41	spi sh-msiof refactor sh_msiof_transfer_one move buffer pointer and length setup to the top make unsigned values unsigned loop over words and increment pointers instead of recalculating them which allows to kill bytes_done
f902e8812ef657c6cf744ac25e21865217155460	bridge add ability to enable tso currently a bridge device turns off tso feature if no bridge ports support it we can always enable it since packets can be segmented on ports by software as well as on the bridge device this will reduce the number of packets processed in the bridge
7414d4f64b73cc30c600b4fe0a9cbc24cedc4285	fix null pointer dereference the use of pointer fs should be after the null check
0624a8eb82efd58e457093e8fd4514abd3b37cc0	kvm s390 use memdup_user rather than duplicating code reuse existing functionality from memdup_user instead of keeping duplicate source code this issue was detected by using the coccinelle software return directly if this copy operation failed message-id users.sourceforge.net
0bfd6f734a99ce2c7217571c45c2456ae1da63c3	use fermi class not tesla
7b318b411cc9dcc6309eaeba56ff822979e2b15c	staging lustre interval_tree remove multiple assignments remove multiple assignments by factorizing them fix checkpatch check multiple assignments should be avoided
ca250b6017910ca6edca4cbd6eaa7452a13b5c03	staging nvec re-enable the clock on resume on resume the slave controller is reinitialized the tegra i2c master controller disables the clock at the end of the initialiation propably to save some power and enables it again on each transfer we dont do this yet and also forgot to enable the clock on resume fix this copy-paste error by not disabling the clock after initialization this didnt striked us yet because hasnt landed in mainline yet but will soon
951179ce86f5599e2dfb9de254056e91bd865f15	kvm x86 fix return value of kvm_vm_ioctl_set_tss_addr return value of this function will be that of ioctl int main int fd fd open __number__ fd ioctl fd kvm_create_vm __number__ ioctl fd kvm_set_tss_addr __address__ perror return __number__ output is operation not permitted thats not what we want return in this case
d96f7330176d69a9415162fb341b87e724e9ca74	cpufreq kirkwood dont check resource with devm_ioremap_resource devm_ioremap_resource does sanity checks on the given resource no need to duplicate this in the driver
efc77e36ae6ff4394a0232a4f87bded0bd555d6b	asoc dapm add snd_soc_dapm_switch to the power sequence table the power sequence order for dapm switch widgets is not explicitly initialized causing them to be run always as the first widget type for both power up and down move it to the same position in the sequence as other mixer widget types
6e3aca4419e1363ff9abb3e1710c52858fc45b66	irqchip gic dont complain in gic_get_cpumask if up system in a uniprocessor implementation the interrupt processor targets registers are unfortunately gic_get_cpumask will print a critical message saying gic cpu mask not found kernel will fail to boot if these registers all read as zero but there wont actually be a problem on uniprocessor systems and the kernel will boot just fine skip this check if were running a up kernel or if we detect that the hardware only supports a single processor link
4acb4d6c92cffee406f88cf96a6c30dbc24fb861	irda sh_sir use devm_request_irq huqiu reported current sh_sir driver doesnt call free_irq in spite of using request_irq this patch replaces request_irq into devm_request_irq to solve this issue
929562b144783b9212625305eadcbbd800809643	crypto stm32 fix of module alias information the module alias information passed to module_device_table should use stm32_dt_ids instead of undefined sti_dt_ids
072a21cfe0914d0fea771b7d20713248d2d794aa	prefer to bitmap operators are overkill when touching only one bit
3b6281cf2893a3c140a37be817b0802c46af292b	asoc fsi reorder code to make a forward declaration superfluous
4ee71b2017336f68128515bdbe7c946a39aa9250	bluetooth fix checking for valid address type values in mgmt commands this patch adds checks for valid address type values passed to mgmt commands if an invalid address type is encountered the code will return a proper invalid params response
6b84bd167458545f0806d5a1a8a102004365d44e	netback fix alert message the original message in netback_init was kthread_run fails which should be kthread_create fails
a58a935d5a1b2ad267017a68c3a1bca26226cc76	dm mpath add retain_attached_hw_handler feature a scsi device handler might get attached to a device during the initial device scan we do not necessarily want to override this when loading a multipath table so this patch adds a new multipath feature argument retain_attached_hw_handler during scsi device scan all loaded scsi device handlers will be consulted for a match via scsi_dhs provided if a match is found that device handler will be attached we need a way to have userspace multipathds provided hw_handler not override the already attached hardware handler when specifying the new feature retain_attached_hw_handler multipath will use the currently attached hardware handler instead of trying to attach the one specified during table load if no hardware handler is attached the specified hardware handler will still be used leverages scsi_dh_attachs ability to increment the scsi_dhs reference count if the same scsi_dh name is provided when attaching currently attached scsi_dh name is determined with scsi_dh_attached_handler_name depends upon commit scsi scsi_dh add scsi_dh_attached_handler_name
56dd5af9bc23d0d5d23bb207c477715b4c2216c5	set default upper limit of queues to __number__ the default for the maximum number of queues of one interface is the number of cpus of the system today as each queue pair reserves __number__ grant pages this default consumes a ridiculous number of grants for large guests limit the queue number to __number__ as default this value can be modified via a module parameter if required
6a6af3d04435adfdaab363624ec569a9b5d3973c	rtc cmos reject unsupported alarm values some platforms allows to specify the month and day of the month in which an alarm should go off some others the day of the month and some others just the time currently any given value is accepted by the driver and only the supported fields are used to program the hardware as consequence alarms are potentially programmed to go off in the wrong moment fix this by rejecting any unsupported value
a3961789727c3b7cc3ae5f83c5e41005c6e2d1ec	ep93xx_eth add gro support use napi_complete_done instead of __napi_complete to __number__ get support of gro_flush_timeout if opt-in __number__ not rearm interrupts for busy-polling users __number__ use standard napi api __number__ get rid of baroque code and ease maintenance
b6d30968d86c45a7bb599eaca13ff048d3fa576c	input uinput switch to using for_each_set_bit use for_each_set_bit to check for set bits in bitmap as it is more efficient and compact
cf1dad9d7f14ddf555baa0fcc82d17d5f29d3ae2	arm exynos4 add support for secondary mmc port on origen secondary mmc port on origen is connected to sdhci instance __number__ support for secondary mmc port is extended by registering sdhci instance __number__ since sdhci instance __number__ can contain a bootable media sdhci instance __number__ is registered after instance __number__
27747f8bc355a2808ca9e490ab6866acd85b4c16	fix check for kernel-space breakpoints the check looked wrong although i think it was actually safe task_size is unnecessarily small for compat tasks and it wasnt possible to make a range breakpoint so large it started in user space and ended in kernel space nonetheless lets fix up the check for the benefit of future readers a breakpoint is in the kernel if either end is in the kernel link
57c59f5837bdfd0b4fee3b02a44857e263a09bfa	audit fix filename matching in __audit_inode and __audit_inode_child in all likelihood there were some subtle and perhaps not so subtle bugs with filename matching in audit_inode and audit_inode_child for some time however recent changes to the audit filename code have definitely broken the filename matching code the breakage could result in duplicate filenames in the audit log and other odd audit record entries this patch fixes the filename matching code and restores some sanity to the filename audit records
0b8db271f1592e118feef7300f6da85bea9366da	acpi video check _dod list when creating backlight devices the _dod method lists which video output device is currently attached so we should only care about them and ignore others an user recently reported that there are two acpi_video interfaces appeared on his system and one of them doesnt work from the acpidump it is found that there are more than one video output devices that have _bcm control method but the _dod lists only one of them so this patch checks if the video output device is in the _dod list and will not create backlight device if it is not in the list also we consider the broken _dod casereflected by the is __number__ and do not change behaviour for those broken _dod systems link reported-and-tested-by
de839b8f06bc5dd3f5037c4409a720cbb9bf21c3	staging nvec add a udelay100 to nvec_interrupt as the comment indicates adding that udelay seems to improve the stability of the communication although it is not known why this is the case
15b540c71cac840f0a3e8b1b4b7a773deb847ffb	mtd nand pxa3xx use to release dma resources in commit commit author ezequiel garcia free-electrons.com date fri oct __number__ __number__ mtd nand pxa3xx allocate data buffer on detected flash size the way the buffer is allocated was changed the first read_id is issued with a small kmalloced buffer only once the flash page size is detected the dma buffers are allocated and is set currently if the device detection fails the driver checks the use_dma module parameter and tries to release unallocated dma resources fix this by checking the proper indicator of the dma allocation which is
28134a53d624ae7e90fff8500b25b3add4d40b92	rhashtable fix potential crash on destroy in rhashtable_shrink the current being_destroyed check in rhashtable_expand is not enough since if we start a shrinking process after freeing all elements in the table thats also going to crash this patch adds a being_destroyed check to the deferred worker thread so that we bail out as soon as we take the lock
b3ab6fbfd8625232c54d70e29f7274118726ba45	staging comedi comedi_bond fix b_mask calc in bonding_dio_insn_bits b_chans may be a valud up to __number__ b_mask is an unsigned int and a left shift of more than __number__ bits has undefined behavior fix the calc so it works correctly with a b_chans of reported-by coverity cid __number__
28b066da69b937ea4104341cb5d9324109faab7f	arm64 mmu map as read-only from the outset now that alternatives patching code no longer relies on the primary mapping of being writable we can remove the code that removes the writable permissions post-init time and map it read-only from the outset to preserve the existing behavior under which is relied upon by external debuggers to manage software breakpoints as pointed out by mark add an early_param check for and use rwx permissions if it set to off
3f9362078b101bd57bfed635e49c8ecb8b6d465d	dw_dmac introduce dwc_chan_disable this piece of code is used often make it as a separate function
0ffecd7d869a156b710b7b6cb59153748c6de3ae	asoc wm8958 load firmwares simultaneously as of commit firmware loader fix creation failure of fw loader device we can have more than one firmware request outstanding at once so there is no need to daisychain our requests any more
6311cc44a23bb42636f5076fef0a67859d0a0102	veth convert to __number__ bit statistics not much change device was already keeping per cpu statistics use recent __number__ statistics interface
e2dfbac54e82e2165049971eaaaeecf68d50260f	staging wilc1000 rename u8keyidx of struct host_if_wpa_attr this patch renames u8keyidx of struct host_if_wpa_attr to index to avoid camelcase naming convention
deeeca6db20fde52eafbc5985cfe4f4c10a7de8e	staging unisys visorbus add error handling around kobject_uevent the function kobject_uevent_env can return an error pass that error to the caller so it can be handled correctly reviewed-by reviewed-by tim sell
a52f238e7c808d9fd1f9dfc675f583b77156cdeb	iio adc ad7476 use iio helper function to guarantee direct mode replace the code that guarantees the device stays in direct mode with iio_device_claim_direct_mode which does same
91e41d1665c868a26a24580b83c321e04be43dfe	implement
10a81378ee79977e6d4b70ce576bbd781a335e5b	arm imx6q add clock for apbh-dma add clock for apbh-dma
9a6161fe73bdd3ae4a1e18421b0b20cb7141f680	xen return xenstore command failures via response instead of rc when the xenbus driver does some special handling for a xenstore command any error condition related to the command should be returned via an error response instead of letting the related write operation fail otherwise the user land handler might take wrong decisions assuming the connection to xenstore is broken while at it try to return the same error values xenstored would return for those cases
c22fd5ef0fcccc8e960f307893fc5b3de68512d7	asoc switch over to use snd_soc_register_component on imx ssi
60d4616f3dc63371b3dc367e5e88fd4b4f037f65	ext4 serialize fallocate with ext4_convert_unwritten_extents fallocate should wait for pended ext4_convert_unwritten_extents otherwise following race may happen ftruncate fallocate __number__ io_sibmit __number__ write to fallocated area split extent if needed fallocate __number__ grow extent and broke assumption about extent later kwork completion will do __number__ __number__ inode ext4_get_blocks_io_convert_ext will find new extent ex convert extent to initialized but was written
b23954a3f73a68a80f260bd3569a81ccc6d13670	pch_uart change type to to format is easier to understand better than
140d8b335a9beb234fd0ed9a15aa6a47f47fd771	bpf fix bpf_perf_event_read loop upper bound verifier rejects programs incorrectly
b2102eb36e7909c779e46f66595fda75aa219f4c	watchdog omap_wdt early_enable module parameter add a early_enable module parameter to the omap_wdt that starts the watchdog on module insertion the default value is __number__ which does not start the watchdog which also does not change the behavior if the parameter is not given
b82a3ecdc54465c792326522d804d2eebaae9a23	ia64 sn use kmemdup rather than duplicating its implementation the semantic patch that makes this change is available in
3f86eb6b0771d785099c91354838d3f8d8126630	perf tools get rid of exit_browser from usage_with_options since all of its users call before setup_browser theres no need to call exit_browser inside of the function link
7cf1054b8c5bce39fa2c8adedb3ff40ddb0fa1b3	staging lustre lustre osc insert missing space before insert missing space before to improve readability this error found with
b829c1954dbeb42a1277a8cb05943050ee70be94	ceph dont null-terminate xattr values for some reason ceph_setxattr allocates an extra byte in which a is stored past the end of an extended attribute value this is not needed and is potentially misleading so get rid of it
a4c48ad7370ba57ad899c2a4abd223ba7c6d9c32	stmmac dwmac-sti remove useless of_node check since dwmac-sti is a dt only driver checking for of node is not necessary
830778a180f268ac106f072b8aad793a79088c87	md ensure metadata is writen after raid level change level_store currently does not make sure the metadata is updates to reflect the new raid level it simply sets md_change_devs any level with a will quickly notice this and update the metadata however raid0 and linear do not have a thread so no metadata update happens until the array is stopped at that point the metadata is written this is later that we would like while the delay doesnt risk any data it can cause confusion so if there is no md thread immediately update the metadata after a level change
44d6106808a841d89dd7c96740917538ea47a29c	extcon adc-jack update cable state during boot update cable state during boot to avoid any missing external cable events occurred before driver initialisation
872b4af48f878e361739bae7d3f300c0a35ecfd0	dmaengine sa11x0 use correct print specifiers for u32 this driver when compiled on __number__ bits gave warnings warning format expects argument of type but argument __number__ has type we should use to print u32 values
b4f033f2d01b6b7ab9273b8e93256673c235f5c8	staging unisys visorinput remove extraneous mouse logic removes a cursor positioning hack that no longer seems to be required
7408d3061d2f04181820902fae6e92e4a73d5cc0	arm shmobile r8a7791 add clock add clock to r8a7791 device tree sergei rebased renamed added changelog
97cacb9f7a1e7502e7e8e7964b00dc191be565eb	crypto qat use crypto_aead_set_reqsize helper this patch uses the crypto_aead_set_reqsize helper to avoid directly touching the internals of aead
c57753d4541d5104284abbdceb841e690394e55f	mtd nand tests fix regression introduced in mtd_nandectest offending commit mtd nand return consistent error codes in implementations the new error code was not being handled properly in double bit error detection
361b02f3538bc5603a426ed3bb04129a8d7b9a67	arm omap4 pm avoid omap4_pm_init on omap4430 on omap4430 power management features are not supported avoid omap4_pm_init on silicon so that we can continue to use same kernel binary to boot on all omap4 silicons the boot failure with omap4 pm series was because of the clockdomain initialisation code hardware supervised clockdomain mode isnt functional for all clockdomains on omap4430 silicon so avoid the same
1c7032258d568f9a7aeb4c541786699d9a219a2a	clk max77686 fix number of clocks setup for clk_hw based registration the commit clk max77686 migrate to clk_hw based of and registration apis converted the driver to use the new provider api to register clocks using clk_hw but unfortunately in the conversion it missed to set the num_clks value which lead to the following error when trying to register a clk provider __float__ of_clk_max77686_get invalid index __number__ __float__ error could not get clock __number__ __float__ s3c-rtc __number__ failed to find rtc source clock fix it by correctly set the max77686_clk_driver_data num_clks member
ca4a03143f6c911189f708a3a3c7eae3dfb8678c	acpica headers add new acpi __number__ hest notify type values add values __number__ cmci and __number__ mce
da6e4cb67c6dd1f72257c0a4a97c26dc4e80d3a7	arm64 fix for the arm64 kern_addr_valid function fix for the arm64 kern_addr_valid function to recognize virtual addresses in the kernel logical memory map the function fails as written because it does not check whether the addresses in that region are mapped at the pmd level to or pages continues the page table walk to the pte level and issues a garbage value to pfn_valid tested on and kernels
7352fb5a5b6891c51429b465d16aa16e8391bfc0	pass interrupt status to a5xx_rbbm_err_irq the interrupt status was being cleared before processing the handlers a5xx_rbbm_err_irq was checking the interrupt status again which would likely turn out bad because the interrupt status would be __number__ or at least different pass the original status to the function instead also skip clearing rbbm_ahb_error from the interrupt status the interrupt will keep firing until the error source is cleared skip the clear to avoid a storm until the error is cleared in a5xx_rbbm_err_irq
b85eec95ec5520037611727399f21692316e0213	staging comedi refactor dt2815 driver to remove forward declarations move the routines and the associated struct comedi_driver and other variables to the end of the source this is more typical of how other drivers are written and removes the need for the forward declarations
3a9465fa2dc42a8ebc2fe9144f4dfa23d5899f85	serial do not depend on grouped clocks the current clock support groups together unrelated clocks to a single clock which is then used by the driver this cant be accomplished with the generic clock framework so we instead request the individual clocks in the driver for there are generally three different clocks ipg bus clock needed to access registers ahb dma relevant clock sometimes referred to as hclk in the datasheet per bit clock pixel clock this patch changes the driver to request the individual clocks currently all clk_get will get the same clock until the socs are converted to the generic clock framework
78bb997ace926451ec8d1ed15178b161dc61b805	asoc wm2200 match wait_for_completion_timeout return type return type of wait_for_completion_timeout is unsigned long not int an appropriately named unsigned long is added and the assignment fixed up
4fed33f6485be65b1e8155c843987030a2ae74fa	calculate a new pipe_config based on new enabled state with the current implementation of intel_modeset_affected_pipes if a pipe will be enabled then it is in modeset_pipes well remove that mask in a follow up patch but want to preserve this behavior so just make that explicit
2011b1d0d31ae469c7a075061e03b7d4f5b49ba6	fix section mismatch for read_n_cells read_n_cells cannot be marked as since it is referenced from two functions that are not in that section of_get_lmb_size and hot_add_drconf_scn_to_nid
81214013130cd24142f6465f7f5a256fed530c17	scsi bnx2fc io errors when receiving unsolicited logo during the unsolicited logo processing the session is uploaded and offloaded after the relogin is complete in between any new ios are errored back as the upload completion flag is set upon exhausting the retry count the application fails the ios return target busy for all the cases when session is not ready
0c5bbeb8839172990e3b8aa82ae3c166e85a09bc	igb report unsupported ethtool settings in set_coalesce there are many settings possible using ethtool but not all of them are supported in igb report failure when an unsupported option is set
48b207d2698b77ddb0395de5c16190f2a0eb3a48	hdmi5 fix fc hsw value for some reason the hdmi fcs hsw value is programmed to hsw-1 theres no indication in the documentation that this would be correct and no other blanking value needs either so remove the
85dada09eeb31c0eb183e4b2fac01b2381706b79	virtio_blk remove struct request backpointer from virtblk_req we can simply use blk_mq_rq_from_pdu to get back at the request at completion time
a9f312d98affab387557e2795d4e11ad82a4e4e8	rxrpc only ping for lost reply in client call when a reply is deemed lost we send a ping to find out the other end received all the request data packets we sent this should be limited to client calls and we shouldnt do this on service calls
3827b64dba27ebadb4faf51f2c91143e01ba1f6d	regulator core resolve supplies before disabling unused regulators after commit regulator core dont use regulators as supplies until the parent is bound input supplies arent resolved if the input supplies parent device has not been bound this prevent regulators to hold an invalid reference if its supply parent device driver probe is deferred but this causes issues on some boards where a pmics regulator use as input supply a regulator from another pmic whose driver is registered after the driver for the former in this case the regulators for the first pmic will fail to resolve input supplies on regulators registration since the other pmic wasnt probed yet and when the core attempts to resolve again latter when the other pmic registers its own regulators it will fail again since the parent device isnt bound yet this will cause some parent supplies to never be resolved and wrongly be disabled on boot due taking them as unused to solve this problem also attempt to resolve the pending regulators input supplies before disabling the unused regulators
29b7a47a9df2534ed62c4783dcf76153ceb76a73	alpha convert print_symbol to use the new vsprintf extension to avoid any possible message interleaving
412cb87d28a1f299ee82fe1c8bfe6cbeec9a4655	media media vb2 return for polling if a buffer is available the vb2_poll does not need to wait next vb_buffer_done if there is already a buffer in done_list of queue but current vb2_poll always waits so done_list is checked before calling poll_wait
dc476e7c8e7824fd326c79f50d7302faca7a4c2b	fix memory allocation for at the restructuring of the bitmap types creation in ipset for the type wrong too large memory allocation was copied netfilter bugzilla id
8eecf7caad8687eae2812fc6467f156a8909eb12	ftgmac100 open code remaining register writes the helpers just take space but dont provide much value simple one line comments are more explanatory
3d4e6af8afe538e2bc5f0c52eb4dec6b50ede050	hpsa report allocation failures while allocating sg chain blocks
0f0520ba83e6eeeadfabb2b8750b9616219810ad	usb phy tegra make of_device_id array const make of_device_id array const because all of functions handle it as const
bcf8eb09b564096d47f9740ac16057e5f7c8d0f1	nubus remove superfluous interrupt as of commit m68k interrupts in this is no longer needed
34a6eda163975de55c5d6810276c5fa37087e366	net ipv4 change variable type to bool the variable fully_acked is only assigned the values true and false change its type to bool the simplified semantic patch that find this problem is as follows type t identifier b t bool b when any b
27e7190efd5b2f728686a8293af6d9bd34c4e562	netfilter xt_ct optimize xt_ct_notrack the percpu untracked ct are not currently used for xt_ct_notrack provides a single ct thats not optimal as the cache line will bounce among cpus use the intended __number__ thing xt_ct_target should select the percpu object __number__ refs commit netfilter nf_conntrack ips_untracked bit commit b3c5163fe0193a7 netfilter nf_conntrack per_cpu untracking
e56c92565dfe2c8de203f42f7d5237d14784b93d	acpi apei fix leaked resources we leak the nvs and arch resources if used in apei_resources_request they are allocated to make sure we exclude them from the apei resources but they are never freed at the end of the function free them now
423bd69e69f565167ba14e2fe61df76c3c4a0d26	clocksource arm_arch_timer change clocksource name if cp15 unavailable the arm and arm64 vdsos need cp15 access to the architected counter if this is unavailable which is allowed by arm v7 indicate this by changing the clocksource name to arch_mem_counter before registering the clocksource suggested by stephen boyd
a354e2c84eeebcd7d7bbdd71216895b8e9866b5c	mm highmem remove page_address_pool list we can find free page_address_map instance without the page_address_pool so remove it
df49093ae499882cb9cfb29f80f6abb10ae51d74	staging ozwpan correct ioctl numbers ioctl numbers were not in order rearranging them in ascending order
8d27657286a1e9e6ee7adaf4d0638cefd708a6fa	arm shmobile r8a73a4 wait for completion when kicking the clock to reconfigure clocks controlled by frqcra and frqcrb a kick bit has to be set and to make sure the setting has taken effect it has to be read back repeatedly until it is cleared by the hardware this patch adds the waiting part that was missing until now
35b1da4e1e1026b5195649170dfb9ebb52f808e0	input edt-ft5x06 return on copy_to_user error copy_to_user returns the number of bytes remaining but we want a negative error code here
842be75c77cb72ee546a2b19da9c285fb3ded660	cfg80211 make rate_info_bw_20 the default due to the way i did the rx bitrate conversions in mac80211 with spatch going setting flags to setting the value many drivers now dont set the bandwidth value for __number__ mhz since with the flags it wasnt necessary to there was no __number__ mhz flag only the others rather than go through and try to fix up all the drivers instead renumber the enum so that __number__ mhz which is the typical bandwidth actually has the value __number__ making those drivers all work again if vht was hit used with a driver not reporting it iwlmvm this manifested in hitting the bandwidth warning in cfg80211_calculate_bitrate_vht
619a1e31f2b190814fcb088c8f2281461fafd396	mfd use irqf_oneshot for max8925 generated by make sure threaded irqs without a primary handler are always request with irqf_oneshot
05453b7e97996a37db4dd7b97a788124b117dbde	alsa hda fix multi-io pin assignment in create_multi_out_ctls the multi-io pins are calculated with a blind assumption of __number__ this isnt always true
1a4493c55594842fa75a91ba95c73056a29f25e6	staging rtl8723au fix static symbol sparse warning fix sparse warning warning symbol efuse_getcurrentsize23a was not declared should it be by removing efuse_getcurrentsize23a since its never used
0701e49da9852e455d63efb7bcd225d3c8af11df	scsi ufs kick start clock scaling only after device detection ufs clock scaling might start kicking in even before the device is running at the fastest interface speed which is undesirable this change moves the clock scaling kick start only after the device is detected and running at the fastest interface speed
d437c86baacf265a640dfc462c75941d02c0e153	ieee80211 define akm suite selectors type __number__ __number__ and __number__ reference ieee akm suites
7bccc36544a8b4a7d768f8ccdd6001a52872aca9	n_tty fix stuck write wakeup if signal-driven is disabled while write wakeup is pending n_tty_write has set tty_do_write_wakeup but then signal-driven is disabled the tty_do_write_wakeup bit will never be cleared and will cause tty_wakeup to always call n_tty_write_wakeup unconditionally clear the write wakeup and since kill_fasync already checks if the fasync ptr is null call kill_fasync unconditionally as well
a177c72bf57f70585f08231145b2431b4182b2b4	media dvb_usb_v2 move i2c adapter code to different file no worth to keep it on own file as it is only __number__ loc
d01115752f5e37b2c79280d60c0e8e19267a0cc9	ixgbe dont do arithmetic operations on bitmasks make the calculation of eerd consistent between the read and write functions by using instead of for ixgbe_eeprom_rw_reg_start
7328823d0052bbdb15af162f9f510ced811bdfe8	asoc wm_adsp release firmware on memory allocation failure
23f554855911f788474b52ff3b7af656b5b61239	batman-adv place kref_get for tt_orig_list_entry near use it is hard to understand why the refcnt is increased when it isnt done near the actual place the new reference is used so using kref_get right before the place which requires the reference and in the same function helps to avoid accidental problems caused by incorrect reference counting
e0d7924a4aaadfb779178f00ff67e96c895eb5eb	net make struct unsigned int size_t is way too much for an integer not exceeding __number__ space savings __number__ bytes function old new delta napi_consume_skb __number__ __number__ __kfree_skb_flush __number__ __number__ __kfree_skb_defer __number__ __number__ total chg
f7b5dff0b59b20469b2a4889e6170c0069d37c8d	media media use all bits of an enumeration the allocation takes place in longs assign the size of the enum accordingly
b2bda2f7450fa7ed4ae826c61d3a4b302024a297	bnx2x remove useless return variables this patch remove variables that are initialized with a constant are never updated and are only used as parameter of return return the constant instead of using a variable verified by compilation only the coccinelle script that find and fixes this issue is type t constant c identifier ret t ret c when ret when strict return ret c
41c7d9c96342989cd4a7efe27f768df4528294f7	e1000e cleanup remove unused all references to e1000_ert_2048 have been removed
1630d85a831273868651d46d74f069e0cdf9b698	au1200fb fix hardcoded irq use the irq provided by platform resource information required for au1300 support
46ddeff30e59749aecff9b1357855f7d7bfe74b8	serial st-asc remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
044453b3efdc90bdd5feffe74b99d95dec70ac43	arp fix possible crash in arp_rcv we should call skb_share_check before pskb_may_pull or we can crash in pskb_expand_head
ac22521cb2dc07e0b2193868c647dee5d737f85a	media tlg2300 fix checking firmware in poseidon_probe check_firmware makes sure firmware is in a device it returns zero on success and error code otherwise also it sets down_firmware flag to __number__ if downloading occurs the only caller poseidon_probe checks down_firmware flag and returns __number__ without any initialization if it is set that looks very strange so the patch removes down_firmware argument of check_firmware and returns error code if check_firmware fails in poseidon_probe not tested on real hardware found by linux driver verification project
6b562f63dd603443c97c885daa2b88bff700b2dc	alsa line6 fix memory leak at probe error path fix memory leak at probe error path by rearranging the call order in line6_destruct so that the common destructor is always called also this simplifies the error path to a single goto label
fc4ac67bc98f1d54ec0ef8bcddf54892ad78e1f9	i40e do not directly increment tx next_to_use avoid directly incrementing next_to_use for multiple reasons the main reason being that if we directly increment it then it can attain a state where it is equal to the ring count technically this is a state it should not be able to reach but the way this is written it now can this patch pulls the value off into a register and then increments it and writes back either the value or __number__ depending on if the value is equal to the ring count
3b281afbc3a06cd69c54e6db1a04a8e73997723f	cgroup make css_next_child skip missing csses css_next_child walks the children of the specified css it does this by finding the next cgroup and then returning the requested css on the default unified hierarchy a cgroup may not have a css associated with it even if the hierarchy has the subsystem enabled this patch updates css_next_child so that it skips children without the requested css associated
0825cce21f764c04a96b719af2b491011bc6c523	iio ensepgain is part of control2 register rename this definition no functional changes
7242d42ace30825553eabd424b41b03136d37faa	fix style errors replace spaces at beginning of the string with tabs and replace foo bar with foo in a pointer declaration
f5ec9b194a93c05e2ccdb3e90d9061cfedc806d9	clocksource sh_cmt allocate channels dynamically this prepares the driver for multi-channel support
307749406d7daea452d55df76f734b4fffddf599	ath6kl check for valid endpoint id in ath6kl_tx_complete endpoint id is checked to make sure it is valid
0cae4685a602a8bf9a86fa2417d6c035c09d6341	staging net remove use of __devexit config_hotplug is going away as an option so __devexit is no longer needed
48dc77e2d4fc2e5d85da6e6892f228a75272d040	dmaengine imx-sdma convert callback to helper function this is in preperation of moving to a callback that provides results to the callback for the transaction the conversion will maintain current behavior and the driver must convert to new callback mechanism at a later time in order to receive results
616c319683e34d10952b74a73ee12e080531b476	nfs ensure that attrcache is revalidated after a setattr if we get no post-op attributes back from a setattr operation then no attributes will of course be updated during the call to nfs_update_inode we know however that the attributes are invalid at that point since we just changed some of them at the very least the ctime will be bogus if we get no post-op attributes back on the call mark the attrcache invalid to reflect that fact
11d0d30093301169833aedfc130d9e4abe621be1	mfd tps65217 add compatible string for subdevices adds of_compatible strings to mfd_cells for sub devices of the tps65217
785ee27881411bd971d5e37a7fd72a5063fc1237	cpufreq intel_pstate fix rounding error a rounding error was found in the calculation of in intel_pstate_set_policy which is used to calculate the max and min pstate values in intel_pstate_get_min_max in that code is truncated to __number__ hex digits such that for example was incorrectly calculated to instead of this resulted in the pstate being set one level too low this patch rounds the value of up instead of down so that the correct max pstate can be reached
94b7b64c73515bc7689bd9d80e6d2fea536a3cef	wil6210 allow driver load if fw not ready usable for debugging to be able to obtain fw traces
2a4b8e9fab9cea45d90179d9ee8e718c5ed26457	f2fs remove redundant calls this patch removes redundant calls
a8fc415c29a62e4f0a7a932110ee9d8423e2cc52	asoc twl4030 separate write condition checking from function simplifies the code a bit and prepares it to the removal of local caching
1e6b6801405ec578c8607e9dabcc4e946ea64f4c	clk ux500 provide an alias for the smsc911x ethernet chip in the case of some of the ux500 platforms an ethernet chip is placed on an extended bus which is traditionally used as a nand flash chip placeholder the p3_pclk0 clock is used to control it so we are required to provide and easy way to access it from the smsc911x driver we do this using an alias provided by this patch
3772ab1d37bc02ae4fe7cccb8f6540ff49ace8f7	reassembly fix access of ctl table entry correct offset is __number__ of the value in proc entry ctl table and not __number__
531f64fd6f46a3f2a3edb1b97ecc827c775932c5	posix-timers convert abuses of bug_on to warn_on the posix cpu timers code makes a heavy use of bug_on but none of these concern fatal issues that require to stop the machine so lets just warn the user when some internal state slips out of our hands
8a57e95057acdc37362f09ede3d7520f71de6f93	fix crash in paths
f5f172dc031ace288c5bb5d18f0b956db08241c2	mtd cmdlinepart make it into a module all other partitioning schemes can be compiled as modules
5379f026613b7ecc7e46f15b2aad377177bb0e81	arm ux500 add supply for the cypress truetouch touchscreen this patch lists the cypress truetouch touchscreen as a consumer of the ab8500 vaux1 regulator
76886596921dd0e058f7f0a16de6151629390d15	igb reset phy in the link_up process to recover phy setting after power down there was a previous patch to resolve issue with __number__ losing phy setting after phy power down however that previous implementation triggered speed mismatch and occasional link lost now this patch resolves both initial phy setting and speed mismatch issues
7d331fa985d3a39d5b8cb60caf016d3e53e57c91	cgroup use restart_syscall for retries after offline waits in cgroup_subtree_control_write after waiting for a child to finish offline cgroup_subtree_control_write jumps up to retry from after the input parsing and active protection breaking this retry makes the scheduled locking update removal of cgroup_tree_mutex more difficult lets simplify it by returning with restart_syscall for retries
e28045ab2e2a8e27d08275bf70be33868beba8fd	check for null in iopte_free the iopte_free function should check for null because kmem_cache_free will panic on null argument
b27eb186608c89ef0979ae47c649859ceaa1b2e7	vmcore clean up read_vmcore rewrite part of read_vmcore that reads objects in vmcore_list in the same way as part reading elf headers by which some duplicated and redundant codes are removed
3a084ddb4bf299a6e898a9a07c89f3917f0713f7	net ip_multicast_if setsockopt now recognizes struct mreq until now struct mreq has not been recognized and it was worked with as with struct in_addr that means imr_multiaddr was copied to imr_address so do recognize struct mreq here and copy that correctly
d7fe833f3fc9a02806c96dd28f48e5e28c8484a8	mmc mvsdio avoid compiler warning gcc correctly points out that hw_state can be used uninitially in the mvsd_setup_data function this rearranges the function to ensure it always contains a proper value
a23c4dc422cff7bd30f40f5dc7c9ac4a6339005a	perf uprobes remove unnecessary check before strlist__delete since strlist__delete itself checks the additional check before calling strlist__delete is redundant no functional change link
c49e4e573be86acd36c747511ea5dc76be122206	vhost switch to use vhost_add_used_n let vhost_add_used to use vhost_add_used_n to reduce the code duplication to avoid the overhead brought by __copy_to_user we will use put_user when one used need to be added
f8bf876209a9828a456a9ac09ef6369a007dda2d	serial mfd remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
f150f02cfbc7b6b980e260856555abd73235a6b0	use proper list api for pending_list wakeups saves some loc and looks cleaner than re-implementing the calls link
63810f3b5514cc93189b329ddf15e13069b28f96	staging comedi gsc_hpdi remove pr_fmt define this driver no longer has any messages remove the pr_fmt
19b1d74fee8fd9dffb361e29daf0b0a36d398190	input omap4-keypad remove redundant platform_set_drvdata commit device-core ensure drvdata null when no driver is bound removes the need to set driver data field to null
b280db52cc71a0cb135c2ab9adc0592af6440812	change the logic for allocating uar registers this patch mainly modifies the logic for allocating uar registers in hip06 soc hw has __number__ group of uar registers for kernel and user space application the uar index is assigned as follows __number__ for kernel for user space application
86b6ef21b80ac6565d172cdab4384404de007eea	tracing add preempt disable for filter self test the self testing for event filters does not really need preemption disabled as there are no races at the time of testing but the functions it calls uses rcu_dereference_sched which will complain if preemption is not disabled
0ec8e7aa8f63f0cacd545fcd7f40f93fde2c0e6e	arm lpae remove unused macros these have already been removed from the classic mmu in favour of macros
3cdb35b074142c915a463c535839886ae08fdfd4	openvswitch enable all gso features on internal port ovs already can handle all types of segmentation offloads that are supported by the kernel following patch specifically enables udp and ipv6 segmentation offloads
615c8d8d534d58b3f0c35c28b9e6665c8227a54a	staging rtl8192e rename mratetohwrate8190pci use naming schema found in other rtlwifi devices rename mratetohwrate8190pci to _rtl92e_rate_mgn_to_hw
f783807308d1178683e583ccf268816bb05f41b2	ath9k fix uninitialized variable in ath9k_has_tx_pending in function warning may be used uninitialized in this function introduced by commit ath9k optimize ath9k_flush
bce91f8a4247905b8c40a53f72c14db908cd0710	openvswitch remove incorrect warn_once ovs_ct_find_existing issues a warning if an existing conntrack entry classified as ip_ct_new is found with the premise that this should not happen however a newly confirmed non-expected conntrack entry remains ip_ct_new as long as no reply direction traffic is seen this has resulted into somewhat confusing kernel log messages this patch removes this check and warning
c38cf10bbe35ba6fa10437809585fd4d0b3b604d	greybus operation allow maximum-sized messages increase the maximum allowed buffer size to the full range supported by the protocol note that host devices will generally use smaller buffers than the maximum
e146aaa62f3675a4bf14e86772514e650e110d9b	net natsemi remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
b141e811a0763bb107af4cd99d456193ccdb8053	nfc llcp decrease socket ack log when accepting a connection this is really difficult to test with real nfc devices but without this fix an llcp server will eventually refuse new connections
d02327a863168647b9e6fde610c4730ff4837f9e	bnx2fc check sc_cmd device and host pointer before returning the command to the mid-layer when we are in connection recovery and the internal command timer on a request pops either the or back pointers may be null as the device that the command that the request was submitted on may have been subsequently reaped due to the connection recovery this can cause one or both of the pointers above to be null and cause a system crash if we try to return the command to the midlayer instead double check the pointers before the return to the midlayer so as to prevent the crash and let the upper layers finish the session recovery and rediscover the device
031d1e0f2dc41be0859e6933fcf8b088098f7913	scsi ufs fix fall through comments these arent really falling through to anywhere meaningful
fba9573b33f8bddd772195c202f6b8ec0751cedd	cpufreq correct a freq check in cpufreq_set_policy this check was originally added by commit cpufreq return error when failing to set attempt to return an error on obviously incorrect limits when we echo xxx actually we just need check if because at least one of is copied from cpufreq_get_policy for example when we echo xxx new_policy is copied from policy in cpufreq_get_policy is same with is set to a new value let me explain it in deduction method first statement in if second statement in if induction method so we have proved that we only need check if after apply this patch we can also modify and at same time if new freq range is very much different from current freq range for example if current freq range is __number__ then we want to set this range to __number__ we would fail in the past because as long as the cpufreq range is valid we has no reason to reject the user so correct the check to avoid such case
e97dc3fcf98a32a5eda1e942a36044b95bc58099	netpoll warn if more packets are processed than are budgeted there is already a warning for this case in the normal netpoll path but put a copy here in case how netpoll calls the poll functions causes a differenet result netpoll will shortly call the napi poll routine with a budget __number__ to avoid any rx packets being processed as nothing does that today we may encounter drivers that have problems so a netpoll specific warning seems desirable
8286e96d95f2dd01a72e3500322ad95153a469c2	pci hv use the correct buffer size in new_pcichild_device we dont really need such a big on-stack buffer vmbus_sendpacket here only uses sizeofstruct pci_child_message
bc3603248fecbdeb4a2c0568fc6606f257b6ca23	media noon010pc30 improve s_power operation handling remove the now unneeded check for the platform data in s_power handler and the platform data pointer in struct noon010_info also do not reset the configured output resolution and pixel format when cycling sensors power add small delay for proper reset signal shape
1eab9234cbfdd72fe29a68f3da8002e2c74c0c36	add intel corporation as module author
8756cd1ded1af222fda4470b08ba547f5625e656	missing unlocks on error static checkers complain that we should unlock before returning which is true
ce25267907e15c8f69d54ba3fa02ae39aca7667f	staging wilc1000 remove function linux_wlan_rxq_task linux_wlan_rxq_task is not used in the driver just remove it
dd47ba13786f22893d08747c152a2cf1435d0d8c	blackfin wire up new process_vm syscalls
844e35bdfe834fccb5def1bc4cd614ca22409d0c	put iommu_domain pointer in in preparation for nested translation support stick a pointer to the iommu_domain in this makes it much easier to grab hold of the physical group configuration cbndx when dealing with vsmmu accesses from a guest
dd2762023e2dccc1b095032c65314035974b74f6	staging comedi addi_apci_1500 remove unused subdevices only allocate space for the subdevicess used by the driver remove all the comedi_subd_unused subdevices
429ff56a4ad5d9568a319f9368cc06c9f4f571af	ath10k fix channel definitions nonsense channel flags were being set although it doesnt seem this was visible to the user the patch makes sure that channel availability wont be crippled in the future if ath_common behaviour changes
fc36a903265c18d124cefaba364a7fa71b21be61	revert disable use of radix under a hypervisor this reverts commit now that we do have the machinery for using the radix mmu under a hypervisor the extra check and comment introduced in are no longer correct the result is that when booted under a hypervisor that only allows use of radix we clear the mmu_ftr_type_radix and then set it again and print a warning about ignoring the disable_radix command line option even though the command line does not include disable_radix
cf53380c88c0193107113932975ef4adf518a58b	asoc wm5110 replace the codec field of the snd_soc_widget struct is eventually going to be removed use instead
a18da49ff3ec849c4584ae3abe2b83ff50705ace	asoc zx i2s fix devm_ioremap_resource return value check value returned by devm_ioremap_resource was checked for non-null but devm_ioremap_resource returns iomem_err_ptr not null in case of error this could lead to dereference of err_ptr
b5326db8bb058a32c22ed82a8e359a8fe6f0bf9b	iwlwifi dont accept tx packets when draining hw queues if the agg sm is in iwl_emptying_hw_queue_addba or in iwl_emptying_hw_queue_delba we are not supposed to get tx packets from mac80211 mac80211 is supposed to buffer these packets for us a few issues have been identified in this mechanism not all of them were fixed
d0a7ebbc119738439ff00f7fadbd343ae20ea5e8	gre enable offloads for gre to get offloads to work with generic routing encapsulation gre the outer transport header has to be reset after skb_push is done this patch has the support for this fix and hence gre offloading
0fd67c1cb80231ff18633d5a22f56efe1f6ee917	clear an uninitialized struct member the uninitialized bug unused member confused coverity
3229b869d14263c870ce0d3df18ce48fa02a40f2	drivers staging ft1000 ft1000-usb check return value of get_user in ft1000_ioctl get_user may fail and cause msgsz uninitialized so need give a check the related warning with allmodconfig under hexagon cc m in function ft1000_ioctl warning msgsz may be used uninitialized in this function note msgsz was declared here
13465c0aeb9c56a4e4799f25aeff41d05f8a3fab	bluetooth a2mp correct assoc_len size correct assoc_len and fix warning for x86-64 by using specifier
3ce341ad5cb5a7769d981be58dc1cc71685e6cd2	staging ced1401 fix ced_copy_user_space rename camel case arguments and locals in function ced_copy_user_space
7c263fe025ab15553a40075d957f0de66628865e	gpio adp5588 use devm_gpiochip_add_data for gpio registration use devm_gpiochip_add_data for gpio registration and remove the call for gpiochip_remove from remove callback
06409808e3da79c42320e2dfb17a7a424c2fdfcb	staging netlogic fix multiple assignments avoid the use of multiple assignments in a single line checkpatch found this issue
80fe326ab8f5ac6c41786fa534a220c6e3f5beaf	use dma_rmb rather than rmb in cqe fetch routine use dma_rmb in mlx5e_get_cqe rather than aggressive rmb at least on some architectures this should help improve the performance on such cpu archs where dma_rmb is optimized performance improvement system intelr xeonr cpu e5-2620 v3 test case baseline now improvement tx packets __number__ threads tc stack drop __number__ core xdp drop __number__ core xdp tx __number__ core
4580cf38483790a4304a15328303566a054d4ea5	remove unneeded locking from iscsi_target_tx_thread when processing immediate queue were switching on a local variable so its not necessary to lock around it however we are modifying in two spots so lock around those parts only
881571c12fed1bacf100b13fb2ac528faf57390c	fm10k limit dma sync of rx buffers to actual packet size on packet rx we perform a dma sync for cpu before passing the packet up here we limit that sync to the actual length of the incoming packet rather than always syncing the entire buffer
1cf6563b3e9ecdfd8378fb81484632f715607a04	isp1760-hcd use usb_dt_hub fix using the bare number to set the bdescriptortype field of the hub descriptor while the value is in
6233362852785dbaffe1896d62ec834faf53fb57	hid i2c-hid remove unneeded test in i2c_hid_remove ihid can not be null so there are no reasons to test it
508c829994446fcb5d93cbc910bb45378ab28050	mfd add debug trace on entering and leaving arizone runtime suspend there doesnt appear to be any useful diagnostic information from the core
fea9fe8329c74159fb2030f1aacf29fdab9fc6d6	arm imx convert smp platforms to global gic_handle_irq convert the smp imx platforms to use the global gic_handle_irq function instead a private function
16ed8692fa487c0a1569edd0e210357c087e1cc5	enable use of device without irq
5b00c1eb94e5936e5bf5cdd9ad1ddfbed0c39159	x86 use arch_initcall to hook in enabling this was using module_init but the current kconfig situation is as follows in and in config cpu_sup_intel default y bool support intel processors if processor_select so currently the end user can not build this code into a module if in the future there is desire for this to be modular then it can be changed to include and use module_init but currently in the non-modular case a module_init becomes a device_initcall but this really isnt a device so we should choose a more appropriate initcall bucket to put it in the obvious choice here seems to be arch_initcall but that does make it earlier than it was currently through device_initcall as long as perf_pmu_register is functional we should be ok
ad334bbb07b07e2873942571b0c9f3c34571bd47	brcmfmac fix spelling mistakes on ivalid trivial fixes to spelling mistake ivalid to invalid in brcmf_err error messages
a1071a5abf1f4d4a7f8324e21b8b32b1342013c7	sony-laptop correct find_snc_handle failure checks since bab7084c745bf4d75b760728387f375fd34dc683 find_snc_handle returns not
e1910cb3190907334788c1887f8f61913208d0f3	iwlagn add offset define for subsystem id add offset define for subsystem id in eeprom
fc40363b2140f5777c88e67814fac9327bf1ee68	ahci fix broken fallback to single msi mode commit remove pci_enable_msi_block_auto introduced a regression if multiple msi initialization fails the code falls back to intx rather than to single msi
eefaf338820ecd3fb14da496f8a740612257a341	pci revert aeb30016fec3 pci add intel usb specific reset method revert aeb30016fec3 pci add intel usb specific reset method we checked for pci_class_serial_usb but contains the entire three-byte base while pci_class_serial_usb is only the two-byte base this error meant that we used the intel device-specific reset on devices with class code instead of those with class code is a reserved value in the backwards compatibility base class and shouldnt match any devices so i think reset_intel_generic_dev always failed i considered adding a shift but i cant test it so its as likely to break something as to fix something
e815f45e6e5fe40ca3049987eab80d89d5781f03	remove functions not needed anymore sparse warns us off warning symbol xen_swiotlb_map_sg was not declared should it be warning symbol xen_swiotlb_unmap_sg was not declared should it be and it looks like we do not need this function at all
9c34a7042e6fe79b900bd44db03dde8a4ecdf6f6	workqueue reuse the already calculated pwq in try_to_grab_pending try_to_grab_pending was re-calculating the associated pwq using get_work_pwq when it already has it cached in a local varible and the association cant change reuse the local variable instead this doesnt introduce any functional changes tj updated description
94ca629e40eb7e997be21d8065c25e4f3797b03f	uio_pdrv_genirq get irq through platform resource if not set otherwise platform devices are configured through platform resources the interrupt in the driver uio_pdrv_genirq is instead configured through a side channel the platform data structure make it possible to use the generic configuration scheme via platform resource
6fc1da9b4bba273989a707997f52b6382f608a2f	mac80211 use kstrtoull return value if kstrtoull returns an error code a value smaller than zero use it since it can be an error other than
f0bf8dd53d1a1c952784f1e5cf0c076cb514bdaf	staging rtl8723au stop passing ieee_parms argument struct ieee_parms is obsolete so stop passing it on
4b266e5fbc715e81c616ea122700475333fd3749	staging gdm72xx fix interruptible_sleep_on race interruptible_sleep_on is racy and going away this replaces the use in the gdm72xx driver with the appropriate wait_event_interruptible_lock_irq
4f7a5129134148ad917be5c4164a42823056a9f3	imx-tve fix the error message the error message should say hsync instead of vsync as we have just checked the property
781a5e92bc3b666bc5752e3ce7e977978c2f64e9	use skb_frag_page api this replaces raw access to the page field of the skb_frag_t
bed4d597a0f99b380d24ab3a9da47b62cbf1ad0e	cpuidle menu move repeated correction factor check to init in menu_select function we check for correction factor every time if it is zero we are initializing to unity hence move it to init function and initialise by unity hence avoid repeated comparisons
21a9d4c9d6c6bb22dffad67cb82f0037859262b7	sd fix up no need to verify the passthrough ioctls the real handler will take care of that also make sure not to block for resets on o_nonblock fds
17766dde364813568e4f876517c72bab70838646	mm thp count thp_fault_fallback anytime thp fault fails currently thp_fault_fallback in vmstat only gets incremented if a hugepage allocation fails if currents memcg hits its limit or the page fault handler returns an error it is incorrectly accounted as a successful thp_fault_alloc count thp_fault_fallback anytime the page fault handler falls back to using regular pages and only count thp_fault_alloc when a hugepage has actually been faulted
8d3c941e240ba26cb0eb45edfa938ef75f04945e	powerpc add machine_early_initcall
5cae84a58ee60eb54f636133f4f3ede9af93d476	hwmon it87 simplify error return in it87_device_add return directly on errors if there is no cleanup necessary dont create an error message on memory allocation errors
92eef520d77d106d9ea06b17294c5079edefe95d	batman-adv disallow zero and mcast src address for mgmt frames the routing check for management frames is validating the source mac address in the outer ethernet header it rejects every source mac address which is a broadcast address but it also has to reject the zero-mac address and multicast mac addresses
b715b51e18584f828effc11c6bd4a8c09834f9d4	staging bcm2835-audio remove unnecessary space after cast fixes checkpatch check no space is necessary after a cast
204aa273a7b7f2861ecc592c1fd722e7b51b6134	arm shmobile r7s72100 tidyup clock table order superh lookups clock is using macro for a long term but in these days the ick clock is defined in random place this patch arranges it
e690b5a9be26965543b7252492ed22052af960b6	staging hv vmbus change the memory barrier in hv_ringbuffer_write use the correct memory barrier interface in change the memory barrier in hv_ringbuffer_write
7f518dd09e246e96603533167d13b2ede27c20f7	remove orphaned prototype gen6_set_pm_mask the function was removed in commit author chris wilson chris-wilson.co.uk date thu mar __number__ __number__ __number__ revert pm intrrupts based on the current freq
0e53f472c3f6d72dd50b87456cce82343fbc73c6	bail out early for systems with no opregion vbt reduce indent no functional changes
be37a9900b0470fc424fe3382a414eabf759a8ac	mips malta malta-time ensure gic counter is running start the gic counter before we try to determine its frequency patchwork
4747f2bb496c4c7ed4dd47af637e2ad8f8b97c07	usb fix typo in correct spelling peridic to periodic in
fbbcd9be96a0295e9d127e124f72fa0039f53d8e	dmaengine pl330 simplify is_manager since we keep a pointer to the manager thread it is fairly easy to check if a thread is the manager thread
3b5d1981933b25973b02684dccb17d4282fd4d6d	mtd st_spi_fsm use device size to determine address width take some known parameters namely size and number of sectors and use them to determine weather a device can support addressing or not if it can set the associated flash capability flag for latter use acked-by angus clark
0532be078a207d7dd6ad26ebd0834e258acc4ee7	unconditionally call prepare_fb atomic drivers may set properties like rotation on the same fb which may require a call to prepare_fb even when framebuffer stays identical instead of handling all the special cases in the core let the driver decide when prepare_fb and cleanup_fb are noops this is a revert of commit fcc60b413d14dd06ddbd79ec50e83c4fb2a097ba author keith packard keithp.com date sat jun __number__ __number__ drm dont prepare or cleanup unchanging frame buffers v3 the original commit mentions that this prevents waiting in i915 on all previous rendering during cursor updates but there are better ways to fix this link
f48180a70e2f2676f87ba70c08f779ea9e699cc6	serial __number__ use dev_name during request_irq passing serial as name during request_irq results in all serial port irqs have same name this does not help much to easily identify which irq belongs to which serial port instance therefore pass dev_name during request_irq so that better identifiable name is listed for serial ports in cat output output of cat before this patch __number__ __number__ __number__ gicv2 __number__ edge serial after this patch __number__ __number__ __number__ gicv2 __number__ edge
1a965d405fc6f6b1e3454baad7001fed91c9c458	added cleanup provision in case of failure mma8452_set_freefall_mode can return value in case if i2c_smbus_read_byte_data fails this function is called from mma8452_probe and returning value from probe indicates probe failure need to call iio_triggered_buffer_cleanup iio_trigger_cleanup in this case
9bde31df56bdd8950e31ae409af5276cb324058c	rtc max77802 report platform modalias to fix module autoload if the rtc-max77802 driver is built as a module modalias information is not filled so the module is not autoloaded use the module_device_table macro to export the platform id table so the module contains that data
50b787f7235efbd074bbdf4315e0cc261d85b4d7	scsi cxlflash remove unnecessary dma mapping devices supported by the cxlflash driver are fully coherent and do not require a bus address mapping avoid unnecessary path length by using the virtual address and length already present in the scatter-gather entry
0315dd70a533dc48a11e0e4e7e19b3d8791917ae	staging nokia_h4p fix line over __number__ characters fix issue with line over __number__ characters in
bc39c4db7110f88f338cbbabe53d3e43c7400a59	use page_aligned instead of is_alignedpage_size use definition
2dea7cd7287781cd4bfd0167dba423e0f486ef61	usb serial ftdi_sio dont access latency timer on old chips the latency timer was introduced with the ft232bm and ft245bm chips do not bother attempting to read or write it for older chip versions
6c05d25267ebb371c4311de6904f740342e82f7c	r8169 spinlock redux rtl8169_get_regs operates under rtnl and rtl task mutex whereas rtl_set_rx_mode is either called under rtnl or rtl task mutex protection
e8740644ab5f906e131596d7580701b2ca855210	mmc mmci add edge support to data and command out in variant data this patch adds edge support for data and command out to variant structure giving more flexibility to the driver to support more socs which have different clock register layout without this patch other new socs like qcom will have to add more code to special case them ulf hansson resolved conflict
e715396ae3d55c4369ac3438e589a440780bc5ba	nouveau_fbcon_accel_fini can be static
fa4e5c67a2d169b9ef83f51b94e1d4a562ddfc0f	perf tools use list_move in ordered_events_delete function as namhyung pointed out we can use list_move in ordered_events_delete link
f95275c48b60fc486517f05da0800357dfd3ce2f	mwl8k send bastream firmware commands per vif the firmware supports __number__ macids corresponding to __number__ bss that can be created in an mbss environment currently bastream commands were always sent with macid __number__ this macid is used to configure the hardware ampdu registers with appropriate bss address in an mbss environment this mac address is used by the hardware for various ampdu related requirements source address in bar generation ba interpretation using invalid macid results in this mac address not getting appropriately configured in the hardware which results in issues during ampdu traffic fix this by sending the bastream commands with appropriate macid
fecbfabe1dc940525f26eb1683cf64137befc3c2	powerpc fix build with config_memory_hotplug on some configs for memory hotplug to work the mmu code needs to provide the functions create_section_mapping and remove_section_mapping to respectively map and unmap portions of the linear mapping at the moment only hash64 provides these so we provide weak stubs that just error out this fixes the build with configurations such as booke with config_memory_hotplug enabled
5ab05951c586a2ed9e19a3ed8c437346bfabbfb7	drivers hv add a check to deal with spurious interrupts we establish the handler before we have fully initialized the vmbus state deal with spurious interrupts
53bb857c373d6b7936f8a7b4451f0a99703c308e	rcu dump number of callbacks in stall warning messages in theory if a grace period manages to get started despite there being no callbacks on any of the cpus all cpus could go into dyntick-idle mode so that the grace period would never end this commit updates the rcu cpu stall warning messages to detect this condition by summing up the number of callbacks on all cpus
8d7f4fe9f561f4e3253478332192d88f6f135c41	make sure psr is ready for been re-enabled lets make sure psr is propperly disabled before to re-enabled it according to spec after disabled psr ctl the idle state might occur up to that is one full frame time rate plus srd exit training time max of plus srd aux channel handshake max of so if something went wrong psr will be disabled until next full setup v2 the above takes in account for refresh rate on mode however on low frequency modes this can take longer so lets use for safeness v3 move wait out of critical area
a36a99618b1adb2d6ca0b7e08e3a656a04e477fe	locktorture fix module unwind when bad torture_type specified the locktorture module has a list of torture types and specifying a type not on this list is supposed to cleanly fail the module load unfortunately the fail happens without the cleanly this commit therefore adds the needed clean-up after an incorrect torture_type
f39d5a88badb22139cca99b06fc4fe729450ba5c	alsa isight remove superfluous field remove a field that is not used at all this remained from earlier tests but the current driver has decided not to handle iris notifications
23ea9c4dda129fe1711f9fbda03c7a9c91cf1322	ftrace fix the output of enabled_functions debug file the enabled_functions debugfs file was created to be able to see what functions have been modified from nops to calling a tracer the current method uses the counter in the function record as when a ftrace_ops is registered to a function its count increases but that doesnt mean that the function is actively being traced can be set to zero which would disable it as well as something can go wrong and we can think its enabled when only the counter is set the records ftrace_fl_enabled flag is set or cleared when its function is modified that is a much more accurate way of knowing what function is enabled or not
b6080db4f4e8bf28717b832976efc421de25b86c	fix function name in some errors messages nvram_create_os_partition should be nvram_create_partition use __func__ to have it right as done elsewhere in this file
3510fac4549201919c565250fdff5cfa63db9e86	cpufreq postfix policy directory with the first cpu in related_cpus the sysfs policy directory is postfixed currently with the cpu number for which the policy was created which isnt necessarily the first cpu in related_cpus mask to make it more consistent and predictable lets postfix the policy with the first cpu in related-cpus mask
57ae575b8a51fd98c9b0066c6c030d5ccce3d77d	usb phy omap-control-usb convert to devm_ioremap_resource use the newly introduced devm_ioremap_resource instead of devm_request_and_ioremap which provides more consistent error handling devm_ioremap_resource provides its own error messages so all explicit error messages can be removed from the failure code paths
df3954ff72590fd20b68261a0c939e40fa3579ea	xfs increase xfs_btree_maxlevels to fit the rmapbt by my calculations a block ag with a block size can attain a maximum height of __number__ assuming a record size of __number__ bytes a size of __number__ bytes and half-full btree nodes wed need blocks for the records and million blocks for the keys that requires a btree of height __number__ based on the following derivation block size sblock crc header __number__ bytes for tree data rmapbt record __number__ records per leaf block rmapbt __number__ per block worst case each block is half full so __number__ records and __number__ ptrs per block __number__ rmap records __number__ records per block __number__ leaf blocks __number__ leaves __number__ ptrs per block __number__ level __number__ blocks __number__ level __number__ blocks __number__ level __number__ blocks __number__ level __number__ blocks __number__ level __number__ blocks __number__ level __number__ blocks __number__ level __number__ blocks __number__ level __number__ block
c1b1731d2002b93857810aa5da856b43f46bb470	drivers phy fix memory leak phy was not being freed upon error in one of the cases adjust the gotos to fix this
a0f24c8a9328b58c2881e6a1c139110700a1a584	brcm80211 smac remove duplicate definition of d11_phy_hdr_len the macro definition d11_phy_hdr_len was defined in and it has been removed from
6155a3cf11a6d4ed102ef5a30f655d4d2a38076b	staging unisys stop device registration before visorbus registration in cases where visorbus is compiled directly into the kernel if visorbus registration fails for any reason it is still possible for other drivers to call visorbus_register_visor_driver which could cause an oops prevent this by saving the result of the call to create_bus in a static variable and return an error code when the bus hasnt been registered successfully
1abd02e2dd7e0bd577000301fb2fd47780637387	dont rewrite the gtt on resume v4 the bios shouldnt be touching this memory across so just leave it alone this saves us on resume on my t420 retested with write combined ptes v2 change gtt restore default on pre-gen4 chris move needs_gtt_restore flag into dev_priv v3 make sure we restore gtt on resume from hibernate daniel use opregion support as the cutoff for restore from resume chris v4 use a better check for opregion chris danvet kill the needs_gtt_restore indirection and check directly for opregion also explain in a comment whats going on
8fb9dcbdc3619741c10c573199d804161c34c89a	kthread dont abuse kthread_create_on_cpu in __kthread_create_worker kthread_create_on_cpu sets kthread_is_per_cpu and this only makes sense if this kthread can be by cpuhp code kthread workers never call kthread_parkme so this has no effect change __kthread_create_worker to simply call kthread_bindtask cpu the very fact that kthread_create_on_cpu doesnt accept a generic fmt shows that it should not be used outside of now the only reason we can not unexport this helper and move it into is that it sets and struct kthread is not exported and the only reason we can not kill is that kthread_unpark is used by and thus we can not turn _unpark into kthread_unparkstruct smp_hotplug_thread cpu link
ae768d5fac18cd4b3ff51a4860b89fabba8ccc65	remoteproc snprintf can return more than was printed snprintf returns the number of characters which would have been printed if there were enough space for example on the first print if we fill up the __number__ character string then it would return a number more than __number__ use scnprintf instead because that returns the actual number of characters printed
74cd6503e5d4f01146dc18eb28d8fa3976914995	greybus es2 fix debugfs dentry leak fix dentry leak due to failure to remove debugfs file
e5a613537c4816830541046af12e8d37b075949c	mmc dw_mmc exynos fix the null pointer dereference error should be assigned to start the request so it can be the null pointer this patch fixed this error
38803141bf6ccf8f20d05c6f48e6e12c3650ce9a	msi-laptop add msi u270 netbook to module alias and scm list after test msi-laptop driver also can support msi u270 netbook so add msi u270s dmi information to module alias and scm table for support this machine tested on msi u270 netbook
543eabd5e1929bc73e22b279aa911eb01447535f	btrfs dont auto defrag a file when doing directio if we runt the direct io we should not run auto defrag because it may introduce buffered io vs direcio problem and make direct io slow down
d6e08617cb0fd7e5cd9effa6ba51dd00b06a0cf1	asoc intel update stream only on stream ipc msgs only update the stream when the ipc message type matches stream type
a7d3f104da57eecb2b9881127d6bdf9abe7fde99	nilfs2 refactor parser of snapshot mount option move parser of snapshot mount option to a separate function nilfs_parse_snapshot_option replace simple_strtoull with kstrtoull to avoid warning warning simple_strtoull is obsolete use kstrtoull instead and refine the error message of the parser link
e0c6db3e22f564d91832547a2432ab00f215108e	kvm x86 mmu do not use return to tail-call functions that return void this is pedantically not valid c it also looks weird
d642e4e7b42f379fb9383ef1505f9d67895fb815	mips smp-cps clear status ipl field when using eic when using an external interrupt controller eic the interrupt mask bits in the cop0 status register are reused for the interrupt priority level and any interrupts with a priority lower than the field will be ignored clear the field to __number__ by default such that all interrupts are serviced patchwork
36c92474498ad6cc3afb24b91a67a444d79978fe	net warn if skb_checksum_help is called on skb requiring segmentation skb_checksum_help has never done anything useful with skbs that require segmentation setting checksum_none makes them invalid and provokes a later warning in skb_gso_segment passing such an skb to skb_checksum_help indicates a bug so we should warn about it immediately move the warning from skb_gso_segment into a shared function and add gso_type and gso_size to it
f5bf30db01053883a812402cadf2e23b6902bc03	ath9k remove unneeded ref count initialization the interrupt reference counter is always initialized in ath9k_start
43cd7fe4957f29cb21d8feb60744f60cbbea030b	megaraid_sas modify drivers meta data to reflect avago
668e02004462487df8ec6c65c665ddb8af78dc12	acpi thermal add check of _tzd availability and evaluating result some machines dont provide _tzd so check the availability of it before carrying out futher operations if _tzd is present also check the result of its evaluation rjw changelog
a930430b047a0cc118bfc47ca54fcdfbadf091d2	bluetooth remove unnecessary in the mgmt_user_passkey_request and related functions do not do anything else except read access to this member never changes after the hdev creation so there is no need to acquire a lock to read it
61168c53f5be309332006dbd967aaac501cde8b2	extract gmbus_wait_hw_status the gmbus interrupt generation is rather fiddly we can only ever enable one interrupt source but we always want to check for nak in addition to the real bit and the bits in the gmbus status register dont map at all to the bis in the irq register to prepare for this mess start by extracting the hw status wait loop into its own function consolidate the nak error handling a bit to keep things flexible pass in the status bit we care about in addition to any nak signalling v2 ive failed to notice that the sense of gmbus_active is inverted chris wilson gladly pointed that out for me to keep things simple ignore that case for now we only need to idle the gmbus controller at the end of an entire i2c transaction not after every message
65e8d5b8cbff766628dad7d366986676f18b1e89	cfg80211 fix p2p-device stop locking cfg80211_stop_p2p_device requires the devlist_mtx to be held but nl80211_stop_p2p_device doesnt acquire it which is a locking error and causes a warning when lockdep is enabled fix this
a2ee151b6b6863d108552de82e02b77166ca23a8	use define instead of default_win member in struct mixer_context the default_win member in struct mixer_context isnt change its value after initialized to __number__ so its better using to define
baac167b706600ebe7158acaeb7c489ae9d0bb8b	pktgen avoid expensive set_current_state call in loop avoid calling set_current_state inside the busy-loop in pktgen_thread_worker in case of then it is still in pktgen_xmit via the spin call the set_current_statetask_interruptible uses a xchg which implicit is lock prefixed ive measured the asm lock operation to take approx on this e5-2630 cpu performance increase corrolate with this measurement performance data with __number__ single cpu performance ixgbe e5-2630 prev __number__ pps now __number__ pps diff pps
444d2921215ae6c21f90eb5fa5d03f784f84f1aa	correct offset_in_page mask bits in edac_mc_handle_ce parameter offset_in_page in edac_mc_handle_ce should mask the higher bits above the page size not the lower bits the original input sometimes causes a crash
b77a989acca3fb4d09c2d8c3749499c663f5ab9f	hid fix uninitialized variable size in hid-wiimote-debug this variable is initialized conditionally based on whether a wiimote call succeeds however the logic is not obvious to the compiler so it throws a warning eliminate the warning by initializing size to __number__ the warning is warning size may be used uninitialized in this function
2173bff5dcff4ca02226978f39648b66a8c3ca1e	ipv6 fix inet6_rtm_getroute to release in case of alloc_skb failure in ipv6 fix rtm_getroutes interpretation of rta_iif to be consistent with ipv4 the code of inet6_rtm_getroute was re-ordered such that the reference to is incremented prior skb allocation hence if alloc_skb fails must drop a reference from add the missing dst_release call
d6f1c316346c95b0a280954d5afca29459921a24	iwlwifi add trailing newline to some messages some messages were missing a trailing newline add it
e1e420c71b53829c661123a21b14a42d821e5e7f	simple_strtoul cleanup changed netdev_store to use kstrtoul instead of obsolete simple_strtoul
5a41344a3d83ef2c08e40bfce1efa5795def9b82	srcu simplify __srcu_read_unlock via this_cpu_dec this commit replaces disabling of preemption and decrement of a per-cpu variable with this_cpu_dec which avoids preemption disabling on x86 and shortens the code on all platforms
c938699ebb92918afe66776bb6d69277aea86507	staging rtl8192u fix line over __number__ characters fixed coding style issue line over __number__ characters detected by in
145949a1387ba7a4fd0df15181e09345ec7b0492	replace nr_node_ids for loop with for_each_node the functions used in the patch are in slowpath which gets called whenever alloc_super is called during mounts though this should not make difference for the architectures with sequential numa node ids for the powerpc which can potentially have sparse node ids for __number__ node system having numa ids is common this patch saves some unnecessary allocations for non existing numa nodes even without that saving perhaps patch makes code more readable take memcg_aware check outside for_each loop
8a06513df55ef10baf80f55d13786eb29efa4fa6	rtc rx8025 continue without alarm when irq request fails instead of bailing out disable alarms and continue when devm_request_threaded_irq fails this allows to still provide some functionality
016c0bbae1d17d4509b74227dca618e01263e61a	netxen use kobj_to_dev introduce the use of kobj_to_dev helper function instead of open coding it with container_of the coccinelle semantic patch used to make this change is as follows expression a symbol kobj container_ofa struct device kobj kobj_to_deva
56071a207602a451f0c46d3dcc8379b59ef576e2	use lane count and link rate from vbt as minimums for edp most likely the minimums for both should be enough for enabling the native resolution on the edp and well end up using the predetermined optimal link config for the panel v2 add debug prints bugzilla
2b29349044cc2cf74d4c6e23e26cd27977d91353	bluetooth fix confusion between parent and child channel for the new_connection l2cap channel callback creates a new channel based on the provided parent channel the code was confusingly naming the child channel pchan and the parent channel chan this patch swaps the names
31716a5ad32771be8339832b62aa030c263c6dac	mtd docg3 trivial renaming change the name of the mtd so that it is simpler and is easier to cope with by mtdparts
629e39eec88a6da187674816bf9d8fe960b07db5	mips ralink add memory definition to struct ralink_soc_info depending on the actual soc we have a different base address as well as minimum and maximum size for ram add these fields to the per soc structure patchwork
65f2b226763bc348a9b9145aa5e17e7e3f6d8c35	asoc sgtl5000 fix buggy capture attenuate switch control the sgtl5000 capture attenuate switch or adc volume range reduction as it is called in the manual is single bit only
5f2a2d5d423d5337a1392fa016ec23a8a4206006	drop dst nil validation in copy_msg d0edd8528362 ipc convert invalid scenarios to use warn_on relaxed the nil dst parameter check originally being a full bug_on however this check seems quite unnecessary when the only purpose is for msg_copy flag o the copy variable is set initially to nil apparently as a way of ensuring that prepare_copy is previously called which is in fact done unconditionally at the beginning of do_msgrcv o there is no concurrency with copy stack allocated in do_msgrcv furthermore any errors in copy and thus should always handled by is_err family therefore remove this check altogether as it can never occur with the current users
b63ab6b064f73721568a46080d41422ea223ee6e	media msi2500 remove unneeded spinlock irq flags initialization there is no need to init flags before calling spin_lock_irqsave spin_lock_irqsave is macro which stores value to flags
dcb32ecd9a533f47ab652c5c5680bc50a7a822cd	alsa hda do not assign streams in reverse order currently stream numbers are assigned in reverse order unfortunately commit alsa hda increment default stream numbers for amd hdmi controllers assumed this was not the case specifically it had the old cards had single device only extra unused stream numbers do not matter assumption causing non-working audio regressions for amd radeon hdmi users change the stream numbers to be assigned in forward order the benefit is that regular audio playback will still work even if the assumed stream count is too high downside is that a too high stream count may remain hidden bugzilla
38c977230c4947d1e99c558a603eb49666a42568	staging xgifb remove unnecessary check the check for htotal and vtotal is not required as we have already checked for them and returned if any of them is zero
2afc6dff692ea37c2dff0bdba452a85fe522cffd	net ethernet cpsw-phy-sel remove redundant of_match_ptr the data structure of_match_ptr protects is always compiled in hence of_match_ptr is not needed
8bac83289a061e9b080d500533f29b5822de5b80	xtensa iss change keyboard polling rate polling rate of once per __number__ seconds seems to be too low increase it to __number__ times per second
c67f5db82027ba6d2ea4ac9176bc45996a03ae6a	virtio_net replace netdev_alloc_skb_ip_align with napi_alloc_skb this gives small but noticeable rx performance improvement and will allow exploiting future napi improvement
0acdb8876fead922c9ffa6768c5675a37485c48c	ext4 dont call update_backups multiple times for the same bg when performing an online resize we add a bunch of groups at one time in ext4_flex_group_add so in most cases a lot of group descriptors will be in the same group block but in the end of this function update_backups will be called for every group descriptor and the same block will be copied and journalled again and again it is really a waste fix things so we only update a particular bg descriptor block once and skip subsequent updates of the same block
9300928692f835f76f5604b3b51c3085977edf68	regulator do proper shift to set correct bit for setting is bit __number__ of control register are defined as thus we need to left shift wm8350_dc2_hib_mode_shift bits
e8f4818895b3d7f34b3e5852bce77b3257a27ecc	media lirc advertise lirc_can_get_rec_resolution and improve this feature was never set the ioctl should fail if no resolution is set
518b680a8eb3ef953c80c9ef1bd6502e107b36fb	wlcore move ps change handling to adapt the new mac80211 bss_changed_ps notification and do the ps handling in mac80211s per-vif callback rather than in the per-device callback make sure to configure it only after association
bc75d5a0097b4100b4a4e06db62b2afb80d96393	media uvcvideo add function to convert from queue to stream factorize the container_of call into an inline function and update callers
4fbd804e009ae9dff29dcb1fbfa0aaffd3992880	dmaengine sun6i fix memory leaks the sun6i_dma_prep_memcpy and sun6i_dma_prep_slave_sg functions were both leaking the descriptor they allocated if an error was happening after a successful dma_pool_alloc call it also fixes a memleak that was happening in the scatter gather list traversal that was allocating as much descriptor as there was scatter gather items but only freeing the current descriptor if an error was to arise
cbea5ac1ee03197354bd38caad3fcb798f185181	btrfs reduce calls to wake_up on uncontended locks the btrfs locks were unconditionally calling wake_up as the locks were released this lead to extra thrashing on the waitqueue especially for locks that were dominated by readers
fcbee4d49f30eb0eaa83a62e6a3cab5a892ed93f	serial sh-sci add device tree support for r8a7779 according to the platform data for the legacy-c initialisation of sh-sci for the r8a7779 soc and my own testing the scix_sh4_scif_regtype bit of scscr needs to be set
7de07a4deb8e7707892b952daa59eff67701f0c3	sfc more sensible semantics for efx_filter_insert_filter replace flag the replace flag to efx_filter_insert_filter controls whether the new filter may replace filter and is checked even before priority comparison but lower-priority filters should never block insertion of higher-priority filters change the priority checking so that lower-priority filters are replaced regardless of the value of the flag and rename the flag to replace_equal
f1971a2e0393a86464caa77aa52168b731960dfa	kcm fix a signedness in kcm_splice_read skb_splice_bits returns int kcm_splice_read returns ssize_t both are signed we may need another patch to make them all ssize_t but that deserves a separated patch
723c58e428fbcbc9f16864edf740ec3bfaf3703c	rename __thread_clear_has_fpu to __fpregs_deactivate propagate the naming to the functions that clears it
443a813304ec36d4e81264b6a452a412a6b3ad9b	simplify set_guest_storage_key git commit ab3f285f227fec62868037e9b1b1fd18294a83b8 kvm try a cow on read only pages for key ops added a fixup_user_fault to set_guest_storage_key force a copy on write if the page is mapped read-only this is supposed to fix the problem of differing storage keys for shared mappings the empty_zero_page but if the storage key is set before the pte is mapped the storage key update is done on the pgste a later fault will happily map the shared page with the key from the pgste eventually git commit prevent and break zero page mappings in case of storage keys fixed this problem for the empty_zero_page the commit makes sure that guests enabled for storage keys will not use the empty_zero_page at all as the call to fixup_user_fault in set_guest_storage_key depends on the order of the storage key operation vs the fault that maps the pte it does not really fix anything just remove it
d1aceb80c685b0735268fba296523f5d7264ff22	gpio remove unneeded initializer in gpiochip_add_to_list this variable is used as an iterator and initialized in the list_for_each loop
2698f6206f53bc23a40a1412b304225a6d62d120	cleanup vm shadow bo unreferencing unreference the shadow bos in the error path as well and drop the null checks
3cc4a84e026e8d61b7ffe4a7367ed09a555f2c5b	proc add a reschedule point in proc_readfd_common user can pass an arbitrary large buffer to getdents it is typically a buffer used by libc scandir implementation when scanning we can hold cpu way too long so add a cond_resched to be kind with other tasks weve seen latencies of more than on real workloads
2e310235ca8f26efdeb150a10855ad8c1e886dad	staging comedi dt3000 rename dt3k_ai_insn for aesthetics rename this subdevice function to follow the normal naming in comedi drivers
8f9d9e0041e8f665b45ab1b25dc34faac01e22b7	staging wilc1000 change handle_get_ip_addresss return type to void when handle_get_ip_address is called in hostifthread that is a kernel thread it is not checked return type of this function this patch changes return type to void and removes braces if statement due to have a single statement
7552ed8a1a810552e16664d7020d61d2b01b9199	virtio-gpu dont free things on ttm_bo_init failure ttm_bo_init will call the destroy callback which will do all this this was causing a double free
70e89a71c83b1937f1662429b255cf21e51aecea	ath9k release the rf bus after setting board values
da58834cf2fa83fe3885753009fecaa49a85f246	ring-buffer rb_per_cpu_empty can return boolean makes rb_per_cpu_empty return bool to improve readability no functional change link
337d0665270ad1ebcbd58ddc1ce7769852f2391b	remove unused variable execlist remove the variable execlist as its unused in function vgpu_has_pending_workload
c64301a230a64dfc2fcf4581cd98a2d703f3c057	genirq introduce helper function irq_data_get_affinity_mask introduce helper function irq_data_get_affinity_mask and irq_get_affinity_mask to hide implementation details so we could move field affinity from struct irq_data into struct irq_common_data later link
5b209efa3fe809831e1e043657536cc3353ce5e9	pinctrl stm32 use builtin_platform_driver use builtin_platform_driver helper to simplify the code
8f706111a860c026bcb0abe0c5936f59c31e5c87	fuse remove unused variable in fuse_try_move_page the variables are initialized but never used otherwise so remove the unused variables dpatch engine is used to auto generate this patch
4e0ce6a4d5bd276bd9a61763a686f3e650848da5	asoc rt5670 constify acpi device ids and register defaults constify the acpi device id array and the register map no need to have them writable at runtime also drop the unneeded rt5670_init_reg_len define
77ec05d06fa8a6da65f104382b1026e413119df6	omapdss venc remove calls the callbacks in board files for venc omap_dss_device instances dont do anything hence we can remove these callbacks from the venc driver
b6f0bcc23fa9cb32752cbf263d4014a21f132f92	xen sync changes of hvm_param_callback_via abi from xen sync the changes of hvm_param_callback_via abi introduced by xen commit export the hvm_param_callback_via abi in the api
f61701e0a24a09aa4a44baf24e57dcc5e706afa8	arm kvm timer allow dt matching for armv8 cores armv8 cores have the exact same timer as armv7 cores make sure the kvm timer code can match it in the device tree
5a4faee2d01b615011ceb65c656250e4e6a274ee	media ngene preventing dereferencing a null pointer as reported by smatch init_channel error we previously assumed could be null see line __number__
0039a4b357477bd8bcd495e4160974c71657b3e6	dont claim that were resetting pch adpa register intel_crt_reset resets the adpa register on all platforms however the debug message claims its touching the pch adpa register which is clearly not what it does on vlv drop the pch part from the debug message
41cc07be42835a5c35b409af3914b8fcaedd0d72	mips pistachio enable kaslr allow kaslr to be selected on pistachio based systems tested on a creator ci40 patchwork
2be59418f76dac590b98027586ac1714be17fcae	asoc wm8974 use module_i2c_driver module_i2c_driver makes the code simpler by eliminating module_init and module_exit calls
c064a0de1bfb07c34a3798822c7e1636eea866e8	livepatch fix rcu usage in klp_find_external_symbol while one must hold rcu-sched aka preempt_disable for find_symbol one must equally hold it over the use of the object returned the moment you release the rcu-sched read lock the object can be dead and gone
3a36dd068f4308461661d28e8e14e11e426eba6b	arm exynos add s3c-hsotg device support for universal board this patch adds platform data for using s3c-hsotg driver at universal_c210 target
ce3d060990cd799cef4eeffc290090fb5da15e94	asoc kirkwood extend the min and max number of bytes per period this patch extends the min and max number of bytes per period it mainly permits to reduce the sound delay in midi real-time playing
2f18d533757da3899f4bedab0b2c051b080079dc	lower the max real address to __number__ bits max value supported by hardware is __number__ bits address radix page table define a slot of __number__ bits for future expansion we restrict the value supported in linux kernel __number__ bits so that we can use the bits between for storing hash linux page table bits this is done in the next patch this will free up the software page table bits to be used for features that are needed for both hash and radix the current hash linux page table format doesnt have any free software bits moving hash linux page table specific bits to top of rpn field free up the software bits for other purpose
8e0366f9c7ceefaa1c9fdb9529d23011d655d49c	iwlwifi mvm fix the ack cts kill mask upon rssi event if a vifs rssi gets good enough we can enable reduced tx power if so we need to update the ack cts kill mask accordingly since the auditing for the interfaces was bad we enabled reduced tx power but didnt update the ack cts kill mask this is harmless since the firmware is most likely to discard this setting anyway but it is a good practice to update it
ec5ab8933772c87f24ad62a4a602fe8949f423c2	mmc host omap_hsmmc checking for null instead of is_err devm_pinctrl_get returns error pointers it never returns null
4f59e193d0123bae23d3cc12ea4acee68b639c77	staging rtl8192u deleted rtl8192_proc_module_remove function in this patch delete the rtl8192_proc_module_remove function that is not used in anywhere in the driver fix the following sparse warnings in warning symbol rtl8192_proc_module_remove was not declared should it be
7e868b6eff21edb59eb6a723dfd18761476ddb46	rbd dont treat ceph_osd_op_delete as extent op ceph_osd_op_delete is not an extent op stop treating it as such this sneaked in with discard patches its one of the three osd ops the other two are ceph_osd_op_truncate and ceph_osd_op_zero that discard is implemented with
1c8007b0769d37aa5fcb343b383b0af89ade2f71	jfs flush journal completely before releasing metadata inodes this fixes a race during unmount we need to not only make sure that the journal is completely written but that the metadata changes make it to disk before releasing ipimap and ipbmap
7a58bad0e63295dfa803973efcebc80cb730c7bd	add is_skl_gt3 and is_skl_gt4 macro it will be usefull to specify that affects only skl gt3 and gt4
3eb1fa7e0021bc03be1bf7f68b1913d959e29512	brcm80211 make ethtool_ops const all usage of ethtool_ops should be const also add comma at end of initializer list
232d26373d310a941ef2ab46e53ea62fe076ed13	jiffies use clocksource_mask instead of constant the clocksource_mask32 macro expands to the same value but makes code more readable link
54f2a2f42759b11ada761013a12f0e743702219a	fanotify fix up scripted conversions fanotify probably doesnt want to watch autodirs so make it use d_can_lookup rather than d_is_dir when checking a dir watch and give an error on fake directories
9a4580011da2a2a1a5a152e13dce2a32997d3ee9	convert to pci_scan_root_bus for correct root bus resources convert from pci_scan_bus to pci_scan_root_bus and remove root bus resource fixups this fixes the problem of early and header quirks seeing incorrect root bus resources
7d589edc6b41138872378bd9642d257b95834a35	mmc dw_mmc exynos remove incorrect __exit_p dw_mci_pltfm_remove is not nor should it be marked as __exit so we should not be using __exit_p wrapper with it
81ed4e3670853e4cebad88aeffc0ba1d90d4d6ed	nfit dont override return value of nfit_mem_init we were needlessly converting nfit_mem_init errors to
516541a00c6a6bced133158f0146b602a18dcbe5	asoc soc-dapm use with u64 type fix the following build warning in function snd_soc_dai_link_event warning format expects type long unsigned int but argument __number__ has type u64 should be used with u64 type
ee76875ea54f22f81b857b4617f9b608c4cde64c	staging xgifb vb_setmode delete if_def_crt2monitor checks code checking for if_def_crt2monitor is only executed for chips xg20 and there if_def_crt2monitor is always true so the flag is redundant
cdfb8694dc107c3b004b67dfbb392ae62d358e77	dsi add support for panel prepare and unprepare routines modify exynos_dsi driver to support the new panel calls prepare and unprepare
0d997b68574217b41c1288ee4c6728c7003aac1f	silence gcc warning on __number__ bit building on __number__ bit x86 triggers a warning in file included from from from from from from from in function radeon_ttm_gtt_read warning comparison of distinct pointer types lacks a cast enabled by default void note in expansion of macro min ssize_t cur_size minsize page_size off silence this warning by using min_t since cur_size will never be negative and its upper bound is page_size we can change its type to size_t and use min_tsize_t here
88ded4d8d94a550624e1827478e13fecf97a7b0a	perf script show proper message when failed list scripts perf shows the usage message when perf scripts folder failed to open which misleads users to let them think the command is being mistyped this patch shows a proper message and guides users to check the perf_exec_path environment variable in that case before perf script usage perf script or perf script record or perf script report script-args or perf script or perf script script-args list available scripts after perf script failed check for perf_exec_path env to set scripts dir link
b06b66c05babe3483a585508655c1edb9e07f8dc	ksz884x remove unnecessary setting of is being unnecessarily set during ring init it is already being set to the proper value when eth_type_trans is called on packet receive and the is not referenced anywhere else in the code
1c9de58acc06cba56b5f1bd17a5a74a66427f8b1	staging comedi cleanup comedi_recognize this function is more complicated than it needs to be because of the consts its not worth saving them when we drop the consts anyway when we return void
3f3752705dbd50b66b66ad7b4d54fe33d2f746ed	hid reject input outside logical range only if null state is set this patch fixes an issue in where usb hid control null state flag is not checked upon rejecting inputs outside logical minimum-maximum range the check should be made according to usb hid specification __float__ section the fix will resolve issues with some game controllers such as shortened and fixed spelling in commit message
ebb2475c4731d9c9940db6ff6514fab723e1f489	gpu host1x cdma drop unnecessary local variable the local pos variable doesnt serve any purpose other than being a shortcut for but the result doesnt remove much so simply drop the local variable
6067a0037ccad272e9697098ba9a5c9c3e109b70	avr32 wire up accept4 syscall the accept4 syscall is missing on avr32 fix this
d1aa06a1eaf5f751c9913703031d611599d8d3d7	dma-buf remove unneeded sanity checks ops and are guaranteed to be non-null by a check in dma_buf_export remove null checks on those variables in the other api functions
c45693a6480cee906557a9fba533a9f3c224f91e	clk mmp fix the wrong calculation formula the formula is fin fout factor so fout fin denominator numerator factor current clk_factor_round_rate and clk_factor_recalc_rate use wrong formula this patch will fix them
57c3686842114de3b0c00633591e9605c46fb769	atmel_serial fix rs485 half-duplex problem on our custom board we are using rs485 in half-duplex mode on an at91sam9g45 ser_rs485_rx_during_tx is not set as we do not want to receive the data we transmit our transceiver will receive transmitted data although the current driver attempts to disable and enable the receiver at the appropriate points incoming data is still loaded into the receive register causing our code to receive the very last byte that was sent once the receiver is enabled i ran this by atmel support and they wrote the issue comes from the fact that you disable the reception and not the usart reception channel in your case then you will still receive data into the usart_rhr register and maybe you have the overrun flag set so please disable the usart reception channel the following patch should force the driver to the receiver via fields of the usart control register it fixed the issue i was having slightly modify commit message
ba0333ead10246535134cb4a552c79b56e6a4894	staging comedi ni_daq_700 remove unneeded variables from the boardinfo the device_id and have_dio variables in the boardinfo struct are initialized but not referenced in the driver just remove them
cd8d984f0def2a8c5733a9468634ec3e0feec03d	spi-topcliff-pch fix to use list_for_each_entry_safe when delete list items since we will remove items off the list using list_del_init we need to use a safe version of the list_for_each_entry macro aptly named list_for_each_entry_safe
5fdc9c49f676cc9224df0830a26f7f993ada2517	remove unused dot_limit from vlv pll limits we dont use for anything on vlv so dont populate it
79aa03893df937967201b6ea34e8d4216b893a38	remove owner cleanup v2 the client id is now unique so no need to resert the owner fields any more v2 remove unused variables as well
246ee524a2846fc0f32b8ac9d846bc93e38851e8	put cooked vlank counters in frame crc lines use drm_accurate_vblank_count so we have the full __number__ bit to represent the frame counter and userspace has a simpler way of knowing when the counter wraps around link
e95f6dfbcfad748f76376f0de8c4f34457bb2fc3	fix sparse warning restricted __le16 degrades to integer this patch fixes the following sparse warning in warning restricted __le16 degrades to integer also the variable morefrag is changed to bool as it is being used as a bool
8bee2dead8326f4144eab10126448fb58b4b2ac3	staging comedi comedi_parport use comedi_request_region use comedi_request_region to request the region used by this driver remove the noise when the board is first attached as well as the error message when the request_region fails comedi_request_reqion will output the error message if necessary
f2a5e8f0023eba847ad2adb145b2f631934bb12b	fix the race in crash_fadump there are chances that multiple cpus can call crash_fadump simultaneously and would start duplicating same info to vmcoreinfo elf note section this causes makedumpfile to fail during kdump capture one example is triggering dumprestart from hmc which sends system reset to all the cpus at once makedumpfile read_vmcoreinfo_basic_info invalid data in makedumpfile failed running makedumpfile failed __number__ makedumpfile __number__ read_vmcoreinfo_basic_info invalid data in makedumpfile failed running makedumpfile __number__ failed __number__
b8ba8602b81a019c67bc1f34b6b68e8965086532	rtl8xxxu rtl8723bu_parse_efuse use a pointer to the struct rtl8723bu_efuse likewise for use a pointer to the efuse
5c75af1a451ec14a218c830a8246a1b34fc91e59	staging speakup fixes fixed two camel case issues
22c07f36269befbf092d833d2c7cf0e27a3e9d1f	mmc sdhci introduce sdhci_update_clock helper to re-enable clock there are three places where same piece of code is used lets split it to a separate function
f17b329b73a0393dc9d5fc5b4457189f92e5bbef	asoc rt5645 remove incorrect settings the patch removes the incorrect settings to avoid the pop sound in the first playback with headphone after boot
bff7b812465a797bc563e9938fa11316fcd2ac0d	edac mce amd print cpu number when reporting the error currently correctable eccs go through mcelog and do not print the scary mce banner in that case however reporting the core where the cecc happened is important information so dump it along with the decoded string albeit at risk of having a minor redundancy
aba1a8d77fe355d1b698e10b97c74974ca8b7438	staging iio isl29018 combine two return statements into one use the return value from isl29018_set_integration_time as the return value for isl29018_chip_init since this is the last piece of work inside that function
7ff56857e352c0a2f1ecaf662dbe93e3434e9ada	usb atm ueagle-atm dont print error when allocating urb fails kmalloc will print enough information in case of failure
3f4f3b5fede02d338383619ff57744a8415ccceb	sor configure proper sync polarities program the sync signal polarities according to the display mode
62d98c935456ee121b03d6a68aa3091a04085b7e	nfs4 avoid underflow when converting error to pointer in nfs4_create_sec_client flavor can hold a negative error code returned from nfs4_negotiate_security even though it is an enum and hence unsigned the code is careful to cast it to an int before testing if it is negative however it doesnt cast to an int before calling err_ptr on a machine where is larger than int this results in the unsigned equivalent of __address__ being converted to a pointer subsequent code determines that this is not negative and so dereferences it with predictable results so cast flavor to a signed int before passing to err_ptr
34a518a0794135f8ac4031e2ebe1a26d29bd008c	media s5p-tv remove the dv_preset api from hdmiphy the dv_preset api is deprecated and is replaced by the much improved dv_timings api remove the dv_preset support from this driver as this will allow us to remove the dv_preset api altogether s5p-tv being the last user of this code
eb5ed9a3221a30edc7b48b87af550dbcc0e82c80	acpi utils remove a pointless null check element cant be null because it is the address of a struct member
29f9f90ce3b96a98ec5757315ffb6a6d6c098d78	scsi qla2xxx update ql2xextended_error_logging parameter description with new option update the parameter description for the ql2xextended_error_logging parameter with the following new option __number__ verbose output __number__ target mode __number__ target mode management __number__ target mode task management
2dcbdce3610a1ba190a74b782b9f7f1f7f976325	dma mxs-dma use semaphores for cyclic dma mxs dma channel hardware reset command is not reliable and can cause a channel stall the only way to fix the channel stall is a dma engine reset to avoid channel resets we use the hardware semaphore counter for each transmitted segment the dma channel will decrease the counter by one to use this mechanism with cyclic dma we need to increase the semaphore counter with each completed dma command in the interrupt handler to avoid any interruptions between the dma transfers the semaphore counter is initialized with __number__ this way the counter can be increased in the interrupt handler without an influence on the transfer of the dma engine when disabling the channel we stop increasing the semaphore counter in the interrupt handler this patch was tested on with the saif dma channel
d927c59076f505a056e78a9fc9744069aa052cc8	extcon max77843 fix signedness bug in max77843_muic_set_debounce_time this patch fixes the variable type of ret from unsigned int to int type because the return type of regmap_update_bits is int type fix the patch description
b96f64dd473416d877cfc0bdf5efeeb705c68734	net ep93xx_eth use dev_get_platdata use the wrapper function for retrieving the platform data instead of accessing directly this is a cosmetic change to make the code simpler and enhance the readability
55b5a624a0cc5aa4b350fd50d78cf3415f795bfe	usb renesas_usbhs tidyup for smatch warnings this patch tidyup below smatch complaint usbhsh_endpoint_free warn variable dereferenced before check uep see line __number__ special thanks to dan
ab92d09d1306c738b751b839d81e867af1039d14	asoc cs4270 check that we can enable regulators on resume its possible that the regulator enable will fail and if it does we may as well just give up with trying to bring the rest of the device up and report the original error
0349c0854eb653596d7a15ef5556e8b55c3d0386	mmc dw_mmc remove the unnecessary mmc_data structure remove the unnecessary mmc_data structure instead can be used
99e94940697adec4f84758adb2db71f4a82c7ba5	brcmsmac reduce log spam in heavy tx make err print in debug move message to debug mode to reduce log spam under heavy tx iperf load this message prints in ht debug mode only brcms_c_ampdu_dotxstatus_complete pkt tx suppressed illegal channel possibly __number__
d25d5f28828708b81658cff6f676b710c7ee171d	usb qcserial centralize probe exit path creating a common exit path from qcprobe to make it easier to extend it
51b8c2cd92f1b59657a13339dffcca79c76126d1	hwmon emc6w201 trivial fix of spelling mistake unknwown unknown trivial fix to spelling mistake in dev_dbg message
337a1a8f7813841745014ab4a9d8672d9253c61f	staging xgifb vb_setmode delete xgi_vblongwait xgi_vblongwait is nop so just delete it
5897b038296ea84e501ba5f957e11939f8cf9be0	usb ehci-sh fix illegal phy_init running when platform_data is null if the platform_data is not set pdata will be uninitialized value since the driver has the following code if the condition is true when the pdata is uninitialized value the driver may jump to the illegal phy_init if pdata this patch also fixes the following warning cc in function warning may be used uninitialized in this function
7ce844a20eb58c9823205e091b815163464e9d19	replace by bug_on
79cb5b533aa9dbb05123b3b7d170e686da558a35	usb phy add smsc usb334x phy id adding new device id for smsc usb334x devices
163799872b65b0cbf0091d82971233cc3d2425d3	f2fs avoid redundant time update for parent directory in f2fs_delete_entry in call to f2fs_delete_entry dir time modification code is put at two places so remove the redundant code for timing update
48ee7d3a7f8f3ca90dfc5e1103e68c0044051acc	kvm s390 enable cei only if available lets only enable conditional-external-interruption if the facility is actually available
f208bd8df08d0659ecd9e09e992c79aab26cddfa	perf trace handle legacy syscalls tracepoints currently the code skips the first field with the expectation that it is nr but older kernels do not have the nr field nr change perf-trace to drop the field if it exists after parsing the format file this fixes the off-by-one problem with older kernels rhel6 perf-trace shows this for write __float__ __float__ ms writebuf count __number__ __number__ where __number__ is really the fd the huge number is really the buf address etc with this patch you get the more appropriate __float__ __float__ ms writefd buf count __number__ __number__ link
b115f400946dba529cfa9a769c2327ae6dbe3694	media cxd2820r tweak search algorithm behavior mpis based stbs running kernels and the enigma2 os are not able to tune dvb-t channels with the pctv using the current cxd2820r driver dvb-t2 channels instead work properly this patch fixes the problem by changing the condition to break out from the wait lock loop in the search function of the cxd2820r demodulator from fe_has_signal to fe_has_lock as a consequence the search function of the demodulator driver now returns dvbfe_algo_search_success only if the frequency lock is successfully acquired this behavior seems consistent with other demodulator drivers stv090x hd29l2 stv0900 stb0899 mb86a16 this patch has been successfully tested with dvb-t and dvb-t2 signals on both pc and the mipsel stb running enigma2 no apparent side effect has been observed on pc applications like kaffeine dvb-c is not available in my country so its not tested
99e22f783bbcd048819975b8a1463f39a9966bcf	btrfs remove unused variable from btrfs_new_inode variable owner in btrfs_new_inode is unused since commit d82a6f1d7e8b61ed5996334d0db66651bb43641d btrfs kill
a4a4f1916abbbc3148d79a37cf3fe4f3f6c604d9	kvm s390 make edat1 depend on host support we should only enable edat1 for the guest if the host actually supports it and the cpu model for the guest has edat-1 enabled
c3cb77f8980db9dba614822d2d4a4cc61e44c8e2	mtd silence some uninitialized variable warnings the tmp_retlen variable can be uninitialized if action fails its harmless except for the static checker warning i have moved the error handling earlier to fix it
8005f394ab3ffe2051c68dc434dd230f415cdd96	asoc wm8996 convert to module_i2c_driver
c2a0ab6bd5ccf031f87bc678152fb70befea5786	usb phy ab8500-usb fix eye diagram for ab8500 ab8500 has eye diagram issues when drawing more than from vbus force charging current to in case of standard host
2290fcb341a07cc22c0f7f7d529c137a78039cdf	mmc sdhci-bcm-kona kill the external_clk member in driver private struct actually we can use the clk in the struct sdhci_pltfm_host also change the external clock to core clock and kill two redundant private functions in this driver as suggested by ray jui
93ac53410a82a4f1bf2baf9d65d95cc29f2774ca	ipv4 dirty less cache lines in route caching paths dont bother incrementing and setting they are completely pointless and just slow things down
1e05b62ae4bd4c1209229de367b0989b39644f88	sh use the the pci channelss io_map_base commit sh switch to generic_pci_iomap failed to take into account the pci channelss io_map_base for mapping io bars this also caused a new warning on sh fix this without re-introducing code duplication by setting no_generic_pci_ioport_map and supplying a sh-specific __pci_ioport_map
88e816a2d5d53b791d0ecc314bf2369d826be1d2	media v4l ov9640 remove superfluous soc-camera client operations now that all soc-camera hosts have been ported to use v4l2 subdevice mediabus-config operations and soc-camera client bus-parameter operations have been made optional they can be removed
21c3c971d1eb5d5598ddb1eda2fc3e4d2c992182	netfilter nfnetlink_queue just returns error for unknown command this patch stops processing options for unknown command
85c1e7dae165acd004429f81fe52bfbf55b57a98	sched reorder struct lb_env members to reduce its size members of struct lb_env are not in appropriate order to reuse compiler added padding on architectures in this patch we reorder those struct members and help reduce the size of the structure from __number__ bytes to __number__ bytes on __number__ bit architectures link
3b5dde70b18e2aa05138466cd6b83f6529d4df0d	net mv643xx use these new helpers simplify implementing multi-driver modules and properly handle failure to register one driver by unregistering all previously registered drivers
60a471923869394a47c10262d080286eb01451b5	media save output from dma_map_sg dma_map_sg returns the number of areas mapped by the hardware which could be different than the areas given as an input the output must be saved to nent
022a478ce650f5c36d2a9badfd805368a90fb506	mtd atmel_nand remove pmecc_bytes_per_sector use instead for pmecc the pmecc_bytes_per_sector has same meaning as so remove pmecc_bytes_per_sector and use instead
55a1a9f1899e3001e32f73ccf6e29a71d9dd5fbc	media pt3 fix device identification as warned by smatch pt3_attach_fe error strncmp tc90522sat too small __number__ vs __number__ clearly the logic is doing the wrong thing as it is not comparing the strings on the right way
ca3562226a901ddf77c7da36077c25316c4c0bb7	off by one in nouveau_drm_vblank_enable the test here should be array_size instead of array_size
d7c41e83e2c3ae970d41187ae31fad50ccd63856	staging comedi pcmmio tidy up pcmmio_handle_dio_intr refactor the code to remove some of the indent levels remove mytrig the shift and mask end up making it the same as triggered anyway
f6f273bfe1e9d678de3598feb7906138cfe68b71	cxgb4vf remove superfluous call to pci_disable_msix there is no need to call pci_disable_msix in case the previous call to pci_enable_msix failed
07d0e554b5d10522b4cd6448108c0ad16403fea6	media dvb delete an unnecessary check before the function call dvb_unregister_device the dvb_unregister_device function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
dc1c93bef4690f7262bc10cf75a74564b477224d	analogix_dp introduce the pclk for grf for rk3399s grf module if we want to operate the graphic related grf registers we need to enable the pclk_vio_grf which supply power for vio grf ios so its better to introduce an optional grf clock in driver
177c0386ea5beb5b8c73d7dbde41487f3f4eabf4	video udlfb deletion of unnecessary checks before the function call vfree the vfree function performs also input parameter validation thus the test around the call is not needed this issue was detected by using the coccinelle software
f004ec065b4879d6bc9ba0211af2169b3ce3097f	mlxsw reg fix spvm max record count the num_rec field is __number__ bit so the maximal count number is __number__ this fixes vlans not being enabled for wider ranges than __number__
6a3d03e93e54a1780131c714de383d1782131a4d	omapdss dsi remove pll_locked field we have pll_locked field in struct dsi_data but it doesnt have any meaningful use anymore and can be removed
500368f7fbdd888038d3dda579823e9515f63a3b	lift out of do_splice_from
b4de2c5aab2d5cd84c2a648d825b0e48ca426e27	do not free fence buf when driver probes fence buf needs to be used on phase
00e4c3b6e285da90e736fbefff3d9e74a200ee54	asoc wm_adsp move core_ena to be co-located with start bit many firmwares do not wait for the start bit before they begin processing audio whilst this is a bug on the firmware side there are too many such firmwares in the wild to ignore the situation this patch moves the core enable to happen at same time as the start the firmware looses the ability to overlap its own startup with the audio path bring up but we ensure that all firmwares behave
de30a2ccb20d9baf5dac8a9c8ba8f0d9d5f4361e	asoc intel cancel hsw_notification_work before freeing the stream i suppose there is a possibility that hsw_notification_work may run after sst_hsw_stream_free which can lead to a kernel crash since struct sst_hsw_stream is freed at that point and stream container_ofwork struct sst_hsw_stream notify_work is not valid when hsw_notification_work is run
090bc267ea1013bbb33778b343b4acd78b9c5d9b	usb chipidea usbmisc_imx fix a possible null dereference of_match_device could return null and so cause a null pointer dereference later renaming tmp_dev to of_id like all others do in the process reported-by coverity cid __number__
4e09bff3301ac570cb5d68277e755f1759edfeb2	hisi_sas use u64 for qw0 in free_device_v1_hw by reading in into a variable the top __number__ bits were being lost in practice this was ok as they were zeroes
128f8f773d77d41a7dbcaf5d36325a0f4e7955cd	rt2x00 reduce window of a queues tx lock currently a lot of actions that can be done without the queues tx lock being held are done inside the locked area move them out to have a leaner and meaner code that operates while the tx lock is being held
4aff355cd51378b6e9ca8c0a3961571ebafd1367	media staging media cxd2099 fix sparse warnings in cxd2099_attach the following sparse warnings were fixed warning using plain integer as null pointer warning using plain integer as null pointer warning using plain integer as null pointer
ab19516a50b375c11b9fa442954a43454a730950	bluetooth debug correct the psm printing earlier we were printing before assigning any value
085ec0d945cd52caba3765e4cbcfe24cc136e905	alsa hda remove superfluous max_azx_dev max_azx_dev is no longer referred anywhere lets kill it
5e78e465abcba4a21e5cc52bef41aa4b3361957d	xtensa iss use kmalloc_array in simdisk_init a multiplication for the size determination of a memory allocation indicated that an array data structure should be processed thus use the corresponding function kmalloc_array this issue was detected by using the coccinelle software replace the specification of a data type by a pointer dereference to make the corresponding size determination a bit safer according to the linux coding style convention
bf279ece37d2a3eaaa9813fcd7a1d8a81eb29c20	staging comedi comedi_fops avoid orphaned proc entry move comedi_proc_init to the end to avoid orphaned proc entry if module loading failed
b819447dfc4bd120c9d6cd8521252d544fce8fe7	wil6210 fix protection against connections during reset existing code that ignores connection events during reset flow will never take effect since it locks the same mutex taken by the reset flow in addition in case of unsolicited disconnect events ignore those as well since device is about to get reset
f2b6303d4505b5b046691a936c346a0e376cd9f3	greybus remove apbridgea_shutdown_xx sequence if already done while reordering gb_deactivate sequence to avoid protocol error this was mistakenly added even during it is supposed to be done immediately after stop_tx and only once
045c6fdd37a01d950c0f5ca64733b53b184fe91b	rtc drop owner assignment from platform_driver platform_driver does not need to set an owner because platform_driver_register will set it
232365f660b0016dcf618723707f91f4a95013db	bury skb_copy_to_page no callers since __float__
0f52958b2cbdb45ec9993cb4a40fb9e02dfbd2f1	i40e init nvm update state on adminq init the adminq init is run after the empr that is triggered by the nvm update the final write command will cause the reset and will want to wait for the arq event that signals the end of the update but the reset precludes the event being sent the state is probably already at init but we set it so here anyway and clear the release_on_done flag as well change-id ie9d724a39e71f988741abc3d51b4cb198c7e0272
477778bb0e7c671860528946b412294684337c5e	mwifiex fix null pointer dereference in set_channel in set_channel callback handler priv pointer is derived from net_device sometimes net_device pointer coming from the stack is null which causes kernel crash this patch fixes the problem by deriving priv from wiphy when net_device pointer is null
a96afc6b75cf9e7991a9b869246c5dca2a8a4e7a	usb phy ab8500-usb fix phy tuning value select logic the driver supports both ab8500 and ab8505 but the actual phy tuning values logic sets ab8500 values if which is supposed to set values for ab8500 but incorrectly results true for ab8505 too fix this by adding an additional check
7fac49337175f031d679f7ce0dab980ed6711237	workaround broken display the display in pulses the hotplug line for link retraining after we cut power to the main link on the source even while its in d3
7451adc51661ac75d4b4c56056451a58cccf1967	ia64 perfmon use specifier to dump small buffers pfm_uuid_t value is defined as unsigned char __number__ thus we may dump its value as byte buffer using specifier
74e98be45fe069fcdb00f35eccbb179309ab65cd	mtd nand fix typo t_ald t_adl its adl ale to data loading time not ald
3cb7a7986ace516b97bb6bee2a78eba73e616a87	via-velocity update receive packets statistics addresses
0388df05088def7ce5f3dd1b2293f05739be2a23	drm change connector to tmp_connector this wasnt too harmful since we already look at connector which has the same effect as the loop for any non-cloned configs only when we have a cloned configuration is it important to look at other connectors furthermore existing userspace always changes dpms on all of them anyway
9761bc53c8e1c52f3f0aa4334f38fd87b0cf1613	update golden setting of polaris11
585423c8c4d2f39a2c299bc6dd16433e6141fba5	use div_round_up the macro div_round_up performs the computation n d __number__ but is perhaps more readable the coccinelle script used to make this change is as follows on expression n d __number__ d n d __number__ d
37147652cfaa20a87ead9bb04aec1834b40c5c97	reassembly fix return of init function this patch adds a missing return after fragmentation init otherwise we register a sysctl interface and deregister it afterwards which makes no sense
839aa56d077972170a074bcbe31bf0d7eba37b24	media v4l2-ioctl log buffer type __number__ correctly if userspace passed the invalid buffer type __number__ to the kernel then the kernel log would show since there was no string defined for type __number__ fix this
05f3e58b8633590b1319db22646dd78ba6de2660	media pulse8-cec serialize communication with adapter make sending messages to the adapter serialized within the driver send_and_wait is split into send_and_wait_once which only sends once and checks for the result and the higher level send_and_wait which performs locking and retries
69147121abf569bf3655a2000c6511f1f016d9f8	usb gadget net2272 fix sparse warnings fix the following sparse warnings warning using plain integer as null pointer warning using plain integer as null pointer warning right shift by bigger than source value note that the last warning is an actual bug since is a one bit value which is shifted by one bit in code
8709f1e4d68b0b3caf9783cf2463e5747943bff8	alsa dice remove superfluous field the pcm field was not actually used
0daf7d9605352d4f0c5575a897dd71787ea92b9c	iwlwifi dont call stop_device twice when we unregister from mac80211 it will down the device anyway
5a9294e5c535deab69831076af15cd35e1c95f8b	autofs dont get stuck in a loop if vfs_write returns an error __vfs_write returns a negative value in a error case link
8a027faf4cb2b071dcb565c94492e143f6786213	media ths8200 zero blanking level for rgb currently only rgb444 input data is supported so set to zero
e45efa28e578758d3c5ef0d7d3f88aadb9a61515	kvm s390 add low-address protection to test block test block is also subject to the low-address protection so we need to check the destination address in our handler
debf6d843eaa3622786c45eb6edbc46f38f31a90	iio accel mma9551 check gpiod_to_irq return value the return value of gpiod_to_irq should be checked before giving it to devm_request_threaded_irq in order to not pass an error code in case it fails
11fd982400a8779cb4b5f7cdc806008569ff545c	port oom changes to do_page_fault commit d065bd810b6deb67d4897a14bfe21f8eb526ba99 mm retry page fault when blocking on disk transfer and commit make pagefault killable the above commits introduced changes into the x86 pagefault handler for making the page fault handler retryable as well as killable these changes reduce the mmap_sem hold time which is crucial during oom killer invocation port these changes to the sh platform
9c3099f7cb02adf5a3554bdef96bdc24a3d468e7	libertas handle command failure immediately fail commands immediately when the request cannot be sent to the hardware this solves the following deadlock __number__ two commands are in the queue __number__ the first command is sent but causes a timeout which kicks off an asynchronous device reset __number__ the second command is submitted to the device and fails the failure is noted but the existing code waits for the timeout handler to take care of the failure __number__ the device reset kicks in causing the device surprise removed flag to be set as the device disappears from the bus __number__ lbs_thread notes this and enters adapter removed waiting to die mode without processing any further command timeouts while adjusting lbs thread logic to handle this situation may be one way to fix this it seems more practical to simplify handling of host_to_card failure so that the commands are failed immediately without waiting for more compliated timeout logic to kick in
22109785163310666cf9913bafbcc11c5aebe68a	clk pxa fix const discarding warning a recent change to mark parent names as const missed this struct member so we get warnings like warning initialization discards const qualifier from pointer target type fix it
3e457371f436e89ce9239674828f9729a36b2595	usb musb fix fifo reads for dm816x with musb_dsps looks like dm81xx can only do fifo reads like am35x lets set up musb-dsps with a custom read_fifo function based on the compatible flag otherwise we can get the following errors when starting dhclient on a asix usb ethernet adapter asix eth2 asix_rx_fixup bad header length __address__ offset __number__ while at it lets also remove pointless cast of the driver data
6812667381d4e7d1baa93464af6fd02175db96de	media dvb_usb_core fix sparse warning warning symbol dvb_usbv2_disable_rc_polling was not declared should it be
eac70053a141998c40907747d6cea1d53a9414be	vfs add vfs_copy_file_range support for pagecache copies this allows us to have an in-kernel copy mechanism that avoids frequent switches between kernel and user space this is especially useful so nfsd can support server-side copies the default means to first attempt copy acceleration but use the pagecache if that fails
b2cbf3b30e6d1237f8864c4c9123f2a68cdfedf6	alsa add missing of hda_gen_spec in the transition to the generic fixup code the call of snd_hda_gen_init and snd_hda_gen_free was missing
cc32382d9fd22dc8eebba4a245f50417267bda8e	serial imx make setup_ufcr more useful this function currently doesnt use its parameter change prototype to pass in watermark levels so we can reuse this function in the dma setup paths also relocate to be near the calling functions
b162d47e142581bfae356d9474856c972c40adbe	allocate dynamically avoid having too large a stack by creating the fake struct on the heap instead in function mock_file error the frame size of __number__ bytes is larger than __number__ bytes in function mock_file_free error the frame size of __number__ bytes is larger than __number__ bytes link cherry picked from commit
0855c6827f822b51b2b4fc86d1085f47463cb5c9	drm rcar-du document the rcar_du_plane_state structure document the structure fields using kerneldoc
920983458cbf4213e8a99567d8d22c3721723cd1	staging comedi das16 sample types are unsigned sample values in comedi are generally represented as unsigned values change the type of the data variable in das16_ai_munge from short to unsigned short for consistency
de2493c58573214b0cc235c32f9ac59aa8a89c44	rt2800 compensate tx power also for non rates on we skip compensate calculation for non rates on band i do not see that on vendor driver
9439881a38c2bef6807954732768d636ff94c0d5	staging comedi ni_labpc break lines after operators for consistency break lines before operators not after
37aa716a57f7c1fe5deaedff242e04f5a0f26b54	asoc staticize ak4641_dai
7b27ba4e9c8053ca73e2b21ece804f7e80c07ba3	ath9k do not register leds on ar913x led support is typically handled via system gpio on these platforms
f52078cf5711ce47c113a58702b35c8ff5f212f5	drivers hv vmbus release relid on error in vmbus_process_offer we want to simplify vmbus_onoffer_rescind by not invoking hv_process_channel_removalnull
4da2405606d47ca767e0c6ba556f127cfa2181d0	tty serial use atomic_inc_return in ioc4_serial we want to know the value of the atomic variable in intr_connect after the increment but atomic_inc doesnt per definition return the value it is just a pure coincidence that ia64 defines atomic_inc as atomic_inc_return so fix this mistake by using atomic_inc_return properly
c72d969b23253ee8196e4190ec2c15e7cf607372	make __intel_set_mode take only atomic state as argument with the use of drm_atomic_helper_update_legacy_modeset_state the last user of modeset_crtc is removed from this function
9c238ca8ec79c38ab22762b44aeaf7a42fc97b18	bluetooth check transmit errors for multicast packets we did not return error if multicast packet transmit failed this might not be desired so return error also in this case if there are multiple devices where the multicast packet is sent then return error even if sending to only one of them fails
580d4e3153f0d7a9a9235b675b0b7b13e2185a8b	mpt3sas remove redundancy code while freeing the controller resources
283bf33bf3035ebd22e974857a672be070a73e2a	media exynos4-is enable fimc-is clocks in probe if runtime pm is disabled ensure the device works also when runtime pm is disabled this will allow to drop an incorrect dependency on pm_runtime
4292504044a4fd4c5d9155dcb5c7b09ed6cbf611	cfg80211 allow the plink state blocking for user managed mesh wpa_supplicant or authsae handles the mesh peering in user space but the plink state is still managed in kernel space currently there is no implementation by wpa_supplicant or authsae to block the plink state after it is set to estab by applying this patch we can use the iw mesh0 station set plink_action block to block the peer mesh sta this is useful for experimenting purposes
956bc8696ecfb9ec56edd3cd2d8eb9492c34229f	phy phy-qcom-ufs-qmp-14nm remove site specific oom error message kzalloc will issue its own error message including a dump_stack so remote the site specific message
54f32fd5dff96a903f838de1efcdfb9831c5b207	hid make report_descriptor available for all devices currently the sysfs report_descriptor attribute is only available if the device is claimed we have the descriptor before we even create the device node so just instantiate report_descriptor statically
d0b03439f7845ad9a72cc0f0cbb1ed34a5de5a08	b43 dont unconditionally fall back to cck if the rate is ofdm check the current phy operating mode gmode to see if we should fall back from ofdm to cck for operation this isnt allowed note the fallback lookup is only done for rts rates normal fallback rates are done via mac80211 and arent affected by this change
7389882c81474d635a208726edb22938645ff9ad	x86 setup let early_memremap handle page alignment early_memremap takes care of page alignment and map size so we can just remap the required data size and get rid of the adjustments in the setup code tglx massaged changelog link
5938448b99275cba95167c3f9d39ca9225fdad38	asoc rockchip i2s remove unused variables the previous commit removed the only use of these variables
cfad65c7fa9e77c27025eb5c2098cfbd4d445eab	net dsa b53 remove and fields for driver remove and fields since module_spi_driver is used which set them automatically generated by
75c5a52da3fc2a06abb6c6192bdf5d680e56d37d	vfs allocate anon_inode_inode in anon_inode_init currently we allocated anon_inode_inode in anon_inodefs_mount this is somewhat fragile as if that function ever gets called again it will overwrite anon_inode_inode pointer so move the initialization of anon_inode_inode to anon_inode_init further simplified on suggestion from dave jones
5ac417efe66ddd7cd70a98f7f4e32a14ae40a651	media sh_vou avoid going past arrays smatch reports two issues vou_adjust_output error buffer overflow vou_scale_v_num __number__ __number__ vou_adjust_output error buffer overflow vou_scale_v_den __number__ __number__ it seems that theres actually a bug here the same var idx is used as an index for vertical and horizontal scaling arrays however there are __number__ elements on the h arrays and only __number__ at the v ones on the first loop it may select index __number__ for the horizontal array in this case if the second loop fails to select an index the code would keep using __number__ for the vertical array with is past of the array sizes the intent here seems to use index __number__ if the scale is not found so use a separate var for the vertical index
6710ea7a0287be4380ac81c37aa6e2683a04b153	arm edma remove num_cc member from struct edma the struct edma is allocated per cc bases so the member num_cc does not make any sense one cc is one cc it does not have sub ccs
d393c98f11a8a3355387d52386c885bc89970176	greybus manifest really minor cleanups this patch incorporates some very small cleanups to rearrange code a bit in gb_manifest_parse that ensures a manifest is big enough to hold a header if the manifest is exactly the size of a header the error reported will now be have __number__ rather than short manifest fix the function comment for gb_manifest_parse_cports use an interface not a interface and dont capitalize delete some braces when getting interface product string a few other minor changes to comments and white space
9393707190194eb8b42e412b444a03331db6862f	warn when a vblank wait times out this always indicates a bug somewhere
cbd757daf5ed29618214b4ec4e298c79117baa8e	alsa asihpi use snd_pcm_debug_name to get substream name
c50db82dcacfb4f6ab272f98ba964076b3ca529c	usb f81232 switch to generic tiocmiwait switch to generic tiocmiwait rather than rely on a custom implementation using racy interruptible_sleep_on note that this driver is mostly stubbed out so neither version of tiocmiwait will actually work until someone implements f81232_update_line_status
514c2304b4574dae28c3d7c0ad6b9cf296994140	x86 perf use hrtimer_start hrtimer_start does not longer defer already expired timers to the softirq get rid of the __hrtimer_start_range_ns invocation link
e471b40321a94f07d13b8a9e4b064885cf08835d	mlx4 use actual number of pci functions pf vfs for alias guid logic the code which is dealing with sriov alias guids in the mlx4 ib driver has some logic which operated according to the maximal possible active functions pf vfs after the single port vfs code integration this resulted in a flow of false-positive warnings going to the kernel log after the pf driver started the alias guid work fix it by referring to the actual number of functions
687b4209c83e9b0633f794949c0bc6fb1401ccba	media media controller get rid of entity subtype on kernel dont use anymore the entity inside the kernel
69218a48005d0c93b8e9ec483f42ead481a43034	wil6210 allow empty wmi commands in debugfs wmi_send there are many valid wmi commands with only header without any additional payload such wmi commands could not be sent using the debugfs wmi_send facility fix the code to allow sending of such commands
f5e193a16dbe715b82ae8c5b1d70a3ca8f07c1ff	delete an unnecessary check before drm_gem_object_unreference_unlocked the drm_gem_object_unreference_unlocked function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
9655aa6b8034ebb69724dc4b54ad4f64a53096d1	the freescale hypervisor driver doesnt need to check msrgs the msrgs bit indicates whether the kernel is running in processor guest state mode but such a check is unnecessary the driver already checks for the node and the property so it already knows that its running under the freescale hypervisor there is nothing in the driver that inherently requires guest state anyway this fixes a break that can occur in some randconfig builds
9c2d84deecc714075e5e0294ea662bcf1f6f2d30	sparc64 fix sparse warning in fix following warning error symbol die_if_kernel redeclared with different type originally declared at different modifiers add proper __noreturn to the implementation to fix this
47c2f292cc8669f70644a949cadd5fa5ee0e0e07	call booting time xsaves and xrstors in setup_init_fpu_buf setup_init_fpu_buf calls booting time xsaves and xrstors to save and restore xstate in xsave area link
c99c7a9ac6756964b0ffa508b9b4f55b5be7d12b	clk loongson1 update clocks of loongson1b this patch updates some clock names of loongson1b and adds dma and nand clock
26eee0210ad72a29eb4a70b34320bda266f91a0d	fix a bug in xgmac_mdio there is a bug in xgmac_wait_until_done which mdio_stat should be used instead of mdio_data when checking if busy bit is cleared
8fb9397dafadacd8d3ae21a3f5ac3c473adfe6d4	broxton has __number__ sprite planes on pipe __number__ on pipe c v2 rebase on top of the for_each_pipe change adding dev_priv as first argument
65c0ff4079c011232e795e62c74a0a95512b7ac3	x86 stop recursive fault in print_context_stack after stack overflow after printing out the first line of a stack backtrace print_context_stack calls print_ftrace_graph_addr to check if its making a graph of function calls usually not the case but unfortunate ordering of assignments causes this to oops if an earlier stack overflow corrupted reorder to avoid that irritation the fact that there was a stack overflow may often be more interesting than the stack that can now be shown but integrating that information with this stacktrace is awkward so leave it to overflow reporting link
a0d72094f0abad3cbeeed618d24fd0ce1968d1a8	pinctrl sunxi add of_xlate function since the pin controller of sunxi chips is represented as a single bank in the driver since this is neither convenient nor represented that way in the datasheets define a custom of_xlate function with the layout pin
4ee0925da18f84146da698b7843ceabf9053f834	staging unecessary error messages in fixed removal of unecessary error messages in
16e3cf73befecd882399d6ec7b12e8fb2c7abf73	qlcnic skip idc ack check in fw reset path in fw reset path we should consider any change in device state as an ack from the other driver when that happens we dont have to wait for an explicit ack
87da3b832e54bcee7fac220bec00ca42b931bab0	scsi libfc wait for e_d_tov when out-of-order sequence is received when detecting an out-of-order sequence we should be waiting for e_d_tov before trying to abort the sequence the response might still be stuck in the queue somewhere
c9bfbb31af7c8428267b34eb9706a621ac219a28	tulip properly check dma mapping result tulip throws an error when dma debugging is enabled as it doesnt properly check dma mapping results with dma_mapping_error durring tx ring refills easy fix just add it in and drop the frame if the mapping is bad
245c5a18433090da0e1a799bdb0faa78552b5992	tools lib traceevent get rid of die from pretty_print there are three cases that call die in the pretty_print __number__ insufficient number of argument cannot proceed anymore __number__ too long format conversion specifier truncate and proceed __number__ bad size specifier in format string skip and proceed for all cases convert die to do_warning mark the event as event_fl_failed and print error message at the last link
505d8655f710b61c42ec74e3720dcf545f12a668	pci mvebu fix gpl v2 license string typo per license_is_gpl_compatible the module_license string for gpl v2 is gpl v2 not gplv2 use gpl v2 so this module doesnt taint the kernel bhelgaas changelog
2c8ea46d3e5462c54120f6bca42e2ccee4e48904	usb chipidea msm mark device as runtime pm active were not properly marking the glue device as runtime active so runtime pm believes that the hardware state is inactive when we call pm_runtime_enable in this driver this causes a problem when the glue layer has a power domain associated with it because runtime pm will go and disable the power domain to match the inactive state of the device lets mark the device as active so that runtime pm doesnt improperly power down this device when its actually active
8951ef021904752a843a81fee785f1b180f31c07	pm domains add missing static storage class specifier in file fixes the folloiwng sparse warning warning symbol __pm_genpd_poweron was not declared should it be
fea0896fd36cff487685970bfc36ddd96352d95b	usb ohci properly handle ohci-exynos suspend suspend scenario in case of ohci-exynos glue was not properly handled as it was not suspending generic part of ohci controller alan stern suggested properly handle ohci-exynos suspend scenario calling explicitly the ohci_suspend routine in exynos_ohci_suspend will ensure proper handling of suspend scenario
adfb8e51332153016857194b85309150ac560286	fix __number__ bit divide in si spm code forgot to use the appropriate math64 function
0b0a264df5d3854c3e6411c28616d2148c897bad	nfc fdp move i2c client irq checking it is cleaner to check if the i2c_client irq is not configured properly before allocating any data
f8a8c10f4a662dcf3cb621d7a3eba564c5963284	usb cdc-acm use tty_standard_install this is a piece i missed the last time do not copy the functionality all over the tree instead use the helper the tty layer provides us with
6af021d8fc3bcce790e7fbb391e39c5920fa3f71	btrfs return the internal error unchanged if btrfs_get_extent_fiemap call failed for inquiry given that enxio only means offset beyond eof for either seek_data or seek_hole inquiry in a desired file range so we should return the internal error unchanged if btrfs_get_extent_fiemap call failed rather than enxio
eacd9aa98bdeef5ba19072d3f07dfcccd24988f2	drm sti fix return value check in sti_drm_platform_probe in case of error the function platform_device_register_resndata returns err_ptr and never returns null the null test in the return value check should be replaced with is_err
e85ac12443da72d79dbf7c55c12e4b16b8923d87	accept a base-16 seed for randconfig
275744cc8da0fd006e8f8fc1090f01dc0296810d	reduce the scope of defconfig_file this variable is not used outside of main so there is not much reason keeping it global ensure it is initialized as gcc has no way to know that normal execution path expect only one option switch to be given on the command line except when we request help as a result we always initialize defconfig_file before using it
d8d4f7f875bb8f94c52583a788e456eabbd6281a	pinctrl abx500 fix abx500_gpio_get allow to get output gpio value as there is no gpio0 on abx500 use correct offset with abx500_gpio_get_bit
ebff01137acd21534fffaffcf35cd4a3681b95ae	lguest convert console device to virtio __float__ pci
a5998fcb92552a18713b6aa5c146aa400e4d75ee	optimise tlbiel flush all case _tlbiel_pid is called with a ric radix invalidation control argument of either ric_flush_tlb or ric_flush_all ric_flush_all says to invalidate the entire tlb and the page walk cache pwc to flush the whole tlb we have to iterate over each set congruence class of the tlb currently we do that and pass ric_flush_all each time that is not incorrect but it means we flush the pwc __number__ times when once would suffice fix it by doing the first flush with the ric value were passed and then if it was ric_flush_all we downgrade it to ric_flush_tlb because we know we have just flushed the pwc and dont need to do it again mpe split out of combined patch tweak logic rewrite change log
c63b30b08971ad5894061841a2c7f012eea747c0	gpio stp-xway use gpiochip data pointer this makes the driver use the data pointer added to the gpio_chip to store a pointer to the state container instead of relying on container_of
877bef7de141db241e0c5d06db988b4ecbe29cf3	input sun4i-ts really fix a10 temperature reporting the commit titled input sun4i-ts a10 sun4i has a different temperature curve contains a math error the offset it uses is in degrees but the actual code applies the offset before multiplying by stepsize given that this is rather backwards every math course ever thought applies the multiplication before the offset for linear functions this commit fixes things by changing the code applying the offset to do the logical thing adjusting the offset for the other models accordingly this has been tested on an a10 a13 a20 and a31 to make sure everything really is correct now
de256a4e6b9096070a5305950c7d693395150680	perf evsel remove duplicate member zeroing after free no need to set to null after calling perf_evsel__free_fd as this method already does that link
b0d3dc1291e862c17c003cb4a9a6e20c79f5bd78	blackfin bf526 restrict reboot workaround to __float__ silicon the bug in the bf526 rom when doing a software reset exists only in older silicon versions so dont clear swrst on newer parts
3beef62479bef4309a220f7ca5415d9a66c0b0cb	mmc sdhci-s3c remove unused define for num_gpios num_gpios is not used after e19499ae10903 mmc sdhci-s3c let device core setup the default pin configuration thus remove it
a882003714ec94a3108b47ea5c0cf2a6ec1f3e98	toshiba_haps replace sscanf with kstrtoint this patch simply replaces the use of sscanf with kstrtoint returning the error code in case that something went bad
0788e3375ae33c5a175ba3d394b995d4fdc823b5	msi-wmi remove sparse_keymap_free calls as sparse_keymap_setup now uses a managed memory allocation for the keymap copy it creates the latter is freed automatically remove all calls to sparse_keymap_free
6affb4826405dc1f53bae0e5c302a18f734a44ca	arm tegra use setup_mm_for_reboot rather than explicit pgd switch this patch changes the tegra pm code to use the setup_mm_for_reboot helper rather than call cpu_switch_mm directly this keeps things like tlb invalidation in one place
d1d81802522ade84128a2c66c0d500e372474dca	spi spi-gpio add dt support for a single device with no chip select in order to describe a single slave device that has no chip select line the num-chipselects property has to be and the cs-gpios property doesnt need to be set
d5b8f86dc7200d16e48bb3a6aaac29c0cdf621c9	xfrm policy dont acquire policy lock in xfrm_spd_getinfo it doesnt seem that important we now get inconsistent view of the counters but those are stale anyway right after we drop the lock
a2c49e7b553a28f10ab34e5da538ed4a45a697a7	clocksource sun4i cleanup parent clock setup the current bring-up code for the timer was overly complicated the only thing we need is actually which clock we want to use as source and thats pretty much all lets keep it that way
2d52d172398249f523b24cff9b84aee4e7b8e1b6	asoc wm8741 check for error returns from wm8741_set_pdata static checkers complain that ret is always zero so the conditions are never true the intention here was clearly to check for errors from wm8741_set_pdata although since wm8741_set_pdata never returns errors it doesnt affect runtime
0dea210b1769f191d6b2bc3cc86e51481837ec5e	pci fix typo in correct spelling resouce to resource in
c7797baf9f3900996ca800ab6298f95957bb4606	dcb add dcbx capabilities bitmask to the get_ieee response adding the capabilities bitmask to the get_ieee response allows user space to determine the current dcbx mode either cee or ieee this is useful with devices that support switching between modes where knowing the current state is relevant derived from work by mark rustad
cd0ff7eff08e7daeba278cf58392aac519edff60	asoc use devm_ functions the various devm_ functions allocate memory that is released when a driver detaches this patch uses devm_kzalloc devm_request_mem_region and devm_ioremap for data that is allocated in the probe function of a platform device and is only freed in the remove function in this case the original code did not contain a call to iounmap nor does one appear anywhere else in the file i have assumed that it is safe to use devm_ioremap for the allocation in any case
4b563ea317c2262987f0675abf15066614f536a1	asoc intel haswell fix initialize null device issue add initialization for at init stage which fix the null device warning issues
26b4bf2e0f0dbafa4dd575b03ffcb12710ef5611	wl12xx remove p2p ie from probe response wl12xx uses a single probe response template regardless of the probe request however the p2p spec forbids including the p2p ie in some cases the probe request didnt include the p2p ie the fw responds only to probe requests that dont include the p2p ie and passes up probe requests that include them the supplicant will answer them thus strip the p2p ie from the probe response template
02680b31a0b3757e121d27223b6fe21778f52408	fscrypt remove redundant assignment of res res is assigned to sizeofctx however this is unused and res is updated later on without that assigned value to res ever being used remove this redundant assignment fixes coverityscan unused value
32bd027dd700744b29b89c38353b5597e70ce802	staging comedi ni_660x remove ni_660x_get_pfi_routing this simple function is only called by ni_660x_dio_insn_config
4a2bbdb45e5538dcf3d9f3d9299dd7b9bc3c076f	fix sparse cast to restricted __be32 warning sparse cast to restricted __be32 sparse cast to restricted __be32
41bdc3cf81c4d0f0dfe09f06ff203dd59d422f37	media vsp1 declar vsp1_pipeline_stopped as static warning no previous prototype for vsp1_pipeline_stopped bool vsp1_pipeline_stoppedstruct vsp1_pipeline
169faecadd2444fc295c724c0a2f622b99e6bf19	grab in drm_fb_helper_single_add_all_connectors this is now truly only duct-tape to keep locking checks happy since calling this function when hpd or polling are already enabled is a bug the fbdev helper cant cope with hotplug changes yet at this point only after that otoh a bit more robustness in this function cant hurt and with this fbdev can actually cope with hotplug changes and its also more consistent with the connector dp mst needs to do therefore document this as new official behavior
57352ef4f5f19969a50d42e84b274287993b576f	fix memory access error in mlx4_query_dev_cap_wrapper fix a regression introduced by __number__ outbox was accessed instead of typo was copy-pasted to __number__ and __number__ __number__ cc1ade9 mlx4_core disable memory windows for virtual functions __number__ mlx4_core add support for steerable ib ud qps __number__ add basic support for offloads under tunneling
a5fd6f300433ef7458c6d934f81f47ebd7c7e805	bluetooth efs add enable_hs kernel param add enable_hs kernel parameter l2cap_feat_ext_flow depends on it
3b333c55485fef0089ae7398906599d000df195e	avoid high jitter with small frac divs
3a88bded203591d4683aacdbb65cd0f549bc58cb	kvm arm64 vgic-its simplify mapi error handling if we care to move all the checks that do not involve any memory allocation we can simplify the mapi error handling lets do that it cannot hurt
71d8f162ac50679ce45b537c18adbf83113de36b	remove useless entries from ventana_pinmux some of the entries in ventana_pinmux are identical to whats already in seaboard_pinmux remove the overrides from the ventana table
8559e7f0694e3fb192aab00a495be5a510afc8c3	firewire net release resources on ifdown since those resources are allocated on ifup relsase them on ifdown
016fc6a63e465d5b94e4028f6d05d9703e195428	btrfs dont flush the cache inode before writing it i noticed we had a little bit of latency when writing out the space cache inodes its because we flush it before we write anything in case we have dirty pages already there this doesnt matter though since were just going to overwrite the space and there really shouldnt be any dirty pages anyway this makes some of my tests run a little bit faster thanks
95f25beddba2ec9510b249740bacc11eca70cf75	set at irq init time before weve installed the handler we can set this and avoid confusing init code that then thinks irqs are enabled and spews complaints everywhere
6761049629402fc811961b4f996fec77169b5429	r8152 set rtl8152_unplug when finding set rtl8152_unplug when finding this could accelerate unloading the driver when the device is unplugged
64031e3e8a5c042840c5123af695eec89f9e6a24	acpi property fix compile error for acpi_node_get_property_reference when in commit acpi property drop size_prop from acpi_dev_get_property_reference the argument const char was dropped but forgot to update the stub function in no-acpi case it will lead to compile error when easliy remove const char to fix it
4af7b2c080715b9452fdaefb7ada72b4dc79593e	ufs bforget indirect blocks before freeing them right now it doesnt matter lock_ufs serializes everything but when we switch to per-inode locking it will be needed
2aaecfc51bc65532152e141df3268fda06cae029	perf script remove default_scripting_ops the default script handler the one that displays samples on screen is implemented scripting_ops instance with process_event callback this way we cant pass any script config into display function because we dont want perl or python handlers to be depended on perf script internals removing the default_scripting_ops and calling process event function directly this way its possible to pass perf_script struct and process configuration data in following commit link
31831f41bfd1e340bad66014a1b7ccd761ee51cf	gpio pl061 use the generic implementations instead of storing in the chip data whether the chip uses pinctrl and conditionally call just dont populate in that case this makes the implementations trivial and the same as the generic implementations thus we can just use them
288928658583a27256c6c295aeccd95a3ddcefce	mlxsw spectrum add missing rollback in flood configuration when we fail to set the flooding configuration for the broadcast and unregistered multicast traffic we should revert the flooding configuration of the unknown unicast traffic
751109aad5834375ca9ed0dcfcd85a00cbf872b5	acpi video change the default for to __number__ now that were hoping to have resolved all of the problems with make that the default at last link
ba4ed8605cb09b2cb72bf14499cf4605a0f9eb23	staging mt29f_spinand use the mtd instance embedded in struct nand_chip struct nand_chip now embeds an mtd device use it instead of allocating a new one
2d24cdaa6e389f85dad51eda39f1c2684a4f15b0	virtio console make discard_port_data use get_inbuf discard_port_data used virtqueue_get_buf directly instead of using get_inbuf fix this so that we get accounting for all received bytes this also simplifies the code a lot
088ce088ec115ee4bc89549b07b182e65dce9235	bluetooth remove unnecessary check the function already fails if the given size is greater than the mtu so there is no need to consider that case afterwards
b6392bd5b11d694a5d563d2ad1d88137d2cde036	arm omap1 amstrad delta fix wrong irq base in fiq handler commit add dt support to gpio driver introduced dynamic irq numbering of omap gpio interrupts breaking all ih_gpio_base based irq number calculations this issue was corrected in the omap gpio driver and the related header file with commit fix irq handling for sparse_irq however the amstrad delta fiq handler which replaces the gpio-omap driver in serving gpio interrupts on this board still uses that outdated method fix it
a70c6172e714c70439b8321a201635f56a178913	btrfs fix wrong mirror number tuning now reading the data from the target device of the replace operation is allowed so the mirror number that is greater than the stripes number of a chunk is valid we will tune it when we find there is no target device later fix it
bedbdd4297224efcd7d668198e32fab14b76b98b	perf debug rename __eprintfva_list args to veprintf adhering to the naming convention used when va_args is in a printf like function link
58f31812b0f42e821901343a12a589500912f2ad	staging media remove unnecessary goto remove unnecessary goto
2a9ed5d1fc5e7e88a22da2d85bbaf6fc5b4c2fb8	ixgbe make action field in struct ixgbe_fdir_filter a u64 value this field is used to record the rx queue index for a redirect action passed via ring_cookie field in struct ethtool_rx_flow_spec which is a u64 value for ex after adding a filter rule to redirect to a vf using ethtool echo __number__ ethtool p4p1 flow-type ip4 src-ip action __number__ querying for the rule shows the action as direct to queue __number__ ethtool p4p1 __number__ rx rings available total __number__ rules filter __number__ rule type raw ipv4 src ip addr mask dest ip addr mask tos mask protocol __number__ mask l4 bytes mask __address__ vlan ethertype mask __address__ vlan mask __address__ user-defined mask __address__ action direct to queue __number__ with this fix ethtool will report the right queue index even for vfs action direct to queue __number__ here __number__ corresponds to __number__ we need to update ethtool to report the queue index as a hex value so that it is more user friendly and matches with the action value that is passed when adding the rule
ce0dffafd403e7824ae78a806d08c04ff8112e79	i2c free idr when sanity checks in i2c_register_adapter fail on error we should give idr back to the pool in any case
b0bb3d0775224ef2ac6f0b68df353281a399d78e	handle vblank in vblank interrupt vblank should be signaled to userspace after reading framebuffers not before signaling it in te interrupt looks wrong te triggers reading framebuffers so it is the worst moment tearing is not observable because hardware prevents it but there are frequently skipped vblank events
e58d1cf24309b3b58c7cff7ea1f873e498fdaa39	update radix__pte_update to not do full mm tlb flush when we are updating a pte we just need to flush the tlb mapping that pte right now we do a full mm flush because we dont track page size now that we have page size details in pte use that to do the optimized flush
d36f47fa841984691a05ca6477dd26064963048c	serial efm32 correct namespacing of location property olof johansson pointed out that usually the company name is picked as namespace prefix to specific properties so expect but fall back to the previously introduced name
411b4121e3a38ff78695ae019642a9cab1babf12	bluetooth mgmt multi adv for get_adv_instance_flags the get_adv_instance_flags would not work with instance identifiers other than this is being fixed so that arbitrary instance identifiers can be dealt with while still correctly dealing with the special case of the identifier
7393fca924e22ad3c071d8bbcc5acda21d0c2710	dmaengine ioat set error code on failures in function ioat_xor_val_self_test when the calls to dma_mapping_error fail the value of return variable err is __number__ indicates no error as a result the return value may be inconsistent with the execution status this patch fixes the bug by assigning to err on the error path bugzilla
4c5591c1eee54b7775ea63635ae310a29f0207bb	replace strict_strtoul with kstrtoul the usage of strict_strtoul is not preferred because strict_strtoul is obsolete thus kstrtoul should be used
661468b4e2a91516c7ac75bf466fed58ccd74b27	fix gpl v2 license string typo per license_is_gpl_compatible the module_license string for gpl v2 is gpl v2 not gplv2 use gpl v2 so this module doesnt taint the kernel
98e7a989979b185f49e86ddaed2ad6890299d9f0	x86 mm make sure to find a free block for the first mapped area henrik reported that his macair __float__ would not boot with commit date fri nov __number__ __number__ x86 mm setup page table in top-down it turns out that we do not calculate the real_end properly we try to get size with alignment and later will round down to so we will get less then for first mapping in extreme case could be only only in henriks system it has as last usable rage is mem the problem is exposed when efi booting have several holes and it will force mapping to use pte instead as we only map usable areas to fix it just make it be aligned so we can be guaranteed to be able to use large pages to map it link
c909fc8573af3cff9184551e79cf37784b5ddc24	wm831x_backup fix wrong kfree call for points to the memory for is part of struct wm831x_backup thus remove kfree call for
3155a09fd5060190eea4f2585d55d6c5431837c4	hid wiimote parse calibration data of balance boards the raw pressure-data that is reported by balance-boards is pretty useless unless calibration data is applied therefore we read the full calibration data on extension initialization and apply it to every reported data
5b35dff0bbdcddb537d4c83097b39343a8f9300f	ath6kl store scan request info in-advance before sending scan request in current code scan request info is recorded in after sending scan request to the firmware in ath6kl_cfg80211_scan in some corner cases firmware sends scan_complete event immediately when it receives scan request which internally executes scan complete event handler ath6kl_cfg80211_scan_complete_event first so scan completion handler will a get a chance to executed even before storing scan request info in ath6kl_cfg80211_scan scan completion handler never report scan_complete event to cfg80211 if scan request is null this leads to scan failure issue device or resource busy error during next scan request from the user space this patch ensures that scan request info is stored before sending scan request
9c547699cce1f9da38af525b692fefb50d96158d	usb musb remove unnecessary void prefix at function calls just a little cleanup that removes unnecessary casts
0209b937569a133dedfe930cdfff3a0d1d68c9e9	timekeeping fix drift with generic_time_vsyscall_old the user notices the problem in a raw and real time drift calling clock_gettime with clock_realtime clock_monotonic_raw on a system with no ntp correction taking place no ntpd or ptp stuff running the problem is that old_vsyscall_fixup adds an extra even though xtime_nsec is already held in full nsecs and the remainder in this case is __number__ do the rounding up buisness only if needed
f6f6c9a5be996f266ff6fbe7850d76c3b0bdab95	arm omap beagle set usb host port __number__ to omap_usbhs_port_mode_unused the beagleboard usb host port that is used is port __number__ the platform driver sets mode_phy for port __number__ causing pin muxing to override the pins on the expansion connector p17 when using board_mux since usbhs port __number__ is not connected remove the case for muxing the usb port1 pins by default tested with beagleboard xm revc and checked the userguides for beagle xm and revc to be sure usb port2 is what is used
ecf3411a121e7a653e309ff50a820ffa87c537f8	cifs check if pages is null rather than bv for a failed allocation pages is being allocated however a null check on bv is being used to see if the allocation failed fix this by checking if pages is null detected by coverityscan logically dead code
6879eb2deed7171a81b2f904c9ad14b9648689a7	x86-64 fix alignment of jiffies variable its declared __attribute__aligned16 but its explicitly not aligned this is probably harmless but its a bit embarrassing link
d1d027eff5693c3cea71e4ce2f1c3a707baec02d	tty unexport system-wide tty_mutex tty_mutex is a core system-wide lock there is no reason for any code outside the tty core to have direct access
97271c3bcb83babe81cab0b79b374c7d732eff41	fix drvdata inconsistency the spi drvdata is set to adis16260_state struct in probe but assumed to be the iio_dev struct in remove fix this by setting it to the iio_dev in probe the issue has been discovered using the following coccinelle patch type t t data expression dev spi_set_drvdatadev void spi_set_drvdatadev data type t data position p expression dev data on position p expression dev identifier data
2e3d88602814e5fd5b88d5c73be3305060c473b6	xen mark xen_init_irq __init xen_init_irq should be marked __init because it calls other functions marked __init and is always called by functions marked __init on both x86 and arm also remove the unused export_symbol_gplxen_init_irq both changes were introduced by receive xen events on arm
62e08f25bd09b088f266ea6fc34d2f596d83c04e	gpio ich implement get_direction function allow the kernel to query the driver for a gpios pin direction
65b2fb32b5ce53e103e026b6f95b784c5921cd2e	usb chipidea udc fix calling spin_lock_irqsave at sleep context fixing the below dump modprobe g_serial g_serial gadget gadget serial g_serial gadget g_serial ready bug sleeping function called from invalid context at in_atomic __number__ irqs_disabled __number__ pid __number__ name modprobe __number__ locks held by at udc_core at ci_hdrc irq event stamp __number__ hardirqs last enabled at __number__ hardirqs last disabled at __number__ softirqs last enabled at __number__ softirqs last disabled at __number__ cpu __number__ pid __number__ comm modprobe not tainted from from from from from ci_hdrc ci_hdrc from udc_core udc_core from udc_core udc_core from libcomposite libcomposite from g_serial g_serial from from from from
4db4ca7450f97c300ebf74f5dca69015ad0d5ed3	media sta2x11 embed video_device embed the video_device struct to simplify the error handling and in order to eventually get rid of
25ac0c2b971235d3e8c7af0b6889a1eb6988b559	nbd use task_pid_nr to get current pid
70b3e89aaf421ad642c4ab0fb196e1c19ea838c5	pci exynos add exynos prefix to the add_pcie_port and pcie_init functions are exynos-specific add exynos prefix to avoid collision in global name space
2577a4a6096017f3152339c562ada77e182c8976	arm hwmod call to _omap4_disable_module should use the soc-specific call the hwmod code unconditionally calls _omap4_disable_module on all socs when a module doesnt enable correctly this worked due to the weak function omap4_cminst_wait_module_idle in which was a no-op but now those weak functions are going away they should not be used so this patch will now call the soc-specific disable_module code assuming it exists needs to be done before the weak function is removed otherwise am33xx will crash early in boot
e5ebb772c697540f42a4b74f3d14fae6ecd4de24	hwmon adm9240 convert to use devm_ functions convert to use devm_ functions to reduce code size and simplify the code
8037dd60f45264c3fbbea4cc0cea5f2f0a774b5e	e1000e fix ptp on e1000_pch_lpt variants ive got reports that the intel i-218v nic in intel nuc5i5ryh systems used as a ptp slave experiences random hour clock jumps which are resolved if the same workaround for the __number__ and __number__ is employed so set the appropriate flag2 in e1000_pch_lpt_info too
7bdcefc103849386ef7f3029dd94ecfd4a822a67	btrfs dont ignore compressed bio write errors our compressed bio write end callback was essentially ignoring the error parameter when a write error happens it must pass a value of __number__ to the inodes write_page_end_io_hook callback setpageerror on the respective pages and set as_eio in the inodes mapping flags so that a call to filemap_fdatawait_range filemap_fdatawait can find out that errors happened we surely dont want silent failures on fsync for example
16ee1e82a305f7b3ec9506178ac3a273eaceff7f	staging comedi pcl726 remove the defines the defines are only used to initialize the io_range members in the boardinfo remove the defines and just open code the values for aesthetics change the type of the io_range and rename it to better match the len parameter to comedi_request_region
cde7fbfc8a2987796fb647e574242fa4bc5430f0	asoc intel add support max98090 in sst driver added entry in sst driver to support max98090 codec for intel braswell platform
ef8299de7e2bf61ed24d1da699fa5ba13549d5f8	bridge multicast notify on group delete group notifications were not sent when a group expired or was deleted due to device being deleted so add br_mdb_notify to br_multicast_del_pg
6225b99aa620d6e260228a30cc5d24cde60cb1e7	arm shmobile r8a7791 add ehci mstp clock add support for ehci clock gating via the mstp703 bit on r8a7791
a35db9a4cb800f343cd4bbfeeb6568807a16aad8	arm omap irq add specific compatibles for omap3 and am33xx devices with this we can use a compatible flag to figure out how many irq lines are wired up no need for our ti-specific binding
0fb7d0c30b59db5bea833546aae1fea8a0e94356	asoc wm9081 hook dac up via dapm rather than stream more current api usage
a20b62bdf7a1ed1a334eff3c4cafa97f5826006b	audit suppress stock memalloc failure warnings since already managed supress the stock memory allocation failure warnings for audit buffers since audit alreay takes care of memory allocation failure warnings including rate-limiting in audit_log_start
d475d42db694b51dc655a1c8af97f84a4d3a4cf7	staging vt6655 remove dead member wstats
d0915b2255bfbdd537fd6a52f9a0a7037ecbe2d5	staging r8188eu get a string from the user correctly the original code had two bugs __number__ it didnt check if the string was zero length so it could oops when it tried to dereference the zero_size_ptr __number__ it didnt enforce that the string was nul terminated it was also messy as pants
f0bfcc22d9822947b0ad3095e8363eab5261864c	adv7511 fix mutex deadlock when interrupts are disabled when the adv7511 i2c client doesnt have an interrupt line we observe a deadlock on caused by trying to lock drm devices twice in the same context here is the sequence that causes it ioctl drm_ioctl_mode_getconnector from userspace drm_mode_getconnector acquires mode_config mutex drm_helper_probe_single_connector_modes adv7511_encoder_get_modes adv7511_get_edid_block adv7511_irq_process drm_helper_hpd_irq_event acquires mode_config mutex again in adv7511_irq_process dont call drm_helper_hpd_irq_event when not called from the interrupt handler it doesnt serve any purpose there anyway
9198f509c888f1ca8f5a50047d702b1ab29459a5	pinctrl rockchip add functions support of pinctrl it allows handling sleep mode for hogged pins in pinctrl
01ff5dbc0925d11c8ad76eed3bdd02d0c7e1e0f5	micro-optimization in nbd request completion add in-flight cmds to the tail that way while searching during request will always get a hit on the first element acked-by
5510ab18048397193ae073d6b0d4ea78ff0170f5	prevent null pointer dereference on invalid capi command an invalid capi __float__ combination may retrieve a null pointer from the cpars array which will later be dereferenced by the parser routines fix by adding null pointer checks in strategic places
ffe10c6f95412da01695e659e967747333d5e812	perf tools fix segfault when using srcline sort key the srcline sort key is for grouping samples based on their source file and line number it use addr2line tool to get the information but it requires dso name it caused a segfault when a sample does not have the name by dereferencing a null pointer fix it by using raw ip addresses for those samples link
1fad5fab782c18a90865f61bff1bde3a0dba1678	update the rq head when modify qp state the rq head in qpc was zero will miss the rq wqes which have be sent so here we should take the real value
015e91fbc9c6ab48596aa38fc0f8c8aab44036f9	correctly report neighbor link down reason the code to save the link down reason for reporting to the sma was in a location before the actual reason was read move the sma link down reason assignment to a better location
cc34ace73dfa24d9cda2fd2c4666e38a515a9052	phy ti-pipe3 use ti_pipe3_power_off to power off the phy during probe no functional change previously omap_control_phy_power was used to power off the phy during probe but once pipe3 driver is adapted to use syscon omap_control_phy_power cannot be used hence used ti_pipe3_power_off to power off the phy
c22e464022f935b0cbd8724b1d99d800d49518a9	net_sched gred eliminate redundant dp prio comparisons each pair of dps only needs to be compared once when searching for a non-unique prio value
09dcc7dfc05b31bf0bbcd1511cd1a2644908d5c8	uart pl011 improve lcrh register access decision improve lcrh register access decision as arm pl011 lcrh register serve as both tx and rx while other soc may implement tx and rx function with separated register
8dc7c651dd7d95b548adef8cd56908392d3ba432	perf config allow _ in config file variable names for annotate i want to be able to have variables that are the same as the ones representing feature toggles link
face37f5e615646f364fa848f0a5c9d361d7a46e	slab add taint flag outputting to debug paths when we get corruption reports its useful to see if the kernel was tainted to rule out problems we cant do anything about
12ff3f3b6c21fe8f4628b834919b393eb14aa7b2	ixgbe add warning when scheduling reset this patch adds warnings when a reset of the adapter is scheduled so that the user can see log of why the reset occurred
d87c978830674f388d910c2691069a4d2219f382	lkdtm reorganize module paramaters this reorganizes module parameters and global variables in the source so theyre grouped together with comments also moves early function declarations to the top of the file
8a95c1441c799bb0f0d31cdb11523d91923d51a7	cpufreq qoriq optimize the cpu frequency switching time each time the cpu switches its frequency the clock nodes in dts are walked through to find proper clock source this is very time-consuming for example it is up to us on t4240 besides switching time varies from clock to clock to optimize this each input clock of cpu is buffered so that it can be picked up instantly when needed since for each cpu each input clock is stored in a pointer which takes __number__ or __number__ bytes memory and normally there are several input clocks per cpu that will not take much memory as well
e724366498ead17579686f7ad83235f911a9c4f7	omapdss clean up minor cleanup for the functions to make them more readable
b8f5c6edca34ff441e1ccdec68828e933a1b905b	rbd dont use enotsupp enotsupp is not a standard errno it shows up as unknown error __number__ in an error message this is what was getting produced when the the local rbd code does not implement features required by a discovered rbd image change the error code returned in this case to enxio
ea49a5ebbbfa982c893d4d6cf68feeb829f58324	regulator da9052 convert to devm_regulator_register
578b25dfce2990d8bab5631f33a4283bd5b01556	remove unused macros the macros definitions to access struct screen_info members and all of their users were removed __number__ years ago by commit remove magic macros for screen_info structure members but only the definitions reappeared a few days later in commit make includable from remove them for good amen
7082a29c22ac0ab276b346f2a5c1d24a2102f158	arc use access_once in cmpxchg loop
239ad6a18142271ac0cb332671c199d28d144f7f	asoc lowland use card dapm context to access widgets the dapm field of the snd_soc_codec struct will eventually be removed replaced with the dapm context from the component embedded inside the codec replace its usage with the cards dapm context the idea is that dapm is hierarchical and with the card at the root it is possible to access widgets from other contexts through the card context
b1e41d8cd43910fee82f27ab1381bc6cd66910b3	iscsi-target remove dead code in iscsi_check_valuelist_for_support neither acceptor_values nor proposer_values can be null here when scanning the value lists for incoming iscsi login parameters such as smatch complains because we are not allowed to pass null pointers to strchr also i removed a second later check for because it gets checked on the next line in the do while condition
be559daabfaac74a7acd8cb56fae86fca7349f10	dmaengine ti-dma-crossbar make idr xbar instance-specific in preparation for supporting multiple dma crossbar instances make the idr xbar instance specific
e667487b67d96fc2471529e3a5b404f51dc52b39	asoc jack fix multiple definition of snd_soc_jack_add_gpiods commit f025d3b9c64e asoc jack add support for gpio descriptor defined jack pins caused build error when config_gpiolib is not set multiple definition of snd_soc_jack_add_gpiods first defined here make2 error __number__ make2 waiting for unfinished make1 error __number__ make sound error __number__ fix this by marking snd_soc_jack_add_gpiods as static inline in
8f2279d5d908119a08e906be1c6b69c744d0c379	usb musb omap2430 fix regression caused by driver core change commit ddef08dd00f5 driver core wakeup the parent device before trying probe started automatically ensuring the parent device is enabled when the child gets probed this however caused a regression for musb omap2430 interface as the runtime pm for the parent device needs the child initialized to access the musb hardware registers lets delay the enabling of pm runtime for the parent until the child has been properly initialized as suggested in an earlier patch by grygorii strashko in addition to delaying pm_runtime_enable we now also need to make sure the parent is enabled during omap2430_musb_init we also want to propagate an error from omap2430_runtime_resume if struct musb is not initialized note that we use pm_runtime_put_noidle here for both the child and parent to prevent an extra cycle lets also add some comments to avoid confusion between the two different devices trying probe
61a219fe192412bca6c26657a4b0c99c67a3e7fc	asoc rsnd dont enable src sync mode when capture with cmd it cant use src synchronous convert when capture if it uses cmd because no one provide out side clocks
e00b9bb34e2784f41bdfc7083c7d37ca1b97aca3	staging ks7010 remove multiple assignment checkpatch emits check multiple assignments should be avoided move multiple assignment onto separate lines fix comment to use more natural english
6c1ca56d85377498bec760064c02e33f4678a2dd	greybus arche-platform rename spinlock variable lock wake_detect_lock with addition of exported function required for timesync operation we need more locking mechanism for driver state so to avoid confusion rename existing spinlock variable to its appropriate name testing done tested on platform
5952dde723077e5e0db43cbc9dfb00a4f47c42ef	cxgb4 set maximal number of default rss queues
f124488e4713dc9afa2028553261b1d399286e68	bnx2x code doesnt use stats for allocating rx bds previously allocation used queue statistics directly in its calcualtion this change causes these calculations to be summed into the statistics without being affected by them
dc0f0285f80558e800411d583de71358a581dfae	greybus bundle initialize dma_mask for bundle device we missed this only for bundle device fix it
af9cfe270dd133f2f40c287e8d41919bb8d063e3	x86 delete unused code a define two macros and an unreferenced bit of assembly are gone
b9e454826f22e17d1945bd282834c87aef8d0f95	tg3 fix tx bd segmentation code the new tx bd segmentation code had a bug in the error cleanup path if the driver did not map all the physical fragments the abort path would wind up advancing the producer index beyond the point where the setup code stopped this would ultimately turn into a tx recovery error where the driver would expect the skb pointer to be set when it isnt this patch fixes the problem and then makes the code a little easier to understand
1a2a064eb8d74260edf23f9592675dd33519350f	hwmon w83793 remove legacy chassis intrusion detection sysfs attributes
08b9575660cd6d654c05314fc41d2209f2d8bdfb	clk missing set_phase op is an error if a clocks clk_ops doesnt have the set_phase op set we should return an error from clk_set_phase this way clock consumers know that when they tried to set a phase it didnt work as opposed to the current behavior where the return value is __number__ meaning success
e9bba61522a7650b0e4d9952bb3ece81d473a52c	arm exynos add support get_core_count for exynos5250 the exynos5250 has two cortex-a15 cores and theres no need to call scu_enable in platform_smp_prepare_cpus because cortex-a15 has no regarding scu register which can be used for getting number of cores
d6d67e7231c97d535069970c840d33fc6c4350ee	epoll cleanup use rcu_init_pointer when nulling it is always safe to use rcu_init_pointer to null a pointer this results in slightly code
73cbf4a1ddfab247f9018550637c28a7d8dd9108	use nmi_panic when kernel panics in nmi handler commit panic x86 fix re-entrance problem due to panic on nmi introduced nmi_panic which prevents concurrent and recursive execution of panic it also saves registers for the crash dump on x86 by later commit panic x86 allow cpus to save registers even if looping in nmi context ipmi_watchdog driver can call panic from nmi handler so replace it with nmi_panic
856ac3c6e0c4cb566014edf5fa185b962298db88	mips bmips delay irq enable to to prepare for smoothing mess up patchwork
819baf885953b588b63bef28e5598daf9ed4ddf9	ntb_perf potential info leak in debugfs this is a static checker warning not something im desperately concerned about but snprintf returns the number of bytes that would have been copied if there were space we really care about the number of bytes that actually were copied so we should use scnprintf instead it probably wont overrun and in that case we may as well just use sprintf but these sorts of things make static checkers and code reviewers happier
262093791b936a5cc8ef2ede37454bc1ddcdb911	fix missing edma changes to edma_dma_complete status
c6fa35659c5fae5f9aeb6874b177baeb2adbc02e	perf tools fix one of the probe events to exclude kernel when probing the kernel api the kernel should be excluded otherwise the probe will fail for users with insufficient privilege to profile the kernel link
eea54c8ec971d4759c541dba351477dafc39ce54	iwlwifi remove effectless assignment
606a5488a18788c374e797643678a3c82621bf59	i40e provide correct api version to older vf drivers this driver fully supports vf drivers using both the __float__ and __float__ versions of the virtual channel api however vf drivers using version __float__ get upset if we provide them with a version other than that and refuse to play with us correct this by checking the vfs api version at the time that we store it off and provide the correct version number back to the vf so we can all get along change-id i86dfe02e67b2bef336b4b49a1bb072f3e7229abc
b236b954de06c5a736b882ce66701ad1a86e12b1	remove assignment this patch removes the assignment of we dont need it here because we use the netdev_alloc_skb_ip_align function which already sets the
f69b9c79c99b607a8d6b1d9e1913861154af8c63	mac80211 flush to get the tx status of nullfunc frame immediately sometimes the probe frame nullfunc is stuck at the hw queue so that the mac80211 terminates the connection as it wont see the tx status instead of waiting for long period for ack status lets call flush to get nullfunc status immediately it also helps to send the nullfunc till max tries reached
e9fe594344c3db554aebb48513b60bba90c4dd2d	arm mach-u300 delete irq_to_gpio function this function is not used in the u300 build and on the whole the call is hard to consolidate so get rid of it from this machine
380c88303812951f6c838241366a66a03fb5c897	asoc mpc8610 tell the cs4270 codec that its the master commit asoc return early with if invalid dai format is detected requires the machine driver to tell the cs4270 codec driver whether the cs4270 should be configured for master or slave operation
bb8603f8e166e49f02f865213feee7afddeac9b0	link_path_walk get rid of duplication what we do after the second walk_component put_link depth decrement in there is exactly equivalent to whats done right after the first walk_component easy to verify and not at all surprising seeing that there we have just walked the last component of nested symlink
0aed11244360c24c854a263eac0293acef2abd03	dmaengine export symbol of of_dma_request_slave_channel current dmaengine implementation of dt bindings cant support dt subnode this patch export symbols of of_dma_request_slave_channel for subnode dma dt bingings ex rcar_sound __number__ dvc0 dmas dma-names tx dvc1 dmas dma-names tx
93b80ac297b1cfdf3bea771a5ce6ea4ff5d25d1d	fix endless loop in resize cq when calling get_sw_cqe we need pass the consumer_index and not the masked value failure to do so will cause incorrect result of get_sw_cqe possibly leading to endless loop this problem was reported and analyzed by michael rice from hp
0fb5902f2f9ec7996a0846087f3e69165ea9ce1e	device property the secondary fwnode needs to depend on the primary this fixes null pointer dereference when the primary fwnode handle does not exist for example with pci devices that do not have acpi companion
ac4c8868837a7c70ebb3eaf2298324a3b61b214e	bridge prevent possible race condition in br_fdb_change_mac_address br_fdb_change_mac_address calls without these hash list updates are racy with
b0c8ce897a42ab357001f275fa80ba82c8d4555f	reduce iomap size even more commit c506fff3d3a8 resize iomap reduced the iomap to nr_functions pci_bar_count elements since we only support functions with bars we can cut that number in half
bb311eccbdab974639263060b8452bf304af0b0c	rcu add tracing of normal non-nocb grace-period requests this commit adds tracing to the normal grace-period request points these are rcu_gp_cleanup which checks for the need for another grace period at the end of the previous grace period and rcu_start_gp_advanced which restarts rcus state machine after an idle period these trace events are intended to help track down bugs where rcu remains idle despite there being work for it to do
a7516a05311d0e2deb8ce8ae8b8c12a513ca8ca2	split out pll divider code this cleans up the mode set path a little further making it easier to extend for future platforms danvet shut up stupid gcc warning about potential use of un-initlized fp2
501058edebf957a3c101c8119c3286e496873840	usb dwc3 ep0 use the correct type for set_sel data u2sel and u2pel should be __le16 doesnt fix any issue found with sparse
0918e595ae45d99e0bd8a9950a0f0cb0e2a9c948	staging comedi remove hardware_device from struct comedi_device_info the hardware_device member of struct comedi_device_info is only set to point to a hardware device by the auto-configuration code specifically comedi_alloc_board_minor with a non-null hardware_device parameter so that it can be found again by the auto-unconfiguration code specifically comedi_release_hardware_device however as where info is a pointer to the struct comedi_device_info is set to the same value as by calling comedi_set_hw_dev with the same hardware device pointer we can look for that instead so there is no need for the hardware_device member any more get rid of it
9f1a7ab260300c670608a9db861187069f8b179a	grab the rotation from the passed plane state for vlv sprites use the passed in plane_state instead of in vlv_update_plane currently the two are one and the same but if we start queuing up multiple plane updates they might not be looks like this was rebase fail on my part link cherry picked from commit
b1037c1a498f9bb3b5a81c2f243c605c190da754	iio magn ak8975 allow a delay after enabling regulators the datasheet actually specifies that we need to wait atleast after powering on the device before trying to set mode
24bfcb100959c8641a627b5604d967243f8f240c	timer fix hotplug regression the recent timer wheel rework removed the pair in the hotplug migration code which results in bug using smp_processor_id in preemptible __number__ code __address__ that hunk is a leftover from an earlier iteration and went unnoticed so far restore the previous code which was obviously correct
106020ccee79c7fcf3875c47000525d957c9bcf1	serial-uartlite configure for rising edge irq trigger this device generates a short rising pulse on the interrupt request line
4a57d670a9edb56d7cbc8d9075c7b242e0670ecf	mtd gpmi do not use the the is equal to the now use the to replace the this patch makes preparation for the gpmis subpage read support in the subpage support the maybe smaller then the
694e6729bf0e317e0b67c37cda1b74a5b04fbc07	serial imx remove long dead code this if __number__ exists since the driver was introduced in commit c49bde83eb6a arm patch re motorola serial driver back in __number__
315ff09dbaebc6061948102d7ed8781d4ee46f36	ndisc reduce number of arguments for ndisc_fill_addr_option add pointer to struct net_device dev and remove data_len and addr_type
2e7b1bfcb98dd232faf85b4a0a2611a49454c2ea	arm move gpio initialization for usb phy reset line to common place the usb phy reset gpio can be configured in the same place as the other gpios while at it rename the pin as babbage_usb_phy_reset to make clearer its purpose
61118cecf2683c082ec9bc86a8916d35c73d6e5b	switch from dma_device to prepare for removal of
e7b18ede4443c0207b9fd849cf604e67c6f38fc9	cciss set max scatter gather entries to __number__ on p600 at one time we used to set the maximum number of scatter gather elements on all smart array controllers to __number__ at some point in time the firmware began to write the appropriate value for each controller into the config table the cciss driver would then read that and set on the p600 that value is __number__ under some workloads a significant performance reduction may result this patch forces the p600 to use only __number__ scatter gather elements other controllers are not affected
bab7a1f199fa617c7a0600c74ebbb514aed6dbe8	usb gadget mass_storage place export_symbol_gpl after func definition export_symbol_gpl is usually placed after function definition not before
f5a8a78a1b7d52da7d2ff6b89f0d1e8d0cfd651f	media au6610 define reset_resume after qt1010 change that device seems to survive from reset resume
82e9f646555442d63e47155171592ee790275ea3	wil6210 fix sequence for scan-abort during reset communication with fw must be done before is initialized in order to properly handle cases where communication with fw halts during reset sequence
666fbcf5c21d8d8654b00b9c2e21a3caf070e9f8	dont program ellc idi hash mask for for gen9 onwards edram is a true memory side cache so there is no need to program idi hash mask as it is for ellc only v2 intel_gen chris matthew
39cc029f9c74a9917560c51f1b5dd2ed8c4ede8a	media coda do not use v4l2_dev in coda_timeout the timeout delayed work might be scheduled even after the v4l2 device is released
d9766d52dc2146532447a6e388b6612469e045ed	staging wilc1000 removes unnecessary log messages this patch removes unnecessary log messages
d9eedaf329a28a20a4b0f18fed2beb40be10a406	arm restart plat-samsung remove and s5p_reset_hook now that s5p_reset_hook is unused we can get rid of and the s5p_reset_hook code in
4b681c2843cff55bac354abd1cad577d41e10807	fix typo in evergreen dma fence srbm write packet takes dw aligned registers
f2ae62fe336f5194c06c213a32bbce0c8bf1511d	changed parameters in kstrtol changed parameters in the kstrtol function inside to resolve warnings re mismatched data types used
3c67a829bd45f99b5c03580bb898c99fcc023356	cpufreq pcc-cpufreq fix commit acpica hardware enhance acpi_hw_validate_register with awareness apparently exposed a latent bug is initialized to __number__ but per lv zheng it should be __number__ and indeed making that change does bring pcc-cpufreq back to life
cb658a453b9327ce96ce5222c24d162b5b65b564	userfaultfd shmem avoid leaking blocks and used blocks in uffdio_copy if the atomic copy_user fails because of a real dangling userland pointer we wont go back into the shmem method so when the method returns it must not leave anything charged up except the page itself link
83b912c67b0b42af7bb7cbcb9d4fdb64bcd8dc65	staging lustre fix space before error fix error error space prohibited before that
42a2c09f2b0b95fa147bcdb56cdc02b980b9ac5e	libceph open-code they are called only once from ceph_osdc_stop and handle_osds_timeout respectively
8f73d4b7011061f46ba6f46006b2848b412ff43f	of fix memory block alignment in early_init_dt_add_memory_arch if a memory block is not aligned to page_size its base address must be rounded up not down and its size must be reduced
7a6674dabfe240cc7015fc201f9662d0640e8081	i2c s3c2410 fixup the styling of the newly moved register definitions make them conform more to established standards
b09dcf585df959cf26270e65941ea1f79a1345aa	nvme dont allocate unused nvme_major when alloc_disk0 is used the number is ignored all device numbers are allocated with a major of block_ext_major so remove all references to nvme_major one unregister_blkdev was missed link
0cddc7e9a0dd4b77471889d436b4a4ed8d8385bb	media coda allow more than four instances on coda7541 with the new firmware there are not anymore four register sets but a single register set which the driver has to conserve across context switches this allows to handle more than four instances at the same time
cab2ed7474bffafd2a68a885e03b85526194abcd	alsa ctl fill identical information to return value when adding userspace elements currently some members related identical information are not fiiled in returned parameter of sndrv_ctl_ioctl_elem_add this is not better for userspace application this commit copies information to returned value when failing to copy into userspace the added elements are going to be removed then no applications can lock these elements between adding and removing because these are already locked
2b60af017880f7dc35d1fac65f48fc94f8a3c1ec	netfilter nf_conntrack_ipv6 fix tracking of icmpv6 error messages containing fragments icmpv6 error messages are tracked by extracting the conntrack tuple of the inner packet and looking up the corresponding conntrack entry tuple extraction uses the callback which in case of fragments returns nexthdr_fragment instead of the upper protocol even for the first fragment when the entire next header is present resulting in a failure to find the correct connection tracking entry this patch changes ipv6_get_l4proto to use ipv6_skip_exthdr instead of nf_ct_ipv6_skip_exthdr in order to skip fragment headers when the fragment offset is zero
3056b105166ca2167a28b7733348b41a96ed58be	staging comedi usbduxfast remove extra dev_err messages a dev_err message is output if send_dux_commands fails remove the extra dev_err messages output by the callers
3d9ea9e3af048ab6b8dced15248384e548ba05ea	iop-adma corrected array overflow in raid6 xscaler test bug cppcheck reported overflow in array assignment for loop walks __number__ to array size is iop_adma_num_src_test reported as test code pq_src array was grown by two elements to correspond with actual usage stack consumption was kept constant by modifying the pq_dest two element array which is only used when pq_src is referenced up to iop_adma_num_src_test elements into the address of the new last two elements of the pq_src array this is presumed to be the original intent but would be reliant on compilers always having pq_dest contiguous with the final element of pq_src note this is a re-send of a request for review from two weeks ago looking for review or shootdown adding lkml to list for a wider audience thanks updated per review comments of sergei shtylyov
e4ca6d9854dc252e294007fc91249ce34d9a82e8	bluetooth ews recalculate l2cap header size recalculate length of l2cap header based on control field length
17605b961f766757fddec20810453fc51b266e77	net rdma use __ethtool_get_ksettings
f0879217a8710289f3a9bac9e5db8f73e8189750	staging iio ad7606 rework regulator handling currently this driver ignores all errors from regulator_get the way it is now it also breaks probe deferral eprobe_defer the correct behavior is to propagate the error to the upper layers so they can handle it accordingly rework the regulator handling so that it matches the standard behavior if the specific design uses a static always-on regulator and does not explicitly specify it regulator_get will return the dummy regulator
3da367c3e5fca71d4e778fa565d9b098d5518f4a	vmscan add block plug for page reclaim per-task block plug can reduce block queue lock contention and increase request merge currently page reclaim doesnt support it i originally thought page reclaim doesnt need it because kswapd thread count is limited and file cache write is done at flusher mostly when i test a workload with heavy swap in a machine each cpu is doing direct page reclaim and swap this causes block queue lock contention in my test without below patch the cpu utilization is about with the patch the cpu utilization is about disk throughput isnt changed this should improve normal kswapd write and file cache write too increase request merge for example but might not be so obvious as i explain above
39a352a5b5896403ad4ce842a9bc3845a01c02cd	nfc llcp keep the connected socket parent pointer alive and avoid decreasing the ack log twice when dequeueing connected llcp sockets
550feebf5cb075f7576b3cfe9bcf05abc1ffb8cd	bnxt_en enable mru enables bit when configuring vnic mru for correctness the mru enables bit must be set when passing the mru to firmware during vnic configuration
75a4615c95a2de4fa592c1312fb8446e74b4e5eb	kvm s390 set the prefix initially properly when kvm_run is triggered on a vcpu without an initial reset a validity intercept occurs setting the prefix will set the kvm_req_mmu_reload bit initially thus preventing the bug
4dc5a79f1350718ac31e4ab87eebce112b117a34	mmc mxs-mmc enable regulator for mmc slot if bootloader or platform initialization code does not enable the power supply to mmc slot we need to do it in mmc driver
63c62275ec484a0f6da6a600d9b44ee0279c0900	re-add static qualifier to get_cxsr_latency this got lost in the move
6e38bfaad6c83bdd07eb659f9bfd50f8d71a5a46	tpm_tis check pnp_acpi_device return code
53256511010b2ee226ded9155728862d90ac2b1a	b43 b43_op_config drop check for core change there arent devices with multiple __float__ cores supported by b43
e4b70ebeeba954cb9cbcf0f19016bb9c2b8711c1	exportfs eliminate unused noprogress counter note this counter is now being set to __number__ on every pass through the loop so it no longer serves any useful purpose
4b1241006c337f57745b0fc2f17b24f8009ca82d	cifs fix a wrong pointer in atomic_open commit caused a regression in cifs open codepath
b0101b4f14d591719f53f7f38ede3651113e6a53	asoc wm_adsp remove and free algorithm regions for adsp1 do it in a similar fashion as we do for adsp2
858ce0220922a52e009d17dcaaab5dfd76f9833b	nfc pn533 fix bad allocation size use dereferenced pointer in sizeof instead of pointer itself
fb67740e2fb82c97cca6df24882df4e7c898aae4	crypto img-hash log a successful probe currently the probe function only emits an output on success when debug is specifically enabled it would be more useful if this happens by default
2b40e9d97d196f98ef356003d400d5675174b4fc	mfd wm8400 convert to devm_regmap_init_i2c
9299c08d8bfc7256645f4bf3943f80d8943fe844	input tc3589x-keypad fix section mismatch warning warning section mismatch in reference from the function tc3589x_keypad_open to the function the function tc3589x_keypad_open references the function __devinit tc3589x_keypad_init_key_hardware this is often because tc3589x_keypad_open lacks a __devinit annotation or the annotation of tc3589x_keypad_init_key_hardware is wrong
2cd3b5f9033f0b051842a279dac5a54271cbd3c8	clarify comments regarding deferred error deferred errors indicate errors that hardware could not fix but it still does not cause any interruption to program flow so it does not generate any and uc bit in mcx_status is not set correct comment link
0c596a31ec3c3db2fe5ee78e9f46ae2e0bcb9aa0	staging vt6655 remove unused variable this patch removes a variable that was simply used to store the return value of a function call before returning it the issue was detected and resolved using the following coccinelle script identifier len when len when strict len
6111413be8708a7509fd9c09817a657f6bf8f749	clk rockchip fix checkpatch errors in rk3399 dt-binding header some please no space before tabs checkpatch warnings slipped through the recent addition of the rk3399 dt-binding header so fix them
cd77fe77613649e9ca1c8ef8792290b02f1098ca	staging bcm line length cleanup
f7e6746ebae984ea67b0a1a1e23c7e6698240631	proc fix interrupts sum commit change cpustat fields to an array deleted the code which provides us with the sum of all interrupts in the system causing vmstat to report zero interrupts occuring in the system fix this by restoring the code
f4896f1529c43fb0688164ed33aebdf525a34fb7	make the dp rates int instead of uint32_t no point in using uint32_t here just plain old int will do
bb1dfefdc62fa68107c4c9f1374cb856743a9434	net dcb fix small regression in __dcbnl_pg_setcfg a small regression was introduced in the reply command of dcbnl_pg_setcfg user space apps may be expecting the dcb_attr_pg_cfg attribute to be returned with the patch below tx or rx variants are returned commit author thomas graf suug.ch date wed jun __number__ __number__ __number__ dcbnl shorten all command handling functions this patch reverts this behavior and returns dcb_attr_pg_cfg
46ee9c143211231d5d81840b28d1b869c0860aa7	be2net fix pmac_id allocation size the allocation size must be be_max_uc and not be_max_uc __number__
14dbfb6831fb3df28ce532ac666f17f3607009cb	staging sbe-2t3e3 fix line over __number__ characters in fix issues with line over __number__ characters in
8be3183bd13dad7c982b07428ccb77379a51ec13	staging dgap fixed trailing white space from this patch fixes error trailing whitespace found by
e2de179458fe681a1a7c63b5911a8dc86b00ca44	fix missing sor modectrl sync flags
a92ffdf8a9b09f8fae9a8f418f87f30a5e459570	rbd allow null image name format __number__ parent images are partially identified by their image id but it may not be possible to determine their image name the name is not strictly needed for correct operation so we wont be treating it as an error if we dont know it handle this case gracefully in rbd_name_show
ecf04ed34d65b735bbdfa9ae8ea378ffc0faa9f6	staging comedi dont allocate buffer space when polling for write when handling the poll file operation and checking for pollout dont allocate space from the buffer for writing just check that space is available for writing that check is done after checking that an asynchronous write command is running on the subdevice allocating the buffer space before checking a write command is running can cause problems if the subdevice supports commands in either direction and currently has an active read command
067eb26f44a095c2e3cd6b61697633e9ed5c82ff	arm s3c64xx dont specify an irq_base for wm1192-ev1 board none of the gpio irqs are connected so there is no reason to specify a base
5c40348c69f33c4c14c051181088e8c71e38be7d	adjustments in the tc offload code towards reuse for sriov towards reusing the tc offloads code for an sriov use-case change some of the helper functions to have _nic in their names so its clear whats nic unique and whats general also group together the nic related helpers so we can easily branch per the use-case in downstream patch
b6b72f4919c121bee5890732e0b8de2ab99c8dbc	kasan change allocation and freeing stack traces headers change stack traces headers from allocated pid __number__ to allocated by task __number__ makes the report one line shorter and look better link
30963c0ac721f70aea0352ed1cd0fc3cfbaef730	x86 intel use for atom errata check now that the cpu update level is available the atom pse errata check can use it directly without reading the msr again link
4ef594eb892b3263fe45d72d5b8161ed4ffa6c0d	sfc generalise driver event generation
6e03b8cecbd836f729afe1a50814544baa5e5f97	usb serial remove debug module parameter now that all usb-serial modules are only using dev_dbg the debug module parameter does not do anything at all so remove it to reduce any confusion if someone were to try to use it
a5e9b85a6540df6c4074d3a56674f6fb6c5fc830	clk fix return value check in oxnas_stdclk_probe in case of error the function syscon_node_to_regmap returns err_ptr and never returns null the null test in the return value check should be replaced with is_err
f6678d3b4107c2ea254f4f4c78dfd4e5dfe04d6a	remove duplicate definitions in
7cb7348f75e442e2ea4bc0b2430a232b13998abf	regulator lp3972 silence uninitialized variable warning this is harmless but my static checker complains that tmp is uninitialized if lp3972_i2c_read fails i have moved the line of code below the error handling to silence the warning
365c411d812a67ae840c7fadd48a6813355b95c4	fix checkpatch error fixes the following error error space required before the open parenthesis
2b436312f0919c05804fed5aa4b7f255db196e7a	mac80211 fix queue handling crash the code i added in mac80211 dont start new netdev queues if driver stopped crashes for monitor and ap vlan interfaces because while they have a netdev they dont have queues set up by the driver to fix the crash exclude these from queue accounting here and just start their netdev queues unconditionally for monitor this is the best we can do as we can redirect frames there to any other interface and dont know which one that will since it can be different for each frame for ap vlan interfaces we can do better later and actually properly track the queue status not doing this is really a separate bug though
b90b3802624e1f2a509f3e9f39775d94ec4762d7	mips fix rtlx build error cc in function error unused variable in function error implicit declaration of function cc1 all warnings being treated as errors caused by new helper file_inodefile
4356d5864c29b9f822a496ab62f24a8971e1fbce	wire up crc interrupts for and throw in a tiny for_each_pipe refactoring for gen2
92bd0334b27845f250f1fadb091242140391c99b	asoc fsl-esai convert to use regmap frameworks endianness method
26e24ddce755cd6fb4b05a87ae37f7e10faa0c4b	asoc pxa tosa update locking around use of dapm pin api the pin updates in this driver look like they are intended to be done atomically update to do so
308fbd8ac0b0078dba29cad027e5b454aac13a6a	staging android add __user annotation in this fixes the following sparse error error incompatible types in comparison expression different address spaces
6266a9d9b0e9824562c3c5604dd812d3befc72f1	media bw-qcam fix timestamp handling bw-qcam didnt set the timestamp and it didnt set
f8b0751de6a963016be0bd404fa063d96ed4ba92	scsi qla4xxx fix panic while rmmod issue system panic on rmmod if probe_adapter had failed during driver load call trace __address__ qla4xxx __address__ qla4xxx __address__ qla4xxx __address__ __address__ __address__ __address__ __address__ __address__ __address__ qla4xxx __address__ __address__ __address__ fix do not cleanup resources on remove_adapter as they are cleaned up during probe_adapter exit
9dfa9a27b620640322588df399eb8f624b48d877	net systemport fix tx work done in tx napi poll with commit d75b1ade567 net less interrupt masking in napi napi repoll is done only when work_done budget bcm_sysport_tx_poll always returns __number__ whether or not we completed the poll quantum fix this by returning either __number__ when we did complete the tx ring reclaim or budget to trigger a repoll
50ba08f301a1b0310775deeed00c9b24ba75fe8a	dont clear initial_boot_params if fdt_check_header fails if the device tree pointer is null early_init_dt_verify fails leaving initial_boot_params unchanged if the device tree pointer is non-null but invalid early_init_dt_verify again fails but this time it also clears initial_boot_params leave initial_boot_params unchanged if the device tree pointer is invalid this doesnt fix a bug but it makes the behavior more consistent and easier to analyze
c3bc3d67ff07c1986e8ededc14e3fbdd26528f17	cpufreq ppc_cbe use generic cpufreq routines most of the cpufreq drivers do similar things in and routines and so its better if we have generic routines for them which can be used by cpufreq drivers then this patch uses these generic routines in the ppc_cbe driver
d54e5e6bc5de032641486843a0df41ac3f7167ed	staging comedi usbduxsigma remove ao_chanlist from private data this member of the private data is just a copy of the channels from the remove the member and just use the directly remove the unneeded len local variable in usbduxsigma_ao_urb_complete this is just the
7d45a04cbc2683f9552572850f1c711d9b96dd26	tipc remove remnants of old broadcast code we remove a couple of leftover fields in struct tipc_bearer those were used by the old broadcast implementation and are not needed any longer there is no functional changes in this commit
65f5be3579a69c6a057eeb99620999788982bff6	drbd discard_zeroes_if_aligned allows thin resync for even if discard_zeroes_data __number__ if discard_zeroes_if_aligned is set we assume we can reliably using the drbd_issue_peer_discard helper
d2728fb3e01f9265571a5f7a5feeac4493d2a365	usb dwc3 omap pass vbus and id events transparently dont make any decisions regarding vbus session based on id status that is best left to the otg core pass id and vbus events independent of each other so that otg core knows exactly what to do this makes dual-role with extcon work with otg irq on omap platforms
9105bfc038ca5a506404ce37cd3c0e85f76351e3	target do not return __number__ from aptpl and alua configfs store functions here are some more instances where we are returning __number__ from a configfs store function the unintended result of which is likely infinite retries from userspace
6a1eaf19f525ed9e4fa09ed1f05c6502a90b4ccb	usb serial mos7720 always require an interrupt endpoint this driver have treated the interrupt endpoint as optional despite it always being present according to the datasheet lets consider it mandatory instead
063b472fbb44ac562797a630ac3516720f588140	tda998x fix edid reading on tda19988 devices tda19988 devices need their ram enabled in order to read edid information add support for this
42702de248d9edff22efe25e275c211a5bb80baf	media ttusb-budget use goto for exception handling avoid some repetition by adopting the usual goto err idiom for error handling
c0de17e468a4a0469b6bba31a515c02b90b75edc	staging vt6656 s_vgetfreecontext use single tx memset memset to __number__ structure _usb_send_context to its size of max_total_size_with_all_headers as defined in this removes the need for memset in the tx path it also allows the removal of dead structure tx_buffer_container bufferheader
25f42985825dd93f0593efe454e54c2aa13f7830	fix broken lbr fixup code i noticed that the lbr fixups were not working anymore on programs where they used to i tracked this down to a recent change to copy_from_user_nmi db0dc75d640 check user address explicitly in copy_from_user_nmi this commit added a call to __range_not_ok to the copy_from_user_nmi routine the problem is that the logic of the test must be reversed __range_not_ok returns __number__ if the range is valid we want to return early from copy_from_user_nmi if the range is not valid link
d53cc1c37e5a4006fb23df8e54dc4a50e01732d9	greybus sdio add switch voltage operation core needs the start_signal_voltage_switch operation to be defined to issue a voltage switch command so we define it here even though we do not need to take in action on it since all voltage control is done in the module
ff5caab10e869274539654e02ae4ee155869b7e6	arm cns3xxx add ul suffix to vmalloc_end to ensure it is properly typed
9245e7375816c4d94d6327c8761b3c7431a5bc2f	bluetooth fix sending responses to identified l2cap response packets when l2cap packets return a non-zero error and the value is passed onwards by l2cap_bredr_sig_cmd this will trigger a command reject packet to be sent however the core specification page __number__ in core __float__ says the following command reject packets should not be sent in response to an identified response this patch ensures that a command reject packet is not sent for any identified response packet by ignoring the error return value from the response handler functions
c7b05e97010ee134d586ec093c96f4a32d17e552	mtd nand omap remove is_elm_present flag is_elm_present flag is not used anywhere this check is implicitely taken care while selecting appropriate ecc-scheme via dt or board-file
bbdf1bd4d85ba641eeff57ba46eec3bc4af5d322	staging vt6656 mac80211 conversion enable power saving convert vnt_enable_power_saving and vnt_disable_power_saving remove and use we nolonger send the psbsendnullpacket from vnt_enable_power_saving
af6f9e8355b2200df1ed077bc1b8ebf6b4592b01	usb ftdi_sio make port probe less verbose theres no need to print the number of endpoints per interface or endpoint wmaxpacketsize during port probe this information is readily available using lsusb should it ever be needed note that this also fixes the wmaxpacketsize being incorrectly reported on big-endian systems due to a missing le16_to_cpu
d5441ea58ccc70637b75b035dee61685b516a5ca	media gsc-m2m use an unsigned data type for a variable the data type int was used by the variable ret in the gsc_m2m_poll function despite of the aspect that the type unsigned int will usually be needed for the return value from a call of the v4l2_m2m_poll function improve this implementation detail by addition of the type modifier then this issue was detected by using the coccinelle software
382208dc8c856b4d8ba602031412842b121decb2	mips dump_tlb preserve and dump guestid the guestid for root tlb operations is modified by tlb reads so needs preserving by dump_tlb like the asid field of entryhi also dump the guestid of each entry if it exists alongside the asid as it forms an important part of the tlb entry when vz guests are used patchwork
5e9ef24619486213223053678eb9175630ef6bf9	prevent context loss if a context has already been assigned to an fd prevent another assignment
25fb13dd2d6e9897c391315254d1b2f7c74e0482	scsi megaraid_sas remove unused pd_index from megasas_build_ld_nonrw_fusion
1052cff317e7636456595f2246b9f644c53eccbd	arm s5p fix offset calculation on gpio-interrupt offsets of the irq controller registers were calculated correctly only for first gpio bank this patch fixes calculation of the register offsets for all gpio banks
4adb1f8f880081ee9921ebd399786387e0cd6f52	spi dw remove unneeded cr0 member of struct chip_data since we recalculate cr0 each time we start a transfer the becomes redundant remove it and related pieces this is a follow up to commit spi dw remove needless if statements
9d2e85e001c15789798a1550cce5e7cc3ffe4e9b	mwifiex adjust calling place of mwifiex_terminate_workqueue workqueue needs to be flushed early when removing card otherwise soft lockup issue may happen because main_process is triggered by interrupt while card is being removed
4a484cffc5e1836114e9556f7c704412d491200c	regulatory fix uevent the uevent callback doesnt protect its access to last_request which now causes a warning since the conversion to get_last_request fix this by allowing to use rcu protection for last_request
07151bc9f7f53731b355b704141ffaccc8d08752	net phy select copper mode when marvel in sgmii for the marvel phy only two sgmii modes are available both allowing only sgmii to copper mode with or without clock sgmii to fiber mode is not supported make sure the registers selector bits are cleared for selecting copper mode
7ddebf54292052898dd0cf3925d113e3527608a7	staging iio ad5933 fix sparse warnings fix the following sparse warnings check warning incorrect type in assignment different base types expected unsigned int unsigned usertype d32 got restricted __be32 usertype warning incorrect type in assignment different base types expected unsigned short unsigned dat got restricted __be16 usertype warning incorrect type in assignment different base types expected unsigned short unsigned addressable dat got restricted __be16 usertype warning cast to restricted __be32 warning cast to restricted __be32 warning cast to restricted __be32 warning cast to restricted __be32 warning cast to restricted __be32 warning cast to restricted __be32 warning incorrect type in assignment different base types expected unsigned short unsigned dat got restricted __be16 usertype warning incorrect type in assignment different base types expected unsigned short unsigned addressable dat got restricted __be16 usertype warning cast to restricted __be16 warning cast to restricted __be16 warning cast to restricted __be16 warning cast to restricted __be16
c4dcf0e2dd7e06db0c5c3f396b2e2b9ce1f6d19f	ioatdma disable raid on non-atom platforms and reenable unaligned copies disable raid on non-atom platform and remove related fixups such as the alignement restriction on legacy dma operations introduced in commit as a workaround for silicon errata
aa319bcd366349c6f72fcd331da89d3d06090651	perf disallow sparse aux allocations for non-sg pmus in overwrite mode pmus that dont support hardware scatter tables require big contiguous chunks of memory and a pmi to switch between them however in overwrite using a pmi for this purpose adds extra overhead that the users would like to avoid thus in overwrite mode for such pmus we can only allow one contiguous chunk for the entire requested buffer this patch changes the behavior accordingly so that if the buddy allocator fails to come up with a single high-order chunk for the entire requested buffer the allocation will fail link
bafe1e14403ad40714ffcfa1fb173b371cc87a1f	ksm remove redundant __gfp_zero from kcalloc kcalloc returns zeroed memory theres no need to use this flag
609ead041b4c607163e7240a8674b608df31d2a8	mips malta stop using gic reg macros stop using the reg macros from and instead use proper iomem accessors patchwork patchwork
3943b9efb381531b99bf9c545736f9e1e2715b9c	asoc rt298 make rt298_index_def const the index_cache is per instance run time state but rt298_index_def is not make rt298_index_def const and make a copy of memory for index_cache rather than directly use the rt298_index_def
06e5e345fea8df24b1d935f98741343df4cab664	ipmi avoid touching possible corrupted lists in the panic context when processing queued messages in the panic context ipmi driver tries to do it without any locking to avoid deadlocks however this means we can touch a corrupted list if the kernel panicked while manipulating the list fortunately current add-tail and del-from-head style implementation wont touch the corrupted part but it is inherently risky to get rid of the risk this patch re-initializes the message lists on panic if the related spinlock has already been acquired as the result we may lose queued messages but its not so painful dropping messages on the received message list is also less problematic because no one can respond the received messages fixed a comment typo
ebd2b0cde5a4c02e2999fc3dc4a59fdd8a040fb6	drbd lower log priority for an event that is definitely not an error
91daee306a51ca7b4d3ca7fdcf7472b0ed2c80c1	perf script process event update events andreas reported following command produces no output cat python def stat__kravacpu thread time val ena run print event cpu thread time val ena run krava cpu thread time val ena run perf stat __number__ record perf script the reason is that perf script does not process event update events and will never get the event name update thus the python callback is never called the fix is just to add already existing callback we use in perf stat report committer note after the patch perf stat __number__ record perf script event krava cpu thread time __number__ val __number__ ena __number__ run __number__ event krava cpu thread time __number__ val __number__ ena __number__ run __number__ event krava cpu thread time __number__ val __number__ ena __number__ run __number__ event krava cpu thread time __number__ val __number__ ena __number__ run __number__ link
c41a36677365e6c5ad9e01ef50776052dfb6c0c5	greybus update descriptor type enums to match renumbering in spec greybus spec updated the descriptor type values and added an additional class descriptor type change the enum accordingly
519ded5a89ec0e46e5b0867ba9f5752239b73898	procfs avoid time_t in shows among lots of other things the current boottime number of seconds since boot while a number is sufficient for this particular case we want to get rid of the struct timespec suffers from a overflow in __number__ this changes the code to use a struct timespec64 which is known to be safe in all cases link
b65daeef1d2401a18ecdcc73fa8f263cb64cdd5d	staging comedi das16 remove unnecessary test in das16_interrupt the timer is only started by the ai subdevice in das16_cmd_exec and this function can only be called if the device is attached remove the unnecessary sanity check
42e08fea970576f4c0c6524fff150736801d8f2e	ath10k introduce new subtypes for proxy sta and mesh qca988x firmware starting from supports new vdev subtypes for proxy sta and mesh hence add them to be used as needed
0b57d6ba0bd11a41a791cf6c5bbf3b55630dc70f	remove redundant local variables for may_expand_vm simplify may_expand_vm further simplification per naoya horiguchi
c35fbd03ae22ca7d36622f63d0e58dadc77dfc44	media au0828 improve debug messages for urb_completion sometimes it helps to know how much data was received by urb_completion add that information to the optional debug log
5096e3c4b2815da79a7ee1533349b2f21a698622	bridge using for_each_set_bit_from to simplify the code using for_each_set_bit_from to simplify the code
f2ab2ba09e081fbce068c0adc205ad3f25a3b626	gpio pl061 convert to use __number__ for no irq we dont want drivers using no_irq so remove its use for now __number__ or means no irq until platforms are converted to use __number__
35b8141b829a7bf66b901432f435a5528fa4c2e3	explicity sync with kernel channel before moving buffer the gem code handles this currently but thatll be removed
5220da39b4f6bd2ee69d298111ebebc0de886f2f	mac80211 call skb_put before copying the data trivial it doesnt have any actual effect here but we should skb_put copying the data
17c4c51e0360e72dc752768927cd13a00c06e421	staging vt6655 replace vnsvinportb with ioread8 removing the macro from functions
af4168c5a925dc3b11b0246c2b91124327919f47	bluetooth set appearance only for le capable controllers setting appearance on controllers without le support will result in no supported error
698bdcbf87f3c8a2f998058d58f4baa8ab8e192a	greybus camera-gb remove hardcode for csi tx number of lanes the number of csi tx lanes is hardcoded to __number__ removing this and start using value from configure stream response note the patch depends on the csi init change use gb csi params to init camera sub-devs
486df8bc4627bdfc032d11bedcd056cc5343ee62	m68k increase initial mapping to __number__ or __number__ mib if possible if the size of the first memory chunk is at least __number__ or __number__ mib increase the initial mapping to __number__ resp __number__ mib instead of __number__ mib this makes it possible to __number__ map more memory in the first node without running out of space for the page tables __number__ boot kernels that dont fit in __number__ mib multi_defconfig add support for __number__ mib store initial mapping size in for later reuse add comment about large kernels
f09a417a4e1abc05eea2b255aa1a5a9834e5df3c	arm clps711x autcpu12 remove incorrect config checking this patch removes incorrect config symbols checking since these symbols not contain config_ prefix anyway checking is unneeded here and this patch remove it completely
842a8824274de3fbbc8e230355d5c75237453bf5	regulator act8865 fix missing of_node_put in act8865_pdata_from_dt this node pointer is returned by of_get_child_by_name with refcount incremented in this function of_node_put is missing when exitting this function while invalid device type fix it by move of_get_child_by_name code after device type check found by coccinelle
0297be07091fc809f27a9f50e5130d41c9ac3f52	ehea remove attributes config_hotplug is going away as an option as result the markings will be going away remove use of __devinit __devexit_p __devinitdata __devinitconst and __devexit
3f1f333232fa3c36bbf20de1c6ffefcc96892d07	hid huion handle tablets with uc-logic vendor id add handling of huion tablets with uc-logic vendor id but the same product id to hid-huion driver a huion h580 was seen using it
ff42606eed00bc065365f55269d558c06b968594	amd-xgbe call netif_napi_del on ndo_stop operation currently the napi context is added using netif_napi_add each time the ndo_open operation is called however there is not a corresponding netif_napi_del call during the ndo_stop operation if the device ndo_open operation was called more than once an infinite loop occurs during module unload add a call to netif_napi_del during the ndo_stop operation
f7a4433b498384f0e300c51b654910f3e03b5ca6	asoc hx4700 register jacks at the card level the jacks are card level elements so use snd_soc_card_jack_new instead of snd_soc_jack_new to register them
d37a92dcb45094dc02836c8a77c693c6f9916fb2	perf top use parse_options_usage for option failure the option was processed after normal option parsing so that it cannot call the parse_options_usage automatically currently it calls usage_with_options which shows entire help messages for event option fix it by showing just options perf top help error unknown key help usage perf top sort by keys pid comm dso symbol link
ef979a26e3d521d51dbd9950e46a69e303073171	usb gadget add reset api at usb_gadget_driver adding reset api for udc bus reset handler is useful for below two issues current disconnect api at usb_gadget_driver is also invoked at udcs bus reset handler but the document says it is invoked when the host is disconnected besides we may expect the gadget_driver to do different things for host sends bus reset and host disconnects gadget eg we may not want to flush dirty page for mass storage at bus reset and want to do it at disconnection
753a2ad54ef45e3417a9d49537c2b42b04a2e1be	net reallocate new socket option number for ipv6_autoflowlabel cb1ce2e ipv6 implement automatic flow label generation on transmit accidentally uses socket option __number__ which is already used by ip6tables ip6t_so_set_replace ip6t_so_get_info __number__ ip6t_so_set_add_counters ip6t_so_get_entries __number__ there is comment warning about that allocate __number__ for this which seems to be unused instead
1e674bc6689e9aca5bd4355d1f87093636ed1c02	mmc tegra add use as required by the generic clk framework
3a3a7f3b7fbd3c2f2ca2f2bf76363a1abbd5ba94	net mac8390 allow modular build the modular driver supports only one card just like the built-in driver note that this limitation is a problem which affects all nubus card drivers because they have to do all their own bus matching because nubus still lacks the necessary driver model support
e9838ef2d6f3f3ccb058514d4ac03a6f6155ecc2	net netcp ethss fix errors in ethtool ops in ethtool ops it needs to retrieve the corresponding ethss module gbe or xgbe from the net_device structure prior to this patch the retrieving procedure only checks for the gbe module this patch fixes the issue by checking the xgbe module if the net_device structure does not correspond to the gbe module
ac5b03420150241dc2db3cb4aa4f58c1e7e4640f	kvm s390 removed virtiodescspace virtiodescspace is completely unused nowadays and thus can be removed without any problems
6c8207a68545d0a63e5acca0df26e6523a1f7837	staging rtl8723au onassocrsp23a use ieee80211_mgmt to obtain da
f678bc9883bb28d9d20db01bc0de53efbacc21c5	batman-adv print jiffies as unsigned long
3a2ffb65eec6dbda2fd8151894f51c18b42c8d41	limit gtt to because of the way in which were allocating the pages for the aliasing ppgtt we cannot actually successfully alloc enough space for anything greater than instead of a quick hack to fix this we should defer until we have the real solution in place allocating much less contiguous space this wasnt found sooner because we didnt not have any systems supporting more than a gtt
f8be11ae3d2c9a1338da37ff91ff4c65922d21be	pci altera reorder functions move cra_writel cra_readl and altera_pcie_link_is_up so a future patch can use them in altera_pcie_retrain no functional change intended
1662622fe595919ef004ef24364a68061052a12f	extcon gpio remove the usage of extcon_set_state this patch removes the usage of extcon_set_state because it uses the bit masking to change the state of external connectors the extcon framework should handle the state by extcon_set_cable_state_ with extcon id
bf106e14735d5e82e995c5c03bf07bce54e5d530	ath9k remove unnecessary initialization there is no need to mask out from the interrupt mask in start
91a290c4573679a70e242495ac3dbf12b39fb108	arm omap4 clock data fix mult and div mask for usb_dpll according to omap4 trm table cm_clksel_dpll_usb register defines following fields for multiplication and division factors dpll_mult bits dpll multiplier factor __number__ to __number__ dpll_div bits dpll divider factor __number__ to __number__
71c6c4c918696625164ffdac4ece9f83bd4a6694	media v4l2-ctrls v4l2_ctrl_handler_setup code simplification
a9c3c29e72cc459be0ecd597f0af11a67713175b	arm kprobes decode thumb bx and blx instructions
cffd7ab94613d2ec818b64ef8dd7f56b625e1aa2	staging comedi s626 remove a variable from set_mode_a and _b the set_mode_a and set_mode_b functions use a local variable setup which is initialized to the value of parameter setup which is not used further get rid of the local variable and rename the parameter to setup
12d3089c192c3a762fed098988d99f4b8ff33266	convert printk to pr_foo
28981e5eb45fe13e1d2c9e0e2e189dc5c8682006	cfg80211 fix n_reg_rules to match world_regdom there are currently __number__ rules in the world_regdom but only the first __number__ are applied due to an incorrect value for n_reg_rules this causes channels and to be disabled
69b9f4a4233b6f9ea168c25123b9eb629739d8e5	validate header in set_armed_active validate the etype to insure that the header is correct
10d79b995be5399be0a59a72859ac4bfdf066299	media v4l vsp1 initialize media device bus_info field fill bus_info with the vsp1 platform device name
3dc6c1d54ff4cc9ce7e8513c286c970304cde20b	perf record fix crash when kptr is restricted before this patch a simple perf record could fail if kptr_restrict is set to __number__ for normal user or __number__ for root perf record ls warning kernel address maps are restricted check samples in kernel functions may not be resolved if a suitable vmlinux file is not found in the buildid cache or in the vmlinux path samples in kernel modules wont be resolved at all if some relocation was applied kexec symbols may be misresolved even with a suitable vmlinux or kallsyms file segmentation fault core dumped this patch skips perf_event__synthesize_kernel_mmap when kptr is not available link
e6f9f8d0296aad7fbaf01de38ccaa1bf654bbda4	cifs dont bother with in
037f741673e0822adcb2bd3bcbd692a148da756a	staging rdma hfi1 do not use with a variable with value __number__ has a value equal to __number__ there is no need to combine it with other things with as for any value x is always x semantic patch used expression x e e1 statement s if x __number__ when x e1 when s when s x e x e when any
75d4baec9becbf1ed9c8804bd94004622f38cb11	backlight pandora_bl use devm_backlight_device_register use devm_backlight_device_register to make cleanup paths simpler and remove unnecessary remove
518df6bdf38559247ee90b9e59a40fae779d57d0	ocfs2 use find_last_bit we already have find_last_bit so just use it as described in the comment
8c3c1e47fa1e5db3aaf29e455c5739f9011a0036	staging unisys visorbus rename local variable to dest this patch renames poorly named local variable to dest
614ee33632d6def4cbe6aeca5308bae0545778cd	iwlwifi mvm change active-to-powersave transition time for bps the requirement for active to powersave transition time for the balanced power save bps scheme changed change the driver accordingly and set transition time to __number__ msec
066bcd785aac9c10e5f9b873f9bd2e438653340d	specify proper data type for pci_slot_id_prefix this fixes the warning reported from sparse warning constant __number__ is so big it is unsigned long
b26b218a1e9c5815cb8964e180b7fba3cd9bd509	perf callchain move initial entry call into get_entries function moving initial entry call into get_entries function so all entries processing is on one place it will be useful for next change that adds ordering logic link
bc942083585da78a5287089023aebcc8952c21f4	greybus bundle refactor gb_bundle_find rearrange gb_bundle_find so it follows the pattern used by gb_connection_find
b74f2fb5147baea65f554afcc73e3688e49b8112	arm s5pv210 enable tv support on goni board this patch adds platform devices and regulators for tv devices on samsung goni board
15a2d4de0eab533a76bee9e68d7e1063dd25401c	perf always destroy groups on exit commit perf fix tear-down of inherited group events states that we need to destroy groups for inherited events but it doesnt make any sense to not also destroy groups for normal events and while it usually makes no difference the normal events wont leak and its very likely all the group events will die in quick succession it does make the code more consistent and closes a potential hole for trouble link
7dc1d67f7c324e5bf23883b94508112ca7a70f62	drbd skip spurious wait_event in drbd_al_begin_io activity log transaction writes are serialized on a bit lock if several cpus race to write an al transaction those that did not get the lock the first time may continue as soon as there are no more pending transactions the do not need to all grab the lock in turn just to realize that the al is clean already and they have nothing to do this also closes a potential deadlock with drbd_adm_disk_opts once it got the al bit lock it knows there are no pending transactions the al is clean and it should be safe to wait for all element references to drop to zero
d1def6be0757e6523aeb2967dc82eb8b02f0b3d5	staging comedi rtd520 remove rtddma0count macro this macro uses the devpriv macro which relies on a local variable having a specific name its also not used remove the macro
e194312854edc22a2faf1931b3c0608fe20cb969	drivers net davinci_cpdma convert kzalloc to devm_kzalloc convert kzalloc to devm_kzalloc
e6bd89232b4a4c9282da1ac8bdd798c2a30d9a46	qed correct default vlan behavior when no vlan filter is configured firmware has a configurable default on whether to pass only untagged packets or all packets regardless of their tagging driver currently doesnt set this field in the necessary ramrod causing the default to always be receive all
953a206393b1533ceb0e7d725cc5a8c8d7ed97dd	pm hibernate refactor and simplify hibernation_snapshot code the goto statements in hibernation_snapshot are a bit complex refactor the code to remove some of them thereby simplifying the implementation
be75b5b53528fe8a9d31bba3c1cdc5eec2769114	video cobalt_lcdfb use module_platform_driver to simplify code convert to module_platform_driver to simplify code
afd54c6881a51fe9cef843b36d289ae74a8f14bb	reiserfs remove obsolete __constant_cpu_to_le32 __constant_cpu_to_le32 converted to cpu_to_le32
47db0f6c9a2210dc5a7c45551d63d7d69b5600a6	staging vc04_services remove explicit null comparison replace explicit null comparison with operator to simplify code found with coccinelle script expression ptr position p statement s0 s1 when ptr if ptr null s0 else s1
6e643d8ddf0e923ea0601e1dc014ff0d3b7b8260	gpio loongson1 remove redundant return value check remove unneeded error handling on the result of a call to platform_get_resource when the value is passed to devm_ioremap_resource
1046a811511d2cb5a59ead53f528d693a5c7fdd2	mmc sh_mmcif use to_delayed_work use to_delayed_work instead of open-coding it
fe84f522ed6d27ed0a48e202e04327c2f4891e23	usb dwc3 gadget move trace_dwc3_ep_queue by moving trace_dwc3_ep_queue from dwc3_gadget_ep_queue to __dwc3_gadget_ep_queue after usb_request is properly initialized makes for a better output always showing a request with __number__ actual and status
4922cec59a1b37d49b3e01577ab2f779a13b3ae6	media xc4000 turn off debug logging by default dont dump debug into to dmesg by default something i had enabled during bringup of the xc4000 driver
e679af627fe875a51d40b9a2b17f08fbde36e0e2	livepatch cancel transition a safe way for immediate patches klp_init_transition does not set for immediate patches then klp_ftrace_handler could use the new code immediately as a result it is not safe to put the livepatch module in klp_cancel_transition this patch reverts most of the last minute changes klp_cancel_transition it keeps the warning about a misuse because it still makes sense
1f04af33fe7db542d75a487b8381b5a3402b7896	drbd moved code
fee1756d80c24d5a3171cb9f76d612e512439dd2	ubifs add ubifs_err to print error reason this patch adds ubifs_err output to some error paths to tell the user whats going on artem improve the messages rename too long variable
13eae1f98255bddcbfe27ae4bd58fe3dc374bc0b	omap dss dispc clocks in error handler theres no guarantee that the error handler worker thread will run while the dispc clocks are on explicitly them
98b8e179edb768c57b8b18e4d61d4b02d1b82b37	scsi ufs correct the expected data transfersize this patch corrects the expected data transfer size of the command upiu the current implementation of is wrong as it probably equal to sector size with this implementation the transfer size is updated correctly
260db9028279beb0c5f0c6661b539a545959c7c7	mach-omap2 fix typo in debug message and comment correcting spelling typo in mach-omap2
7fe1e5e57b84eab98ff352519aa66e86dac5bf61	libceph use data cursor for message pagelist switch to using the message cursor for the non-trail outgoing pagelist data item in a message if present notes on the logic changes in out_msg_pos_next only the mds client uses a ceph pagelist for message data if the mds client ever uses a pagelist it never uses a page array or anything else for that matter for data in the same message only the osd client uses the trail portion of a message data and when it does it never uses any other data fields for outgoing data in the same message and finally only the rbd client uses bio message data never pagelist therefore out_msg_pos_next can assume if were in the trail portion of a message the message data pagelist data and bio can be ignored and if there is a page list there will never be any a bio or page array data and vice-versa
fa22e7b7741b202ee8f0cb28461189418d9b52ea	xen-scsiback convert to target_scf_ack_kref krefs this patch converts xen-scsiback to modern target_scf_ack_kref usage for scsiback_cmd_done callback path it also also converts tmr scsiback_device_action to use modern target_submit_tmr code
6c4a70c5f286077e78b294b3f3a93dc45c40db89	r8169 move task enable boolean to bitfield simpler more consistent with negligible cost in non-critical paths
5a80ee6f8871a81afb4fd919133ae5be3b656d44	staging rts5208 remove extra parentheses around left bit shift operation removes extra parentheses around bitwise left shift operations the case handled is when resultant value is assigned to a variable the issue was detected and resolved using the following coccinelle script expression e e1 constant c e identifier i constant c type t expression e t i expression e e1 identifier f constant c e1
e572fc739822ad779493b8a72bd27f2101fc3373	sunrpc use gid_valid to test for gid invalid_gid in auth unix there are a couple of places invalid_gid is used a sentinel to mark the end of uc_gids array use gid_valid as a type safe way to verify we have not hit the end of valid data in the array
0de9d2ebe590f9203dac59d4b8e298c473764b92	mm cma clean-up log message we dont need explicit cma prefix since we already define prefix cma in pr_fmt so remove it
ec2a5466b3ce680c92e8e05617b020fd825854b9	sky2 add bql support this adds support for byte queue limits and aggregates statistics update suggestion from eric
135cce1bf12bd30d7d66360022f9dac6ea3a07cd	perf annotate add number of samples to the header staring at annotations of large functions is useless if theres only a few samples in them report the number of samples in the header to make this easier to determine committer note the change amounts to percent source code disassembly of for percent source code disassembly of for __number__ samples link split from a larger patch
ec162aa84c9057e196f3a844c0a8d569f5095e6c	set default value to __number__ for unhandled mmio regs for a handled mmio reg its default value is read from hardware while for an unhandled mmio regs its default value would be random if not explicitly set to __number__
51dedaa446532da821fb1160fc4865ca37a54df3	perf c2c report add symbol and dso sort keys they are to be displayed in the single cacheline output symbol dso they are wrappers for global sort_sym and sort_dso sort entries with c2c specific headers link
c17a6554782ad531f4713b33fd6339ba67ef6391	mips provide more readable definition for page_mask
b389d7997acb9c95331322c54ebf45a3bb97ff7b	arm64 cpufeature treat unknown fields as res0 any fields not defined in an arm64_ftr_bits entry are propagated to the system-wide register value in init_cpu_ftr_reg and while we require that these strictly match for the sanity checks we dont update them in update_cpu_ftr_reg generally the lack of an arm64_ftr_bits entry indicates that the bits are currently res0 as is the case for the upper __number__ bits of all supposedly registers a better default would be to use zero for the system-wide value of unallocated bits making all register checking consistent and allowing for subsequent simplifications to the arm64_ftr_bits arrays this patch updates init_cpu_ftr_reg to treat unallocated bits as res0 for the purpose of the system-wide safe value these bits will still be sanity checked with strict match requirements as is currently the case
66a5c29b33bee95f855ce76db23748caca9e63fb	staging rtl8192e rename rtl8192_get_channel_map use naming schema found in other rtlwifi devices rename rtl8192_get_channel_map to _rtl92e_get_channel_map
182fac2689b769a96e7fc9defcd560c5cca92b1e	only clear sock_nospace when there is sufficient space in the socket buffer the ceph messenger would sometimes queue multiple work items to write data to a socket when the socket buffer was full fix this problem by making ceph_write_space use sock_nospace in the same way that does clearing it only when sufficient space is available in the socket buffer
427eed0244010c64f6905212f48258d3631bcb4d	staging rtl8192e delete successive assignments to the same location successive assignments to the same location is meaningless and can be deleted the coccinelle semantic patch was used to find cases expression e1
3f3f42b887fbffc3353e44ef9f32456c19ae4280	ensure the hw is powered during hw state readout the assumption when adding the intel_display_power_is_enabled checks was that if it returns success the power cant be turned off afterwards during the hw access which is guaranteed by modeset locks this isnt always true so make sure we hold a dedicated reference for the time of the access
9f324bda970c599ca35f7be89d9d1bcb96d6053c	acpi add cpu hotplug support for processor device objects acpi_processor_install_hotplug_notify registers processor objects to receive acpi cpu hotplug event notifications this patch additionally registers processor device objects acpi0007 to receive the notifications as well
288031bfef43b39b12dcaaad6b950d4742620243	rtc rtc-pcf8523 use devm_rtc_device_register devm_rtc_device_register is device managed and makes cleanup paths simpler
e9a64adaec93ce5dfcdee44bbd89c90b4d997f6f	add gen8_init_workarounds for common wa wa in this function should be ordered based on register address the following order is suggested ville instpm mi_mode row chicken half slice chicken common slice chicken hdc chicken cache_mode_0 cache_mode_1 gt_mode
f96dee13b8e10f00840124255bed1d8b4c6afd6f	net core ethtool issue with querying phy settings when trying to configure the settings for phy1 using commands like ethtool eth0 phyad __number__ speed __number__ the ethtool seems to modify other settings apart from the speed of the phy1 in the above case the ethtool seems to query the settings for phy0 and use this as the base to apply the new settings to the phy1 this is causing the other settings of the phy __number__ to be wrongly configured the issue is caused by the _ethtool_get_settings api which gets called because of the ethtool_gset command is clearing the cmd pointer of type struct ethtool_cmd by calling memset this clears all the parameters if any passed for the ethtool_gset cmd so the drivers callback is always invoked with as __number__ the _ethtool_get_settings is called from other files in the so the fix is applied to the ethtool_get_settings which is only called in the context of the ethtool
e69d89420e2297a896056bb29746a27d98d9b111	media cx25840 fix cx25840_s_stream for cx2388x and cx231xx for those two devices the code wrote to addresses but on those devices those addresses have nothing to do with power controls so clearly this never worked rather than writing to bogus addresses just do nothing for the cx2388x and cx231xx
60ba834c2fb65f2fafee47e03c258fac579d0591	__hw_addr_unsync_one from address not marked synced when an address is added to a subordinate interface the to list the address entry in the from list is not marked synced as the entry added to the to list is when performing the unsync operation dev_mc_unsync __hw_addr_unsync_one calls __hw_addr_del_entry with the synced parameter set to true for the case when the address reference is being released from the from list this causes a test inside to fail with the result being that the reference count on the from address is not properly decremeted and the address on the from list will never be freed correct this by having __hw_addr_unsync_one call the __hw_addr_del_entry function with the sync flag set to false for the remove from the from list case
ebc36ecde07835b2455b4cf7af4139bcad3c4815	staging rtl8192e rename rtl8192_free_tx_ring use naming schema found in other rtlwifi devices rename rtl8192_free_tx_ring to _rtl92e_free_tx_ring
dd412751129876dbeee811843fefe3b369e487ad	staging unisys visorchipset use ioremap direction rather than heavy visor_memregion
b7b9c2278752e37dc7ae918cda823aa2a078e03b	nvme fix nvme_ns_remove deadlock on receipt of a namespace attribute changed aer we acquire the namespace mutex lock before proceeding to scan and validate the namespace list in case of namespace command nvme_ns_remove function deadlocks trying to acquire the already held lock all callers except nvme_remove_namespaces of nvme_ns_remove already held namespaces_mutex so we can simply fix the deadlock by not acquiring the mutex in nvme_ns_remove and acquiring it in nvme_remove_namespaces
84e95355602c59865be8a3bd18cd2f0b3863b4cb	asoc rsnd show debug message for connection it can help for connection debug
7f0e823d58b7574cbe417d5bbc285891baed4437	asoc img parallel out add missing initialiser add missing initialiser for control_set variable in img_prl_out_set_fmt
29fa6c567855eb92d21122162029c5709892106b	f2fs add parentheses for macro variables more this patch adds parentheses for macro variables more in
7c20078a8197389eead62399419fdc4f8ac4a8a3	pci prevent vpd access for buggy devices on some devices reading or writing vpd causes a system panic this can be easily reproduced by running lspci or cat blacklist these devices so we dont access vpd data at all bhelgaas changelog comment drop changes link
9280ddb19489fa24e2d4f6f492d185ae1172bec2	obtain extra reference for asynchronous processing commit s390 use device_remove_file_self instead of device_schedule_callback changed ccwgroup to use an extra work queue instead of device_schedule_callback this function obtained an extra device reference for its async work which is missing in the new implementation and results in a freeing memory with a lock still held bug fix this by obtaining an extra reference for the async work
3b3da6a974357887c73c5ee61988dbe3a8f62d88	scsi lpfc fix cq and eq dump failure for debugfs fixed debug helper routine failed to dump cq and eq entries in non-msi-x mode
ab5cf493170e2d7d0f4a74467009d55e63cd1a71	staging comedi gsc_hpdi remove hpdi_writel this helper function is used to or bits with a software copy of a register value then writel the new value to the register the software copies are never updated in the driver so they are always __number__ due to the kzalloc remove the unnecessary bits from the private data and replace the hpdi_writel calls with writel
eff3689b0f6cf6c92c1ae61c8c821c149eeac4ec	staging comedi dyna_pci10xx tidy up comedi_lrange tables tidy up the whitespace in the comedi_lrange tables
a5c79c26e168018df201c07e046003a6ab226cdc	ptp cpts convert to the __number__ bit time methods this drivers clock is implemented using a timecounter and so with this patch the driver is ready for the year __number__ compile tested only
f81ccb489a7a641c1bed41b49cf8d72c199c68d5	target simplify core_tmr_abort_task list_for_each_entry_safe is necessary if list objects are deleted from the list while traversing it not the case here so we can use the base list_for_each_entry variant
ba421f8f9266a5dda86fb8ce7b814336ae1edadc	wlcore set max_rx_agg_subframes in mac80211 according to ht conf the max rx aggregation subframes configured to fw must be the same number given to the upper layers mac80211 derive both from the same value given in the conf struct
c5d472212024543e32cf3eea4381ab91b9f6b812	iwlwifi remove radio_config from eeprom_data no one uses it
0cadc70282df0d957c00e8e68ba58afeefdf0f64	pm sleep new suspend_resume trace event for console resume this patch adds another suspend_resume trace event for analyze_suspend to capture the resume_console call can take several hundred milliseconds if the printk buffer is full of debug info the tool will now inform testers of the wasted time and encourage them to disable it in production builds
b06cf2d7ec51c12eb5f9d191d461bd9c08f2c107	leds ss4200 fix incorrect placement of __initdata __initdata should be placed between the variable name and equal sign for the variable to be placed in the intended section
9ef6839bcce7ca944c1ace4a7247cf13ca92a28f	perf tests record no need to test an array against null it will always evaluate to true as clang warns cc cc error comparison of array argv equal to a null pointer is always false if evlist null argv null __number__ error generated link
c95221f69dfa5d3696b2b91374cbd7e5897657c5	kvm s390 do not set cc3 for eqbs and sqbs the eqbs and sqbs instructions do not set cc3 for invalid channels but should throw an operation exception instead when not available thus they should not be handled by the handle_io_inst wrapper but drop to userspace instead which will then inject the operation exception
b1ecde36adb0c488dd048aa267602803b65ccc9b	ath10k skip some commands on reassoc it doesnt make much sense to reconfigure peer completely upon reassociation this will make it easier to have a more uniform association code across different modes
1afd5be87e30997a5623260d9177ed62cf88adbe	bluetooth remove unused hci timeouts definitions those are not used anywhere in code and never were since introduction in __number__ so just remove them
d7b856f9380d95a9d663180701da904123c035b8	bluetooth move more logic into set_connectable complete callback this patch moves the responsibility of the hci_connectable flag to the request completion callback of the set connectable command this will allow us to cleanly add support for le advertising hooks in later patches
4576039ffc04ffe672081159a11cf6e0b875a069	change byte order when u16 tag the tag field should be stored and accessed using big endian byte order as intended in the specs or else when displayed with a trafic analyser such a wireshark the field not properly displayed __number__ instead of __number__ and so on
d8410234db6a1bb05408ba2f0e3fd6b04ef626a3	factor out slab list fixup code slab list should be fixed up after object is detached from the slab and this happens at two places they do exactly same thing they will be changed in the following patch so to reduce code duplication this patch factor out them and make it common function
ea82fc151c5c092afb08a72289252c359ac88f45	staging rtl8723bs fix assignment in if condition in error do not use assignment in if condition detected by
40775257b97e27305cf5c2425be7acaa6edee4ea	dm cache boost promotion of blocks that will be overwritten when considering whether to move a block to the cache we already give preferential treatment to discarded blocks since they are cheap to promote no read of the origin required since the data is junk the same is true of blocks that are about to be completely overwritten so we likewise boost their promotion chances
ccaddfe1a2e10f50aa6f553f9791c2724b6d3c4a	hdmi make sure clock is enabled before dumping registers the debugfs register dumping function did not enable the hdmi clock this led to a possible system hang when reading the debugfs entry while no hdmi cable was connected to the system this patch makes sure that the clock is enabled during the read
bf83208e0b7f5938f5a7f6d9dfa9960bf04692fa	apparmor fix profile lookup for unconfined buglink also affects apparmor portion of buglink the unconfined profile is not stored in the regular profile list but change_profile and exec transitions may want access to it when setting up specialized transitions like switch to the unconfined profile of a new policy namespace
0f05a3ae45f09c20240c8b47152e0333d4d3f717	gpiolib devres use correct structure type name in sizeof correct typo in the name of the type given to sizeof because it is the size of a pointer that is wanted the typo has no impact on compilation or execution this problem was found using coccinelle the semantic patch used can be found in message __number__ of this patch series
467e6e7be2e26fd5bbaabd849717d37de99df8f1	mtd initialize the badblockbits to __number__ ideally the block should have written on the bad block position any value other than implies a bad block in practical situations there can be bit flips in the oob area as well which means that a block with being read at bad block position may imply a bad block but it is infact only a bit flip in the bad block byte to resolve this problem the block is marked as good if number of high bits is greater than or equal to badblockbits initialized to __number__
74e2419b00d870b373ada4878e3d66d8dc97f4b0	iio maxim_thermocouple set parent device initialize the parent of the iio device to the device that registered it this makes sure that the iio device appears the right level in the device hierarchy
1d6ca29db8b1f213de880b10ac28aed0a19c1d4a	media mantis cleanup null checking in mantis_ca_exit smatch complainst that the call to mantis_evmgr_exit dereferences ca but then we check it for null on the next line ive moved the null check forward to avoid that
9c911962f9d145fd6f8cb3d93ae58486cef14d53	s6e8aa0 silence array overflow warning smatch complains that we are reading beyond the end of the array here s6e8aa0_read_mtp_id warn buffer overflow s6e8aa0_variants __number__ __number__ we set the error code so its not harmful but it looks like a return was intended here so lets add that and silence the warning
f9eff219761338402b5e109bfdb2daa9f6b30b8c	arm pxa specify pmus are for xscale cpus now that we can specify which pmu variant were likely to deal with do so in the pxa board code this will allow us to split the armv6 armv7 and xscale pmu drivers
410e5fea6a217cf3f7b187dfeabb909645a006b6	usb host fusbh200-hcd remove redundant platform_set_drvdata commit device-core ensure drvdata null when no driver is bound removes the need to set driver data field to null
bfb2892018ca302d8d659232f5f18f56b4b2b782	crypto sunxi dont print confusing data gcc correctly warns that the printk output contains a variable that it thinks is not initialized in some cases in function sun4i_ss_cipher_poll warning todo may be used uninitialized in this function note todo was declared here a closer look at the function reveals that the variable is always initialized at this point ileft is guaranteed to be positive at the start but its contents are not well-defined depending on some other variables it might be either a count in words or bytes and it could refer to either input or output the easiest solution apparently is to remove the confusing output and let the reader figure out the state from the other variables
341203167f9138073853cecd1f02d180bf9924ca	thermal fix warnings no need to set here the core will do it remove field if calls are used which set it automatically generated by
c14e36733b8a63894db9ca0b486ce14299ef2fda	read typer register outside the loop no need to read the typer register in the loop values do not change this patch is basically a prerequisite for a follow-on patch that adds errata code for cavium thunderx it moves the calculation of the number of id entries to the beginning of the function close to other setup values that are needed to allocate the its table now we have a central location to modify the setup parameters and the errata code can be implemented in a single block link
6fe950ebfd3a374c78ce66a335fce258648426a1	arm shmobile r8a7778 use shmobile_init_delay adjust the r8a7778 soc support code to use shmobile_init_delay together with cpu frequency settings from the dts get rid of the c code version
ed1c9b3c18e33a69da0a911eadf4948ea7e5b5b9	mfd htc-i2cpld use gpiochip data pointer this makes the driver use the data pointer added to the gpio_chip to store a pointer to the state container instead of relying on container_of
ec84aa0a920192df56624961cb146947d7d9e11e	tty serial lantiq implement earlycon support this allows enabling earlycon for devices with a lantiq serial console by splitting lqasc_serial_port_write from lqasc_console_write and re-using the new function for earlycons write callback the kernel-parameter name matches the driver name lantiq similar to how other drivers implement this
9d475de5d12af8ac4c2101807e0a889ac7389c5a	rbd add code to get the size of a v2 rbd image the size of an rbd format __number__ image is fetched from the server using a get_size method the same method is used for getting the size of a snapshot so structure this addition with a generic helper routine that we can get this information for either
9f654a7f25a95080d4cf0909c08d840ff0ac6998	staging rtl8192e rtl8192e remove spaces before the semicolons patch the following warnings warning space prohibited before semicolon warning space prohibited before semicolon
883ffd6e64114495f68652721065149a2bbd9de6	net stmmac fix clock calls is mandatory for platforms using common clock framework since these drivers are used by spear platform which supports common clock framework add support for them otherwise the clocks are not correctly and ethernet support doesnt work
260ecb3c915fae3d67bf0378016ae68929be3b0e	mmc sdhci-esdhc-imx correct the tuning-step setting here we use to set the tuning-step but before that we should clear the tuning-step otherwise we could got the wrong setting
09b4ab3c433733127f8644290e94548a4cb8122f	correct dirty page calculation for highmem zone_movable could be treated as highmem so we need to consider it for accurate calculation of dirty pages and in following patches zone_cma will be introduced and it can be treated as highmem too so instead of manually adding stat of zone_movable looping all zones and check whether the zone is highmem or not and add stat of the zone which can be treated as highmem
2808f778de3d591c3c84034688fd09e38ada27a6	spi fsl-espi dont set dont set as its nowhere used in fsl-espi and fsl-lib
0366ef847581d692e197b88825867ca9ee00e358	if md_integrity_register fails raid0_run must free the mem
a889331d759453fa7f424330f75ae4e2b9e02db4	cpufreq mt8173 migrate to use operating-points-v2 bindings modify mt8173-cpufreq driver to get opp-sharing information and set up opp table provided by operating-points-v2 bindings
794ff5710eb1d8bea4acc79cd005f6342623ec46	hdp should always do this fixes tonga vm-fault issue when running disaster a multiple context gl heavy tests we should always flush invalidate hdp no matter vm used or not
a6f4e0c17cecf7ccdf3f61bc998c5ecbd5fdfd00	staging rtl8723au use
1e82574d1db1451f137cb520f21b9176f05284c9	perf tools fix detection of stack area output of contains helpful information to anonymous mappings like stack heap for the case of stack it can show multiple stack area for each thread in the process cat grep stack rw-p __number__ __number__ rw-p __number__ __number__ rw-p __number__ __number__ rw-p __number__ __number__ rw-p __number__ __number__ rw-p __number__ __number__ __number__ rw-p __number__ __number__ rw-p __number__ __number__ rw-p __number__ __number__ rw-p __number__ __number__ rw-p __number__ __number__ rw-p __number__ __number__ rw-p __number__ __number__ __number__ rw-p __number__ __number__ stack however perf only knew about the main threads fix it link
c97291774c1b867b56c3d439ddaec9a965cf559e	move displayid validation to its own function we need to use this for validating modeline additions
9d93efe35ed011327999675d70bb1b12ccdbd62d	gpio tps65912 fix bad merge i screwed up while merging the immutable branch for tps65912 so fixing it unbroken again
007d66a0bd43d886eb3e4aceaf1a96b8743ccaff	perf trace write to stderr by default without this patch it is cumbersome to read the trace output but ignoring the normal potentially verbose output of the debuggee one common example is doing something like the following perf trace find without this patch the trace summary will be lost now it will still be printed at the end this behavior is also applied by strace link
dd459bb1974c5e9cff3dfbf4f6fdb3e9363ef32e	locks have locks_release_file use flock_lock_file to release generic flock locks of open-coding it and removing flock locks directly this helps consolidate the flock lock removal logic into a single spot
3ade4f81ae0c32c0c82fad93de92df07f24a85a4	xtensa switch to sched_clock_register the __number__ bit sched_clock interface now supports __number__ bits upgrade to the __number__ bit function to allow us to remove the __number__ bit registration interface
2091eda1f21dba61387304ae39d68d45e274ead2	staging rtl8188eu put constant on right side of comparison constants should be on the right side of comparisons issue found by script
78f9f3b12c6a25a668c43f026f42596c88d6d0bd	pinctrl mvebu fix iomem pointer for dove pinctrl there has been a change in to require registers addresses marked as iomem this patch takes care of this and also replaces oring address offsets with adding them
0d37678e16fd4db3cf74fa840e7f98a0b7d40742	e1000e cleanup remove unnecessary variable
011fa99404bea3f5d897c4983f6bd51170e3b18f	ext4 prevent online resize with backup superblock prevent bug or corrupted file systems after the following mount ext4 resize2fs we previously prevented online resizing using the old resize ioctl move the code to ext4_resize_begin so the check applies for all of the resize ioctls
4d88550a9a370e6fe6733d5c9424c10f20c0580f	media mt9v032 remove unused macro the ext_clk macro is unused remove it
481fe5be821c3d04f986e4061de42e1209a62374	dell-wmi process only one event on devices with interface version __number__ on devices with wmi interface version __number__ does not clear buffer before filling it so next time when send wmi event which is smaller as previous then it contains garbage in buffer from previous event on devices with wmi interface version __number__ clears buffer and sometimes send more events in buffer at one call since commit dell-wmi update code for processing wmi events dell-wmi process all events in buffer and not just first to prevent reading garbage from the buffer we process only the first event on devices with wmi interface version __number__
c0c8c9fa210c9a042060435f17e40ba4a76d6d6f	fix lock pinning warning during cpu hotplug the following warning can be triggered by hot-unplugging the cpu on which an active sched_deadline task is running on warning cpu __number__ pid __number__ at releasing a pinned lock call trace warning cpu __number__ pid __number__ at unpinning an unpinned lock call trace as per the comment before this code its safe to drop the rq lock here and since we potentially change rq unpin and repin to avoid the splat rewrote changelog link
a681887f7b0f8b7698e4b22f1191015424fa96e4	s390 cio fix cio_tpi ignoring adapter interrupts ensure that adapter interrupts are correctly processed when they are retrieved using test pending interruption
271df90e4e530c17f237b27034d6341cb2c2f536	z3fold fix spinlock unlocking in page reclaim commmit z3fold add kref refcounting introduced a bug in z3fold_reclaim_page with function exit that may leave spinlock held here comes the trivial fix link
a4663911392efdc504ce97b192d46f2677a6fe35	kconfig add unexpected data itself to warning if the parser runs into unexpected data it emits warnings like unexpected data add the unexpected data itself to this warning that makes it easier to discover what is actually going wrong unexpected data
35b16a9a093757a7a1ef288eea1128b0b4a3eef7	xtensa provide dma_error_code definition this fixes the following allmodconfig build error error dma_error_code undeclared first use in this function error dma_error_code undeclared first use in this function make3 error __number__
52e6fb48121a552d11ea0eb05540178fb3ac4e15	alsa hdspm correct max buffer size limit some modesl can support up to __number__ frames per period
7595ac0711723dbc07e07ebb8c91ad56df4ab49d	blackfin gptimers add group structure for hardware register layout
5f0cc6d16c0572bf5e9e65b6133ac415268c0720	arm pxa wunused-result warning in viper board file calling kstrtoul requires checking the result in case of the viper_tpm_setup function lets fail the __setup function if the number was invalid without this patch building viper_defconfig results in in function viper_tpm_setup warning ignoring return value of kstrtoul declared with attribute warn_unused_result
0662cc968aceaca34848e63f431e585f4f71f746	scsi aacraid update driver version updated driver version to __number__
a133829e66d25e1ce293a30bcc3fb8eb653a1519	regulator tps65023 convert to get_voltage_sel
f3803eb2f57450ad3f67f8f6dd728f94ad8c717d	ath6kl fix accessing wrong in ath6kl_tx_complete when buffer alignmnet is applied the data pointer of skb taken from cookie will no longer point to the first byte of the actual data but the pointer is used in ath6kl_tx_complete to get the index of the virtual interface which will not give the correct interface index and sometimes may give the following warn_on message use instead of to fix this warning at ath6kl hardware name modules linked in ath6kl mmc_block cfg80211 binfmt_misc ppdev nfs nfsd lockd nfs_acl auth_rpcgss sunrpc exportfs snd_hda_codec_hdmi snd_hda_codec_realtek snd_hda_intel snd_hwdep snd_pcm_oss snd_mixer_oss snd_pcm snd_seq_dummy thinkpad_acpi snd_seq_oss snd_seq_midi snd_rawmidi joydev fbcon tileblit font bitblit softcursor snd_seq snd_timer snd_seq_device i915 uvcvideo drm_kms_helper drm psmouse serio_raw snd i2c_algo_bit sdhci_pci videodev intel_agp soundcore intel_gtt jmb38x_ms sdhci snd_page_alloc nvram lp parport agpgart video ahci r8169 mii libahci last unloaded ath6kl pid __number__ comm tainted g w call trace ath6kl ath6kl ath6kl ath6kl ath6kl ath6kl ath6kl ath6kl ath6kl ath6kl
2b1360da35877cd969ed83884d8989ba778254d0	btrfs free up block groups after everything if we abort a transaction we will do the tree log cleanup at unmount but this happens after we free up the block groups this makes all the leak detection warnings go off because we think weve leaked space but in reality we just havent cleaned it up yet so instead do the block group cleanup stuff after freeing the fs roots so we dont get these warnings thanks
d2443fe3b1b968a7bde4fa8e70542ba5baac3d89	staging comedi adl_pci9118 use use the that was setup in the device attach instead of accessing the array directly
248046ba074dc3cbba4f771f08da8b430662d8ac	qeth no write permission for readonly sysattr user is not allowed to write into bridge_state sysfs file fixed attribute not mislead the user
618fad954b9becf095f1b52391af29f743ff4662	replace sscanf with kstrtoint it is not safe to use sscanf
cedc5469778846ee18c653aaa6d70681961eed93	bluetooth lock socket when reading hci socket options when reading the hci raw socket option the socket was never locked so lock the socket and in addition return einval on non raw sockets
d82e8bfdef9afae83b894be49af4644d9ac3c359	nvme merge issue on character device bring-up a recent patch made it possible to bring up the character handle when the device is responsive but not accepting a set-features command another recent patch moved the initialization that requires we move where the checks for this condition occur this patch merges these two ideas so it works much as before
bcb898e5873430d8121eb8df07d5fbfb49134167	input uinput uinput_validate_absbits cleanup this moves basic checks and setup from uinput_setup_device into uinput_validate_absbits to make it easier to use this way we can call it from other places without copying the boilerplate code
c46ee8ad7856b58eeb383c30ce847897f85c4103	xfs factor btree block freeing into a helper
6b8e7d8f6881109dedfcf721d72f6bc822f4c580	silead_dmi add entry for insyde tablets add an entry providing the necessary info to make the touchscreen work on various tablets based on the insyde whitebox tablet this has been tested on a dexp ursus tablet
01ea748cd5bfb88e2d3eaf2ded0f047d37b11484	iwlwifi mvm disable uapsd for d3 image the d3 firmware image doesnt support uapsd so disable it
a9ca1d5477a89c1833214a01463190f7bd77d8a9	mmc sdhci-dove add sdhci_quirk_no_hispd_bit the sdio controller on dove doesnt have a bit to indicate high-speed with the quirk set it fixes accessing high-speed sdcards
64d8ee59577a2b1de73cc40c2ec661bddf71e8b0	delete unused defines they dont appear to be used elsewhere uses git grep pte_ grep _pte_ note this is the location of the previous definition pte_valid _atpteval_t __number__ __number__ in file included from warning pte_valid redefined enabled by default pte_valid __number__ __number__ in file included from from from from from from from from note this is the location of the previous definition pte_valid _atpteval_t __number__ __number__
c278504d2a65d1ca167e242af42d0732a305ed99	media media rc improve rc_bit_ constant definition the rc_bit_ constants are used in bitmaps in case of __number__ rc_bit_ constants the current code will fail on systems therefore define the rc_bit_ constants as unsigned long long
4c660496c95af93f3461c06d46fd33c0719625db	rocker store rocker_port in fdb key rather than pport well need more info from rocker_port than just pport when we age out fdb entries so store rocker_port rather than pport in each fdb entry
e013ac312c79379b26cf29012cfbb37c68f79283	tools hv fix file overwriting of hv_fcopy_daemon hv_fcopy_daemon fails to overwrite a file if the target file already exits add o_trunc flag on opening
2615f3759b7b7d47a2fa894bc9f45286bdf122d7	cfg80211 add warning when calculating mcs rates __number__ cfg80211_calculate_bitrate doesnt work for mcs rates __number__ or higher and it has always returned __number__ in that case warn if it ever really happens
a8f6cb7bb300c246ef97c06ad13a7f0ceaea5c65	warn more loudly on unsupported dcb version
e76b9cc7b88b4807e129779ca36298c76486a06c	regulator da9052 initialize of_node param for regulator register initialize for regulator before registering this is needed for dt based regulator support
476c7c809ebeefb83e017be543922dede1c10584	dmaengine fsl-edma explicitly freeup irq dmaengine device should explicitly call devm_free_irq when using devm_request_irq the irq is still on when devices remove is executed and irq should be quiesced before remove is completed
e6058aaadcd473e5827720dc143af56aabbeecc7	asoc jack use power efficient workqueue the accessory detect debounce work is not performance sensitive so let the scheduler run it wherever is most efficient rather than in a per cpu workqueue by using the system power efficient workqueue
a39fb224b49c5aebb40c4d5c9d6ccf3a951053ee	ath9k avoid useless cast from struct ath_rateset to u8 and back
41390895e50bc4f28abe384c6b35ac27464a20ec	netfilter ipvs dont check for presence of nat extension check for the nat status bits they are set once conntrack needs nat in source or reply direction this is slightly faster than nfct_nat as that has to check the extension area
e2f0b00560729c47f39b2bc624eb93d82dc0e3e8	gpio bcm281xx fix return value of bcm_kona_gpio_get we need to return the corresponding bit for a particular gpio this bit contains shift not mask
fed2451512495f0f0820ac9e53936bd208569bc8	pci remove pcie_cap_has_devctl pcie_cap_has_devctl does nothing so remove it simplicity over consistency in this case no functional change
ef50f86e15f2516658f0badd7890292d7a685106	rtc ds1302 fix write value for day of week register the valid range of day of week register for ds1302 is __number__ to __number__ but the set_time callback for rtc-ds1302 attempts to write the value of which is in the range __number__ to __number__ while the get_time callback correctly decodes the register
5966f2ddcda452455f8ab518b7cba221b5234a94	cfg80211 enter psm when working as p2p_cli cfg80211_netdev_notifier_call is configuring psm in case of nl80211_iftype_station interface type on netdev_up do the same for nl80211_iftype_p2p_client interface type
66fdc052d7dba5bb8386f7a1a38107ba8307a59e	vfio virqfd_lock can be static
554e92ed8fcdbcad736ef906c393847d44d52692	perf session fix perf_session__peek_event perf_session__peek_event generally leverages there being a single mmap of the file however on platforms when there is more that of data then there are multiple mmaps so perf_session__peek_event reads from the file in that case a couple of bugs were exposed note how the seg fault appears with of data perf record __number__ perf record woken up __number__ times to write data perf record captured and wrote __float__ mb perf script perf record __number__ perf record woken up __number__ times to write data perf record captured and wrote __float__ mb perf script segmentation fault core dumped the wrong address was being passed to the readn function and the buffer size was not being checked link
e9ada6fa3c9e3dbd02eda3da4179b4d1417ef171	staging lustre ldlm refine lu-2665 patch for posix compliance follow-on to patch introduced to fix lu-2665 ticket gerrit change at with change-id i8faa331712abeadee46eabe111ee1c23a05840d5 original patch introduced regressions against posix test suite tests in lsb-vsx posix test suite at so the idea is to only resend f_unlcks to have both lu-2665 bug and posix test suite happy intel-bug-id reviewed-on
0e8d96dd2c99405c707f540b5922ec869b848979	exofs readpage_strip add a bug_on to check for pagelockedpage readpage_strip can be called from several code paths all of which require that the page be locked before any operations are carried out since we export the exofs_readpage callback to the vfs add a bug_on to check for pagelockedpage to make sure that this understanding is never compromised
56384ad6d0e6296cd9572c4936c62479f5b7997b	staging rtl8712 changed cast to __le16 fixed sparse warning changed u16 to __le16
c15982dfa8227f3e8fd2a6e2e13a009a9991d96c	pci keystone limit mrss for all downstream devices keystone pcie controller has a limitation that memory read request size must not exceed __number__ bytes this is a hardware limitation add a quirk to force this limit on all downstream devices by updating mrrs
eb97e08e04048d47d5a16a9c6428cda5dda8c4f1	staging comedi das08_cs remove the pcmcia the pcmcia callbacks dont do anything remove them
4035e4c2ebeb6ac1acbf4e5dd8a759fcf93ff8da	drbd fix clearing of mdf_al_disabled
3db9e86029349c2c84928b5a0f7c7cf324243b4f	arm zynq slcr use read-modify-write for register writes ignored the current register state when writing to a register fixing this by implementing proper read-modify-write
5de738272e38f7051c7a44c42631b71a0e2a1e80	drbd ensure that data_size is not __number__ before using data_size-1 as index this could be exploited by a peer which runs modified code
3ac67d7bfa2f35cc8a52bdff39e3bbadb6e639a9	i40e store off phy capabilities store off reported phy capabilities in link_info structure change-id ife0f037c26983ca985dbf79abf33f8f8791369e8
82c2c8b8616fa9e77264c53f0df483f74ac54613	lockd properly convert values in debug messages lockd server returns status __number__ its quite hard to understand that number in this message is __number__ in big endian
5194fe469927e50367b35e556812c7fc6ce130d1	thermal cpu_cooling merge cpufreq_apply_cooling into cpufreq_set_cur_state cpufreq_apply_cooling has a single caller cpufreq_set_cur_state and cpufreq_set_cur_state is an unnecessary wrapper over cpufreq_apply_cooling get rid of it by merging both routines
f91bbcb0b82186b4d5669021b142c263b66505e1	qlcnic free up memory in error path
13e0e958e8e06d27a2c69b2ace8c11d256b52d67	quiet sparse noise like svcauth_unix the symbol svcauth_null is used external from this file declare it as extern to quiet the following sparse noise warning symbol svcauth_null was not declared should it be
c768626479187f1fcc3697e5f150b7af259c657c	media v4l atmel-isi reset the isi when starting the stream the queue setup operation isnt the right place to reset the isi move the reset call to the start streaming operation
73590a25ba6f55eecde4ffbbbc53835d7ccf5402	genwqe increase driver version number increase genwqe driver version number
83a1d2288952db16150a09f3d40284ffc11fc063	cleanup generalize processing of mad data ib_find_send_mad only needs access to the mad header not the full ib mad change the local variable to ib_mad_hdr and change the corresponding cast this allows for clean usage of this function with both ib and opa mads because opa mads carry the same header as ib mads
e86eee6bc2aaa6b3637f6497b26beee09a91bde9	cpufreq dt remove unused code this is leftover from an earlier patch which removed the usage of platform data but forgot to remove this line remove it now
ac71b46efd2838c02ec193987c8f61c3ba33b495	openvswitch use proper buffer size in nla_memcpy for the input parameter count its better to use the size of destination buffer size as nla_memcpy would take into account the length of the source netlink attribute when a data is copied from an attribute
ae6f61870490c10a0b0436e5afffa00c9dacffef	acpi battery add the power unit macro this patch is cosmetic only and makes no functional change
01b7806cdce3d3cf1626a1e79389f30512703069	ipv6 remove a rcu_read_lock in ndisc_constructor in6_dev_getdev takes a reference on struct inet6_dev we dont need rcu locking in ndisc_constructor
87b0e714dee438309efca998616a2dbb064ca1a0	unicore32 unobfuscate _tif_work_mask bits in flags are never set there so this is pointless
ee8e8806348732e328d119418a9788aabeceed0a	hid i2c-hid fix warning we should not initialize to __number__ static declarations
feadd7d3eca4da531b35b2af3623dd992f2d988d	media ds3000 declare module_firmware usage
429172ccf058e67974dd1ab3d8b82075383efe84	um trim most of the functions in there are not used in anything that ends up including that
d2f08c7521cd67bc5f3c990af87add7b02f46ebe	nand omap2 replace pr_err with dev_err usage of pr_err is frowned upon so replace it with dev_err
03b61ff3c324e094944b663cc611a8bab252539c	move set_migratetype_isolate outside get_any_page chen gong pointed out that was done in different functions in which makes the code less so this patch does it in soft_offline_page with this patch we get to hold lock_memory_hotplug longer but its not a problem because races between memory hotplug and soft offline are very rare
35a8735d1cea548c12ca00e38fb56f91d053035b	staging comedi pcl818 remove irq_free from private data this member of the private data is not needed we can check if is none zero instead remove it
434502930f59995f37fcc2c02cab79e059fb5043	net dsa mop up remaining net_dsa_hwmon references previous patches have moved the temperature sensor code into the marvell phys a few now dead references to net_dsa_hwmon were left behind go reap them
67fed0da5ac23ab6187c362b7ade08339872f718	i2c at91 change log when dma configuration fails when the dma configuration fails there is a log reporting that we cant use dma and indicating the error number when booting the kernel it is annoying to see this error number moreover people can think something is going wrong it is not the case it means that dma cant be used but it doesnt prevent to use i2c
427bfe07e6744c058ce6fc4aa187cda96b635539	xen-blkfront silence pfn maybe-uninitialized warning pfn cannot actually be used unless nor is pfn accessed in get_grant unless but silence this warning anyway in function do_blkif_request warning pfn may be used uninitialized in this function gnt_list_entry pfn info note pfn was declared here unsigned long pfn
35f1790e6c6a7e4cae57b616cf36444d27fa6b28	x86 boot fix port argument to inl function u32 port in inl should be u16 port hpa its a bug but it doesnt produce incorrect code so no need to put this into urgent or stable link
b8d336ed90f541097a2ce583be430bb3e895dfbd	mfd arizona handle probe deferral for reset gpio the arizona codecs will generally function correctly without a reset line although it is strongly advised to have one as such we do allow the system to boot if the reset gpio is missing or incorrectly specified however we should fail probe if we get a probe deferral request this patch adds handling for this case
023e89c00b6d914d39b2e2cc48706a198e3a1d7a	staging comedi absorb raw_ioctl comedi_compat_ioctl just calls static inline function raw_ioctl with the same parameters although the former returns a long and the latter returns an int since raw_ioctl is not called from anywhere else just absorb its body into comedi_compat_ioctl
e074d08e2b98db1b19328bb9395052b34366831d	constify and add priv field to controls sensors constify the sensor ops and name and add a for use by the control and sensor drivers to point back to their private data avoiding the need to create a wrapper data structure per sensor or control instance
ccf53eac2097fb47bc40875ffb22c2d10fa8c46c	perf trace handle files with no tracepoints before perf trace segmentation fault core dumped after perf trace data file does not have events when there are no tracepoints in a file the struct pevent that contains the list of tracepoints that will be used to lookup the tracepoint id by name will not be populated causing a null deref and we dont need to do all that dance to look at pevents for an entry with a slighly different name to then lookup the tracepoint by its id on the evlist just use the perf_evlist__find_tracepoint_by_name routine that will find the tracepoint if present link
93662500a1fcc9c8085ac3f056b537d093fd4d20	clk renesas cpg-mssr postpone call to pm_genpd_init all local setup of the generic_pm_domain structure should have been completed before calling pm_genpd_init
d4b08630fb6e3fe9948456b09feb223fba2b48a6	use atomic plane state in the primary plane update
7cc054d0b1ff4cc96f43101fee9bcec21c725c32	staging comedi adv_pci1710 rename check_channel_list for aesthetics rename this function so it has namespace associated with the driver also change its parameters the and are always passed just pass the comedi_cmd pointer instead
75f54acc086940ccef8b6d67ba8537529bda104c	serial pause dma only if dma transfer in progress it is possible that dma transfer is already complete but completion handler is yet to be called when dmaengine_pause is called in case of error conditionlike timeout this leads to dmaengine_pause api to return einval as descriptor is already null causing rx_dma_broken flag to be set and effectively disabling rx dma fix this by calling dmaengine_pause only when transfer is in progress
e3963fd60a83967573f6330c9db134bd581da746	of clear detach flag on attach when attaching a node always clear the detach flag without this change the sequence detach attach fails
ca026a3504c2033821b672a09b26d467ae017eb2	two lines into one the last two lines of these functions are compressed into one also removed the variable ret as it is now not used found using coccinelle expression e ret e ret
b5dfc6c10608fdf0c35a747a0a3bf3f6e40a38e1	mips kvm use tlb_write_random when mips kvm needs to write a tlb entry for the guest it reads the cp0_random register uses it to generate the cp_index and writes the tlb entry using the tlbwi instruction tlb_write_indexed however theres an instruction for that tlbwr tlb_write_random so use that instead this happens to also fix an issue with ingenic xburst cores where the same tlb entry is replaced each time preventing forward progress on stores due to alternating between tlb load misses for the instruction fetch and tlb store misses
4691b271ac3a3bdc0d7d886e4715163eb4fb4bc7	nfsd fix a memory leak in nfsd4_list_rec_dir if lookup_one_len failed nfsd should free those memory allocated for fname
5bbde4d2ec8061a9cdad3f7a08d61c4d78e57e0e	net fec use pinctrl pm helpers when system suspend need to set pins to low power state to save io power consumption there are three states of pinctrl default idle and sleep currently enet supports default and sleep state
496e7cd9b8f4e8cce2075c934f518c31ed94a47c	staging comedi mf6x4 analog output data does not need extra masking the comedi core validates that all the data values are before calling the function the extra masking is not needed remove it
382ca8a1ad8963c7676585f9e25f4c5ff8b28439	net_sched provide default walker function for actions
6cee1f83448bc568de8b426f7cc15f0dc6f4b064	gma500 convert spaces to tabs in convert the spaces within the file to tabs in order to comply with the coding style of the kernel
232b6968b1296ccd4086867c9890b6f55a65256e	media ce6230 use dvb usb macros
9ab1fac4829b3da0ba4d3f44d95d3e8ad13e6629	asoc omap-mcbsp use different method for dma request when booted with dt the dma resource no longer available via this api when booting with dt when the board is booted with dt do not use platform_get_resource_byname instead set the to the name of the dma channel and omap-pcm can use this name to request the dma channel
5b97469a55872a30a0d53a1279a8ae8b1c68b52c	thermal qcom tsens-8916 mark pm functions __maybe_unused the newly added tsens-8916 driver produces warnings when config_pm is disabled error tsens_resume defined but not used static int tsens_resumestruct device error tsens_suspend defined but not used static int tsens_suspendstruct device this marks both functions __maybe_unused to let the compiler know that they might be used in other configurations without adding ugly logic
703e148875c838c430312da592d7ab3681ab5c81	input appletouch dial back fuzz setting lets dial back the default fuzz setting for most devices using this driver based on values from user feedback from forums and bug reports
739f9502fdd7c7202123ded842415a0392b7dc40	asoc rsnd add rsnd_path_parse macro current r-car sound supports only but other module will be supported this patch adds rsnd_path_parse macro to share code
bd3772ec57f27807f6f1846b1696f0a1d0de9e5b	staging comedi adl_pci9118 tidy up start_pacer for aesthetics rename this function so it has namespace associated with the driver the divisors used to load the counters are stored in the private data get them from there and remove the parameters
3eb4351af42bd8b6de20daab07b204a85c35248f	hid input call input_sync when automatically releasing a key we need to emit between key press and release otherwise userspace is allowed to swallow the event plantronics headset
6ddcd46463aa66855f1f8e74de454740a5f4aef4	mwifiex fix incorrect privacy setting in beacon and probe response test procedure __number__ start ap with security setting wpa2 __number__ stop ap __number__ start ap with open security here its observed that privacy is enabled in beacons and probe responses this patch fixes it by checking the privacy parameter from cfg80211_ap_settings if privacy is not set in cfg80211_ap_settings set open authentication and no encryption in fw
ba7b2d987dea0847782e8ad9a7bcc9429896d7ac	omapdss panel acx565akm remove omap_dss_device maximum backlight level usage the omap_dss_device structss max_backlight_level is used to pass maximum backlight level for the platform however no board file using this panel populates this field therefore we remove its usage from the panel driver
5b6179570fb3d89758c6bc93b322018edc2b2a8f	media media ti-vpe vpe post next descriptor only for list complete irq vpe_irq checks for the possible interrupt sources and prints the errors for the dei_error and ds_uv interrupts but it also post the next descriptor list irrespective of whichever interrupt has occurred because of this driver may release the buffers even before dma is complete and also schedule next descriptor list fix this by _actually_ handling the irq only when listcomplete irq occurs
7b8067f202b9dc0b6baea1dee918d95e3112f2a5	arkfb use display information in info not in var for panning we must not use any information in the passed var besides xoffset yoffset and vmode as otherwise applications might abuse it
061dff29f8f62c21c9222897e4d121b4a5fa50da	xprtrdma increase default credit limit in preparation for similar increases on servers bump the advertised credit limit for to __number__ this allocates some extra resources but the client will continue to allow only the number of rpcs in flight that the server requests via its advertised credit limit
83a1a7ce600b21611753b2265b6469651a722013	mac802154 use rather than printkkern_err this change is inspired by checkpatch
e6a9be0bb018466896632969ba4b496d1a7caea9	asoc use a lower detection rate when monitoring headphones on wm8915 we only need to increase the detection rate to maximum if were monitoring for button presses as the response times needed for user interaction there are much lower
458f212e36b291067b74c0cac2bdcf8278817ee7	kvm x86 fix memory leak in vmx_init free vmx_msr_bitmap_longmode_x2apic and vmx_msr_bitmap_longmode if kvm_init fails
c90aab9c96c2a7f7bf3f7a54167dc5c0ba2b178c	platform driver fix use-after-free in platform_device_del in platform_device_del the device is still used after a call to device_del at this point there is no guarantee that the device is still there and there could be a use-after-free access move the call to device_remove_properties before device_del to fix that
ea82aaec9879e4df307ccbbf26491a8e0a52e4f1	rxrpc use rather than going to the connection use rather than as may become null
bdb53bd797dcef46d1a252b9529f8fd511bf714c	cgroup factor out cgroup_apply_control_enable from cgroup_subtree_control_write factor out css enabling and showing into cgroup_apply_control_enable nest subsystem walk inside child walk the child walk will later be converted to subtree walk which is a bit more expensive instead of operating on the differential masks simply enable or show csses according to the current cgroup_control and cgroup_ss_mask this leads to the same result and is simpler and more robust
a665fce3e7fe1c7d1a77e99293257f2d008b1488	arm orion5x use dt to describe ehci on edmini_v2 this commit converts the already partially dt-converted edmini_v2 platform to use the device tree for usb link
5b01bd11b78b71ea1f5fc93e6e45ce6d71f5de1b	regulator palmas fix typo in enable_reg calculation when setting up for an smps regulator presumably we should call palmas_base_to_regpalmas_smps_base rather than using ldo_base this change makes the lcd panel and hdmi work again on the nvidia dalmore board anyway
0f888f5acd0cd806d4fd9f4067276b3855a13309	kvm increase user memory slots on x86 to __number__ with the __number__ private slots this gives us a nice round __number__ slots total the primary motivation for this is to support more assigned devices each assigned device can theoretically use up to __number__ slots __number__ mmio bars __number__ rom bar __number__ spare for a split msi-x table mapping though its far more typical for a device to use slots if we assume a typical vm uses a dozen slots for non-assigned devices purposes we should always be able to support __number__ worst case assigned devices or __number__ to __number__ typical devices
b290411a1321dd937dce4aaa812e5d8fae8a14a5	kvm s390 fix return value of kvm_arch_init_vm this patch fixes the return value of kvm_arch_init_vm in case a memory allocation goes wrong
afa63252b2ab85614929405971105c3b20d675ba	fix sizing of dpa and thp express capabilities when sizing the tph capability we store the register containing the table size into the dword variable but then use the uninitialized byte variable to analyze the size the table size is also actually reported as an n-1 value so correct sizing to account for this the round_up for both tph and dpa is unnecessary remove it detected by coverity cid __number__ __number__
400e65d1c9946c9bf4d87a94d71f7d7423d03b62	omapdss dsi remove dsi_pdev_map global struct dsi_pdev_map is a struct visible globally in the dsi driver to get the platform device pointer of the dsi device corresponding to its module id this was required because there was no clean way to derive the platform device from the dsi module instance number or from the connected panel with the new output entity it is possible to retrieve the platform device pointer if the omap_dss_output pointer is available modify the functions dsi_get_dsidev_from_dssdev dsi_get_dsidev_from_id so that they use output instead of dsi_pdev_map to retrieve the dsi platform device pointer
7758a3a9e206fc80726e83dc1124b19f24a3159c	staging rtl8187se deleted rtl8225z2_rf_set_mode function after the next warning messages by sparse tools warning symbol rtl8225z2_rf_set_mode was not declared should it be warning defined but not used static void rtl8225z2_rf_set_modestruct net_device and the next search staging-next git grep rtl8225z2_rf_set_mode rtl8225z2_rf_set_modestruct net_device i decided to delete rtl8225z2_rf_set_mode function
beb3d3a4d4830b1e090eedef0d0d7870639f09e0	qlcnic fix link speed display for adapter o do not obtain link speed from register when adapter link is down
27254ec26c6395ca0cfabde8e67b352a4ad7a3bf	staging sm750fb spacing fix remove unnecessary space in to fix the following error space prohibited after that
47a66eed99e6f231f4a1d261a9d493f4eee94829	kvm x86 fix nmi injection failure when vcpu got blocked when spin_lock_irqsave deadlock occurs inside the guest vcpu threads other than the lock-holding one would enter into s state because of pvspinlock then inject nmi via libvirt api inject-nmi the nmi could not be injected into vm the reason is __number__ it sets nmi_queued to __number__ when calling ioctl kvm_nmi in qemu and sets to true in do_inject_external_nmi meanwhile __number__ it sets nmi_queued to __number__ in process_nmi before entering guest because is true its not enough just to check nmi_queued to decide whether to stay in vcpu_block or not nmi should be injected immediately at any situation add checking nmi_pending and testing kvm_req_nmi replaces nmi_queued in vm_vcpu_has_events do the same change for smis
3e29bcf4b148b8983dcb30faec0b59f681eabe9e	greybus core add module uevent var for all control devices the new ctrl device under interface is missing a module uevent var add it testing done cat uevent from ctrl device cat
6d729a55cc0fc9f9a003b61491ee5868c9df5baf	usb dwc3 host extract dwc3_host_get_irq cleanup only no functional changes
6d53200b51a57f50bc5a98b36bfcdb47483ad61a	mmc dw_mmc rockchip add support mmc_cap_runtime_resume capability to support hs200 and uhs mode mmc core will call init_card to execute tuning sdio init_card can be executed at runtime resume sd and mmc init_card can be executed at resume or runtime resume which depends on mmc_cap_runtime_resume capability on rk3288 soc host will get drto interrupt when host send command to read tuning data this will spend more than drto_ms drto_clks __number__ bus_hz and the total tuning time will be more than so we should add mmc_cap_runtime_resume capability to execute tuning at runtime resume only if we do so can we pass resume test
862421da0d82a3c35aa89e040a533f76d24c62c4	usb phy omap-usb3 convert to devm_ioremap_resource use the newly introduced devm_ioremap_resource instead of devm_request_and_ioremap which provides more consistent error handling devm_ioremap_resource provides its own error messages so all explicit error messages can be removed from the failure code paths
d15fa86276e8515443251c0d18930e392bc5afc5	cpufreq dt add support for mode with opp-v2 dt bindings few opps can be used only for the boost mode but using such opps require the boost mode to be supported by cpufreq driver we will parse dt bindings only during and so can enable boost support only after registering cpufreq driver this enables boost support as soon as any policy has opps for its cpus we dont need to disable boost support as that is done by the core when the driver is unregistered
d631ea9809785da06a048cfb25c2714f18a9cd63	unify code for fldp cache invalidation this patch simplifies the code for handling of flpdcache invalidation
55dc5a9f2f2afd32d7b1bda44a5fc95e67a3371f	net add skb_inner_transport_offset function same thing as skb_transport_offset but returns the offset of the inner transport header when is set
b99258a3151a70da9b4125f940c4dcc091df84c1	asoc rsnd setup when starting current rsnd driver setups when timing but it breaks sound after these should be setups every start timing this patch is tested on r-car gen3 salvator-x board
66be71ff477389ff12c9c43dc6ee176cf8e1dd3a	acpica add fadt error message for gas bitwidth overflow error for possible overflow during conversion from legacy register addresses to gas format the gas struct contains a one-byte bitwidth field meaning that the maximum length of a register is __number__ bits acpica bz __number__
04ded1672402577cd3f390c764f3046cc704a42a	verify private data length private_data_len is defined as a u8 if the user specifies a large private_data size __number__ bytes we will calculate a total length that exceeds __number__ resulting in private_data_len wrapping back to __number__ this can lead to overwriting random kernel memory avoid this by verifying that the resulting size fits into a u8 addresses
dec8f1756342c92fc31ba8bc7060b55dd62836a0	btrfs make return void its return value is completely ignored by its single caller and its useless anyway since errors are indicated through setpageerror and the bit as_eio set in the flags of the inodes mapping the caller cant do anything with the value as its invoked from a workqueue task and not by the task calling filemap_fdatawrite_range which calls the writepages address space callback which in turn calls the inodes fill_delalloc callback
5bde2c9be701c4583f0a9243bd46590ec401bfba	sparc implement and wire up vio_hotplug for vio
2be2a3ff42a52e926cbd1cc1d376a161a9a73667	arm exynos register power domain driver from core_initcall sysmmu devices are registered very early in arch_initcall so ensure that they can get access to power domains by registering power domain driver from earlier initcall this change requires dropping usage of the platform device associated with each power domain and replacing clock calls with respective equivalents
dec58f1dfd30a3c3e9dadc808692f4e5cd922745	xfs work around bogus gcc warning in xfs_allocbt_init_cursor gcc __float__ complains about an array subscript is above array bounds when using the btree index to index into the agf_levels array the only two indices passed in are __number__ and __number__ and we have an assert insuring that replace the trick of using the array index directly with using constants in the already existing branch for assigning the xfs_btree_lastrec_update flag
2dc546d00c8deb22aac50c8cc0c6293aab975c6b	media coda fix coda_s_fmt_vid_out set the context color space when s_fmt succeeded not when it failed
6c3a30c7fbed820f65d5e708f1e83468d8ec9921	serial omap dont save irq flags on hardirq when were running our hardirq handler theres not need to disable irqs with spin_lock_irqsave because irqs are already disabled it also makes no difference if we save or not irq flags switch over to simple and drop the flags variable
b33d3b7321bb5ae291851fce31688d2d3c432e6b	i40e clean up msix irqs before suspend the i40e_suspend function calls another function that preps the device for the power save and resume by freeing all the resources and interrupts but that function does not free the other causes interrupt vector and irq it also fails to call synchronize_irq before freeing the irq vectors this sometimes may result in some aer errors on those systems with that pcie error reporting feature enabled call synchronize_irq before freeing irq vectors and explicitly free the other causes interrupt resources and shut down that msix interrupt change-id ib88e4536756518a352446da0232189716618ad81
c4b7586cc972ec8cca77d2f6faed1f19a11d6445	asoc spitz automatically disconnect non-connected pins all dapm input and output pins of the wm8750 are either used in the cards dapm routing table or are marked as not connected set the fully_routed flag of the card instead of manually marking the unused inputs and outputs as not connected this makes the code a bit shorter and cleaner
79d0d27d8801ef48f209f7ee62bc432d6fe06cc6	dw-hdmi delete unnecessary assignment for the field owner the field owner is set by the core thus delete an unneeded initialisation generated by link
c0b52c143ee46c5922b5aa5c48c00145b5296441	removed kmalloc returned value cast
0b46cfdd0320534b0064529c242c4ba324b21dc1	staging rtl8723au constructbeacon use struct ieee80211_mgmt to build beacon this gets rid of a bunch of hard coded offsets and reduces the dependency of the ugly functions
ae7d27c086b5eba849ff868065bbba04c0da60b1	staging slicoss remove last reference to compare_ether_addr and use the normal functions and eth_alen too
c8801a8e715d7793e1e7bcd2f6fe132234741753	regulator core mark all get and enable calls as __must_check its generally important that devices have power when they expect it so drivers really ought to be checking for errors on the power up paths
fbbf53f70225c82ba877de780486be5bc81b29e2	rtc pcf8523 refuse to write dates later than __number__ when the chip increments the year register and it already holds bin2bcd99 it reads as __number__ afterwards with this behaviour the last valid day without trickery that has a representation is so refuse to write later dates
67dd483026c64444d7fd8eab83334621b3c47b76	nfsv4 mark the lock and open stateids as invalid after freeing them
cee4ad1ed90a0959fc29f9d30a2526e5e9522cfa	tty prevent unnecessary work queue lock checking on flip buffer copy when low_latency flag is set the tty receive flip buffer is copied to the line discipline directly instead of using a work queue in the background therefor only in case a workqueue is actually used for copying data to the line discipline well have to flush the workqueue this prevents unnecessary spin on the workqueue spin lock that can cause additional scheduling overhead on a preempt_rt system on a __number__ mhz at91sam9261 processor setup this fixes about of scheduling overhead on the tty read call
a08ef4768f479a712f80426fba42d16253feb37c	tipc uninitialized return code in tipc_setsockopt we shuffled some code around and added some new case statements here and now res isnt initialized on all paths
ca3bf5d47cec8b7614bcb2e9132c40081d6d81db	introduces ivrs_acpihid kernel parameter this patch introduces a new kernel parameter ivrs_acpihid this is used to override existing acpi-hid ivhd device entry or add an entry in case it is missing in the ivhd
cd3109d23c32452c85d73cc1a01282846a23582c	mlx4_en nullify field when closing completion queue caused loss of connectivity when changing ring size
524feca5e9da9e5f9e5aa5d5613b1d762db9509e	perf optimize perf_output_begin address calculation rewrite the handle address calculation code to be clearer saves __number__ bytes on x86_64-defconfig link
615e087fbd7483fafa28c8a1a4d1656251e0604d	drbd add missing rcu locks around recently introduced idr_for_each recent commit drbd move write_ordering from mdev to tconn introduced a new idr_for_each loop over all volumes but did not take necessary rcu locks or krefs
4b58c9b19bddb47a1961608bc62d0c2f3dc9705e	ceph do not set r_old_dentry_dir on link this is racy--we do not know whather d_parent has changed out from underneath us because i_mutex is not held on the source inodes directory also taking this reference is useless
1650602691f4e8ea8f6e306452a72ac9a611932a	fujitsu-laptop make platform-related variables match naming convention replace fujitsupf with fujitsu_pf in all platform-related variable names to match the module-wide naming convention kempniu rebase patch rewrite commit message
b37392ea86761e97d46b567667ff158e8bb67b72	btrfs cleanup unnecessary parameter and variant of prepare_pages the caller has gotten the inode object neednt pass the file object and if so we neednt define a inode pointer variant the position should be aligned by the page size not sector size so we also neednt pass the root object into prepare_pages
b5a2ecd857a224c4fbeeaa4f60f09bea3fc1837e	gpu-drm replace a kzalloc call by kcalloc in drm_legacy_addbufs_sg the script can point information out like the following warning prefer kcalloc over kzalloc with multiply thus fix the affected source code place link
b4363fbd8df2be23439e15a53b4040897228c481	ixgbevf add the device ids presented while running on hyper-v intel sr-iov cards present different id when running on hyper-v add the device ids presented while running on hyper-v
cfc57557f204c09c2c028be6e18923e9475c311d	pnpacpi fix acpi_bus_get_device check in acpi_bus_get_device returns int not acpi_status the patch change not to apply acpi_failure to the return value of acpi_bus_get_device
45f176aea60e9fe8c5fdf8e5c90e5c50c264d86f	i2c i2c-dev create name attribute automatically the name attribute is needed for all i2c-dev class devices meaning it can be created automatically by pointing to it in the class data structure this simplifies the code and reduces the probability for race conditions the name attribute should exist by the time the device is announced to user space
37d203055e3516e891fb23a40d61a54b65a60d81	asoc wm8994 replace usage deprecated macros snd_soc_dapm_virt_mux snd_soc_dapm_virt_mux_e and soc_dapm_enum_virt are deprecated and merely an alias for snd_soc_dapm_mux snd_soc_dapm_mux_e and soc_dapm_enum replace the deprecated macros so we can eventually remove their definition
086acff2cf8a6a41f533e5da5f51923db5f68df4	scsi scsi_dh_alua fix memory leak in alua_rtpg buff should be freed before returning with scsi_dh_retry in alua_rtpg
9b4b92645c5edf16b9e77c5956e13b040ba5ed0f	media atmel-isi fix debug message which only show the first format correct the debug output message to show correct format
15f504f0c2038b9a0f1569c9ce34def61f0c65be	arm samsung add names to fimd0 irq resources since commit change the method for getting the interrupt the exynos drm fimd driver requires irq resources to be named this patch fixes probe failure in non-dt cases by adding appropriate resource names to fimd0 platform device
fd1a5059610cd3887f1050171a840ca864108730	alsa usb-audio more tolerant packetsize since commit alsa usb-audio do not trust too-big wmaxpacketsize values the expected packetsize is always limited to nominal it was discovered that some devices android audio accessory have a much higher jitter in used packetsizes than which would result in babble condition and dropping of packets a better solution is so assume the jitter to be the nominal packetsize nearly empty packet followed by a almost sized one v2 changed to assume max frequency is of nominal packetsize
da0a908ed96b3eda788d6dc87b3e0b1610c40ec8	pch_dma remove useless use of lock accordingly to dma_cookie_status description locking is not required
0b10a1c87a2b0fb459baaefba9cb163dbb8d3344	kvm ioapic merge ioapic_deliver into ioapic_service commonize the handling of masking which was absent for kvm_ioapic_set_irq setting remote_irr does not need a separate function either and merging the two functions avoids confusion
d3556babd7facb8fbc596bada0d67139e3b22330	ocfs2 fix d_splice_alias return code checking d_splice_alias can return a valid dentry null or an err_ptr currently the code checks not for err_ptr and will cuase an oops in ocfs2_dentry_attach_lock fix this by using is_err_or_null
d79a44115196980beb786ab6d2effe09913cf243	staging lustre removal of space between function name and parenthesis in the patch fixes the following warning in warning space prohibited between function name and open parenthesis
647ad135e3cbad19a7a963922750a4a5cd2e9e8f	iwlwifi added debugfs calib disabled write added the option to disable calibration via debugfs
35822c04a5c232a7899d43a74f0d2fca5077b196	greybus connection handle bundle-less connections in svc helpers the svc connection helper functions should not assume that all dynamic connections will have a bundle this is needed as the control bundle is going away
600d525869c45a6b3ce1fa5e58281376c5a2dab2	dma pl330 remove unnecessary amba_set_drvdata driver core clears the driver data to null after device_release or on probe failure so just remove it from here driver core change device-core ensure drvdata null when no driver is bound sha1
a62fdebde5869d15536309b4a5bb9b1d5fd229c5	staging comedi hwdrv_apci1500 miscellaneous cleanup this patch completes two final matters of cleanup which are each too small for their own patch it corrects a couple of indentation issues and removes a return statement at the end of a void function
cd1c9c1a4b06d3bc264e774ad84c410ce02e124e	re-enable selective gpuvm flushing now that the pfp and me synchronization is fixed we can enable this again reliably
370f83a156e42d6c6997c65dbceb4bb7118e915a	asoc ak4642 add alc controls alc and alc zero crossing detection has been enabled unconditionally add controls for this
a2c7c6fbe5ab48f6e4ed22f4649c76d1efbfe643	selinux add security in-core xattr support for tracefs since kernel __float__ ftrace is supported as a new separate filesystem it gets automatically mounted by the kernel under the old path because it lives now on a separate filesystem selinux needs to be updated to also support setting selinux labels on tracefs inodes this is required for compatibility in android when moving to linux __float__ or newer
d55d31a6b8f65bb13e1912043a66295cc928967c	mtd pxa3xx_nand the nand clock in paths the nand clock can be disabled on suspend and enabled on resume
101b92d9590a645d6fb643654b3a92556203b745	cifs cleanups for cifs_mkdir_qinfo rename inode pointers for better clarity move the d_instantiate call to the end of the function to prevent other tasks from seeing it before weve finished constructing it since we should have exclusive access to the inode at this point remove the spinlock around i_nlink update
200e932649dc11e4d69545a6b513d012a6492d0d	wlcore sdio use platform_device_unregister in wl1271_remove platform_device_unregister only calls platform_device_del and platform_device_put thus use platform_device_unregister to simplify the code also the documents in shows that platform_device_del and platform_device_put must _only_ be externally called in error cases all other usage is a bug dpatch engine is used to auto generate this patch
7f503fc49f144bb509dbd33daf3426df3f176e6b	rt2x00 fix possible memory corruption in case of invalid sometimes rxdesc descriptor provided by hardware contains invalid random data for example can be bigger than actual size of the buffer when this happen rt2x00crypto_rx_insert_iv corrupt memory doing memmove outside of buffer boundaries
30c4cf3b53b4a09ca24603dd3c3119433e8ac9d5	fix size_t build warnings fix warnings related to size_t when building for architectures in function warning format expects argument of type but argument __number__ has type size in function warning format expects argument of type but argument __number__ has type off
28984c7d94c27b993d09d4f2a1a2c36bfd26fd23	fix kernel warning during wakeup enable_irq_wake might fail if so we will see kernel warning in resume entries due to it always calls disable_irq_wake warning at unbalanced irq __number__ wake disable modules linked in ipv6 libcomposite configfs cpu __number__ pid __number__ comm ash tainted g w from from from from from from from from from from from from from from from from from to avoid unbalanced irq wake disable ensure that disable_irq_wake is called only when enable_irq_wake have been successfully enabled
b2e4f1560f7388f8157dd2c828211abbfad0e806	mips cavium-octeon fix early boot hang on ebh5600 board the boot hangs early on ebh5600 board when octeon_fdt_pip_iface is trying enumerate a non-existant interface the actual hang happens in cvmx_helper_interface_get_mode cvmx_read_csrcvmx_gmxx_inf_modeinterface when interface __number__ we can avoid this situation by first checking that the interface exists in the dtb patchwork
8eee0f81cdaafb2fc78dcd5087a15c7f428d7751	arm mvebu fix the name of the parameter used in mvebu_get_soc_id the name of the two parameters of mvebu_get_soc_id were inverted this patch fix it in order to have a more readable code link
66cf402bd911d3874f986156d0bee8b943b71e7c	omap iovmm iovmm is erroneously using sg_dma_len with unmapped dma api-wise sg entries and will break if config_need_sg_dma_length is enabled fix that by using instead
72e5512ade915862035679ca51c4645c7fb5f1ca	omapdss dpi fix wrong pixel clock limit dpi is supposed to skip odd dividers in the clock path when the pixel clock is higher than the code however defines the pixel clock limit as this causes the driver to skip valid clock dividers possibly making the pixel clock to be further away from the requested one than necessary fix the clock limit to
13c240ef95e6569956ba9c731a650cecb3603f0e	fix trivial typo in warning message
73d4511a5f1e208399b2f7a058b73578c1977611	acpi strict_strtoul and printk cleanup in acpi_pad replace a few calls to strict_strtoul in with kstrtoul and use pr_warn instead of printk in the same file rjw modified the subject and changelog
ed692a99f31c92ec649ee2f7a0ecb4aa0f69d853	usb dwc3 exynos add provision for axi upscaler clock on exynos7 dwc3 controller on exynos7 soc has separate control for axi upscaler which connects dwc3 drd controller to axi bus get the gate clock for the same to control it across power cycles
43457c60c8314835412848a9df25d4ba2f49f0ed	ubifs use __aligned attribute instead of __attribute__aligned
56346ad88d65fd60dde7b0535ff08daac45b560b	adjust spacing of existing sprs to make room for more purely to make it pleasing to the eye
06b35d0072d2a126d8cd134b253e5ec65beb9e66	double free on error the call to del_evtchn frees evtchn
f597f6b8dfaa033be3b3b755e6c0ab3caee96dcd	drbd fix future possible null pointer dereference right now every resource has exactly one connection but we are preparing for dynamic connections in the future thre can be resources without connections however smatch points this out as variable dereferenced before check which is correct this issue was introduced in drbd get_one_status iterate over instead of
195281d0dc6a2fc1824d5da9abd2924bce0fa698	media em28xx set the timestamp type for video and vbi vb2_queues the em28xx driver obtains the timestamps using function v4l2_get_timestamp which produces a montonic timestamp fixes the warnings appearing in the system log since commit media vb2 add support for non monotonic timestamps
4ebcc243901c48ee3baba6bdf179c7315fa8806f	use symbolic apic_eoi_ack use the symbol instead of hard-coded numbers now that the reason for the value is documented where the constant is defined we dont need to duplicate this explanation in code link
ccd0a0bd16ff01bb27bacbeb2e0e4983dc299502	fuse call fuse_abort_conn in dev release fuse_abort_conn does all the work done by fuse_dev_release and more more consists of end_io_requestsfc sigio poll_in all of which should be no-op warn_ons added
a0d32bca511fd6b570e964ca38a0c3dcd9eacafb	asoc rcar fixup dma_async_issue_pending timing dmaengine will stall without this patch
1a9c5efa576eccadd2836a1e53dcea21f999c180	watchdog imx2_wdt disable watchdog timer during low power mode we should set watchdog timer to be disabled in low power mode as there is no service running in background otherwise system will reset unexpected
279119776d98305af08466c6cc9b7869c57c706f	dont do full cleanup if mgag200_device_init fails running mgag200_driver_unload when the driver init fails early on causes functions like drm_mode_config_cleanup to be called the problem is drm_mode_config_cleanup crashes because the corresponding init hasnt happend yet there really isnt anything to cleanup after mgag200_device_init so we can just pass the error code upwards
d87aef9164a57527f2ac36c226a4e60b20695656	regulator da9063 fix up irq leak current code does not set and so it actually calls free_irq0 regulators twice in remove but does not free the irq actually used convert to use devm_request_threaded_irq instead and then we dont need to take care the clean up irq so remove irq_ldo_lim and irq_uvov from struct da9063_regulators note is not used at all in current code there is a slightly change in this patch it will return error in probe if devm_request_threaded_irq fails if the irq is optional it should be fine to allow platform_get_irq_byname fails but current code does not allow platform_get_irq_byname fails so i think the reason to allow request irq failure is just because the irq leak
fd984d242afbe13bd94c60b6754feda93be69bd7	xhci dont print short isoc packets now that the xhci driver always return a status value of zero for isochronous urbs when the last td of an isochronous urb is short the local variable status stays set to when xhci driver debugging is turned on this causes the log file to fill with messages like this __float__ xhci_hcd __number__ giveback urb __address__ len __number__ expected __number__ status dont print out the status of an urb for isochronous urbs
9847371a84b0be330f4bc4aaa98904101ee8573d	netfilter allow xt_owner in any user namespace making this work is a little tricky as it really isnt kosher to change the xt_owner_match_info in a check function without changing xt_owner_match_info we need to know the user namespace the uids and gids are specified in in the common case current_user_ns verify current_user_ns in owner_check so we can later assume it in owner_mt in owner_check also verify that all of the uids and gids specified are in and that the expected relationship exists between the uids and gids in xt_owner_match_info in owner_mt get the network namespace from the outgoing socket as this must be the same network namespace as the netfilter rules and use that network namespace to find the user namespace the uids and gids in xt_match_owner_info are encoded in then convert from their encoded from into the kernel internal format for uids and gids and perform the owner match similar to ping_group_range this code does not try to detect noncontiguous ranges
d88da09a538d3a4b56fd1cc080983ae69cc2cee2	megaraid_sas enhanced few prints
f53345e8cf027d03187b9417f1f8883c516e1a5b	thermal core move cleanup to thermal_release the device_unregister call in thermal_zone_device_unregister causes the thermal_zone_device structure to be freed before the call to free the dynamically allocated attribute groups this leads to a kernel panic furthermore the __number__ calls to free the trip point attribute structures occur before the call to unregister the device leading to a kernel panic when sysfs attempts to access the attributes to remove them here is an example of a kernel panic when the cpu thermal zones are removed upon cpu offline bug unable to handle kernel null pointer dereference at null ip call trace x86_pkg_temp_thermal x86_pkg_temp_thermal this patch moves the kfree calls to clean up the dynamic attributes to the thermal_classs thermal_zone_device release function
b151d9a231f18e329a5d0619c1c11117295ce031	media as3645a move relevant code under there is no needs to keep under this driver is for a standalone chip that could be on any board and connected to any i2c bus at the same time we dont need to keep the as3645a_probe after initializing the device therefore we mark it and relevant functions with __devinit tag
538b75341835e3c2041ff066408de10d24fdc830	blk-mq request deadline must be visible before marking rq as started when we start the request we set the deadline and flip the bits marking the request as started and non-complete however its important that the deadline store is ordered before flipping the bits otherwise we could have a small window where the request is marked started but with an invalid deadline this can confuse the timeout handling
6382a0614144901af1cbbfdf9b9a618f5dfb8548	mfd twl-core move inuse check early at probe time we can fail earlier in case multiple instance of the twl-core is tried to be loaded the twl-core by design only supports one instance
5884974eda0f7fa59d8a1a8e06169f0a2dba6bf3	mtd bf5xx_nand use module_platform_driver module_platform_driver macro removes some boilerplate and makes the code simpler
29916df08db4726c92bdfe72ce524b4b6a9e3c54	xfs fix shadow warning in xfs_da3_root_split use icnodehdr for struct xfs_da3_icnode_hdr instead of nodehdr already declared above
030ba6cd105c68ce919c5e239853b567490cd059	use new topology_max_smt_threads in ht leak workaround now that we have topology_max_smt_threads use it to detect the ht workarounds for older cpus link
9f668f6661698d320df552fccc7a3dab0de89d13	x86 pci amd-bus fix cpu hotplug callback registration subsystems that want to register cpu hotplug callbacks as well as perform initialization for the cpus that are already online often do it as shown below get_online_cpus for_each_online_cpucpu init_cpucpu put_online_cpus this is wrong since it is prone to abba deadlocks involving the cpu_add_remove_lock and the when running concurrently with cpu hotplug operations instead the correct and race-free way of performing the callback registration is cpu_notifier_register_begin for_each_online_cpucpu init_cpucpu note the use of the double underscored version of the api cpu_notifier_register_done fix the amd-bus code in x86 by using this latter form of callback registration
2c21d6c98813829fad79b17460fd289109a77099	use module_pci_driver to register driver removing some boilerplate by using module_pci_driver instead of calling register and unregister in the otherwise empty functions
82327aaf2e9fada01c972b296cbfc46a2ca9d85c	staging comedi ni_660x remove ni660x_config_filter this simple function is only called by ni_660x_dio_insn_config
2e48c4668da6fe8a3f1af67f8cd7d9b927698e62	max3421-hcd use fix using the bare number to set the whubcharacteristics field of the hub descriptor while the values are in
0dfb35bd39d16ca2b69d5ddaa76a143c814eca45	input goodix fix alignment issues fix alignment to match open parenthesis detected by running
f3ed0a17f0292300b3caca32d823ecd32554a667	thermal x86 package temp thermal crash on systems with no package msr support this caused crash as there is a bug in the logic to check presence of dtherm and pts feature together added a change so that when there is no pts support module doesnt get loaded even if some cpu comes online with the pts feature disabled and other cpus has this support this patch will still prevent such msr accesses
0ca30b1b6aaab682ce762809f93bb78d6650de89	fix error return code convert a nonnegative error return code to a negative one as returned elsewhere in the function a simplified version of the semantic match that finds this problem is as follows return ret __number__ when ret e1 when when ret e2 when forall return ret
64e2bc41304726a5ca8a4d37754db69b88841ebf	clk mxs imx28 decrease the frequency of ref_io1 for ssp2 and ssp3 ssp0 and ssp1 use ref_io0 which has decreased frequency expand the frequency fix for ref_io1 to get ssp2 and ssp3 to work
03f00ac788cfbedef98e03b2c7af59125e4d5f0d	staging wilc1000 remove block scope braces and fix indentation this patch removes unnecessary block scope braces and fix indentation of the codes
a74f83754dbbca725b6f6a38690f81e7bb635e16	only dump possible panel fitter config for the platform
b01a4f1ce2cde9acd97ce5c06e35bc9c1eacded7	mmc omap convert to per instance workqueue currently a global mmc_omap_wq is created for all instances of omap hosts which can lead to races and doesnt lend itself to unload the module cleanly instead create per instance workqueue and remove the common workqueue
3d9e35a92e935e1f968e79f0e0b72ce4b9f14c3e	clarify as of commit drm add drm_fb_helper_restore_fbdev_mode_unlocked drm_fb_helper_restore_fbdev_mode is no longer public and drivers should call drm_fb_helper_restore_fbdev_mode_unlocked from their callbacks instead update the documentation to reflect this and absorb the one liner drm_fb_helper_restore_fbdev_mode into its single caller
cda43576afa641d83ae268cb9795ae2a549d53d9	dev_set_drvdata can no longer fail dont check if dev_set_drvdata failed it cant and it returns void now
039ae102a8d43bbaa00e678b37f58310f4674650	scsi hisi_sas add device tree support for hip07 chipset hip07 incorporates v2 hw
3bacf4361cd07f988a13de78d672928606df24ad	fix fbdev emulation using legacy functions ive broken this by removing the backoff handling from the set_config2atomic helper in commit author daniel vetter ffwll.ch date wed mar __number__ __number__ remove the backoff hack from set_config fixing this properly would mean we get to wire the acquire_ctx all the way through vmwgfx fbdev code and doing the same was tricky for the shared fbdev layer probably much better to look into refactoring the entire code to use the helpers but since thats not a viable long-term solution fix the issue by open-coding a vmwgfx version of set_config that does the legacy backoff dance internally note just compile-tested the idea is to take drm_mode_set_config_internal remove the is this a legacy driver check and whack the drm_atomic_legacy_backoff trickery at the end since drm_atomic_legacy_backoff is for atomic commits only we need to open-code it link
41251e2469f081da0d7844c8c61400cf030b58ed	leds bcm6328 code cleaning remove double whitespace add missing brackets add spinlock info
e1c47e732cbb4211d15ae0c4465dc4ceefcaa398	media add which field for the enum structs while all other pad ops allow you to select whether to use the try or the active formats the enum ops didnt have that option and always used try however this will fail if a simple pci bridge driver wants to use the enum pad op of a subdev thats also used in a complex platform driver like the omap3 such a bridge driver generally wants to enum formats based on the active format so add a new which field to these structs note that v4l2_subdev_format_try is __number__ so the default remains try applications need to set reserved to __number__
f915f2c66e8bccf9f4f886f4a49888acd6b0b6b2	input keyspan_remote remove unnecessary break after goto
13e55e49472643b56986138da4aff115cabb111c	staging ft1000-pcmcia dont initialise static to __number__ this fixes the following error error do not initialise statics to __number__ or null
182e283f3e550d70ba5b7e6be66ea74726646166	crypto omap-sham shrink the internal buffer size the current internal buffer size is way too large for crypto core so shrink it to be smaller this makes the buffer to fit into the space reserved for the buffers also
bd93a3af82d5175a86badf7bc0e30d17cc6469ce	mtd nand omap2 return error code of on error the returns an appropriate error value when it fails use it instead of the fixed error code
4cfffcfa5106492f5785924ce2e9af49f075999b	fix local interrupts some local interrupts are not initialised properly at the moment and cannot be used since the domains alloc method is never called for them this has been observed earlier and partially fixed in commit e875bd66dfb fix local interrupts but that change still relied on the interrupt to be requested by an external driver eg this does however not solve the issue for interrupts that are not referenced by any driver through the device tree and results in request_irq calls returning it can be observed when attempting to use perf tool to access hardware performance counters fix this by explicitly calling irq_create_fwspec_mapping for local interrupts
c4a7ca774949960064dac11b326908f28407e8c3	sunrpc allow waiting on memory allocation we should be safe now as long as we dont do gfp_io or higher allocations
2f6a02604e962295569749913081365ec9ec1372	be2net fix vfs enumeration current vfs enumeration algorithm used in be_find_vfs does not take domain number into the match the match found in is more elegant and safe this version uses pci_physfn instead of checking directly
3dce1891f3e4c334046b32c355b9e5cef50c18d9	yurex dont wank with fasync on
832c6ef765a6943edeb30db25f33c0a56560c532	merge get_wptr functions in gfx6
9b4eaf43f4b0207b5d1ca8b8d22df88ea9e142fe	btrfs rename add_device_membership to btrfs_kobj_add_device
79febbc19b81b5242339bffb90e4dbea15015dde	net i40e shut up uninitialized variable warnings in function i40e_xmit_frame_ring error oiph may be used uninitialized in this function note oiph was declared here error oudph may be used uninitialized in this function note oudph was declared here
1584f40ff0b8f2d1b42a4353f3a27b0c1f8545a5	gpu ion remove __gfp_no_kswapd it no longer exists jstultz modified patch to apply to staging directory
29ade5db12930ec60133f6a02791f4b1a4af2943	pnfs wait on outstanding layoutreturns to complete in pnfs_roc
4693c9668fdcec229825b3763876b4744f9e6d5e	dm table propagate non rotational flag allow queue_flag_nonrot to propagate up the device stack if all underlying devices are non-rotational tools like ureadahead will schedule ios differently based on the rotational flag with this patch i see boot time go from __float__ s to __float__ s on my device
f352a0d5bafa62d1f0b044613ea42483a529f9df	snic lun goes offline due to scsi cmd timeouts lun goes offline if there are at least two scsi command timeouts completing the io with scsi_done fixes the issue
b003d45b37b2d2c682f279e6fd5a9254b8ddc244	remoteproc move rproc_delete_debug_dir to rproc_del the sysfs entries are added in rproc_add and deleted in rproc_type_release instead of in rproc_del that leaves these lingering entries sticking around after we return from rproc_del move the rproc_delete_debug_dir to rproc_del to fix this
c5b9b4e4b9076089fe7f9d4f5d1f2bba776646d2	stmmac fix advertising capabilties for non gmii iface this patch fixes the way to stop the advertising capabilties for non gmii interfaces
64acb6611f3c17251347870e73ddc106fed807cb	greybus interface remove useless spinlock remove useless global interface spinlock that appeared to protect the host-device interface list but really did not as we are doing lock-less look-ups by relying on the single-threaded svc workqueue document the locking assumptions
b7983e3f89dd960b2a6d156fd2200548c3300428	atm simplify by using module_pci_driver this simplifies the driver by using the module_pci_driver macro at the expense of losing only debugging messages
6ca605f7c70895a35737435f17ae9cc5e36f1466	fix freeing issues in fixes the following errors exynos_drm_open error double free of file_priv exynos_drm_open error dereferencing freed memory file_priv
a2fd2423240fe1abd7a154a1cc0fd1624c339bff	usb phy omap-otg replace deprecated api of extcon this patch removes the deprecated notifier api of extcon framwork and then use the new extcon api with the unique id to indicate the each external connector usb usb-host alter deprecated api as following extcon_register_interest extcon_register_notifier char id
5a793bcadbe97df7823598b429c0af052e50df1c	crypto omap-sham fix software fallback handling if we have processed any data with the hardware accelerator digcnt __number__ we must complete the entire hash by using it this is because the current hash value cant be imported to the software fallback algorithm otherwise we end up with wrong hash results
8c53ad2139137dd4bf506a2c2b888de3816e8f75	fix copy error in
1c85382e30618f66d4b15e608ff32253beb22649	sky2 fix cleanup sequence in probe function the cleanup sequence in sky2_probe that is called in case of an error is mixed up in different places pci_disable_device is not called in each case the device has been enabled before same for pci_disable_msi test_msi may return with an error eopnotsupp due to failure of request_irq in that case msi is not disabled also failure of register_netdev does not disable msi this patch fixes the concerning parts
fb527736ebcca0c8b67bc4754a3804e6048b6dff	usb serial iuu_phoenix simplify endpoint check simplify the endpoint sanity check by letting core verify that the required endpoints are present
1569a4c4cebaf358eff12633830baeaf6507fed0	acpi tpm detect ppi features by checking availability of _dsm functions detecting physical presence interface features by checking availbility of corresponding acpi _dsm functions it should be more accurate than checking tpm version number
e399b22881c721626812008e25d930ac4d2bafc4	lpfc mark functions as static in mark functions as static in because they are not used outside this file this eliminates the following warning in warning no previous prototype for warning no previous prototype for warning no previous prototype for
1b8e5df6d9b676f6d31fb098ffdc7d18732729d7	btrfs fix static checker warnings this patch fixes the following warnings sparse symbol get_raid_name was not declared should it be error format not a string literal and no format arguments get_raid_nameindex
d21af4cbfb7fccbccedc1d9e143a14aee6b1c9ad	staging comedi comedi_buf clarify comedi_buf_write_free use the helper comedi_buf_write_n_allocated to clarify the check to make sure the number of bytes to free is not more than the number of bytes allocated
5273a258373a84bbbcbccabb356de5b68e2b8931	acpi processor remove redundant null check before kfree kfree on a null pointer is a no-op so remove a redundant null pointer check in map_mat_entry rjw changelog
533ab2231d15e082f4ef547ee2fe99a8a25ab046	media v4l vsp1 fix vi6_disp_irq_sta_lne macro lne bit in vi6_disp_irq_sta register are from the __number__ bit to __number__ bit this fixes bit position specified by vi6_disp_irq_sta_lne
6ca7d910121af4dd8c83294b50546f4664b2a932	locks use more file_inode and fix a comment
4045513286462a3c12140fac0559f09bcb5e7f10	use the kstat_irqs_cpu wrapper
ec4252a66b1a2cd2fc6fbdbf3d3279640500fb75	acpica parser remove redundant opcode execution debugging output acpica commit c832b0a9263c560b3ae3ae31d7298ef33988f8d5 this patch removes one redundant debugging output of opcode execution which has already been covered by acpi_ex_start_trace_opcode lv zheng link
3748f193552ba21a8239c56eb616d946c47607e7	mfd wm5102 add tuning for revision b evaluation of revision b of wm5102 suggests updates to the register patch for optimal performance and make this the default behaviour for new devices
88bc0574ba6a7cb38f4b5ea2f0e5ed9fe4ab7e27	staging comedi comedi_fops rename user_cmd in do_cmd_ioctl this local variable is used to hold the comedi_cmd that is passed to the kernel as the argument to the comedi_cmd ioctl its filled in with a copy_from_user call the name user_cmd is a bit confusing since its actually kernel data rename the local variable to cmd to avoid the confusion
e08a8761d89b7625144c3fbf0ff9643159135c96	mlx5_core fix out arg size in access_register command the output size should be the sum of the core access reg output struct plus the size of the specific register data provided by the caller
e8b58b49130f40c29bb95cd5d9b36955ff703822	usb misc usb3503 adding device tree entry disabled-ports this patch is to add a property disabled-ports representing the unused port of usb3503 usb3503 can support up to __number__ usb host port and each ports can be controlled to be enabled or disabled do not describe this property if all ports must be enabled you can represent the ports to disable in the device tree disabled-ports
22762ccb0ef02a8fbdde09046d7095d46f3b7095	i2c rcar remove sign-compare flaw gcc rightfully says warning comparison between signed and unsigned integer expressions
e3c91683b5c6498df19e5fba51fdb61fef5f4227	mwifiex enable obss scan offload feature flag we dont perform obss scan internally as we intend to use corresponding feature in application we will enable this flag
fc3ebd788e894b4dd6c9524cb3874eeeb1e862d6	regmap move lock out from internal function _regmap_update_bits locks are moved to regmap_update_bits which allows to reenter internal function _regmap_update_bits from inside of regmap routines
f74861ca87264e594e0134e8ac14db06be77fe6f	raise dtr in non-blocking open need to be raised regardless of the open mode but not if the port has already shutdown
d0e91b13eb34d449922124c34f8a05e498daa089	vfs remove unnecessary flushing of block devices it is not necessary to write block devices twice the reason why we first did flush and then proper sync is that for_each_bdev write_bdev wait_for_completion is much slower than for_each_bdev write_bdev for_each_bdev wait_for_completion when there is bigger amount of data but as is seen in the above theres no real need to scan pages and submit them twice we just need to separate the submission and waiting part this patch does that
813c5b7958a288c4333ef1eb2fa4b486cdcdda9a	hv vmbus_free_channels remove the redundant free_channel free_channel has been invoked in vmbus_remove hv_process_channel_removal or vmbus_remove vmbus_close_internal hv_process_channel_removal we also change to use list_for_each_entry_safe because the entry is removed in hv_process_channel_removal this patch fixes a bug in the vmbus unload path thank dan carpenter for finding the issue
7b2fd4f23f72c13a78c0892d330dde305ef2fb80	mmc core add a debug message for set_block_count this patch is added just debug message almost features need to use the cmd23 but we didnt see the debug message for sbc if sbcs message can see should be help for debugging we can check whether use the cmd23 or not
351a7bffbd4a02dd8a46209a4c6582860a72601d	staging comedi rtd520 clear fifo when canceling async command clear the fifo as part of the analog input to help with cleaning up the async command
9e5c9fe4cbb89b9af1fcf317f7b39d993bb47a71	crypto testmgr add a flag allowing the self-tests to be disabled at runtime running self-tests for a short-lived kvm vm takes on my laptop this commit adds a flag which allows them to be disabled however if as well we ignore this flag as fips mode mandates that the self-tests are run
6af6b163b3191bd2802868f17d4843c58bc4046f	firmware read firmware size using i_size_read there is no need to read attr because inode structure contains size of the file use i_size_read instead
bd3f0ff98a849e04dc2c0236f32cc75b8c8630db	drm prefer kcalloc over kzalloc with multiply fixes a couple of checkpatch warnings regarding the use of kzalloc with a multiplication kcalloc is the preferred api
1e20a2a5107021144fd795bcb66a272fd80cb477	inline trivial cm callback functions inline those cm callback functions that are only two lines long
c5caf4825b22957e4ad70fd94316e91ce8cfb51c	e1000e log when swflag is cleared unexpectedly on devices since used in the ownership arbitration of shared resources the phy shared between the and clients can be cleared by any of those clients log a debug message when software attempts to clear it and it is already cleared unexpectedly and since the swflag is cleared by a hardware reset the driver does not need to do that but the mutex acquired when the bit is set must still be cleared
6a582bd52962b026e3b9b6796085d9eaf97b4f02	video s6e8ax0 use apis apis make the cleanup paths simpler
89bfae43c8999344c3025802a3652ac42f55278e	remove unneeded cast kmem_cache_alloc returns
6ed9b28504326f8cf542e6b68245b2f7ce009216	media v4l2 fix vidioc_create_bufs compatibility mode data copy-back similar to an earlier patch fixing reading user-space data for the vidioc_create_bufs ioctl in compatibility mode this patch fixes writing back of the possibly modified struct to the user however unlike the former bug this one is much less harmful because it only results in the kernel failing to write the field back to the user but in fact this is likely unneeded because the kernel will hardly want to change that field therefore this bug is more of a theoretical nature
1f743b07652f11100bee004e261b9931632beac1	net core use this_cpu_ptr per-cpu helper flush_tasklet is a struct not a pointer in percpu var so use this_cpu_ptr to get the member pointer
5e9ae2e5da0beb93f8557fc92a8f4fbc05ea448f	aio fix use-after-free in aio_migratepage dmitry vyukov managed to trigger a case where aio_migratepage can cause a use-after-free during teardown of the aio ring buffers mapping this turns out to be caused by access to the ioctxs ring_pages via the migratepage operation which was not being protected by any locks during ioctx freeing use the address_spaces private_lock to protect use and updates of the mappings private_data and make ioctx teardown unlink the ioctx from the address space
8d210d54c5250c52b69266f299e64fe8356f9453	net thunderx fix for hw tso not enabled for secondary qsets for secondary qsets hw_tso is not getting set as probe returns much earlier fixed it by moving silicon revision check
6906b0ec5cdef784102e7699807df140eeaba133	spi spi-pxa2xx remove unused macro is_dma_aligned became unused by the commit spi spi-pxa2xx remove legacy pxa dma bits
5b520bbb538da7f7122b1e5dc85f2b4c592d4781	ieee802154 default to aack in at86rf230 the current stack assumes that a radio will never deliver packets with a bad crc into the stack as required by the standard at86rf230 driven radios violates this assumption because of another incompatibility devices are required to send acks if requested by a sender but rf2xx will only send acks from a special receive mode that is currently not used by the driver enable this receive mode to fix both bugs frames with bad crcs will not be received at all and acks will be sent if so requested
bad66c3ebdcdb4043bdcfe24ddab4802d5fc4327	arm clk-imx6sl remove csi_lcdif_sels currently csi_lcdif_sels is a shared array for the providing the possible clock parents for csi and lcdif blocks this is not correct as csi and lcdif do not share the same clock parents introduce csi_sels for the csi and lcdif_axi_sels for the lcdif clocks in order to describe the parents correctly
3d78bd9ef746d6468b1dbb2518b1287092b997b5	acpi update container hotplug error messages updated container hotplug error messages with and removed an unnecessary check to the device arg in acpi_container_add
fbcd4836d20a33209843dcf84f83a33b97b74c9a	scsi qla4xxx assign values using correct datatype assign values using correct datatype in function qla4xxx_copy_to_fwddb_param
fc23c246d72d21385be115305d1cb85fcc34acad	btrfs use fs_info directly local variable fs_info contains use it
49e8e44bcf3832a7fbe383a6e715b85ee2c7b2e6	use dev_ printks in fixed below checkpatch warning warning prefer netdev_errnetdev then dev_errdev then to printkkern_err
23191c97c0f3a07eb45c6c9ecda4fced8fbb0719	staging lustre lov remove unnecessary parentheses fix warning about unnecessary parentheses
b71b49c209facf8fec3778142ae5e45bb6ca4afc	scsi megaraid_sas ldio_outstanding variable is not decremented in completion path ldio outstanding variable needs to be decremented in io completion path for imr dual queue depth
242a42eadfc17448a0d5b2ffc0cb191c8b51971a	fix oops in destructor with headless cards if init doesnt run then might not be initialized resulting in an oops
1c4c3a99435c8891469fe6fca5ccd5fbe16f295a	add registers for eld handling
999b6e932bf7238a0d1eb35d0b3d6eac673b8777	spi falcon use devm_spi_register_master use devm_spi_register_master to make cleanup paths simpler and remove unnecessary remove
655e465671914b9d8c69d827f54d628b558dd58f	media media ti-vpe vpe configure line mode separately current driver configures the line mode of the dei clients from the open function directly even if the newly created context is not yet scheduled it updates some of the vpdma registers this causes a problem in multi instance use case where just opening the m2m device second time causes the running job to stall this happens especially if the source buffers used are nv12 while all other configuration is being written to context specific shadow registers only line mode configuration is happening directly as there is no shadow register for line mode configuration its better to separate the config_mode setting and line_mode setting call the new set_line_modes functions only when actually loading the mmrs this makes sure that no non-running job will write to the registers directly
51c4ed95a857ded6017537fd53fa00db64908954	wl12xx remove some dead code in wl1271_plt_init ret has already been checked at this point and we dont need to check it again this was left around from a previous patch wl12xx support new radio structs and functions
cf1b5ea1c5cd26a003b01d4798266a4bdf0ffe64	regression ocfs2 do increment twice generic_file_direct_write already does that broken by ocfs2 do not fallback to buffer write if appending
80e6321abc859955331c78c93e442e72b942c5c1	mips ralink add missing clk_round_rate as we dont use the common clock api yet we need to add this stub to allow building drivers that use the api patchwork
6ad6b838e11d8d67950716e0715b1d71bdd0769e	pwm sti sync between calls st pwm ip has a common control for all the pwm channels on a pwm cell disables pwm output on the pwm hw only when disable is called for the last channel
7e872df9cd627614f74ec343e11bb98aeb2f59e2	staging wilc1000 rename duringip_time variable this patch renames duringip_time variable to during_ip_time to avoid camelcase
5e58deb917bfa8dad71cb2e2b9f9572746ff8e6a	uli526x fix regions leak in driver probe error path
d2dc13b5339c657e526c405888df69d99322a016	fix convert ticks to time subtraction overflow in some cases tmp_sec may be greater than ticks because in the process of calculation ticks and tmp_sec will be rounded
ca3273fb594ae4e953042c956eb40141ba46ad2c	alsa wss_lib fix by setting sndrv_pcm_info_resume wss_lib claims that it can restore the card state fully on resume but in fact it cant as dma is not restored so any running during suspend will fail to continue after resume remove sndrv_pcm_info_resume flag from pcm info field to fix the problem
9f70d08a4c4581eee802563b709f710ad492d966	i5100_edac fix a warning when compiled with __number__ bits in function warning format expects argument of type but argument __number__ has type unsigned
0b7dff4faed07f55be2a98dd0eafc02623174236	mac80211 cancel work instead of waiting for it to do nothing if the sdata work is pending while the interface is stopped we currently flush it if its not running this means waiting for it to run which could take a while if the workqueue is backlogged however the work exits right away if it starts to run while the interface is already stopping theres no point in waiting for that so use cancel_work_sync instead
9d61707b1f83324fc30918787cb6ef101997ecbd	clk tegra fix xusb_fs_src mux the parent-to-index mapping for xusb_fs_src is incorrect fix it by adding a mux table
2842e5b00e99b30404f9af1c1b367c8e467b5c6c	m68knommu enable timer on coldfire this patch enables the initial timer on coldfire systems without this the scheduler will not be triggered and the system hangs after all sequential code is executed it should also apply on later kernel versions
c740624989eb87fa7cbd1b5338cef01dd49f1f29	pnfs fix an unused variable warning in pnfs_roc_get_barrier
9b2c38239dcd21d9eed1a49a486d8779c915d277	media adv7604 set hpd gpio direction to output the hpd gpio is used as an output but its direction is never set fix it
61067a5e69f548f5cb7f575f8e147956b60b2876	update legacy primary state outside the commit hook v2 this should allow not running plane commit when the crtc is off while the atomic helpers update those is only updated during modesets and primary plane is updated after this function returns unfortunately non-atomic watermarks and fbc still depend on this state inside i915 so it has to be kept in sync changes since v1 add comment that the legacy state is updated for fbc
b1cb82566242fbb54d5c655e23995a8f7bd37ecf	sky2 reduce default tx ring size the default tx ring size for the sky2 driver is quite large and could cause excess buffer bloat for many users the minimum ring size possible and still allow handling the worst case packet on platforms is __number__ which gets rounded up to a power of __number__ but most packets only require a couple of ring elements
dd2351da7c438eb3d5f64a161cf3483648725dcd	drm drm_ioctl should zero-init extra data if an older userspace passes in a smaller arg than the current kernel ioctl arg struct then extra fields should be initialized to zero rather than passing random data to the drm driver
7cbfdf87f422211b9a1f2845acb2e39597b3ef7e	asoc intel skylake dont reset pass-through pipe in be prepare when pipe is pass-through be and fe modules are defined inside a pipe reset of pipe will be done in fe dai prepare so dont reset in the be prepare
5fba49e3a8c22a7bb71c3526ec32b373b3ef32b8	of move of_parse_phandle move of_parse_phandle after __of_parse_phandle_with_args since a future patch will call __of_parse_phandle_with_args from of_parse_phandle moving the function avoids adding a prototype doing the move separately highlights the code changes separately
1d0d6bd61d495d271b9774a15fbea93e4875474b	netfilter ipset use kmalloc in comment extension helper allocate memory with kmalloc rather than kzalloc the string is immediately initialized so it is unnecessary to zero out the allocated memory area ported from a patch proposed by sergey popovich
6c0686057fe18754060842b525112b46d4f72ba4	rtc rtc-au1xxx use devm_rtc_device_register devm_rtc_device_register is device managed and makes cleanup paths simpler
87c4e2c62e507625af7cab5f46a019ab17d95bb7	staging comedi cb_pcidda cleanup dadata define rename the define used for the data register so that is has namespace with this driver change the define so that it takes the channel as a parameter to calculate the correct register offset
e88ae01d2c43be3c3a6f340bfa7bab8b87127f57	pci print pf sr-iov resource that contains all vfn bar space when we size vf bar0 vf bar1 from the sr-iov capability of a pf we learn the alignment requirement and amount of space consumed by a single vf but when vfs are enabled of the numvfs consumes that amount of space so the total size of the pf resource is vf bar size numvfs add a printk of the total space consumed by the vfs corresponding to what we already do for normal non-iov bars no functional change new message only bhelgaas split out into its own patch
fa7d81bb3c269a2ee38b6e4d569d9eb8be1a78ad	reduce read_oncemaster to lockless_dereference we are only documenting that the read is outside of the lock and do not require strict ordering on the operation in this case the more relaxed lockless_dereference will suffice link
40bd62c6194bdee1bc6652b3b0aa28e34883f603	pm remove the set_pm_runtime_pm_ops macro therere now no users left of the set_pm_runtime_pm_ops macro since all have converted to use the set_runtime_pm_ops macro instead so lets remove it
868a6ca84ee7e547ae01a5e04e232e4a392c50b8	asoc pcm fix incorrect condition check for case sndrv_pcm_trigger_suspend the regular state before we execute sndrv_pcm_trigger_suspend should be sndrv_pcm_trigger_start not sndrv_pcm_trigger_stop thus fix it
b92f4380a1c7eb3ed19d6f68ad7b66c66d8102b4	memory tegra add a missing of_node_put call if of_find_device_by_node fails an of_node_put call is missing in the error handling path fix it by reordering the code while at it remove some empty lines in a more or less similar construction a few lines below
56d140f5f61d3547dcc194de9cd5193b957b8016	btrfs print bytenr instead of page pointer in check-int the page pointer information was useless the bytenr is what you want when you search for submitted write bios additionally a new bit in the print mask is added that allows to selectively enable the check-int submit_bio verbose mode before the global verbose mode had to be enabled leading to many million useless lines in the kernel log and a comment is added that explains that log_buf_shift needs to be set to a really high value
26db63e3cb7af431707cd0467c7bcfefad25aa39	drm remove old defines for vswing and pre-emph values this is the last patch in the series so remove old defines
49d9224c047f23089c49a6749609447abd09ee03	ceph fix ceph_monc_init memory leak failure clean up does not consider ceph_auth_init
21a63b56044706aa37637315dd27d9d465bbd5c4	arc change calling convention of do_page_fault switch the args address pt_regs to match with all the other c exception handlers this removes the awkwardness in ev_protv for page fault vs unaligned access
9feba53fb1f05806f85dffe404c4d3743c51a81a	staging emxx_udc drop owner assignment from platform_drivers a platform_driver does not need to set an owner it will be populated by the driver core
45c64b6ac4ef0f50ba754e997585c02b10c93c02	pci tegra request host bridge window resources with core function use devm_request_pci_bus_resources to request host bridge window resources instead of doing it by hand in the driver no functional change intended
6dc71205fc2e87ff68f5d60ffe632013587bc26c	staging comedi ni_6527 use mite_alloc allocate struct mite_device dynamically instead of searching for one on the mite_devices list constructed by the mite module
c5f1b1e5529ef46769615ac8f4e38d0830b5a9c0	staging comedi dmm32at introduce dmm32at_ai_set_chanspec introduce a helper function to set the analog input channel scan and range control registers use the new helper in the analog input and functions the extra sanity checks in the are not necessary the will always be valid and the validates the channel list in step __number__
49a8ee8ac3f20e4d8fe284012c082a793982d48f	video msm fix section mismatches in the change commit author gregory bean codeaurora.org date wed jul __number__ __number__ video msm fix section mismatch in fixes a section mismatch between the board file and the drivers probe function however it misses the additional mismatches between the probe function and some routines it calls fix these up as well
4a939087bd02ce38135a3924ad3099685abe4c5f	arm64 remove macros now that all users have been moved over to the common macros remove the redundant esr_el1 macros there should be no functional change as a result of this patch
7841b647b9c1b118ae4eed33a0af934818e60553	revert from w1 hold bus_mutex in netlink and search this reverts from commit d3a8a9dbb903c73a7ec2deae4c9b7d74b6834f4c of the three files changed and it turns out was locking bus_mutex but inside the loop and i missed it reverting to the previous version
c6909d6f6f1082b8bb4c1b0ef3460a005c9dcb4d	i2c slave print warning if slave flag not set address collisions will be rare but we should let the user know that slaves have their own address space nonetheless
59e267c07b887015d13ec65167b75b2441d04109	staging lustre osc remove unneeded null test before free kfree can cope with a null argument so drop null tests the semantic patch that makes this change is as follows expression ptr if ptr null kfreeptr
ff3416fb5b02cfae94591ef4395b0b4dc793f25e	can dev make can_change_state robust to be called with cf null in oom situations where no skb can be allocated can_change_state may be called with cf null as this function updates the state and error statistics its not an option to skip the call to can_change_state in oom situations this patch makes can_change_state robust so that it can be called with cf null
c0ca3d70e8d3cf81e2255a217f7ca402f5ed0862	ovl modify ovl_permission to do checks on two inodes right now ovl_permission calls __inode_permissionrealinode to do permission checks on real inode and no checks are done on overlay inode modify it to do checks both on overlay inode as well as underlying inode checks on overlay inode will be done with the creds of calling task while checks on underlying inode will be done with the creds of mounter
445c6a1eb97fc76f9d3082e777a0d187a5ccefd8	staging lustre reject invalid net configuration for lnet currently if there exists a route that goes over a remote net and then this net is added dynamically as a local net then traffic stops because the code in lnet_send determines that the destination nid can be reached from another local_ni but the src_nid is still stuck on the earlier ni because the src_nid is stored in the ptlrpc layer and is not updated when a local ni is configured intel-bug-id reviewed-on
2af05078d6d9e81fca69de96f582e16e1b141e43	convert wait_fori915_readreg to intel_wait_for_register by using the out-of-line intel_wait_for_register not only do we can efficiency from using the hybrid wait_for contained within but we avoid code bloat from the numerous inlined loops in total all patches text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__
5cede84c9897f9db522699c4b3ff6ffe3d11e038	udp use lowpan_push_hc_data function this patch uses the lowpan_push_hc_data to generate iphc header the current implementation has some wrong pointer arithmetic issues and works in a random case only
f14287b9671d462a54d3b6800832fb519284eb34	staging usbip usbipcommon fixed single line bracing issue fixed coding style issue with single line braces
7fd834ad77f79fe0e8e9840238f18bdc088c97b6	gpio remove useless check in gpiolib_sysfs_init an iterator variable cannot be null in its loop
15bb81d334e99081e105b76e6d0b46657b4f4f2e	mcb enable pci bus mastering by default in order to successfully perform dma operations on pci devices it is necessary to enble pci bus mastering so enable it by default
81f382f9e0b25ef56b1c0283c900b86b91a5e4c7	dm raid record and handle missing devices missing dm-raid devices should be recorded in the superblock when specifying the devices that compose a dm raid array it is possible to denote failed or missing devices with when this occurs we must record this in the superblock we do this by checking if the array positions data device is missing and then forcing md to record the superblock by setting md_change_devs in raid_resume if we do not cause the superblock to be rewritten by the resume function it is possible for a stale superblock to be written by an out-going in-active table during raid_dtr
7373f481dc4098a844a756201e98341bc56baaa2	asoc intel skylake free codec objects on removal on driver removal we should ask the core to remove the device objects as well so invoke snd_hdac_ext_bus_device_remove in remove
a340dae9de5df79d1d09ab7eae6cb8bbeb77b996	clk si570 migrate to clk_hw based of and registration apis now that we have clk_hw based provider apis to register clks we can get rid of struct clk pointers while registering clks in these drivers allowing us to move closer to a clear split of consumer and provider clk apis
712bfef60912d91033cb25739f7444d5b8d8c59f	fix version printout in case of health issue firmware representation of the firmware version on the health buffer has changed for newer device the representation in the initialization segment does not and will not change in addition we print the health buffer firmware version as a raw hex number
fea3860d7d69b0a82e0b96617258ffaf0ff250d4	staging greybus loopback_test fix device-name leak all the device names were being always leaked also illegal free was being called upon namelistn which was coincidentally null the pointer to dirent structures must be individually freed before freeing the pointer array coccinelle script expression forex1 __number__ ex1 ex2 arr ex2 ex1 reviewed by johan hovold kernel.org
d13829686bba3e06e2217f044beb8fd5a9abf792	staging wilc1000 fix infoleak in wilc_wfi_cfgoperations mac is an array allocated in stack without being initialized and will be sent out via nla_put the dump_station is supposed to initialize the mac address otherwise sensitive data in kernel stack will be leaked to fix this copy the mac address to it
2629718dd26f89e064dcdec6c8e5b9713502e1f8	fsnotify remove useless list deletion and comment after removing all the indirection it is clear that in fsnotify_destroy_marks is not needed as the mark gets removed from the list shortly afterwards in fsnotify_destroy_mark fsnotify_detach_mark fsnotify_detach_from_object also there is no problem with mark being visible on object list while we call fsnotify_destroy_mark as parallel destruction of marks from several places is properly handled as mentioned in the comment in fsnotify_destroy_marks so just remove the list removal and also the stale comment
1ce46ee597bc36fde6984e91aecc2d662a754199	rcu conditionally compile rcus eqs warnings this commit applies some warning-omission micro-optimizations to rcus various extended-quiescent-state functions which are on the hotpath for reported by mike galbraith gmail.com
a4f144ebbdf6f7807c477bce8e136047ed27321f	fix crash due to inconsistency unaccount_pmu_sb_event did not check for attributes in before calling detach_sb_event while account_pmu_event did this caused null pointer reference in cgroup events that did not have any of the attributes checked by account_pmu_event to trigger the bug just wait for a cgroup event to terminate mkdir perf stat cycles test sleep __number__ see crash link
c8987876e9bf9b7b83e75b325586bc77ea8ac825	mac80211 move managed mode station state modification move the station state modification right before insert this just makes the current code more readable you can tell that its before insertion looking at a single screenful of code right now but some upcoming changes will require this
90ebf11857c2743fab1b2b64140aff24e256e758	update phm_get_voltage_evv_on_sclk for iceland was missing the handling for iceland bugs
08c9c126004e999f0c05b369d1e0cc757e6040cc	clear stale interrupts there is stale interrupt physts_chg in isr in from the bootloader uboot when enabling the mac the stale interrupts arent part of kernel and should be cleared this clears the stale interrupts in isr when enabling the mac
844c9f476a43db0bdf61df409026a026ce98ec1b	spi rockchip add missing spi_master_put add missing spi_master_put for rockchip_spi_remove since it calls spi_master_get already
1f0972f5b05a674d73e4eb314fa1b6c78e37aef1	usb phy nop add some parameters to platform data add clk_rate parameter to platform data if supplied the nop phy driver will program the clock to that rate during probe also add __number__ flags needs_vcc and needs_reset if the flag is set and the regulator couldnt be found then the driver will bail out with
ce95d709449a757effc08b5a0da3edc311340ede	mx5 fix clock usage while suspending were enabling a clock in but were in atomic context leading to this __float__ pm late suspend of devices complete after __float__ msecs __float__ bug sleeping function called from invalid context at __float__ in_atomic __number__ irqs_disabled __number__ pid __number__ name pm-suspend __float__ info lockdep is turned off __float__ irq event stamp __number__ __float__ hardirqs last enabled at __number__ null __float__ hardirqs last disabled at __number__ __float__ softirqs last enabled at __number__ __float__ softirqs last disabled at __number__ null __float__ backtrace __float__ from __float__ __number__ __number__ __float__ from __float__ from __float__ __float__ from __float__ from __float__ __number__ __number__ __number__ __float__ from __float__ __number__ __float__ from __float__ __number__ __float__ from __float__ __number__ __number__ __number__ __float__ from __float__ __number__ __number__ __float__ from __float__ __number__ __number__ __number__ __float__ from __float__ from __float__ from __float__ from __float__ __number__ __number__ __number__ __float__ from __float__ __number__ __number__ __float__ pm early resume of devices complete after __float__ msecs just move the in and
519e23a7f51e853dbe5dc4abb193c0c0db303b3a	i2c designware-baytrail fix race when resetting the semaphore use iosf_mbi_modify instead of iosf_mbi_read iosf_mbi_write so that we keep the iosf_mbi_lock locked during the read-modify-write done to reset the semaphore link
7ca2f234404e738cc807ed87c43f9932513bc8c6	isofs avoid unused function warning with the isofs_hash function removed isofs_hash_ms is the only user of isofs_hash_common but its defined inside of an which triggers this gcc warning in arm axm55xx_defconfig starting with warning isofs_hash_common defined but not used this patch moves the function inside of the same section to avoid that warning which seems the best compromise of a relatively harmless patch for a late
607be2cff4f4899f47ef906eba5b147abc3c5da4	scsi bfa update the driver version to update bfa driver version to update bfa to use firmware image versions
e71270fd80e99211a704c981c0f48d4e02a33473	set vram base offset properly for tn
1f75ff0a3d63606c1345e316e88a903fd43ca8be	arm64 generic timer use virtual counter instead of physical at el0 we want to use the virtual counter at el0 as the physical counter may not track the current clocksource for guests running under a hypervisor this patch updates the vdso and generic timer driver to use the virtual counter the kernel el2 entry code is also updated to ensure that the virtual offset is initialised to zero
1cc160e1ba938d34581181517221913683031d29	ncr5380 fix timeout in do_abort ncr5380_poll_politely never returns that means do_abort can fail to handle a timeout after waiting for the target to negate req fix this and cleanup other ncr5380_poll_politely call sites
73457165d71d5ce0e41c0adb7bfa484702c36248	ixgbe correct length check for round up the function ixgbe_host_interface_command actually uses a multiple of word sized buffer to do its business but only checks against the actual length passed in this means that on read operations it could be possible to modify locations beyond the length passed in change the check to round up in the same way just to avoid any possible hazard
543dfb2df8ebb3eb0b499eae1d63de1701a99b40	mm fix noisy sparse warning in libcfs_alloc_pre running sparse on results in dozens of warnings warning odd constant _bool cast __number__ becomes __number__ use to explicitly convert to bool and get rid of the warning
22c01cc48301f6974868bd4a7b03e29883da1103	execution barrier after fence v2 insert wait for reg mem after eop to fix potential issue with vm context switch v2 move wait to vm_flush use equal instead of greater than
e8d891fb7b8fe4ee7311820594323d46dbc31d45	usb phy gpio-vbus dont ignore regulator apis return value due to recent changes to regulator api all users which dont check return value will generate compile warnings add such checks to gpio-vbus
23ca6bf2318fecfbb9cd9d524e82d5029ef365bf	regulator max77686 fix the delay time for set_voltage_time_sel absnew_selector old_selector returns uv the unit of ramp_rate is thus __number__ should be multiplied
0fed2bcf17d2a049c079ffd2b7bc4caca4b7f906	iwlwifi mvm bt coex fix validity flags during init the commit below introduced a bug in the validity bits in init due to that all the coex mechanism stopped sending kills to the bt side fix that
57a24cf897751e2c4292baa494ff8f298a2eac0e	call drm_put_dev directly in the hook the magic dance drm_platform_exit does is actually a remnant of the old legacy shadow attach support for platform devices modern modesetting drm drivers shouldnt do this any more and devices actually dont do this
b08517c76d764c373c232cd309ed058c98705219	rcu enable stall warnings for synchronize_rcu_expedited this commit redirects synchronize_rcu_expediteds wait to synchronize_sched_expedited_wait thus enabling rcu cpu stall warnings
adf8d90b6a949dc80e827263fccb31f8eb08a55d	f2fs avoid to use slab memory in f2fs_issue_flush for efficiency if we use slab memory in f2fs_issue_flush we will face memory pressure and latency time caused by racing of lets alloc memory in stack instead of slab
45b79a291fdd209cf40dfa40f91bf9e31f949b0d	ia64 fix misspellings in comments
a0fefbde4680b64582ebb2ca1a3c175e6871f905	usb gadget udc gr make use of new usb_endpoint_maxp_mult we have introduced a helper to calculate multiplier value from wmaxpacketsize start using it
d46ab6823963de2165f5a2af7600ce830e990e53	gpio implement this allows to set multiple outputs using a single spi transfer
0340d0b9e0e2dc340acb664f19d6550940b22cde	net checks skb_dst to be null in inet_iif in inet_iif check if skb_rtable is null for the skb and return if it is this change allows inet_iif to be called before the dst information has been set in the skb when doing socket based udp gro
860c1994a70a0d2ab6f87fb7e72e722a8fb2c64c	alsa control add dimension validator for userspace elements the dimen field in struct snd_ctl_elem_info is used to compose all of members in the element as multi-dimensional matrix the field has four members each member represents the width in each dimension level by element member unit for example if the members consist of typical two dimensional matrix the dimen0 represents the number of rows and dimen1 represents the number of columns or vise-versa the total members in the matrix should be exactly the same as the number of members in the element while current implementation has no validator of this information in a view of userspace applications the information must be valid so that it cannot cause any bugs such as buffer-over-run this commit adds a validator of dimension information for userspace applications which add new element sets when they add the element sets with wrong dimension information they receive
cc21688703ee5090a6f1204b501c55034152c65e	asoc hdac_hdmi add device id for kabylake kabylake platform is similar to skylake so add the device id
f122d9a83e5d1e73f34da9fb832c9b005030b9cb	media radio-miropcm20 fix querycap dont set version done by the v4l2 core fill in bus_info set correct driver name and add device_caps support
9992c2e2fbb72ffc63d4587c4aa94dfcd8229e55	net cdc_ncm workaround for missing cdc union adding support for the mbim mode in some sierra wireless devices some sierra wireless firmwares support cdc mbim but have no cdc union funtional descriptor this violates the mbim specification but we can easily work around the bug by looking at the interface association descriptor instead this is most likely what windows uses too which explains how the firmware bug has gone unnoticed until now this change will not affect any currently supported device conforming to the ncm or mbim specifications as they must have the cdc union descriptor
db6c2c69c27f2c4fd1e2a1c6b0b1119b1e885f8a	pinctrl fix a memleak when freeing maps we forgot to free the node itself when a map
53f0a509775dae77dab64d0b858635a70e3d6f4f	mips loongson __number__ use temporary struct resource to avoid repetition use a temporary struct resource pointer to avoid needless repetition of no functional change intended
fc303101dc9bfe2b079798c948f6ad4245c51e57	switch the load detect code to the staged modeset config now that set_mode also disables crtcs and expects its new configuration in the staged output links we need to adjust the load detect code a bit
c0f4502a8700832bb3a917fdcfe080f5ccf1c617	remove extern from function prototypes there are a mix of function prototypes with and without extern in the kernel sources standardize on not using extern for function prototypes function prototypes dont need to be written with extern extern is assumed by the compiler its use is as unnecessary as using auto to declare variables in a block
0b9d0416fc28e27cb279021d17bb59e7eba43edb	force cursor clut fetch it may happen that the cursor is displayed with wrong colors which can be explained by a clut wrongly fetched at the first display fetching the clut at each commit ensures that the right colors are used at least from the first cursor move
7887427193c84eff6bb8a8776a3bf1a83b7a226c	net pasemi remove deprecated irqf_disabled this patch proposes to remove the irqf_disabled flag from its a noop since and it will be removed one day
7434785652457482a4b22c280a83776c3873940d	brcmfmac add valid core index check in related functions perform a valid check for core index to avoid illegal address access
2a9a06f98f26654d3b07482319ea0be276689f0b	clk lpc18xx-ccu fix potential system hang when disabling unused clocks ccu branch clock register must only be accessed while the base parent clock is running access with a disabled base clock will cause the system to hang fix this issue by adding code that check if the parent clock is running in the is_enabled clk_ops callback this hang would occur when disabling unused clocks after amba runtime pm had already disabled some of the clocks
5ab066e5465b2984a45e205f33896b2ec1620c37	serial st-asc ignore the parity error bit if mode is enabled the datasheet states if the mode field selects an frame then this parity error bit is undefined software should ignore this bit when reading frames
d5bc18c148fd3d3ab7cbd3d976f7e27226f74dd8	asoc intel broadwell constify snd_soc_ops structures check for snd_soc_ops structures that are only stored in the ops field of a snd_soc_dai_link structure this field is declared const so snd_soc_ops structures that have this property can be declared as const also the semantic patch that makes this change is as follows disable identifier i position p static struct snd_soc_ops identifier struct snd_soc_dai_link e position p identifier e position p struct snd_soc_dai_link e position p identifier struct snd_soc_ops e on disable identifier static struct snd_soc_ops i the effect on the layout of the file is shown by the following output of the size command first before then after the transformation text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__
25fa70795bf11ef6f5b147f0b231a43880ba96ca	usb renesas_usbhs send packet in necessary timing current renesas_usbhs driver always tries to send packet in end of recip handler but it breaks chapter __number__ endpointhalt test this patch fixup this issue
70c646e0e47b51c8fa431f9ec1962f7d6e512860	perf pmu split perf_pmu__new_alias separate the event parsing code in perf_pmu__new_alias out into a separate function __perf_pmu__new_alias so that code can be called indepdently this is based on an earlier patch from andi kleen link
ed05be56643e3420037c5f3854bed249b4f2f758	mfd da9052 register ability of device to cause a wake-up interrupt
44a6bd865623be7154e495e228abb2a1465fe13e	ieee802154 fix new function declaration the commit eee802154 add basic support for rf212 to at86rf230 driver introduced the new function is_rf212 with some minor issues in declaration __number__ fix the function type by changing it to bool as the function definition returns a boolean value additionally both callers of is_rf212 are expected to return a boolean value __number__ fix the function specifier by deleting the inline keyword as the compiler takes care of that
2e6e9f2bb894e902b7fbd3f6865719eaa8306b6c	increment abi version count increment the abi version count for interface
8c2b1435b9f48904aaa9401d12b800ca8c4dae05	f2fs recovery missing dot dentries in root directory if f2fs was corrupted with missing dot dentries in root dirctory it needs to recover them after set f2fs_inline_dots flag in directory inode when detects missing dot dentries
60f83c898776c363ef8ebb66f14cbc748c1df1e8	net thunderx fix for crash while bgx teardown cortina phy does not have kernel driver and we dont attach device with phy layer for intefaces like xfi xlaui etc hence check for interface type before calling disconnect
2dadfd7564ef28391609c7ef896fd85218799012	cpufreq use list_is_last to check last entry of the policy list currently next_policy explicitly checks if a policy is the last policy in the cpufreq_policy_list use the standard list_is_last primitive instead
58d6a7bc4f851b5bd43280eab145bab992cb7ebe	simple add bus format for hannstar hsd070pww1 lvds panel the bus format both specifies the bpc and the way the individual bits get serialized into the __number__ lvds timeslots while the is only one standard mapping for __number__ bpc and so the driver could infer the bit mapping from the bpc alone there are more options for the __number__ bpc case which makes specifiying the bus format mandatory to keep things consistent across panels and to set a precedent for new panel additions add the proper bus format
d249872939bfa86c9cce44a56a8cbdbc7086519b	set in to match the new logic since is now set in to signal the beginning of the trace do so also in the intel_bts driver link
d9972f470bcb40947dd91af90f17f9cb01db1f41	usb dwc3 core remove unnecessary dev_warn when a soc supports both phy interfaces but doesnt define hsphy in we will get an unnecessary dev_warn which can mislead users into thinking that theyre missing something instead lets just silently rely on a correct default if the hw default is wrong then hsphy is required and usb wont work this will be motivation enough for engineers to patch their way into a working setup
2a80d5458a027f6d514987c09f0b51f45c3a5be4	scsi hpsa fallback to use legacy report phys command older smartarray controllers eg smartarray do not support the extended report phys command so fallback to use the legacy version here
2e338f7e034f12066c78999deff8894c337ae23b	drivers hv utils use timesync samples to adjust the clock after boot only the first __number__ samples after boot were being used to discipline the clock after the first __number__ samples any samples from the host were ignored and the guest clock would eventually drift from the host clock this patch allows timesync-enabled guests to continuously synchronize the clock with the host clock even after the first __number__ samples
a82f50668b8078417b2b8cd63bbeaf46fa5602e0	staging st-cec add parentheses around complex macros this patch fixes the following error error macros with complex values should be enclosed in parentheses
1ba0f1e7975ad07557f7a931522bdcd813ae35f6	rbd dont hold ctl_mutex to device when an rbd device is first getting mapped its device registration is protected the control mutex there is no need to do that though because the device has already been assigned an id thats guaranteed to be unique an unmap of an rbd device wont proceed if the device has a non-zero open count or is already being unmapped so theres no need to hold the control mutex in that case either finally an rbd device cant be opened if it is being removed and it wont go away if there is a non-zero open count so here too theres no need to hold the control mutex while getting or putting a reference to an rbd devices linux device structure drop the mutex calls in these cases
6f587c9f7bbb50a2dc5ad7bdc43392cf608e0857	gpio bcm281xx update module_author add broadcoms upstreaming mailing list address to module_author
02b42498f383a6c24f7c751d4fe89a911a249242	i40e move function calls to i40e_shutdown instead of i40e_suspend we should be stopping the service task and flow director on shutdown not on suspension
cfa805f6f19639b37ee877085770a396b70f2da1	dlm avoid lvb truncation for lockspaces with an lvb length above __number__ bytes avoid truncating the lvb while exchanging it with another node in the cluster
0e034f5c4bc408c943f9c4a06244415d75d7108c	iwlwifi fix mis-merge that breaks the driver my laptop that uses the intel __number__ iwlwifi module would no longer connects to the network it would fail with a microcode sw error detected and spew out register state over and over again without ever connecting to the network the cause is mis-merge in commit where david seems to have lost some of the changes to iwl_mvm_set_tx_cmd from commit iwlwifi mvm dont override the rate with the amsdu len the reason seems to be a conflict with commit d8fe484470dd iwlwifi mvm add support for new tx cmd api which touched a line adjacent to the changes in david missed the fact that had become then he removed the skb_info because it was unused this just re-updates iwl_mvm_set_tx_cmd with the lost two lines
1e927711c5ecabe76010ed9249f8f3747829f04f	staging zram __zram_reset_device can be static
9d98bcec731756b8688b59ec998707924d716d7b	fix incorrect pointers in ioapic_setup_resources on a brickland system hot-removing one ioapic is fine hot-removing the one causes panic in mp_unregister_ioapic while calling release_resource it is because the iomem_res pointer has already been released when removing the first ioapic to explain the use of here res is assigned to ioapic_resources and later in ioapic_insert_resources we do struct resource ioapic_resources for_each_ioapici r here r is treated as an arry of struct resource and the ensures that each element of the array is inserted separately thus we should call release_resouce on each element at fix it by assigning the correct pointers to in ioapic_setup_resources link
36e9d2ebcc15d029b33f42a36146ab5a5bcfcfe7	cgroup fix rcu_read_lock leak in update_if_frozen while updating cgroup_freezer locking cgroup_freezer replace with freezer_mutex introduced a bug in update_if_frozen where it returns with rcu_read_lock held fix it by adding rcu_read_unlock before returning
548916e9f59ba35174122e33c48ac744410973fa	mn10300 dont bother with sigtrap in setup_frame just tell signal_delivered to do it
8cfe2fd3562ba673435bb2d7a4bb451aabd47809	regmap cache add warning info for the cache check if there is no cache used for the drivers the register defaults or the register defaults raw are not need any more this patch will check this and print a warning
f639554b8a3a4aac18193a0c98a4639d432c48f0	usb gadget ci13xx_udc fix potential crash in irq handler as pointed out by dan carpenter we should not be trying to call dev_err on a structure that was previously determined to be null thats just foolish and asking for trouble so just delete the message its not going to do anyone any good to have it anyway this problem was caused by usb gadget ci13xxx replace home-brewed logging with
abed7d0710e8f892c267932a9492ccf447674fb8	xen fix the check of e_pfn in xen_find_pfn_range on some numa system after dom0 up we see below warning even if there are enough pfn ranges that could be used for remapping unable to find available pfn range not remapping identity pages fix it to avoid getting a memory region of zero size in xen_find_pfn_range
8e81f65fdc7f5d292bb3c115b748767d921823c1	iwlwifi fixed testmode notifications length the length of iwl_rx_packet doesnt include the dword for the length itself so add it manually
0e2bcaae836e535236244bfc900626ee541eb7bb	sock_close couldnt have been called with null inode since at least if not since __float__ or so
b8622cbd58f345d48f683d881abe3037c60aa673	enic fix addr valid check in enic_set_vf_mac zero mac address is a valid address for vic dynamic vnic and sriov vfs fix the check in enic_set_vf_mac appropriately
399e0f4f00adbfdea2122c1daec0d4015f56cc7a	usb musb ux500_dma add missing mem resource check fix dma_controller_create fail path in case memory resource is missing
af7419017626b93ccdf76b12c2b1dc8fe17da4ad	ixgbe take manageability semaphore for firmware commands we need to take the manageability semaphore when issuing firmware commands to avoid problems with this in place the semaphore is no longer taken in the ixgbe_set_fw_drv_ver_generic function since it will now always be taken by the ixgbe_host_interface_command function
4246a637e781dc8a7f90db1efd7058bd5e452ea3	staging comedi das16m1 tidy up digital register defines the digtial inputs and outputs are using the same register offset but they are different logical registers physically they are the same register with the hi __number__ bits returning the inputs and the lo __number__ bits driving the outputs for aesthetics use two different defines for the registers
34204fde4c877cb33d8ec0df09f38333f570cc84	pvfs_bufmap_copy_from_iovec dont rely upon size being equal to iov_iter_countiter
e2568465bd55b3ee619d9ebd02cc330feffaae04	dm raid use read_disk_sb throughout for consistency call read_disk_sb from attempt_restore_of_faulty_devices instead of calling sync_page_io directly explicitly set device to faulty on superblock read error
60c323699bb308404dcb60e8808531e02651578a	free related resources when failure occurs in hotplug_cfd when failure occurs in hotplug_cfd need release related resources or will cause memory leak
d4583edb221eb7297bcbc6f0febe895a96fed5f7	staging octeon-ethernet xaui dont register poll function in init link status poll function is already controlled by functions so we dont need to do it on init this eliminates a redundant xaui link status notification when the module is loaded
66ed681a304f2971f85b9d8c58d4c35f340e1af1	staging rtl8188eu lines over __number__ characters fixed this is a patch to the file that fixes up a line over __number__ characters warning found by the tool
205d48edee844740041c07450fedd7314352ba44	dc factor out dc window and cursor commit the sequence to commit changes to the dc window or cursor configuration is repetitive and can be extracted into separate functions for ease of use
d5ae7a6bd09792ddf0e9dfaf97ad34b9ad6dc146	rt2800 __number__ setup ldo_cfg0 when configuring channel based on rt5592_chipswitchchannel from
cc3a9f72548e9f497e77b7f6625f021b8cd2bb77	nfc st21nfca fix sparse cast to restricted __be16 fixing sparse cast to restricted __be16 message when building with make
d9991f45d81f8a4b554584b76c604a251c34b9ba	drm omap rely on the default behavior we have a relationship between connectors and encoders and the driver is relying on the atomic helpers we can drop the custom implementation and let the core call drm_atomic_helper_best_encoder for us link
3e1ae441886b82fbf605f37ac0756b811d55f3d5	arc mm remove argument to do_page_fault this can be ascertained within do_page_fault since it gets the full ecr exception cause register further for both the callers of do_page_fault prot-v d-tlb-miss the cause sub-fields in ecr are same for same type of access making the code much more simpler d-tlb-miss ld prot-v ld d-tlb-miss st prot-v st d-tlb-miss ex prot-v ex this helps code consolidation which is even better when moving code from assembler to c
40492f60794aaf32576cb42d9af86eed785a6e63	use hook to remove dp aux i2c when displayport aux channel i2c adapter is registered drm_connectors kdev member is used as a parent so we get sysfs structure like because of that there is a problem when drm core and not the driver calls drm_connector_unregister it removes parent sysfs entries card1-dp-2 in our example while the i2c adapter is still registered later we get a warn when we try to unregister the i2c adapter warning cpu __number__ pid __number__ at sysfs group __address__ not found for kobject i2c-12 to fix it we can use the hook to unregister the i2c adapter before drm_connectors sysfs is torn down
f3772c2b4974241a0ee9d2a35b626fff7c2b7b8d	usb gadget mv_u3d_core remove unnecessary oom messages the site-specific oom messages are unnecessary because they duplicate the mm subsystem generic oom message
99d14a1d9b876c9847608983606fa1928f5bf8f3	arm integrator use devm_ioremap to remap cm in the pciv3 driver use devm_ioremap instead of just ioremap when remapping the system controller in the pciv3 driver so the mapping will be automatically released on probe failure
fee84c43e6afc42295ae8058cbbef9ea5633926c	time explicitly use u32 instead of int for shift values ingo noted that using a u32 instead of int for shift values would be better to make sure the compiler doesnt unnecessarily use complex signed arithmetic link
457f48507deb0e8c8dd299c7d8dce7c2c0e291e8	bluetooth correct debug output l2cap_set_timer function prints sk instead of chan pointer
2eacc79c27eb683c4a3ded80c2629387ee0d4e04	radix tree test suite add test for idr_get_next assert that idr_get_next returns the next populated entry in the tree with an id greater than or equal to the value pointed to by argument
3b876c8f2a361ceeed3fed894980c69066f903a0	xfs fix debug_object warn at xfs_alloc_vextent fengguang reports __float__ xfs vdd ending clean mount __float__ odebug object is on stack but not annotated __float__ cut here __float__ warning at __float__ hardware name bochs __float__ modules linked in __float__ pid __number__ comm not tainted __float__ call trace __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ use init_work_onstack in xfs_alloc_vextent instead of init_work
be5eb33d5d1bd076d98564ba2fea7a4ed36ca24f	convert init function to return error the init functions do not return any error they behave as the following panic thus leading to a kernel crash while another timer may work and make the system boot up correctly or print an error and let the caller unaware if the state of the system change that by converting the init functions to return an error conforming to the clocksource_of_ret prototype proper error handling rollback errno value will be changed later case by case thus this change just return back an error or success in the init function
b6931c9ba728d60c542c39ff037fe6f595c074a2	enic fix possible deadlock in enic_rfs_flw_tbl_free the following warning is shown when spinlock debug is enabled this occurs when enic_flow_may_expire timer function is running and enic_stop is called on same cpu fix this by using spink_lock_bh info inconsistent lock state not tainted inconsistent usage takes at enic state was registered at __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ irq event stamp __number__ hardirqs last enabled at __number__ __address__ hardirqs last disabled at __number__ __address__ softirqs last enabled at __number__ __address__ softirqs last disabled at __number__ __address__ other info that might help us debug this possible unsafe locking scenario cpu0 deadlock
1dfb5751a4de7c6a57a5602e8e2b87267cfc8c81	parisc get rid of nlink_t switch to explicitly-sized type
dac678f5c281fac55aadfa5f390c12a8d14bbc67	asoc wm8993 fix db_range size give the correct number of entries to tlv_db_range_head to prevent reading more data than actually is in the array
25dd9171f51c482eb7c4dc8618766ae733756e2d	perf probe fix probing kretprobes the commit dfef99cd0b2c perf probe use ref_reloc_sym based address instead of the symbol name converts kprobes to use ref_reloc_sym _stext and offset instead of using symbols name directly so on my system adding do_fork ends up with like below sudo perf probe probe-definition0 __number__ arguments looking at the vmlinux_path __number__ entries long using for symbols could not open debuginfo try to use symbols opening added new event writing event failed to write event invalid argument error failed to add events reason operation not permitted code as you can see the do_fork was translated to this was because to support local symbols that have same name but the problem is that kretprobe requires to be inserted at function start point so it simply checks whether its called with offset __number__ and if not itll return with you can see it with dmesg dmesg tail __float__ return probe must be used without offset so we need to use the symbol name instead of ref_reloc_sym in case of return probes link
6d56b9d65813dd6a184efc5e7955d7e181a853c0	mtd mark const init data with __initconst instead of __initdata as long as there is no other non-const variable marked __initdata in the same compilation unit it doesnt hurt if there were one however compilation would fail with error causes a section type conflict because a section containing const variables is marked read only and so cannot contain non-const variables
32aaa62ede574ff99b020b4ee3ff6f9cfc9f0099	nfsd4 use session limits to release send buffer reservation once we know the limits the session places on the size of the rpc we can also use that information to release any unnecessary reserved reply buffer space
310923b7de44cb68b9d8f1d8a4a7f915872cd18c	staging comedi pcl726 rename boardinfo irqbits rename this camelcase variable in the boardinfo
bd483d4c6c65c1c48483f2f81c603d42b39ce83b	alsa control fixe a trailing white space error fixed a trailing white space error detected in by script
7c7a5390dc6c8d89fc368424b69a4eef8e43f411	xprtrdma add ro_unmap_sync method for fmr fmrs ro_unmap method is already synchronous because ib_unmap_fmr is a synchronous verb however some improvements can be made here __number__ gather all the mrs for the rpc request onto a list and invoke ib_unmap_fmr once with that list this reduces the number of doorbells when there is more than one mr to invalidate __number__ perform the dma unmap _after_ the mrs are unmapped not before this is critical after invalidating a write chunk
854d23b77aa25b203c7af11de885c3b8b3834c20	refactor table accesses encapsulate accesses to the capi __float__ name and parameter tables in a single place in preparation for redesign
9f80f283ab13c2c055d6001f255cf857be695eb4	mtd nand lpc32xx_mlc drop owner assignment owner is automatically set by mtdcore make use of that
fda8373ce1cca8e6a889760bbb2676e17749f2a5	arm ux500 add snowball pin configuration for user led here we setup the gpio pin responsible for illuminating the user led on the snowball low-cost development board
b1835d238ad3dc6ad8fe23172b1995d1fb5bdd39	serial no need to set tx_err twice in the serial8250_tx_dma the tx_err flag is set in case of error thus there is no need to repeat this in __dma_tx_complete
12eb21de1f26233ad195ffe991697d61790f4193	pci switch msix_program_entries to use pci_msix_desc_addr instead of relying on the msix_entry structure for the vector number read it from the msi_desc
9f5418010940236b2c39ea53b99055ca26ff1279	xfs concurrent readdir hangs on data buffer locks theres a three-process deadlock involving barriers and inverted lock orders in the directory readdir implementation its a pre-existing problem with lock ordering exposed by the vfs parallelisation code process __number__ process __number__ process __number__ readdir iolockshared get_leaf_dents iterate entries ilockshared map lock and read buffer iunlockshared process entries in buffer readdir iolockshared get_leaf_dents iterate entries ilockshared map lock buffer finish file_accessed start transaction ilockexcl finishes processing buffer get next buffer ilockshared and thats the deadlock fix this by dropping the current buffer lock in process __number__ before trying to map the next buffer this means we keep the lock order of ilock buffer lock intact and hence will allow process __number__ to make progress and drop its ilockshared once it is done
3ff7ca051a43bf2dfd1eebdd6c771c4b7a276d8e	coresight-tpiu use module_amba_driver to simplify the code module_amba_driver makes the code simpler by eliminating boilerplate code
ef98c1f7b37116ae45d892a23f46cffdda31773c	fix handles past the one is a u64 so make sure to use val when modifying
b2f505be3e5f41306b02bb570a74d71348756ced	make link rate printing prettier turn source rates __number__ sink rates __number__ common rates __number__ into source rates __number__ __number__ __number__ sink rates __number__ __number__ common rates __number__ __number__
97ef0a461ba82cb641ae53314997ce44161b749a	staging silicom checkpatch tab and space cleanup tenth chunk of cleanup
b958f7a7cbdfbf59ba61de7ebb9c59b0ee3a7967	mfd fix missing abx500 header file updates i missed to include a patch adding the new silicon revision define cut3p3 and remove the retired cut0 versions of ab8500 also delete the reference to the retired ab3550 from the header
e7b6658ea8cae3b7ab86e2985011126d181128fb	ipx remove all unnecessary castings on ntohl apply commit e0f36310f793 ipx remove unnecessary casting on ntohl to all
6f8f8e4d313a47e3f8aa7eeb5201d1b02ffa0951	scsi aic7xxx fix swapped arguments in ahc_find_pci_device the prototype for ahc_9005_subdevinfo_valid shows that the caller has the arguments in the wrong order __number__ ahc_9005_subdevinfo_validuint16_t device uint16_t vendor __number__ uint16_t subdevice uint16_t subvendor
215081f35320658e2a6d4d629d8aa5d58702773a	net smsc9420 remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
f0cdfcee19b259c209a9acda45ab063fd962b66d	scsi bfa move service parameter programming logic into firmware programming of the service parameters tx credits is now done in firmware remove the logic of sending the service parameters to firmware from driver
f567accb3ff4a6ac9a2a50d33e29a076afc7dd2e	forward declarations clean-up move dentry_operations structures and remove forward declarations link
7f4341fef3f2daa073fab5727d142a68b0edd37e	bna staticize local functions bna_rx_sm_stop_wait_entry bna_rx_sm_rxf_stop_wait_entry bna_rx_sm_started_entry bna_rx_sm_cleanup_wait_entry and bna_rx_sm_cleanup_wait are used only in this file fix the following sparse warnings warning symbol bna_rx_sm_stop_wait_entry was not declared should it be warning symbol bna_rx_sm_rxf_stop_wait_entry was not declared should it be warning symbol bna_rx_sm_started_entry was not declared should it be warning symbol bna_rx_sm_cleanup_wait_entry was not declared should it be warning symbol bna_rx_sm_cleanup_wait was not declared should it be
add3151133b9ae3bcfd97eab04d9a50b6606453c	clk nomadik use seq_puts in nomadik_src_clk_show a string which did not contain a data format specification should be put into a sequence thus use the corresponding function seq_puts this issue was detected by using the coccinelle software
0694001b27efe5878ba5bd273e39b384821d865e	reuse wrpll when possible it seems we do have machines with __number__ outputs so sharing wrplls is the only way to get __number__ pipes working bugzilla
da34ac7626b571d262f92b93f11eb32dd58d9c4e	tcp only undo on partial acks in ca_loss undo based on tcp timestamps should only happen on acks that advance snd_una according to the eifel algorithm in rfc __number__ section __float__ __number__ if the value of the timestamp echo reply field of the acceptable acks timestamps option is smaller than the value of retransmitts then proceed to step __number__ section terminology we use the term acceptable ack as defined in rfc793 that is an ack that acknowledges previously unacknowledged data this is because upon receiving an out-of-order packet the receiver returns the last timestamp that advances rcv_nxt not the current timestamp of the packet in the dupack without checking the flag the dupack will cause tcp_packet_delayed to return true and tcp_try_undo_loss will revert cwnd reduction note that we check the condition in ca_recovery already by only calling tcp_try_undo_partial if flag_snd_una_advanced is set or tcp_try_undo_recovery if snd_una crosses high_seq
db6aed70235b35a113e1b0e81cb293fd2e92de0f	ceph fix snap context leak in error path
fae98164463948eb31d638fe207c25a3d2b9312f	gpio uapi use as ioctl major the previous o is in conflict and not very orderly assigned we want to select an ioctl major that does not conflict with the existining ones add the new reserved major to
ace5af39866da7d45f43774150dace19a73716d6	iwlegacy avoid null pointer dereference error il4965_rs_initialize_lq checks to see if sta is null however before that check il4965_rs_use_green dereferences sta when intializing use_green avoid a potential null pointer dereference error by only calling il4965_rs_use_green after we are sure sta is not null smatch analysis il4965_rs_initialize_lq warn variable dereferenced before check sta see line __number__
8dfd1f044c157c7ec329d9bdecb74972393aa612	tune done rc6 enabling output power users spot this and then get adventurous and try to adjust module driver options nothing good ever came out of that so hide it better
6734011f3c9a17070f157656f8b15e051e37aee1	fix error return code the function mcs_probe return __number__ for success and negative value for most of its internal tests failures there is one exception that is error case going to for this error case the function abort its success execution path but returns non negative value making it difficult for a caller function to notice the error this patch fixes the error case that do not return negative value a simplified version of the semantic match that finds this problem is as follows return ret __number__ when ret e1 when when ret e2 when forall return ret
e06259aa08fbc88c824130764c8667a8cc68c4d1	xfs various swapext cleanups replace structure typedefs with struct expressions and fix some whitespace issues that result
128aa925ee7e9aa84943ce64df48192b92a81767	omap remove unused parameter arch_id from there is not point in having arch_id as parameter of __arch_decomp_setup nothing in it uses arch_id the machine id is already exported and used with symbol __machine_arch_type as per removing the pointless macro as well
ce7b8dbdded8552d1fd25cc9289da361c5cc765e	asoc ssm2518 drop implementation the implementation of ssm2518_register_volatile always returns false this behavior is the same as no callback implementation when cache_type regcache_none
ea2aab2401576a7a2921f656d4184a0225aa138f	scsi ufs fix endianness sparse warnings fix many warnings with incorrect endian assumptions which makes the code unportable to new architectures the ufs specification defines the byte order as big-endian for upiu structure and little-endian for the host controller management descriptors
dbd1759e6a9c4596d8609897c414da603da80914	ipv6 on reassembly record frag_max_size ip6cb and ipcb have a frag_max_size field in ipv6 this field is filled in when packets are reassembled by the connection tracking code also fill in when reassembling in the input path to expose it through cmsg ipv6_recvfragsize in all cases
dc99471418549634ac072578233589c8a92249fb	mmc sdhci-pxav2 remove unnecessary assignment of the sdhci_pltfm_init function has initialized the priv member as null so theres no need to do it again
5664de25fa8ad2f06d6d7dd44df61023e1aaaa14	gpio palmas fix a possible null dereference of_match_device could return null and so cause a null pointer dereference later reported-by coverity cid __number__
87ffe02c20b2fa302f22754a28f530ab54eadac6	staging lustre lov handle the case of stripe size is not power __number__ calculate the end of current stripe correctly when the stripe size is not power __number__ intel-bug-id reviewed-on
ae21e447773f17b61014c286ed5e0fc3db874df6	media lgdt3306a fix error do not use assignment in if condition just codingstyle fix
c67ba5e5801f912e39fbbfaddbf118abd64ef271	ath9k remove unused variables in ath_mci_cleanup leaving the unused variables ath_mci_cleanup causes build warnings
f4f87d04116ab2f1419f1e85c1c9504536858b88	add value range check for instead of just cutting of the upper bits of the value make sure that the value is in the valid range and return an error if it is not
45cce4ccafe3cddc924ef5221d22b9853fc9a13c	dont use smp_processor_id in preemptible context show_cacheinfo needs to access the cacheinfo structure of any online cpu this was done with using smp_processor_id as in index while in preemtible context this means the cpu could be offline and the data be gone when it would be accessed better use any online cpu address and protect the data by get_online_cpus and put_online_cpus
287f13f48e0c343000ed2fd96dca67f994e40bce	staging unisys include remove unused visorchannel removes unused pertaining to visorchannel uuids
b9409687a8dad8b7207f05c62b9c87d2a766473b	arm shmobile remove mmc_cap2_no_multi_read from koelsch sh_mobile_sdhi cares multiblock read bug remove mmc_cap2_no_multi_read flag from board code
05f3598025aff4eac95a74e31f5f56e99aaa098b	staging unisys fix camelcase in enable_ints_write fix camelcase variable name features_addr features_addr update references to use the new name
820b52fd80dfca80a1fa111f9896868662e58791	qlcnic enable vf flood bit on pf o on enabling vf flood bit pf driver will be able to receive traffic from all its vfs
755bf5ee8633b97d8fd0ffbb4221662056dda22b	cgroup restructure child_subsys_mask handling in cgroup_subtree_control_write make cgroup_subtree_control_write first calculate new subtree_control new_sc child_subsys_mask new_ss and masks before applying them to the cgroup also store the original subtree_control old_sc and child_subsys_mask old_ss and use them to restore the orignal state after failure this patch shouldnt cause any behavior changes this prepares for a fix for a bug in the async css offline wait logic
c9ecf989cc7626e9edf8abef79f64b909542129b	fuse return from fuse_direct_io for all async requests if request submission fails for an async request get_user_pages returns we currently skip the return and drop into wait_for_sync_kiocb forever avoid this by always returning for async requests if an error occurs the error is passed into fuse_aio_complete returned via aio_complete and thus propagated to userspace via io_getevents
7ed49f187c82821e35f8869399bcf90822a74a23	btrfs fix space leak when we fail to make an allocation when changing back to using a spin_lock to protect the extent counters i decided that since we would only be dropping our original extent it was ok to just drop the extent and return however since somebody else could have come in and done a reservation we need to do the normal song and dance to clear the reservation out properly so calculate how much space we need to free and then subtract what we just attempted to reserve if its more then we know we need to drop those bytes from the delalloc block rsv thanks
cbe7270d48670889a88705478a68d000b0bc3f6e	expose full method calling capabilities with nv_exec nv_call just allows submission nv_exec exposes the interface which will be used in future commits
c5d933b1229c6bb79de3a144d2b33e756f4afd6d	pci altera use builtin_platform_driver to simplify the code use the builtin_platform_driver macro to make the code simpler
a209ef09af0dc921311d0cc4a1d4f926321d91b8	fix race in counting num_poisoned_pages when memory_failure is called on a page which are just freed after page migration from soft offlining the counter num_poisoned_pages is raised ce so lets fix it with using testsetpagehwpoison
822aa3e22f6eace077b53b28176aaf001a92a61d	staging lustre remove useless unary pluses replace two occurrences of with simply __number__
e73bbf64907c88d3bb811756fc25548131524035	fpga region release fpga region reference in error path if fpga_region_get_manager fails in fpga_region_program_fpga a reference to the fpga_manager instance previously acquired through fpga_region_get is retained make sure to properly release it in the error case by using a separate jump label which will call fpga_region_put in before returning
28681d71e1b74c3b54e1d41be66b8198f8455995	hwmon max1668 make max1668_addr_list array const
e2c1b82330bcd77ffeb6dc5a18a4c6ce8d3e1fd3	crypto algif_skcipher set error code when kcalloc fails fix bug in function skcipher_recvmsg_async variable err takes the return value and its value should be negative on failures because variable err may be reassigned and checked before calling kcalloc its value may be __number__ indicates no error even if kcalloc fails this patch fixes the bug by explicitly assigning to err when kcalloc returns a null pointer
478573c93abd369c4850de55c387be43aa01e2e8	driver core dont leak secondary fwnode on device removal if device_add_property_set is called for a device a secondary fwnode is allocated and assigned to the device but currently not freed once the device is removed this can be triggered on apple macs if a thunderbolt device is plugged in on boot since apples nhi efi driver sets a number of properties for that device which are leaked on unplug
9e95275cf351ebbb02316addfa2d8d87173a4cd7	crypto sahara use devm_ioremap_resource use devm_ioremap_resource in order to make the code simpler and remove redundant return value check of platform_get_resource because the value is checked by devm_ioremap_resource
d72c0842ff0e71342857723bb65f35b71f57b264	btrfs calc file extent num_bytes correctly in file clone num_bytes should be __number__ not __number__
e1d60093ca7341e884578c41a29da7cd1714c80e	check the error after rtc_read_time in rtc_suspend and rtc_resume the error after rtc_read_time is not checked if rtc device fail to read time we cannot guarantee the following process add the verification code for returned rtc_read_time error
89b107adce32a52920b36787b60c8f24c986c526	misdn reference to this_module in is racy when you have no set
2541aa799ff711fdd85dfbced58ea815a5968674	cciss remove unneeded memset the memory return by kzalloc or kmem_cache_zalloc has already be set to zero so remove useless memset0 spatch with a semantic match is used to found this problem
d4d854d6c7706e6a5cda297e350e3626d55e9bc9	cpufreq drop unnecessary label from cpufreq_add_dev the leftover out_release_rwsem label in cpufreq_add_dev is not necessary any more and confusing so drop it
801448e0672008acec050fbef3b8a7df7c5edcc1	mfd cleanup duplicate db8500 definitions i missed in my previous patch the a9_mask_req_mask were already defined lets remove the duplicate definitions the prcmu_gic_delay macro could be removed as it is not really useful here
40c1deaf6c2b42d7ee4e604ba5793cf9da292d96	tg3 clear netif_f_tso6 flag before doing software gso commit d3f6f3a1d818410c17445bce4f4caab52eb102f1 tg3 prevent page allocation failure during tso workaround modified driver logic to use tg3_tso_bug for any tso fragment that hits hardware bug conditions thus the patch increased the scope of work for tg3_tso_bug to cover devices that support netif_f_tso6 as well prior to the patch tg3_tso_bug would only be used on devices supporting netif_f_tso a regression was introduced for ipv6 packets requiring the workaround to properly perform gso on skbs with tcpv6 gso_type we need to call skb_gso_segment with netif_f_tso6 feature flag cleared or the function will return null and cause a kernel oops as tg3 is not handling a null return value this patch fixes the problem
940d9d34a5467c2e2574866eb009d4cb61e27299	cxgb4 allow large buffer size to have page size since commit code cleanup to enable t4 configuration file support we have failures like this during cxgb4 probe cxgb4 __number__ bad sge fl page buffer sizes __number__ __number__ cxgb4 probe of __number__ failed with error this happens whenever software parameters are used without a configuration file that happens when the hardware was already initialized after kexec or after csiostor is loaded it happens that these values are acceptable rendering fl_pg_order equal to __number__ which is the case of a hard init when the page size is equal or larger than __number__ accepting fl_large_pg equal to fl_small_pg solves the issue and shouldnt cause any trouble besides a possible performance reduction when smaller pages are used and that can be fixed by a configuration file
3af9e0315699b60762157662f721f50fd1fe529b	asoc davinci-mcasp change compatible property model to more accurate change the model omap2-mcasp-audio in compatible property to am33xx-mcasp-audio as omap2 does not have mcasp
329afd264592f8d0e40fa063c089b35fba0014cc	arm exynos replace cpumask by the corresponding macro a trivial patch to replace for_each_cpucpu_id cpu_online_mask by the corresponding macro
2729d5b18df363167d0c0be428876f3c07d2617b	pci restructure pci_do_fixups this patch restructures pci_do_fixupss quirk invocations in the style of initcall_debug_start and initcall_debug_report so we have only one call site for the quirk bhelgaas changelog
64ba40accce3e6bb916a36390d3e202085804da8	media coda v4l2-compliance fix implement try_decoder_cmd implement try_decoder_cmd to let userspace determine available commands and flags
772301b6187a88359b9514bdd023becf31e7f013	ethernet fix typo in correct spelling platfom to platform in
b03ee4ca0cec348c84dccf08aaec2454c4d236c2	fix incorrect order of formal and actual parameters the last two actual parameters when calling id_map_find_by_sl_id from id_map_get are swapped however the same formal parameters to id_map_get have them swapped as well inverting the effect of the first error this commit improves readability but makes no functional change to the code
abb3e1c8777ec2baffa2c736aa06280821018995	pnfs dont mark the layout as freed if the last lseg is marked for return address another memory leak
5c3d52ef5a043b17175b50c9b8a7a043dd763662	atl1 use defined functions to disable irq looks like direct writes to imr register is not good idea because there are exist functions to make this work
7cc2b043bc3f1e8139e807528c8041c15924a411	net tcp increase tcp_mib_outrsts even though fail to alloc skb because tcp_mib_outrsts is an important count so always increase it whatever send it successfully or not now move the increment of tcp_mib_outrsts to the top of tcp_send_active_reset to make sure it is increased always even though fail to alloc skb
979acd5e18c3e5cb7e3308c699d79553af5af8c6	arm64 kvm fix page tables unmapping when using pages we only have two levels of page tables meaning that pgd pud and pmd are fused in this case trying to refcount puds and pmds independently is a a complete disaster as they are the same we manage to get it right for the allocation stage2_set_pte uses but the unmapping path clears both pud and pmd refcounts which fails spectacularly with page tables the fix is to avoid calling clear_pud_entry when both the pmd and pud pages are empty for this and instead of introducing another pud_empty function consolidate both pte_empty and pmd_empty into page_empty the code is actually identical and use that to also test the validity of the pud
f8b04746a4ba389d609b5ddcfbf95835c7dfcb31	mtd nand sunxi fix the nfc_ecc_err_cnt macro nfc_ecc_err_cnt is not taking into account the case when the nand chip contains more than __number__ ecc blocks nands with pages
8fa06c902ac91633b3354974f2a23668bb932067	staging iio cdc use octal permissions instead of symbolic fix checkpatch warnings symbolic permissions are not preferred consider using octal permissions
b5b97f34d1862ecde0193b7cbdfc59a3714433cf	media pvrusb2 use v4l2_s_ctrl instead of the s_ctrl op this op is deprecated and should not be used anymore
1dacf194b1468546a5715db58cbb65d50b598482	irqchip irq-armada-370-xp use proper return value for the hook of struct irq_chip is supposed to return one of irq_set_mask_ok or irq_set_mask_ok_nocopy however the code currently simply returns __number__ this patch fixes that by using irq_set_mask_ok which tells the irq core that it is responsible for updating note that this patch does not cause any change to the compiled code as irq_set_mask_ok has the value __number__ this is therefore just a simple cleanup link
3515a9a20abc9248beadea0af468f753d67a9965	drm rcar-du dont initialize field the field is set by drm_send_vblank_event theres no need to preinitialize it
08dec56ee29f06b4fbdf5f5b1b3d2c2397aabe17	usb musb remove a bit of indentation and use dev instead of
aadd0132c5ac794415690b5ef95fd4da986fec78	staging comedi ni_tiocmd use helpers use the new helpers in the step __number__ tests of ni_tio_cmdtest note that only has one trigger source so the extra test is not required
661a6384f85fd2229b4e14229d5479ab1a1c1322	staging xgifb rework conditions in xgi_setattregs rework some conditions to reduce indentation and fix style warnings
b966087b5145e044b033ea6bb6c16a3b5dc4c48e	mips fix warning when including with the gic_send_ipi_mask function declared in takes a struct cpumask argument but is only included within an config_smp move the gic_ function declarations within that too to fix warnings during build such as in file included from warning struct cpumask declared inside parameter list enabled by default extern void gic_send_ipi_maskconst struct cpumask unsigned int action patchwork
fec8292d9cb662274b583c5c69fdfa6932e593a5	ipv4 use calculated neigh instead of re-evaluating
13c822f6d468ca5a16da4d9432b067d54245c5b9	net mediatek fix stop and wakeup of queue the driver supports __number__ macs both run on the same dma ring if we go the tx rings threshold value we always need to the queue of both devices not doing to can cause tx stalls and packet drops on one of the devices
06ae115a1d551cd952d80df06eaf8b5153351875	rcu avoid having just-onlined cpu resched itself when rcu is idle cpus set when coming online to resolve races with grace-period start however this means that if rcu is idle the just-onlined cpu might needlessly send itself resched ipis adjust the online-cpu initialization to avoid this and also to correctly cause the cpu to respond to the current grace period if needed
a35f60031976d8b9930a2d32ebfdecd82d538066	media s5p-jpeg return error immediately after get_byte fails when parsing jpeg header s5p_jpeg_parse_hdr function should return immediately in case there was an error while reading a byte
30cd10c466a26c215e2a10b07d8a9c7e94ed519c	staging wilc1000 rename puservoid in cfgscanresult function this patch renames puservoid to user_void that is third argument of cfgscanresult function to avoid camelcase
200757f5d7c6f7f7032a0a07bbb8c02a840bbf7d	disable primary plane if we fail to reconstruct bios fb v2 if we fail to reconstruct the bios fb because the fb is too large well be left with plane state that indicates the primary plane is visible yet has a null fb this mismatch causes problems later on for the watermark code since weve failed to reconstruct the bios fb the best solution is to just disable the primary plane and pretend the bios never had it enabled v2 add intel_pre_disable_primary call maarten
7d3777d1069137800cdd1420a6c75cd94151d877	olpc use specifier instead of passing direct values the specifier allows to dump small buffers in hex format lets use it instead of passing direct values via stack
b977d305ad20e05212c0ded2a7ef90e411edc1b3	mwifiex fw download does not release sdio bus during failure
5895d08f6ff2175dabc373dada7d1bfa26123fc9	disable sync lost interrupt if it fires on every frame disable the sync lost interrupt if it fires on every frame for __number__ consecutive frames in a row this is relatively sure sign of the sync lost interrupt being stuck and firing on every frame even if the display otherwise appears to work ok
3c1447620401294b81e34bec7195f803c749bb91	mfd enable dt probing of the db8500 prcmu this patch adds the correct compatible string for use during device tree population without it the db8500 prcmu will not be probed
654a01b78846b96527263acb2fc373371c281896	lightnvm fix error handling according to error handling in this function it is likely that going to out was expected here
ae481cc139658e89eb3ea671dd00b67bd87f01a3	i2c rcar fix resume by always initializing registers before transfer resume failed because of uninitialized registers instead of adding a resume callback we simply initialize registers before every transfer this lightweight change is more robust and will keep us safe if we ever need support for power domains or dynamic frequency changes
e6132fc9ad90045f676f1838360af5a6bd789ecd	staging comedi s626 rename ai_continous rename the ai_continous member of struct s626_private to ai_continuous
7433a49010fbb637de6ce14080fd89067156ccb7	ath6kl fix open parenthesis alignment in ath6kl_sdio_suspend check alignment should match open parenthesis
88c9d47aa4f7ee9f086f6fcb7e7b6a59e3380462	regulator max8907-regulator constify regulator_ops structure declare regulator_ops structure as const as it is only stored in the ops field of a regulator_desc structure this field is of type const so regulator_ops structures having this property can be made const too file size before text data bss dec hex filename __number__ __number__ __number__ __number__ file size after text data bss dec hex filename __number__ __number__ __number__ __number__
4991e7251ed951a5f33faf25912e9db416306309	romfs do not use directly remove direct usage of instead just call mtd_get_unmapped_area which will return if the function is not implemented and then test for this code we also translate to because this return code is probably part of the kernel abi which we do not want to break
11df28ab76cd9e98e3e0bbbff8648d0a02509507	gpio-rcar add rcar_gp_pin macro pins are numbered in the r-car family documentation using a bank number and a pin number in the bank as the linux pin number space is linear we need to flatten this by multiplying the bank number by __number__ and adding the pin number the resulting number bear no directly visible relationship to the documentation making it error-prone add a rcar_gp_pin macro to convert from the documentation pin number space to the linear linux space non-trivial rebase on top of sh-pfc r8a7779 dont group usb ovc and penc pins
0fef3c768037169f656fc4ae89cf88ff7175e586	ath9k remove unnecessary operator thermometer __number__ __number__ thermometer x is equivalent to thermometer x for x __number__ updated commit message
aa2e04bcdd4ada9f7a209c964e5e4a41d67ce8f8	staging rtl8712 changed typecast to __le fixed sparse warning changed uint to __le16 and __le32
f31260f9c85f140e0e3fbff6406cd3e05c88907d	staging comedi usbduxsigma absorb usbduxsub_unlink_pwmurbs into caller this function is only called by usbdux_pwm_stop absorb it
ae10e7e8f1c9d021c8daca750d743cc3baa12e6d	asoc core only add platform dai widgets once currently platform cpu dai widgets are created in soc_probe_platform and soc_probe_link_dais remove the extra call in soc_probe_link_dais
a8184003c0bb1d6362c2af76c560b3caae6832cb	dwc_eth_qos fix interrupt enable race we currently enable interrupts before we enable napi if an rx interrupt hits before we enabled napi then the napi callback is never called and we leave the hardware with rx interrupts disabled which of course leads us to never handling received packets fix this by moving the interrupt enable to after weve enable napi and the reclaim tasklet
c6aa74d546ccb94c99a1e95fb461f8b0e9410a3e	net hisilicon fix warnings warning ptr_err_or_zero can be used use ptr_err_or_zero rather than ptr_err generated by
30ad3cf00e94f4a77775d851de15549099f0224e	clk renesas rcar-gen3-cpg always use the r-car gen3 driver uses a mix of and to access the clock registers settle on the generic
4fc6d239ee5640909932c47f3c7b93dd8e415fea	revert at803x fix for sgmii link this reverts commit suspending the sgmii alongside the copper side made the at803x inaccessable while powered down it cant be re-probed after suspend
bd3ad6a4fcc9090fc7a493d5864d331d63d5c27a	omapdss dsi add omap5 dsi module ids add omap5 dsi module id support to the omap dsi driver
7cdfbc74c8820cd33367fb3d61edcbe9829a06c5	sparc32 beautify srmmu_inherit_prom_mappings
1ce08c27d1098512208a32e01aad0f80f615602d	staging vt6656 fix spaces and char limit this is a patch to to fix space and char limit warning found by checkpatch tool
fdaf13083817a2240ea7569658760086c880bdc2	arm exynos add __init attribute to nuri_camera_init s3c_set_platdata is defined with __init attribute hence all functions referencing this function should also be defined with __init attribute nuri_camera_init is referenced only in __init nuri_machine_init thus this change wont put any additional constraint on the usage of nuri_camera_init
e44f1f4c04f273469b2a396f5f0fe03b5bb373d2	usb phy msm make phy_reset clk and reset line optional this patch makes the phy reset clk and reset line optional as this clk is not available on boards like ifc6410 with apq8064
21a11fff7c0d53abf1d80cd003202e8a7a1c80a5	handle chv in vlv_set_rps_idle move the chv check into vlv_set_rps_idle to simplify the caller a bit
8aea3ff411b2ce8fe7b46644298ed243a920eb24	xfs fix m_agirotor reset during ag selection xfs_ialloc_next_ag currently resets m_agirotor when it is equal to m_maxagi if __number__ but if for some reason changes to a lower value than current m_agirotor this condition will never be true causing m_agirotor to exceed the maximum allowed value m_maxagi this implies mainly during lookups for xfs_perag structs in its radix tree since the agno value used for the lookup is based on m_agirotor an out-of-range m_agirotor may cause a lookup failure which in case will return null as an example the value of m_maxagi is decreased during remount process case where ive found this problem
3d64f54dd0de57bdbcde4b91495fb8e02c620762	hid wacom move unit and unitexpo initialization to wacom_calculate_res that is where they
d1d67714a4ece3c1438c9d7def324ee0424e7cbd	greybus spi use timeout request send operation when transfer speed is too slow less than the operation can take longer than the default greybus timeout because of this we need to use the request_send_sync_timeout and calculate the correct timeout for each operation
a5cb9b391d99bd9fb37891daa0cb52cc5f7b76bc	staging rtl8192u deleted rtl8192_set_mode function in this patch delete the rtl8192_set_mode function that is not used in anywhere in the driver fix the following sparse warning in warning symbol rtl8192_set_mode was not declared should it be
377d8f5c3ef3e1b90db4e1f9faa01d0b0036ea52	iser-target remove redundant call to isert_conn_terminate we are calling session reinstatement wait_conn will start connection termination
2226013972da1ec0a2aeb13a684180bb2b50e0f3	clk sunxi fix some calculations some divisor calculations were misrounded causing higher than requested rates on some clocks fix them up using div_round_up and replace one homebrew instance of it as well with the right macro
98b5afd833e8b9549418296ae2e02f273b0e7b01	staging most remove unnecessary cast on void pointer void pointers do not need to be cast to other pointer types the semantic patch used to find this expression x e type t identifier f t t t e
4930521ae10fd28ebc713107fd243c8044a95415	rcu silence compiler array out-of-bounds false positive it turns out that gcc __float__ warns on array indexes being out of bounds unless it can prove otherwise it gives this warning on some rcu initialization code because this is far from any fastpath add an explicit check for array bounds and panic if so this gives the compiler enough information to figure out that the array index is never out of bounds however if a similar false positive occurs on a fastpath it will probably be necessary to tell the compiler to keep its array-index anxieties to itself markus trippelsdorf
559b46990e7635758d7350a4385d63682b181ed1	gpio pca953x fix an incorrect lockdep warning if an i2c gpio multiplexer is driven by a gpio provided by an expander when theres a second expander using the same device driver on one of the i2c bus segments lockdep prints a deadlock warning when trying to set the direction or the value of the gpios provided by the second expander the below diagram presents the setup bus segment __number__ devices linux i2c mux bus segment __number__ mux gpio devices gpio expander __number__ gpio expander __number__ the reason for lockdep warning is that we take the in pca953x_gpio_set_value or pca953x_gpio_direction_output and then come right back to pca953x_gpio_set_value when the gpio mux kicks in the locks actually protect different expanders but for lockdep both are of the same class so it says possible unsafe locking scenario cpu0 deadlock may be due to missing lock nesting notation in order to get rid of the warning retrieve the adapter nesting depth and use it as lockdep subclass for
d35abdb28824cf74f0a106a0f9c6f3ff700a35bf	hold task_lock around checks in keyctl
99a3b15572499e31bebc70d3d50bc13c0c49cbac	sh mach-rsk remove unnecessary mtd partition probe specification the cmdlinepart parser is already supported in the default probe
e8b4668937c4892685b970a94de851c5fdd27571	media rtl28xxu constify demod config structs optimize a little bit from data to text
e83d6955fe422f120b0e98e4f02496af89845eef	correctly initialize last use of flow counters currently last use timestamp is initialized to zero this is not the expected value by higher layers such as when we do tc action offloading to fix that set it to the current time when the is offloaded this is the same behaviour of non-offloaded tc actions
e7d4b18cbebc635fafd634688bbf66c59912879f	fix __rcu warnings detected by sparse with sparse identified references which did not specificy __rcu in
a7cfaf165ed0f0b1e5e8636f9f28843b2b90139a	serial serial_core perform null checks for ops doing the following uart sequence on a platform causes a kernel crash due to null pointer dereference echo echo fix this problem by adding null checks prior to calling ops
1fa1bcc02c158bc8a802907cc01dfa33663ec16c	iwlwifi mvm print scanned channel list on scan iteration complete notification when receiving scan iteration complete notification print a list of the channels that have been scanned in this iteration this is useful for debugging
cf508f4496f7dc7c162a8ac4440165d466f68d4b	compal-laptop use devm_kzalloc to allocate local data structure reduce code size and simplify error path
c8eedbd107cc73d6dfb5f8df2307c43cf27b0107	staging octeon-usb dont poll interrupts early dont poll interrupts before we have registered the hcd
6e5b587d2f4271a1a4a47e3169db7157aefc31ed	handle open o_create mdsthreshold
39039eb31c6e5252e25ec6336d92ddef938ccafa	clocksource vt8500 remove deprecated irqf_disabled this patch removes the use of the irqf_disabled flag its a noop since and it will be removed one day dlezcano slightly changed the changelog
8b8f347d3a4859d22567f3b8e5bb4a69b1089739	serial pl011 add console matching function this patch adds function pl011_console_match that implements method match of struct console it allows to match consoles against data specified in a string for example taken from command line or compiled by acpi spcr table handler
6ad6c01fa74f649722eeca7308dc1fc4e43235cd	iwlwifi mvm rs fix tpc action decision algorithm decreasing tx power is allowed only when success ratio is above the threshold defined in the algorithm add this condition
9cb516bdd867123411e844617931387bcd3d8e69	staging bcm fix checkpatch errors this patch fixes the following checkpatch errors error space prohibited after that memcpypvoid error space prohibited after that pvoid error space prohibited after that memcpypvoid error space prohibited after that pvoid
acd316248205d553594296f1895ba5196b89ffcc	acpi-cpufreq add quirk to disable _psd usage on all amd cpus to workaround some windows specific behavior the acpi _psd table on amd desktop boards advertises all cores as dependent meaning that they all can only use the same p-state acpi-cpufreq strictly obeys this description instantiating one cpu only and symlinking the others but the hardware can have distinct frequencies for each core and powernow-k8 did it that way so in order to use the hardware to its full potential and keep the original powernow-k8 behavior lets override the _psd table setting on amd hardware we use the siblings table as it matches the current hardware behavior
cc33a303f1c155cf0147964586bb80fa732d8a21	mm highmem remove useless pool_lock the pool_lock protects the page_address_pool from concurrent access but access to the page_address_pool is already protected by kmap_lock so remove it
719ea79e330c5e1a17fb7e4cf352a81e4c84cff5	fix up locking in slightly we should be holding the in shatter_huge_page since we are modifying the kernel page tables then only if we are walking the other root page tables to update them do we want to take the pgd_lock add a comment about taking the pgd_lock that we always do it with interrupts disabled and therefore are not at risk from the tlbflush ipi deadlock as is seen on x86
464f29a21792e0e506d936d147beea72a5f8e904	max8903_charger allow platform data to be __initdata platform files may have declared __number__ platform data as __initdata this patch removes the dependency on pdata pointer so that using __initdata on pdata will not incur errors note that such error does not incur section mismatch warning in at least some compilers
98de59bfe4b2ff6344d9ad8e5296f80de5dcc5b6	take calculation of final prot in security_mmap_file into a helper
8532e3439087de69bb1b71fd6be2baa6fc196a55	remove rcu annotation from pointer arithmetic evaluating is simple pointer arithmetic so it does not need rcu annotations no dereferencing is happening also enhance the comment to explain that rdev in that case is not actually a pointer to an rdev
265d3b55ffdb5e9cf74fd85e2a841b04a82f3355	media ad9389b set is_private only after successfully creating all controls is_private was set right after creating each control but the control pointer might be null in case of an error set it after all controls were successfully created since that guarantees that all control pointers are non-null
5262d035ef260c3417254b2309892bba013dcab7	staging comedi ni_660x fix memory barrier without comment fix the issue move the memory barrier to a better place
463543ac2effaeb2b524f0a0a92f2413c23998ca	alsa fireworks use u32 type for be32_to_cpup macro in former commit snd_efw_command_get_phys_meters was added to handle metering data the given buffer is used to save transaction result and to convert between endianness but this causes sparse warnings warning incorrect type in argument __number__ different base types expected unsigned int usertype got restricted __be32 usertype this commit fixes this bug
f7e180222b973a0b363564b281a314276cb2b594	clk rockchip add clock-id for rk3036 emac pll source clock suitable plls for the emac on the rk3036 are difficult to find and one of them is the continuously changing apll so in most cases it will be necessary to select a pll manually so add a clock-id for it
b4481934167430d82ea9c857cf95276460e4b607	acpi remove unused osc_pci_native_hotplug osc_pci_native_hotplug is completely unused so remove it no functional change
f83be4c3f69762e1fc736e375b04e5c22b3ddceb	phy core fix error checking in devm_phy_optional_get dont pass valid pointer to ptr_err use ptr_errphy only when is_errphy is true
77f486c8bb39546fe7e574b6ec371e83fe772ee5	mwifiex update tx_pkts_queued for requeued packets and ralists total_pkt_count should be updated in synchronization they were not correctly updated in mwifiex_send_processed_packet
5c541b884c09559723f426af2391ab07a4ca10e0	arm tegra add initial support for tegra114 soc add new tegra __number__ soc support
6ae009a8ba512d5b07386bbb1172cfd7a02986aa	media sta2x11_vip fix video standard handling this device supports v4l2_std_all but its check for standards is broken as ntsc is not the only standard that uses
d1d07813bb3e2e79c6e8a026d908a3482ebd7a17	ath9k add new mci configuration parameters several new mci parameters need to be handled for new chips add them
7fd3ecad3f768fd2b39fc4db12044437fbf5d735	gpu host1x mipi add tegra132 support while tegra132 has the same pads as tegra124 some configuration values need to be programmed slightly differently
a348cd5fd85dbca7260ef865c5def85929932861	hopefully fix selection of mode on dp outputs i have a very limited number of traces available for dp on but these values produce the same as the binary driver on a confirmed edp panel and a confirmed edp panel retina mbp its interesting that the bitfield values also match the mode_ctrl values that control the same thing on
2524490c8900e9b0747b16f070de58c8850793e8	media staging st-cec use cec_get_drvdata use helper function to get driver private data from cec adapter
d2b7f4c4293ac16d33f4da5c8e9beb6427239285	unnecessary space before function pointer arguments removed unnecessary space before function pointer arguments
06e305f1e377a6a4e658bd165e20af4c099fb76a	greybus svc use macros for numbers we have already defined macros for svcs numbers lets use them
ba4dd156eabdca93501d92a980ba27fa5f4bbd27	arm64 kvm survive unknown traps from guests currently we bug if we see an value we dont recognise as configurable are added to the architecture controlled by bits respectively with associated synchronous exceptions it may be possible for a guest to trigger exceptions with classes that we dont recognise while we cant service these exceptions in a manner useful to the guest we can avoid bringing down the host per arm ddi page d7-1937 ec values within the range are reserved for future use with synchronous exceptions and ec values within the range may be used for either synchronous or asynchronous exceptions the patch makes kvm handle any unknown ec by injecting an undefined exception into the guest with a corresponding ratelimited warning in the host dmesg we could later improve on this with with a new opt-in exit to the host userspace
a81a01f9feab302504c3e43fbece99fd7f578df8	usb musb tusb6010 use platform_device_unregister in tusb_remove platform_device_unregister only calls platform_device_del and platform_device_put thus use platform_device_unregister to simplify the code also the documents in shows that platform_device_del and platform_device_put must _only_ be externally called in error cases all other usage is a bug dpatch engine is used to auto generate this patch
436d99e6c9d44fa8d7632a70cb32291cffc493dd	arm ux500 remove unused snowball_of_platform_devs struct this was left over during a recent clean-up which removed device tree helper structs there is no longer a requirement for it so we can just remove it
0022c6bcb4927c0ad94f9035fd38c123c48e0457	staging lustre client fix mkdir __number__ from dne2 client to dne1 server after dne phase __number__ has been added to client it sends create request to slave mdt dnt1-only server doesnt expect request to slave mdt from client it expects only cross-mdt request from master mdt thus if dne2 client tries to mkdir __number__ on dne1 server then lbug happened this patch adds obd_connect_dir_stripe connection flag check on client side if striped directories are not supported by server then create requrest is sent to master mdt intel-bug-id xyratex-bug-id mrp-2319 reviewed-on
99e8325f55f2dfea32430fd71a546485a2aedbae	input tsc2005 convert driver to use simplify the driver by using managed resources for memory allocation of internal structure input device allocation and irq request
c702534a23d61deaa0565ef0495ab866c06c4325	ath10k enable vht for ibss enable vht support for ibss while and wpa_supplicant already support this in my test env qca988x i get udp ath10k-1 ath10k-2 server speed __number__ tcp ath10k-1 ath10k-2 server speed __number__ during tests i used wpa_supplicant latest git version which already support ibss vht and choose highest available bw also tested with qca6174
51f60b8b6979da361c97602d6b6df3c3f72c7c4c	ath10k remove redundant error check the check on ret for an error is redundant because it is already been checked for non-zero earlier on and ret is never non-zero at this point fix this by removing the redundant check and error message detected by coverityscan logically dead code
3ae45a27df74358b4bcd3d5a67e47ad734a48945	acpi make seemingly useless check in more understandable there is a seemingly useless check in added by commit bc73675 acpi fixes a false alarm from lockdep which really is necessary to avoid false positive lockdep complaints document this and rearrange the code related to it so that it makes fewer checks
1276ece32c5d18790e8bcff89e692fd3c1790bab	vfio platform clear irq_noautoen when de-assigning the irq the vfio platform driver currently sets the irq_noautoen before doing the request_irq to properly handle the user masking however it does not clear it when de-assigning the irq this brings issues when loading the native driver again which may not explicitly enable the irq this problem was observed with xgbe driver
151b75995a5180834a0609dced3d76ab978cae3b	asoc wm8900 fix wrong mask for setting after checking the datasheet i think what we want to do here is to clear the wm8900_reg_dacctrl_aif_lrclkrate bits and then or with div value
43709ba0d828b3706ace6980d875b762f90ce472	enabling debugfs for valleyview forcewake counts forcewake counts for valleyview are not exposed throgh debugfs exposing with this change
dcbff15a601b544c61e5f33c83576b1bb89c2130	drivers gpu mark function as static in mark functions as static because they are not used outside the file this eliminates the following warnings in warning no previous prototype for warning no previous prototype for
3996ae3482935fb531e522b3f23248a6581015a8	staging dgnc fix logical continuations fix warning about logical continuations should be on the previous line
90e41f9dc75b47ab94e2191e4c86aa8259699a33	hsi hsi fix error path cleanup on client registration hsi client structure should be freed on error path after calling device_registration by dropping a reference to it
66f3b913e68e8e62bd2f9499495eeb6cc81b2662	bluetooth fix userspace compatibility issue with mgmt interface to ensure that old user space versions do not accidentally pick up and try to use the management channel use a different channel number
7c555f06fb6afc9e83b8b375e8cf131cfe355e95	staging comedi ni_labpc dont pass to labpc_counter_set_mode use the comedi_device parameter that is passed to this function to find the so it does not have to be included in each call
c79396c191bc19703df6eb6bbd0f673ed0df6c9d	mmc sdhci prevent card detection activity for non-removable cards do not enable card detection interrupts for non-removable cards
292cbd51ecf85d73195a3e3193937fa770f6ea71	btrfs fix invalid block group rbtree access after bg is removed if we grab a block group for example in btrfs_trim_fs we will be holding a reference on it but the block group can be removed after we got it via btrfs_remove_block_group which means it will no longer be part of the rbtree however btrfs_remove_block_group was only calling rb_erase which leaves the block groups rb_node left and right child pointers with the same content they had before calling rb_erase this was dangerous because a call to next_block_group would access the nodes left and right child pointers via rb_next which can be no longer valid fix this by clearing a block groups node after removing it from the tree and have next_block_group do a tree search to get the next block group instead of using rb_next if our block group was removed
9af2ec45c2d323d5ce35b431bb150c0eb567f19a	cgroup reorder cgroup_migrates parameters cgroup_migrate has the destination cgroup as the first parameter while cgroup_task_migrate has the destination cset as the last another migration function is scheduled to be added which can make the discrepancy further stand out lets reorder cgroup_migrates parameters so that the destination cgroup is the last this doesnt cause any functional difference
ae0bf3a62805fa80c8277dd293d9d9d9b8b4c7c0	greybus arche-apb-ctrl set wake_detect gpio to low initially this patch enables handshaking of ap and svc using wake_detect gpio wd_8a and wd_8b note that wake_detect polarity is active-high so in order to enable handshaking between ap svc we need to set wake_detect gpio to low initially so that driver can send wake_det signal active-high to svc and then svc can send back wake_mod signal active-low and on reception of wake_mod signal driver would bring respective apb out of reset wd_8a apb1 wd_8b apb2
30ab2b034fa87472d700f584e277e3aeb7a84d2c	asm-generic adapt to common implementation several architectures are using a common implementation that appears to have originated with the x86 architecture this common implementation is a bit fuller than the current asm-generic version and has some compile-time checks that should be interesting for all architectures this patch takes the common version and replaces the rather trivial asm-generic version with it as no architecture was actually using this change is rather innocuous it will however allow us to switch at least four architectures over to using the asm-generic version
33f8d75f5771993ef16ed6bd56d7210f54226203	usb musb core fix remote-wakeup resume during resume dont touch bits of power register while restoring controller context these bits might be changed by the controller during resume operation and so will be different than what they were during suspend suspendm bit is set by software during usb global suspend but automatically cleared by the controller during remote wakeup or during resume setting this bit back while restoring context causes undesired behaviour babble interrupt is generated and usb is broken
02d02728ea8bb33dee221d7dcfeb3022d7635927	mfd twl6040 clear the interrupt id register before requesting irq if for some reason the boot loader enabled the audpwron gpio we will have pending irqs to be handled this seams to break twl6040 for some reason leading to non working i2c communication i2c timeouts clearing the intid register after we requested the audpwron gpio and set it to low will ensure that the chip will operate normally in this case as well
8d7763b4332b80028522f8a0d47e6339a13d1fdc	ath9k_hw use register name in place of magic value
97f9010af05c15e0b7e6b4ef6ff8cb0ebb7e7715	mdelay10 considered harmful i missed this myself when reviewing commit author sonika jindal intel.com date tue sep __number__ __number__ check live status before reading edid long sleeps like this really shouldnt waste cpu cycles spinning link cherry picked from commit
99de64984c3a7c9bf56a50e6dcc51006c9485620	of fix of_find_node_by_path assumption that of_allnodes is root of_find_node_by_path is borked because of_allnodes is not guaranteed to contain the root of the tree after using any of the dynamic update functions because some other nodes ends up as of_allnodes reported-by
df1d80a9eb16d98002673f68a7ebbe881f6e6946	simplify bitmap_pos_to_ord the ordinal of a set bit is simply the number of set bits before it counting those doesnt need to be done one bit at a time while at it update the parameters to unsigned int it is not completely unthinkable that gcc would see pos as compile-time constant __number__ in one of the uses of bitmap_pos_to_ord since the static inline frontend bitmap_weight doesnt handle correctly it would behave exactly as if use __bitmap_weight alternatively the last line could be spelled bitmap_weightbuf but this is simpler
efdfa3eda5d7b33c6e3c4f6e66144fcd10ed41a3	xen-pciback use pci_enable_msix_exact instead of pci_enable_msix as result of deprecation of enablement functions pci_enable_msix and pci_enable_msi_block all drivers using these two interfaces need to be updated to use the new pci_enable_msi_range or pci_enable_msi_exact and pci_enable_msix_range or pci_enable_msix_exact interfaces
3dc1e6852115b3163e7dacc76bbcb78ccff29421	gpio rcar add more register documentation
93f599f279ab56b1761c76e53f9753b26aeefe9e	usb gadget s3c-hsotg fix spinlock locking this patch adds missing spinlock locking in s3c_hsotg_complete_setup function and unlocking for gadget setup call
a1a4caf41ed8154c4e7b75b4e12c1a7d851e2137	usb phy msm make phy_reset clk and reset line optional this patch makes the phy reset clk and reset line optional as this clk is not available on boards like ifc6410 with apq8064 phy-reset clk is only used as argument to the mach level callbacks so this patch adds condition before clk_get calls so that the driver wouldnt fail on socs which do not have this support
9fb163f49ed3b3836f6835f06a5ef9afbabb9c24	staging iio simplify null pointer condition replace null comparrison with its shorter form done with coccinelle expression e null
ee226ce19557cd5dce12f818462c9c331570cac6	asoc switch over to use snd_soc_register_component on davinci vcif
e873088f2939dcd60721183ce6802515afc43ceb	nfsd4 minor nfs4_setlease cleanup as far as i can tell this list is used only under the state lock so we may as well do this in the simpler order
77e587f67616219f7f94109afed4bf5bd2d01ad2	remove redundant call to iio_sw_buffer_preenable the equivalent of iio_sw_buffer_preenable is now done in the iio buffer core so there is no need to do this from the driver anymore
f951e51003860705fc9fc663fbce90f8263a6804	unfreeze vf pe on releasing it when releasing pe for sriov vf the pe is forced to be frozen wrongly when the same pe is picked for another vf it wont work anyhow the patch fixes the issue by unfreezing not freezing the vf pe when releasing it
28c6a39b3367f29462cd586785dc445cd6b5ac23	x86 intel-mid return proper error code from get_gpio_by_name this patch cleans up get_gpio_by_name to return an error code instead of hardcoded link
5fdd31f920a5ec8873929750d83ffa777bed6100	ixgbe add missing code for enabling overheat sensor interrupt this change adds a small bit of missing code for enabling the overheat sensor
4f8d9f3ce0e52adf2cb4e0661f06ef8cfdc97cfe	r6040 add delays in mdio polling loops on newer and faster machines vortex x86dx using the r6040 driver it was noticed that the driver was returning an error during probing traced down to being the mdio bus probing and the inability to complete a mdio read operation in time it turns out that the mdio operations on these faster machines usually complete after iterations which is bigger than __number__ mac_def_timeout and results in spurious timeouts depending on the system load update r6040_phy_read and r6040_phy_write to include a __number__ micro second delay in each busy-looping iteration of the loop which is a much safer operation than incrementing mac_def_timeout
d2182a660808d9053a605e3ebc8c46a323ec6e5d	dont register hdmi connectors for edp ports on if we determine that a specific port is edp dont register the hdmi for it the reason being that we want to disable hpd interrupts for edp ports when the display is off but the presence of the extra hdmi connector would demand the hpd interrupt to remain enabled all the time
d0ed74f38e778bc83d240e7b6aee146789fa0df8	ath10k share board file loading code across fw apis theres no need to implement the same thing twice reduce code duplication
8d5bc1a6ac40885078bbb0552b4283a3e58c462e	arm dt only print warning not warn on bad cpu map in device tree due to recent changes and expecations of proper cpu bindings there are now cases for many of the in-tree devicetrees where a warn will hit on boot due to badly formatted nodes downgrade this to a pr_warn to be less alarmist since its not a new problem tested on arndale cubox seaboard and panda es panda hits the warn without this the others do not
25be7fe2be879a96920cc74809e1bff1b0ae0bac	hid uhid avoid magic-numbers when setting strings avoid hard-coding the target buffer sizes and use sizeof instead this also makes us future-proof to buffer-extensions later on
40465257ac4159e9ebfba10ee502e795b917da76	f2fs wait for discard completion after submission we dont need to wait for each discard commands when unmounting the image
659e0bcaebc4ca36e64eac6e9f39c1904b17472c	sctp keep fragmentation point aligned to word size if the user supply a different fragmentation point or if there is a network header that cause it to not be aligned force it to be aligned fragmentation point at a value that is not aligned is not optimal it causes extra padding to be used and has just no pros v2 make use of the new word_trunc macro
1889b0e7efe8373793069bd3deb7702a51e6f2a5	set modified when ifla_linkmode is updated the only effect of this patch is to print a warning if ifla_linkmode is updated and a following change fails
6936e1f88d233444ac8010d9b6bfaac3ba698ee2	gpio stmpe write int status register only when needed on datasheets its mentionned writing in interrupt status register has no effect bits are cleared when reading
de9a2165a576ca262d8cb68d8c9c016b8ab3678f	net stmmac replace hardcoded function name by __func__ some printing have the function name hardcoded it is better to use __func__ instead
757f9a3e5b8a812af0c213099a5b31cb423f4d3c	move check of intel_crtc_cursor_set_obj out move check inside intel_crtc_cursor_set_obj to intel_check_cursor_plane we only use it there so move them out to make the merge of intel_crtc_cursor_set_obj into intel_check_cursor_plane easier this is another step toward the atomic modesetting support and unification of plane operations such of fb objects on i915 v2 take villes comment move assignment a bit down in the code v3 take villes comment kept only the restructuring changes the rest of the code was moved to a separated patch since it is a bug fix we werent checking sizes when the fb was the same danvet fixup commit message mixup
10bd21c0547ba2834374ccdddbc6a984eeed432c	arm mmp fix missing cascade_irq in irq handler while supporting board in non-dt mode isnt assigned with correct value
ce2ae9e3e6a152866a33972c966f8315aab2cb1d	input cyapa add acpi hid cyap0002 for gen6 devices add cytp0002 to the list of acpi hids recognized by the driver
97b95c117020461874de44ac612892f281ed3e31	spi rspi use u8 for register values
90ca2979ed9d69d8b1b729cb2e9d8e9874fad5f5	arm s3c64xx reduce residency requirement for cpuidle wfi mode entering and leaving wfi is really cheap so theres no reason to have much of a residency requirement for the state lower it to
95e93132e4df461b6344256ae7f16d3c28a4c0f3	backlight omap1 use pr_info instead of printk use pr_info instead of printk to allow dynamic debugging the pr_fmt prefix for pr_ macros is used also fix checkpatch warning as below warning prefer to printkkern_info use kbuild_modname per joe
0eae2747ec1ddcef5018827bce8f7d33b7d920e1	btrfs move commit out of sysfs when changing features
491728746b500b22f384cb1d0aba76f7c55a9269	cfg80211 reg remove unused function parameter
8aeb376ca0fe61038166c3b8243c678addb80abf	nfs is set only on the last step
69a6b9b1b6aec645d2efa23db2c15ed287e672dd	dont check if nb_bytes is __number__ it is an unsigned int so that check is pointless
7897bd00f6b5e69443ceffc7900faaafc23455b0	staging wilc1000 use kmemdup in host_int_add_station this patch replaces kmalloc followed by memcpy with kmemdup
71abb1339436160b6ab0ae2f816a4046c7328f28	mmc dw_mmc fix error handling on response error even if response error is detected in case data command data transfer is continued it means that data can live in fifo current handling just breaks out the request when seeing the command error this causes kernel panic in dw_mci_read_data_pio null and also fifo should be guaranteed to be empty unable to handle kernel null pointer dereference at virtual address __number__ from from from from from from from from exception stack0xef0b1c00 to __address__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __address__ from code __number__ end trace kernel panic not syncing fatal exception in interrupt
db00348471b3858d74486e3fbb85922be5340ca6	brcmsmac handle non pci devices in the phy code some code in should just be run if this is a pci based device add the condition again which was removed in commit commit author roland vossen broadcom.com date mon aug __number__ __number__ staging brcm80211 removed unused bus code from softmac
e2f6aac6a88138851f81372c5cecc9562aab9352	mmc sirf fix sdhci_pltfm_init sequence patch mmc sdhci add size for caller in changed the interface for sdhci_pltfm_init while patch mmc sdhci-sirf add mmc host sdhci-pltfm based driver for sirf socs added a new driver with the old interface this changes the sirf driver to use the new interface avoiding one warning and simplifying the init sequence since were here already this also adds an error path for failed clk_prepare_enable
cf7a6b2d5bd73acd8e3a78cf03259489bd83498a	mac80211_hwsim clean up netlink exit code theres no need to print a message and genl_unregister_family cant really fail so remove the error message there as well
2803ac7bf20129365ff7b774adf63e0fd35c4221	staging ion make sure all clients are exposed in debugfs currently if multiple ion clients are created with the same name only the first one shows up in debugfs rectify this by adding a monotonically-increasing serial number to the debug names of ion clients jstultz minor commit subject tweaks
d0e224f9963b79610850b2a10622182176658022	omapdss fix rounding when calculating fclk rate clk divider fix rate calculation for fractional rates patch and similar for ti specific divider fixes the clk-dividers rounding this patch updates the dss driver to round the rates accordingly this fixes the dsss warnings about clock rate mismatch and also fixes the wrong fclk rate being set
5a4e33a34fc27d6b54200bde187766e049ae876b	enable pte encoding the caching options for page table entries have remained the same as cherryview this patch fixes it so the right code path is taken on bxt v2 fix up commit message mike
b61d6d40323997d9da3b95ecce2570f0b782a07f	asoc cs4270 move regulator acquisition to i2c probe this is better style since it has us obtaining all resources before we try the asoc probe this change also fixes a potential issue where we dont enable the regulators before trying to confirm the device id which could cause a failure during probe in some system configurations
f66fedcb723a9f118170200e21dbabb305f8c702	perf probe fix regression of variable finder fix to call convert_variable if previous call does not fail to call convert_variable it ensures ret is __number__ however since ret has the return value of synthesize_perf_probe_arg which always returns positive value if it succeeded perf probe doesnt call convert_variable this will cause a segv when we add an event with arguments this has to be fixed as it ensures ret is greater than __number__ or not negative this regression has been introduced by my previous patch link
bda3fdaa0f43fc7faaf07b4fc4f2bc4daea12451	use drm_gem_mmap_obj to implement dma-buf mmap the dma-buf mmap code was copied from the gem mmap implementation replace it with the new drm_gem_mmap_obj function
f6a6cb1afe74d6ccc81aa70aa4ac3953762e7e6e	remove scratch page left overs commit xen remove scratch frames for ballooned pages and m2p override removed the use of the scratch page for ballooned out pages remove some left over function definitions
6cca13bdf5a5d561a855259689874e0c7266eec3	perf probe improve error message when is on inlined function perf probe shows more precisely message when it finds given target function is inlined without this fix probe return probe must be on the head of a real function debuginfo analysis failed error failed to show vars with this fix probe failed to find because getname_flags is an inlined function and has no return point debuginfo analysis failed error failed to show vars link
2c3dd4ff595e604cd4c4c51cff7a208f23148c2d	ceph eliminate sparse warnings in fs code fix the causes for sparse warnings reported in the ceph file system code here there are only two and theyre sort of silly but theyre easy to fix this partially resolves
af66df0f53b9120437556d8eb00d70a36e791258	nfc digital set the command pending flag there is a flag in the command structure indicating that this command is pending it was checked before sending the command to not send the same command twice but it was actually never set this is now fixed
a9517d0f43832d787a4a0348163d659641bfd83c	rtnetlink remove ndo_get_slave no longer used api bond-specific can be removed now this is now handled in a generic way in rtnl_link_ops
a08ec374aa00ba6736cd56df6e3027d3fd29f11d	staging comedi pcl711 convert boardinfo flags to bit-fields to save a bit of space convert the is_pcl711b and is_8112 flags in the boardinfo to bit-fields
5a7862e83000ccfd36db927c6f060458fe271157	arm64 tlbflush avoid flushing when fullmm __number__ the tlb gather code sets when tearing down the entire address space for an mm_struct on exit or execve given that the asid allocator will never re-allocate a dirty asid this flushing is not needed and can simply be avoided in the flushing code
4af0e21caf8e676e57ea27d7cce3426e473e498c	nvme fix device cleanup on initialization failure dont release block queue and tagging resoureces if the driver never got them in the first place this can happen if the controller fails to become ready if memory wasnt available to allocate a tagset or admin queue or if the resources were released as part of error recovery
45db2194ac7c91a96b18be32c6d7f12a8695868a	make the init clock gating function skylake specific well gather cross-gen9 in a separate function later
782c3b732889b5fbce796a4b548d47a43e4d8c42	greybus gpio print payload size on mismatch print expected-payload-size actual-payload-size when the size doesnt match for requests received by the module this gives more details required for debugging the issue
9d8e7d0dacf09ddac7e617d17dbeec6af56e81e8	fix a memory descriptor leak in an error path if an error occurs after srp_fr_pool_get succeeded and before the descriptor is stored in srp_map_state desc then srp_unmap_data wont free the newly allocated memory descriptor hence free the descriptor explicitly
4321dc8dff356cdc852936fcfb443463b504890d	arm am43xx hwmod add rtc hwmod the patch registers the rtc hwmod on am437x chips the rtc module is physically present on the am438x soc used on am43x-epos-evm but it is permanently disabled a secure rtc is used instead on these devices where needed hence adding it selectively using a separate list to get rtc module functional on the other am43x socs used on am437x-gp-evm and am437x-sk-evm
14d33d384693eb6083396199de516fdef320f7af	omapdss correct dispc_irq bit definitions for lcd3 the dispc_irq bit definitions pertaining to channel lcd3 as dispc_irq_vsync3 dispc_irq_sync_lost3 dispc_irq_acbias_count_stat3 and dispc_irq_framedone3 which were incorrectly set in previous lcd3 patches have been corrected here
095be64ebf112a7427490e360db4505ebd39a212	b43 lcn-phy rewrite table at the end of init this is not implemented in brcmsmac but was noticed in newer wl can be workaround for some hardware bug
a3c06a389751192fdcbcdd8bba57bdb856eafe68	dm raid enhance attempt_restore_of_faulty_devices to support more devices attempt_restore_of_faulty_devices is limited to __number__ when it should support the new maximum of __number__ when identifying any failed devices it clears any revivable devices via an md personality hot remove and add cylce to allow for their recovery address by using existing functions to retrieve and update all failed devices bitfield members in the dm raid superblocks on all raid devices and check for any devices to clear in it whilst on it dont call attempt_restore_of_faulty_devices for any md personality not providing disk hot methods raid0 now because such personalities dont support reviving of failed disks
1aed89640a899cd695bbfc976a4356affa474646	mwifiex apply radar flag when ieee80211_chan_radar is set by cfg80211 passive scan must be performed in scan is performed even though flag is set from cfg80211 mwifiex_reg_apply_radar_flags function added in this patch correctly uses radar flag
34f980630f6c135b6735f9fb16079aeb4c21fc18	alsa au1x00 use module_platform_driver eliminate boilerplate code by using module_platform_driver
9d1deb83d489364f8749a3a1ba1689efb07d94b0	dm dont schedule delayed run of the queue if nothing to do in request-based dms dm_request_fn if blk_peek_request returns null just return avoids unnecessary blk_delay_queue
8d7e7ff7359507a37d30d1a54aec4c42f4afb561	bna remove unnecessary cna check change details is always set to __number__ for eth functions remove the check that asserts ioc is in cna mode in bfa_ioc_firmware_lock and bfa_ioc_firmware_unlock in
13e2e556013a543eebd238d1c2759195e3c0c9fc	workqueue fix unbound workqueue attrs hashing comparison workqueue implement attribute-based unbound worker_pool management implemented attrs based worker_pool matching it tried to avoid false negative when comparing cpumasks with custom hash function unfortunately the hash and comparison functions fail to ignore cpus which are not possible it incorrectly assumed that bitmap_copy skips leftover bits in the last word of bitmap and cpumask_equal ignores impossible cpus this patch updates handling such that impossible cpus are properly ignored hash and copy functions no longer do anything special they expect their callers to clear impossible cpus alloc_workqueue_attrs initializes the cpumask to cpu_possible_mask instead of setting all bits and explicit cpumask_setall for unbound_std_wq_attrs in init_workqueues is dropped apply_workqueue_attrs is now responsible for ignoring impossible cpus it makes a copy of and clears impossible cpus before doing anything else
2d3fe01c36a9b881fae89c5bdf4085a4d7d53ae1	nfs fix comparison between ds address lists data_server_cache entries should only be treated as the same if the address list hasnt changed a new entry will be made when an mds changes an address list as seen by getdevinfo the old entry will be freed once all references are gone
8ff875e7f93e900e7a7e78f1c9c05a22b33c27cf	arm mach-omap1 fix omap1510_fpga_init_irq implicit declarations this patch adds a omap1510_fpga_init_irq inline dummy implementations in without this system can lead to issues this was discovered during randconfig which other than config_arch_omap15xx was enabled the leading to the following error cc in function error implicit declaration of function cc1 some warnings being treated as errors make1 error __number__ make error __number__
20ef5d3a23d5aacb85d0a2808d949e3daf83cd20	mips rc32434 fix pci build error in function rc32434_pci_init error rcrc32434_res_pci_io1 undeclared first use in this function note each undeclared identifier is reported only once for each function it appears in make1 error __number__ this problem is included in the following commit commit author joe perches perches.com date thu jun __number__ __number__ treewide convert uses of struct resource to resource_sizeptr patchwork
a56c919f05eb73f6d791cc14992f4b451059b68c	ath9k remove redundant null assignment bf_next is cleared using ath_txbuf_reset in both the callsites of ath_tx_get_buffer
fa7ac9c0fc5418154a6356583f880164cdcaa7f1	staging comedi mf6x4 tidy up subdevice init for aesthetics add some whitespace to the subdevice initialization
472b444eef934eb7e90334efdd7fc7954cfe5132	mtd fix cmdlinepart parser early naming for auto-filled mtd commit mtd core set some defaults when is set attempted to provide some default settings for mtds that a assign the parent device and b dont provide their own name or owner however this isnt a perfect drop-in replacement for the boilerplate found in some drivers because the mtd name is used by partition parsers like cmdlinepart but the name isnt set until add_mtd_device after the parsing is completed this means cmdlinepart sees a null name and therefore will not work properly fix this by moving the default name and owner assignment to be first in the mtd registration process note this does not fix all reported issues particularly with nand drivers will require an additional fix for
0e51fc360f32b3c025e68ad90cd19d3ec8a0dcc6	staging r8188eu fix sparse warnings in sparse displays the following check warning incorrect type in assignment different base types expected unsigned short got restricted __le16 warning incorrect type in assignment different base types expected unsigned short got restricted __le16 warning incorrect type in assignment different base types expected unsigned short got restricted __le16 warning incorrect type in assignment different base types expected unsigned short got restricted __le16
b7dfdea85917909b0b85913a0a727ff9dfd047f7	sc16is7xx implemented set_mctrl add support for manual setting the modem control lines
f9a4ea35b87c28c08134dfc146345f77345a99be	fix serialisation of pipecontrol write vs semaphore signal in order for the mi_semaphore_signal command to wait until after the pipecontrol writing the signal value is complete we have to pause the cs inside the pipe_control with the cs_stall bit
a032b16c27a89bccd63f80a3f353180d2852b898	staging vt6656 rename s_vgetfreecontext to vnt_get_free_context
e97656d03ca0cea888a0b9d382abce8233771f31	rds tcp allow progress of rds_conn_shutdown if the rds_connection is marked error by an intervening fin rds_conn_shutdown runs in workq context and marks the rds_connection as disconnecting before quiescing paths however after all has quiesced we may still find the rds_connection state to be rds_conn_error if an intervening fin was processed in softirq context this is not a fatal error rds_conn_shutdown should continue the shutdown and there is no need to log noisy messages about this event
1c3ac4289a0e4d60cbd4787b4a91de4a0c785df1	bonding send igmp report for its master liang found that in the following topo bonding does not send igmp report when we trigger a fail-over of bonding eth0-- bond0 br0 eth1-- modprobe bonding ifconfig bond0 up ifenslave bond0 eth0 eth1 brctl addbr br0 ifconfig br0 up brctl addif br0 bond0 add into a multicast group like then trigger a fali-over in bonding you can see that parameter resend_igmp does not work the reason is that when we add br0 into a multicast group it does not propagate multicast knowledge down to its ports if we choose to propagate multicast knowledge down to all ports for bridge then we have to track every change that is done to bridge and keep a backup for all ports it is hard to track i think instead i choose to modify bonding to send igmp report for its master changelog v2 correct comments v3 move this check into bond_resend_igmp_join_requests v4 only send igmp reports if bond is enslaved to a bridge
5c213f86417b264b38b279def3363811c2be54f0	convert to idr_alloc convert to the much saner new idr interface use gfp_nowait under spin lock
46140ddf169703ef0538bf00098233b24b2269e8	ath9k for ar9271 chipsets set count __number__ for endless samples not sure why initially provided by ashish patro
7a647b9e4a583d514899b22c5e5fa3a849c8b2a0	staging comedi fix printk issue in this is a patch to the file that fixes up a printk warning found by the tool converted printks to dev_dbg
54bf917ee15f93e631e7d55db47fceb724788c0b	staging octeon-ethernet make global_register_lock static make global_register_lock static to eliminate a sparse warning
eb4d552b933ac59c0c8e0604ff435c5208a82679	arm plat-orion remove deprecated irqf_disabled this patch proposes to remove the use of the irqf_disabled flag its a noop since and it will be removed one day
9d3318f48ce383cdd261719f4fa95c979bdd7ce4	staging greybus camera replace blank spaces with tabstops fix checkpatch warning warning statements should start on a tabstop
e8a5dbc59e5ef7b120635fe8a57643f3bbbd0919	arm oprofile use of arm_get_current_stackframe use the newly introduced api so that fp is correctly referenced from either based on whether we are running in thumb2 mode or not
1f209383f2be94e15e179da3a4cbcfeabcc2efc2	bluetooth check that bind bdaddr type matches connect if a socket was bound to an address type other than such as le we should reject trying to connect it to a address the same applies for binding to and trying to connect to
68fa965dd923177eafad49b7a0045fc610917341	correctly return success from ioctl_privcmd_mmapbatch this is a regression introduced by add privcmd_mmapbatch_v2 ioctl it broke xentrace as it used xc_map_foreign instead of xc_map_foreign_bulk most code-paths prefer the mmapbatch_v2 so this wasnt very obvious that it broke the return value is set early on to and if all goes well the set top bits of the mfns never gets called so the return value is still einval when the function gets to the end causing the caller to think it went wrong which it didnt now also including andres move the ret into the error handling path as this avoids other similar errors in future
206dd69a62a06197b308fa0decfd0b649fcc2811	usb dwc3 generate interrupt on each trb as default option currently in case of isoc interrupt is programmed after each ie trb a trb is programmed against each submitted request from gadget if we do not want to limit the minimum number of necessary request to be submitted from gadget then we must receive interrupt on each trb submission there can be such situation with a gadget working with ping-pong buffer if a gadget does not want to receive interrupt after each request completion then it may set no_interrupt flag
65984ff9d2179a97e5a11aaef1e86fdb276cfad5	um hostfs fix writeback we have to implement and trigger writeback from it otherwise we might lose dirty pages at munmap
b647d4297234e7f5456c16635ca0cdd82b7055db	watchdog pnx4008 fix warnings caused by enabling unprepared clock if common clock framework is configured the driver generates a warning which is fixed by this change warning cpu __number__ pid __number__ at modules linked in cpu __number__ pid __number__ comm swapper tainted g w hardware name lpc32xx soc flattened device tree backtrace dump_backtrace from show_stack from dump_stack from warn_slowpath_common from warn_slowpath_null from clk_core_enable from clk_enable from pnx4008_wdt_probe from platform_drv_probe from driver_probe_device from __driver_attach from bus_for_each_dev from driver_attach from bus_add_driver from driver_register from __platform_driver_register from platform_wdt_driver_init from do_one_initcall from kernel_init_freeable from kernel_init from
4ec2364f4910234030906b3f824b51c0d7065334	rtc update rtc-dev to use y2038-safe time interfaces currently uses y2038 problematic rtc_tm_to_time and rtc_time_to_tm so replace them with their corresponding y2038-safe versions rtc_tm_to_time64 and rtc_time64_to_tm
fd2b79b7bf98cac031c7a4d9ae9669cc3d01a523	sparc32 kill unused defines from
a8d372f171db9b90a64778fbcd9237c9bc256e06	alsa control fix missing volatile flag at creating controls the sndrv_ctl_elem_access_volatile bit flag wasnt properly inherited at creating control elements via snd_ctl_new1
99968e0616b802173ef83a94d3bdefa12c33eba8	nfc pn533 convert to use usb_device macro
967ab6b177ee7111383585639e375d9f67638010	only mark the ctx as initialised after a set_context operation fallout from commit author mika kuoppala linux.intel.com date wed may __number__ __number__ add null state batch to active list undid the earlier fix of only marking the ctx as initialised after it is saved by the hardware during a set_context operation commit ad1d219974a3d13412268525309c5892f6779ae9 author ben widawsky intel.com date sat dec __number__ __number__ set only after rcs jani add reference to the earlier fix in the commit messsage
95a75544cfb1410af721911cd8accdbc1a080b40	media s5p-mfc staticize some symbols in since these symbols are used only in this file they can be made static
1c124c9962b4ee6555fd6179ca318c2ad3a30354	usb uhci check for race in usbcore contains a check for wakeup requests racing with controller suspend this check is going to be moved out of usbcore and into the individual controller drivers where it can apply to all platforms not just pci this patch adds the check to uhci-hcd ironically none of the non-pci platform drivers for uhci-hcd implement nevertheless this change is needed to accomodate the upcoming change to usbcore the patch also removes an outdated check of the root hub state for one thing the pm layer has long been quite reliable about suspending root hubs before controllers for another virtually the same check is also made in theres no point in repeating it
e2a0ba547ba31cd7b217cc948d93e4edc78cbcb1	spi sh-msiof convert to spi core auto_runtime_pm framework
0843f197c46dd3c432a3202de80e8bc1fcb96a6b	batman-adv remove one condition check in batadv_route_unicast_packet it could decrease one condition check to collect some statements in the first condition block
4048da2fa3c8c5088901d2adc4f7b5b5ccc05e79	media anysee add control message debugs
3693d544056b822f7f2454da5acb7eda9471b902	prevent freeing the wrong engine context this fixes a crash when multiple pm engine contexts are created
af33e0ad1bf6e065f05a68f177b99202935ed2cf	input edt-ft5x06 add support for ft5506 ft5506 is essentially the same as other ft5x06 devices other than supporting __number__ support points
d43b1b6f8e5b3219d4d02ea7fadcf67fecf78b1a	cpufreq powernv report pmax throttling if capped below nominal frequency log a critical message if the max frequency is reduced below nominal frequency we already log info message if the max frequency is capped below turbo frequency cpu should guarantee atleast nominal frequency but not turbo frequency in all system configurations and environments so report the pmax throttling with severity when pmax is dipped below nominal frequency
3c6c065a510ed59f7fddabac4be2f932ecfe9275	wrong cast breaks desired pointer arithmetic the address being mapped into a processs memory for notification events was improperly calculated due to cast that was happening too early is a pointer and should have been casted to unsigned long after the pointer arithmetic was done not before as a result processes were looking at the wrong place and not seeing their notification events
29c05b205d4d30248982d5167bb142146db89bd3	gfs2 eliminate unnecessary check for state __number__ in bitfit function gfs2_bitfit was checking for state __number__ but thats impossible since it is only called from rgblk_search which receives only gfs2_blkst_ constants
ba1d6936f6f83927f17a28ecc9cbb989fa0a7e34	bluetooth fix buffer overflow with variable length commands the handler for variable length commands were trying to calculate the expected length of the command based on the given parameter count and then comparing that with the received data however the expected count was stored in a u16 which can easily overflow with a carefully crafted command this can then be made to match the given data even though the parameter count is actually way too big resulting in a buffer overflow when parsing the parameters this patch fixes the issue by calculating a per-command maximum parameter count and returns invalid_params if it is exceeded
9846ec3a48e1ef4be619478d0822467dbfe79ec4	staging comedi cb_pcidas tidy up pci bar4 register defines convert the inline function dac_data_reg into a simple macro rename the defines for the pci bar4 register offsets so they have namespace associated with the driver and convert the offsets to hex
5f314970b25a6960dd056b0038ffc7b88dc2973e	watchdog jz4740 pass device to clk_get in preparation to switching the jz4740 clk driver to the common clk framework make sure to pass the device to clk_get
8eab25108e374403f759dd7de01084a1f3ba6d68	ath9k switch channel after sending beacon
142207f782dd7f174a1e1b954c3a9dd04316bd95	drbd drbd_panic_after_delayed_completion_of_aborted_request the only way to make drbd intentionally call panic is to set a disk timeout have that trigger abort some request and complete to upper layers then have the backend io subsystem later complete these requests successfully regardless as the attached io pages have been recycled for other purposes meanwhile this will cause unexpected random memory changes to prevent corruption we rather panic in that case make it obvious from stack traces that this was the case by introducing drbd_panic_after_delayed_completion_of_aborted_request
aa45950bac01bf9319328e67696cf0b231cec39d	use hlist_for_each_entry use hlist_for_each_entry instead of hlist_for_each to simplify the code link
7d1805e194dc9916dceb683f9763bf7cd7d68c20	ath9k remove useless check in mci reset if we fail to allocate the buffers when initializing mci we bail out properly checking them in ar9003_mci_reset is unnecessary so remove it
cc459f19e32bdc783f9f0ce5c872c1ff399e3e82	scsi lpfc fix log message for mailbox command when no error is detected
6e9b05607fe896627ab7c15efff01b6dcae71a56	asoc intel sst load firmware using async callback we would like the dsp firmware to be available in driver as soon as possible so use the async callback in driver to probe to load the firmware as soon as usermode is up
89827ca9dd6173da7dcc035653bea67fa6ac0cbf	alsa pcm add kernel doc for functions add kernel doc for the remaining undocumented functions
601b515c5dcc00fa71148cd9d2405ea1f70bc9cd	communication framework sending functions the sending part is split in two functions to make sure atomicity of the operations such as the md superblock update
21d19f87d483fbac66ca24863b8c8d52a7ab539d	nfc nci use __nci_request for exported routines since we do not know in which context drivers will call these routines they should use the unlocked version of nci_request __nci_request it is up to drivers to if they need to take the req_lock mutex before calling those routines when being called from the nci setup routine there is no need to do so as is called under req_lock
a326e6dd315ee38c280b7ecf8a0d777952e384cd	team fix return value check in case of error the function genlmsg_put returns null pointer not err_ptr the is_err test in the return value check should be replaced with null test dpatch engine is used to auto generate this patch
144b7b2336443109f921fb00c1fe1b70da885065	staging wilc1000 rename variable gs8rssi this patch renames variable gs8rssi to rssi to avoid camelcase naming convention
5d3f6ef04d65dda92a3573841a7215fb05c347de	mmc wait for card_busy before starting sdio requests some sdio wifi chips will not work properly if we try to start new sdio-rw requests while the device is signalling that it is busy
8b00f46951bed1edd9c5cb9d9adb62d28bbe7623	perf tests fix map_groups refcount test when introducing reference counting for struct thread instances i forgot to remove the synthetic threads from the machines rbtree so that it then the threads would have just one reference and thus the thread__put replacing the thread__delete really turns into a thread__delete __number__ at thread__put time and thus drop the refcount as expected by the this test fix it by calling machine__remove_thread the counterpart of machine__findnew_thread on all the synthetic threads after the checks that involves the rbtree were done before perf test mg __number__ test thread mg sharing start test child forked pid __number__ failed wrong refcnt __number__ __number__ test child finished with end test thread mg sharing failed after perf test mg __number__ test thread mg sharing ok link
975588477220cfb32375ace1caafbdbbb9d75e70	remove leftover hdmi function declarations they are not implemented anywhere so wipe them out
d3bc03030a3994181d420e9f3b858fe6edd71839	fix wadisablepsddualdispatchenable on vlv v2 can prevent a hang when we get to tessellation we need to set bit __number__ as well for this workaround v2 update changelog with accurate info
88b863db97a18a04c90ebd57d84e1b7863114dcb	xfs fix double free in xlog_recover_commit_trans when an error occurs during buffer submission in xlog_recover_commit_trans we free the trans structure twice fix it by only freeing the structure in the caller regardless of the success or failure of the function
0757f5c503a8b2eebc67c6bb8e3b88077d73049a	media bttv apply mute settings on open previously this has been done implicitly for video device nodes by calling set_input which calls audio_input and also modified the mute setting since input and mute setting are now untangled as much as possible we need to apply the mute setting with an explicit call to audio_mute also apply the mute setting when the radio device node gets opened
f419c5f1d8d28391a025618dee7e1a4fdc7a5654	ath9k add fast-xmit support
6e5459353de4ac80924e94fafa8b3e31a086c5dd	iscsi-target enforce individual network portal export once per targetname this patch enforces individual network portal export on a once per targetname basis thus preventing a network portal from being exported multiple times across multiple targetportalgroups in a single targetname instance this is done in iscsit_tpg_check_network_portal by walking and using iscsit_check_np_match looking for an existing network portal mapping from iscsit_tpg_add_network_portal context but only when no pre-existing tpg_np_parent pointer is present
28a89ddece39890c255a0c41baf622731a08c288	libceph drop pages parameter the value passed for pages in read_partial_message_pages is always the pages pointer from the incoming message which can be derived inside that function so just get rid of the parameter
9b70749e64132e17ab02239b82fcb4a2c55554d1	niu change niu_rbr_fill to use unlikely to check niu_rbr_add_page return value change niu_rbr_fill to use unlikely to check niu_rbr_add_page return value to be consistent with the rest of the checks after niu_rbr_add_page calls in this file
dbf34207c62bdec16b49721d119647c470a3443c	vhost_net re-poll only on eagain or enobufs currently we restart tx polling unconditionally when sendmsg fails this would cause unnecessary wakeups of vhost wokers and waste cpu utlization when evil userspaceguest driver is able to hit efault or einval the polling is only needed when the socket send buffer were exceeded or not enough memory so fix this by restarting polling only when sendmsg returns
0a5fcc6b2efdc86619af793e0216a508469cfaa4	staging octeon fix quoted string split warning this patch fixes quoted string split across lines warning in
9744f06bf2ecfa34ec2a1575b32d06723934c653	staging crystalhd removed cast in removed useless because automatic cast from void in
5304121adae9fc59f4b640f82200868112edd0bd	clocksource export the clocks_calc_mult_shift to use by timestamp code the cpsw cpts driver is capable of doing timestamping on packets and requires to know mult and shift factors for timestamp conversion from raw value to nanoseconds ptp clock now these mult and shift factors are calculated manually and provided through dt which makes very hard to support of a lot number of platforms especially if cpts refclk is not the same for some kind of boards and depends on efuse settings keystone __number__ platforms hence export clocks_calc_mult_shift to allow drivers like cpsw cpts and other ptp drivesr to benefit from automaitc calculation of mult and shift factors
f510b5a1d00bba1c908a4886e4c3309aca0abc8c	usb gadget remove redundant self assignment the assignment ret ret is redundant and can be removed
3194e14db920138f4a0a19a03cb4c26db9969445	drivers staging iio accel removed unnecessary variable variable len is used only to store the return value hence len is removed and the return statement modified coccinelle was used to detect such removable variables identifier ret expression e e ret
4d1e4d629a484b725d5fc88d7e0f967435ab6edd	regulator qcom dont enable drms in driver the driver itself should not flag regulators as being drms compatible this should come from board or dt files
c09dd7daba1d0d833075e4ee653ddc4e7f53a7e1	pcf50633-charger use devm_kzalloc use devm_kzalloc to make cleanup paths more simple
d1806a5c4d2248d2799f4367dbdb1800be94a26f	mtd fsmc_nand add missing dma unmap to dma_xfer make dma_xfer do dma unmapping itself and fix handling of failure cases
d67eb8e66c53dd2d26d294b49969f0c3101a5368	leds wm8350 complain if we fail to reenable dcdc provide some trace though the hardware is most likely non-functional if this happens
db92ea5d4df00271b57d79c2d03dae5a5d60fcc1	dscc4 undefined signed int shift my analysis in the below mail applies although the second part is unnecessary because i isnt used in arithmetic operations here thanks for your time
0a6d80c70b9150d6a9cf466d41955e374c2c9fab	clean up iommu_pc_get_set_reg clean up coding style and fix a bug in the register read logic since it overwrites the upper when reading the lower link
7cbf5d7651ca7ab91b57d194f388d8886dbe4c38	media si2157 simplify si2157_cmd_execute error path remove if from firmware command error path as there should not be any error prone conditional logic there use goto labels instead
a947b724069a25eae86d8dfed905374d04c3f93c	asoc qcom dont specify le device endianness this reverts commit asoc qcom specify le device endianness the commit that caused us to specify le device endianness here regmap-mmio use native endianness for has been reverted in mainline so now when we specify le it actively breaks big endian kernels because the byte swapping in regmap-mmio is incorrect lets revert this change because it will __number__ fix the big endian kernels and __number__ be redundant to specify le because that will become the default soon
c53252b780e26c73c6a4e40bc14179447504cccd	backlight fix module alias prefix for adp8870_bl this is an i2c driver not a platform driver thus use i2c prefix for the module alias
73250a7311204bcc7c1803c6b96021f8b04f9903	required around this patch removes the error given by spaces required around that
9324f9193bc3ba7a07e70ac6e01b3257fb17f390	staging sm750fb introduce sm750fb_frambuffer_release use a function to unregister framebuffer info and release its resources
07922bb1e0eb3fb4e559eea2430a35dbf33659e0	nfc destroy llcp timout workqueue when releasing the link
6cfa6279edbffa921b7d8c9519bfd83a24ba508e	arm spi fix builderror in this patch fixes a build error introduced by commit pm add runtime pm support to core primecell driver which unfortunately was a little bit incomplete and did contain a typo __number__ instead of __number__ im not sure how this patch could have been tested back then if it doesnt even compile the build failure was error adev undeclared first use in this function error pl022_suspend undeclared here not in a function the build failure appears for the u8500 and realview defconfig
55a63d4da3b8850480a1c5b222f77c739e30e346	alsa hda fix dac assignment for independent hp the generic parser should evaluate the availability of the independent hp when specified otherwise a dac without the direct connection to the corresponding pin may be assigned for the hp but the driver doesnt check it at all the problem was actually seen on some machines with vt1708s or equivalent codec where is assigned to hp although it can be connected only via aamix this patch adds the badness evaluation for the independent hp to make it working properly
b5ade9bc8dca839fb06cd2788046cfe923c06980	watchdog dw_wdt try to get a __number__ second watchdog by default the dw_wdt_set_top function takes in a value in seconds in dw_wdt_open we were calling it with a value thats supposed to represent the maximum value programmed into the top register with a comment saying that we were trying to set the watchdog to its maximum value instead we ended up setting the watchdog to seconds lets fix this however setting things to the max gives me an __number__ second watchdog in the system im looking at __number__ seconds feels a little too long well explicitly choose __number__ seconds as a more reasonable value note ideally this driver should be transitioned to be a real watchdog driver then we could use watchdog_init_timeout and let the timeout be specified in a number of ways device tree module parameter etc this patch should be considered a bit of a stopgap solution
aab0a39b281e9a26ae991f0737f2fa6f710d0dab	crypto atmel-aes propagate error from atmel_aes_hw_version_init before this patch atmel_aes_hw_version_init had no returned value however it calls atmel_aes_hw_init which may fail so check the returned code of atmel_aes_hw_init and propagate error if needed
bb4eecf23be259929f9e7d173890a83ae5f87d4c	mmc change the max discard sectors and erase response when hw busy detect when mmc host hw supports busy signalling using r1b as response dont use the as the limitation when deciding the max discard sectors which we inform the generic block layer about instead lets use at least one preferred erase size as the max discard sectors in cases when the host controller supports hw busy signalling and the timeout for the erase operation doesnt exceed the max_busy_timeout we keep the r1b response otherwise we prevent the host from doing hw busy detection by converting to a r1 response
423f0c4a3d32cc83dff204324f59aecb4516f3cf	asoc cs42l51 remove unused variable is not used remove it
17891c8a9ea17a11b437c7184f7f04e0ab7be811	parport parport_pc introduce intel_bug_present function put the code to check present of the intel bug from parport_epp_supported into new intel_bug_present function the later also return ecr register to the state it has before function call
95c21c4158cc8b5a2920ccbe989b17b6f955d976	media interupt urb and timing changes reduce buffer size of interupt urb to __number__ bytes and polling interval to __number__ the devices buffer appears to only handle a maxium of __number__ bytes if the buffer is full a slowing effect is noticed causing occasionnal dropped streaming packets
8c5bd90e9fa8bb74ed94b969e6305b8560637417	staging comedi rti800 use comedi_timeout use comedi_timeout to wait for the analog input end-of-conversion change the errno returned for an overrun from to
99164f9e62a391b5f4b7923b624d182b5d2859e0	net ethernet davinci_emac fix unbalanced pm_runtime_enable in order to avoid an unbalanced pm_runtime_enable in the davinci emac driver when the device is removed and re-probed and a pm_runtime_disable call in davinci_emac_remove actually using on a ti dm8168 soc gives echo __number__ net eth1 davinci emac davinci_emac_remove echo __number__ davinci_emac __number__ unbalanced pm_runtime_enable
907a6d5824599d09e986105a5a880d119a996c4b	hwmon tmp401 detect tmp435 on all addresses it supports tmp435 supports a range of i2c addresses not just
c1c3daee97498f5d74bfd23531cfe23c8e14a619	b43 ht-phy calibrate radio after switching channel after uploading radio values calibration goes in in mmio dump it is radio_read0x002b radio_write0x002b radio_read0x002e radio_write0x002e __number__ radio_read0x002e __number__ radio_write0x002e radio_read0x002b radio_write0x002b to find masks and sets mmio hacks were used to fool closed driver
efbbb4fd6b6fe0d3d2cfb3c5bbcdf00f1995cb60	rtc rx8025 check time validity when necessary check time validity when reading time as this is when we need to know
8e045a31e7c0536e4deb750b37c919fadcb44aa3	firewire sbp2 replace some spin_lock_irqsave by spin_lock_irq users of calling context sbp2_status_write ar-req handler tasklet complete_transaction ar-resp or at-req handler tasklet sbp2_send_orb among else scsi host which may be called in some sort of atomic context sbp2_cancel_orbs worklet or process sbp2_scsi_abort scsi eh thread sbp2_allow_block sbp2_login worklet sbp2_conditionally_block among else complete_command_orb tasklet sbp2_conditionally_unblock worklet sbp2_unblock worklet or process drop the irq flags saving from sbp2_cancel_orbs sbp2_conditionally_unblock and sbp2_unblock it was already omitted in sbp2_allow_block
49274332a43a70b3a3f40ba6db14d9c0677e8e02	ath10k fill max_num_vdevs for wmi-tlv recent commit ath10k set max_num_vdevs based on wmi op version skipped wmi-tlv case and left max_num_vdevs reset make sure it is properly set
a761a2d8a7175b7b4e8525e0672e1a8d3c051001	perf tools ensure sscanf does not overrun the mem field make the parsing robust perf has some other assumptions that bufsize max_path which are not touched here reported-by jackie chang link
3d5f615f9fcba6df382bd9a204b5e9ad3080ac48	asoc fsl fix build problem commit __number__ asoc fsl-ssi use regmap removed struct ccsr_ssi unfortunately the structure is still used this causes mpc85xx_smp_defconfig and mpc85xx_defconfig builds to fail with error invalid use of undefined type struct ccsr_ssi offsetofstruct ccsr_ssi stx0 error invalid use of undefined type struct ccsr_ssi offsetofstruct ccsr_ssi srx0 fix by using constants similar to original commit
bd7081ae2bbd063fa4a29a01cb7004d8516e54e3	thermal intel soc fix warnings warning end returns can be simpified simplify a trivial if-return sequence possibly combine with a preceding function call generated by
a1b43eddaec5a3fea55e1581caf217abda2d3147	avoid maybe-uninitialized warning and higher warn about the newly added nsci code in function ncsi_process_next_channel error old_state may be used uninitialized in this function the warning is a false positive and therefore harmless but it would be good to avoid it anyway i have determined that the barrier in the spin_unlock_irqsave is what confuses gcc to the point that it cannot track whether the variable was unused or not this rearranges the code in a way that makes it obvious to gcc that old_state is always initialized at the time of use functionally this should not change anything
29fee829408117624efcd478f6f228d77039b969	asoc arizona correct checking of fll ratio limitations the check to ensure the fref frequency is within the bounds for the current ratio was placed in the wrong loop the initial configuration will always be valid and the loop lowering the ratio will only reinforce this validity the check should be on the loop increasing the ratio this could on occasion cause an invalid combination to be selected
71c5eec3ee38e10fad25a73b99c009ae8e467cc1	staging lustre llite specify reada debug mask for ras_update so that debug log only contains relevant messages for debugging purpose intel-bug-id reviewed-on
15de15c6b45b87a759321cc49218345fe086dbe5	phy phy-mt65xx-usb3 move clock from phy node into port nodes each port has its own reference clock the highspeed port is and the superspeed port is usually put them into port node for flexibility this can close clock if the port is not used
2fec6bb6f484b1a88b4a325724234d6cfd08c918	netfilter nf_tables fix wrong format in request_module the intended format in request_module is instead of
f5a9097ec2c6c67a2f54acd7328ea7bd2f86c71d	staging comedi pcl816 tidy up comedi_lrange tables tidy up the whitespace in the comedi_lrange tables
5f64822d63efa20cee9efe8766b3a62ab6a1f6c3	active_show can be static so we make it static
44e52cfaa22e44a0197b44cd72c3440bc2a6e1ed	drbd rename
cf7b6c0205f11cdb015384244c0b423b00e35c69	selinux increase avtab max buckets now that we can safely increase the avtab max buckets without triggering high order allocations and have a hash function that will make better use of the larger number of buckets increase the max buckets to original __number__ entries and buckets used longest chain length __number__ with new hash function __number__ entries and buckets used longest chain length __number__ with increased max buckets __number__ entries and buckets used longest chain length __number__
63342411efd2d9350ad405205da036cd45ed1640	perf validate locking assumption document and validate the locking assumption of event_sched_in link
1b6cb29630ea1a10205d67901b94d4bfa2408f4c	staging dwc2 use devm_ioremap_resource replace a call to deprecated devm_request_and_ioremap by devm_ioremap_resource found with coccicheck and this semantic patch
22b5371412f91ea0e1bf5e1c1dd527eb3eed6dc2	revert staging tidspbridge use safer test on the result of find_first_zero_bit this reverts commit cc0be81f00472d782804293766ddd9d1c2b4ebd1 it was incorrect
37a0b394b61beb75b0d28b95f1a3f8af5b47aa1b	ath10k setup maximum number of supported stations setup maximum number of associated stations supported in mode this allow to play with that limit and set more information eg p2p group limit bit for p2p_go
bffdd661bd424ea4298639805bfcbcaf8ffb62f2	hfsplus add error message for the case of failure of sync fs in delayed_sync_fs method add an error message for the case of failure of sync fs in delayed_sync_fs method
afcf4169a41ef02d3f833f4eccac11038bd2b39c	usb gadget s3c-hsotg fix endpoint interrupts handling when s3c_hsotg_trytx is called for ep without enqueued request interrupts for this ep are disabled to prevent interrupt flooding interrupts are enabled when new request for this ep is starting
a2227ce2a32cf9faeab1299894fe09d03e6a12b7	iwlwifi pcie apply destination before releasing reset this allows to use the firmware debugging system even when the configuration values are set hard coded in the firmware
2f66fd36a2be8e97a0ea774ba186adf24882cd10	e1000 add byte queue limits
4eaf6f730355ce3725dd8c98e62696ec4c507e9b	spi mediatek merge all identical compat to mtk_common_compat this patch merge all identical compat into on mtk_common_compat and used for all compatible soc
0330f93a7fac5e3e91b1fe2d85f5a6b63f9e9857	input twl4030-pwrbutton use dev_err for errors use dev_err to output errors instead of dev_dbg
a2b1175131ccb5d4a15456f4f31836356abbce09	arm common edma add suspend resume hook this patch makes the edma driver resume correctly after suspend tested on an am33xx platform with cyclic audio streams and omap_hsmmc all information can be reconstructed by already known runtime information as we now use some functions that were previously only used from __init context annotations had to be dropped added error handling for runtime
be1221e893775d8447623475a01f877b902fc8b4	regulator anatop-regulator use devm_regulator_register simplifies the code
641a1cebfe2f05fa1a48503d816fc70cf707d033	x86 boot removed unused debug flag and set code as were no longer using the flag we dont need to extract the value from the command line and store it this is a step towards removing command line parameter code link
644f1ff4ff5873124a2a19efb1ebd1878f97f5eb	asoc add device id for wm9093 to wm9090 driver the wm9093 is an enhanced version of the wm9093 add the device id to the driver further patches will add support for the additional features in the wm9093
7e83ccbecd608b971f340e951c9e84cd0343002f	allow skipping recovery when clean arrays are assembled when an array is assembled incrementally with mdadm and the array switches to active mode md starts a recovery if the array was clean the fullsync flag will be __number__ skip the full recovery in this case as raid1 does the code was actually copied from the sync_request method of raid1
ca71de6ba7c18a3a1576e04f7ed8d8508ceba4c9	cxgb4 calculate len properly for lso path commit cxgb4 dont assume lso only uses sgl path in t4_eth_xmit introduced a regression where-in length was calculated wrongly for lso path causing chip hangs so correct the calculation of len
49acf73bd03a22d1a0e866b244a4003c222aabee	asoc staticise nuc900_dma_getposition it is not used outside this driver so no need to make the symbol global
ca4be88731488574e436406f540881fd7cf19b8d	staging lustre fix sparse errors mark functions static that are not used or declared outside of
843681c8835bcf4e02f993beae65e356a01d0111	staging comedi das1800 introduce das1800_ai_chanspec_bits introduce a helper function for the common code needed to set the control c register bits for a channel specification
834009170986f295c5eca37c76c59f1b28670d69	libata acpi call ata_acpi_gtm during ata port init time commit mistakenly dropped the code to get an initial gtm for the ide channel this caused the following problem for sergei fix this by adding the call back in ata_acpi_bind_host and due to this the ata_ap_acpi_handle is modified accordingly
aef00c15b8c503083a703900a755fdb1cf2436e0	mac802154 fixes kernel oops when unloading a radio driver destroying the workqueue before unregistering the net device caused a kernel oops
84bde62ca4b49701190dbd953c1e04024860c1f5	ftrace add sanity check when unregistering last ftrace_ops when the last ftrace_ops is unregistered all the function records should have a zeroed flags value make sure that is the case when the last ftrace_ops is unregistered
a390de0208e7f2f8fdb2fbf970240e4f7b308037	libceph unlink from o_linger_requests when clearing r_osd requests have to be unlinked from both normal requests and linger requests lists when clearing otherwise __unregister_linger_request gets confused and we trip over a assert in __remove_osd cat rbd create __number__ test map test ceph osd out __number__ sleep __number__ rbd map obtain a new osdmap as a side effect rbd unmap will block sleep __number__ ceph osd in __number__
1def1dc91715acdb6dddfaed1a44149d42d8063c	use for csd_lock csd_lock uses assignment to rather than that is not buggy at present because only one bit csd_flag_lock is defined in but it will become buggy if we later add another flag so fix it now
67dcaec8d62ab751dbd1d5f9b3f3c1ce4205edf5	arm samsung revise pm for adc operations fixed precision is lost at updated use pm_dev_ops
68cf162a1af23c35db8e3b78659c99196c9882ff	staging et131x remove redundant check and return statement in nic_send_packet by the time frag is checked to be zero it never is the for loop has been entered as nr_frags is always __number__ and frag has been incremented at least once remove the check and associated error return
6d13673e6bc5b666913e92ca59518a449da3b4a9	usb dwc2 gadget fix pullup handling gadget must be informed about disconnection when pullup is removed
5f954b5be4bf42e85e0a204518499bda8ee2f419	media saa7164 i2c improvements for upcoming boards issue single byte address reads add support for these
0367cd002c63363d70262a2fc274487119ca88d8	staging fbtft replace decimal with octal permissions following error detected by error use __number__ digit octal __number__ not decimal permissions
131221bc5e317d9d24d7f3922cc798058cf8aadd	mfd ti_am335x_tscadc remove redundant of_match_ptr the data structure of_match_ptr protects is always compiled in hence of_match_ptr is not needed
463e8736a3a5038732f681a7f1e9f6975d25b3fd	greybus control use gb_builtin_protocol_driver no need to write simple routines use gb_builtin_protocol_driver
9e07f2cb3d7a93f4b1b18fc6e4dd6911dcba2442	gfs2 speed up starting point selection for block allocation when setting the starting point for block allocation there were calls to both gfs2_rbm_to_block and gfs2_rbm_from_block in the common case of there being an active reservation the gfs2_rbm_from_block function can be quite slow and since the two conversions were effectively a no-op it makes sense to avoid them entirely in this case there is no functional change here but the code should be a bit more efficient after this patch
92bd401ba7248946a4215d65ae9b1993ae66db2c	scsi libsas sas_queuecommand doesnt need host_lock
c974bdbc3e7734e72d6347afc49f806342578e75	net phy use threaded irq to allow irq from sleeping devices the interrupt lines from phys maybe connected to i2c bus expanders or from switches on mdio busses such interrupts are sourced from devices which sleep so use threaded interrupts threaded interrupts require that the interrupt requester also uses the threaded api change the phylib to use the threaded api which is backwards compatible with none-threaded irqs
3434d23b694e5cb6e44e966914563406c31c4053	clockevents add helpers to check the state of a clockevent device some clockevent drivers once migrated to use per-state callbacks need to check the state of the clockevent device in their callbacks or interrupt handler add accessor functions to get this information link
b42c7369e3f451e22c2b0be5d193955498d37546	perf pmu-events add skylake frontend msr support add support for the frontend extra msr on skylake in the json conversion link
8a2151c587715e84af676ee6c210fd41b912de76	nfc pn544 use flags argument of devm_gpiod_get to set direction since gpio add flags argument to functions which appeared in the functions take an additional parameter that allows to specify direction and initial value for output use this to simplify the driver furthermore this is one caller less that stops us making the flags argument to mandatory while touching this also do some minor coding style fixes
ecc8fa1c85853a7d8736a920b1b3611c2333a190	mfd twl6040 cleanup in early error handling in probe function the err label is not needed we can just return instead of the jump there
507230c9997ef47147818508108b97b3e189826f	alsa riptide remove redundant null test before release_firmware release_firmware deals gracefully with null pointers no need to check first
b70f014d58b976930b9e8337980954a958c01d7f	change default sched jobs to __number__ change the default scheduler queue size from __number__ to __number__
12d493c791876519393a483fa46bc4893379d523	serial mfd replace module_alias with module_device_table this is a pci driver and should be auto-loaded based on pci id
c88d40b25ffc8099aa7a28f62dce85bee66b1892	release port regardless of unplug response code after sending the unplug response release the port even if an error occurred
76a8349dfdb775d387e9767db3092e410403138a	perf script fix format regression due to libtraceevent merge consider the commands perf record sleep __number__ perf script in the output has the form lines wrapped here perf __number__ __number__ __float__ sched_switch in __float__ that same line has become perf __number__ __number__ __float__ sched_switch __number__ __number__ sched_switch note the duplicates in the output pid cpu event name with this patch the output is restored perf __number__ __number__ __float__ sched_switch v3 remove that pesky newline too output now matches pre-libtracevent v2 change print_trace_event function local to perf per steves comments link
830f8b9105b2d88cd2b115994e14bfe992f9a000	arm plat-orion fix printing of mpp config unavailable on this hardware refactored printing of the kernel warning orion_mpp_conf requested config unavailable on this which is not to be printed in case of variant_mask __number__ unknown variant this check should be performed using a logical and as opposed to a bitwise and otherwise test would fail and message would not be printed if variant_mask __number__
4deea4cb471354a8abdeecc9a571dfdbac8c2481	media dvb document dvb_frontend_sleep_until this function is used mainly at the dvb core in order to provide emulation for a legacy ioctl the only current exception is the stv0299 driver with takes more than to switch voltage breaking the emulation for fe_dishnetwork_send_legacy_cmd document that
73ee3b276864af1ca042258e67237e8454d7b7b6	perf sched look up thread using tid instead of pid link
b92fe9e3379c8dc885eefb254c3da94c13cc1b6d	hwmon iio_hwmon allow the driver to accept hypen in device tree node names currently the driver calls hwmon_device_register_with_groups which does not accept hypen in node name and returns einval use of hypen in device tree node name results in probe however use of hypen in device tree node name is perfectly acceptable change this by allocating a duplicate managed string replacing hypen with underscore and then calling hwmon_device_register_with_groups this allows the use of hypen in device tree node name while maintaining backwards compatibility and preventing any possible regressions with user space
a035d71b1205f880d85752869053b14813366108	i2c octeon increase retry default and use fixed timeout value convert the adapter timeout to __number__ ms independently of depending on config_hz config_hz is __number__ for mips cavium-octeon so the timeout value is not changed also set retries to __number__ to improve robustness
53d6cfa581405d0aa47a5b9ceb027bc157fddebc	bluetooth btmrvl remove extra space in cast coding style fix extra spaces are removed to make casting consistent
f91d22fc3ebd84423864ede097fb2a27d8808c82	hwmon lm95245 avoid initializing the same field twice data is kzallocd so is already __number__
329bbd9ba738b85675151b82260cd08bdd765de2	alsa ali5451 drop unused variable the variable runtime is never used and this might be even a source of null-dereference nothing better than killing it spotted by coverity cid __number__
21d0a75951ccf71f671eb24b61a8ad2b497be4b4	arm dma-mapping refactor out to introduce __in_atomic_pool check the given rangestart size is included in atomic_pool or not
80dbe1fbafbf469fd19862f0d400b769bff0ee46	prune vfio_pin_page_external with vfio_lock_acct testing the locked memory limit under mmap_sem its redundant to do it here for a single page we can also reorder our tests such that we can avoid testing for reserved pages if were not doing accounting and let vfio_lock_acct test the process cap_ipc_lock finally this function oddly returns __number__ on success update to return zero on success on error since the function only pins a single page theres no need to return the number of pages pinned vfio_pin_pages_remote can pin a large contiguous range of pages before calling vfio_lock_acct if we were to similarly remove the extra test there a user could temporarily pin far more pages than theyre allowed
1a5767e882ae1be5e40ce8dd338761a2f72761dd	staging rtl8723au odm_txpowertrackingcheck23a remove no-op function
d1c6c030fcec6f860d9bb6c632a3ebe62e28440b	driver core fix shutdown races with firstly callback may touch a uninitialized hardware if is set and is not completed secondly device_shutdown may dereference a null pointer to cause oops when is cleared after it has been checked in device_shutdown so just hold device lock and its parent lockif it has to fix the races
45288978859119c019eff93f0cb838a0de100bcc	acpi pci irq remove redundant check for null string pointer source is decleared as a __number__ byte char array in struct acpi_pci_routing_table so is a redundant null string pointer check detected with smatch do_prt_fixups warn this array is probably non-null
c0c0e29d8c94fb483bf94a2157f1ef0a7fb70b55	aeroflex remove attributes config_hotplug is going away as an option as result the markings will be going away remove use of __devinit __devexit_p __devinitdata __devinitconst and __devexit
2ca41c176a5d2197572153bf543a3f758c13a4d3	add missing of_node_put after calling of_parse_phandle of_node_put needs to be called when the device node which is got from of_parse_phandle has finished using rebased on top of archits dt rework so looses one hunk
bccb5f7c8bdfe460d95f986c6edf2e75d8052897	blk-mq fix potential stall during cpu unplug with io pending when a cpu is unplugged we move the blk_mq_ctx request entries to the current queue the current code forgets to remap the blk_mq_hw_ctx before marking the software context pending which breaks if old-cpu and new-cpu dont map to the same hardware queue additionally if we mark entries as pending in the new hardware queue then make sure we schedule it for running otherwise request could be sitting there until someone else queues io for that hardware queue
af9810ea90d09336d9cc1328264d9f74e05c76a6	i40e reduce range of interrupt reg in reg test use a smaller range of test registers in mfp mode as there are fewer resources than when in sfp mode change-id i08424890c3f57b5dde5ee99e99724ce252e0875a
3ef1e65c829c86ffaa94a4ed59fed5da37f9610a	perf tools remove the long_name for if the long_name of a struct option is defined as null will incorrectly print in its output as a result will finally appear in the case of bash completion perf record example before this patch perf record after this patch perf record link
f16afa883e345670bfbcf635a1d5ec8165d9211b	mmc dw_mmc remove unnecessary function remove unnecessary function this function didnt re-use anywhere
2c68115cb3d2863004f1dd5c01e3adbd54facd4c	kconfig nconf rewrite labels of function keys line roland eggner more reasonable labels of function keys line rename labels and keep menu width as required for fitting on terminals
6758ddafad55fc8e665bb03ff103d3e410483fe9	dma at_hdmac fix invalid remaining bytes detection found using smatch atc_get_bytes_left warn unsigned is never less than zero
6a180978aea7cb231c60b69b078ec339f40e2faa	staging hv hv_mouse fix up remove function this function obviously never worked it was a cut-and-paste from the probe function rewrite it to do what it is supposed to do at least in theory as to if it works yet well its not worse than it was before so this cant hurt
8a2ceac6617a67d8a1ee4bd255743d577bde311a	regmap split raw writes that cross window boundaries if a block write covers a paged memory region and crosses a window boundary then rather than failing the write split the transfer up into multiple writes making the whole process more transparent for drivers
15001e5a7e1e207b6bd258cd8f187814cd15b6dc	sunrpc make nfs swap work with multipath
4b5ce20b5429eb08ae0776962a4aff7f00017800	remove duplicate bit operation aic5 priority value is updated twice in aic_common_set_priority and when updating at91_aic5_smr variable smr has updated priority value intspec2 in the first step so no need to update it again in the second step link
0c0d2ab069fa668daeda4204580e359dba178169	mfd wm831x use spi_get_drvdata and spi_set_drvdata use the wrapper functions for getting and setting the driver data using spi_device instead of using with so we can directly pass a struct spi_device
5aaf4c27f38e2a40f5b25fd3c43cb4d57b06ae59	drivers staging dgrp using time_is_before_jiffies instead of open coding jiffies need use the proper jiffy comparison instead of open coding jiffies the original comparation is always true the related warning with warning comparison of unsigned expression __number__ is always true
94a12b15e4c575e0aa0ba5e24a4f213163a823d0	sh_eth add r8a7791 support add support for yet another arm member of the r-car family r-car m2 also known as r8a7791 it will share the code and data with previously added r8a7790 despite the ether devices in these socs are indistinguishable at least from the drivers point of view we do introduce a new platform device id r8a7791-ether unlike the wildcard id used for socs due to newly established policy for the renesas socs
6200b75a8bbc16e434bf3d8ca54538ea678ccbd7	asoc cq93vc cleanup manual bias level transitions remove the manual transition back to snd_soc_bias_standby in resume this is already be automatically handled by the asoc core since the asoc core now takes care of setting the bias level to snd_soc_bias_off when removing the codec there is no need to do it manually anymore either the manual transition to snd_soc_bias_standby at the end of codec probe can also be removed as the core will automatically do this after the codec has been probed while we are at it also remove the unused codec field from the cq93vc struct so the whole probe function can be removed
a0eb3a05a8cbe9cd1a41dde3d1b2e5bcc10634f2	userns convert hugetlbfs to use where appropriate note sysctl_hugetlb_shm_group can only be written in the root user in the initial user namespace so we can assume sysctl_hugetlb_shm_group is in the initial user namespace
0bda1cf739e657ebfdde41b723e8a3a21efed6a3	also use gen5_irq_init with south display interrupts this interrupt gets initialized with a different ier value so it was not using the macro the problem is that we plan to modify the macro to make it do additional things and we want the sde interrupts updated too so lets make sure we call the macro then after it we do the necessary sde-specific changes
22fa2fe0a496b6a0c0a75df862cfa7269babcb74	staging serqt_usb2 remove err usage err was a very old usb-specific macro that i thought had gone away this patch removes it from being used in the driver and uses dev_err instead
62e4492c3063048a163d238cd1734273f2fc757d	pci prevent null dereference during pciehp probe pciehp assumes that exists but we do not assign a bus if we run out of bus numbers during enumeration this leads to a null dereference in init_slot and other places change pciehp_probe to return when no subordinate bus is present
b7bed712d090c340b97d455c5cb62d151e004503	nilfs2 use nilfs_warning in allocator implementation this uses nilfs_warning to replace printkkern_warning in the bitmap based allocator implementation of nilfs2 the warning messages are modified to include the device name and the inode number in each message this makes it clear which metadata file of which device has output warnings such as entry number xxxx already freed
2732a875ad32d39f3e0421d3b77ad88301911850	staging ced1401 rename readhuff rename camel case function readhuff to ced_read_huff
801f00633568ed6d5eebef5ef10d8b5661379f2c	usb ohci-s3c2410 use devm_ functions the devm_ functions allocate memory that is released when a driver detaches this makes the code smaller and a bit simpler
b000056a5a8d3f5a4a9fb80184a7ec14f86a43d4	ceph fix null ptr crash in strlen set_request_path_attr checks for null ptr before calling strlen this fixes
3fe4430dd66837d8fcdb63c167e908655fc842e3	perf tools omit group members from theres no need to ordinary group member events because they are initialy enabled and get scheduled by the leader link
da6b044a28fe603fe2c3fd908cda8150aa0abe74	scsi lpfc correct double print correct a merge error that had debug data printed twice for the same element
c42b4e6501cdaabee8cc292ae1ef0f66bf4825c1	revert n_gsm race between ld close and gsmtty open this reverts commit c284ee2cf12b55fa8496b2d098bf0938688f1c1c turns out the locking was incorrect
0a5149ba02bdf75281b8bc94cf6dfa94c527fa6f	mpt3sas fix inline markers on non inline function declarations after merging the scsi tree todays linux-next build powerpc allyesconfig failed like this in file included from in function _scsih_io_done error inlining failed in call to always_inline mpt3sas_scsi_direct_io_get function body not available mpt3sas_scsi_direct_io_getstruct mpt3sas_adapter u16 smid error called from here if mpt3sas_scsi_direct_io_getioc smid in file included from error inlining failed in call to always_inline mpt3sas_scsi_direct_io_set function body not available mpt3sas_scsi_direct_io_setstruct mpt3sas_adapter u16 smid u8 direct_io error called from here mpt3sas_scsi_direct_io_setioc smid __number__ in file included from error inlining failed in call to always_inline mpt3sas_scsi_direct_io_set function body not available mpt3sas_scsi_direct_io_setstruct mpt3sas_adapter u16 smid u8 direct_io error called from here mpt3sas_scsi_direct_io_setioc smid __number__ presumably caused by commit c84b06a48c4d mpt3sas single driver module which supports both sas __float__ sas __float__ hbas
ef1d2e286a2d8876e03a3f58ea1a1f549727e518	can c_can make bus off interrupt disable logic work the state change handler is called with device interrupts disabled already so no point in disabling them again when we enter bus off state but whats worse is that we reenable the interrupts at the end of napi poll unconditionally so c_can_start which is called from the restart timer can trigger interrupts which confuse the hell out of the half reinitialized remove the pointless device interrupt disable in the bus_off handler and prevent reenabling the device interrupts at the end of the poll routine when the current state is bus_off
b714a7106ba5423c418c25e6231116560f8a9ef8	alsa remove extra setting of dsp_state is initialized to dsp_download_init no need to reset and check it in ca0132_download_dsp
0d1ead4809161867651b6f19e2cd793d2408abfd	staging comedi pcmuio remove asic member from subdevice private data the asic associated with a subdevice can be easily calculated the functions that use this member in the subdevice private data can only be called by the subdevices that support interrupts just calculate the asic when needed and remove the member variable and sanity checks
ff05916f94f912b25e8efcf9b02c10d481977bab	iio st_sensors init trigger before irq request this fixes a possible race where an interrupt arrives before complete initialization and crashes because iio_trigger_get_drvdata returns null
4fb66b8210c7d7147b164e19b1b44da916a75691	caif fix a potential null dereference commit bd30ce4bc0b7 caif use rcu instead of spin-lock in added a potential null dereference in case alloc_percpu fails caif_device_alloc can also use gfp_kernel instead of gfp_atomic
a9f3acd0aac58c128686e0c775081b416048392c	use iio_push_to_buffers_with_timestamp makes the code a bit shorter and less ugly
bd41aa677314f08693c50e6746d1e23c7722bb61	clk bcm remove clk_is_root this flag is a no-op now remove usage of the flag
f0e3393031238e7fc38a34cdb0bd2331bbcc9e11	media use dev_ or pr_ printks in fixed below checkpatch warnings warning prefer netdev_errnetdev then dev_errdev then to printkkern_err warning prefer netdev_dbgnetdev then dev_dbgdev then to printkkern_debug
a1f83feecc9e754eac5286844e7d7dcc58a0aceb	r8152 check rtl8152_unplug and netif_running before autoresume if the device is unplugged or the workqueue doesnt need to wake the device and could return directly
0144b84e0c3593f5c62d0dbf29d477b6760f2ab5	staging bcm line length whitespace cleanup in matchtos
69705b35859195b5640861fff91cc936d1baf4eb	perf tools tui display multiple header lines display multiple header lines in tui browser if its configured within struct link
a22217e27c699de61cc6859494e1af097291afb5	s390 cio export more interfaces export the common interfaces those are needed by an subchannel driver to actually talk to the subchannel message-id linux.vnet.ibm.com
4a4bdfea7cb75b5c8b222932796f64a14027d512	refactor dlpar_add_lmb code re-factor dlpar_lmb_add routine by moving the validation of the lmb flags and the acquireing of the drc to a wrapper around the work to add the memory to the system this is done to make handling of errors during the addition of the memory easier and to facilitate the upcoming addition of updating the lmbs affinity prior to adding the memory
297eaaa6d0bf09a91045e1d8c9b1e555d8b91d8a	regulator s2mps11 simplify expression used in build_bug_on following build_bug_on using a variable fails for some of the compilers and optimization levels reported for gcc __float__ var array_sizes2mps15_regulators build_bug_ons2mps_regulator_max var fix this by using array_size directly additionally add missing build_bug_on check for s2mps15 device the check ensures that internal arrays are big enough to hold data for all of regulators on all devices
1322739849a885fdf6733d85fd130996cdd586be	fix alignment issue fix alignment should match open paranthesis check thrown by
31feb61a688bd4b1c1cb66cc24d931ee77826d93	ensure the hw is powered during hw state readout the assumption when adding the intel_display_power_is_enabled checks was that if it returns success the power cant be turned off afterwards during the hw access which is guaranteed by modeset locks this isnt always true so make sure we hold a dedicated reference for the time of the access link cherry picked from commit
5519b5f5514ee8282044bf0d5a30481fb5c1b3bb	staging unisys remove unneeded spaces from this patch removes some unneeded white space after casts within the file the checkpatch script was run after these changes and no further checks or warnings were seen
15fb2af604d602373cd4dafb88143adb03463001	staging emxx_udc remove useless type conversion some type conversions like casting a pointer to a pointer of same type casting to the original type using operator etc are not needed therefore remove them done using coccinelle type t t t a ta a t p t
03ff5898c715e202f154a5259aed46f64ef9a86e	staging comedi ni_atmio16d use comedi_timeout use comedi_timeout to wait for the analog input end-of-conversion change the errno returned when the conversion overflows from to
e4084a16bbe07957811c75dfb7c9bf25c5862ba0	platform-msi do not cache msi_desc in handler_data the current implementation of platform msi caches the msi_desc pointer in this is a bit silly as we also have which is perfectly valid remove the useless assignment and simplify the whole flow link
ef9b16dc6de692865e898a35e750119b5b9c82c5	nfsd reorder nfsd_cache_match to check more powerful discriminators first we would normally expect the xid and the checksum to be the best discriminators check them before looking at the procedure number etc
928634514bc53f66631a731bf623157c913b145e	xfs dquots should be stamped with sb_meta_uuid once the sb_uuid is changed the wrong uuid is stamped into new dquots on disk found by inspection verified by
9f74660bcf1e4cca577be99e54bc77b5df62b508	xprtrdma rpcrdma_bc_receive_call should init some open requests were hanging waiting for the nfs server to finish recalling delegations turns out that each cb request on rdma gets a garbage_args reply from the linux client commit added a line in bc_svc_process that overwrites the incoming rq_rcv_bufs length with the value in but rpcrdma_bc_receive_call does not invoke xprt_complete_bc_request thus is not initialized svc_process_common is invoked with a zero-length rpc message and fails
7af355e6715b325d8af29822f4c3dbecd7eeebec	pinctrl sirf atlas7 add missing of_node_put reference to sys2pci_np should be dropped in all cases here not only in error handling path
f106eac91edbd28de23b0bc58be82f68d976e24f	m68k fix compiler warning by properly inlining flat_set_persistent this patch removes the following warning warning unused variable persistent there is neither functionality change nor extra code generated
e23e9aa75283ac093421ca71339ec4eb1afbe8be	befs switch to
12ab028be0008640de712ca890dc1a9ae224934d	change params from hidden to ro the compressor and enabled params are currently hidden this changes them to read-only so userspace can tell if zswap is enabled or not and see what compressor is in use
9a87fe0d7c2d4fb62255cb69088da5a812df3516	proc make struct struct unsigned int linux doesnt support filenames in so unsigned long is too much mov r64 is larger than mov r32 link
23780f077b4ab6e7fdcc75160c2f013b73ef78bd	staging et131x tidy up dropped bytes stats remove some fairly useless comments regarding _bytes and _dropped and use rcvd_pkts_dropped stat value to provide rx_dropped
27257fc07c044af99d85400c4bab670342bbc8a5	remove the warns as they just create noise when booting the kernel under machines that do not have p-states we would end up with cut here warning at x2e0 hardware name proliant bl460c g6 modules linked in pid __number__ comm swapper not tainted call trace __address__ __address__ __address__ __address__ __address__ __address__ __address__ which is ok the machines do not have p-states so we fail to register to process the _pxx states but there is no need to warn the user of it oracle __number__
46dfa3d83464c7ee694ff32761645c3e27fcfc48	staging unisys neglect to null rcvbuf pointer neglect to null rcvbuf pointer array could result in faults later this problem would exhibit itself as a fault when when attempting to stop any visornic device in visornic_disable_with_timeout or visornic_serverdown_complete that had never been started for which init_rcv_bufs had never been called because the array of rcvbuf was never cleared to nulls we would mistakenly attempt to call kfree_skb on garbage memory
fc6a6772f888ee8ab4c5428854f7f1d3abda13df	clocksource mips-gic update clockevent frequency on clock rate changes this commit introduces the clockevent frequency update using a clock notifier it will be used to support cpufreq on platforms using mips gic based clockevents patchwork
2f18f8d638cc66a5339d901dea2c9d8af72e69c2	leds leds-mc13783 remove unnecessary cleaning of registers on exit led core switches each led to off-state on exit so there is no need for resetting registers
5d04d12ed241df74ee03c366afc1e1508043ac95	media platform blackfin drop owner assignment from platform_drivers a platform_driver does not need to set an owner it will be populated by the driver core
88a17d8fb7c4a156ec13e6668b46dbbedf670ff7	asoc topology bind vendor specific kcontrol handlers before standard ones vendor specific handlers should override standard handlers so we can handle things in the order from specific to generic
19dadca58a16741b2eeb1c31021b577ffb4b88ee	usb dwc2 remove double call to dwc2_hsotg_of_probe this patch removes doubled call to dwc2_hsotg_of_probe function
99437a2782730ec8c7e6cfebb6143d00b091e4a8	kvm s390 virtio_ccw reset errors for new ccw_io_helper neglected to reset after a new channel program had been successfully started resulting in stale errors delivered after one failed reset the error after a new channel program has been successfully started with no old pending
500880a84057eac2e6199a464ad863370167aa6b	staging comedi acl7225b cleanup acl7225b_di_insn_bits use a local variable to hold the base register reg that is used to read from the device
f77bc5b23fb1af51fc0faa8a479dea8969eb5079	iptables use match target and data copy_to_user helpers convert iptables to copying entries matches and targets one by one using the xt_match_to_user and xt_target_to_user helper functions
193ba924524e6afe192217982b2c2d67e4715d33	igmp export symbol ip_mc_leave_group needed for vxlan
8d8c1b375cd5b239607037a859661e98cd0dac00	media radio-si470x fix band selection the mask was wrong resulting in band __number__ and __number__ always ending up as band __number__ in the register
98a1f8282b8c37378c1b947d661a58942331ca90	mac80211 do not use sizeof on pointer type the rate_control_cap_mask function takes a parameter mcs_mask which gcc will take to be u8 even though it was declared with a fixed size this causes the following warning in function rate_control_cap_mask warning sizeof on array function parameter mcs_mask will return size of u8 unsigned char for i __number__ i sizeofmcs_mask note declared here u8 mcs_maskieee80211_ht_mcs_mask_len this can be easily fixed by using the ieee80211_ht_mcs_mask_len directly within the loop condition
14e3c97c2db8735b5304379dd4e6cfe1d68a7a49	usb serial ti_usb_3410_5052 remove useless dev_dbg messages remove useless or redundant dev_dbg messages johan drop an unrelated change
33b73a35a25152aea0a5df78f2bddcfde3115180	staging comedi ni_6527 tidy up the digital input and output ports are different split the camelcase port_register define into separate ni6527_di_reg and ni6527_do_reg defines to make this clear tidy up the functions a bit
583eadab21779c4301f01a11bf3d0d49b643aa80	asoc ad1836 remove unused fields from private struct the control_type field is never used so it can be removed the control_data field is used to initialize the codecs control_data field but since this is also done by the snd-soc-cache core the redundant assignment can be removed and the field can be dropped
0f3912fd934cdfd03d93f2dc6f064099795bf638	run seccomp after ptrace close the hole where ptrace can change a syscall out from under seccomp
68ffbf7f9fb11323238cb31c956b4f381e6b05cc	mtd nand sunxi fix nfc_ctl setting nfc_page_shift already takes the real page_shift value and subtract __number__ to it
4fb72bf2e913ca3798afd9e226e2416918936e49	btrfs use smaller type for btrfs_path locks the values of are __number__ to __number__ fit into a u8 lets see overall size of btrfs_path drops down from __number__ to __number__ bytes better packing in a slab page objects the whole structure now fits to __number__ cachelines slight decrease in code size text data bss dec hex filename __number__ __number__ __number__ __number__ f57e9 __number__ __number__ __number__ __number__ f55d9 and the generated assembly does not change much the main purpose is to decrease the size of the structure without affecting performance the byte access is usually well behaving accross arches the locks are not accessed frequently and sometimes just compared to zero note for further size reduction attempts the slots could be made u16 but this might generate worse code on some arches non-byte and non-int access also the range of operations on slots is wider compared to locks and the potential performance drop should be evaluated first
065ca1e42ffd74dd03cf60f61cead35934c91ed5	move init_se_cmd closer to lookup_cmd_lun if we can get calls to init_se_cmd get_sess_cmd lookup_cmd_lun core_alua_check_nonop_delay and handle_cdb_direct next to each other then we can just call target_submit_cmd this is a step towards that goal
70a56550a664ce93583f59ef1b885e7616c942e4	ath9k_htc drv_init match wait_for_completion_timeout return type return type of wait_for_completion_timeout is unsigned long not int as time_left is exclusively used for wait_for_completion_timeout here its type is simply changed to unsigned long api conformance testing for completions with coccinelle spatches are being used to locate api usage inconsistencies int return assigned to unsigned long patch was compile tested with x86_64_defconfig patch is against localversion-next is
07df30435eecce98961dabbac16787969975a080	use workqueue to shutdown the machine orderly_poweroff cannot be called from atomic context
45fd5e4ad2052101b4ceda5fdf4b003c428ebdfc	i2c rcar fix section mismatch give the driver struct a name according to the standard to fix warning section mismatch in reference from the variable rcar_i2c_drv to the function warning section mismatch in reference from the variable rcar_i2c_drv to the function
8e18db815c92f17e96afaccd33c6b8f08c16dd03	gma500 psb_irq mark as static
07d9089d3989150a80ff2083799929354d7e6c53	intel_mid_powerbtn convert to use convert driver to use managed resources this eliminates error path boilerplate and makes code neat
6dbc5fc2596059afca1db47eb1ac78f7095d27a1	wlcore cancel recovery_work on stop instead of remove_interface recovery_work should be cancelled when stopping the device not when removing an interface this is probably a leftover from the single-role days
c18e9cd623b8aa88090615602c3db7f1386a139d	virtio_net zero is an invald queue_pairs number execute ethtool eth0 combined __number__ in guest if multiqueue is enabled virtnet_send_command will return error there is a validation in qemu but if multiqueue is disabled virtnet_set_queues will just return zero success we should return error for this situation
a08b6769d4c5e8d2a3192a45e40b3cdcca0da6a1	fix section mismatch in split uncore driver the new split intel uncore driver code that recently went into tip added a section mismatch which the build process complains about uncore_pmu_register can be called from uncore_pci_probe which is not __init and can be called from pci driver im not fully sure if its actually possible to call the probe function later but it seems safer to mark uncore_pmu_register not __init this also fixes the warning link
4c5df493eb30089ff0b8d03a50a86293f758a786	hacky workaround to fix accel issues
31202b0e3c8dded6623a13ea0033a7bf03121c0a	scsi lpfc code cleanup for lpfc_enable_rrq parameter code cleanup for lpfc_enable_rrq parameter
1d66f72d2c79b76b7353ea4e42f33521fa839f81	arm shmobile r8a7790 smp remap whole apmu region documentation says the last register is at caxcpucmcr so use proper length current apmu code accesses caxcpuncr which is currently outside of the remapped area
0a14d280e17ef3db75254439dfc83f1bc65fca6f	power vexpress make dev_attr_active static the dev_attr_active is not exported or defined to be used outside the driver so make it static to avoid the following warning warning symbol dev_attr_active was not declared should it be
8474901a33d8a27958bfa99e78736863abd67874	userfaultfd convert bug to warn_on_once avoid bug_ons and only warn instead this is just a cleanup it cant make any runtime difference this bug_on has never triggered and cannot trigger link
5c495d6201fb0efafcf6e26b3c82a7bd01ec1b69	fujitsu-laptop remove redundant fields from struct fujitsu_bl the dev field of struct fujitsu_bl is assigned in acpi_fujitsu_bl_add but never used afterwards brightness_changed is set in get_lcd_level and then its value is only printed in a debug message so it does not influence execution flow remove both fields as they are redundant update the aforementioned debug message adjust whitespace to make checkpatch happy
df586cbb6be97aaf55b9a01e1d0ab01bc03d70d1	crypto sahara drop unnecessary default assignment all possible code-paths will assign ret to suitable values so this default value is not needed
c27f2de754a1412ce4a6c4af723605f776ec4ac2	arm omap3 beagle fix return value check in beagle_opp_init in case of error the function get_cpu_device returns null pointer not err_ptr the is_err test in the return value check should be replaced with null test
b26a6b35581c84124bd78b68cc02d171fbd572c9	make prepare_plane_fb fully interruptible now that we agreed on not preserving framebuffers pinning is finally allowed to fail because of signals use this to make pinning and acquire the mutex in an interruptible way too unpinning is still uninterruptible because it happens as a cleanup of old state or undoing pins after one of the pins failed the intel_pin_and_fence_fb_obj in page_flip will also wait interruptibly and can be aborted now
4d1ea982a9beb4e47bba41131973329e2a012b38	mtd brcmnand force mode before doing nand_scan_ident just like other nand controllers the nand readid command only works in mode for all versions of brcmnand controller this patch forces mode for each nand cs in brcmnand_init_cs before doing nand_scan_ident to ensure that brcmnand controller is in mode when nand readid command is issued
f648167f3ac79018c210112508c732ea9bf67c7b	xfs avoid nesting transactions in xfs_qm_scall_setqlim lockdep reports info possible recursive locking detected not tainted is trying to acquire lock at but task is already holding lock at from when a dquot needs to be allocated xfs_qm_scall_setqlim is starting a transaction and then not passing it into xfs_qm_dqet and so it starts its own transaction when allocating the dquot splat fix this by not allocating the dquot in xfs_qm_scall_setqlim inside the setqlim transaction this requires getting the dquot first and allocating it if necessary then dropping and relocking the dquot before joining it to the setqlim transaction
f48fbf9c7e892d1b070affb273970d948b825939	pci mvebu convert to use devm_ioremap_resource commit lib devres introduce devm_ioremap_resource introduced devm_ioremap_resource and deprecated the use of devm_request_and_ioremap while at it modify mvebu_pcie_map_registers to propagate error code
0fd84dc80bfdcbe8345959100c8ad776dff75d5e	media coda fix fmo value setting for codadx6 the register is only written on codadx6 so the temporary variable to be written only needs to be initialized on codadx6 also drop two no-op lines
7254026cedd42d75009f8a7f2999045007dd444e	media v4l pxa-camera switch to using standard pm hooks the pxa-camera driver doesnt need soc-camera specific pm callbacks switch it to using the standard pm hooks instead
21e7a6087480451804124cee27c0a7d0a7de1564	rcu add event tracing for no-cbs cpus callback registration
c5bc9bcf3dac6a3a7f09ffcd7119cdbadaa2a1f8	arm uartn_cts pin should not change rts input select if both the rts pad and cts pad definitions setup iomuxc_uartn_ipp_uart_rts_mux_select_input then the order of setup will matter we dont want that
037fd9b6473393c35a31f0c43e26eb7e874e901d	ath_hw use common reg_write parameter order all defines for reg_write in atheros wireless drivers use the order ah register and value is the only file using the order ah value and register reg_write_ah _reg _val reg_write_ah _reg _val _val _reg this inconsistent definition can easily lead to implementation errors the modification doesnt change the behavior of the driver or the generated code
48eddfd5ca591d2bd97594afd58cffa6b5a48ef4	lustre switch ll_intent_file_open to struct dentry because fake struct file is wrong ll_prep_inode in there is an atrocity despite passing a pointer to inode by address it actually only uses the value when that value is non-null as it will be here oh and of anything is never null
52221610dd84dc3e9196554f0292ca9e8ab3541d	mmc sdhci improve external vdd regulator support a standard compliant sdhci can itself supply vdd at __float__ __float__ or several vendors ignore this and instead rely upon external regulators to supply vdd while the external regulators typically can supply one of the standard sdhci voltage levels there is no real reason for this to be a hard requirement this patch alters the sdhci driver such that external vdd regulators that provide voltages other than the three mentioned above may be used so long as they can supply a voltage that meets the needs of the card in the case that an external vdd regulator is provided it is reasonable to ignore the voltage capabilities of the host controller and allow the external regulator to set the ocr mask additionally there is no need to convert a vdd voltage request into one of the standard sdhci voltage levels or program it in the host controllers power control register
88287ec3f88eb28df2c2db73659b859ff645fc42	gpu ipu-v3 rename csi client device rename the csi client device in the client_reg table to imx-ipuv3-csi
b8b2372de9cc00d5ed667c7b8db29b6cfbf037f5	qlcnic update version to
7a72a2e5e6e06172ae26a3c5c8c89a5578f28432	perf stdio separate standard headers output introducing hists__fprintf_standard_headers function to separate standard headers display code link
8b2379b49a9b7476b8421a6a404de30cd304cca1	usb chipidea move to functions this patch makes error path cleaner and probe function tidier
335f49196fd6011521f078cb44f445847e5aa183	use explicit broadcast oneshot control function replace the clockevents_notify call with an explicit function call link
09cf92b784fae6109450c5d64f9908066d605249	retrieve irq data after locking irq_desc irq_data is protected by so retrieving the irq chip from irq_data outside the lock is racy vs an concurrent update move it into the lock held region while at it add a comment why the vector walk does not require vector_lock link
58f643669e872b9293603bd4ae19df796cb4b78a	staging iio isl29028 remove chip test and defaults from isl29028_chip_init isl29028_chip_init contains the device driver defaults and two i2c calls that detect the presence of the chip this patch moves these into isl29028_probe so that this function can be used by the power management runtinme in a followup patch this patch also renames isl29028_chip_init to isl29028_chip_init_and_power_on
97767a87f3be8834192dc3fc9412aaccf708d87f	be2net remove unused offset_in_page macro
1593af62b694b3638edf577e3b763fa1a4ca3d76	asoc fsl_sai introduce a compatible string for mx6ul mx6ul may need to configure the general purpose register __number__ gpr1 so it is better to add a new compatible string to differentiate
c5d710654c0eb9a33d32aadea4863442461cf847	set and in preparation for making the clockevents core ntp correction aware all clockevent device drivers must set and rather than and a clockevent devices rate is going to change dynamically and thus the ratio of ns to ticks ceases to stay invariant make the score archs clockevent driver initialize these fields properly this patch alone doesnt introduce any change in functionality as the clockevents core still looks exclusively at the untouched and as soon as this has changed a followup patch will purge the initialization of and from this driver
fe00deb3e4b50eede61cc7d4ab9bce7911f0a074	ath5k delay full calibration after reset during scans the full calibration usually does not make much sense papd probing and iq calibration should be deferred until there is enough time to complete them adding __number__ ms to the initial full calibration delay should be enough to do this
e1af5e445ef8582e8f690fadcd63797db1e62663	cgroup netprio remove unnecessary task_netprioidx since the tasks have been migrated to the cgroup there is no need to call task_netprioidx to get tasks cgroup id
13d6ceb4c4fe1e9688e19b15b123b1830c596cf1	tty omap-serial pull out calculation from baud_is_mode16 to determine the correct divisor we need to know the difference between the desired baud rate and the actual baud rate the calculation for this difference is implemented twice within omap_serial_baud_is_mode16 pull out the calculation for easier maintenance while at it remove the camelcasing from the variable names
23bd63ceea30878758c303baaf9f8e28f299c578	nvme nvme_core_exit should do cleanup in the reverse order as nvme_core_init does nvme_core_init does __number__ register_blkdev __number__ __register_chrdev __number__ class_create nvme_core_exit should do cleanup in the reverse order
9c432adaa803c1a6f1065f907caab13248c844df	ixgbe rename ll_extended_stats to use queue instead of q this patch renames the stats introduced by the busy poll feature so that they are more inline with the current statistics naming schemes
291c9e33bf3f8ac201b24b8f9e481756d43d7df7	alsa hda refactor ctl array handling in no functional change
7e3fd813717693597daaa95dee875f4cb2d911ef	acpi debugger fix regression introduced by is_err_value removal the fifo unlocking mechanism in acpi_dbg has been broken by the following commit commit subject remove lots of is_err_value abuses it converted into which was not entirely correct fix the regression by taking ret __number__ into account too as appropriate rjw simplifications changelog subject massage
1ec8deac8c63505194e773b9657824ed3c2fbdd8	i40e explicitly fail on extended mac field for ethtool_rx_flow_spec although we will fail the filter later due to checking flow_type which will have a bogus invalid type it is possible future refactoring will remove this hidden failure case avoid a possible issue in the future by explicitly checking the flow type at the start change-id ia98eb26f7b93ccbe38c7141e8f203ef496fc6598
33a32243fcd6b4883b22ffdd812f534b011a63b7	integrated two if statements to a single if statement removed unnecessary if statement and integrated the condition to the previous if statement
497dcf6fc355f0734faf851662b6957386715d24	arm shmobile marzen fixup smsc911x id for regulator dummy_supplies for smsc911x are registered as smsc911x smsc911x driver needs id
0d2e42970cfa8814ce5f73e329f61c94b7ec2dab	reduce indent in i9xx_hpd_irq_handler bail out early if nothing to do no functional changes
ac98b4c015b50b1e452f8d55b612320be7f80825	asoc intel remove invalid kfree of devm allocated data kbuild robot reports following warning warning invalid free of devm_ allocated data as julia explains to me the memory allocated with devm_kalloc is freed automatically on failure of a probe function so this kfree should be removed otherwise the double free will be got in error handler path
2b14daba1d6976a078ba8ccdd1f932f2320061a8	greybus bundle use hexadecimal notation for class attribute use hexadecimal notation for class-attribute value
edd7ea2d5486c12978fdc71c6efd493cbabeea60	asoc intel skylake remove bogus comparison of an array with null is an array not a pointer it will never be null the check on appears sufficient
36061c842be56f62bf77d7339bc4581a38e03846	staging comedi das08_cs change driver registration order as done with the other comedi driver types register the comedi_driver first then the pcmcia_driver also make sure the pcmcia_driver registration succeeds and unregister the comedi_driver if it fails
02c3b4c75994888e58a6e6e8176640cde9822597	usb gadget bdc fix a driver crash on disconnect ep_dequeue in was capturing the hw dequeue pointer incorrectly by reading the wrong register for the upper __number__ bits
64014fe67b0aafa129d80266fce58b60783d5c91	net dsa mv88e6xxx unconditionally set atu trunk set the trunk member of the mv88e6xxx_atu_entry structure regardless its value so that uninitialized structures gets the correct boolean value note that no mainline code is affected by the current behavior
f277bf27cf5cd56bcd1c4b95ae140f61680a6e83	usb gadget f_uvc use bind_deactivated flag use bind_deactivated flag instead of calling usb_function_deactivate in function bind
e5f66eafe5a4c678965a2138b92b645c2c0c4d10	pci set correctly the operation has higher precedence than and is always non-zero here so the original statement is equivalent to pci_msi_mask_64 which wasnt the intent bhelgaas my fault from
5f65ca81c321e8390645b80460444c3aa04c856f	media media blackfin bfin_capture set min_buffers_needed this patch sets the min_buffers_needed field of the vb2 queue so that the vb2 core will make sure start_streaming callback is called only when we have minimum buffers queued
96f2a4a1a77a60a55cc15e13938bd3f2d0ee86bc	mtd nand mxc_nand remove unneeded check for platform_get_resource devm_ioremap_resource checks its arguments so there is no need for explicitly checking the return value from platform_get_resource
0347b6e95ceeb648631f89a0ced001e90e4daaa9	hfsplus change finder_info to u32 the finder_info block in the hfsplus volume header is currently defined as an array of __number__ bit values but tn1150 defines it as being an array of __number__ bit values fix for convenience
f6e629bd2379dceb547be93915314307871a7f6c	dm snap add fake origin_direct_access dax-capable mapped-device is marked as dm_type_dax_bio_based which supports both dax and bio-based operations dm-snap needs to work with dax-capable device when bio-based operation is used add fake origin_direct_access to origin device so that its origin device is also marked as dm_type_dax_bio_based for dax-capable device this allows to extend targets dm table dm-snap works normally when bio-based operation is used dm-snap does not support dax operation and mount with dax option to a target device or snapshot device fails
16ec30ef99b886d9dcaa3bd272a94a4bd1f660f4	arm ux500 get rid of static maps the static mappings of the gpio blocks controller and mtu timer are clearly superfluous these are all probed exclusively from the device tree tested on the u8500
ef77d83fd7a2f37a20d9e37ac156f18e7e105c75	misc fsa9480 remove obsolete cleanup for clientdata a few new i2c-drivers came into the kernel which clear the clientdata-pointer on exit or error this is obsolete meanwhile the core will do it
83eefabf9b596b8237cdcc385bff67f70d1e5a2d	remove redundant value in operation removed parameters checked twice in logical or operation suggested by coccinelle and manually verified patchwork
aeca3a77b1e0ed06a095933b89c86aed007383eb	net cdc_ncm fix tx zero padding the zero padding that is added to ntbs does not zero the memory correctly this is because the skb_put modifies the value of which results in the memset command not setting any memory to zero as __number__ i have resolved this by storing the size of the memory to be zeroed before the skb_put and using this in the memset call
1446b44bedfd09a11ae97b58932fec7775f4bae1	staging comedi amplc_pci230 fix checkpatch line over __number__ characters
0d92363564de7b755f47ab91aaafa0ec197a36af	staging lustre bind socklnd peers to a specific cpt currently the socklnd driver doesnt support cpt affinity for its peers binding peers to a specific cpt and memory allocated to the numa node belonging to the cpt should give a performance boost intel-bug-id reviewed-on
e8ad74f9c7eace7b8ee075d42c2b3d4709b41225	staging comedi addi_apci_1564 remove use of this member of the private data struct is only set at one location in the entire driver and then never even used for anything lets just remove its use
def249afb3beb07e6eb1cd9f8d5979c3dead1310	staging unisys remove unused fields from iopart structures the bus_no and dev_no fields in several of the iopart command parameter structures are unused remove them
1f59533f9ca5634e7b8914252e48aee9d9cbe501	qdisc validate frames going through the direct_xmit path in commit net validate xmit skbs right when we pull them out of the qdisc the validation code was moved out of dev_hard_start_xmit and into dequeue_skb however this overlooked the fact that we do not always enqueue the skb onto a qdisc first situation is if qdisc have flag tcq_f_can_bypass and qdisc is empty second situation is if there is no qdisc on the device which is a common case for software devices originally spotted and inital patch by alexander duyck as a result alex was seeing issues trying to connect to a vhost_net interface after commit was applied added a call to validate_xmit_skb in __dev_xmit_skb in the code path for qdiscs with tcq_f_can_bypass flag and in __dev_queue_xmit when no qdisc also handle the error situation where dev_hard_start_xmit could return a skb list and does not return dev_xmit_completerc and falls through to the kfree_skb in that situation it should call kfree_skb_list
2b4d9d2b001be2ff06be2ea5c52e9adaf85b0805	mfd ucb1x00-core disable mcp clock when bus is not required the ucb1x00-core was leaving the mcp clock enabled indefinitely after probe this needlessly wastes power add the necessary disables to ensure that the clock remains off when we dont need it
4da1b7bfe7699881c761d71b5e299a65bce48ab2	edac remove useless assignment of error type the tracepoint decodes the error type later anyway so remove a useless assignment to the temporary p which gets overwritten later anyway
e03ac9f0c3f5f2e79c41fd02d9b90831dfd78a2e	mips fix cpc_base_addr mask to match datasheet according to interaptivtm multiprocessing system guide cpc_base_addr takes bits this change is tested ith mt7621 which wasnt working without it patchwork
26ae4980b5e4739af93543a147facb421fb78ae8	fsl_ifc fix csor_ext position in fsl_ifc_regs according to freescale manuals the ifc_csorn_ext register is located immediately _after_ the banks ifc_csorn register this patch adjusts the csor_ext member of and reserved register arrays immediately surrounding the csor_cs structure to provide proper access to this register
86e6828a8aed250be7d30f678e331b0b4180a892	scsi scsi_debug add optimal transfer length granularity option mkp whitespace fixes
4be15551848773fd1b623dca3fbb6f7cab76054b	staging comedi adv_pci1710 replace comedi_board calls the comedi_boarddev inline function calls just return expand the inline function calls
225b818982403120ce1f5e7d4b3e5245e0399775	mac80211 support beacon statistics for drivers without beacon filtering support beacon statistics entirely report the number of beacons and average signal for drivers with beacon filtering give them the number of beacons received by mac80211 in case the device reports only the number of filtered beacons then driver doesnt have to count all beacons again as mac80211 already does
c9d023adb62e17569f714669c93d3da07be49e3f	asoc fix unused variable warning in wm8996
f911462fc4aad8885de4844bf0e8e561e77df6a6	lpfc change buffer pool empty message to miscellaneous category
8bb6f4b9c50eef838931e0e667f1a451f34a76ae	mac80211 remove useless double check for open_count in __ieee80211_suspend we check at the top of the __ieee80211_suspend so theres no need to check for it again open_count is protected by the rtnl so theres no chance for it to have change between the two calls
b9b73f7c4d45d69289aa16620b04430068dd3941	userns convert usb functionfs to use where appropriate
4d2ae601d80675af025e7a5bcbe918c58b6743aa	drivers serial jsm switch jsm to jsm_driver_name this commit replaces every instance of the string jsm in the driver with jsm_driver_name as the two are equivalent this should increase overall consistency
152669bd3cd2407d6f556009b95ee249c0c1a462	netvsc fix use-after-free in netvsc_change_mtu nvdev is freed in rndis_filter_device_remove netvsc_device_remove free_netvsc_device so we mustnt access it before its re-created in rndis_filter_device_add netvsc_device_add
6a6f380f07c4f64d3517281eb0f484b54ce4a30e	reserve mqd objects before mapping them its required
2343dabc6096486b2705ab9420dd292801fc47f3	virtio balloon might not be a legacy device we added transitional device support to balloon driver so we dont need to black-list it in core anymore
2773b024229bab23ef36e198e0555630f74f23ef	bluetooth fix correct nesting for server channel server channels in bt_listen state should use l2cap_nesting_parent this patch fixes the nesting value for the channel
72303cafcb5cc9fd1227d0edd458f62bef1a397e	asoc jive_wm8750 use static dai format setup set the dai_fmt field in the dai_link struct instead of manually calling snd_soc_dai_fmt this makes the code cleaner and shorter
ef096542642874de10909f02686447a96a66ad14	usb mv_usb remove clock name from pdata using pdata to pass clock name is not correct directly get clock from usb drivers
92543fd756cca554a37e343616a212c435168967	arch unicore32 ksyms export __cpuc_coherent_kern_range to avoid compiling failure flush_icache_range is __cpuc_coherent_kern_range under unicore32 and needs it at present __cpuc_coherent_kern_range is still used by unicore32 so export it to avoid compiling failure the related error with allmodconfig under unicore32 error __cpuc_coherent_kern_range undefined
d466a353052582ea784d9f5352c822d828d00244	hwmon atxp1 convert to use devm_ functions convert to use devm_ functions to reduce code size and simplify the code
45b30514a34fa7fcb7a84be799ca5fc53d33a4d7	staging lustre lov drop unnecessary cast on void this patch does away with the cast on void as it is unnecessary semantic patch used is as follows expression x e type t identifier f t t t e
70fcd1b7a6be4f4f60f4d05beeb3976bb0eaf6a2	staging comedi ni_670x fix dereference of an invalid pointer the attach if this driver can fail before the subdevices are allocated if the attach fails the comedi core will call the detach routine to allow the driver to do its cleanup we need to make sure that the subdevice allocation was successful before trying to dereference subdevice0 to free the allocated range table list
6a328475cccacb99a13b06978091da936dd51d89	crypto wait for a full jiffy in do_xor_speed in the existing do_xor_speed there is no guarantee that we actually run do_2 for a full jiffy we get the current jiffy then run do_2 until the next jiffy instead lets get the current jiffy then wait until the next jiffy to start our test
13a6c8328e6056932dc680e447d4c5e8ad9add17	alsa usb-audio test ep_flag_running at urb completion testing ep_flag_running in snd_complete_urb before running the completion logic allows us to save a few cpu cycles by returning early skipping the pending urb in case the stream was stopped the stop logic handles the urb and sets the completion callbacks to null
19717d05848849a3b1dddeced9abb5884cff9152	declance remove incompatible pointer type warnings revert damage caused by in function cp_to_buf warning assignment from incompatible pointer type warning assignment from incompatible pointer type in function cp_from_buf warning assignment from incompatible pointer type warning assignment from incompatible pointer type also add a const qualifier where applicable and adjust formatting
734890a6c99ee81b935164963c03fc8bbf3f821b	asoc wm1133-ev1 use static dai format setup set the dai_fmt field in the dai_link struct instead of manually calling snd_soc_dai_fmt this makes the code cleaner and shorter
031a7f456adecaff692bc040b31a7d2262b4ee56	apm32 fix cputime jiffies assumption that code wrongly assumes that cputime_t wraps jiffies_t lets use the correct no real harm now as that code cant be used with full dynticks cc john stultz
f82b959d26557fe4ce283d3b27050d4b8268ef1e	team allow options
61d0e73e0a5ab5fc80f6cd9d54f5146e33288a8d	use the the real irqn in instead of storing the msix array index in vecidx store the real irq number
ecebca79f6976ddaddfd054d699272515869ea28	avoid enable fence signaling if if we being polled with a timeout of zero a nonblocking busy query we dont need to install any fence callbacks as we will not be waiting as we only install the callback once the overhead comes from the atomic bit test that also causes serialisation between threads link
90b3feaec8ffb167abd8903bf111605c2f035aa8	memcg fix mem_cgroup_print_bad_page if debug_vm mem_cgroup_print_bad_page is called whenever bad_page shows a bad page state message removes page from circulation adds a taint and continues this is at a very low level often when a spinlock is held sometimes when page table lock is held for example we want to recover from this badness not make it worse we must not kmalloc memory here we must not do a cgroup path lookup via dubious pointers no doubt that code was useful to debug a particular case at one time and may be again but take it out of the mainline kernel
056dfcf67ebaa9eb3aff5f35ce98c073157f1d5b	clk tegra114 fix incorrect placement of __initdata __initdata should be placed between the variable name and equal sign for the variable to be placed in the intended section
8b1afc3d6751063d3f0cdefe55719b1cd2f7edcc	md just use rcu when checking for overlap between arrays we dont really need the full mddev_lock here and having to drop it is messy rcu is enough to protect these lists
4ce8c9a720c566a4ce7b782ddd5df90d66f0ba85	band gap wa note no one seems to have docs for this so this patch here is just unreviewed black magic danvet add note about the doc situation
839cc2954cbdb82511d2ecfa07ba06bab4198519	arc switch to raw_copy_user
745f35587846249b392aa548b4c5f54cd69ed688	mips mm unify pte_page definition the same definition for pte_page is duplicated for the mips32 phys_addr_t_64bit case the generic case unify them by moving a single definition outside of preprocessor conditionals patchwork
ae4d8cf299dbea4ce387a01da6f723c4050b31a7	fix issue of clk_get for loongson1b when getting clock give a chance to the cpus without dt support which use common clock framework such as loongson1b
56e97078602996123d849b7621442a934aa19b77	staging comedi ni_tiocmd preferred over foo null
ef8f342b43c48035458306b5e5b3dcb949929b1d	neigh remove next ptr from struct neigh_table after commit d7480fd3b173 neigh remove dynamic neigh table registration support this field is not used anymore
3a7936c3fc469c196d9163abfea6b7aa9572d443	ref count nfs_client across filelayout data server io prepare to put a dis-connected ds client record
2fd638feb6b39cbbc10989a57a25c868fe65b118	hwmon lm63 introduce dev variable to point to is used multiple times in several functions introduce dev variable pointing to it to simplify the code
8e8114dee2a9a767ca8abc1c2d6a94a3ca5d4c7f	iwlwifi mvm catch underflow error earlier my static checker complains that we dont check for underflows in iwl_dbgfs_fw_dbg_conf_write this is harmless because we have a sanity check in iwl_mvm_start_fw_dbg_conf but we may as well make this unsigned and silence the underflow warning
6ccc3abdc97e07e6895323fdab89f84e58b40ece	fix potential memory leak while preparing net flow caches once a fail may cause potential memory leak fix it
fd91f267d72858dc2f06cde756dc4d5658469c31	media lgs8gxx convert set_fontend to use dvbv5 parameters instead of using dvb_frontend_parameters struct that were designed for a subset of the supported standards use the dvbv5 cache information also fill the supported delivery systems at dvb_frontend_ops struct
f2ca09f381a59e1eddb89aa70207740c2ee0fe94	arm dont use is_module_addr in setting page attributes the functions currently only support module addresses the addresses are validated using is_module_addr that function is special though and relies on internal state in the module subsystem to work properly at the time of module initialization and calling its too early for is_module_addr to work properly so it always returns false rather than be subject to the whims of the module state just bounds check against the module virtual address range
6a5b63b3cbf774f6a576133fccb92f54cc8a23e1	media s2255drv fix for return code not checked start acquisition return code was not being checked return error if start acquisition fails
e92c08092a7f3d2b2c6cccfb8562b64c6e9802e4	fix is_vmalloc_addr build warning i got this building lustre in function warning passing argument __number__ of makes pointer from integer without a cast enabled by default
149c84077fe717af883bae459623ef1cebd86388	implement snb workaround for lazy global gtt pipe_control on snb needs global gtt mappings in place to workaround a hw gotcha no other commands need such a workaround luckily we can detect a pipe_control commands easily because they have a write_domain i915_gem_domain_instruction and nothing else has that v2 binding the target of such a reloc into the global gtt actually works instead of binding the source which is rather pointless v3 kill a superflous has_global_gtt_mapping assignement noticed by chris wilson
6cc90d6de16532fe68b54ee6967894f7ca83affa	arm pllv2 use standard register set unconditionally the pll has two different register sets for setting the rate one is used for the standard case and and is used for dvfs which one of them is used depends on a hardware input of the pll current implementation reads back from the hardware which setting is used this is bogus if we ever want to implement dvfs we have to program both register sets and not only the one which happens to be used at the moment for now just use the standard register set uncondionally
5a01604783c23f28bd4212e839e79277193f974f	btrfs remove unused fs_info from btrfs_decode_error
bd000b82e86503d5e8b9e6d40a3257bc9dddb96d	refactor the configure_bridge rtas tokens the rtas calls and perform the same actions however the former can skip configuration if unnecessary the existing code treats them as different tokens even though only one will ever be called refactor this by making a single token that is assigned during init
309d0b3917387b48d1fa1a15aa6762de489c9123	have __free_pages_memory free in larger chunks on large memory machines it can take a few minutes to get through free_all_bootmem currently when free_all_bootmem calls __free_pages_memory the number of contiguous pages that __free_pages_memory passes to the buddy allocator is limited to bits_per_long bits_per_long was originally chosen to keep things similar to but it is more efficient to limit it to max_order base new change that is around improvement on total boot time this patch was spun off from the boot time rfc robin and i had been working on
fd972b736bfec7e0297dac9501211abb91b436fd	amd-xgbe check per channel dma interrupt use in main isr when using per channel dma interrupts the transmit interrupt ti and the receive interrupt ri are masked off so as to not generate an interrupt to the main isr however should another interrupt fire for the dma channel that is handled by the main isr the bits can still be set this will cause the wrong and uninitialized napi structure to be used causing a panic add a check to be sure per channel dma interrupts are not enabled before acting on those bit flags
8c96a7a3310a21a4a3f827b9c42636aa04a47f9e	mmc sdhci-pxav3 move clock to private data as we are using references to the clock throughout the driver move it to the private data also in preparation for core clock rename it to clk_io
4b18c358e1f8355d620cc29fbe06db80e804761f	staging lustre socklnd remove unnecessary line continuation remove unnecessary line continuation in to meet kernel coding style
debc4849007517be8f03a199ea29dc3f797c329e	dmaengine txx9dmac explicitly freeup irq dmaengine device should explicitly call devm_free_irq when using devm_request_irq the irq is still on when devices remove is executed and irq should be quiesced before remove is completed
0d89475861f984a89c4998a98e94a3d19e0bbb20	staging rtl8821ae fix braces are not necessary fix issues with braces are not necessary in
6225ee05ea44638b51ded0056505923cb6e2656d	probe ouis v2 airlied v2 fix missing struct fixes compile
75cff0837c14eaf632efabb8d7ab9eec6394d20d	drm make the decision to keep vblank irq enabled earlier we want to provide the vblank irq shadow for pageflip events as well as vblank queries such events are completed within the vblank interrupt handler and so the current check for disabling the irq will disable it from with the same interrupt as the last pageflip event if we move the decision on whether to disable the irq based on there no being no remaining vblank events __number__ to before we signal the events we will only disable the irq on the interrupt after the last event was signaled in the normal course of events this will keep the vblank irq enabled for the entire flip sequence whereas before it would flip-flop around every interrupt v2 move the disable_fn call outside of the vblank_event_lock link
975d5e55c2e78b755bd0b92b71db1c241c5a2665	smack provide information for uds getsockoptso_peercred this patch is targeted for the smack-next tree this patch takes advantage of the recent changes for performance and points the packet labels on uds connect at the output label of the far side this makes function properly without this change the getsockopt does not provide any information
e222a6eb77ca9897076761c854c25ffc43ab8949	dont check resource with devm_ioremap_resource devm_ioremap_resource does sanity checks on the given resource no need to duplicate this in the driver
44332ddfeb07960e57fd6db9be0a3f7c6a01d4e9	gma500 oaktrail_crtc mark few functions as static
baa1fb504c5b89d1b04e5b4d1b8658f41bb29477	media bdisp remove unused var fix the following warning in function bdisp_register_device warning variable pdev set but not used struct platform_device
417c60e8f248a84e8e768c55d191689d1e27e05f	asoc cs42l52 cleanup manual bias level transitions set the codec drivers suspend_bias_off flag rather than manually going to snd_soc_bias_off in suspend and snd_soc_bias_standby in resume this makes the code a bit shorter and cleaner since the asoc core now takes care of setting the bias level to snd_soc_bias_off when removing the codec there is no need to do it manually anymore either the manual transition to snd_soc_bias_standby at the end of codec probe can also be removed as the core will automatically do this after the codec has been probed
4f0cc93bbbea49b01da6a818766a3e0f79c10180	staging virtpci remove no-op functions the virtpci bus driver still uses the legacy callbacks in their current implementation these callbacks only contain a macro that always expands to do while0 so instead of converting them to dev pm ops just remove them
21cc0bd3a9e524b44a4f0ff05ac612aa0ff1a26e	scsi libfc block scsi eh thread for blocked rports call fc_block_scsi_eh in all fcoe eh to blocks the scsi_eh thread for blocked rports
1cbaa670355e4a4e339ac97167fb8ecf536045d3	fix mad port poll for active cables a mad directive to start polling must go through the normal link tuning and start steps in order to correctly handle active cables
33f8f5269ea7c220e18a15959dad2b42e1b61051	bluetooth add flag for le gap peripheral role this patch adds a flag to be used for le gap peripheral role in this role undirected advertising will be enabled and operations not allowed in peripheral role such as scanning and initiating connections will be disallowed
23602adfee71894d04ce2b69cbd6d29ab2e77d6d	lustre kill unused members of struct vvp_thread_info
c2fd34469d1623111e3c3db65cde533f3bddc26e	iwl4965 fix a memory leak in error handling code of __il4965_up when il4965_hw_nic_init in __il4965_up fails the memory allocated by iwl4965_sta_alloc_lq in iwl4965_alloc_bcast_station is not freed this patches adds il_dealloc_bcast_stations in the error handling code of __il4965_up to fix this problem this patch has been tested in real device and it actually fixes the bug
f9f9f11dcf0f3b757b282ce7cefea8696212a422	move of_msi_configure to the right guard and add a dummy of_msi_configure is part of which is compiled in when of_irq is enabled not just of also it is unconditionally called from of_platform_device_create_pdata which does not depend on of_irq just of_address so we need a dummy implementation in case of but
287bba82fe2f74dd89f7f24f2da438a7974e57af	greybus svc fix hot-plug-state allocation flag use gfp_kernel for hot-plug state allocation in gb_svc_intf_hotplug_recv which is called from a request handler a work queue
58526090ece3582516e62779739a7d665a74708c	staging binder fix memory corruption via page aliasing binder_deferred_release was not unmapping the page from the buffer before freeing it causing memory corruption this only happened when pages had not been freed by binder_update_page_range which properly unmaps the pages this only happens on architectures with vipt aliasing to reproduce create a program which opens mmaps munmaps then closes the binder very quickly this should leave a page allocated when the binder is released when binder_deferrred_release is called on the close the page will remain mapped to the address in the linear later we may map the same physical page to a different virtual address that has different coloring and this may cause aliasing to occur page_poisoning will greatly increase your chances of noticing any problems
1dec78585328db00e33fb18dc1a6deed0e2095a5	arc fix build warning in the cast valid since task_size __number__ will never actually cause overflow cc in file included from from from in function load_elf_binar warning integer overflow in expression elf_et_dyn_base __number__ task_size __number__ note in expansion of macro elf_et_dyn_base load_bias elf_et_dyn_base vaddr
dc2721564f6da549f6eb29ac5bca28d65beadcb7	asoc rcar enable pcm rate untile __number__ r-car sound can handle untile __number__ rate
cf68b629f938c01c9aa84fff95e1be96032af08d	arm mmc fix nonremovable test in sdhci-bcm-kona sdhci-bcm-kona driver is incorrectly doing to bit-test nonremovable switch to
b32ed7f5de262b10633bb6c6dbb7f8ba46598cf4	add lockdep assert lockdep is very good at finding incorrect irq state while locking and is far better at telling us if we hold a lock than the _is_locked api it also generates less code for kernels
88d35cffff83cc0b11d6e7a2bef73b602f156da0	usb f81232 clarify f81232_ioctl and fix we extract tiocgserial section in f81232_ioctl to f81232_get_serial_info to make it clarify also we fix device type from __number__ to and set its baud_base to __number__
8ed508fd4b84a38db63ddeee8ab6905f06cfa589	vti check return value
5a8ddf26822dcf601a44d35efa8fe162cbc84e62	clk sunxi fix a20 pll4 calculation allwinner actually reworked the pll4 on a20 now its compatible with the sun4i design previous to any divisions as well as to the new pll8 in sun7i
2c55a3d08ade44a778c182c220a7907ec65d5fb8	tg3 scale back code that modifies mrrs tg3 normally gets a performance boost by increasing the pci maximum read request size mrrs to unfortunately this is causing some problems on particular hardware platforms this patch removes all code that modifies the mrrs except for one case as part of a solution to fix an internal fifo problem on the __number__ the driver artificially capped the mrrs to for the entire __number__ and later __number__ asic revs this was overly aggressive and only really needed to be done for the __number__ a0 in the spirit of the rest of this patch the driver will only reprogram the mrrs for this device if the value exceeds the cap
3eeacaa902a31bdf06bc53f23087dcb1c5f260d6	rtlwifi rtl8723ae fix leak in _rtl8723e_read_adapter_info in case of rt_cid_default the function directly returns and leaks the already allocated hwinfo memory go through the correct exit path
1cb9e38c8c17b16b2712aaf2ca4d3509f0fe9366	greybus spi use the bundle struct device instead of the connector we are removing struct device from the gb_connection structure in the near future the gb_bundle structures struct device should be used as a replacement this patch moves the spi driver to use the bundle pointer instead of the connection pointer
e78c7bca56dab5ce4f22694f99115ec07e4935f6	sched simplify return logic in sched_copy_attr the logic in this function is a little contorted clean it up rather than having chained gotos for the case just return directly now the label out is no longer needed and ret must be zero zero by the time we fall through to this point so just return __number__ link
bcf312cf762f3ff02c0cbd218564e6241f0d1f9f	tracing put trace_puts comment above trace_puts macro for kernel doc kernel-doc gives the following warning docproc no description found for parameter ip no description found for parameter ip due to the externs between the the comment and the trace_puts macro this is fixed by moving the externs below the macro and keeping the macro and comment directly together
e7f506bd0e2db2cc67da6e16776cf54aeb827999	staging fbtft remove unused bl_ops from fbtft_unregister_backlight the only usage of bl_ops variable in fbtft_unregister_backlight function was assigment of a value to that variable therefore the assignment and the variable itself can be safely removed
11b22e1465e25dbbf29c7df30ba20497d91c63f2	staging comedi fl512 simplify a trivial if-return sequence this patch simplify a trivial if-return sequence possibly combine with a preceding function call
df18480650df1d9dc94188bc7dd7e47b5c888d05	staging vt6655 s_vgeneratetxparameter replace pstxbufhead with struct vnt_tx_fifo_head with endian correction on fifo_ctl and current_rate removing ptxbufhead pfifohead and wfifoctl
d04aef4cccf203fdfd1716e9ba458060cbab0928	bluetooth refactor le connection into its own function the code that handles le connection is already quite separated from the rest of the connection procedure so we can easily put it into its own
7a5fe3f87c39565e4c5eb7e39638fc979c8fd98b	ath10k change function to take struct ath10k as arg this aligns it to the argument list of other similar functions
b6d30432e04c750504dcfa19223cad830c89d02b	power reset at91-reset remove leftover platform_device_id commit eacd8d09db7f at91-reset remove useless at91_reset_platform_probe removed non dt probe support but forgot to remove the now useless id_table do that now
92a7c4e7183bcd29e2366f1ee784ad395c291134	r8169 stop using the driver does not need this leftover of the isa drivers era
e87569cd6c57cfe8c3fbbd20a5cf5cefb8b14156	mips cpu-probe fix configuration for r6 r6 has dropped the mmuextdef field from the config4 register and it now returns __number__ however the return value means nothing in that case and the only supported configuration for r6 is the mmuextdef __number__ as a result rework the code so that the correct value is set for r6 cores patchwork
858feacd2b6790c49ba9c7521f0c7ac3a5a9cb8e	lpfc fix races for miscdevice open vs rmmod mind you im not sure wtf would anybody _need_ that miscdevice at all no io is possible for it opening it only pins the module down and is seriously racy at that
c234a24de91837db6f00aeebe28e3daddc53c1b7	btrfs cleanup remove inode_ref_info helper a simple wrapper around btrfs_find_item
0a8d44cb33377969337fa6c1961b631605d5f453	nvme fix lockdep warnings during the initialisation path the queue lock is taken without interrupt protection its perfectly safe to do so because the interrupt handler cant run at this point but it confuses lockdep
9ebe24356f5c80fbc0afe0e206be46f91c7a1358	net tile fix unused variable warning i is unused in tile_net_dev_init after commit d581ebf5a1f net tile use helpers from to mac
8525b5ec90a58b3e56709ffa1667d6593dbe24c3	dsi fix exynos_dsi_set_pll wrong return value the type of this function is unsigned long and it is expected to return proper fout value or zero if something is wrong so this patch fixes wrong return value for error cases
de1e37b7d0dc3f1b8d0f84f5ff64ef8eebdf1e9f	alsa hda clear dirty flag upon cache write when verbs or amps are actually written to the hardware we can clear dirty flag so that the later calls can skip these verbs amps
a339e1849b9504b6e9631777e41ea2a240e58621	mrf24j40 calling ieee802154_register_hw at last the function ieee802154_register_hw should always called at last currently we do hardware init and such things after register hardware into the subsystem it could be that the subsystem already call driver operations while running hardware init
a61b582954183e93a3dc3a5cf6bfd2e2c3b40aba	sparc fix __atomic_add_unless return value
f62a23a7cb601fb30c4a8b8a5ba1c6bb7f5148b3	net calxedaxgmac enable rx cut-thru mode enabling rx cut-thru mode yields better performance as received frames start getting written to memory before a whole frame is received
08ef55c6f257acf3bdc6940813f80e8f0f5d90ec	net-next mediatek fix gigabit and flow control advertisement the current code will not setup the phys advertisement features correctly fix this and properly advertise gigabit features and properly handle asymmetric pause frames
718ceb22a0ccd0b3a02a4bd401d944a1eb16f3ce	iwlwifi pcie free context info in case of failures if iwl_pcie_ctxt_info_init_fw_sec fails the previous allocated dma memory needs to be freed it even goes out of scope immediately do that to prevent the leak
c08d57a30aa7bb05a9a8d7faf3cf2f7502e1eb5f	remove filtering of setpkeytable in hfi sma the fm should have full control to set the pkeys in the driver pkey table remove filtering done by the driver
2918ad14cc7e16f38206185dbc65f980ffc4ec6c	fix irq check the test in the lpc32xx_adc driver which checks whether the irq number returned by platform_get_irq has multiple problems it accepts __number__ even though this is an invalid irq it also rejects irq numbers that are larger or equal than nr_irqs first of all drivers should never need to reference nr_irqs and secondly with config_sparse_irq nr_irqs is not the upper limit so the check might reject valid irq numbers this patch modifies the check to only test against less or equal to __number__
c35866678391861942b3836c219a8898a259255a	kvm mmu fix huge page adapted on non-pae host the huge page size is on non-pae host but page size is used in transparent_hugepage_adjust so the page we get after adjust the mapping level is not the head page the bug_on will be triggered
8d01370f59856a0ac5b222878667d52477b589f0	asoc es8328 cleanup manual bias level transitions set the codec drivers suspend_bias_off flag rather than manually going to snd_soc_bias_off in suspend and snd_soc_bias_standby in resume this makes the code a bit shorter and cleaner
a60c42320b375e80e52e7861acd6b81c61f05166	use pt for vm sync on unmap instead of the array which is used for id management
6728b198deb02c187b5e5a99eb7d1cc9c8bc65e9	btrfs validate target profiles only if we are going to use them do not run sanity checks on all target profiles unless they all will be used this came up because alloc_profile_is_valid is now more strict than it used to be
938569eb75b329fee9f2634900ad7e12caf13fd2	hub debug message for failing to enable device this error case isnt reported during enumeration
37d2a3622d249d83413c92a1cd9e94b5237d0fcc	cper failed to handle generic error records with multiple sections the function apei_estatus_print and apei_estatus_check forget to move ahead the gdata pointer when dealing with multiple generic error data sections
1793db1d1c8d6f2b6841381532250ecbd57d7e93	staging rtl8723bs fix indenting problem for smatch lists the following check hal_channelplantoregulation warn inconsistent indenting fixed by changing the white space
382af7f2fdedb62bccdd887af4d43b736804d16f	staging wilc1000 linux_mon remove space after a cast this patch removes space after a type cast found by check no space is necessary after a cast
569743e49364bbf48937c39cb86a2aaf191828d7	claw remove bug_ons remove bug_ons in claw driver since the checked error conditions are null pointer accesses
4955a5412cad83da6e994d939bdb4f7887e4585e	intel_idle remove superfluous initialization intel_idle driver sets to so the default initialization in cpuidle_enable_device called from cpuidle_register_device can be used instead
efe96779e55eb59c1d22c9b89b655b639aea6c99	staging gdm724x modify icmp6_checksum for returning a correct data type the icmp6_checksum was returning an invalid data type as the expected type is __sum16 for returning such data type icmp6_checksum now is using the kernel functions for computing the checksum here the sparse message warning incorrect type in assignment different base types expected restricted __sum16 addressable assigned usertype icmp6_cksum got int
f182394033d639679264d61e6dca62761e659ff7	input wacom check for allocation failure in probe we accidentally removed the check for null in input wacom isolate input registration
1b8487368bb0acedf23e226974b63aaaf2bfddbd	revert staging usbip bugfix for stack corruption on architectures this reverts commit as its just not right
171c4006fb1b42a084057a71c86776e9f1b8e62c	fix pmd_pfn for thp the pfn calculation in pmd_pfn is broken for thp because it uses hpage_shift instead of the normal page_shift this is fixed by removing the distinction between thp and normal pmds in that function and always using page_shift
7f72134e08bb15511ffcb880cdd01ca77ea54cb7	bluetooth add mgmt_op_set_scan_params to supported commands list when adding support for mgmt_op_set_scan_params command the addition to the supported commands list has been forgotten this is needed for userspace to detect if the command is supported or not
1f1b20f11ab4ce38a338b278bb6b538bbfdc831a	rtl8xxxu do queue init in same order as vendor driver reorganize the init sequence in order to be able to compare to the vendor drivers init sequence
7d2dddda5c928f349a01f1d5ca8ee5e9d4283c7a	virtio pci remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
910890338399258af210685210760bc0cc82a5dd	i40e lock service task correctly the service task lock was being set in the scheduling function not the actual service task this would potentially leave the bit set for a long time before the task actually ran furthermore if the service task takes too long it calls the schedule function to reschedule itself which would fail to take the lock and do nothing instead set and clear the lock bit in the service task itself in the process get rid of the i40e_service_event_complete function which is really just two lines of code that can be put right in the service task itself change-id i83155e682b686121e2897f4429eb7d3f7c669168
a734fb5d60067a73dd7099a58756847c07f9cd68	reset global variables before loading a new elf clean previous kernel version license and processed sections link
c70d11cdcead2578b55d6c7bbf59b2b2e333edb1	staging rtl8192e rename dm_fsync_timer_callback use naming schema found in other rtlwifi devices rename dm_fsync_timer_callback to _rtl92e_dm_fsync_timer_callback
19a12049cd12ea2c5195f81e747adbc2c89e6560	bonding remove hardcoded initialization
6a5794f2c653e78127123b3cd266b3c4d4c50606	asoc smdk_wm8570pcm use static dai format setup set the dai_fmt field in the dai_link struct instead of manually calling snd_soc_dai_fmt this makes the code cleaner and shorter
677651462c774b5866be2bc42601303a76b021a0	ipv6 fix sparse errors in ip6_make_flowlabel warning incorrect type in assignment different base types expected restricted __be32 usertype hash got unsigned int warning restricted __be32 degrades to integer warning invalid assignment left side has type restricted __be32 right side has type unsigned int
e58a0f89b25a2299374176d5c37aa89b326681e6	fix potential null-pointer dereference
793b1936067c8bb6abd7272e06348e4d70abc69a	staging comedi tidy up ni_m_intc_status_reg bits rename the camelcase and convert enums into defines use the bit macro to define the bits
71e17ee57cde7e30ef0acd765f73e21295c867fd	mwifiex set tdls flags for amsdu packets this patch fixes an issue where amsdu packets for tdls link would flow over infra link this happened because we were missing setting tdls flag in txpd on amsdu packets
590e4df8c82e6c2707ae12ba6672ab6fb9cd4b89	vlv support is no longer preliminary works pretty well actually
05591eaf71a9c2ad57e2d59a398ade423a9bda00	staging comedi das16 tidy up user range initialization the allocation of the user range tables could fail make sure to check for it change the kmallocs to kzallocs to make sure the allocated range tables are initialized to a known state change the local variables so they can be used for both the ai and ao range initialization and use shorter names to keep the lines __number__ chars
61610420f764acb835af4a450251dbab2ab6d621	drbd in drbd_suspend_al set al_suspended before unlocking the activity log as using an empty activity log is the whole point of the excercise make sure it is still empty when setting al_suspended
421c600dc408e98035ec7f297133f96e37d21d29	staging comedi pcl711 use comedi_handle_events use comedi_handle_events to automatically the async command for an end-of-acquisition or if an occurs the pcl711_ai_set_mode call when the end-of-acquisition is detected can then be removed the does the same thing
e3f680ddaed9d94ee629aee7747e419f2c700f4e	staging fbtft add spaces around add spaces around to fix the checkpatch issue spaces preferred around that
a77660a75a3f79c71064dc6848a2975731ca5c00	greybus interface free bundles on initialisation errors immediately free any created bundle structures on interface initialisation errors
a1bcc9da90ab44d29c38fc6e4a8dba633e97f3f3	remove unused fields from struct exynos_drm_plane now after the move to use drm_plane_state directly struct drm_plane_state has many unused fields along with others that werent used before the plane state change thus remove them all
d1625964da51bda61306ad3ec45307a799c21f08	cgroup fix cgroup_css invocation in css_from_id ca8bdcaff0 cgroup make cgroup_css take cgroup_subsys instead and allow null subsys missed one conversion in css_from_id which was newly added as css_from_id doesnt have any user yet this doesnt break anything other than generating a build warning convert it
cccd9fb9ec960e343b2f354c4613e49f5a1d8371	block revalidate i_bdev reference in bd_aquire when a device gets removed block device inode unhashed so that it is not used anymore bdget will not find it anymore later when a new device gets created with the same device number we create new block device inode however there may be file system device inodes whose i_bdev still points to the original block device inode and thus we get two active block device inodes for the same device they will share the same gendisk so the only visible differences will be that page caches will not be coherent and bdis will be different the old block device inode still points to unregistered bdi fix the problem by checking in bd_acquire whether i_bdev still points to active block device inode and re-lookup the block device if not that way any open of a block device happening after the old device has been removed will get correct block device inode
8abc7287f6ada9f8378941b81434242db832b5f4	staging comedi cb_pcidas trigger sources are validated in the trigger sources were already validataed in the before the is called refactor the code in cb_pcidas_ai_cmd to remove the final else which can never be reached
d07913aa52fad756df40347893091aeb57455066	iwlwifi mvm init drv_stats_lock otherwise lockdep complains about the lock im not sure why we didnt see this before
4e3d1e26c2b2c40ebff69f2825fa862bfcf082d1	pass hpd_status_i915 to intel_get_hpd_pins in pre-g4x pass the correct hpd array to intel_get_hpd_pins on pre-g4x platforms this got broken in the following commit commit fd63e2a972c670887e5e8a08440111d3812c0996 author imre deak intel.com date tue jul __number__ __number__ combine i9xx_get_hpd_pins and pch_get_hpd_pins
3e655618e1316719d826eab5af3510128d45f0e6	regulator lp3971 convert to use regulator_map_voltage_ascend all regulators have ascendant voltage list in this driver thus use regulator_map_voltage_ascend is more efficient than the default regulator_map_voltage_iterate
882cc8539ee73e855a149f99e2166766ce5deb35	media omap3isp ccdc remove redundant operation trivial arithmetics clean up
f7eca374f000bd8bd6aacc2619475fdba0b7ecca	separate isa penalty calculation since commit reduce resource requirements the penalty values are calculated on the fly rather than at boot time this works fine for pci interrupts but not so well for isa interrupts the information on whether or not an isa interrupt is in use is not available to the code directly that information is obtained from the outside via acpi_penalize_isa_irq if its active argument is true then the irq is in use by isa since the current code relies on pci link objects for determination of penalties we are factoring in the pci penalty twice after acpi_penalize_isa_irq function is called to avoid that limit the newly added functionality to just pci interrupts so that old behavior is still maintained
72169755cf36ce28bed83d6742d28ce4157f7538	mtd maps sa1100-flash show parent device in sysfs fix a bug where mtd parent device symlinks arent shown in sysfs while at it make use of the default owner value set by mtdcore incidentally it seems the owner field in the concatenated mtds is not actually used so this shouldnt make much of a difference anyway
e655fb29074a7aa471bfc9f51a0139c6f636a649	mm introduce do_read_fault introduce do_read_fault the function does what do_fault does for read page faults unlike do_fault do_read_fault is pretty clean and straightforward
c21427043dec93d40e3a1af970831d1f5f15ce5d	oom_ajd dont use warn_once just use printk_once warn_once is very annoying in that it shows the stack trace that we dont care about at all and also triggers various user-level kernel oopsed logic that we really dont care about and its not like the user can do anything about the applications sshd in question its a distro issue
475e68cfdde39e6d95055999b0cb42fdb2bea0ca	powerpc align to __number__ bytes on newer cpus we use vsx loads and stores to the array for best performance we need to ensure __number__ byte alignment
d589d8b83503c1f153965f4c2747349ccca6995e	asoc wm_adsp fixup wm_adsp2_boot_work error paths currently we are not disabling mem_ena on the error path we should really do this to unwind the state back to how it was this patch adds a clear of mem_ena on the error path again there is no major issues caused by this minor fix
69d94ec6d83d84044252d9ba03f6a8970816e350	battery sysfs_remove_battery possible circular locking commit author lan tianyu intel.com acpi battery resolve the race condition in the sysfs_remove_battery fixed bug but as a side effect made lockdep unhappy with sysfs_remove_battery __float__ __float__ __float__ info possible circular locking dependency detected __float__ __float__ __float__ is trying to acquire lock __float__ at __address__ __float__ __float__ but task is already holding lock __float__ at __address__ battery __float__ __float__ which lock already depends on the new lock __float__ __float__ stack backtrace __float__ pid __number__ comm s2ram not tainted __float__ call trace __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ battery __float__ __address__ battery __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ this patch introduces separate lock to struct acpi_battery to grab in sysfs_remove_battery instead of so fix by lan tianyu is still there we just grab independent lock
e5ccf9f45d8bff6bfeafa561d2238b0e4beb415e	perf annotate factor out disasm__calc_percent factor out calculation of histogram of a symbol into disasm__calc_percent itll be used for later changes link
130e3695a3edf6bf21464f2826720a79a6afdee0	cgroup remove synchronize_rcu from rebind_subsystems nothings protected by rcu in rebind_subsystems and i cant think of a reason why it is needed
e0fa0d0189f6be61343dbff1f71bef20125576e7	pnfs always set nfs_layout_return_requested with when setting the layout return mode we must always also set the nfs_layout_return_requested flag to ensure that we send a layoutreturn otherwise pnfs_error_mark_layout_for_return could set the mode but fail to send the layoutreturn because another is already in flight
d5afc1b68a6ddc27746d31f775025afe75ec8122	dmaengine cppi41 more pm runtime fixes fix use of u32 instead of int for checking for negative errors values as pointed out by dan carpenter and while testing the pm runtime error path by randomly returning failed values in runtime resume i noticed two more places that need fixing if pm_runtime_get_sync fails in probe we still need to do pm_runtime_put_sync to keep the use count happy we could call pm_runtime_put_noidle on the error path but were just going to call pm_runtime_disable after that so pm_runtime_put_sync will do what we want we should print an error if pm_runtime_get_sync fails in cppi41_dma_alloc_chan_resources so we know where it happens
39594abcd47da2f587804dff2fedbd7ada4670d0	staging hv vmbus cleanup error codes in cleanup error codes in
88cccb89117dfe258c5d8abb55db47e0a2a7daec	mtd st_spi_fsm prepare sequences according to configuration firstly we search for our preference configuration based on a given chips capabilities then we actually set up the message sequence accordingly acked-by angus clark
e879c315c3050a1b422291e5a7509dc24ec2c7d1	staging comedi ni_mio_common use the in ni_e_init sets the to the analog output subdevice use that instead of accessing the array directly
65f5c3ea622dfca230e96e5098603f1df9e0a902	staging fix converted decimal permissions to octal ran fixed error use __number__ digit octal __number__ not decimal permissions
5505a244901f28e21d7267246511a1ca2ce79bcc	new functions added for enabling disabling mipi port ctrl reg this patch is in preparation for the dsi dual link port enable and disable related changes
ef68c8f87ed13f65df867dddf36c0e185b27b942	x86 serialize efi time accesses on rtc_lock the efi specification requires that callers of the time related runtime functions serialize with other cmos accesses in the kernel as the efi time functions may choose to also use the legacy cmos rtc besides fixing a latent bug this is a prerequisite to safely enable the rtc-efi driver for x86 which ought to be preferred over rtc-cmos on all efi platforms link __number__
7ddd4cd5c31ccaf32febe52462f9fdc915893212	asoc dapm remove always true path checks a path has always a valid source and a valid sink otherwise we wouldnt add it in the first place hence all tests that check if is non null always evaluate to true and can be removed
c53c6beddc0ebb6feb5d64488c2c0cd23dd7f43d	fix runtime suspend breaking secondary gpus same fix as for nouveau when we fail with einval subsequent gets fail hard causing the device not to open
c20974090e9093b8b69b37543cba381336c41ab7	asoc adau1701 signedness bug in adau1701_write ret is supposed to be signed here the current code will only return on error instead of a more appropriate error code such as etc
99823f457d5994b3bd3775515578c8bfacc64b04	usb cdc-acm kill acm_ready macro completely the acm_ready macro doesnt seem to do anything useful and it may prevent tty_wait_until_sent from working properly when called from close previously acm_tty_chars_in_buffer returned __number__ whenever was __number__ this means close could return before all the data has actually been written
3a48d1c08fe0db79b8647b7042e6a077588b374a	i2c prevent spurious interrupt on designware controllers dont call i2c_enable on resume because it causes a spurious interrupt
aad389634066e35be0114edca6d26efda6ab884d	drm mali-dp clear the config_valid flag before using it in wait_event config_valid variable is used to signal the activation of the cval request when the vsync interrupt has fired malidp_set_and_wait_config_valid uses the variable in wait_event_interruptible_timeout without clearing it first so the wait is skipped
8ed27d4fb1ce95e65f5a3b26b02d3b77135cc7a1	nfs add more context to state manager error mesgs
c916194cafa2787a42fe3609386f4ed6f65b23a8	media adv7842 add pad-level dv timings operations the video enum_dv_timings and dv_timings_cap operations are deprecated implement the pad-level version of those operations to prepare for the removal of the video version
5707f18c28f4df0f993d965aff1c168b69637d63	clocksource sh_tmu remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
1d3916869798755968b3cd764ab21f2bb86ffff7	mremap dont do uneccesary checks if new_len old_len the new_len old_len branch in vma_to_resize looks very confusing it only covers the checks but everything below is equally unneeded if new_len old_len change this code to return if new_len old_len new_len old_len is not possible otherwise the code below is wrong anyway
5963cf049a044f41be7dc90c83756fb245f038b4	null aliasing_ppgtt on cleanup this will allow us to carry on if weve cleaned up the ppgtt the usage for this is coming up it simplifies handling a failed ppgtt init danvet spill the secrets about failing ppgtt init
ab0ab19032d16ad63e81f2fe98ae35d76296d8d9	media tvp7002 return v4l2_dv_invalid if any of the errors occur
28ed5504ab4b211a4e589e648e5ebd1e0caa7a6a	when dpm disabled also need to vce
e85ec6c3047be0646e7c572e24869c212b685c7c	gpio omap fix omap2_set_gpio_debounce according to trms required input line stable the value of the __number__ __number__ where the value of the bit field is from __number__ to __number__ but now omap2_set_gpio_debounce will calculate debounce time and behave incorrectly in the following cases __number__ requested debounce time is and calculated debouncetime __number__ us expected value of debouncetime __number__ requested debounce time is __number__ calculated debouncetime __number__ us expected disable debounce and debouncetime __number__ requested debounce time is and calculated debouncetime and debounce will be disabled expected enable debounce and debouncetime __number__ us hence rework omap2_set_gpio_debounce to fix above cases __number__ introduce local variable enable and use it to identify when debounce need to be enabled or disabled disable debounce if requested debounce time is __number__ __number__ use below formula for debounce time calculation debounce div_round_updebounce __number__ __number__
a38c9898574967c5a8ab670f1b27d9ecf71d32cc	pwm tiecap staticize non-exported symbols both ecap_pwm_save_context and ecap_pwm_restore_context are only used in this file make them static
0eef5381b7271702c7e65c637cb46804c482a90a	asoc tegra remove redundant initialisation of compat_filter_fn setting a field in a static struct to null has no effect so dont bother and dont generate false positives for grep
e84dc1cc1503150e3bc37268a0b0f0bc0097622c	omapdss dsi fix tlpx_half reg field length tlpx_half bit field in dsi_dsiphy_cfg1 is not as accessed in the code currently fix this the bug should not have caused any problems on as the bits are unused they are used on omap5 though
0b7a41ebb1bbee4be49e53497dc98e5517f2a2a8	staging olpc_dcon replace remaining calls to use dcon_read and dcon_write shorter and understands the dcon_priv struct this transition was started long ago this converts the last few callers
1738067e5d7009c9ce9ee11c7fe9f9156b191aa9	staging hv mousevsc correctly initialize the header size correctly initialize the header size
90d700b7792a1a7d57554620796df46246e26ce6	nfsd4 simpler ordering of setclientid_confirm checks the cases here divide into two main categories if theres an uncomfirmed record with a matching verifier then this is a normal succesful case were either creating a new client or updating an existing one otherwise this is a weird case a replay or a server reboot reordering to reflect that makes the code a bit more concise and the logic a lot easier to understand
6b6f1edfdb6c41e630e4a70d64a8e8817b3170c2	omapfb connect ovl managers to all dssdevs commit omapdss remove initial display code from omapdss moved setting up the initial overlay overlay manager output and display connections from omapdss to omapfb however currently omapfb only handles the connection related to the default display which means that no overlay managers are connected to other displays this patch changes omapfb to go through all dssdevs and connect an overlay manager to them
768c69f5e9227a855a7bbb490b18628133fa891a	arm omap_hwmod add rstst_offs field to struct omap_hwmod_omap4_prcm in case of am33xx device xxx_rstst register offset is not consistent across prm prm_xxx rstst prm_per_mod prm_wkup_mod prm_mpu_mod na prm_device_mod this means we need to pass on xxx_rstst register offset information through omap_hwmod data similar to xxx_rstctrl currently this field is only applicable and used for am33xx devices
21a8e6a4853b2ed39fa4c5188a710f2cf1b92026	dont setup hdmi for port d edp in ddi_init dp_init_connector adjusts the encoder type if it is a edp panel use that to decide whether we should set up a hdmi connector or not to do so reorder the hdmi connector setup sequence in ddi_init a bit
dde3bb4159dfd872a755922b6a22e005e78389b6	acpi pm fix acpi_bus_get_device check in acpi_bus_get_device returns int not acpi_status the patch change not to apply acpi_failure to the return value of acpi_bus_get_device
7d9bb2f0653c7830e676f1012051fe9349ce2669	mac80211 iterate using station list in ap smps when changing ap smps we need to look up all the stations for this interface so theres no reason to iterate over hash chains rather than doing the simpler iteration over the station list
5c1a4c8f28059e592da4fff40c0dc54202fb5cc6	bluetooth fix missing in hci_event mgmt_pending_remove should be called with hci_dev_lock protection and all functions which calls mgmt_complete which eventually calls mgmt_pending_remove should hold the lock so this patch fixes the same
aa884a26a135f0870ca1f52f276deeb58da79fee	net ethoc remove unused members from struct ethoc the io_region_size and dma_alloc members of struct ethoc are only written but never read so they might as well be removed
f8a26fe637fc740ebb927ce25dcf036363a998df	use cached to simplify code the pci core caches the pcie capability offset in so use that instead of pci_find_capability use pci_bus_set_ops when replacing the device pci_ops and use instead of numeric constants bhelgaas changelog also use pci_exp_lnkctl_aspmc
42cae4a1c030403883277aecc53a726e329f64cf	staging comedi quatech_daqp_cs use helpers use the new helpers in the step __number__ tests of daqp_ai_cmdtest
ad7f22b55dfdf09f6d1187080f486da1ca235f01	media s5p-mfc remove meaningless memory bank assignment this patch removes meaningless assignment of memory bank to itself
be293467b87c30cfdb24f74dcb225b693e436121	net fec dont transfer ownership until descriptor write is complete if you dont own it you shouldnt write to it
0ff18d2d36efad65572990fa7febeb3ebe19da89	net ethernet qlogic set error code on failure when calling dma_mapping_error the value of return variable rc is __number__ and when the call returns an unexpected value rc is not set to a negative errno thus it will return __number__ on the error path and its callers cannot detect the bug this patch fixes the bug assigning to err bugzilla
16e910df19ae8aa2dc0f1e8502aea7a36888457b	set plane rotation directly the point behind standardizing properties into core drm state structures is also that internal code looks prettiers take advantage of that and set rotation directly in the fbdev atomic code
07eab624e5cf471450ed7b8c4ba8521e910dc9cf	lpfc fix locking for postbufq when freeing fix locking for postbufq when freeing
939533955d1f1d51e8e37d7d675646ce9d55534b	dont shadow error code of mp_map_gsi_to_irq when call mp_map_gsi_to_irq and return its error code do not shadow it note that __number__ is not an error link
0bdd5ca553ebc15060dd72684710e0a0af4481b4	is removed we also missed
9a174ad446c90d2b6a748c701efe127b2c47c315	staging unisys style remove unnecessary braces
dd55ab59b6234c73522dc533757e89e6a77c2c38	mac80211 tdls check reg with ir-relax on chandef upgrade when checking if a tdls chandef can be upgraded ir-relaxation can be taken into account to allow more channels
c63fe8f6ca3669f1d120ff70523e2911b9966574	usb core add sanity checks when using binterfaceclass with new_id check if that field is actually used and if so bail out if it exeeds a u8 make it also future-proof by not requiring exactly three parameters in new_id but simply more than two
4ddc86005b1266b81c7b1b574a2402d3d8deda44	remove unused gpio management the gpio enable and disable is done in the core so does not need to be replicated in the driver delete the unneeded code enable_cs was not referenced at all
9a8f5e07200dd80fe5979490c36b62f64f70825b	regulator allow regulators to register with no init_data this allows read-only access to the device configuration which may be useful for diagnostics
d696b5e26c9963cc68dc559f2fcaa7e0e653aa8a	be2net do not call get_die_temperature cmd for vf this is a chip wide value and the pfs already report it
8d2884ace7919eadcc220934052ba65baae986e2	staging rtl8712 remove null comparison remove null comparison by using operator problem found using check comparison to null could be written
097b4f19e508015ca65a28ea4876740d35a19eea	net allow __number__ order atomic page alloc in skb_page_frag_refill skb_page_frag_refill currently permits only order-0 page allocs unless gfp_wait is used change skb_page_frag_refill to attempt higher-order page allocations whether or not gfp_wait is used if memory cannot be allocated the allocator will fall back to successively smaller page allocs down to order-0 page allocs this change brings skb_page_frag_refill in line with the existing page allocation strategy employed by netdev_alloc_frag which attempts higher-order page allocations whether or not gfp_wait is set falling back to successively lower-order page allocations on failure part of migration of virtio-net to per-receive queue page frag allocators
8198899b94b74bb16c0b240483fd81269b199d2e	f2fs deactivate inode page if the inode is evicted if the inode page is clean during its inode eviction itd better drop the page to reduce further memory pressure
f2ca379642d7a843be972ea4167abdd3c8c9e5d1	namei permit linking with cap_fowner in userns attempting to hardlink to an unsafe file a setuid binary from within an unprivileged user namespace fails even if cap_fowner is held within the namespace this may cause various failures such as a gentoo installation within a lxc container failing to build and install specific packages this change permits hardlinking of files owned by mapped uids if cap_fowner is held for that namespace furthermore it improves consistency by using the existing inode_owner_or_capable which is aware of namespaced capabilities as of change inode_capable to capable_wrt_inode_uidgid this is hitting us in ubuntu during some dpkg upgrades in containers when upgrading a file dpkg creates a hard link to the old file to back it up before overwriting it when packages upgrade suid files owned by a non-root user the link isnt permitted and the package upgrade fails this patch fixes our problem
658f18d1b82b9f9d89f7c74cd2bcbc9b33a74870	scsi be2iscsi add missing unlock for mbox_lock julia pointed out beiscsi_boot_get_sinfo does not unlock mbox_lock on nonemb_cmd memory allocation failure
a05876b30cae6af79a5f0ff2cf5b42248aa0528f	net tc35815 fix build error due to missed api change commit phy add api for an mdio device to a bus introduces an api to access mii_bus structures but missed to update the tc35815 driver this results in the following error message in function tc_mii_probe error struct mii_bus has no member named phy_map error struct mii_bus has no member named phy_map instead of looping over the list of phy addresses to find a phy chip use phy_find_first while the intent of the original code was to return an error if more than one phy was specified this code path was never executed because the loop aborted after finding the first phy the original code is therefore semantically identical to phy_find_first thus it is simpler and more straightforward to use phy_find_first directly
aafbdb1294f026e20617d9b1028f962af2e239c7	staging comedi adv_pci1723 prefer using the bit macro as suggested by use the bit macro to define the register bits
a0846a534c5fbc40a08e2960a24bd0b8d647a840	gfs2 lock i_mutex and use a local gfs2_holder for fallocate this patch causes gfs2 to lock the i_mutex during fallocate it also switches from using a dinodes inode glock to using a local holder like the other gfs2 i_operations
34a6980c82fb1342e7064844c95aa4cf933e5ecc	arm64 smp prevent raw_smp_processor_id recursion under this_cpu_ptr ends up calling back into raw_smp_processor_id resulting in some hilariously catastrophic infinite recursion in the normal case we have this_cpu_ptrptr raw_cpu_ptrptr and everything is dandy however for config_debug_preempt this_cpu_ptr is defined in terms of my_cpu_offset wherein the fun begins my_cpu_offset per_cpu_offsetsmp_processor_id smp_processor_id debug_smp_processor_id notrace unsigned int debug_smp_processor_idvoid return check_preemption_disabledsmp_processor_id notrace static unsigned int check_preemption_disabledconst char const char int this_cpu raw_smp_processor_id and bang use raw_cpu_ptr directly to avoid that
22bcfc6a4b2288675a54b761ebcd85b9613ab9a6	use mutex_lock_interruptible for debugfs files its no fun if your shell hangs when the driver has gone on vacation and you want to know why
b7a80f341da5d40a4d483f8c9246133c8591de87	media tea575x remove useless input ioctls remove empty and useless g_input and s_input ioctls this fixes one fail of v4l2-compliance test
bf508e910b02a6107a5aa054e03c6fc8a65dae1e	nvme add missing unmaps in nvme_queue_rq when we fail various metadata related operations in nvme_queue_rq we need to unmap the data sgl
cc75cdfe1d64585d82013632b81199b1e9f1da97	alsa add const to possible places many arrays in are string arrays that should be covered by const prefix for increasing the safety and reducing the size
7bfcbd6733bec1c555e62fbc39d1d9dc47ccd852	staging cx25821 fix wrong statement indent in fix wrong brace placement and statement indent in
6a8d2511e13fdcabe4ee8460347115a50c32b0a8	regmap fix compilation when commit regmap allow regmap instances to be named changed the prototype of regmap_debugfs_init but didnt update the dummy inline used when fix this
46fdb794e3f52ef18b859ebc92f0a9d7db21c5df	shmem support rename_whiteout allocate a dentry initialize it with a whiteout and hash it in the place of the old dentry later the old dentry will be moved away and the whiteout will remain i_mutex protects agains concurrent readdir
dccbe40ff97ac24ad8e99486df1cc2143bb99ff7	greybus define more greybus classes there are new protocols defined which dont belong to any existing class add more classes to support them
ed04630b34c117347423a49af35125f5affff6b9	firmware simplify print messages for generic helpers simplify a few of the shared dev_warn and dev_dbg print messages for three reasons __number__ historically firmware_class code was added to help get device driver firmware binaries but these days helpers are being repurposed for general needed by the kernel __number__ this will also help generalize shared code as much as possible later in the future in consideration for a new extensible firmware api which will enable to separate usermode helper code out as much as possible __number__ kees cook pointed out the the prints already have the device associated as helpers are used that should help identify the user and case in which the helpers are used that should provide enough context and simplifies the messages further v4 generalize messages even further as suggested by kees cook
b43586576e54609f7970096478cf4113de18a4db	tipc remove an unnecessary null check this is never called with a null buf and anyway we dereference s on the lines before so it would oops before we reach the check
95e9ee92e20162681e9f65c25962e0606db9d149	asoc intel fix audio crash due to negative address offset there were occasional adsp crash during reboot testing __float__ bug unable to handle kernel paging request at __address__ __float__ ip __address__ snd_soc_sst_dsp __float__ pgd pud __number__ __float__ oops __number__ smp __float__ gsmi log shutdown reason the virtual address __address__ was out of range the virtual address is calculated by adding lpe base address with an offset the offset is calculated in sst_byt_parse_module by subtraction of two virtual addresses and these virtual addresses are assigned by kernel from ioremap in current driver code offset is defined as unsigned int32 struct sst_module_data u32 offset offset in fw file most of the time kernel assigned virtual addresses with greater than but sometimes it was the other way round fix the problem by declaring offset as signed int32_t
f30dfbba1682fde22f5a728f23d97a7a59a39fa0	sunrpc remove two bug_on asserts replace two bug_on calls checking the rpc_bc_pa_in_use flag with warn_on_once
450174fe9cc6a1fbc357984f2436ca5fd9960c31	tune l3 sqc credits based on actual latencies while browsing bspec i bumped into a note saying we need to tune these values based on actual measurements done after initial enabling ive checked that it indeed improves things on bxt i havent checked this on chv but here it is if someone wants to give it a go v2 add note about the discrepancy wrt to the spec in the formula calculating the credit encodings mika ville move the wa comment to the new function ville v3 keep the comment about the sqc wa in the caller ville
a4c3f909b4d9bb9430bf42ad583661df6dfa86c6	powerpc fix bug_on reporting in real mode i ran into this issue while debugging an early boot problem the system hit a bug_on but report bug failed to print the line number and file name the reason being that the system was running in real mode and report_bug searches for addresses in the region
207e35920d2a6ee1d2f48fcd6bb34b42246192d1	remove some pointless to_pci_dev calls mostly made redundant by using dev_name instead of pci_name and one instance of using instead of
f20dffc7c67b1c88aedd600031229cc97a4ddb97	aacraid driver version change
b4d2a9a09361ade9409584748b0fc2be6bbb05a0	extract when we merge pc8 and runtime pm these new functions are going to be called by the runtime functions and their callers are going to be removed v2 rebase
4c42d6cc245e8d41eb83c724cf38cdb9342ea5ba	mmc remove redundant null check before kfree in kfree on a null pointer is a no-op
a67394790a9c52657273212647e350e36a292183	nvme whitespace fixes fixing tabs inadvertently converted to spaces
a1a37647d240ffb0b6480c2ecd1b02a4c21f6926	fill dispc_ops this patch changes the current omapdss driver to fill a dispc_ops struct and set it to omapdss-base
6d31d15f21b376ac0d8a2323fd6673683bc82bd6	udf remove un-needed variable from inode_getblk the variable last_block is not needed
575f9c8604e0b4c7b36fb41fc5fd280a3c336906	fix a command submission hang regression when were out of command buffer space we turn on the command buffer processed irq without re-checking for finished command buffers afterwards this might lead to a missed irq and the command submission process waiting forever for space fix this by rerunning the command buffer submission handler whenever were out of command space this ensures both that we dont needlessly turn on the irq and that if we decide to turn on the irq we recheck for finished command buffers before going to sleep
be5ed55de011bddbb8ef7b3453edf07a26865beb	pm domains make pm_genpd_init available to modules export symbol pm_genpd_init so it can be used in loadable kernel modules
ebe06e826faed9d710c3d49fe336c74b5f3a5f2a	watchdog wm8350_wdt fix handling options while receiving wdios_disablecard option for wdioc_setoptions command call wm8350_wdt_stop to disable watchdog call wm8350_wdt_start while receiving wdios_enablecard option current code has reverse behavior
eaf33c404cd60ba4b442324766abbb5da8c94381	media em28xx fix the i2c adapter functionality flags i2c_func_smbus_emul includes flag i2c_func_smbus_write_block_data which signals that up to __number__ data bytes can be written to the ic2 client but the em2800 supports only i2c messages with max __number__ data bytes i2c_func_ic2 should be set if a master_xfer function pointer is provided in struct i2c_algorithm
54dcf0ceb8a21a898cd436617483e5646f2edcc6	micro-optimization in flipping a bit doesnt need four lines of code and gcc seems to actually generate two branches
9df2b0d40e77a80274b69d3e8567e6b354c4c0c1	staging crystalhd fix different address spaces warning this patch fixes following sparse warning in warning incorrect type in argument
501bf0354df9348dcd199d7f6f57c13fed7a45cb	asoc wm8996 put the microphone biases into bypass mode when idle when were not actively doing audio we dont need the microphone biases to be regulated noise is not important when we are not looking at the audio signal save some power by putting the micbias regulators into bypass mode when not doing audio
27e9e10391259cbe2e52d6f0ac5b16b1d898d901	net ethernet ti cpsw simplify submit routine as second net dev is created only in case of dual_emac mode port number can be figured out in simpler way also no need to pass redundant ndev struct
7c9e3c7acd107b967495c44b984f855897caf518	arm shmobile make r8a7779 intc irqpin platform data static the platform data for the intc irq pin driver seems to be global symbols make it static to allow multi-soc build
36dfef23cd26a6d3b71dd86509e34d311f1cd906	cpufreq drop check from cpufreq_parse_governor driver is guaranteed to be present on a call to cpufreq_parse_governor and there is no need to check for drop it
61382aa809e48dcd09109becf6b09715a8f492ac	explicit null comparision replaced explicit null comparision with its simplier form found using coccinelle expression e null
d05b25b97c6444fc3db4f9f70d7edbdb754a2e1a	staging csr single statement if blocks doesnt need braces remove braces to single statement if blocks
7beb3c31a5ab7594e9a339b9a69f523dd6ab7f1c	usb serial remove debug module parameter now that the dbg macro is no longer being used in the driver the debug module parameter doesnt do anything at all so remove it so as to not confuse people
c54ccb431ce6ce813bb850e8659991fc4c5bc6bc	clocksource sh_mtu2 allocate channels dynamically this prepares the driver for multi-channel support
abe4e26bb7edb7b36ef99e2e78e86de79b18f922	iio meter ade7754 add error handling in _reset and _stop_device this patch adds the error handling for the value returned from ade7754_spi_read_reg_8 with this patch the following randconfig warnings get fixed automatically warning may be used uninitialized in this function warning may be used uninitialized in this function
d2b8d695c61c4d2864eee900bebc2ced4f425645	hsi omap_ssi_port replace pm_runtime_put_sync with non-sync variant there is no need to wait for hardware to really reach idle states so just release runtime pm asynchronously
f1a094a83059b4677038befde6c4da6cfed31dbd	qlcnic fix null dereference in error path o fix for smatch tool reported error qlcnic_probe error potential null dereference adapter o while returning from an error path in probe adapter is not initialized so do not access adapter in cleanup path
15390613b6554b554205d6d76cbbbb4a018a9ce4	print out the domain owning the device we had been printing it only if the device was built with debug enabled but this information is useful in the field to troubleshoot
a616acb42f934d62e466937488fb60711ee16561	remove braces in sd_ddr_tuning_rx_cmd fixed below checkpatch warnings braces are not necessary for single statement blocks
c5e8f57b0b560b9cc9ea9166975858d023f81030	remove the unnecessary memory free in the function ipoib_cm_nonsrq_init_rx the memory is not allocated successfully it is not necessary to free it
0ec2698fe1c451606c16e21dbfbd29efce694668	check for matching hpte without taking hpte lock with smaller hash page table config we would end up in situation where we would be replacing hash page table slot frequently in such config we will find the hpte to be not matching and we can do that check without holding the hpte lock we need to recheck the hpte again after holding lock
66511fa4a7902fb9ffdffc8c153f1758817fb8a4	regulator ab8500-ext dont update if set_mode fails this ensures status is still correct if set_mode call fails otherwise get_mode may return wrong status if a set_mode call fails
7be4881846cfa67f968eaf5b7b50d9623a652afb	hwmon fam15h_power disable preemption when reading registers we need to read a bunch of registers on each compute unit and possibly on the current cpu too disable preemption around it otherwise you get bug using smp_processor_id in preemptible __number__ code caller is fam15h_power cpu __number__ pid __number__ comm systemd-udevd not tainted hardware name hp hp elitebook __number__ bios n73 ver __float__
192d367f218d0cd94aa9b5059992e4aa19ec5b36	serial sh-sci drop the sci_fck clock fallback all platforms that used to define an sci_fck clock have now switched to the fck name remove the fallback code
ca7edd16ae488fe0eff5d4f8eb17c5caa8dcc5fa	mfd enable device tree support for the db8500-prcmu this patch will enable probing to occur during a device tree enabled boot the irq base is expected to be located in and will be fetched from the dt itself we also prevent any of the db8500 regulators from being registered here as they will be enabled via dt instead
6dd1e357372c21ec37b6902380bd47b278d168f1	arm omap fix warning with lpae build some omap3 code is throwing a warning in function omap3_save_secure_ram_context warning cast to pointer from integer of different size in reality this code will never actually execute with since cortex-a8 doesnt support it so downcasting the __pa is safe in this case
a0fcbd95354e5ac2400be74077cc668c91429ea7	add is_bdw_gt3 macro it will be usefull to specify that affects only bdw gt3
a3a7cab17d36bb591867a6d3ea41b5fdb4e44d87	of fix null pointer related warnings in file fixes the following sparse warnings warning using plain integer as null pointer warning using plain integer as null pointer warning using plain integer as null pointer
61e81abdceff5c0d756c04855f825f516141b516	nfp document expected locking in the core document which fields of nfp_cpp are protected by which locks
b9c0f65feab8a6dd4f37fdd8150cf5fe716304f5	mtd nand lpc32xx use mtd_ooblayout_xxx helpers where appropriate the mtd_ooblayout_xxx helper functions have been added to avoid direct accesses to the ecclayout field and thus ease for future reworks use these helpers in all places where the oobfree and eccpos arrays where directly accessed
5954a5046b32637535eb819a478a11ab5b84be80	usb gadget constify usb_gadget_ops structures declare usb_gadget_ops structures as const as they are only stored in the ops field of a usb_gadget structure this field is of type const so usb_gadget_ops structures having this property can be declared const too done using coccinelle disable identifier i position p static struct usb_gadget_ops identifier position p struct fotg210_udc fotg210 position identifier on disable identifier struct usb_gadget_ops i file size before text data bss dec hex filename __number__ __number__ __number__ __number__ file size after text data bss dec hex filename __number__ __number__ __number__ __number__
e6d7a16f5ff7d048fbf4b4791825f5b91ebe21ab	enable regulators before clocks to avoid warnings hpd regulators need to be enabled before clocks otherwise clock driver will report warning
d42b5de35fb058513367d1a9ee146be5aaab7c6a	mtd change the location of the onfi detected log some strange nand chipsuch as hynix h27ubg8t2a can pass the onfi signature check so the log can be printed out even it is not an onfi nand indeed change this log to the end of the function print out the log only when we really detect an onfi nand
841c564499dca9f4819ae2a5f5beb31694f9634e	bluetooth remove redundant irk lookup in mgmt_device_found now that we have the process_adv_report function doing the irk lookup and updating the bdaddr we dont need to do this anymore in in the mgmt_device_found function
c4beedb8a914af9c8c1b6e67c753adf411e05160	input tm2-touchkey use len_on as boolean value instead of led_full commit leds add led_on brightness as boolean value has introduced the led_on enumeration value that can be used instead of led_full which has more of a linear value because the tm2-touchscreen doesnt have brightness levels but its a simple led use led_on instead of led_full
9c8adb8ff5b7a9530d6e0e338bda7cf952512325	staging asus_oled change printk calls to dev_xxx use dev_err whenever a struct device is present none of the printk calls had levels set but looked like they should probably be dev_err
d1a8c70676c7e2cd4b80f494aed17b5813f2be44	befs dump inode_size superblock information befs_dump_super_block wasnt giving the inode_size information when dumping all elements of the superblock add this element to have complete information of the superblock
b0409fa0940b59dc0c313eb424cfbc4730778ecc	qed correct pf-sanity check seems like something broke in commit qed introduce vfs and the function no longer verifies that the vf is indeed a valid one
0b73aa63c193006c3d503d4903dd4792a26e1d50	spi fix handling of cs_change in core implementation the core implementation of cs_change didnt follow the documentation which says that cs_change in the middle of the transfer means to briefly deassert chip select instead it followed buggy drivers which change the polarity of chip select use a delay of between deassert and reassert simply from pulling numbers out of a hat
b38f99347871d7fc49e6367395dce0d757f6ab8d	kvm vmx enable ept bits if supported by turning on relevant bit in eptp in ept page structure entry enable ept bits if processor supported
46c4a7551d9a8b89e3d705f1dab32b83c57493d6	omapdss hdmi omap4 complete register definitions for core add missing register definitions mainly for colorspace conversion video timing and interrupt handling
c7930f37c1300d7ca4d8ee1b80ca28c3d889c255	media exynos4-is fimc-is-i2c dont print error when adding adapter fails the core will do this for us now
d19e19de48aa0b90c56cd93c8a46ebac46273429	cgroup simplify cgroup_load_subsys failure path now that cgroup_unload_subsys can tell whether the root css is online or not we can safely call cgroup_unload_subsys after idr init failure in cgroup_load_subsys replace the manual unrolling and invoke cgroup_unload_subsys on failure this drops cgroup_mutex inbetween but should be safe as the subsystem will fail try_module_get and thus cant be mounted inbetween as this means that cgroup_unload_subsys can be called before css_sets are rehashed remove bug_on on from cgroup_unload_subsys
b8d69c16a0bdc2cae1ad709f0a9e6a2484c457a9	fujitsu-laptop register backlight device in a separate function move code responsible for backlight device registration to a separate function in order to simplify error handling and decrease indentation simplify initialization of struct backlight_properties
27cbba60e045d3e71e726d6f0781ed3ec2b2ce5c	staging rtl8192e rename rtl8192_close use naming schema found in other rtlwifi devices rename rtl8192_close to _rtl92e_close
b06eef45cab7231f59b23d98ce78c090896b6103	add wakeup support mark the pl031 as wake-up capable so that rtcwake and suspend test can work
34a26b99b78148ff342801e732bf20014c291d03	namei get rid of we can do fdput under rcu_read_lock just fine all we need to take care of is fetching value first
93e26d4e44e65ef803ea35cfd0fe14fd8af49cb0	asoc convert wm8904 to devm_kzalloc
445f82492f2256b9a7c09292b458e152e7fae7f1	vme use to_pci_dev use to_pci_dev instead of open-coding it
7ba25510ca88bed86e0e1e2537ae914e837afa99	staging comedi poc cleanup usage this legacy driver does no additional probing so the will already be properly initialized by the comedi core before calling the function remove the unnecessary initialization of and use it when requesting the resources instead of the open-coded strings
a3ce5ccd50ee24313fa3e55d2cafc6da7dfcbe18	wil6210 treat unhandled event as warning instead of error fw is allowed to generate wmi events that are not handled by this driver treat such case as warning instead of error
b2a9a3b818db727479cc2b9c2924e4ab9a4bbb07	asoc es8328-i2c fix i2c_device_id name field in es8328_id the convention for i2c_device_id name does not need to have company prefix
cb034407ec3f816540f359300cda1122faabdbbd	arm sa1111 fix error code propagation in sa1111_probe ensure that we propagate the platform_get_irq error code out of the probe function this allows probe deferrals to work correctly should platform_get_irq not be able to resolve the interrupt in a dt environment at probe time
a4820acfaf179982a86783ee0c0d5d39a9c5ab20	staging ft1000 drop unneeded cast on netdev_priv the result of netdev_priv is already implicitly cast to the type of the left side of the assignment the semantic patch that fixes this problem is as follows type t t x t
4083aa986f0447d562c494e75d525c1b1df71a2a	nvmet_fc sync nvme ls reject reasons with spec nvmet_fc sync nvme ls reject reasons with spec
fe4034a3fad748d2fce87fe635359dcde83f188b	arm exynos add missing of_node_put when parsing power domains add missing of_node_put to __number__ error return path if allocating memory for exynos_pm_domain failed __number__ second iteration over power domains if a child domain was not present or was incomplete
36b07d15a656b657beaf9e6357a341768192fad2	ath9k check pdata variable before dereferencing it due to my recent commit ath9k allow to load eeprom content via firmware api smatch complains about that the pdata variable in ath9k_hw_init can be null and it is dereferenced before checking that that is absolutely correct check the pdata variable before using it to avoid a null pointer dereference
ea236d0704b9b9e7742b107313bbdddbba62724a	nfsd4 exchange_id check creds before killing confirmed client we mustnt allow a client to destroy another client with established state unless it has the right credential and some minor cleanup note our comparison of credentials is actually pretty bogus currently that will need to be fixed in another patch
3f7a09f44e5ef8a2629842f2d22892114e603fc1	fix incorrect log for memory-less node when booting on numa system with memory-less node no memory dimm on this memory controller the print for setup_node_data is incorrect numa initmem setup node __number__ mem __address__ it can be fixed by printing mem __number__ when end_pfn is __number__ but print will be more useful
2f6e38f3cd17a7858112f538c1700c747170db1f	tmpfs enable nosec optimization let tmpfs into the nosec optimization avoiding file_remove_suid overhead on most common writes set ms_nosec on its superblocks
9437eca18170008a085a61bf96c99f2d923b0393	use pci_is_pcie to simplify code fix fix f0308261b1 use pci_is_pcie to simplify code i accidentally merged v2 instead of v3 so this adds the difference without this cap is the left-over pci-x capability offset and were using it as the pcie capability offset bhelgaas extracted diff
d38f1c3715d6de00d3b7a09254f9a0930d611bed	rtl8xxxu rtl8723au introduce a pointer to efuse
d8f1bd2ffcce6af1ace4f1efb327765144aa0755	bcma fix regression in interrupt assignment on mips the wrong interrupts where assigned to the cores in bcma_core_mips_init this caused at least my serial console not to response to any input this was caused by this patch which changed the order of the cores in the list commit c334e25c9f3a95f2bd6b79fedc5170f17245b1c7 author rafa miecki gmail.com date wed jul __number__ __number__ bcma add new cores at the end of list this should be fixed properly later so that the correct interrupt numbers are assigned to the cores independently from the ordering of the list this patch restores the old behavior again i will look into the problem more deeply later i also changed the order of the list with the cores and their assigned interrupt number which gets printed to the log now they are printed in the same order like all the other lists of cores and like it was done before the patch which changed the order
8ade2b8281d58a8336a1742a44ceffd9d07d6629	do not attempt to acquire a reservation while in an interrupt handler mutexes should not be acquired in interrupt context while the trylock fastpath is arguably safe on all implementations the slowpath unlock path definitely isnt
99531d9bb76c649df15311c717deefdff7cc5b7b	drm allow creating blob properties without copy make the data parameter to drm_property_create_blob optional if omitted the copy will be skipped and the data will be empty
40afbb657352e92726c40cc4ddf3cf0be6800dba	mrf24j40 use level-triggered interrupts the mrf24j40 generates level interrupts there are rare cases where it appears that the interrupt line never gets de-asserted between interrupts causing interrupts to be lost and causing a hung device from the drivers perspective switching the driver to interpret these interrupts as level-triggered fixes this issue
7902c16b9a5b7001d79940d6b4e99366d6e525d8	staging dwc2 check for null pointer before dereferencing it we were testing pointer for null after we had already dereferenced it
42ff6572e5a4a7414330a4ca91f0335da67deca9	work around gen7 blt ring synchronization issues previous to this commit testing easily reproduced a failure where the seqno would apparently arrive after the irq associated with it with test programs as simple as for glcopypixels0 __number__ __number__ __number__ glfinish various workarounds weve seen for previous generations didnt work to fix this issue so until new information comes in replace the irq waits on the blt ring with polling
547cafa3efc3f12101cafd454e651c9a5a8feae4	asoc intel skylake remove unused ret in skl_tplg_mixer_dapm_post_pmd_event a variable ret is initialized but not used we dont check return of skl_delete_pipe so remove the assignment as well so remove this variable in function warning variable set but not used int ret __number__
f208ce10046888052d3a5e9fc88b7c1b819877d2	net fec quiesce packet processing when taking link down in fec_enet_adjust_link when the link goes down the adjust_link method will be called but there is no synchronisation to ensure that we wont be processing some last remaining packets via the napi handlers while performing a reset of the device add the necessary synchronisation to ensure that packet processing is complete before we stop and reset the fec
437b29d1159af16b54b6571efb92c6e048d03c15	staging rdma hfi1 file_ops replace align with page_align contains a helper function page_align which aligns the pointer to the page boundary instead of using alignexpression page_size this change was made with the help of the following coccinelle semantic patch expression e symbol page_size aligne page_size page_aligne is_alignede page_size page_alignede
aff041af948f5cdf51e2115f267957a89f28ac0f	asoc sta32x move regulator acquisition to i2c probe this is better style as it ensures we dont try to do the asoc probe without required resources also convert to devm_ while were at it saving a bit of code and fix a leak of enable on error
e0884772d323b745c65baa65df391b1c70829410	ioatdma removing hw bug workaround for __float__ and earlier and earlier hardware has silicon bugs that are no longer needed with the new hardware we dont have to use a null op to signal interrupt for raid ops any longer this code make sure the legacy workarounds only happen on legacy hardware
db6d857b819a00627a3bd911f49ee3156766bba8	netfilter nft_quota fix overquota logic use xor to decide to break further rule evaluation or not since the existing logic doesnt achieve the expected inversion
8301da53fbc1dff07c96f7ebf32bda331e4775e3	remove change_pte mmu_notifier call-back all calls to this call-back are wrapped with making this notifier pretty useless so remove it
e08dc1325feaf49eec392ee52feb2974ec3f5155	p9 avoid unused variable warning commit fs take the acl checks to common code removed the use of the acl variable in v9fs_iop_get_acl but left the variable definition around remove it to get rid of the warning in function warning unused variable
7f294e4983b67be802277d139522837b3ce5769f	arm mmci adjust calculation of f_min the arm version maximum clock divider is __number__ whereas for the st variants its __number__ lets use div_round_up for both cases so we can see clearly whats going on here use div_round_up to clarify elder code
f42a34b2f10c411ef45f247f3000ed03ba4e80c0	btrfs fix unblocked autodefraggers when remount the new mount option is set after parsing the remount arguments so it is wrong that checking the autodefrag is close or not at btrfs_remount_prepare fix it
6bbb614ec478961c7443086bdf7fd6784479c14a	unexport set_memory_ro and set_memory_rw this effectively unexports set_memory_ro and set_memory_rw functions and thus reverts a03352d2c1dc x86 export set_memory_ro and set_memory_rw they have been introduced for debugging purposes in e1000e but no module user is in mainline kernel and we explicitly do not want modules to use these functions as they protect ebpf interpreted jited images from malicious modifications or bugs outside of ebpf scope i believe also other functions should be unexported on x86 for modules link
e011143454606de70eba1db5d99454eec0017fdb	asoc atmel disable error interrupt as once the error interrupt is triggered it can not be cleared so disable it no side effect found while testing on sama5d3xek and at91sam9x5ek boards
be136ed30a4345e42ad846c1b9d925932dab303b	hyperv adjust the size of sendbuf region to support ws2008r2 ws2008r2 is a supported platform and it turns out that the maximum sendbuf size that ws2008r2 can support is only make the necessary adjustment
8b373ffc797713337f42f0e58d832d5cae86752c	usb ehci use for dma configuration set the dma for ehci from sysdev the sysdev is pointing to device that is known to the system firmware or hardware
026630d09ba7b6cd44a43b92ad256c28a9e3ddc2	usb host xhci remove unused trb var in xhci_irq the union xhci_trb variable is defined and assigned inside the xhci irq handler function but is never used
0fa73b86ef0797ca4fde5334117ca0b330f08030	add page_aligned helper to test whether an address is aligned to page_size
1487a688d8ea596e6710b0d256300ab10ce99284	ceph properly zero data pages for file holes a bug is found in striped_read of striped_read calls ceph_zero_pape_vector_range the first argument page_align read ret passed to ceph_zero_pape_vector_range is wrong when a file has holes this wrong parameter may cause memory corruption either in kernal space or user space kernel space memory may be corrupted in the case of non direct io user space memory may be corrupted in the case of direct io in the latter case the application doing direct io may crash due to memory corruption as we have experienced the correct value should be initial_align read ret where intial_align o_direct buf_align io_align compared with page_align the current page offest initial_align is the initial page offest which should be used to calculate the page and offset in ceph_zero_pape_vector_range
f0501e81fbaa51cfc8c28c60bc3fc7965fde94f4	mtd bcm47xxpart alternative magic for board_data partition some devices like wndr3700v3 have board_data without mpfr magic some extra header or extra nvram around in such case we have to look for another magic which is bd bd bd probably stands for board data its located far far away so instead of extending buffer add another mtd_read
284a8dd6f0fb16029198b5b34437499d504b567c	alsa snd-usb-audio skip un-parseable mixer units instead of erroring some interfaces reference endpoints which do not exists to accomodate these do not fail completely but skip over them this allows the electrix ebox-44 with earlier firmware to be detected and used for audio
89cb86c3b2a7ec3326dc7ffe5cfb850818f78ea0	i40e remove support for vf unicast promiscuous mode remove the ability of a vf to set unicast promiscuous mode considered to be a security risk to allow vfs to receive traffic intended for other vfs so dont allow it simply ignore the flag also fix it to send the correct seid to aq for multicast promiscuous set change-id icb9c49a281a8e9d3aeebf991ef1533ac82b84b14
4e2b07e9ab8f8ddc7f6dbb6617ddb2bc704d15e9	greybus gb-vibrator remove useless if in timeout_store val is an unsigned long so there is no point in checking if it is less than zero
3b24774e1fb90a40836e96e39a851a774679efff	nvme fix check_flush_dependency warning if the controller fails and is degraded after a reset we need to kill off all requests queues before removing the inaccessble namespaces this will prevent del_gendisk from syncing dirty data which we cant due from a wq_mem_reclaim work queue
e24ff467e12e1560de753313976c46e84fa6306a	fix edid length computation the length of each edid block is edid_length and number of blocks is __number__ we need to multiply not add them this causes wrong edid to be passed on and is a regression introduced by d2ed34362a52 drm introduce helper for replacing blob properties danvet add cc and fix commit summary
30d9861ff9520e2a112eae71029bc9f7e915a441	btrfs optionally avoid reads from device replace source drive it is desirable to be able to configure the device replace procedure to avoid reading the source drive the one to be copied whenever possible this is useful when the number of read errors on this disk is high because it would delay the copy procedure alot therefore there is an option to avoid reading from the source disk unless the repair procedure really needs to access it the regular read req asks for mapping the block with mirror_num __number__ in this case the source disk is avoided whenever possible the repair code selects the mirror_num explicitly mirror_num __number__ this case is not changed by this commit
807845e3641d3dc4c41ec84c5e576250c7218abf	alsa jack remove exporting ctljack functions snd_kctl_jack_new and snd_kctl_jack_report are internal only now so make them static
3e004eea56b4f2cb6768ebe9000c830eda0c71b1	make sb_is_blkdev_sb return bool when config_block undefined currently when config_block is defined sb_is_blkdev_sb returns bool while when config_block is not defined it returns int lets keep consistent to make sb_is_blkdev_sb return bool as well when config_block isnt defined no functional change
8a95079668bf35b265d3bb6381b8badb5bfa826a	media media-device set topology version __number__ at media registration the g_topology ioctl is used to get a graph topology and since in the future a graph can be dynamically updated there is a way to know the topology version so userspace can be aware that the graph has changed the version __number__ is reserved to indicate that the graph is static no graphs updates since the media device was registered so now that the media device initialization and registration has been split and the media device node is not exposed to user-space until all the entities have been registered and links created it is safe to set a topology version __number__ in media_device_register
aebf045382edb32bd763d8edea02a559e7dc41e9	n_tty protect minimum_to_wake reset for concurrent readers with multiple concurrent readers each waiting to acquire the atomic_read_lock mutex a departing reader may mistakenly reset minimum_to_wake after a new reader has already set a new value protect the minimum_to_wake reset with the atomic_read_lock critical section
5f64a7dbf593c2317f132c8252d04cdfe8d4b104	dsa fix freeing of sparse port allocation if we have defined a sparse port allocation which is non-contiguous and contains gaps the code freeing port_names will just stop when it encouters a first null port_names which is not right we should iterate over all possible number of ports dsa_max_ports until we are done
1f2aab01ba2f6c591dee93daf4b57fd9785f3b41	m68knommu fix broken coldfire slice timer read_clk code there is a race on reading the coldfire slice timer current count and the total clock count so far interrupts are off and we may have just missed getting a new timer wrap event interrupt check for this and adjust the cycle count and current read count accordingly also the slice timer counts down from the terminal count so in read_clk we need take the current clock count away from the terminal count
7365abbade07f9181cbd013669642f129e9ec635	check write bitness using in_compat_syscall uhid changes the format expected in write depending on bitness it should check the syscall bitness directly
060e3fe398479c067e8edcee5862500534cb75dd	staging comedi adv_pci1710 remove ai_timer2 from private data this member of the private data is set to __number__ but it is never used just remove it
71c01379d1c57c96d833202d6b8128ccffc42665	staging comedi fl512 usleep_range is preferred over udelay fix issue check usleep_range is preferred over udelay see replace the udelay with usleep_range with a reasonable upper limit
c7d059cae31f328bbe2be6ab737226d338f22486	serial omap always set tcr we always setup the tcr register in the software flow control path and when hardware flow control is enabled remove this redundant setup and place it before we setup any hardware flow control
3e15c35374305cea79ed73dec66143b569ee9204	add info to dpm debugfs output track whether uvd or vce are enabled in debugfs
0409c9a5a7546043d32e8c46df0dcaf65f97f659	net fib6 fib6_commit_metrics fix potential null pointer dereference when ipv6 host routes with metrics attached are being added we fetch the metrics store from the dst via cow through dst_metrics_write_ptr added through commit e5fd387ad5b3 one remaining problem here is that we actually call into inet_getpeer and may end up a new peer from the kmemcache which may fail example trace from perf probe where create is __number__ ip __number__ __number__ __float__ __address__ kmem_cache_alloc inet_getpeer ipv6_cow_metrics fib6_commit_metrics therefore a check for null on the return of dst_metrics_write_ptr is necessary here joint work with florian westphal
b5fda434b13de8328c57421e31ac91d401c93b97	usb serial pl2303 fix line-setting error handling make sure to return an error on zero-length transfers when retrieving the line settings even if the driver currently ignores the return value also remove a redundant check for short transfer when setting the line settings
f57d9a72d478e5278163eb1104e45ae69c92095c	set attr_xtime_set to make atime update properly to make atime update properly between __float__ client and server this patch includes the following fixes if mds_attr_xtime is set without mds_attr_xtime_set and the client does not have obd_connect_full20 convert it to la_xtime in mdt_setattr_unpack set both mds_attr_xtime mds_attr_xtime_set for timestamps in ll_prepare_close this allows us to fix the server-side timestamp setting in the future remove attr_unpack and convert the flags from mds_attr_ to directly in mdt_attr_valid_xlate instead improve test_23 picked llite part for upstream kernel submission intel-bug-id lustre-change
1eb8f7a7da6d3b36fcc339d7bbddbf8315a5c1dd	gianfar fix alloc_skb_resources on cleanup path should gfar_init_bds return with inside gfar_alloc_skb_resources free_skb_resources will be called twice in a row on the cleanup path leading to duplicate kfree calls for resulting in segmentation fault this patch prevents the segmentation fault to happen in the future set to null and corrects the error path handling for gfar_init_bds
d233d70771326769838cc4689ba034631558c6c3	sunhme remove unnecessary setting of is being unnecessarily set during ring init and skb alloc in rx it is already being set to the proper value when eth_type_trans is called on packet receive and the is not referenced anywhere else in the code
60abc786dd3b5d6917d63fd789c9fed772f65039	aoe replace kmalloc and then memcpy with kmemdup
53d6d68f3c1792bce0144d8499435468e425a995	dmaengine set_dma40 ignore spurious interrupts some dma channels may be used by other cores in the soc this patch modifies the dma interrupt handler to ignore interrupts from unknown channels
1ea12fef83c3269eb7ba04f1d20db00c581515b2	staging dgap fix overflows and format strings the boot message buffer could potentially overflow the stack and the heap additionally make sure format strings could not leak into printk calls
e045907c0a08d09cbc992cd00f788ef0dd83889d	fix error return code convert a __number__ error return code to a negative one as returned elsewhere in the function a simplified version of the semantic match that finds this problem is as follows identifier ret expression if return ret __number__ when ret e1 when x e2 when ret e3 x null when ret e4 return ret
3282998c8010f6eb42950d628f4df980da528b75	staging greybus audio_module remove redundant oom message all kmalloc-based functions print enough information on failure
deb65870b5d9d939bb319661dd489272a6de665d	imx-tve check the value returned by regulator_set_voltage regulator_set_voltage may fail so we better check its return value and propagate it in the case of error
76cb501924258b222317d15ccd7df8feb057e593	staging comedi pcl812 use comedi_buf_write_samples for aesthetics use comedi_buf_write_samples to add the sample to the async buffer the core will add the comedi_cb_block event when data is written to the async buffer remove the nnecessary event in the driver
70401f4edc331c3c8068fc13b93d784a72de053e	crypto qat update init_esram for c3xxx dev type there is no esram on c3xxx devices so we dont need to wait for it to initialize
f0ff92fbfa14c1cf8c0346f1dde9c3eda26d5abf	bluetooth fix link security setting when powering on if a controller is powered on while the hci_auto_off flag is set the link security setting hci_link_security might not be in sync with the actual state of the controller hci_auth this patch fixes the issue by checking for inequality between the intended and actual settings and sends a hci_write_auth_enable command if necessary
72ccb86354f909bebac7722aa378d4409684a4d3	staging bcm replace b_uint16 with u16 in this patch replace b_uint16 with u16 in
85962d2248fae84ffaa04f09826596d20af56819	hwrng amd convert to new hwrng read api this patch convert the hwrng interface used by amd768-rng to its new api by replacing by read
b41caa99a25f62326be451592c493de29347d142	greybus pwm fix config-request alignment fix alignment of the duty and period-fields in the config request which should follow the which-field without any inserted padding
7bd49fe120622b130ca0c4675a17a53e12aba99c	use instead of open-coding it no need to swap the upper and lower byte by hand if there is a helper function which already does this
503c1cdbfb5c7570bf64d7b04847861dfd6328fa	greybus static functions
c20851035126cc1d97c337083f98b797eed155a3	mac802154 add netdev qeue helpers this patch adds a new file which contains utility functions for drivers etc this file contains functions to start and stop queues for all virtual interfaces this is useful for asynchronous handling by driver level
625c8e4a2f307650fd18cf4a4f897260c800db89	amd-xgbe fix the xpcs mmd debugfs support the debugfs support for the xpcs registers did not properly use the specified mmd xpcs_mmd entry which resulted in the default mmd value always being used update the debugfs support to generate the proper mmd register value
1007c692264536d80ad61c1584670583c687652c	staging rtl8712 remove useless printing line this patch removes an unneeded call to printk
d65621c496a2afe6c6724cbd7150e2ec60b42f13	dont read head mmio register in lrc mode the logical ring code was updating the software ring head value by reading the hardware head register in lrc mode this is not valid as the hardware is not necessarily executing the same context that is being processed by the software thus reading the head could put an unrelated undefined effectively random value into the head a bad thing for the free space calculations
e831e6cf3acb058d898411367a582deef80e32f8	cifs make smb_msg local to read_from_socket if msg_controllen is __number__ then the socket layer should never touch these fields thus theres no need to continually reset them also theres no need to keep this field on the stack for the demultiplex thread just make it a local variable in read_from_socket
e9018af0b8897b02dc8e83e6cd75391afcadf894	media au0828 avoid race conditions at rc stop as the rc kthread can re-enable ir int we should first cancel the kthread and then disable ir int while here remove a temporary debug printk
d96a83def2f70ea7b26268efdd44eb9f1e400171	i40e dont add broadcast filter for vfs now that all vsis are configured to receive broadcasts as default we dont need to add a filter this eliminates an annoying but harmless error message each time vfs are created or reset change-id i4cd6339684df45b0d2722133eeb84c14fa93ea19
a7de5506004415527035d7858b5993c906e2544e	re-enable power well support now that the known issues are fixed lets try again and re-enable the power well support
cc5e461ae8e071a95bf6ee917b50998dc31cae17	perf hists get rid of position field from struct hist_entry its not used anywhere lets get rid of it link
33b1be99fb4cfd0d7d483a9947f9c95d6d17ede9	drm etnaviv clean up gpu command submission clean up the gpu command submission path to prepare for the next change this makes the next change easier to read and understand
ba366c25bc0b2a6f5e4d3fab07851e6f39b883be	implement temperature reading
759e612bf96627b64fcafe4174b3f6f2dedf2c0d	perf stat use strerror_r instead of strerror use strerror_r instead of strerror in error message for thread-safety link
dbef0c1c4c5f8ce5d1f5bd8cee092a7afb4ac21b	namespaces simplify copy_namespaces so it is clear what is going on remove the test for the impossible case where null fork will never be called with null only call get_nsproxy when we dont need to generate a new_nsproxy and mark the case where we dont generate a new nsproxy as likely remove the code to drop an unnecessarily acquired nsproxy value
bd16a7248042dc62285fdc5598ec4888c0865819	net dsa mv88e6xxx add support for marvell the marvell has been tested successfully without further changes add entry to the table of supported devices
1e970b7d6d4fb3d715a34842ec00646f4b94bd72	gpio pxa simplify bank_off macro offset calculation the macro bank_off which calculates the base offset for each gpio port the macro is needlessly complex and unreadable simplify the calculation to a simple math operation
73b62bd085f4737679ea9afc7867fa5f99ba7d1b	virtio-net remove the warning before xdp linearizing since we use ewma to estimate the size of rx buffer when rx buffer size is underestimated its usual to have a packet with more than one buffers consider this is not a bug remove the warning and correct the comment before xdp linearizing
f68cba4e9f7cdd3808631af286cc3244c5e57dab	inline srpt_sdev_name srpt_sdev_name is too trivial to keep it as a separate function hence inline this function
f0e0951007b051046587e73ffc9716caa024d537	bluetooth correct debug print specifier for u16 objects some functions print u16 objects as others as patch ensures that opcodes printed are the in the same format and consistent with bluetooth code
9f8ce967caed427f78d00bb6b07d79cb040a88bd	bluetooth fix clearing of hci_pending_class flag when doing reset hci_pending_class is one of the flags that should be cleared since its used for a pending hci command and a reset clear all pending commands
e695abb3c8b1b758843a1db2a73c98b3d14c173a	usb phy msm use usb_add_phy_dev to register device there could be more than one phys on the platform this will allow all of them to be registered successfully
bc7c49bc77ba95609236f23082a38ec160416a8d	report scale as fractional value move the complexity of calculating the fixed point scale to the core
313483dd72289ff0b7dff4207032d94dbce39cf6	unfreeze pe on allocation this unfreezes pe when its initialized because the pe might be put into frozen state in the last hot remove path its not harmful to do so if the pe is already in unfrozen state
07100be7e0495ff39237d48886bca7396c873db7	dynamic_debug fix whitespace complaints from style cleanups
c01b5e7464f0cf20936d7467c7528163c4e2782d	input xpad dont depend on endpoint order the order of endpoints is well defined on official xbox pads but we have found at least one pad that doesnt follow the standard titanfall __number__ xbox one controller fortunately we get lucky with this specific pad because it uses endpoint addresses that differ only by direction we know that there are other pads out where this is not true so lets go ahead and fix this
d99b1d8912654c4bdeb51063d2e934afc2372cc2	percpu_counter update debugobjects fixup callbacks return type update the return type to use bool instead of int corresponding to cheange debugobjects make fixup functions return bool instead of int
7c62a164faea430c6e4c411eb0870640cf51a6e5	refactor cpu edp pll handling a bit this prepares a bit for the next big patch where we switch the semantics of the different clocks in the pipe config around since ive broken cpu edp pll handling in the first version ive figured some refactoring is in order split out on request from paulo zanoni
0c1dc6b27dac883ee78392189c8e20e764d79bfa	sched make sched entity usage tracking scale-invariant apply frequency scale-invariance correction factor to usage tracking each segment of the running_avg_sum geometric series is now scaled by the current frequency so the utilization_avg_contrib of each entity will be invariant with frequency scaling as a result utilization_load_avg which is the sum of utilization_avg_contrib becomes invariant too so the usage level that is returned by get_cpu_usage stays relative to the max frequency as the cpu_capacity which is is compared against then we want the keep the load tracking values in a type which implies that the max value of must be lower than __number__ is the max weigth of a task as load_avg_max __number__ arch_scale_freq_capacity must return a value less than sched_capacity_shift __number__ sched_scale_capacity __number__ so we define the range to in order to avoid overflow link
703ee73a41a74210dde9050c6669053866b133a0	mac80211 mesh add missing case to perr processing when the nexthop is unable to resolve its own nexthop it will send back a perr with a zero target_sn according to section step b in the __number__ standard that perr should be forwarded and the associated should be incremented neither one of those was happening which is rather bad because the originator was not told that packets are black holing
83e0ed700d4d2cad2f555ae536fafd531f55b6d0	nfsd use hash table from cache detail in nfsd export seq ops hard-code is redundant and will prevent from making caches per net ns
d1beadd1cb649404bfa2c3d92f77dbcb15b712e5	netfilter xt_conntrack add flag to support aliases the patch adds the flag to denote the state alias as of the subset of the conntrack match
1e6e97541ab51b65019bd823506af81ebb3730fc	media pulse8-cec set correct signal free time dont hardcode the signal free time to __number__ bit periods instead use the value for the signal free time as passed in by the cec framework
dd2887e7c36d0be986ef17a9dbec904e3e334566	kvm s390 remove the sanity checks for kvm memory slot to model the standby memory with memory_region_add_subregion and friends the guest would have one or more regions of ram remove the check allowing only one memory slot and the check requiring the real address of memory slot starts at zero
59be422e4ce10e3d49d4c9407a80fab8a9b7bc84	stm class support devices with multiple instances by convention the name of the stm policy directory in configfs consists of the device name to which it applies and the actual policy name separated by a dot now some devices already have dots in their names that separate name of the actual device from its instance identifier such devices will result in two or more who can tell dots in the policy directory name existing policy code however will treat the first dot as the one that separates device name from policy name therefore failing the above case this patch makes the last dot in the directory name be the separator thus prohibiting dots from being used in policy names
c6d5f989e14f36d5ff71a9b79a6d3c3bf06c185f	fix pointer-integer size mismatch warning in tps65217_probe fix up the following pointer-integer size mismatch warning in tps65217_probe in function tps65217_probe warning cast from pointer to integer of different size chip_id unsigned
11ee5ac47b78d7e117c84147596a124ce6421a3a	split enable_iommus routine split the enable_iommus routine so that a part of it can run in early code
d8afc6fd95496204174f19af0cb39eefee0c3e8a	use clockevents_calc_mult_shift we can use clockevents_calc_mult_shift instead of doing all the work ourselves
4ac887cfdad909f16ee1886fe4fa19b452fc7fd3	bcma return error in bcma_sprom_get when fallback fails when not sprom is available a fallback mechanism is used however when that fails the code currently continues this patch assures that the bcma_sprom_get function aborts when that happens
aa4bbbe44880a625ef065f0ebbbcc6adf34e03a6	mwifiex invalidate bss config before setting channel for uap mark bss_config parameters as invalid before setting ap channel this prevents from setting invalid parameters while setting ap channel to fw
8bbd9f04b7d982d1c6aeb5c08f5983b3d0b9e2fe	powerpc fix bad pmd error with book3e config book3e uses the hugepd at pmd level and dont encode pte directly at the pmd level so it will find the lower bits of pmd set and the pmd_bad check throws error infact the current code will never take the free_hugepd_range call at all because it will clear the pmd if it find a hugepd pointer fix this by clearing bad pmd only if it is not a hugepd pointer this is regression introduced by e2b3d202d1dba8f3546ed28224ce485bc50010be powerpc switch and explicit hugepages to a different page table format
9e69fae1a89e543949fe81603f7229463b8061de	usb phy tegra return correct error value provided by clk_get_sys in case if clk_get_sys fails return correct error value provided by the api
2c204109ec1018f72114c7f19132a1109a3f0653	input cy8ctmg110_ts set reset_pin and irq_pin from platform data the implementation in cy8ctmg110_probe does not properly set reset_pin and irq_pin from platform data lets fix it
505f581c48bc27cd72beb42df47b3012b617ea5c	xhci simplify if statement to make it more readable no functional change de morgan b
43960b4731d3450fe82105c40ee19d487622e427	gpio generic modernize remapping replace devm_request_mem_region devm_ioremap with devm_ioremap_resource
b42e093e59c320e91b9c2de73bf3f0429fc45307	asoc intel use kmemdup rather than duplicating its implementation the patch was generated using fixed coccinelle semantic patch __number__ __number__
7f01be234a2d9b627ff123a128f8c811789620e0	media fixed alignment should match open parenthesis fixed checkpatch check alignment should match open parenthesis
dd0881281d98e7d3d5e34224058a5d1389241126	megaraid fail resume if msi-x re-initialization failed currently the driver fails to analize msi-x re-enablement status on resuming and always assumes the success this update checks the msi-x initialization result and fails to resume if msi-xs re-enablement failed
5f8aefd44e64ed2f6950a1dcc77309b7dd9979f4	mm account reaped page cache on inode cache pruning inode cache pruning indirectly reclaims page-cache by invalidating mapping pages lets account them into reclaim-state to notice this progress in memory reclaimer
c5f6ce97c12104668784ee17fb927c52a944d3d8	nvme dont schedule multiple resets the queue_work only fails if the work is pending but not yet running if the work is running the work item would get requeued triggering a double reset if the first reset fails for any reason the second reset triggers nvme_ctrl_resetting hitting that schedules controller deletion for a second time which potentially takes a reference on the device that is being deleted if the reset occurs at the same time as a hot removal event this causes a double-free this patch has the reset helper function check if the work is busy prior to queueing and changes all places that schedule resets to use this function since most users dont want to sync with that work the flush_work is moved to the only caller that wants to sync
bc6bd90eb7bb7978e6e8d741071aaac14325e72f	asoc staticise samsung_spdif_dai
9cf79d115f0d161b63161650f14ff903e4c57937	bitmap remove explicit newline handling using scnprintf format string bitmap_print_to_pagebuf uses scnprintf to copy the to page buffer it handles the newline and trailing null character explicitly its unnecessary and also partially duplicated as scnprintf already adds trailing null character the newline can be passed through format string to scnprintf this patch does that simplification however theoretically theres one behavior difference when the buffer is too small the original code would still output at the end while the new codewith this patch would just continue to print the formatted string since this function is dealing with only page buffers its highly unlikely to hit that corner case this patch will help in auditing the users of bitmap_print_to_pagebuf to verify that the buffer passed is large enough and get rid of it completely by replacing them with direct scnprintf tweak comment
59c56eb6db0c14fe569b1c9625cb850e52d29d88	add ids for future xeon cpus enable intel powerclamp driver on xeon cpu id package c-state is available on this cpu for idle injection
bbbfcb4e32532c9c5f0718a95b6c2a74b8ad50de	media s5p-mfc make clk_ref static in fixes the following sparse warning warning symbol clk_ref was not declared should it be
3b14692c01e0b68f0ce51138dfcea967a63cd7bb	smsc95xx dont enable remote wakeup directly as pointed out by bjorn mork the generic usb driver sets this for us so no need to directly set it in this driver
6e747506dde195d3d05fe2bb8ef78aceba28a5e3	xfs fix warnings about unused stack variables reduce stack usage and get rid of compiler warnings by eliminating unused variables
9927b51469494d50956978b533d848748b792cef	bnx2x enlarge minimal alignemnt of data offset this improves the performance of driver on machine with l1_cache_shift of at most __number__ bytes hw was planned for aligned fastpath data
c12758ce399e6062db779ab35466b3679e8ca681	use drm_crtc_handle_vblank remove legacy usage of drm_handle_vblank link
f4fcc40b564dd1920029053be9c4dd557b23a7ec	serial max310x remove excess port configure at startup serial core calls set_termios after port startup so there are no reason to setup port twice
66cbd4ba8ac4711e8bad97b5bded31ec298c7433	sunrpc replace generic auth_cred hash with auth-specific function replace the generic code to hash the auth_cred with the call to the auth-specific hash function in the rpc_authops struct
e80fb5eea3fc0631624c71bf604d5b6244379d40	align to opening parenthesis
5af28de35342f630a91061e25cc976a01b7ca6c4	can use __dev_get_by_index instead of dev_get_by_index to find interface as cgw_create_job is always under rtnl_lock protection __dev_get_by_index instead of dev_get_by_index should be used to find interface handler in it having us avoid to change interface reference counter
f3c60599d6e19351bd1a39d1c5c016c7aa5f4438	usb ohci properly handle ohci-sm501 suspend suspend scenario in case of ohci-sm501 glue was not properly handled as it was not suspending generic part of ohci controller alan stern suggested properly handle ohci-sm501 suspend scenario calling explicitly the ohci_suspend routine in ohci_sm501_suspend will ensure proper handling of suspend scenario
71979aa3c431f0b2e00c4151f399813fceea6e0d	regulator arizona-micsupp convert to use linear ranges
974eadf1fc4f9bd0e9da686e7ba6c3e4e708fc45	media lmedm04 make lme2510_powerup a little smaller gcc isnt smart enough to realize it can share most of the argument buildup and the actual function call between the two branches so help it a little
f715d5b357f0c862059da9716c430e828c15b18b	add mclk odoverdrive support for tonga the maximum od percentage is __number__
dd40851521361e07c1f61e79cca941a63ad311bc	ipv6 dont let scoped multicast traffic escape on the wire
e70eed2b64545ab5c9d2f4d43372d79762f1b985	cpufreq intel_pstate account for non c0 time the current function to calculate cpu utilization uses the average p-state ratio scaled by the ratio of the current p-state to the max available non-turbo one this leads to an overestimation of utilization which causes higher-performance p-states to be selected more often and that leads to increased energy consumption this is a problem for low-power systems so it is better to use a different utilization calculation algorithm for them namely the percent busy value or load can be estimated as the ratio of the mperf counter that runs at a constant rate only during active periods c0 to the time stamp counter tsc that also runs at the same rate during idle that is percent busy __number__ delta_mperf delta_tsc use this algorithm for platforms with socs based on the airmont and silvermont atom cores
c886a9fc1f69c0e53788a9c4a780b6b8825bd4ab	microblaze evict the check for kernel_moderegs from do_notify_resume only one caller hasnt done it in assembler work_pending on everything else cant reach do_notify_resume if we are returning to kernel mode so move that check to that sole caller and make do_notify_resume reachable only when returning to userland
84a3e72c3a5c2441be46c4afba95fe5af3c370e7	ipv6 log src and dst along with udp checksum is __number__ these info messages are rather pointless without any means to identify the source of the bogus packets logging the src and dst addresses and ports may help a bit
2d76a2478bb8c54d241b23a699d55f90b7efd036	scsi pmcraid add missing resource releases most error branches following the call to pmcraid_get_free_cmd contain a call to pmcraid_return_cmd this patch add these calls where they are missing moreover most error branches following the call to class_create contain a call to class_destroy this patch add these calls where they are missing this issue was found with hector
8425783c0f4292ca5be35097a467e1240735c257	net vxlan properly cleanup devs on module unload we should use vxlan_dellink handler in vxlan_exit_net since i were not in fast-path and we should be consistent in dismantle just as we would remove a device through rtnl ops and more importantly ii in case future code will kfree memory in vxlan_dellink we would leak it right here unnoticed therefore do not only half of the cleanup work but make it properly
f63e0cca9174dd8b47380f61565ab7b921d6ac2c	btrfs ignore device open failures in __btrfs_open_devices this wipefs mount would lead to a blkdev mismatch when the mount fails and a permanently busy opened o_excl sdb2 wipefs wipefs error probing initialization failed device or resource busy its because btrfs_open_devices may open some devices fail on the last one and return that failure stored in ret the mount then fails but the caller then does not clean up the open devices chris assures me that btrfs_open_devices just means go off and open every bdev you can from this uuid it should return success if we opened any of them at all so change the logic to ignore any open failures just skip processing of that device later on its decided whether we have enough devices to continue
bf83fd6402a856eeb9a22c364c50ccf9bbdf9b17	spi sirf fix spi full-duplex dma transferring issue sometimes can be equal with for example spidev will make tx and rx point to at the same time currently for this case we map the buffer bidirection to fix the cache consistency
e84448d52190413400663736067f826f28a04ad6	xen-netfront refactor skb slot counting a function to count the number of slots an skb needs is more useful than one that counts the slots needed for only the frags
1b48b530dac3e600d92854d98a2a519243661f6c	fs debugfs replace current_time by current_fs_time current_time macro is not appropriate for filesystems as it doesnt use the right granularity for filesystem timestamps use current_fs_time instead
f5553c19ff9058136e7082c0b1f4268e705ea538	netfilter nf_tables fix leaks in error path of nf_tables_newchain release statistics and module refcount on memory allocation problems
991bfef82f17194fe2a2f161b9552d9633ff21b9	pci dra7xx fix return value in case of error in dra7xx_pcie_init_irq_domain the pattern used to check and return error is if return ptr_errvar so the returned value in case of error is always __number__ which means success change it to return instead
3ac9b0acc34fbe56e2d31b8f2f7e59d45c53cb3b	alsa hdspm aes32 ignore format bit as mentioned in the comment the aes32 cards must not set the format bit since it is used to indicate the preferred sync setting instead we hence simply skip the corresponding part in the hw_params function
f026a52d4309e1e08752a8bd41ac74aeea815686	add release function for hsotg device add release function to prevent kernel warning kfree is performed when all references are gone
6845c313f79fd44c64834b98d4341187e77b2377	implement chsw_load method
5a41b934766a00764669922f1faac1fbdcc179bd	staging speakup compress return logic into one line simplify function return by merging assignment and return into one command line remove now unused local variable found using coccinelle expression e ret e ret
43ec540e6f9b8e795dc9000114636ff72afc5b01	hwrng omap move clock related code to omap_rng_probe currently the code that takes a reference to the clock and enables it is located inside of_get_omap_rng_device_details called only when probing through the device tree however there is nothing that makes this clock logic dependent on the device tree so it makes more sense to have it in omap_rng_probe directly moreover we make sure to bail out if we cant enable the clock indeed while the clock is optional if a clock is present we really want to succeed in enabling it and we fix the error message to fit on one line so that it is grep-friendly
88e97c32068ff365970c0958771b9dce131c3590	wireless airo rename register variable register is a keyword in c and cannot be used in place of a variable name as shown by this warning error register is not at beginning of declaration this replaces the register keyword with a reg identifier in the declaration which matches the definition and has the intended meaning
baec5c6d0b191a44977a5fca131b5215e1868341	ath6kl fix random rx data corruption the pointer of rx buffers is not adjusted after pointer is aligned to this causes random rx data corruption
c5baa566db793cbd931f64d265cdc7d744c6169a	update to post-reset execlist queue clean-up when clearing an execlist queue instead of traversing it and unreferencing all requests while holding the spinlock which might lead to thread sleeping with irqs are turned off bad just move all requests to the retire request list while holding spinlock and then drop spinlock and invoke the execlists request retirement path which already deals with the intricacies of execlist queue requests this patch can be considered v3 of commit b96db8b81c54ef30485ddb5992d63305d86ea8d3 author tomas elf intel.com grab execlist spinlock to avoid post-reset concurrency issues this patch assumes v2 of the above patch is part of the baseline reverts v2 and adds changes on top to turn it into v3 link
42e509c6d3090fc890d2b30fc3c0be02300256a3	media tlg2300 fix radio querycap
1a0b7cd82657a590f163b090bd9123a3a6b9aae4	record bad blocks due to write errors during if we get a write error during dont fail the device but instead record a bad block if that fails we can then fail the device
ae817266710b18f767cf247e9568f52fb88abca0	use resource_size
cc6a7aab5570beef884ff95f7cade6634bf815a1	sunrpc avoid warning in gss_key_timeout the gss_key_timeout function causes a harmless warning in some configurations arm imx_v6_v7_defconfig with if the compiler cannot figure out the state of the expire variable across an rcu_read_unlock in function gss_key_timeout warning expire may be used uninitialized in this function to avoid this warning without adding a bogus initialization this rewrites the function so the comparison is done inside of the critical section as a side-effect it also becomes slightly easier to understand because the implementation now more closely resembles the comment above it
aca05671d58cea06dc60bbe554b8b399af7da409	ipv6 remove useless parameter in __snmp6_fill_statsdev the parameter itemsis always icmp6_mib_max is useless for __snmp6_fill_statsdev
4c2f8a48e989c323e4fb378f95ceaa8091760832	greybus timesync do __number__ bit divisions in a __number__ friendly way we need to use do_div when doing __number__ bit division or modulo division since the kernel will not pull in the gcc builtins __aeabi_ldivmod and __aeabi_uldivmod on __number__ bit builds
2f485d93cb6f870f2f19fb9a18656a372583eab1	staging comedi ni_daq_700 cleanup to the pcmcia_driver declaration for aesthetic reasons add some whitespace to the declaration of the pcmcia_driver and reorder it a bit
294e8a75a19623c3d8a3b7f692d3b869932c7f8f	asoc spdif_transmitter allow sample rate transmitters and receivers may support a sample rate tested with a cubox-i imx6 system and an onkyo tx-sr607 receiver
9d4876f039a086eeb599a8fac684c9a8daa64ab1	arm save the final aux ctrl value for resuming there is a bug if l2x0 controller has been enabled when calling l2x0_init the aux ctrl register will not be saved in l2x0_saved_regs therefore we will use uninitialized for resuming later in this patch the aux ctrl value is read and saved after it is initialized so we have the real value being set for resuming link
76e8d7b0d1b0091929e8cd18551a87b6bb6ef2c1	batman-adv fix range check for expected packets the check for new packets in the future used a wrong binary operator which makes the check expression always true and accepting too many packets
8117bd531501ec329e4c9ea96fb7f9d5504c82f5	gpio-lynxpoint enable input sensing in resume it appears that input sensing bit might be reset during set input sensing again for all requested gpios in resume
87355c1b21f0ddf3b19e0a87c649fed544b7d5d5	fix sparse warning of plain integer as null this patch fixes the following sparse warning warning using plain integer as null pointer
e5ffa401eacd0e74178e20ba932200fc9fe41c07	dma shdma fix a bad merge remove free_irq a bad merge resulted in a left-over free_irq call this patch removes it
32237677fb6a15f08aadfe2bb4129b2de7e7caab	input xilinx_ps2 use dev instead of dereferencing it use local variable dev instead of dereferencing it several times
1a28fc190c60e9bb04649384826f3224c8463efc	asoc intel byt_rvp_platform_data can be static sparse symbol byt_rvp_platform_data was not declared should it be
625a4c5910cc8aa63da2afcf662aeb2ca64458e1	ehci-hub use usb_dt_hub fix using the bare number to set the bdescriptortype field of the hub descriptor while the value is in
a7d6f529fe1d96a477614eb93f40213d133029e6	memcg remove mem_cgroup_charge_type_force there are no users since commit b24028572fb69 memcg remove pcg_cache
5a994e151f7c54a5fdeb07fe2fed4ed64b9321b8	clk composite improve rate_hw sanity check logic the function pointer population and sanity checking logic got a bit ugly with the advent of the callback clean it up
eeac44cb498d6380d5ea947b324892afa5d89615	btrfs remove unused parameter from __add_inline_refs never used
44151cd32deb1074530f3beba51d535fa0887d9a	i40evf add mac address filter in open not init during close all of the mac filters are cleared so the driver would be unable to receive unicast packets after being closed and reopened add the adapters hardware mac address filter in open not init this ensures that the correct filter is present each time change-id i51a11e9c1200139dab6f66a5353bd38c7d26f875
f72f94555aa32b2c4374dde5ad9b960cc4ff32e2	ceph fix readdir vs fragmentation race following sequence of events tigger the race client readdir frag got item a mds merges frag and frag client send readdir request frag offset __number__ readdir_start a mds reply items that are after item a in frag link
6b9cdf39c8861810aa9bc7abed0ef0b73c0609e9	replace get_unused_fd with get_unused_fd_flags0 this patch replaces calls to get_unused_fd with equivalent call to get_unused_fd_flags0 to preserve current behavor for existing code in a further patch get_unused_fd will be removed so that new code start using get_unused_fd_flags with the hope o_cloexec could be used either by default or choosen by userspace
edbe77462302ec0b11a90244de13f9012118c538	packet fix second argument of sock_tx_timestamp this patch fixes an issue that a syscall sendto syscall cannot work correctly since the sendto syscall doesnt have msg_control buffer the sock_tx_timestamp in packet_snd cannot work correctly because the is set to __number__ so this patch sets the to as default
37e6071787908fa9009cbd002c86402720becc5f	asoc samsung check to see if we managed to allocate a channel
9242b5b60df8b13b469bc6b7be08ff6ebb551ad3	kvm x86 check for nested events if there is an injectable interrupt with commit b6b8a1451fc40412c57d1 that introduced vmx_check_nested_events checks for injectable interrupts happen at different points in time for l1 and l2 that could potentially cause a race the regression occurs because kvm_req_event is always set when nested_run_pending is set even if theres no pending interrupt consequently there could be a small window when check_nested_events returns without exiting to l1 but an interrupt comes through soon after and it incorrectly gets injected to l2 by inject_pending_event fix this by adding a call to check for nested events too when a check for injectable interrupt returns true
b4e62d9467cc5c69d7a23ebc50382c01b769e933	watchdog ath79_wdt switch to replace clk_enable and clk_disable calls with clk_prepare_enable and clk_disable_unprepare to get ready for the migration to the common clock framework
a8594f20cafadb6ba58f915dea5f2c94a9333b1a	unset pgoff when mmaping gems commit arm dma-mapping add missing range check in dma_mmap introduced offset-checking for mappings which collides with the fake-offset the drm sets for gems other drm-drivers set this offset to __number__ before doing the mapping so this looks like the correct way to go for rockchip as well
5fc3e8311ccc87e9d9c9ce2aa36d0e5069e0807c	expand macros at call sites they have very few users and theyre both just doing a single register write so the advantage of having the macro is a bit limited an inline function might make sense but its as easy to just do the writes directly
1bf1b8cf4faf279c3643c5c8045bec53b047ca9a	asoc adav80x update locking around use of dapm pin api the pin updates in this driver look like they are intended to be done atomically update to do so
0d1462de0b24fd09284411a3753f24a3d7c67577	iio sx9500 fix bug in compensation code the initial compensation was mistakingly toggling an extra bit in the control register fix this and make sure its less likely to happen by introducing an additional macro
36e914cc4bb5d1842e7c8a2e2b9b4f2935771c14	asoc xtensa remove unnecessary snd_pcm_lib_preallocate_free_for_all the alsa core takes care that all preallocated memory is freed when the pcm itself is freed there is no need to do this manually in the driver
1aabf523a288b09d660992c22e307110c70f746d	tty amba-pl011 use accesses for sbsa uart version __number__ of the server base system architecture sbsav2 describes uart hardware registers as __number__ bits wide giving no guidance on access sizes the sbsa uart driver previously assumed partial-length __number__ and __number__ bit accesses would work but the sbsav2 uart hardware on the qualcomm technologies qdf2432 only supports full-length __number__ bit register accesses so use those exclusively this is compatible with sbsav3 which explicitly requires uart hardware support __number__ and __number__ and sometimes __number__ bit accesses tested on juno midway qdf2432 seattle and x-gene __number__
0efe124008319b7da3d678bf4f433d99eb785711	i40evf dont use resetting state during reinit the resetting state means that a catastrophic hardware bad thing is happening and the driver need to tiptoe around and not use the admin queue or registers or anything like that on the other hand a reinit is no big deal and we can use the admin queue and we should so dont set the state to resetting here this fixes a tx hang and fw crash that happens after setting the mtu on a vf change-id i3e6191edbd6a93958a1f1bd1d41a5c2d17474d41
86d466b86e0c04b2f0f6ae41f0de75082865912d	staging comedi contec_pci_dio define register map for board only one board type is supported by this driver instead of passing the register offsets for the digital ports in the boardinfo define the register map and use that to access the ports
e6a8818a354db4d5a13b42d9fbc0f11ed74058e8	add get port immutable stub this adds the get port immutable verbs call
ad348cc5349be4ef4abe08819afbb63386585413	serial sunsu add missing platform_driver_unregister when module exit we have registered platform driver when module init and need unregister it when module exit
467d296f47731bcba578cfdea8416b4c152c4f1b	wusbcore fix root hub hub_status_data to only return __number__ if status has actually changed the hub_status_data function on the wireless usb root hub controller wusbhc_rh_status_data always returns a positive value even if no ports have changed this patch updates wusbhc_rh_status_data to only return a positive value if the root hub status needs to be queried the current implementation can also leave the upper bits of the port bitmap uninitialized if is not one less than an even multiple of __number__ this patch fixes that as well by initializing the buffer to __number__
688a9cce0c8e9116038586ae1cd6adabb10fa5aa	mei bus revamp device matching mei_cl_device_match now calls mei_cl_device_find that returns the matching device id in the device id table we will utilize the mei_cl_device_find during probing to locate the matching entry
dfbc32316c6991010328c21e6046b05bac57eb84	omapfb defer probe if no displays omapfb requires the panel drivers to have been probed when omapfb is initialized omapfb does not support insertion of new panels after its probe this causes a problem in case omapdss or the panel probes have been deferred due to eprobe_defer error as omapfb wont find any displays as a quick fix this patch changes the omapfb probe so that if omapfb does not find any displays itll return eprobe_defer this is not perfect as with a board with no displays omapfb will get deferred forever also if the board has multiple displays but only some of them have been probed omapfb will start and leave the unprobed displays out
dfebe40076f3b4966e818eaf94021a7ff788df04	fix another dereference before null check warning null tcon is not possible in these paths so remove confusing null check reported by coverity cid __number__
2da3e027461ab0148384b02bd5905f1a7b335dff	f2fs commit atomic written page in lfs mode we should always commit atomic written pages in lfs mode otherwise data will become corrupted if we encounter suddent power cut after partial pages committed in ipu mode
beed2821b4f42c268222c4c1f1795e53340acf64	iommu create direct mappings in default domains use the information exported by the iommu drivers to create direct mapped regions in the default domains
62481881401246859d9bd06b7c7b9a391c78892c	input pwm-beeper suppress error message on probe defer this suppress printing an error message when pwm_get returns otherwise you get a bunch of noise in the kernel log
7ff7f0a1a934d0d073560dcabe7508e0a4f75f1c	remove call to drm_gem_free_mmap_offset drm_gem_object_release called later in the drm_gem_cma_free_object function already calls this so theres no need to do this explicitly
0871dc692655b4781b36918f52617149f45d6ffc	staging vt6656 vnt_get_duration_le fix typo piv to priv
cd1e098b5a57f218322c34d6bf0e2dbea26dc85e	usb ti_usb_3410_5052 kill private fifo kill private write fifo and use the already allocated port write fifo instead
fed4c143ba8f08c8bddfdc7c69738e691a06d565	rbd fix module sysfs code once rbd_bus_type is registered it allows an add operation via the bus attribute and adding a new rbd device that way establishes a connection between the device and rbd_root_dev but rbd_root_dev is not registered until after the rbd_bus_type registration is complete this could in principle anyway result in an invalid state since rbd_root_dev has no tie to rbd_bus_type we can reorder these two initializations and never be faced with this scenario in addition unregister the device in the event the bus registration fails at module init time
2e0965b06d90b9dba76198d026c4c2ee04443aca	warn if crtc is touched without crtc lock warn if crtc is touched without crtc lock the crtc functions should not be called simultaneously from multiple threads having the drm crtc lock should take care of that
0fe688f1383917ab90747fc41e11b393f33c97e8	media dvb_usb_v2 call streaming_ctrl before kill urbs logically it is better ask hardware to stop streaming before killing urbs carrying stream earlier it was just opposite now code runs submit urbs start streaming streaming ongoing stop streaming kill urbs
35e0be88c426e8d2d6a4ed91d80ea25d73d127aa	remove call dom0 is not actually capable of issuing outer_inv_range or outer_clean_range calls
1bacf46371941870fdf8bb55f8737f331e2c26eb	regulator as3711-regulator constify regulator_ops structure declare regulator_ops structure as const as it is only stored in the ops field of a regulator_desc structure this field is of type const so regulator_ops structures having this property can be made const too file size before text data bss dec hex filename __number__ __number__ __number__ __number__ file size after text data bss dec hex filename __number__ __number__ __number__ __number__
d47d78dff4d6d72eec59dcdf0f6dd44064088112	ath use in ath_hw_keysetmac
030aba53ea361df2b44a292606c974ef48d438de	alsa ctxfi change pll initialization code this is a reworked patch from creative to change the pll code to address unreliable initialization
31fbb3013506e58320fcea2ce07543b2a22c5ee0	mmc sdhci-esdhc-imx add flag esdhc_flag_engcm07207 just like the use of the flag esdhc_flag_multiblk_no_int lets add another flag esdhc_flag_engcm07207 to enable the workaround for errata engcm07207 and set the flag for and esdhc while at it lets use bit macro for esdhc_flag_multiblk_no_int as well
c35ae1796bd4865bad322645a7edb92d223dfb51	dont collect pci-cfg data on phb when the phb is fenced or dead its pointless to collect the data from pci config space of subordinate pci devices since it should return the patch also fixes overwritten buffer while getting pci config data
9736c6152ef6fbb688c05c75b250304787fc9ff7	mips smp-cps allow booting of cpu other than vp0 within a core the boot_core function was hardcoded to always start vp0 when starting a core via the cpc when hotplugging a cpu this may not be the desired behaviour make boot_core receive the vp id to start running on the core such that alternate vps can be started via cpu hotplug also ensure that all other vps within the core are stopped before bringing the core out of reset so that only the desired vp starts patchwork
d0669d007542d7f4829a6a3db50297a4b940fb54	clean up lvds register handling keep single lvds_reg and lvds variable around in intel_lvds_init and read it just once at the start also intel_lvds_get_config doesnt need to figure out which reg to use since it can just consult
d4dd100f2ebb2bc9aca5378ad3cb333b6117069c	fix incorrect function name in alloc_low_pages
5cfc2aabcb282f4554e7086c9893b386ad6ba9d4	kvm handle last_boosted_vcpu __number__ case if last_boosted_vcpu __number__ then we fall through all test cases and may end up with all vcpus pouncing on vcpu __number__ with a large enough guest this can result in enormous runqueue lock contention which can prevent vcpu0 from running leading to a livelock changing to makes sure we properly handle that case
cfee6b5874654fe4e7388bc3112d3afb76cd8b9e	arm imx6ul populates platform device at at imx6ul_init_machine it calls imx6ul_pm_init which needs to find platform device for ocram but the default populate platform device is at of_platform_default_populate_init which is located at arch_initcall_sync and called later than arch_initcall is located at that so below warning message will be showed during boots up imx6q_suspend_init failed to find ocram device imx6_pm_common_init no ddr lpm support with suspend due to lack of ocram device the suspend mode mem which needs ocram to store suspend routine code is invalid this commit populates platform device before imx6ul_pm_init like other imx6 platforms do and the suspend mode mem can work successfully
52795f6fdeb8a2b98373108ac2838c674bb2cbc4	i2c piix4 dont regress on bus names the i2c bus names are supposed to be stable as they can be used by userspace to uniquely identify a specific i2c bus so restore the original names for all legacy pre-sb800 devices for sb800 devices and later improve the names sda refers to the serial data pin of each smbus port its an implementation detail the user doesnt need to know use port instead which is easier to understand
76922ebb02fb531142285682352ccdd7091a2bfb	clk enforce even sdhc divider values the sdhc clock is derived from csb with a fractional divider which can address quarters the implementation multiplies csb by __number__ and divides it by the integer divider value a bug in the clock domain synchronisation requires that only even divider values get setup we achieve this by multiplying csb by __number__ only instead of __number__ registering with ccf the dividers bit field without bit0 the dividers lowest bit remains clear as this is the reset value and later operations wont touch it this change keeps fully utilizing common clock primitives needs no additional support logic and avoids an excessive divider table and satisfies the hardwares constraint of only supporting even divider values
2d8ae84fbc32a14bba176cf9c20d5eb2a3d42791	remove redundant in layoutreturn the nfs_layout_return bit already suffices to ensure that layoutget is blocked
b30367c0866c1b669f266f1a13f17de7b0b8c120	staging fbtft remove extra parentheses around function arguments removes extra parentheses around function arguments issue detected and resolved using the following coccinelle script expression e identifier f e
675965b00d734c985e4285f5bec7e524d15fc4e1	perf export perf_event_sysfs_show required to use it in modular perf drivers link
248997095d652576f1213028a95ca5fff85d089f	kvmclock remove unneeded export macro check_and_clear_guest_paused does not need to be exported as it isnt used by any modules remove the export
f30d704fe1244c44a984d3d1f47bc648bcc6c9f7	aio table lookup verify ctx pointer another shortcoming of the table lookup patch was revealed where the pointer was not being tested before being dereferenced verify this to avoid the null pointer dereference
e69ad291fbb08f79bf8014efeb29e2a74944bfa8	staging comedi amplc_pci230 remove ai_chans member all boards supported by the amplc_pci230 driver have __number__ ai channels so the ai_chans member of struct pci230_board is superfluous and can be removed
d0f8e45aff4ecc7ab00b8c59acbccd5c1b1de202	remove unused wm defines
64d8a728c7deb40e8db3c09b614ffe90415c7664	add cg and pg flags this commits adds flags for supported clockgating and powergating features this allows us to more easily track which features are supported on a particular asic and to features for debugging
f6099f89e6932a98db82ae72272ef9268b14e6db	b43 ht-phy move tx fix to the separated function on n-phy after b43_phy_b_test operation there is a call to tx power fix function which iterates over available cores it matches our ht-phy code which means its probably also some tx fix
447ed7360037b6e38c0206ddcbd04a256ec94099	add missing of_node_put for_each_available_child_of_node performs an of_node_get on each iteration so a break out of the loop requires an of_node_put a simplified version of the semantic patch that fixes this problem is as follows local idexpression expression of_node_putn e n of_node_putn break when n
5ce86eaccfa8859c369514d85387585241c81ca5	staging lustre llite lookup master inode by ilookup5_nowait do not lookup master inode by ilookup5 instead it should use ilookup5_nowait otherwise it will cause dead lock __number__ client1 send chmod req to the mdt0 then on mdt0 it enqueues master and all of its slaves lock mdt_attr_set after gets master and stripe0 lock it will send the enqueue requestfor stripe1 to mdt1 then mdt1 finds the lock has been granted to client2 then mdt1 sends blocking ast to client2 __number__ at the same time client2 tries to unlink the striped dir rm striped_dir and during lookup it will hold the master inode of the striped directory whose inode state is new then tries to revalidate all of its slaves and it will be blocked on the server side because of __number__ __number__ then the client get the blocking_ast request cancel the lock but being blocked by ilookup5 in ll_md_blocking_ast because the inode state is still new intel-bug-id reviewed-on
dde8e3ee6b37fa33690604302bebfe7b576c3802	fix return check in mv64x60_eth_register_shared_pdev in case of error the function platform_device_register_simple returns rr_ptr and never returns null the null test in the return value check should be replaced with is_err
1dfe0d159dc7f7b6d1734b2010aabda2bbe87d5a	pinctrl sirf move sgpio lock into state container instead of referring to a global static variable for the sgpio locking use the state container to contain the lock
c2c97ec513b503b9e0d28ffd98d54c9e9bf3ea3e	arm shmobile r8a7790 ca15-scu enablement power on scu in case of booting from a ca7 core converted to use broken out sysc code
976baf6e96569b1e253233061b074dbe5a7f2ca9	usb ohci make ohci-platform use dev_err instead of pr_err this patch converts the ohci-platform driver to use dev_err functions instead of pr_err
f8c0aca9fda7856a8a8d61d523ba3187affbd714	fec add module_alias add module_alias so that auto module loading can work
1a4ab28fc0baccbc8d78fa9fa22821e108ae4f4a	ath10k enable early device dumps this can be useful for early initialization debugging rom crashes
90e3c03c3a09a7b176b3fe59d78f5d9755ac8e37	tracing add function probe to trigger a ftrace dump of current cpu trace add the cpudump command to have the current cpu ftrace buffer dumped to console if a function is hit this is useful when debugging a tripple fault where you have an idea of a function that is called just before the tripple fault occurs and can tell ftrace to dump its content out to the console before it continues this differs from the dump command as it only dumps the content of the ring buffer for the currently executing cpu and does not show the contents of the other cpus format is echo to remove this echo
42293db075e121d6baef4d0cd7865e060631f3ac	staging comedi usbduxfast absorb usbduxfast_attach_common this function is only called by the to do the final setup of the analog input subdevice for aesthetics absorb it into usbduxfast_auto_attach and reorder the initialization of the subdevice to better follow the norm in comedi drivers
24f74ad1c75e9893db4386ed9c7f8c20cdbc3198	arm imx define gpt register offset per device type it defines offset of gpt registers tstat tcn and tcmp per device type in imx_gpt_data so that these registers can be accessed in an way without timer_is_v2 checking
54c136d4e525684a3310e3dd76de8ae81d7dbbf7	add a timing breadcrumb to panel waits when inspecting reports that times are unusual it would be useful to clearly identify the time we must spend waiting for the hardware to complete its task in this case we have a notification before we start waiting for the panel to change state but none afterwards which would be useful
3de1a7748f68c63daed7c9e04ac9f048efcd9f20	bcma trivial add helpers for
a93f5cae67b366e4ce7e9eb336e2885309fd6612	can m_can fix incorrect error messages fix a few error messages
a3080fa7ec028dca0ac24399e19292bcf4feaf6c	rtc rtc-davinci remove unnecessary oom messages the site-specific oom messages are unnecessary because they duplicate the mm subsystem generic oom message
52db30ab23b6d00cf80b22a510c4ea4be4458031	rcu add stall-warning checks for rcu-tasks this commit adds a ten-minute rcu-tasks stall warning the actual time is controlled by the parameter rcu_task_stall_timeout with values less than or equal to zero disabling the stall warnings the default value is ten minutes which means that the tasks that have not yet responded will get their stacks dumped every ten minutes until they pass through a voluntary context switch
9aa7705c966c750dda3d5c8d8a20f8e46668911c	media trivial omap24xxcam-dma fix logical test likely misuse of vs
7ed855e65b4f9ecd8658ddda5d50d0e7399419f3	usb phy qcom switch to new extcon framework api unregister_interest and reading cable state by name have been deprecated switch to new api
54fcecafe5737d6987c2e6e203598e4dfb5112b0	media lirc_dev simplify goto paths the code can be rearranged so that some goto paths can be removed
44eb8c1b33619abc35cba0266ff497c843bd108d	bump version for exporting gpu info for gfx9
13e57ee2056221296f1926d49d00edd224058bea	iio dac ad5446 dont set error code to voltage_uv regulator_get_voltage may return negative error code add error checking to avoid setting error code to voltage_uv
1c5176692457c3f249559d29a69affad7447b326	usb oti6858 fix abuse of interface data fix abuse of interface data which was used to signal device disconnect note that neither tiocmset or tiocmget need to check for disconnect as they do not access the device
5186cf9c74034a4a7856de9c8048493be34c457d	ipmi constify ssif acpi device ids constify the acpi device id array it doesnt need to be writable at runtime
2dd2bd6b36bc10b896fe565e31328d5e8327f431	mwifiex advertise wps probe response offload support to cfg80211 being a fullmac driver mwifiex takes care of populating beacon probe response association response wps ies to firmware and firmware is responsible for constructing these frames advertise this to cfg80211
9e31364fc3272073ec8c5fac18a3e01d4f013418	serial core remove tty port activate and shutdown methods serial core does not use tty_port_open or tty_port_close serial core defines and extends its own tty open and close methods uart_open and uart_close respectively remove the tty_port activate and shutdown initializations and the uart_port_activate function which is never called nb uart_port_shutdown is used by uart_close uart_shutdown call chain but not via the tty_port methods
d5e73f7be850323ae3adbbe84ed37a38b0c31476	bonding restructure arp-monitor in preparation to move the work-queue initialization to port creation from current port_open phase work-queue initialization does not make sense every time we do so moving to port creation phase arp monitoring work depends on the bonding mode and that is not tied to the port creation and can change anytime during the life after port creation so this restructuring allows us to move the initialization at creation without losing the ability to arm the correct work for the mode user has selected
ccf78040265bfce2aac5766e1ddf4fc3dde36899	acpi add _uid support for acpi devices the _uid object is optional but is required when the device has no other way to report a persistent unique device id this patch is required for acpi __float__ acpi enumerated ip cores
5e492ab566f7302d2143d739361cf33076da8e71	staging goldfish use __func__ instead of embedded function names embedded function names are less appropriate to use when refactoring can cause function renaming prefer the use of __func__ to embedded function names
731884ba61d414563a75a5795f140432d786420f	media tea5764 fix module parameter permissions the third parameter of module_param is supposed to represent sysfs file permissions a value of __number__ leads to the following ls total __number__ i am changing it to __number__ to align with the other module parameters in this driver
c396147048fff69d764e5c3d2adca875c7c90a58	staging comedi das08 no need to manipulate pci ref count now that this driver no longer supports manual attachment of pci devices in its attach hook das08_attach it no longer has code that searches for a suitable pci device and increments its reference count since the driver no longer has any reason for incrementing and decrementing the pci devices reference count the calls to pci_dev_get and pci_dev_put can be removed
76705fe8e1e173c9512a0fd638a1ed6356890b28	media use dev_ or pr_ printks in fixed below checkpatch warnings warning prefer netdev_errnetdev then dev_errdev then to printkkern_err warning prefer netdev_dbgnetdev then dev_dbgdev then to printkkern_debug
1a47e7a6662f155c8118d64737086a72cf34edf1	cleanup move nfs4_has_session tests out of state manager loop
04f6643a8657bd080344d2928dde917e0b1b3800	omapdss apply skip isr register and config for disabled displays theres no need to register the vsync isr and configure the hardware if the overlay manager is disabled so this patch adds a check for disabled managers to the omap_dss_mgr_apply function
f67a8ff5339314f6fee8e332ebc862eb097df723	fix thinko in nouveau_memx_wait
577766175c40d4f425be47b9e70d80238e53f996	regulator core dont return error with inadequate reason drms_ua_update always returns failure when it cannot find regulators input voltage but if hardware supports load configuration with and the input regulator isnt specified with valid reason such as the input regulator is battery not finding input voltage is normal so such case should not return with an error avoid such inadequate error return by checking voltages only when drms_ua_update is about to configure load with enum based
3bbf372c6c60255585783bb08ab477a72b918196	virtio-net remove useless disable on freeze disable_cb is just an optimization it can not guarantee that there are no callbacks in particular it doesnt have any effect when event index is on instead detach napi disable and reset on freeze ensure we dont run concurrently with a callback remove the useless calls so we get same behaviour with and without event index
0bf31f075c5138bab1a5d9c61798739424f51781	staging lustre mark internal functions as static this patch makes functions mgc_logname2resid mgc_set_info_async and mgc_init static as these are only used internally this also eliminates sparse warnings of the type warning symbol was not declared should it be
12234f39a2067887802e799fd45c3c41dd26e187	omap2 pm debug remove leftover debug code commit omap2 pm debug remove register dumping left some code lying around which doesnt do anything clean it up
4d96799524159f7c3e774a7b45a308780a26dc4d	usbcore fix incorrect type in assignment in usb_set_lpm_parameters in the bos usb_ss_cap_descriptor structure bu2devexitlat is of type __le16 this value is used as it is without being first converted to the cpu byteorder for the setup of usb devices usb3_lpm_parameters this patch fixes that by converting bu2devexitlat field to the cpu byteorder before the assignmenment to variables
918b7ed423ab7c423efe0e71f7670ff9139d3ee0	use container_of to resolve nouveau_fbdev from drm_fb_helper use container_of instead of casting first structure member
860cd9c07661f767dc2ea1fb2f054fcc02a199c5	scsi qla4xxx shut up warning for rd_reg_indirect the qla4_83xx_rd_reg_indirect function can fail when it is unable to read a register but not all callers check its return value before using the register data and gcc correctly warns about this in function qla4_83xx_process_reset_template warning value may be used uninitialized in this function value note value was declared here uint32_t value warning value may be used uninitialized in this function value note value was declared here uint32_t value in file included from from from from warning value may be used uninitialized in this function asm volatilestr note value was declared here uint32_t value unfortunately i dont see any helpful way to add proper error handling for this case and the failure scenario for rd_reg seems rather obscure so this bails out and makes the rd_reg accessor set the result to __address__ so we at least get a predictable value
2cda7f4c5e83925fe687f63625893e033358de4e	remove unnecessary sync from flip_next this shouldnt be necessary i believe this is just a bit of missed debug code that got left over somehow causes flips to be always synced to vblank regardless of swap interval which we dont
cd5861bde0299fd5189a6b9e0d1e31e205064fc6	mac80211 remove unused len variable commit mac80211 split sched scan ies introduced the len variable to keep track of the return value of ieee80211_build_preq_ies but did not use it compiling with gives the following warning fix it in function warning variable set but not used this is a harmless warning and is only being fixed to reduce the noise with in the kernel
5a25f7bb5aa1b2f876d9df81c44b516e015022f8	metag smp dont set irq regs in do_ipi since commit f6b30d32d242 metag kick add missing to kick_handler the main kick_handler function deals with setting and restoring the irq registers pointer therefore do_ipi which is called indirectly from kick_handler doesnt need to do that itself any longer therefore remove that code and do_ipis pt_regs argument
3050197d55b0f918ae48443b125616024065f977	mmc sh-mmcif cosmetic simplify boolean return blocks use return condition instead of if condition return true return false in functions returning bool
1a89694f7899d39aa58cc6f061e97a17089ac025	block bio kill bio_max_size no one need this macro now so remove it basically only how many bvecs in one bio matters instead of how many bytes in this bio the motivation is for supporting multipage bvecs in which we only know what the max count of bvecs is supported in the bio
affe3e85ae78507cc953f3f700e0644e50844cff	timekeeping pass readout base to update_fast_timekeeper modify update_fast_timekeeper to take a struct tk_read_base pointer as its argument instead of a struct timekeeper pointer and update its kerneldoc comment to reflect that that will allow a struct tk_read_base that is not part of a struct timekeeper to be passed to it in the next patch
781fb7a3e4cdca28236ae23e2c77070ed3ae531f	call pcie_bus_configure_settings this new function is used to properly setup the pci express max payload size and in some circumstances max read request size some systems will not operate properly if these arent set correctly and the firmware doesnt always do it
fc50a890dfbec975386412fff1193200f270c66c	drm remove redundant if statement
7e059db65515c0c11aac3d036745c621b7a2567c	staging fbtft fix space prohibited before that this patch fixes the following error fix space prohibited before that
71d6de64feddd4b455555326fba2111b3006d9e0	perf test fix hist testcases when kptr_restrict is on currently if kptr_restrict is enabled all hist tests failed with segfaults this is because machine__create_kernel_maps in setup_fake_machine failed in that situation and it called machine__delete on the error path but outer callers again called machines__exit causing double free for the host machine link
884d6a0b558c9c31fdf0d950bd07a2c804876445	flag for non-continuous clock behavior as per section of the dsi specification all dsi transmitters must support continuous clock behavior on the clock lane while non-continuous mode support is only optional add a flag that allows devices to indicate that they support non-continuous clock mode so host drivers can adapt their behavior accordingly
c9c2659f1ea84f860af82cac504cc58f17067523	bluetooth use correct struct for user_confirm_neg_reply this patch fixes user_confirm_neg_reply to use the appropriate struct for accessing the call parameters
36c86c8566cec67924ae6f372d9066cc9e92ad0e	bluetooth configure appropriate timeouts for amp controllers the l2cap spec recommends specific retransmit and monitor timeouts for ertm channels that are on amp controllers these timeouts are calculated from the amp controllers best effort flush timeout controllers use the default retransmit and monitor timeouts
4d5106a126f33395126e042ae42582832bfc39f7	btrfs remove redundant check of btrfs_iget return value btrfs_iget can not return null so this test can be removed
e6dab9021f13ad961aadb24770931e30e90e8aa7	net ethernet ll_temac use there are two generics functions so we can use them instead of defining the same code in the driver
682fd6185053875bb16efb1037f3d2ae9680b015	nfc st21nfca use unified device property api meaningfully another place in the code that unveils non-tested at all acpi case use unified device property api in meaningful way
0d838347f1325cebfe8b9341a4b4c1f407022231	efivars if pstore_register fails free unneeded pstore buffer this is patch of a patch set that cleans up pstore_register failure paths if efivars fails to register with pstore there is no point to keeping the __number__ kb buffer around its only used by the pstore routines
331d9301ed4d0fe33e9762c62f2870243bcf77eb	wireless iwlwifi fix build warning fix the following build warning in function warning may be used uninitialized in this function
b1c51afc00f164457e126dcfc946fdd563948d26	bdi rename cgwb_bdi_destroy to cgwb_bdi_unregister rename cgwb_bdi_destroy to cgwb_bdi_unregister as it gets called from bdi_unregister which is not necessarily called from bdi_destroy and thus the name is somewhat misleading
5a72b25e7896e6358b62b590ce5b3a457516ae40	i2c sh_mobile improve error handling use standard i2c error codes for i2c failures also dont print something on timeout since it happens regularly with i2c simplify some logic too
57911b8ba814fae01306376a0d02bc7cdc88dc94	btrfs dont put removals from push_node_left into tree mod log twice independant of the check push_items src_items tree_mod_log_eb_copy did log the removal of the old data entries from the source buffer therefore we must not call tree_mod_log_eb_move if the check evaluates to true as that would log the removal twice finally resulting in rewinded buffers with wrong values for header_nritems
3b5e11d7f566495f7ff3f4178b814a59b4ea84a5	staging unisys visorhba switch success handling to error handling addresses code audit feeback to switch from success handling to error handling in
633caba8932d9ba2f79bbcb7573e58eae3fdac68	tty move tty hung up check from critical section the does not protect the field move the tty_hung_up_p test outside the critical section in tty_port_close_start
29b93c68bf81d2aad1030e989d844cff9f3ba99a	arc mm zero page optimization
f44f340883388b57fe03edfb0982e038e57a992c	openvswitch immediately exit on error in ovs_vport_cmd_set it is an error to try to change the type of a vport using the set command however while we check that this is an error we still proceed to allocate memory which then gets freed immediately this stops processing after noticing the error which does not actually fix a bug but is more correct
08de1014ffd49f156b8b9a0a88ed6dff9a52a275	serial fsl-lpuart add lpuart32 power management support this adds register lpuart32 power management support this also updates the register lpuart resume function
3a6176e7febb6a7b67fb15d99481795941b9e707	use div_round_up use div_round_up instead of hand rolling it just a drive-by change
cd9241e44af3d49977c39ddadbefbb719e2a4baf	asoc da732x remove unnecessary kern_err in pr_err this patch remove unnecessary kern_err in pr_err
9e55c0739670585f0d1bad58fa713865348be943	i2c elektor utilize the module_isa_driver macro this driver does not do anything special in module this patch eliminates the module boilerplate code by utilizing the module_isa_driver macro
cbd53542ca35842127c6f581fefbb0a7dd2b4a21	media exynos4-is fix try format propagation at mipi-csis subdev ensure try format is propagated from the sink to source pad the format at both pads is always same so the try format buffer for pad __number__ is used to hold format for both pads while at it remove redundant checking
26fbcc5a45256e50788d2cc434da4dfb3e3636e9	pci artpec6 add register accessors add device-specific register accessors for consistency across host drivers no functional change intended
5eb2c72c8acc3f84c85f9d504b87f25f78ef0eb0	dma-buf fence debugging add debugfs output to report shared and exclusive fences on a dma_buf object this produces output such as dma-buf objects size flags mode count exp_name __number__ __number__ __number__ __number__ drm exclusive fence etnaviv signalled attached devices gpu-subsystem total __number__ devices attached total __number__ objects __number__ bytes link
635d61a3735e05c8da72740006670f819e5b6a5f	usb support d-link dub-1312 add the usb device id for the d-link dub-1312 usb __float__ to gigabit ethernet adapter to the driver
25dd0f407307c54de5025250ca1dfbd4bdbb2fba	platform goldfish pipe dont log when dropping pipe_error_again on pipe_error_again just stopping in the middle of a transfer and returning the number of bytes actually handled is the right behavior other errors should be returned on the next read or write call continue logging those until we confirm nothing actually relies on the existing wrong behavior of dropping errors on the floor
e04a01837729663572baf7164100e28265de7ed8	consolidate flow rules regardless their flow tag flow rules with same match criteria and value should be mapped to the same flow table entry regardless the flow tag identifier flow tag is part of flow table entry context and not of the destination therefore we should return error when we try to add destination to flow table entry with different flow tag
afa814841c812cd1a36dbbb124542a487c2df5ee	iio adc ad7793 claim direct mode when writing frequency driver was checking for direct mode and trying to lock it but left a gap where mode could change before the desired operation use iio_device_claim_direct_mode to guarantee device stays in direct mode refactor function to clarify look-up followed by lock sequence
63709570cda3db1172695efeb049d43b7f756452	net dsa mv88e6xxx remove ops we dont support anywhere in the code so remove the unused mv88e6391_ops structure
618ef005acf8bb5bd1574b9db12c7828e457776a	move guc_interrupts_release next to guc_interrupts_capture they go better together
885fc0595a3e91ed7b6f78ea419952345be0222b	asoc simple-card use asoc_simple_card_clean_reference
7f51cf2ea7186e3f217e616a5522f1156678356f	regulator anatop check return value of of_get_regulator_init_data should check the return value of of_get_regulator_init_data before using it
f4f653e9875e573860e783fecbebde284a8626f5	serial __number__ disable too much work messages the __number__ driver now reports many of these serial8250 too much work for irq4 these messages turned out to be common these days with a use of virtualization i tried to increase the limit of processed characters in commit e7328ae1848966181a7ac47e8ae6cddbd2cf55f3 serial __number__ increase pass_limit in __number__ it was raised from __number__ to __number__ but it is still not enough apparently so disable the warning unless somebody turns on debug or dynamic_debug _and_ the message references
57ef7fa7b2c499ad1aece50b368679fe90fe348f	asoc wm8962 replace direct snd_soc_codec dapm field access the dapm field of the snd_soc_codec struct is eventually going to be removed in preparation for this replace all manual access to with snd_soc_codec_get_bias_level and replace all other manual access to with snd_soc_codec_get_dapm also drop the unnecessary comparison in the set_bias_level callback that checks if the device is already at the target level the core already takes care of this and will not call the callback if the device is already at the target level
5e6eb456983c994a8e582127a300b6552e5a1768	check for eprobe_defer from dsa_dst_parse since there can be multiple dsa switches stacked together but not all of devicetree nodes available at the time of calling dsa_dst_parse eprobe_defer can be returned by it when this happens only the last dsa switch has to be deleted by dsa_dst_del_ds but not the whole list because next time linux cames back to this function it will try to add only the last dsa switch which returned eprobe_defer
1d0a2c5f2c53dc116e4e5dc9ef4661baf2f597ec	staging media lirc replace data type with pointer in sizeof replace data type with pointer of same type in sizeof to resolve checkpatch issue
ac742d37180bee83bc433be087b66a17af2883b9	futex force hot variables into a single cache line futex_hash references two global variables the base pointer futex_queues and the size of the array futex_hashsize the latter is marked __read_mostly while the former is not so they are likely to end up very far from each other this means that futex_hash is likely to encounter two cache misses we could mark futex_queues as __read_mostly as well but that doesnt guarantee theyll end up next to each other and even if they do they may still end up in different cache lines so put the two variables in a small singleton struct with sufficient alignment and mark that as __read_mostly link
18d93c176641cf7a3c0c452a6f03f46b5373d370	bluetooth count module usage count how many connections there exists so that we do not unload the module if there are still connections alive
a8e828deb393e8a5ca84cd3d0df56b3c0be04607	mac80211_hwsim do not actively scan dfs channels we had another change to fix this in mac80211 but the hwsim hardware scan should also be fixed obviously this one isnt important since its not real hardware but wed better be consistent
e112eb598db4fb7b99086c33765cf262dcfda0d2	staging et131x zero allocation of fbr to prevent random address access if et131x_rx_dma_memory_alloc allocates but fails to allocate this leaves with the possibility of being accessed in et131x_rx_dma_memory_free as it contains a random value potentially causing an oops fix this by zeroing the fbr memory on allocation subsequent frees of this fbr memory explicitly zeros the ring_virtaddr value
93380123fbb5357d3ea6935efc9226df3c59099d	scsi hpsa use designated initializers prepare to mark sensitive kernel structures for randomization by making sure theyre using designated initializers these were identified during allyesconfig builds of x86 arm and arm64 with most initializer fixes extracted from grsecurity
2aeb73e19dc3d17beebc1b9a678f4c60e1072e25	media stk-webcam add asus f3jc to upside-down list and add an extensive comment relating the history of the upside-down handling in this driver thanks-to hans de goede redhat.com
c5a431d02cdcafaf12edff770c294c5fbadcdf54	media msi3101 init bits on pll register it is not sure what is meaning of that number but it is better to try do as windows driver it seems to have small effect for signal when looking fm fft
501e279c231bd8d5eed4ecea5a18dcd79d51b026	fix out of bounds access in tm signal test gcc helpfully points out that were accessing past the end of the gprs array in function signal_usr1 error array subscript is above array bounds we havent noticed previously because was hiding it somehow the code is confused pt_msr isnt a gpr instead its in so fix it
f052f20a825a80c4662dafd3899dddafd4c8f036	sctp sctp_diag should fill rmem_alloc with when rcvbuf_policy is set for sctp assoc when rcvbuf_policy is set it will has its own rmem_alloc when we dump asoc info in sctp_diag we should use that value on rmem_alloc as well just like wmem_alloc
41a193c7615284cfa3ff3227e13c241f823b13d7	rtc s3c remove unnecessary call to disable already disabled clock at the end of s3c_rtc_probe s3c_rtc_disable_clk being called with rtc clock already disabled by s3c_rtc_gettime which looks extra and unnecessary call lets clean it up
f5ecec3ce21f706e9e7a330b2e8e5a2941927b46	btrfs send silence an integer overflow warning the expression can overflow it causes several static checker warnings its all under cap_sys_admin so its not that serious but lets silence the warnings
f80894338e8793821f96db179cfc349d8057ffbc	asoc codec duplicated callback function goes to component on cs4270 codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
4edb0748b23887140578d68f5f4e6e2de337a481	vmstat create fold_diff both functions that update global counters use the same mechanism create a function that contains the common code
5b91aca0bd462c80cf509cbc1014f803eabdc205	usbfs propagate umode_t
2958ec177e400be1e26fc37e1759f84fa2c1761c	aio remove a pointless assignment the value is never used after that point
348d50b8e96c2c4630801e6e720c7c722ade83e8	bluetooth fix missing update of conn params we should update any stored connection parameters when we receive the le remote connection parameter request hci event this patch adds the necessary code to the function that handles the event
24fec651d1cc396e6e24631386e0d5dd5f329fbc	mtd st_spi_fsm dynamically setup flash device based on jedec id using previously added infrastructure we can now extract a devices jedec id compare it to a list of known and supported devices and make assumptions based on known characteristics of a given chip acked-by angus clark
9e3b71f3436415f917eb569cde792b223cceebc0	nl802154 avoid address change while running lowpan the generation of autoconfigured ipv6 link-local addresses starts with a notification on interface up to handle autoconfiguration according to rfc __number__ requires pan id and short address to generate an autoconfigured link-local address this patch will avoid changing of these link-layer address configuration while lowpan interface is up
987aa5f8059613bf85cbb6f64ffbd34f5cb7a9d1	mmc mmc fix switch timeout issue caused by jiffies precision with the precision of jiffies is and the generic_cmd6_time of some card is also then may be current time is only but already timed out caused by jiffies precision
31311c2a471c5c051391b0ee33fa03723ddd5f76	move to the original info_mask is going away in favour of the broken out versions
dd82525956744c3a5e6b7275cd468b6180cc5b72	btrfs free and unlock our path before btrfs_free_and_pin_reserved_extent the error handling path for alloc_reserved_tree_block is calling btrfs_free_and_pin_reserved_extent with a spinning tree lock held this might sleep as we allocate extent_state objects bug sleeping function called from invalid context at in_atomic __number__ irqs_disabled __number__ pid __number__ name __number__ locks held by at __address__ at __address__ at __address__ btrfs at __address__ btrfs at __address__ btrfs cpu __number__ pid __number__ comm tainted g w hardware name intel corporation santa rosa bios workqueue btrfs-extent-refs btrfs_extent_refs_helper btrfs __number__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __number__ __address__ __address__ __address__ call trace __address__ __address__ __address__ __address__ __address__ __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ cut here this changes things to free the path first which will also unlock the extent buffer
8b20839988f1ed5e534b270f3776709b640dc7e0	power supply isp1704 fix unchecked return value of devm_kzalloc function devm_kzalloc will return a null pointer however in function isp1704_charger_probe the return value of devm_kzalloc is directly used without validation this may result in a bad memory access bug
7b99b659d90c5d421cb1867295c78a4c0c030734	bluetooth fix event sending with discovery_stopped state we are not supposed to send mgmt_discovering events if we are transiting from discovery_starting to discovery_stopped state it doesnt make sense to send mgmt_discovering event once discovery procedure has not been even started
064d5cd110f94ce41ca5681dcda8b77fa63d5b95	regulator core fix the init of dt defined fixed regulators when a regulator is defined using dt and it has a single voltage the regulator init always tries to apply this voltage however it fails if the regulator isnt settable because it is using an internal low level function to overcome this we now first query the regulator and only set it if needed
0061280d2c7240805cfd7b1f493da967c97c2f34	btrfs fix the page that is beyond eof steps to reproduce mount dd fallocate __number__ __number__ dd umount dmesg warning at the reason is that we inputed a range which is beyond the end of the file and because the end of this range was not page-aligned we had to truncate the last page in this range this operation is similar to a buffered file write in other words we reserved enough space and clear the data which was in the hole range on that page but when we expanded that test file write the data into the same page we forgot that we have reserved enough space for the buffered write of that page because in most cases there is no page that is beyond the end of the file as a result we reserved the space twice in fact we neednt truncate the page if it is beyond the end of the file just release the allocated space in that range fix the above problem by this way
172400c69cb0d0d684b7cd75ac75872b3d7c61a1	mm fix kcompactd hang during memory offlining assume memory47 is the last online block left in node1 this will hang echo offline after a couple of minutes the following pops up in dmesg info task blocked for more than __number__ seconds not tainted echo __number__ disables this message bash d __address__ __number__ __number__ __number__ __number__ call trace kcompactd is waiting for kcompactd_max_order __number__ when its woken up to actually exit check kthread_should_stop to break out of the wait
9b0f5d63e74a987bf56cc1774baca80a291c9d8d	tile properly use node_isset on a nodemask_t the code accidentally used cpu_isset previously in one place though properly node_isset elsewhere
1a1590ab1a4a0898fe0a6809e5bcd7c225e3b4d6	mips octeon use model string from dtb for unknown board type use model string from dtb for board type if the board is unknown this is more informative with edgerouter pro the will display instead of misleading unsupported board patchwork
991763a91cbacf1e511ec9bea9ea8539e4d41f39	hwmon ad7418 avoid forward declaration move ad7418_driver to proper place to avoid forward declaration also move ad7418_init_client close to ad7418_probe
1e765f318824b2f182dedb5e74e05b9f132e07ca	staging ks7010 remove zero comparison comparison equal to zero is redundant if foo __number__ is equal to if typical kernel coding style is to use the shorter form remove unnecessary zero comparison
1b7e9e2cbd6478e0ebe40639ea36fefd3ffcf916	staging iio tsl2583 add locking to sysfs attributes in_illuminance_input_target_show in_illuminance_input_target_store in_illuminance_calibrate_store and in_illuminance_lux_table_store accesses data from the tsl2583_chip struct some of these fields can be modified by other parts of the driver concurrently this patch adds the mutex locking to these sysfs attributes
f01f7a9851f9c75467373ba7797394dba91825da	greybus loopback move sysfs entries to currently we have sysfs entries that are created when the first incoming connection is created as sub-nodes of the module associated with that connection where x is the module identifier associated with the new connection this is conceptually incorrect since the sysfs entries we create actually arent bound to a module depending on the order connections are brought up we can also have a situation where has high-level control sysfs data-points but does not rather than needlessly replicate data-points across each sysfs directories it is more sensible to locate the entries in
28044e0193f2d642a4981dd296b2583b30cf36ef	staging vt6656 free skbuff and relocate on breallocskb false breallocskb false is when data is not fed to user land free and relocate skbuff where data is not sent return false from rxbbulkinprocessdata this appears to reduce false errors when a reused skbuff has old data
a0cccce2cec76568190090f7bb028916d8b3210e	ixgbe avoid duplicate code in suspend and stop paths resume path calls but suspend path cannot call because fdirs should not be freed and control over hardware should not be released until wol is configured to avoid having to duplicate all changes made in on suspend path split out part of that is relevant during suspend and call it from and during suspend this fix also ensures that ixgbe_ptp_suspend is called during the suspend path and helps avoid similar errors we cant call ixgbe_ptp_stop since it will free the ptp clock device which we shouldnt be doing during a suspend path
2bdbfa9c4a14f0015d1e189b17175a989d7c2a40	i2c davinci preparation for switch to common clock framework as a first step towards migrating davinci platforms to use common clock framework replace all instances of clk_enable with clk_prepare_enable and clk_disable with clk_disable_unprepare until the platform is switched to use the config_have_clk_prepare kconfig variable this just adds a might_sleep call and would work without any issues this will make it easy later to switch to common clk based implementation of clk driver from davinci specific driver
b2dbe0a60f1bcf4db5c701f1577b3135c3159eb5	block collapse bio bit space various previous patches removed bits and left holes collapse them all leave the reset start bit where it is we dont need to change that
c3304721ed666804395fc340f1aa347b18f1dda0	crypto omap-sham remove unused code
a87dd79761764accbb5f66a6ff089701fbac4b32	thermal rockchip fixes the code_to_temp for tsadc driver we should judge the insearch algorithm on matter the adc value increment or decrement or otherwise the temperature return the incorrect value in some cases __float__ __number__ __float__ __float__ __float__ __number__ __float__ __float__ lets fix it right now fixes commit thermal rockchip add the sort mode for adc value increment or decrement
7158fddc165c23c82ac396b3db5bb10ecfaf646f	staging comedi adl_pci9111 use comedi_fc helpers to validate timer args use the comedi_fc helper cfc_check_trigger_arg_is to validate the for the convert_src trig_timer pass the local variable to i8253_cascade_ns_to_timer instead of the cmd argument this value is modified by that function to return the actual time in nanoseconds that the timer will be programmed with based on the calculated divisors the cfc_check_trigger_arg_is helper will then validate that the is that value and modify it if not also use cfc_check_trigger_arg_is to validate that the is the calculate value and modify it if not
4ba1e78891e9858a5c773e6ffe4414611019bf42	superblock when err __number__ in size_store this is a simple check before updating the superblock it should update the superblock when update_size return __number__
5676e7b6db02b80eafc2e3ad316d5f2fee817ecb	blk-mq cleanup after blk_mq_init_rq_map failures in blk_mq_alloc_tag_set if kmalloc_node succeeds but one of the blk_mq_init_rq_map calls fails goto out_unwind needs to free so the caller is not obligated to do so none of the current callers null_blk virtio_blk virtio_blk or the forthcoming scsi-mq do so needs to be set to null after doing so so other tag cleanup logic doesnt try to free a stale pointer later also set it to null in blk_mq_free_tag_set tested with error injection on the forthcoming scsi-mq hpsa combination
f6aac652290b31f120fc07c61331e9e0d4b4afb9	toshiba_acpi add extra check to backlight code some toshiba models most notably qosmios come with an incomplete backlight method where the aml code doesnt check for write or read commands and always returns hci_success and the actual brightness and in some cases the max brightness thus allowing the backlight interface to be registered without write support this patch changes the set_lcd_brightness function checking the returned values for values greater than zero to avoid registering a broken backlight interface
fe0ed5b3158b6c5b6e2653348575de8f62f97d27	serial pl011 delete dangling bug flag the bug flag is not used since commit serial pl011 implement workaround for cts clear event issue so delete it
f58fb5e7f0ab05c9083869c1ec27854af2afc7b7	use list_last_entry instead of list_tail_entry has been defined in so replace list_tail_entry with it
5b2ea6f2f6ac81a230e6cc68e1473e796a583f00	perf report check error during report__collapse_hists if it returns an error warn user and bail out instead of silently ignoring it link
75422726b0f717d67db3283c2eb5bc14fa2619c5	libfs modify mount_pseudo_xattr to be clear it is not a userspace mount add ms_kernmount to the flags that are passed use sget_userns and force instead of calling sget so that even if called from a weird context the internal filesystem will be considered to be in the intial user namespace luis ressel reported that the the failure to pass ms_kernmount into mount_pseudo broke his in development graphics driver that uses the generic drm infrastructure i am not certain the deriver was bug free in its usage of that infrastructure but since mount_pseudo_xattr can never be triggered by userspace it is clearer and less error prone and less problematic for the code to be explicit
3e9b1fcaf9b2e156afc33c34cfd1d763d537ae79	staging comedi pcmad use comedi_request_region use comedi_request_region to request the region used by this driver remove the noise when the board is first attached as well as the error message when the request_region fails comedi_request_reqion will output the error message if necessary
4052faa328c682c44a11c867eb955ae5530d3434	staging rtl8188eu remove unused enum odm_h2c_cmd
e5169723da013eec25e1d52faa8c5058abe1b23e	dsi remove redundant encoder field the patch removes redundant encoder field from private dsi context
756a2f59b73cd6ed8afae3f6e8efb3fb829e4600	libnl nla_put_s64 align on a area nla_data is now aligned on a area in fact there is no user of this function
231a8680b78260f5d9905beaf36741fcf9940a29	gpio twl4030 use gpiochip data pointer this makes the driver use the data pointer added to the gpio_chip to store a pointer to the state container instead of relying on container_of
2bd5ed002c0c493ac328f13a9e2a504261a7d48e	fix wrong check for array_size the check in the for-loop is broken fix it and the boot-crash it causes in amd iommuv2 systems
834c952a1177721f2c0e779e3ca856b79ce27310	arcnet capmode remove extra function this patch cleans the capmode protocol module it removes the obsolete function arcnet_cap_init and replaces printk with pr_info
b6fc2876a060fdd89f6dd55a4923580983092b0f	greybus svc_watchdog use schedule_delayed_work helper instead of using the queue_delayed_work call for delayed work on system_wq use the schedule_delayed_work helper to be more consistent on the style testing done check svc watchdog is pining after the change
996c2d4f5834402daabd126bbbc55fd7683d558d	mfd arizona add micvdd to mapped regulators for wm8997 the previous update adding micvdd to the regulator mappings mfd arizona add micvdd to mapped regulators only added the mapping for wm5102 and wm5110 but wm8997 also has a micvdd supply that needs to be mapped back to the main arizona device
528021fcd21fdffad83563710f1186d9b3d21718	staging iio isl29018 made error handling consistent changed the processing of iio_chan_info_int_time in isl29018_write_raw to unlock the mutex and return at the end of the function if invalid input is passed in this makes the error handling code consistent with the processing of iio_chan_info_calibscale and iio_chan_info_scale within the same function
911544f6a8d66c27ff807f5d71e3f0f5a904c100	ath9k_htc trigger spectral scan on set_channel
77c39851401121046b3129de9e5aeb2fd5ef7405	intel-smartconnect convert acpi_evaluate_object to acpi_execute_simple_method acpi_execute_simple_method is a new acpi api introduced to invoke an acpi control method that has single integer parameter and no return value convert acpi_evaluate_object to acpi_execute_simple_method in
4492bb6b10b1fbbc3fd4e8ea1b1bef51a1b2b31a	iwlwifi dvm move add_sta response handling to sync command this driver currently has some very confusing add_sta response handling that runs asynchronously in the background for all of the commands but is only really necessary for synchronous ones the really asynchronous ones can only be done for already existing stations and for the sync ones it actually waits for the rx handler to return a status code rework this to keep the debug printing in the handler but do the code thats supposed to have an effect only for sync commands in the command sending function
c6ed0f31ce3e1c5729d1c8f81a2a94ab881506a6	arm stm32 add a new soc stm32h743 the stm32h743 is a cortex-m7 mcu running at and containing internal ram
72d4736253af74147b1fa68145b2f4c61d1f37e1	input uinput fix crash when using abs events commit b6d30968d86c45a7bb599eaca13ff048d3fa576c input uinput switch to using for_each_set_bit switched driver to use for_each_set_bit however during initial write of the uinput structure that contains data for all possible axes none of them are reflected in yet and so we were skipping over all of them and were not allocating absinfo memory which caused crash later when driver tried to sens ev_abs events __float__ bug unable to handle kernel null pointer dereference at __number__ __float__ ip __address__ __float__ pgd __number__ __float__ oops __number__ smp
e5cbfbfb2e0e44ed18cbadc02e0247bd1e60fb39	vlv for vga detection vga detection requires the reference clock to be on so make sure this is the case this fixes vga detection where all pipes are off and so we would normally disable all clocks v2 instead of disabling psr clock gating force the reference clock on through the dpll_a register kin chan s v3 move enabling of the clock to intel_reset_dpio and use the dpll_b register instead where we already have a similar tweak for the cri clock ville
e479ab651f071dbd1518ce8fb121c7f42f2bb97d	mac80211 fix fils aead protection in association request frame incorrect num_elem parameter value __number__ vs __number__ was used in the aes_siv_encrypt call this resulted in only the first one of the five aad vectors to siv getting included in calculation this does not protect all the contents correctly and would not interoperate with a standard compliant implementation fix this by using the correct number a matching fix is needed in the ap side hostapd to get fils authentication working properly
ddd5115fe5594f5aae3c7f0008a5327bb1d19397	move counting read errors are considered to corrected if write-back and re-read cycle is finished without further problems thus moving the corrected_errors counting after the re-reading looks more reasonable imho
00cf99ee00c9f1241359c8ee5ca9230318e27a57	pwm renesas-tpu fix return value check in tpu_probe in case of error the function devm_ioremap_resource returns err_ptr and never returns null the null test in the return value check should be replaced with is_err
3a46c7b7cc09ace471f9ccb4d11950fb2f7f2d96	asoc intel make baytrail pcm data per stream rather than per dai device prepare for single baytrail dai link by accessing pcm data using stream id instead of now is unique for playback and capture since they are exported as separate dais but not once converted to single dai jarkko separated from another commit with updated commit log
0393afea31874947b1d149b82d17b7dccac4f210	ocfs2 add a missing journal credit in ocfs2_link_credits with indexed_dir enabled ocfs2 maintains a list of dirblocks having space the credit calculation in ocfs2_link_credits did not correctly account for adding an entry that exactly fills a dirblock that triggers removing that dirblock by changing the pointer in the previous block in the list the credit calculation did not account for that previous block to expose do __number__ local mount mkdir touch for i in seq __number__ __number__ do link done rm sleep __number__ link note the link names have been crafted for a __number__ byte blocksize reproducing with a larger blocksize will require longer or more links the sleep is important we want jbd2 to commit the transaction so that the missing block does not piggy back on account of the previous transaction signed-off-by xiaoweihu at reviewed-by wengangwang at reviewed-by at
b8a13d039cbf7aec3b486fc0ae3996a5449afed2	sunrpc remove bug_on from bc_malloc replace bug_on with warn_on_once and null return the caller will handle this like a memory allocation failure
f936ec34dea8da6f38340c1ae2cb35207d8d78cb	updated the i915_ring_freq_table debugfs function updated the i915_ring_freq_table debugfs function to support the read of ring frequency table through punit interface for skl also issue viz-5144
3db9570482f368cd2f62c258802da21667ec6198	media xc4000 simplified seek_firmware this patch simplifies the code in seek_firmware
44a89c82feca565efd44b5aef1f1b99b93621d19	ath9k fix aic compilation error aic needs to be registered only when btcoex is enabled this fixes the error reported by kbuild error ar9003_hw_attach_aic_ops undefined
c73c2484901139c28383b58eabcbf4d613e91518	netfilter nf_tables_netdev remove redundant ip_hdr assignment we have already use skb_header_pointer to get the ip header pointer so theres no need to use ip_hdr again moreover in netdev ingress hook ip header maybe not linear so use ip_hdr is not appropriate remove it
63311bece02abad40ae442e6deba2a2e522949fb	mmc sunxi check the value returned by clk_round_rate clk_round_rate may return an error check it
86928f984e8b166fcd0c7c241501bc00f53eb623	f2fs avoid not to call remove_dirty_inode there is an errorneous case during the recovery like below in recovery_dentry __number__ dir f2fs_iget __number__ mark the dir with fi_delay_iput __number__ goto unmap_out after the end of recovery routine there is no dirty dentries so the dir cannot be released by iput in remove_dirty_dir_inode this patch fixes such the bug case by handling the iget and iput in the recovery_dentry procedure
637e078eafa21b11001490f0abd0255690be2166	staging bcm2835-audio replace with use in place of printkkern_err problem found by checkpatch
6b4c80f947df9d92b97eb62afc29dda6d7220c7d	asoc fsl_spdif staticse non-exported symbols
d8bb823d31a1405e42aa4a2162d3c00e657b6516	arm apx4devkit add display support add hannstar display and device tree configuration
b62dfd29eeaf12f8bc79a50f680901e84b351851	iommu add empty stub for iommu_group_get_by_id almost every function in has an empty stub but the iommu_group_get_by_id did not get one by mistake this adds an empty stub for iommu_group_get_by_id for iommu_api disabled config
742a73259d2d07ad6870736749aa8d6821ed96d9	regulator ab8500 update only when successfully update register dont update if write to the register fails
6da8253bdd3945b81377e4908d6d395a9956f8af	net phy bcm7xxx update workaround to fix corner cases update the afe_tx_config value to solve marginal issues observed when the link is operating in this workaround applies to gphy revisions d0 e0 and newer
813a9d4ecdf0f6a3bcb5cf57ea4b9ebd69b31ee8	gpu host1x remove redundant parentheses theres no need to wrap the bit macro into an extra set of parentheses because its already implemented to use its own set
07ea400e1b26726f21b2c2299d187d6eb7eb4324	regmap fix regmap_can_raw_write check this function is missing a check if is implemented if it is not implemented arbitrary raw writes are not possible
d22025570e2ebfc68819b35c5d457e53d9337217	cgroup fix alloc_cgroup_ns error handling in copy_cgroup_ns alloc_cgroup_ns returns an err_ptr value on error but copy_cgroup_ns was checking for null for error fix it
0cf0d815ba0d09281c5671b82a83c4220a606dc4	arm lpc32xx warning fix this patch removes the debug warning on local_clk_disable as done in kevin wells driver update
cb5b242c8c14a4b1dcd358400da28208fde78947	escalate error on non-existing pe sometimes especially in sinario of loading another kernel with kdump we got eeh error on non-existing pe that means the peev pest in the corresponding phb would be messy and we cant handle that case the patch escalates the error to fenced phb so that the phb could be rested in order to revoer the errors on non-existing pes
f827ba9a641b481f01d1bdc0771a7afc3776cc0b	btrfs avoid uninitialized variable warning with config_smp and config_preempt both disabled gcc decides to partially inline the get_state_failrec function but cannot figure out that means the failrec pointer is always valid if the function returns success which causes a harmless warning in function clean_io_failure error failrec may be used uninitialized in this function this marks get_state_failrec and set_state_failrec both as noinline which avoids the warning in all cases for me and seems less ugly than adding a fake initialization
b0a252ed983b8e6339e01749029749adbaa890de	usb ssb use devm_kzalloc instead of manually handling the frees use devm there was also a free missing in the unregister call which is not needed with devm
5474b983c679e3df5ee3c2731c0b685915d5250d	media adv7604 improve hdmi audio handling mute audio before switching inputs to avoid mute audio if audio fifo ad recommended setting reset fifo if it ad recommended setting
b3970bdebbb2901becca7cb82e44b5c5976f0fae	watchdog kempld_wdt add __user annotation added __user annotation to fix the following sparse warnings also it makes kempld_prescaler static because it is used only in this file warning symbol kempld_prescaler was not declared should it be warning incorrect type in initializer different address spaces expected int const noderef __p got int
3b88cc0dd72e82df65c634f19417158787d86bfe	use __wait_seqno for ring throttle it turns out throttle had an almost identical bit of code to do the wait now we can call the new helper directly this is just a bonus and not needed for the overall series v2 remove which is now in __wait_seqno ben
2c56c4c27c59edfaa779da156f6a70a38bb1f2df	asoc davinci-mcasp configure xxtdm xxfmt and xxfmct registers synchronously these registers can be configured synchronously for playback and capture furthermore when mcasp is in master and sync mode the capture operation needs the tx path to be configured in order to be able to provide the needed clocks for the bus xxfmt and xxfmct registers has been already configured for both tx and rx other places in the driver
54461c3067b2dce5947c9e4f88a8d905dca2c0c9	ak8975 add of_match table for device-tree probing just like isl29018 trivial addition using both and the non-prefixed version i couldnt figure out if asahi kasei had a stock symbol to use i only found numerical indexes for their stock info
dd640039e8de4135fd59d4d963487d1239d6fabe	gpio mvebu remove initcall-based driver initialization theres no reason to use an initcall to initialize this driver and regular module_platform_driver can be used instead
6e9b1c351dd66ab3d5ecbec44aa1e0b4f576e913	pinctrl nomadik use utils map free function stop brewing our own map free function and rely on the pinctrl utils helpers
776a347df61780111574ee8875e5f7d756817de8	media v4l s5k4ecgx return v4l2_field_none from pad-level set format the sensor is progressive always return the field order set to v4l2_field_none
b71600bb4bc8591c9bc4234cc12b51d521444b1c	code improvement well there is no need to use strcmp since we can make a test of similar semantic by using the var_id field of param i moved the test into the case since var_string will never be voice spk_xlate isnt used anymore in line __number__ then there is no difference between using cp and buf in var_string case besides buf is a const char and those changes remove one uneeded line i created the function spk_reset_default_value because it clarifies the code and allows code reusing
0d63a8f50e7a7810b0631cd8ea66d44dafb215e6	fm10k enable bus master after every reset if an flr occurs vf devices will be knocked out of bus master mode and the driver will be unable to recover from the reset properly resulting in malicious driver events and an infinite reset loop in the normal case the bus master mode will already be enabled and this call will essentially be a no-op since were doing this every reset it is possible we could remove the other calls to pci_set_master but it seems not harmful to just leave them in place
3168ecbe1c04ec3feb7cb42388a17d7f047fe1a2	mm memcg use proper memcg in limit bypass commit fs buffer move allocation failure loop into the allocator allowed __gfp_nofail allocations to bypass the limit if they fail to reclaim enough memory for the charge but because the main test case was on a system the patch missed the fact that on newer kernels the charge function needs to return root_mem_cgroup when bypassing the limit and not null this will corrupt whatever memory is at null percpu pointer offset fix this quickly before problems are reported
794d175698f0e78be7f2e3f4bdbe0e7cd3f2d6ae	bluetooth hidp stop on shutdown current hidp driver purges the queue on hid shutdown but does not prevent further if a driver uses hidp_output_raw_report or hidp_get_raw_report during shutdown the driver hangs for __number__ or __number__ seconds per call until it gets a timeout that is if the output queue of an hid driver has __number__ messages pending it will take until hid_destroy_device will return the hidp_session_sem semaphore is held during shutdown so no other hid device may be during this time this patch makes hidp_output_raw_report and hidp_get_raw_report fail if is true also hidp_session will wakeup all current calls to these functions to cancel the current operations we already purge the current queues on hidp_stop so this data loss does not change the behaviour of the hid drivers
7ce8c7a3433c6d6f4adfec0611d250782f0b4b0c	mac80211 various small fixes for mpath_set_pinfo various small fixes for initialize before filling members in handle mesh_path_resolved correctly and remove bogus assignment result in correct display of flags values and meaningful exptime for expired paths in iw utility
c45569755e828a8458d125bb93feb1d90ac9be6f	unnecessary phy reset for pcie nic when setting link spped for pcie nic after setting link speed and there is no link driver does not need to do phy reset until link up for some pcie nics to do this will also reset phy speed down counter and prevent phy from auto speed down this patch fix the issue reported in following link
a0d307b21025106157709521d5b88831530e2112	bnx2x clean the sp rtnl task upon unload while unloading bnx2x needs to clean the sp_rtnl_state to prevent configuration made before the unload to be applied afterwards with stale values
ea04d2965874ca5753e756b335449c5322a85733	iio imu kmx61 remove unnecessary reg_ins1 read useful in the debugging phase not needed now
768e587e18c1c4ce0403b9532115752189422408	md generate an event when array sync is complete this patch causes md to generate an event for device-mapper when the synchronization thread is reaped this is expected behavior for device-mapper
222cbdc4835f8151b886b049d6ad56b18f88d470	f2fs avoid an overflow during utilization calculation the current f2fs uses all the block counts with __number__ bit numbers which is able to cover about volume but in calculation of utilization f2fs multiplies the count by __number__ which can induce overflow this patch fixes this
9647ff36ae266b74c82780f7f4e3bb4a39506107	fix pipe_control flush for vs_invalidate on per specification a null pipe_control needs to be emitted before any pipe_control command with the vs_invalidate flag set
f32aaf2d2b996b14e993da1c23f7ee22ea7333a3	ext4 enable the jbd2 feature based on the ext4 feature previously we were only enabling the jbd2 feature if the number of blocks in the file system was greater the problem with this is that it makes it harder to test the journal code paths with small file systems since a small test file system would with the ext4 feature enable would use a file system on-disk data structures but use a journal this would also cause problems when trying to do an online resize to grow the filesystem above the boundary fortunately the patch to support online resize for file systems hasnt been merged yet so this problem hasnt arisen in practice
3e5bde8ef4cc9e719b492726dd82a43d29468cd0	missing __number__ register interface conversion bits commit __number__ use the __number__ register interface not the legacy one forgot to fully switch one instance of struct uart_port to struct uart_8250_port causing the following compile failure in function error undeclared first use in this function error each undeclared identifier is reported only once error for each function it appears in this went unnoticed in as config_hpdca is not set to y by allmodconfig
af0d95af79773f7637107cd3871aaabcb425f15a	uprobes teach __create_xol_area to accept the predefined vaddr currently xol_add_vma uses get_unmapped_area for but the next patches need to use the fixed address so this patch adds the new vaddr argument to __create_xol_area which should be used as if it is nonzero xol_add_vma doesnt bother to verify that the predefined addr is not used insert_vm_struct should fail if find_vma_links detects the overlap with the existing vma also __create_xol_area doesnt need __gfp_zero to allocate area
9afac933433ca71e0f78958a1286a8d3b9de5582	use drconf flags while processing detected lmbs replace hard coded values with existing drconf flags while procesing detected lmbs from the device tree does not change any functionality
ba811addff3d29d1ea9861dbfc06e8ef80714f94	spi fsl-dspi use simple_dev_pm_ops macro use simple_dev_pm_ops macro in order to make the code simpler
493a708179469e3978e50f59902e9d47b6f3dabd	clarify ibx dp workaround instead of checking for check for ibx to make it clearer that this is a ibx-specific workaround no functional change because we smash the ppt pch into the has_pch_cpt check and atm dp isnt enabled on the haswell lpt pch yet see bspec vol __number__ part __number__ section about dpbcd bit __number__ for details of this workaround
011cf577b2531dfbd2254bd9ec147ad71471abaf	generate a hang error code we get a large number of bugs which have a hey i have that too because they see a gpu hang in dmesg while two machines of the same model having a gpu hang is indeed a coincidence it is far from enough evidence to suggest they are the same in order to reduce this effect and hopefully get people to file new bug reports clearly the error message itself has been insufficient see ref at the bottom for a new bug report with this characteristic the algorithm is purposely pretty naive i dont think we need much in order to avoid the problem i am trying to solve and keeping it naive gives us some ability to make a decent test case references
a858c7dab4b9b6a0b5742c39b10408780ca315c8	iio inv-mpu export scale_available attributes export the available scales for accel and gyro in order to hint the user-space as to what are the available valid values
16cf8a80a8f0f4757427b17cdfb6c4897674db68	arm dma-mapping remove init_consistent_dma_size stub since commit arm dma-mapping remove custom consistent dma region setting consistent dma memory size is not longer required all calls to this function has been already removed so the init_consistent_dma_size stub can also be gone
07a648e668aa7f7c94d41d8d2e4ad53b609e391d	can at91_can register mb0 sysfs entry only on at91sam9263 this patch prepares the driver for the at91sam9x5 processors which dont have the mb0 bug see commit for more details
b05e9e4c9d5d0d32357468b64d72101b0fb2b650	raise uvd clocks on init v3 v2 not only raise the clocks on vcpu boot but also on ib test v3 agd5f fix r600_uvd_init return value
3a22bf506c9df47e93e8dc8a68d86cd8ae384d98	sunrpc clear svc transports lists helper introduced this patch moves service transports deletion from service sockets lists to separated function this is a precursor patch which would be usefull with service shutdown in network namespace context introduced later in the series
96605672a4172f6e31f31ce29ee27fef68011de0	correct required callback functions for modify_qp functions required for modify_port were incorrectly being required for modify_qp
f3f017305d4da61b64098f3d89cb64563c95087a	hpsa add function is_logical_device simplify checking for devices
0dd90aa9d6222e12201f05c0058e8741b7f66474	microblaze fix ret_from_fork declaration ret_from_fork is used by nommu system too it should be the part of patch disintegrate for microblaze sha1 c40d04df152a1111c5bbcb632278394dabd2b73d
087cfa93e0fb5f06c0e976e6f468ffedc83b3223	pci shpchp use pci_is_bridge to simplify code use pci_is_bridge to simplify code no functional change requires pci rename pci_is_bridge to pci_has_subordinate requires pci add new pci_is_bridge interface
78371a45dfa8f2a2f3892b983c39863a67c66b11	ext4 fix assertion in ext4_add_complete_io it doesnt make sense to require when we are in nojournal mode so update the assertion accordingly to avoid false warnings from ext4_add_complete_io
4b4b535e64cdf404463b8eceba86c4f9d4391287	staging unisys remove incorrect error handling after queue_delayed_work the queue_delayed_work return false if the work is already on the queue true otherwise so return value cannot be less than zero
88386e858bbb21eb05c15c040dbb3e6ad1cb3568	remove some coding sytle not in standard remove some coding sytle not in standard in former code
74ce6b6c63262defba91c4d790b3f91074793c0d	initialize before use by i915_gem_object_do_bit17_swizzle if we leave set to null before attempting to deswizzle them then an oops is well deserved fixes regression introduced in commit author chris wilson chris-wilson.co.uk date fri jun __number__ __number__ replace the array of pages with a scatterlist reported-and-tested-by krzysztof kolasa
cca605dd4b3b2bfa381250b7dbbe16b124916f24	net_sched cbq remove a flaky use of qdisc_is_throttled so far no qdisc ever unset the throttled bit at enqueue time so cbq usage of qdisc_is_throttled was flaky since __qdisc_state_throttled is way too expensive considering that only cbq was eventually caring for this status it would make sense to implement a qdisc ops if we find that this is needed
97d5dd121c3304c65326f1ce9f04f7d0161827bc	zcache remove the second argument of kunmap_atomic
ce395088832bfd56bd28824b31a6a3685f3fd339	cpc925_edac support single-processor configurations if second cpu is not enabled cpc925 edac driver will spill out warnings about errors on second processor interface support masking that out by detecting at runtime which cpus are present in device tree
5b1e5b530753e660080d402b81b88684893157d5	drivers hv vmbus remove the channel from the channel lists on failure properly rollback state in vmbus_pocess_offer in the failure paths
f2fc9f6e957bc0b0207fe31bbb6bf9286628c09f	staging wilc1000 fix error do not initialise globals to __number__ or null this patch fixes the error to error do not initialise globals to __number__ or null
a0c9cbb93da9b9a0e00907a4a5d2e5f1fed86350	watchdog introduce the proc_watchdog_update function this series introduces a separate handler for each watchdog parameter in the separate handlers need a common function that they can call to update the run state of the lockup detectors or to have the lockup detectors use a new sample period
349850f0a9188cb87b4ef6c01c057cb42cca478e	clean up a condition we dont need to test ret twice and also the white space is messed up
6b74b192f62fb5f97e0f4c4d79ef787e3061d664	staging csr fixed over __number__ char lines appropriately modified the lines over __number__ characters
c1d70dd9c44d7554b97f38b5ce8001d3cbe10f61	alsa asihpi use valid channel count in format enumeration since introduction of mono and low latency modes fixed channel count of __number__ is not always valid use reported max_channels instead
4ecb1d83f6abe8d49163427f4d431ebe98f8bd5f	vxlan set ports in flow key when doing route lookups otherwise a xfrm policy with being set cannot be matched
920d087e44c228be6270e07fdb59043380a4bb00	drivers net irda bfin_sir fix compile error bit iren is replaced by umod_irda and umod_mask since blackfin added but this driver didnt update which will cause bfin_sir build error error iren undeclared first use in this function error iren undeclared first use in this function error iren undeclared first use in this function this patch fix it
73d8a42464d3fd8de907d032a7dafa1d23d88490	wl18xx change low_band_component_type value for com8 like hdk com8 uses for the low_band_component_type as well hardcode the value for com8 until this configuration can be done in the external configuration binary to be implemented
499fde662f1957e3cb8d192a94a099ebe19c714b	vsock use new wait api for vsock_stream_sendmsg as reported by michal vsock_stream_sendmsg could still sleep at vsock_stream_has_space after prepare_to_wait vsock_stream_has_space vmci_transport_stream_has_space vmci_qpair_produce_free_space qp_lock qp_acquire_queue_mutex mutex_lock just switch to the new wait api like we did for commit d9dc8b0f8b4e net fix sleeping for sk_wait_event
480cadc2b7e0fa2bbab20141efb547dfe0c3707c	scsi fix qemu boot hang problem the latest kernel fails to boot qemu arm images when using scsi for disk access boot gets stuck after the following messages brd module loaded sym53c8xx __number__ enabling device __number__ __number__ sym0 rev at pci __number__ irq __number__ sym0 no nvram id __number__ fast-40 lvd parity checking sym0 scsi bus has been reset scsi host0 bisect points to commit scsi convert device_busy to atomic_t code inspection shows the following suspicious change in scsi_request_fn out_delay if __number__ if blk_delay_queueq scsi_queue_delay __number__ was replaced with meaning the logic was reversed changing this expression to fixes the problem
7e20b6f39aef541d890eba1fdf493f33b39d29e4	omap iommu fix pte programming fix the pte programming to set the page attributes correctly by replacing the bitwise check with an explicit values check otherwise entries will be erroneously programmed like entries which is not what the hardware expects
a332bf9a65ab34b01226ed177f6937af843c8465	hwmon applesmc shorten minimum wait time the __number__ series of macbooks have a faster smc and the current driver timings do not work at all tests show that decreasing the minimum wait time from __number__ us to __number__ us works well since this is still larger than the original minimum of __number__ us used before __number__ there is nothing inherently problematic with changing it the fail frequency on older machines seems to increase slightly but not enough to be noticeable tested on mba11 mba31 the patch was originally written by adamski99 and later tested by janhouse
1ce24864bff40e11500a699789412115fdf244bf	spi mediatek only do dma for aligned buffers mediatek spi dma only works when tx and rx buffer addresses are aligned unaligned dma transactions appeared to work previously since we the spi core was incorrectly using the spi_master device for dma which had a __number__ dma_mask and therefore the swiotlb dma map operations were falling back to using bounce buffers since each dma transaction would use its own buffer the mapped starting address of each transaction was always aligned when doing real dma the mapped address will share the alignment of the raw buffer provided by the spi user which may or may not be aligned if a buffer is not aligned we cannot use dma and must use fifo based transaction instead so this patch implements a scheme that allows using the fifo for arbitrary length transactions larger than the fifo size by reloading the fifo in the interrupt handler
5eec2f0228e40318e452d83a5e91052986437d3b	microblaze fix initrd support support has been never validated
41e1d60ea50a97fe1c3f8075a13761ddc17dd45a	scsi ufs qcom dont free resource-managed kmalloc element host is allocated by managed kmalloc devm_kmalloc the memory allocated with this function is automatically freed on driver detach so no need to make an exclusive free call over it
a224bd36bf5ccc72d0f12ab11216706762133177	re-send packets on timeout actually re-send packets when the t1 timer runs out this fixes a bug where packets are waiting on the write queue until disconnection when no other traffic is outstanding
c6e86db2bec56e05c7ad1524ed2273a4cc8e8868	input tsc ti_tscadc remove definition of end of interrupt register the touchscreen ip uses level sensitive interrupts rather than edge sensitive interrupts and therefore the is no need to use the eoi register to have the module re-strobe the interrupt line if there pending interrupts exist
2ca17b87e85ffada1e3da941d5c1c9ee4f56ca9f	add missing rpm wakelock to ggtt pread joonas spotted a discrepancy between the pwrite and pread ioctls in that pwrite takes the rpm wakelock around its ggtt access the wakelock is required in order for the gtt to function in disregard for the current convention we take the rpm wakelock around the access itself rather than around the struct_mutex as the nesting is not strictly required and such ordering will one day be fixed by explicitly noting the barrier dependencies between the ggtt and rpm link cherry picked from commit
0fcb04d59351f790efb8da18edefd6ab4d9bbf3b	dm thin fix regression in advertised discard limits when establishing a thin devices discard limits we cannot rely on the underlying thin-pool devices discard capabilities which are inherited from the thin-pools underlying data device given that dm thin devices must provide discard support even when the thin-pools underlying data device doesnt support discards users were exposed to this thin device discard limits regression if their thin-pools underlying data device does _not_ support discards this regression caused all upper-layers that called the blkdev_issue_discard interface to not be able to issue discards to thin devices because discard_granularity was __number__ this regression wasnt caught earlier because the device-mapper-test-suites extensive thin-provisioning discard tests are only ever performed against thin-pools with data devices that support discards fix is to have thin_io_hints test the pools discard_enabled feature rather than inferring whether or not a thin devices discard support should be enabled by looking at the thin-pools discard_granularity
4f07854dd7fc197d9ea2bd83c26736baabb0b981	write eld info for hdmi audio hdmi audio related registers will be configured in write_eld callback
c417bdedb14c12671a199bb5d4f3b78b438598b3	thermal convert mtk_thermal to use devm_thermal_zone_of_sensor_register this changes the driver to use the devm_ version of thermal_zone_of_sensor_register and cleans up the local points and unregister calls
0ade4a34fd439d62df46937e8f3e584eb0879579	staging dgap remove unneeded kfree in dgap_tty_register_ports when it failed to allocate for printer_ports serial_ports can be freed in dgap_tty_uninit
ee947859bf8a357a45176b238dc9f9db11eb4d4e	allow tuning of sdma interrupt rate the sdma engines were configured to generate progress interrupts every time they processed descriptors where n is the size of the descriptor queue this interval was too infrequent leading to degraded performance this commit adds a module parameter as well as a recommended default which allows for the tuning of the interrupt frequency
e1957dba5b54b9c9b1d16f9d5f3f8d41d82bee41	cfg80211 process events caused by suspend before suspending when suspending without wowlan cfg80211 will ask drivers to disconnect even when the driver does this synchronously and immediately returns with a notification cfg80211 schedules the handling thereof to a workqueue and may then call back into the driver when the driver was already fix this by processing all events caused by cfg80211_leave_all directly after that function returns the driver still needs to do the right thing here and wait for the firmware response but that is at least true for mwifiex where this occurred
30e2dd798dbd5929f981ec0c77ab8567e8859ad9	wl18xx implement hw op for getting rx packet data length implement the way for getting the length of a rx packet
ffb011602d263ca57c05125c3b9ef476673e88f7	mfd db8500-prcmu use ansi function declaration silences the following warning warning non-ansi function declaration of function prcmu_ac_sleep_req
ffd96e35c16a99fdb490cc5723b8e32135ae5883	get rid of duplicated call to bio_data_dir in once is detected it never and couldnt be changed use the result always
a348ed83d9efe8c11ecc85c15d7329825b97431e	edac mce_amd detect smca using x86_feature_smca use x86_feature_smca when detecting if smca is available instead of directly using cpuid __number__ link
496fb7806d616185a46865a4f3a20ef19dc6c7e3	blkcg fix ref leak in __blkg_lookup_create __blkg_lookup_create leaked ref if blkg allocation failed fix it
12c95f137d09450b2c2e86fb12da5c7cf585b322	ps3disk switch to using blk_queue_write_cache
829511d8aa7a2179bba57ab4ab277d6f9c77ae5b	rcu fix dubious if condition in __call_rcu_nocb_enqueue this commit replaces an incorrect but fortunately functional bitwise or operator with the correct logical or
e32634f5d57f1dce88624b70a6d625915f6ea09e	pstore fix memory leak when decompress using big_oops_buf after sucessful decompressing the buffer which pointed by buf will be lost as buf is overwrite by big_oops_buf and will never be freed
56d95f3174450d22a3b8d936bea2cb414262ce8f	usb gadget ci13xx_pci remove unneeded check in ci13xxx_pci_probe as pointed out by dan carpenter the check for null for the id variable is no longer needed especially as we just dereferenced it a few lines earlier causing an oops if it really was null this was caused by usb gadget ci13xxx convert to platform device
70006ad6d8059dd9aa473a2bb739b6151c0ae117	do not use inside warns saves __number__ bytes of strings
d6a71bf79da03b835f8df5430eaee6fc46df1038	iommu fix for possible null pointer dereference there is otherwise a risk of a possible null pointer dereference was largely found by using a static code analysis program called cppcheck
dc5f428d6155ceb3b9045851fd94fd8abff61502	make some dp parameters const ported from similar radeon patch
f1cd53eccad75b9360378f5ce635ba942523fc44	staging rtl8192e remove unused variable this patch removes a variable which has never been used the following coccinelle semantic patch was used to make this transformation type t identifier i constant c t i when i i c
19e49834d22c2271ed1f4a03aaa4b74986447fb4	selinux remove flags parameter from inode_has_perm every single user passes in __number__ i think we had non-zero users back in some stone age when selinux_inode_permission was implemented in terms of inode_has_perm but that complicated case got split up into a totally separate code-path so that we could optimize the much simpler special cases see commit selinux delay initialization of audit data in selinux_inode_permission for example
eb130dbfc40eabcd4e10797310bda6b9f6dd7e76	blk-mq end unstarted requests on a dying queue requests that havent been started prior to a queue dying can be ended in error without waiting for them to start and time out added code comment to explain why this is done
bde9e5098c121cfca6d9c7e3a26e6ae44a3c9632	samsung-laptop cleanup return type mode_t vs umode_t this function returns a umode_t unsigned short instead of mode_t which is an unsigned int on some architectures cleaning this up silences a compile warning warning initialization from incompatible pointer type enabled by default
3adee7a7976012a20f1d3b5a529a3c105e29fef1	drop i915_ prefix from enable_rc6 enable_fbc enable_ppgtt parameters having to use is inconsistent and a bit on the verbose side drop the prefix per daniels request who also says this is not abi we need to maintain
30d2049b3277cdf6964996f86626add08cf160df	ath10k support up to __number__ vdevs the __number__ x __number__ trick wont work when you are trying to fill up all __number__ bits so add special case for that
e4408ce3c23f8451eff7a2954694598fb8fce833	tty quatech2 remove unneeded is_open cannot be called outside the gap between open and close so there is no need to check whether the port is open in break_ctl in quatech2 remove the check and also that member completely
0c46575f7c7dea4068924f2c0d938232f68a5cda	msm msm_fb add remove function for platform driver for clean unloading this adds a remove function to platform driver structure so that resources are released when driver is unloaded
df58433145eeafd541289b03885b1b4c798fff32	media media pci mantis remove unused function remove the function write_eeprom_byte that is not used anywhere this was partially found by using a static code analysis program called cppcheck
9ee677231bbc6a9e6ec9057d33d81eb248742b0a	omapdss fix return value check in create_dss_pdev in case of error the function omap_device_alloc returns err_ptr not null pointer the null test in the return value check should be replaced with is_err dpatch engine is used to auto generated this patch
e008f3f07ffba2be471ffd79bd1922af0042f936	net avoid to call skb_queue_len again the queue length of has been put into qlen and impossible to change since hold the lock
052151a9798ef7a79372fdc688018dc405a6063c	xprtrdma display xids in host byte order and the backchannel code display xids in host byte order follow suit in xprtrdma
5265fc6219ddbf8dfc9b18223448a4997fb06eae	have apparmor module parameters work with no args the apparmor module parameters for param_ops_aabool and param_ops_aalockpolicy are both based off of the param_ops_bool and can handle a null value passed in as val have it enable the new kernel_param_fl_noargs flag to allow the parameters to be set without having to state or
cb3abdd628abe8583c81b07d5bb8b6d1dbd12227	clk rockchip remove mux_core_reg from rockchip_cpuclk_reg_data mux_core_reg isnt been used anywhere lets remove it
05b371964049be1f15dec46caa63f106dd22d20d	staging bcm checkpatch fixes this fixes the following checkpatch issues warning line over __number__ characters interfaceidlemoderespondstruct bcm_mini_adapter unsigned int error foo bar should be foo interfacewakeupstruct bcm_mini_adapter adapter
c95d2e87fca1402e1a6a2a8577bf78abd401671f	staging gdm724x replace ternary operator with min macro use macro min to get the minimum of two values for brevity and readability the macro mux_tx_max_size has a value of __number__ which is well within the integer limits this check was done manually found using coccinelle type t t x t y x y x y x y x y
68f8e9fa56ce6b5cb18323e8d8fa536fee0f89ca	pci print more info in sriov_enable error message if we dont have space for all the bus numbers required to enable vfs print the largest bus number required and the range available no functional change improved error message only
601807bbb7b422012492611b283bdf3647d3742c	hwmon adt7411 set sane values for cfg1 and cfg3 according to the datasheet we have to set some bits as __number__ and others as __number__ make sure we do this for cfg1 and cfg3
c08957a2cf3c4a14e68d72c845d3c52cf3d826e1	regulator properly register dummy regulator driver recent changes in the driver core appear to mean that the data structures for the driver core are not fully initialised unless the driver is bound make sure the driver core knows the dummy driver is in use by binding it to a driver
33cef264cd945d64ae8cbbfc5f246661f9655483	bluetooth fix compile warnings in mgmt commit af7985bf85840e3dc90ba108a679db044f91f00e introduced regression resulting in complie warnings warning invalid assignment left side has type restricted __le32 right side has type int warning invalid assignment left side has type restricted __le32 right side has type int warning cast from restricted __le32
8a5b20aebaa3d0ade5b8381e64d35fb777b7b355	slub fix off by one in number of slab tests min_partial means minimum number of slab cached in node partial list so if nr_partial is less than it we keep newly empty slab on node partial list rather than freeing it but if nr_partial is equal or greater than it it means that we have enough partial slabs so should free newly empty slab current implementation missed the equal case so if we set min_partial is __number__ then at least one slab could be cached this is critical problem to kmemcg destroying logic because it doesnt works properly if some slabs is cached this patch fixes this problem fixes slub make dead memcg caches discard free slabs immediately
9eb0432baa150c31222be71f435091ea562f93cf	move s_sde to read mostly section of hfi1_qp this would reduce l2 cache misses on s_sde in the _hfi1_schedule_send function when invoked from post_send thereby improving performance of post_send
a732152c76ee194274299905c700125bef1fc0c8	staging rtl8712 remove unnecessary variable initialization variable u32 c always re-initialize in for loop initialized value of u32 c is not used in function and is redundant hence removed
e80eef33f4596a247fdcf7d67d54d95d9dfaf7d3	arm bcm use memory accessors for ioremapped area the pointer used to pass parameters to an smc call is produced through a call to ioremap as such we should be using functions like writel to access it
041832565e405d2e2ea218632b7bcafa87deaece	usb phy mv-u3d switch over to by removing the _relaxed suffix we can build this driver in other architectures
25b1e67921f448cdddf70042ba233ffe43d33a9c	net fix continued iteration in rtnl_bridge_getlink commit e5a55a898720096f43bc24938f8875c0a1b34cd7 net create generic bridge ops broke the handling of a non-zero starting index in rtnl_bridge_getlink based on the old br_dump_ifinfo when the starting index is non-zero we need to increment the current index for each entry that we are skipping also we need to check the index before both cases since we may previously have stopped iteration between getting information about a device from its master and from itself
7b39a0b791a356d09dd2517ec04b1bf9cdced4ab	avoid computing invalid wm levels when is enabled on only watermarks can be enabled when sprites are enabled and on sprite scaling is limited to lp0 only so we can avoid computing the extra levels were never going to use
da37845fdce24e174f44d020bc4085ddd1c8a6bd	packet uses kfree_skb for errors consume_skb isnt for error cases that kfree_skb is more proper one at this patch it fixed tpacket_rcv and packet_rcv to be consistent for error or non-error cases letting perf trace its event properly
05ce1a4961cffd7b0c8d4b70a7c9fa341368bc48	restrict ilk-specific edp power hack to ilk this eliminates a fairly long delay when power sequencing newer hardware
e8f6e2b98d164d94bc29bb488413301d26cc5b3c	staging comedi ni_660x add comments for the spinlock_t definitions fix the issues check spinlock_t definition without comment for aesthetics rename the soft_reg_copy_lock to clarify what its used for
a0d5e63e436629f41c1e8ea6aa0d506192afd75e	staging lustre use proper braces in libcfs_kkuc_group_put add in missing braces for
37d9078b9b395185947784ba8d71c0980e5aacad	drop redundant watermark programming in commit commit e4ca061275ec6a48b66c6edebe08644e666994c0 author patrik jakobsson linux.intel.com date wed jul __number__ __number__ dont forget to mark crtc as inactive after disable we added extra watermark updates to all of the entrypoints to avoid problems problems with system resume on skl those disable entrypoints are currently called in just two places in the driver intel_atomic_commit during a modeset and intel_crtc_disable_noatomic which is called during hardware readout it seems that this extra watermark recalculation should only be important in the latter case which happens during a resume operation the former case should always have appropriate watermark programming happening at other points in the modeset sequence lets move the watermark update out of the entrypoints and place it directly in intel_crtc_disable_noatomic so that it only happens on s3 resume and not during a regular modeset since the existing watermark handling should properly update watermarks during normal atomic commits
82932d4cff46627bc1a693893326400aab5f8967	media msi001 fix possible integer overflow coverity cid __number__ unintentional integer overflow overflow_before_widen potentially overflowing expression f_rf f_if f_if1 lo_div with type unsigned int __number__ bits unsigned is evaluated using arithmetic before being used in a context which expects an expression of type u64 __number__ bits unsigned to avoid overflow cast either operand to u64 before performing the multiplication
e43569e6d3c71eb266641c6297ea54f7ac66954f	sctp flush if we cant fit another data chunk there is no point on delaying the packet if we cant fit a single byte of data on it anymore so lets just reduce the threshold by the amount that a data chunk with __number__ bytes rounding would use v2 based on the right tree
fe132649b5b28c19bc657d167c232180774739f8	gpio rcar add support for dt irq flags the gpio-rcar driver has no irq domain of xlate function and thus ignores irq flags specified in dt fix this by using the two-cell xlate function
31d4cf12944ea7e578e4cef9b742da504dfbd444	rtl8188eu simplify rtw_endofpktfile in reports a coding style problem in braces are not necessary for single statement blocks file this patch removes unnecessary braces and simplifies the function to a single return statement
b5603a943d11cd4c74e90fdd68296ffdc8f6749c	media cx231xx dont use dev it not allocated changeset added a fixup at the error check code however it introduced a new error cx231xx_usb_probe error we previously assumed dev could be null see line __number__ this happens when dev kmalloc fails so instead of relying on it to succeed just change the parameter of clear_bit from to nr
6cdeddcc8149672d4b888709d063825a80304d09	arm exynos enable l2 configuration through device tree this patch enables calling generic l2 setup functions if device tree is used
4a6313644c3188f4aa1a6b4403896375baa2e09a	staging line6 use module_usb_driver now that our path is just registering and unregistering the usb driver we can use module_usb_driver instead this also has the nice side affect of removing the unneeded printk for the module version number
2633f736470e803ac9f5372a0d83ba108345a80a	asoc wm5100 handle failures to determine accessory polarity if we get an indeterminate impedance with both headset polarities then give up and report the accessory as a headphone rather than continually retrying
e4e292f3c7df753926ecb411788057e15154189e	ath9k set correct peak detect threshold the value is different for pcoem cards and
2a7aceecf15a463ba6bfa83b6579e75bb4703cd9	fixup non-24bpp support for vga screens on haswell the lpt pch only supports so we need to force the pipe bpp to the right value
1cc9fc53b3e6f323c4194157fcc606e30f2a0b6e	at86rf230 remove unnecessary state read this patch removes a unnecessary state read the status value is never evaluate after reading the state also rename the status variable to dvdd because this variable will be used later
4b39248365e09fb8268b6fecd1704907ffc3d980	remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
ecca063b31b88d31ee79e9d958ea78023659554e	sunrpc fix printk that is not only for nfsd
c099225f0a248c395509606932e3ca2cf6c65932	iio hmc5843 swap suspend and resume implementations swap implementations of hmc5843_common_suspend and hmc5843_common_resume functions for they have been inversed device should go on sleep mode on suspend and on continuous mode on resume
369d6b7f00977eb9090212d4a47ac71f3ec5c217	nfs fix stateid used for nfs v4 closes after the client uses the current stateid from the nfs4_state structure to close a file this could potentially contain a delegation stateid which is disallowed by the protocol and causes servers to return nfs4err_bad_stateid this patch restores the correct behavior of sending the open stateid to close a file
98cf9965c09fc3fe6d8bd9760dba1dec53e387cc	regulator arizona-micsupp use soc component pin control functions the name of a codec pin can have an optional prefix string which is defined by the soc machine driver the snd_soc_dapm_x_pin functions take the fully-specified name including the prefix and so the existing code would fail to find the pin if the audio machine driver had added a prefix switch to using the snd_soc_component_x_pin equivalent functions that take a specified soc component and automatically add the name prefix to the provided pin name
cf9f123b38345b2c2777e642eb9bb561f4b7de91	nvme use dma_set_mask correctly in some circumstances setting a dma mask can fail as explained in use the recommended code sequence to set a dma mask if setting a dma mask fails
469230d118dc0822f6bf46c75ab147fa9f00741f	pptp fix sparse pointer warning callid_sock array is referenced via rcu_dereference and sparse rcu checks complains about address space mismatch
3487c65659088c8205d8ab726b45469912271bbd	pci rcar remove pci_probe_only handling the pcie rcar host driver is not used in system configurations requiring the pci_probe_only flag to be set to prevent resources assignment therefore the driver code handling the flag can be removed from the kernel
135844ef9feff93263319c18ead863a011381b57	skge use napi_complete_done use napi_complete_done instead of __napi_complete to __number__ get support of gro_flush_timeout if opt-in __number__ not rearm interrupts for busy-polling users __number__ use standard napi api and get rid of napi_gro_flush
ef5e90e8ccb7b715c0a1509339f730b2bf9698a2	serial sh-sci add more serial port register documentation improve documentation for the hscif serial port register make it clear the rts and cts lines are active-low document the bits related to the serial ports clock pin
b6dd245c4594482d46507a0bfd100439be367952	usb host ohci-platform bug_on to warn_on on probe usb_ohci_pdata is certainly required in ohci-platform driver this patch avoids using bug_on from driver and return from probe with warn_on if pdata was null
185af4d6668e4805d18d1bdf21dfec89d680fee3	input psmouse remove unneeded check in psmouse_reconnect psmouse_reconnect will not be called if psmouse driver is not bound to the serio port so there is no point in checking that also as coded it introduces potential null dereference in psmouse_dbg in case psmouse is indeed null lets just remove it detected by coverity cid __number__
1ffc7622a53a8cd5625c57767d01fea1e27aef3d	staging rtl8723au remove redundant checks of wpa oui all callers get here by searching for the wpa oui first so no point checking for it once we get here
82875163a8ef1e25477402c5ebb8f5beaea5e93e	asoc cs35l35 fix display revision id
66b76dbe37df88b250ffdac186adba3e5dc24631	usb chipidea udc move write barrier into hw_ep_prime since there should be a write barrier before every call of hw_ep_prime we could move it into hw_ep_prime
01fd3c2744540ae7554bf098a9615a8310c6fc13	tty serial constify sunhv_ops structs constifies sunhv_ops structures in ttys serial driver since they are not modified after their initialization detected and found using coccinelle
eadcabc697e904e0d93d10070a324d8855740b91	selinux do all flags twiddling in one place currently we set the initialize and seclabel flag in one place do some unrelated printk then we unset the seclabel flag eww instead do the flag twiddling in one place in the code not seperated by unrelated printk also dont set and unset the seclabel flag only set it if we need to
cfde819088422503b5c69e03ab7bb90f87121d4d	keys use keyring_alloc to create module signing keyring use keyring_alloc to create special keyrings now that it has a permissions parameter rather than using key_alloc key_instantiate_and_link
6dc9b4550a74cad7daed0be192030983dad44755	sh-pfc return an error if a pin doesnt support the requested direction when setting a pin direction verify that the requested direction is supported and return an error if it isnt this requires pin configuration information to be supplied by soc data the check is a no-op if the information is not supplied
9900c48c46d8bcf497972024c5fe366e6d9771f3	fix address ranges for asynchronous and panic stack git commit dc7ee00d4771 s390 lowcore stack pointer offsets introduced a regression in regard to save_stack_trace the stack pointer for the asynchronous and the panic stack in the lowcore now have an additional offset applied to them this offset needs to be taken into account in the calculation for the low and high address for the stacks this bug was already partially fixed with fix address ranges for asynchronous and panic stack this patch fixes it also for the stacktrace code
55c868a322fd8687884f0192da8b997d443cad07	forbid runtime pm on driver unload the pci core calls pm_runtime_forbid on device probe in pci_pm_init making this the default state when nouveau is loaded nouveau_drm_load therefore calls pm_runtime_allow but theres no pm_runtime_forbid in nouveau_drm_unload to balance it add it so that we leave the device in the same state that we found it this isnt a bug its just good housekeeping when nouveau is first loaded with then unloaded and loaded again with pm_runtime_forbid will be called from nouveau_pmops_runtime_idle or nouveau_pmops_runtime_suspend so the behaviour is correct the nvidia blob doesnt use runtime pm but if it ever does this commit avoids that it has to clean up behind nouveau link
e20780439b26ba95aeb29d3e27cd8cc32bc82a4c	defer request freeing with context destruction we always want to be able to tear down the underlying address space this is invoked on the last unreference to the context which could happen before weve moved all objects to the inactive list to enable a clean tear down the address space make sure to process the request free lastly without this change we cannot guarantee to we dont still have active objects in the vm as an example of a failing case ctx-a is created ctx-a is used during execbuf does a context switch count __number__ and add_request count __number__ ctx b runs switches ctx-a count __number__ ctx-a is destroyed count __number__ retire requests is called free_request from ctx-a count __number__ free context with active object as mentioned above by doing the free request after processing the active list we can avoid this case
322832f2f19e04c866a0ce4bdac8cff8e695f2b3	usb dwc3 host fix broken xhci host looks like we lost all changes related to commit usb dwc3 core cleanup irq resources in when felipes next branch was merged into gregs next branch fixes merge tag of into usb-next
5a137df1d6570de438ce12f33d6b4308b5e965fb	media cec use __func__ in log messages the hardcoded function name is actually wrong use __func__ instead
38679b720014d89b192c38d4c604f5a718b9788d	fix missing endpoint unlink when no mem during enqueue and some small code style fixes
0f0909e242f73c1154272cf04f07fc9afe13e5b8	fscrypto dont use on-stack buffer for key derivation with the new in __float__ option to use a virtually-mapped stack config_vmap_stack stack buffers cannot be used as for the scatterlist crypto api because they may not be directly mappable to struct page get_crypt_info was using a stack buffer to hold the output from the encryption operation used to derive the per-file key fix it by using a heap buffer this bug could most easily be observed in a config_debug_sg kernel because this allowed the bug in sg_set_buf to be triggered
8802cd842db76d29dd24bbe555f82b478b0fd469	staging comedi adl_pci9111 factor out chanlist checking from step __number__ of the validates that the is compatible with the hardware for aesthetics factor out the step __number__ code for the analog input async command support tidy up the factored out code to minimize the noise change the comedi_err which is a wrapper around dev_err to dev_dbg
776e4aae5508848730a82b4695edfbd7bc802c33	btrfs remove useless acl check posix_acl_xattr_set already does the check and its the only way to feed in an acl from userspace so the check here is useless remove it
67d35960f445176d5548c660a1b1708cad1c2042	mmc core add error message when switching fails in mmc_select_hs the switch failure message in mmc_select_timing had been removed since that is invalid commit mmc core remove the invalid message in mmc_select_timing now in the case when mmc_select_hs return error in mmc_select_timing there is nothing to print failure message lets make for mmc_select_hs print message itself in the failure case
85f9b5f9c48abdbcbeacdd5a6daf76c63eba8c83	the irq interrupt for the second bsd ring
4c4d684a55fc01dac6bee696efc56b96d0e6c03a	cfg80211 fix warn_on for re-association to the expired bss cfg80211 allows re-association in managed mode and if a user wants to re-associate to the same ap network after the time period of ieee80211_scan_result_expire cfg80211 warns with the following message on receiving the connect result event cut here warning cpu __number__ pid __number__ at cfg80211 call trace __address__ __address__ __address__ __address__ cfg80211 __address__ __address__ __address__ cfg80211 __address__ __address__ cfg80211 __address__ cfg80211 __address__ __address__ __address__ __address__ __address__ __address__ __address__ end trace the reason is that in connect result event cfg80211 unholds the bss to which the device is associated and was held so far so for the event with status successful when cfg80211 wants to get that bss from the devices bss list it gets a null bss because the bss has been expired and unheld already fix it by reshuffling the code
3527d85b85e65401b7d93073b3ab4e687cdd2521	asoc simple-card use asoc_simple_card_parse_card_name
5482d75a6597de97f79255a257c486a6960c6c65	dc reset controller on driver remove since the device will no longer be used may as well keep it in reset to potentially save some power and make sure it is in a clean state the next time its probed
59d6a29e554d891a513476c13a6657825f8be270	staging remove unneeded lock in irq handler in the rest of the code the data is protected with spin_lock_irqsave
6fd0fcc93b1eaf82911782de5c7aa35c174bf620	kvm s390 fix return code handling in handlers kvm_s390_inject_program_int may return with a non-zero return value in case of an error out of memory report that to the calling functions instead of ignoring the error case
fee4ab9c0cf223e9f0f2d9d2e5a2f24f6539ccbd	acpica fix deconstification warnings with acpi_ns_root_initialize acpica commit link
42c46e6ba5461fcab289bf4a1b7160f94c10aa28	ignore unfortunately xend creates a bogus entry pair on xenstore that console backends cannot properly cope with any guest behavior that is not completely ignoring is going to either cause problems with xenconsoled or qemu returning __number__ or from xencons_probe is not enough because it is going to cause the frontend state to become __number__ or __number__ respectively the best possible thing we can do here is just ignore the entry from xenbus_probe_frontend
4024593d5d9cc0002184f1748b7cdb1705f08e05	aic94xx remove scsi host before detaching from sas transport commit cff549e4860f scsi proper state checking and module refcount handling in scsi_device_get the reference count of scsi device was changed which could lead to when rmmod with at least on drive attached scsi error handle will run into infinite loop and lockup the system fix it by remove scsi host first this way scsi core will not send commands down after detaching sas transport this is a follow up fix for benjamins fix for pm80xx see also
ebc3e41e371620bae6c315c9174bcb2d6c4e9ae7	pm sleep rename platform functions in rename several local functions related to platform handling during system suspend resume in so that their names better reflect their roles
dc34b05fea0cc9a869863b929f37f1e8ce30edf4	mips fix decoding of c0_config1 for mipsxx caches with __number__ ways per set this affects certain cores patchwork
dfe5b0d52d5880bd9d4b427e1a53c9e9e4c3c820	brcmfmac remove restriction from callback in the callback a condition was checked whether a normal scan was ongoing however there is no need for this check as it is ok to start the scheduled scan irrespective whether or not a normal scan is ongoing
338ed9b4de57c4b7965b96364593e27de0d89582	net_sched sch_htb export class backlog in dumps we already get child qdisc qlen we also can get its backlog so that class dumps can report it also replace qstats by a single drop counter but move it in a separate cache line so that drops do not dirty useful cache lines tested tc cl sh dev eth0 class htb root leaf __number__ prio __number__ rate ceil burst __number__ cburst __number__ sent __number__ bytes __number__ pkt dropped __number__ overlimits __number__ requeues __number__ rate backlog requeues __number__ lended __number__ borrowed __number__ giants __number__ tokens __number__ ctokens __number__
74ec0a0e373bfbf107f1eaba7eec8bbaf4e1d021	staging fbtft fb_sh1106 use new helper helper fbtft_write_buf_dc make use of new helper fbtft_write_buf_dc
14067ff536286bd2f7f79d46337d2228b12ef880	vfs make gcc generate more obvious code for acl permission checking the fsuid is the inode owner case is not necessarily always the likely case but its the case that doesnt do anything odd and that we want in straight-line code make gcc not generate random jump around for the fun of it code this just helps me read profiles that thing is one of the hottest parts of the whole pathname lookup
1ceeab2679069738fc73da6d8256014d3e195dab	asoc rsnd tidyup dma timing on ssi current dma starts after ssi and stops before ssi but we need to reverse these order otherwise run error might happen
fc6d875ecb83cd03afad4486c97a9355e00c8944	clk rockchip fix coding style for fix the issue reported by checkpatch error space prohibited before that
7515c6f1da334184c3ece06e6f61461086d8e2b1	mips bcm47xx keep id entries for non-standard devices together patchwork
16f9c3fd25b957f4df0fd5d9bf70249495c1a421	usb host ehci-st simplify return statement replace redundant variable use in return statement
4b2305826ccd57a8b22d3daff543837ba27cfd43	bna clear driver config flags when hw resets driver configuration flags are retained across operations preventing configurations to be set in next setting mtu on a __number__ causes network to fail until a reboot is performed on the host clear the flags when configuration resets in hardware
a5a6579db33af91f4f5134e14be758dc71c1b694	mm reorder can_do_mlock to fix audit denial a userspace call to mmapmap_locked may result in the successful locking of memory while also producing a confusing audit log denial can_do_mlock checks capable and rlimit if either of these return positive can_do_mlock returns true the capable check leads to an lsm hook used by apparmour and selinux which produce the audit denial reordering so rlimit is checked first eliminates the denial on success only recording a denial when the lock is unsuccessful as a result of the denial
d34c5f26cf7de52a72ee064698817a5a39b91767	fadump add pt_note program header for vmcoreinfo introduce a pt_note program header that points to physical address of vmcoreinfo_note buffer declared in the vmcoreinfo note buffer is populated during crash_fadump at the time of system crash
a0c1bbb0cc5cf47877de9bd0d2ffd0286ad1653e	drm check the fb size against the adjusted for stereo modes some stereo modes like frame packing need a larger crtc viewport than the natural underlying mode and thus drm_crtc_check_viewport needs to query the adjusted mode to use the correct
36765c9c0623e87ab5ac6cfc07f66072b83edfdc	asoc omap-mcbsp use devm_snd_soc_register_component replaced snd_soc_register_component with its devres equivalent devm_snd_soc_register_component
3119b487e03650b51589a86aac33098b7cc2a09e	fix error return code in rpmsg_probe return a negative error code from the error handling case instead of __number__ as returned elsewhere in this function
9365121869a15da99d6091802f11a82d59024d62	regulator da9052 ensure the selected voltage falls within the specified range integer division may truncate the result use div_round_up to ensure the selected voltage falls within the specified range
652c1aaca2a026d374d139058e8e7f3175e861d6	ia64 get rid of copy_in_user it hadnt been biarch for years
5c43c52d5fb6163120ae5d9a281c3b757ca6119c	ntb correct ntb_peer_spad_read for case when callback is not supplied correct ntb_peer_spad_read for case when callback is not supplied
9e3fe3508fe6c46f1a393ee15397221241bcf981	fix a warning message the ret regmap_write assignment was missing so this error message is never printed
8aaf62b5b9bef73978973e4b825c7818528d3ca2	media media enforce single in a pipeline if a different in a pipeline was encountered a warning was issued but the execution continued as if nothing had happened return an error instead right there
71893bb077a61c7b590bf7780422407a01a409c0	staging comedi addi_apci_1564 remove null check of devpriv in apci1564_detach there is no need to test whether devpriv is null in this function the check looks left over and we can just remove it
a3d3c53f738bb931e15b20d3dc5d23722b9ede6a	intel-rst clean up acpi add function there is no need to initialize the error since it is going to be assigned with the return status of at least on of the device_create_file call we can return directly in case the first file creation fails all the labels for goto can be removed along with the gotos as well tell the compiler that the failures are unlikely so it can create better binaries
3cc31a0d5bc77e35229671307eba5ea5c4c4cb9d	btrfs pass number of devices to btrfs_check_raid_min_devices before this patch btrfs_check_raid_min_devices would do an off-by-one check of the constraints and not the miminmum check as its name suggests this is not a problem if the only caller is device remove but would be confusing for others add an argument with the exact number and let the callers decide if this needs any adjustments like when device replace is running
f29f58a9e53252a50eaea0ece59f1af5fad56b5f	mac80211 fix sparse warning caused by __ieee80211_channel_switch commit mac80211 fix csa tx queue stopping introduced a sparse warning warning symbol __ieee80211_channel_switch was not declared should it be fix it by declaring the function static
4091fd942e96af5a0b1dfa6aac5f44153ebf7cdb	ipc move the rcu_read_lock from sem_lock_and_putref into callers this is another ipc semaphore locking cleanup trying to make the locking more straightforward we move the rcu read locking into the callers of sem_lock_and_putref which in general means that we now mostly do the rcu_read_lock and rcu_read_unlock in the same function mostly we still have the mess and things like ipcctl_pre_down_nolock
47b163af01068789594e950fa3a96a73576588ad	media dib0700_devices use dvbv5 parameters on set_params instead of using dvbv3 parameters rely on dvbv5 parameters to set the tuner
1f09ba82fa4bd405f5c656c48d53e076931b4a2d	thermal rockchip fixes the exception interrupts the hardware-tracked trips will set the alarm interrupt value for registers then when the thermal zone has no trips to be set that make the thermal trips callback a over range value the root cause is the rk_tsadcv2_temp_to_code function to handle the invalid temperature range is indeed incorrect lets fix it on now otherwise the thermal alarm interrupt will be triggered all the time on some socs fox example localhost tmp grep thermal sleep __number__ grep thermal __number__ __number__ gicv3 __number__ level rockchip_thermal __number__ __number__ gicv3 __number__ level rockchip_thermal
466bd31bbda9e1dd2ace1d72c8de5045bf6f3bf6	cifs avoid calling unlock_page twice in cifs_readpage when using fscache when reading a single page with cifs_readpage we make a call to fscache_read_or_alloc_page which once done asynchronously calls the completion function cifs_readpage_from_fscache_complete this completion function unlocks the page once it has been populated from cache the module then attempts to unlock the page a second time in cifs_readpage which leads to warning messages in case of a successful call to fscache_read_or_alloc_page we should skip the second unlock_page since this will be called by the cifs_readpage_from_fscache_complete once the page has been populated by fscache with the modifications to cifs_readpage_worker we will need to re-grab the page lock in cifs_write_begin the problem was first noticed when testing new fscache patches for cifs
5418ae3188a9a57f318f51c3c26c0fedfea82f8b	staging dgnc fix potential format string flaw make sure that format strings cannot leak into printk calls from the msgbuf string
33b443e467f6c92c4cc797f5acf6a933fcfe9ec3	staging rtl8821ae remove space after unary operator in several pointer declaration syntax have been fixed to match the coding style
c27816a883575037ec67e7f92fbd214648a1c1cb	update only use default value as a base
7c365bac4437887382d53be2f735b34634d68c3b	serial bfin_5xx fix off-by-one with resource size this doesnt cause any real bugs but it should still be fixed
325ad0617adaf163e32dd2d857b90baf65a25b5b	dma unmap optimizations while unmapping an odp writable page the dirty bit of the page is set in order to do so the head of the compound page is found currently the compound head is found even on non-writable pages where it is never used leading to unnecessary cpu barrier that impacts performance this patch moves the search for the compound head to be done only when needed
122fac030e912ed723fe94d8eb0d5d0f6b31535e	implement pci allocation optimisation whilst pci devices may have dma masks they still benefit from using addresses wherever possible in order to avoid dac pci or longer address packets pcie which may incur a performance overhead implement the same optimisation as other allocators by trying to get a address first only falling back to the full mask if that fails
5211613978cb7353a3237e4372958c0e7514683f	kmod dont run async usermode helper as a child of kworker thread call_usermodehelper_exec_sync does fork wait with unignored sigchld what we have missed is that this worker thread can have other children previously forked by call_usermodehelper_exec_work without umh_wait_proc if such a child exits in between it becomes a zombie because auto-reaping only works if sigchld is ignored and nobody can reap it this worker thread exits too change the case to use clone_parent note this is only first step all pf_kthread tasks even created by kernel_thread should have kthreadd by default
ccc39faf58113b33ed100b7c24d806538ac75df7	r8152 adjust the line feed for hw_features keep netif_f_hw_vlan_ctag_rx and netif_f_hw_vlan_ctag_tx at the same line
4bc839f25044f75d7b59d5481c404ce20563ef86	staging comedi dt9812 pass the comedi_device to dt9812_digital_in for aesthetic reasons instead of passing the slot pointer pass the comedi_device pointer to this function and rename the local var result to simply ret remove the commented out printk
65eddb56f465f314502679ceade6fc5848a53a50	ext4 ext4_inode_is_fast_symlink should use ext4_cluster_size can be reproduced by xfstests __number__ with bigalloc and size inode
be2d3f97e90cdf9f1523daaba705f320c3efaf00	fix attributes array allocation attrs field of attribute_group structure is a pointer to a pointer as in an array of pointers rather than pointer to attribute struct as in an array of structures so when allocating size of the pointer sholud be used instead of the structure it is pointing to while at it also change the call to use kcalloc rather than kzalloc
c20910264c367a5dfbf6c09e8ec2ff0c5c52857a	handle match_int errors as a follow up to ce31c1b0dc4038a1dec64585d892adb73d9c45f4 there are still a few lio match_int calls that dont check the return value propagate errors rather than using the potentially uninitialised result
040a78314fe3cbb1472ac220cb3400116f6967bc	wireless brcm80211 use to print bssid
523f431ccfffd3022e80e13befb9594f54b5607e	ext4 call ext4_ext_drop_refs from ext4_ext_find_extent in nearly all of the calls to ext4_ext_find_extent where the caller is trying to recycle the path object ext4_ext_drop_refs gets called to release the buffer heads before the path object gets overwritten to simplify things for the callers and to avoid the possibility of a memory leak make ext4_ext_find_extent responsible for dropping the buffers
c1a2e95435976cb040db1f6c0afbe4287c3d2e28	net cdc_mbim change the default to send zlps a number of devices in the wild have turned out to require zlps even if this is a spec violation our priority is to make any device work as good as possible devices needing zlps will fail to receive any full sized frame we send on the other hand devices which do not need the zlp will still work if we send them this gives us no other option than sending zlps by default this will prevent devices conforming to the spec from making the optimizations which are possible without zlps adding known such devices to a whitelist to avoid the possible negative impact of the new spec violating default
27012382bc221a8cf6ca67ced19df699b0ba8e78	drbd take error path in drbd_adm_down if interrupted by signal drbd_adm_down does adm_detach which can fail with various error codes or be interrupted by a signal the interrupted by signal case was not properly handled leading to block drbd0 assert d_diskless c_standalone in and further to destroying objects while still in use and resulting crashes detect the interruption and take the error path out
8ddbbac7f0132f05aa0277c59a19e542a0e46727	fix spacing coding style in the following errors fixed that open brace should be on the previous line space required before the open parenthesis else should follow close brace space required before the open brace
317b2099938fe6f27e51c4b58e76f4de8212d3e6	mfd ti_am335x_tscadc avoid possible deadlock of reg_lock since the addition of continuous sampling mode and shared irq support the reg_lock lock can be taken with and without interrupts this patch uses the variant which should be used in order to avaoid a deadlock
6c6ce620e08f8764fd9884094afb274e6e85a47a	pinctrl samsung handle gpio request and free using pinctrl helpers this patch adds and operations to gpio_chip of pinctrl-samsung driver which call pinctrl request and free helpers to request and free pinctrl pin along with gpio pin
fe3f8f87edf99d9d5122f890208538e0afabd8ce	channel spec buglet always reading same adc the iio_light channel was not marked as being a processed_val despite clearly being in lux the iio_intensity channel reads were dependent on channel and that isnt specified for either adc as they now use modifiers hence use the modifier instead
efd4b81abbe1ac753717f2f10cd3dab8bed6c103	blk-stat fix blk_stat_sum if all samples are batched we need to flush the batch _before_ we check the number of samples otherwise well miss all of the batched samples
6798d7271cb44ba8354356a389047d84058a7828	gpio acpi ignore for unselected gpioints when acpi_dev_gpio_irq_get gets called with an index of say __number__ it should not care if acpi_get_gpiod for index __number__ or __number__ returns this allows drivers which request a gpioint with index __number__ to function if there is no gpiochip driver loaded for gpioints with a lower index
94787d91cba7ba168b028703b50a0224702ace9c	f2fs remove repeated f2fs_set_sb_dirt call f2fs_set_sb_dirt is called in inc_page_count and it is directly called one more time in the next line
ac49251b6bf428b8f4fb1ed8859219f0a72b5db4	fix false lockdep warning a lockdep warning is hit when evicting surfaces and reserving the backup buffer since this buffer can only be reserved by the process holding the surface reservation or by the buffer eviction processes that use tryreserve there is no real deadlock here but theres no other way to silence lockdep than to use a tryreserve this means the reservation might fail if the buffer is about to be evicted or swapped out but we now have code in place to handle that reasonably well
6da95e1ea8e2492530eac9c51b293226e3f4ce94	alsa lola deletion of an unnecessary check before the function call vfree the vfree function performs also input parameter validation thus the test around the call is not needed this issue was detected by using the coccinelle software
f05a88a39c5b5f226e08e626998bb920723b7d85	staging greybus add host device function pointer checks add sanity checks for cport_quiesce and cport_clear before invoking the callbacks as these function pointers are not required during the host device registration this follows the logic implemented elsewhere for various other function pointers
f48a942926c58e4b2dfc3f21c58579d5435841ef	audit include auditds threads in audit_log_start wait exception should auditd spawn threads allow all members of its thread group to use the audit_backlog_limit reserves to bypass the queue limits too pm minor upstream merge tweaks
3f3c7eec60ad4f990d7bcbc41a1597a4fc7268f6	qdisc exit case fixes for skb list handling in qdisc layer more minor fixes to merge commit merge branch xmit_list that allows us to work with a list of skbs fixing exit cases in qdisc_reset and qdisc_destroy where a leftover requeued skb can have the potential of being a skb list thus use kfree_skb_list this is a followup to commit qdisc adjustments for api allowing skb list xmits
cb35484231e0b7edf23e192867e5fba955e584cb	iscsi-target remove always-true conditions found by coverity initiatorname and initiatoralias are static arrays and therefore always non-null at some point in the past they may have been dynamically allocated but for current code the condition is useless if the intent was to check initiatorname0 instead i cannot find a use for that either lets get rid of it
c938a003448063382e0575aee2d381d4cd7aec34	cxgb4 memory corruption in debugfs you cant use kstrtoul with an int or it causes memory corruption also j should be unsigned or we have underflow bugs i considered changing j to unsigned long but everything fits in a u32
4c9c18c29347a8bfce1dcd28271bf782aab16639	if transcoder disable fails say which just some extra debug output
2a7a85487e5432424eef7a394ed26ef1d8f0d192	dont update the response psn unless its going forwards a client might post a read followed by a send the partner receives and acknowledges both transactions posting an rcq entry for the send but something goes wrong with the read ack when the client retries the read the partners responder processes the duplicate read but incorrectly resets the psn to the value preceding the original send when the duplicate send arrives the responder cannot tell that it is a duplicate so the responder generates a duplicate rcq entry confusing the client
bd19c756b1a69ec2c8f5f81624d66a1a0daad7c0	max8903_charger add platform prefix for platform modalias since platform prefix modalias with the platform modalias is prefixed with
a9ba8376e9e6f7d3d6dd5c2c6816e9a9358d38e8	watchdog sc520_wdt remove unused variable variable dummy is not used anywhere in the function wdt_config this patch removes this variable
9d2a8da006fcbf2dea663c095f0a0088dfbbec15	radix-tree replace preallocated node array with linked list currently we use per-cpu array to hold pointers to preallocated nodes lets replace it with linked list on x86_64 it saves __number__ bytes in per-cpu elf section which may translate into freeing up of memory for fix comment coding style
f4c4d589d5c1046bb5a9c17d98afcda43e04a315	mips bcm47xx move constant array from stack move the possible nvram sizes from the stack into the data segment patchwork
12bc1d1e9cb18176dcd80564067114b32d189d24	staging rtl8712 fix coding style error reported from checkpatch removed the following error code indent should use tabs where possible warning please no spaces at the start of a line warning statements should start on a tabstop
61177b0e12ba162d5de206914e8703d8eb90ad19	add a macro to return the size of a full infoframe
5736603bef2383b6bb07f88596ccc8c387d91121	fixed blending for hdmi graphic layer blending for graphic layer __number__ of hdmi mixer was not set so video layer cannot be showed if graphic layer __number__ is enabled this patch fixes blending values to support blending between graphic layer __number__ and video layer
6971113e1000d24f7d4975eaa6f8cf2739a4565b	usb serial sierra put reset_resume callback back a few patches ago i removed the reset_resume callback in this driver now that the usb-serial core supports reset_resume put this driver callback back as well so it should work identically to how it was originally now if this function really is doing what it should be doing well thats a different story but we are at least doing the identical thing that we were
f755e227dc0ad9f2b58937db489b9a6f6c7b76d9	remove call to reservation_object_test_signaled_rcu before wait since fence_wait_timeout_reservation_object_wait_timeout_rcu with a timeout of __number__ becomes reservation_object_test_signaled_rcu we do not need to handle such conversion in the caller the only challenge are those callers that wish to differentiate the error code between the nonblocking busy check and potentially blocking wait v2 __number__ is only __number__ in german
1efc80eeee8c89188e78545c87a613e480aefd96	i40e future proof some sizeof calls make sure the sizeof calls are taking the size of the actual struct that we care about by using the pointer variable well always get the right struct size even if the variable type changes sometime in the future change-id id5858f883cf42447365ea3733080d7714f975bce
625a5e109a3ed6f36a1008a43069a3462b44a424	tcp skb_mstamp_after helper a helper to prepare the first main rack patch
dafc0fe3afa565c88e44f1c243a49ce209f78ba7	be2net dont create multiple txqs in be2 multiple txq support is partially broken in be2 it is fully supported be3 onwards and in lancer
ce111afd01bce7c137c92e9ed0dbe294a0f2373a	mtd nand socrates set ecc algorithm explicitly this is part of process deprecating nand_ecc_soft_bch and switching to enum nand_ecc_algo
2d43457f79e48ee427666fdbfe9a53f35d3a1672	mtd nand sunxi fix edo mode selection the onfi spec says that edo should be enabled if the host drives trc less than but the code just tests for the trc_min value extracted from the timings exposed by the nand chip not the timings actually configured in the nand controller fix that by first rounding down the requested clk_rate with clk_round_rate and then checking if trc is actually smaller than
919729237f4f1a37bfe0e94a17e7a4bdfa9f5f8e	media tlg2300 use correct device parent set the correct parent for v4l2_device_register and dont set the name anymore thats now deduced from the parent also remove an unnecessary forward reference and fix two weird looking log messages
ff7d18d48e568125c486ee700a016b60d2e4243f	staging dgrp fix space prohibited before semicolon this patch fixed warning space prohibited before semicoloni found by within
56700178493eaab243b7b7b04077775cea6a87bd	usb musb dsps call during musb_platform_reset for dsps platform are nops so during musb_platform_reset call
040fa2217c417e87dd502938f8bd5edbd27fdbf1	staging rts5208 prefer using bit macro replace all instances of bit shifting on __number__ with the bitx macro this was done using coccinelle int c __number__ c bitc
e261e69e2d16b69eb712123b9e73bac50282b6a7	staging sm750fb fixed indent of switch-case fixed indent of switch-case by adding space using tabs problem found using error space required after that
94c9e6d665011a9926c5f6fd349a6c665093e721	w1 slaves w1_ds2423 convert to use this moves the sysfs file to the w1 core by using the field saving code in the slave driver
c61307a7cc1be87b6785dad0885492b6ca7998db	gpio fix debug message in of_get_named_gpio_flags this was probably missed in the conversion done in commit gpio adjust of_xlate api to support multiple gpio chips
eb94cd96e05d6c65a07937e66a04ea265c1b767d	fs proc fix abba deadlock in case of execution attempt of entries entries are never supposed to be executed still curious minds might try to run them which leads to the following deadlock info possible circular locking dependency detected not tainted is trying to acquire lock at but task is already holding lock at which lock already depends on the new lock the existing dependency chain in reverse order is this is because prepare_bprm_creds grabs and when do_lookup happens we try to grab again in lock_trace fix it using plain ptrace_may_access helper in proc_map_files_lookup and in proc_map_files_readdir instead of lock_trace the caller must be cap_sys_admin granted anyway
4b8645d64375a82971cebb312a6f665dc586686f	staging slicoss use status in slic_ioctl in the ioctl function if we are not able to up the link after setting the new parameters then return an error code to the userspace
821ace2929612aa1ecf49feba123e5c7130d1970	iio sx9500 refactor gpio interrupt code
e2cba8d7590e76661e86f1f0987ef9f8c13c9a6d	ath9k fix flushing in mcc mode when we are attempting to switch to a new channel context the tx queues are flushed but the mac80211 queues are not stopped and traffic can still come down to the driver this patch fixes it by stopping the queues assigned to the current before trying to flush
1fc4c84d49558ceca04761abd3f7eb5224af75b2	net cdc_ether allow combined control and data interface some icera based huawei modems handled by this driver are not completely cdc ecm compliant using the same usb interface for both control and data the cdc functional descriptors include a union naming this interface as both master and slave so it is supportable by relaxing the descriptor parsing in case these interfaces are identical this has been tested on a huawei k3806 and verified to add support for that device
d1242acc566a9288cbca441be1a7358c0316197e	iio light cm3605 mark pm functions as __maybe_unused when config_pm_sleep is disabled we get a harmless warning error cm3605_pm_resume defined but not used error cm3605_pm_suspend defined but not used marking the functions as possibly unused avoids the warning without needing to add an
0d606e2c9fccdd4e67febf1e2da500e1bfe9e045	ext4 fix type-widening bug in inode table readahead code due to a missing cast the high of a block number used when calculating the readahead block for inode tables can get lost this means we can end up fetching the wrong blocks for readahead for file systems linus found this when experimenting with an enhacement to the sparse static code checker which checks for missing widening casts before binary not operators
657a49be13eda5a3befc161d1d499d413c348762	wcn36xx use consistent name for private vif some code used priv_vif and some used vif_priv convert all to vif_priv for consistency
12f043ff2b28fa64c9123b454cbe30a8a9e1967e	arm64 fix warning about swapper_pg_dir overflow with __number__ levels of pages we get this warning about the fact that we are copying a whole page into an array that is declared as having only two pointers for the top level of the page table in function paging_init error memcpy writing __number__ bytes into a region of size __number__ overflows the destination this is harmless since we actually reserve a whole page in the definition of the array that comes from and just the extern declaration is short the pgdir is initialized to zero either way so copying the actual entries here seems like the best solution
9910affa89fe0895153880b115ec243636e70af3	rcu remove redundant check of cpu_online because invoke_cpu_core checks whether the current cpu is online there is no need for __call_rcu_core to redundantly check it there should not be any performance degradation because the called function is visible to the compiler this commit therefore removes the redundant check
7d134e43a2ac729888bb752f8dba5f8bbb5c938a	fujitsu-laptop refactor backlight input device setup simplify error handling in acpi_fujitsu_bl_add by moving code responsible for setting up the input device to a separate function
b1d76a7d57762332cd8e0c020470d43c5ad3948e	recover eeh error on ownership change for bcm5719 in pci passthrou scenario we need simulate eeh recovery for emulex adapters when their ownership changes as we did in commit emulate eeh recovery for vfio devices broadcom bcm5719 adpaters are facing same problem and needs same cure
657e24d35479b3edd84706db082f5e18a2270631	parport remove trailing white space trailing white space is not accepted in kernel coding style remove them
907241dccb4ce5d9413cf3c030b32b0cfc184914	thread_info use unsigned long for flags the generic thread_info_in_task definition of is a u32 matching x86 prior to the introduction of thread_info_in_task however common helpers like test_ti_thread_flag implicitly assume that has at least the size and alignment of unsigned long and relying on padding and alignment provided by other elements of task_struct is somewhat fragile additionally some architectures use more that __number__ bits for and others may need to in future with thread_info_in_task task struct follows thread_info with a long field and thus we no longer save any space as we did back in commit x86 change thread_infos flag field back to __number__ bits given all this it makes more sense for the generic to be an unsigned long in fact given the helpers mentioned above be arches use unsigned long or something of the same size today or they wouldnt work make it so link
47f2e6c27553d9a164bb0067f4c1f9bbba388c2e	amd-xgbe use proper dt acpi precedence checking device tree presence takes precedence over acpi in the apis the amd-xgbe driver should follow the same precedence update the check on whether to use dt acpi to follow this
affaab4c58d8e5f7c30ca2be351277cf72d2336f	usb gadget s3c-hsudc add missing braces around sizeof silences the following checkpatch warning warning sizeof should be
e1aae2eb3f7c446a2680a3a0ccd05aa50521b4e2	mmc sh_mmcif simplify and use meaningful label names in error-handling a check for null platform data can be conveniently made in the very beginning of probing replace numbered error-handling labels in with meaningful names to make any future reorganisation simpler
1535212c542285e430d44a75bfc0a99df610f598	md-cluster fix locking when node joins cluster during message broadcast if a node joins the cluster while a message broadcast is under way a lock issue could happen as follows for a cluster which included two nodes if node a is calling __sendmsg before up-convert cr to ex on ack and node b released cr on ack but if a new node c joins the cluster and it doesnt receive the message which a sent before so it could hold cr on ack before a up-convert cr to ex on ack so a node joining the cluster should get an ex lock on the token first to ensure no broadcast is ongoing then release it after held cr on ack
48e48a0b8c1d2ceb87ad2b256a7219e9c1b998d6	include a little more information about why ring init fails if we include the expected values for the failing ring register checks it makes it marginally easier to see which is the culprit
fc1d0bf1f27c563725234dc337bf8fc806eee7b3	cxgb3 use pci_enable_msix_range instead of pci_enable_msix as result of deprecation of enablement functions pci_enable_msix and pci_enable_msi_block all drivers using these two interfaces need to be updated to use the new pci_enable_msi_range and pci_enable_msix_range interfaces
856ff77e3307eb89ba68e7cc3c1fa91112efff89	staging comedi cb_pcidas64 fixed coding style errors fixed a few coding style errors in cb_pcidas64
d37167ab7b3d67d53519585a44c47416e6758ed2	cgroup update and fix parsing of i was confused that strsep was equivalent to strtok_r in skipping over consecutive delimiters strsep just splits at the first occurrence of one of the delimiters which makes the parsing very inflexible which makes allowing multiple whitespace chars as delimters kinda moot lets just be consistently strict and require list of tokens separated by spaces this is what describes too also parsing may access beyond the end of the string if the string ends with spaces or is zero-length make sure it skips zero-length tokens note that this also ensures that the parser doesnt puke on multiple consecutive spaces v2 add zero-length token skipping v3 added missing space after spotted by li
a3e376d26ace6d823f7aa4c63476e7089a6196df	watchdog tangox mark running watchdog correctly a running watchdog is marked with wdog_hw_running not with wdog_active wdog_active indicates that the watchdog device has been opened from user space
e68afa49aec5f0851e550ee1de48fcc3a9bf5ef7	btrfs fix a bug of snapshot-aware defrag to make it work on partial extents for partial extents snapshot-aware defrag does not work as expected since a we use the wrong logical offset to search for parents which should be disk_bytenr extent_offset not just disk_bytenr b offset returned by the backref walking just refers to not the offset stored in btrfs_extent_data_ref which is extent_offset the reproducer sda mount sda btrfs sub create for i in seq __number__ __number__ do dd done btrfs sub snap btrfs sub snap sync btrfs filesystem defrag umount btrfs-debug-tree sda here we can check whether the defrag operation is snapshot-awared this addresses the above two problems
f0a6c693695ab305b16c89f6313061f20ca5e240	drivers target mark functions as static in mark functions tcm_loop_make_naa_tpg tcm_loop_drop_naa_tpg tcm_loop_make_scsi_hba and tcm_loop_drop_scsi_hba as static in because they are not used outside this file this eliminates the following warning in warning no previous prototype for warning no previous prototype for warning no previous prototype for warning no previous prototype for
82eb703efc2ad2ac52cada85a5119bb9dfcea942	bluetooth fix mgmt_unpair_device command status the default response status to unpair_device should be set as __number__ instead of a generic failure value when disconnection is not needed we can reply imediately we should return success and not failure
fe9e3137cffc880b5162f2cc039df48712c496bb	fix iommu address allocation order this patch modifies iommu address allocation order from to order causes waste of the io space and this was our mistakes
10f9fa133a295fa0f2f36c1a481b7e8b82b12891	greybus connection clean up creation error paths clean up connection-creation error paths
b17dbff418f62e87fdb3d683d532c139c4f1bf31	clk sirf convert to clk_hw based provider apis were removing struct clk from the clk provider api so switch this code to using the clk_hw based provider apis
c91a793f66d5b06292aa431ae3a36c8aca991fa3	bind framebuffer to interface udlfb has been binding the framebuffer device to its parent which isnt correct and causes confusion with operations like udev remove coming plug and play multiseat support is dependent on this fix
e684533b1044498606a37e2b5ba8bb0bef56067f	asoc wm0010 set irq as a wake source the dsps irq should be a wake source as several of the possible algorithms may run whilst the ap is asleepi and require to wake the ap to push or pull more data such as compressed playback
5090c9670de03511834bc894cfc9737e3d61a414	orangefs improve gossip statement there were two just alike making it hard maybe to tell which one you were looking at in so i changed it a little by adding some extra interesting tidbits to
6ba92fea1b6cf9969398df918157974ae8faa068	edac amd64_edac init opstate at the proper time during init it is useless to do it if were loaded on unsupported hardware so do that only after we have detected at least __number__ supported amd northbridge
8ef747909cef0dd1ae018beef4bb2e75f26e3f98	bcache fix a minor memory leak on device teardown
e8e42a5cff0704e83151455307a9b0d78fb43b93	hexagon use renamed functions
f55055b4648416a9d31e5666a5425d406c05f626	usb usbtest fix checkpatch warning as sizeof code style script always complains incorrect code style like below warning sizeof should be this patch fixes the warning for usbtest module
057c1dd6cd5041e3b6a6fb65708ac5a4d9c12b36	ath9k remove unused ani macros
2c0ed6349287a15f7be73bba00e520106087cd1b	asoc intel fix warning reported by static check tool smatch the smatch tool report warning check hsw_pcm_probe error buffer hsw_dais __number__ __number__ hsw_pcm_probe error buffer hsw_dais __number__ __number__ fix it by use its own struct member for post-process module rather than sharing unused pcm member
a5c3892f56df57e2e1c0a069d72d1b20a1db202d	ideapad remove unused define and fix a typo after review the current ideapad-laptop found an unused define and a typo
c11a0442b0fe01244de09849f62a0370482a0196	pinctrl intel merrifield fix dup size in probe in function mrfld_pinctrl_probe when duplicating the mrfld_families array the requested memory region length is multiplied once too many by the number of elements in the original array fix this to spare some memory
802872e7d7470f6cd20fa5c5f7e1e5fdba707fa8	pata_ali fix satelite typo cosmetic fix but thanks to it pata_alis dmi table now matches alim15x3s one
edd33c99c4ba26ebe17c1a3d65b4aba25482ed32	btrfs dont bug on enomem in readpage get rid of the bug_onret in __extent_read_full_page thanks
d03c075dda97884bb79c206fc9804f07017b7bd4	staging wlan-ng fix unnecessary parentheses this patch fixes unnecessary parentheses around found by tool
f3aa8c0becfb1d968e552721cc1be8b91032539b	staging comedi comedi_bufinfo become non-busy even if bytes_read is __number__ the comedi_bufinfo ioctl is used to advance the current position in the buffer by a specified amount which can be __number__ and get the new position on input the bytes_read member of struct comedi_bufinfo specified the amount to advance the read position for an asynchronous command in the read direction if the command has already stopped normally and the read position has been advanced to the end of all available data the command is terminated by calling do_become_nonbusy that is not currently done if the command stopped with an error currently the command is only terminated if the user is trying to advance the read position by a non-zero amount change it to allow the command to be terminated even if the user is not trying to advance the read position this is justifiable as the only time a command stops without error is when it has been set up to read a finite amount of data
c12c1aad98bb75b435e79c6208b56d2018b42f8b	asoc soc-core verify sound card normality current alsa soc sound card basically consists of components if system uses kernel modules we can disable these drivers by using rmmod command in such case we cant disable driver without disabling sound card driver but on the other hand we can disable these drivers by using unbind command in such case we can disable these drivers randomly in this case we can create dirty sound card which is missing necessary components __number__ if user disabled sound card first but did nothing to other drivers user cant use sound because sound card is no longer exists __number__ if user disabled driver randomly but did nothing to sound card user still be able to use sound card because dirty sound card still exists in this case sound system will be crashed if user started sound but we cant block such random unbind now to avoid sound card crash in __number__ case we need to unregister sound card whenever component were unregistered this patch solves this issue
e4f7dbb17e797d922d72567f37de3735722034ba	igb drop build_bug_on check from igb_build_rx_buffer on s390 the igb driver was throwing a build error due to the fact that a frame built using build_skb would be larger than since this is not likely to change at any point in the future we are better off just dropping the check since we already had a check in igb_set_rx_buffer_len that will just disable the usage of build_skb anyway
af6162155e943dfc7dc2c45507e39cc4d60d5812	coresight etm3x making error message unambiguous by adding the function name at the beginning of the error message there is no doubt as to where the failing condition occurred
8040513870399f1cb032cb8bc805df5042fedcdf	allocate overlay registers from stolen memory
8613d78ab09900010a5b32e78ff229f551d661d6	initialize grant table for pvh guests like pv guests pvh does not have pci devices and therefore cannot use mmio space to store grants instead it balloons out memory and keeps grants there
523f0e5421c12610527c620b983b443f329e3a32	kvm ppc explicitly mark shadow maps invalid when we invalidate shadow tlb maps on the host we dont mark them as not valid but we should fix this by removing the e500_tlb_valid from their flags when invalidating
0816ea2fa3c046b8c867aadbaadf19eb2fc3ac87	usb musb musb_dsps delete unnecessary out of memory messages the memory subsystem has already had similar message for it
64c3b252e9fc8256ef7b1b99ba60492163cd06e8	net stmmac fixed the pbl setting with dt this patch fixed the pblprogrammable burst length setting using dt even though the default pbl is __number__ if there is no pbl property in device tree file pbl is set __number__ and it causes bandwidth degradation
c193fa91b9182465a4a01665ad4096a6cdb4db2d	information leak in amdgpu_info_ioctl we recently changed the drm_amdgpu_info_device struct so now there is a __number__ byte hole at the end we need to initialize it so we dont disclose secret information from the stack
3b364d7b587db0f0eeafde0f271e0698187de776	remove unused arguments from a bunch of functions no functional change just less confusing to read link
b7bd05b8d546cebbf05e98194b54d7b122aadf0e	regulator max1586 use devm_kzalloc
605cdf0875f80300be47e79bd91b2d60916407d3	gdrom add missing error code in case of error err is known to be __number__ here because of the previous test set it to a instead
eb72ed5dc8116c537d9aa1be7305e12f27a21fdc	dont require therm to be valid to get any data
fbcb21705930f2930f506149d0b8d36dfbe45107	net rename dev to orig_dev in deliver_ptype_list_skb unlike other places this function uses name dev for what should be orig_dev which might be a bit confusing so fix this
fd4a5aef002bb57e8a35ed34d8a878034b9bde94	add scheduling constraints for cycle_activity event add scheduling constraints for cycle_activity event as defined by sdm jan __number__ edition the stalls umasks are combinations with the no_dispatch umask link
c5116e9d8d2de324f13a91fe5afc308cd6b0ca93	ssb define more board types
ba33034fffc1189d95301bd865f1c799256e72a2	locking cast away attributes in the write_once magic the kernel build bot showed a new warning triggered by commit locking arch use in because sparse does not like write_once accessing elements from the sparse rcu address space sparse incorrect type in initializer different address spaces expected struct afs_permits got void noderef solution is to force cast away the sparse attributes for the initializer of the union in write_once and as this now gets too long also split the macro into multiple lines link
8b21460ac6c0c88a0fec1cc70906c8e25c5aaa54	alsa compress_core cleanup pointers on stop as the start can be called after stop again we need to reset state
d7017461fa4ce9a59104866a6c382eeca439560a	ath9k fix queue management since we use ieee80211_hw_queue_control now the queues are registered as the last two queues there is no need to check and reassign the queues in the tx routines cab frames will not reach the tx callback since we set ieee80211_hw_host_broadcast_ps_buffering and pull the buffered frames during beacon transmission we also dont have a special hw queue for handling off-channel frames
c00266e369b945945316dad3869342d07f4be868	split different type of io do not allow different type of pages at the same rpc xyratex-bug-id mrp-859 reviewed-on intel-bug-id
78c58a53c9864447f2a46d4c06dd3c2616823ad2	usb dwc3 gadget do not zlp transfers if the gadget drivers sends a zlp we are trying to map this this request which does not work on all implementations so we simply skip mapping it
50d0636eefd97f868a5bd85a4c59d60abea30b50	net davinci_mdio use api use api for memory allocation and to get devices clock to simplify drivers code
1382f897e6136f504b227e27bec64842ed7bc150	omap omap3touchbook remove unused lcd stuff adds an lcd device but the kernel doesnt contain a driver for the device so lets remove the unneeded lcd device
24768169c7929e706150ab34731394e42b5215f3	staging gdm72xx fix typos in printk this patch fix __number__ spelling typos in printk within gdm72xx
ee920bca27da6c33de6ee73de7b34dee0298f703	sharp lq101r1sx01 respect power timings before shutting down the display using the dcs display_off command wait for __number__ frames according to the datasheet furthermore after enabling the power supply the supply voltage needs around __number__ ms to settle after that another __number__ ms is required before a dcs exit_sleep_mode command can be sent while at it no longer send the dcs soft_reset command this is totally unnecessary because weve just powered up the display hence it will be in a reset state already
92c43eb41669d8edbbfa3db45e89d2edcc55e2de	qede fix xdp memory leak on unload when tx-queues belonging to xdp would not get freed
e9000b7978541f73a4bc100117fd417ab08a2a60	input synaptics-rmi4 fix spelling in defines
158b42edabe82b6adfcd3310d116cc41fdc669ea	carl9170 kill module_version this is pretty pointless lets kill this to stop people from thinking that its actually used maybe we should go on a crusade and kill this completely from the kernel
9db4f36e82c2394c958d8e42a498fb664684bc22	mm remove unused variable in memory hotplug when i removed the per-zone bitlock hashed waitqueues in commit mm remove per-zone hashtable of bitlock waitqueues i removed all the magic hotplug memory initialization of said waitqueues too but when i actually _tested_ the resulting build i stupidly assumed that allmodconfig would enable memory hotplug and it doesnt because it enables kasan instead which then disables hotplug memory support as a result my build test of the per-zone waitqueues was totally broken and i didnt notice that the compiler warns about the now unused iterator variable i i guess i should be happy that that seems to be the worst breakage from my clearly horribly failed test coverage
602b109942b816e56639a965ae81f3a2437004b5	move all hw initialization to dp83640_config_init phy_init_hw not does a full phy reset after the driver probe has finished so any hw initialization done in the probe will be lost part of the timestamping functionality of the dp83640 is set up in the probe and with that lost enabling timestamping will cause a phy lockup requiring a hard reset power cycle to recover this patch moves all the hw initialization in dp83640_probe to dp83640_config_init
e6b5140b706689a38aaeabd9de8fb3e1531cf9cb	spi ti-qspi improve callback theres no need to call pm_runtime_get_sync followed by pm_runtime_put we should instead just call pm_runtime_put_sync and pm_runtime_disable
df9000ef9609c8a5e57783d0667ba7f39f52ed1e	net ethernet aquantia null pointer check for aq_nic_ndev_alloc we should check for a null pointer for aq_nic_ndev_alloc instead netdev_priv
2600f7154b5ab257d3e5c0a2990d5d951758ec78	use pr_warn pr_warn is preferred to pr_warning
e79017ddce8273514d24728523d17033bcbeba6f	nfsd drop null test before destroy functions remove unneeded null test the semantic patch that makes this change is as follows expression x x null x null
1e059e20ac297346512d9581a8cd3f3cca6a29f9	acpica utilities update trace mechinism for acquire_object acpica commit was not using the correct macro updated a comment in link
f9b5635cbe7bcacb94870e44387df133dd851b10	ignore link downgrade with __number__ lanes versions of the __number__ firmware __float__ may report a link failure as a link downgrade with a width of __number__ followed by a link down notification ignore the zero width downgrade notification the driver should follow the link down path
83d36347ad4bc930e4deefeccdc63b9032b53e99	staging lustre mdc report d_changelog messages as d_hsm removed the d_changelog pseudo-debug flag that wasnt actually defined as a usable one report the d_changelog messages as d_hsm ones instead since this is the primary user of these messages intel-bug-id reviewed-on
4aad0cc5c3f715efc294ac60fd0bf0e90829e18b	crypto caam fix rfc4106 encap shared descriptor the encap shared descriptor was changed to use the new iv convention in the process some commands were shifted making the output length zero caam effectively writing garbage in dst while here update the decap descriptor to execute the write commands before the reads as it previously was this makes sure the input fifo is drained before becoming full
10897370345b792c00ccba6aa7ea86ae6bfa2c7a	clk rockchip register pll mux before pll itself the structure is xin24m pll pll-mux the pll does have an init callback to make sure the boot-selected frequency is using the expected pll settings and resets the same frequency using the values provided in the driver if necessary the setting itself also involves remuxing the pll-mux temporarily to the xin24m source to let the new pll rate settle until now this worked flawlessly even when it had the flaw of accessing the mux settings before the mux actually got registered with the recent clock-core conversions this flaw became apparent in null pointer dereference in clk_hw_get_num_parents from clk_mux_get_parent from so to fix that simply register the pll-mux before the pll so that it will be fully initialized when the pll clock executes its init- callback and possibly touches the pll-mux clock
e9fc63d682dbbef17921aeb00d03fd52d6735ffd	nvme fix integrity payload a user could send a passthrough io command with a metadata pointer to a namespace without metadata with metadata length of __number__ kmalloc returns zero_size_ptr since that is not null the driver would have set this as the bios integrity payload which causes an access fault on completion this patch ignores the users metadata buffer if the namespace format does not support separate metadata
3959d0cb7e6e1a00cf815278901929534709e72a	fix potential null pointer dereference in lov_unpackmd theres this strange bit of code where we first try to look inside of lmm striping pattern for its type and then we check if the pattern is null which cannot be right move the check under if lmm branch so that its safe found by coverity version reviewed-on intel-bug-id signed-off oleg drokin intel.com
47a541c3e19374ec9f5d3d96730a922e8480dda5	remove unused get_bios_ebda_length function get_bios_ebda_length uses min_t without including this may result in build errors with some configurations since the function is not used anywhere in the kernel lets just drop it link
fe1cf9469d7bcb6af27e42eb555a41b0135bce4a	pnfs clear all layout segment state in pnfs_mark_layout_stateid_invalid when the layout state is invalidated then so is the layout segment state and hence we do need to clean up the state bits
f8eaf298c8dc034e88d772c7d4bef7e5f5a490e2	use ptr_err_or_zero replace
3d08f434bd58656ae630376d0b5afd6ca1ffb013	fix allocation of bases array in driver probe in devm_kzalloc is called with size __number__ and works only by luck due to internal behavior of the allocator and the fact that the proper allocation size is small lets use proper value for calculating the size
7707bda3ee4aa4415090755c22e5a9c03fc530dc	improve error handling when rtc register fails stop processing hid input when registering the rtc fails and handle a null returned from devm_rtc_device_register as a failure too
521a87cdaece333cb2b89dd6393613119af5a431	net sunhme use use the wrapper functions for getting and setting the driver data using pci_dev instead of using with so we can directly pass a struct pci_dev this is a purely cosmetic change
d8d7a823409281501f782982a8f272af5f83f66a	staging comedi skel move skel_pci_table move skel_pci_table closer to skel_pci_table so it falls within the same
c8aef4cb788b760331e6df06a5d93389824882b4	flexcan add of_match to platform_device definition on powerpc the openfirmware devices are not matched without specifying an of_match array introduce that array as that is used for matching on the freescale p1010 processor
c2dade34eaa2384f2921b0a29bb8ac43848e0317	crypto enable dt probing of the driver by providing an of match table with a suitable compatible string we can ensure the ux500-crypt driver is probed by supplying an associated dt node in a given platforms device tree
4deb508e91624ab0ff1812825870c7dcf7812690	parisc use vsprintf extention with builtin_return_address emit the function name not the address when possible builtin_return_address gives an address when building a kernel with config_kallsyms emit the actual function name not the address
090f4b6ad38eec0c24dcdc9d01cc22077c3b9d22	enable mgcg on si now that the cp is no longer reset and cg is properly disabled in when appropriate in the dpm code we can now enable mgcg medium grained clockgating
11f8ac08e91cca07732feb74dc9d7c6e6b17f3fe	staging unisys get rid of goto in visorchipset_open this goto uses camelcase and was completely unnecessary
ecee76ba9d91fdcbdff933ca1bd41465ca4c4fdb	xfs remove the nextents variable in xfs_bmapi instead of using a local variable that needs to updated when we modify the extent map just check directly where we use it
724d5edac76d8c9a4198b74c80286df38ed81679	i2c fix printk format warning fix printk format warning dma_addr_t can be or so cast it to long long for printing this also matches the printk format specifier that is already used warning format expects argument of type long long unsigned int but argument __number__ has type dma_addr_t
0de13500ad1d8a66b7dc1e7fa517ea15a2625c9e	revert xhci reset-on-resume quirk for nec upd720200 this reverts commit df711fc9962b9491af2b92bd0d21ecbfefe4e5fa the commit added a reset-on-resume quirk because the nec chipset stopped responding to commands about __number__ minutes after a system resume from suspend we thought it was a chipset issue but it turns out that the xhci driver was zeroing out the link trb after a successful context restore during resume the host controller would fall off the command ring sometime later causing it to not respond to new commands the link trb issue has been fixed with commit xhci fix bug in xhci_clear_command_ring so revert the reset-on-resume quirk as its not necessary commit df711fc9962b9491af2b92bd0d21ecbfefe4e5fa was marked for stable trees back to but according to my mail it has not made it into linus tree or the stable trees yet
4a633a602c26497b8285a202830829d3be007c7b	xen-netback allow changing the mac address of the interface sometimes it is useful to be able to change the mac address of the interface for netback devices for example when using ebtables it may be useful to be able to distinguish traffic from different interfaces without depending on the interface name
d4d7b2a11c423a8d4088bb0090e4c8d626d043bc	remove remaining references to nfsservctl these were missed in commit f5b940997397 all arch remove linkage for sys_nfsservctl system call due to them having no sys_ prefix presumably
6bc080d8fdae33f4463203a400cfaa01e91701e2	debugfs use list_next_entry in debugfs_remove_recursive change debugfs_remove_recursive to use list_next_entrychild no changes in generated code
8e586897d4a0438d87bad6e39a8833145a9e00c3	drivers bcm mark functions as static in mark functions matchsrcipaddress matchdestipaddress and matchtos as static in because they are not used outside this file this eliminates the following warnings in warning no previous prototype for warning no previous prototype for warning no previous prototype for
e6a02746e0a9cdda5114db912fe2aadfed289aae	virtio define virtio_pci_cap_pci_cfg in header this provides backdoor access to the device mmios and every device should have one from the virtio __float__ spec cs03 device requirements pci configuration access capability the device must present at least one virtio_pci_cap_pci_cfg capability
a09f347c6cc0b2821557d1346c4733cc78a79ffa	staging xgifb validate the mode against video memory size its possible to select video mode that exceeds the available video memory this is potentially dangerous fix by adding a check the patch fixes system hangs seen occasionally when playing random videos with mplayer
acd3e2c99464c0391885d58dbe7c99a11d4c0289	acpi hotplug use kobject_init_and_add instead of _init and _add use kobject_init_and_add since we have nothing special to do between kobject_init and kobject_add
38f736e974e394157c9111cc53a6f3a55ea8cbc8	staging unisys fix all null comparisons in fix all of the null comparison checks generated by
a7d52028551b8be6eaeac93ade8fccba9783c682	asoc omap rx51 use devm_snd_soc_register_card this patch converts the rx51 asoc module to use devm_snd_soc_register_card
fcc028c106e5750aa66dc43595b3f29f88801ff0	net axienet fix devm_ioremap_resource return value check value returned by devm_ioremap_resource was checked for non-null but devm_ioremap_resource returns iomem_err_ptr not null in case of error this could lead to dereference of err_ptr
7e55ca6dcd07b45619035df343c9614a3ab35034	keys key_is_dead should take a const key pointer argument key_is_dead should take a const key pointer argument as it doesnt modify what it points to
8c91562075e8621f6d9a11cfcf31a71a7203cbbe	sfc refactor checks for invalid filter id nearly every time we call efx_ef10_filter_remove_unsafe we first check for efx_ef10_filter_id_invalid in which case we do nothing so move that check into the function simplifying all the call sites also change the return type to void since none of the callers check it
cb4baf104b11458400941f6d843ed22e122bba2d	usb gadget fsl_udc propagate devicetree to gadget drivers fill of gadget drivers so they can use devicetree
ca60a45dd4a85151068f24148dac38eca6ec2d1c	media xc5000 show debug version fields in decimal instead of hex the driver prints out a dotted version number but its in hex as a result the version doesnt visibly match the filename for the firmware and it caused a bunch of confusion while discussing different versions with the chip manufacturer change the firmware printout to be in decimal
2af3eb647e9b90f679265a45a8fbb78048ba8889	media tuner-xc2028 dont break long lines due to the checkpatch warnings several strings were broken into multiple lines this is not considered a good practice anymore as it makes harder to grep for strings at the source code so join those continuation lines
dddf3bc454fe9b558c13ffd7896e8bea5d39ec29	input drv260x add check for erm mode and lra libraries add a check to ensure that lra libraries are not mixed with the erm mode if erm mode and the library is empty or the lra library then exit as the lra and empty libraries are not applicable for the erm actuator
18b44b2b950a0746abe7466021e842c6d7e96443	edac i82443bxgx dont export static symbol the semantic patch that fixes this problem is as follows type t identifier f static t f identifier declarer name export_symbol_gpl link
49c8b24d00b6cb06a9c3fb959a957319cc770d71	pass the correct argument to firmware_map_find_entry_bootmem firmware_map_add_hotplug calls firmware_map_find_entry_bootmem to get free firmware_map_entry but end arguments is not correct so firmware_map_find_entry_bootmem cannot not find firmware_map_entry the patch passes the correct end argument to firmware_map_find_entry_bootmem
8c2a141eece6196ee5f236cf0ac13c6e2828b0a8	arm shmobile bonito replace gpio_portx enum with gpio port numbers the pfc gpio api implementation moved to using port numbers replace all gpio_portx enum usage with the corresponding port number the gpio_portx enum values are identical to the port number on this platform
d677772e1358924bf487cd833bdc4d50f3f6f64d	watchdog at91sam9 request the irq with irqf_no_suspend the watchdog interrupt only used when activating software watchdog shouldnt be suspended when entering suspend mode because it is shared with a timer device which request the line with irqf_no_suspend and once the watchdog mode register has been written it cannot be changed which means we cannot disable the watchdog interrupt when entering suspend
2c2263c93f70c6abdce90ad96a854760532aa52f	dm cache log error message if dm_kcopyd_copy fails a migration failure should be logged albeit limited
ff7150550d9e3d9dd9ceadebbe8ee45e74c1ffdb	use module_pci_driver to register driver removing some boilerplate by using module_pci_driver instead of calling register and unregister in the otherwise empty functions
6b25a88752e8e9dc33c700712059b094d3da3219	kill cargo-culted locking from power well code we may not concurrently change the power wells code which is already guaranteed since modesets arent concurrent that leaves races against and for those we already try rather hard not to hit concurrent modesets no debug warn_on added since that would require us to grab the modeset locks in code which is again just cargo culting since just grabbing the locks in those paths isnt good enough we need the right order of operations too
29ceb1101e9b39eaac2f20281a93c2afaf07aa10	media s2255 zero priv and set colorspace set priv field of struct v4l2_pix_format to __number__ and fill in colorspace
bb467cf5693b59c76c22b73dd383920a87f37b16	usb musb omap remove the check before calling otg_set_vbus no functional change otg_set_vbus is already protected so removed the check before calling otg_set_vbus
1c927eea4cad83c439cb51e9c96ad19cb005157d	move lazy restore functions up a few lines we need another lazy restore related function that will be called from a function that is above where the lazy restore functions are now it would be nice to keep all three functions grouped together link
f269ae0469fc882332bdfb5db15d3c1315fe2a10	sched update_cfs_shares at period edge now that our measurement intervals are small we can amortize the posting of update_shares to be about each period overflow this is a large cost saving for frequently switching tasks link
c7e99fc75de8882bc4104455ace366d9d3599a96	clockevents define cs_name_len unconditionally unbreak architectures which do not use clockevents but require to build some of the core timekeeping infrastructure
850d64a4a63ea58c7d58161989d3bd4035ec6dfd	acpi cppc acquire pcc_lock only while accessing pcc subspace we need to acquire pcc_lock only when we are accessing registers that are in the pcc subspsace
a6c2f87b8820e956ea0f731dcf0e45949bb37a8b	implement the mbigen irq chip operation functions add the interrupt controller chip operation functions of mbigen chip
f79f1f7289b8e46763beedc9fd68f3072f1643e4	crypto md5 add md5 initial vectors this patch simply adds the md5 iv in the md5 header
2923803d4f69fd8e4ed85786b8888986b2682154	extcon max8997 use devm_extcon_dev_register use the resource-managed extcon device register function devm_extcon_dev_register instead of extcon_dev_register if extcon device is attached with this function that extcon device is automatically unregistered on driver detach that reduces tiresome managing code
d6fc204201ca7d019ab0eb5304d1e5c690ddedc8	dm thin set pool read-only if breaking_sharing fails block allocation break_sharing now handles an arbitrary alloc_data_block error the same way as provision_block marks pool read-only and errors the cell
3b5d3e6845bfe68777d069886b0d1cd5f23b9d58	usb chipidea fix internal error __number__ arm related to sts flag init the sts flag to __number__ missed fix write the real bit not sts value set portcs_sts and devlc_sts only if sts __number__ peter chen this one and the next patch fix the problem occurred imx27 and imx31 and imx27 and imx31 usb support are enabled until __float__ so these two patches isnt needed for
f7a8f6cec38a549ffcc559a9eb14cab539100d97	mlxsw spectrum make vlan deletion function symmetric commit mlxsw spectrum create pvid vport before registering netdevice removed __mlxsw_sp_port_vlans_del from the init sequence of the driver which forced it to be non-symmetric with regards to __mlxsw_sp_port_vlans_add make both functions symmetric as the constraint no longer exists
448ae8ea39c742c20ce00d715fcb7b6fbc56481f	gpu ipu-v3 do not wait for dmfc fifo to clear when disabling dmfc channel according to basic tests it looks there is no issue if we dont wait for dmfc fifo to clear when disabling dmfc channel nxp bsp doesnt do that either this patch is needed to avoid the annoying warning caused by a timeout on waiting for the fifo to clear after we add the new drm_plane_commit_no_disable_after_modeset flag to the imx-drm driver which changes the procedure to disable display channel slightly
a9dc5d0e33c677619e4b97a38c23db1a42857905	sched change get_rq_runnable_load to static and inline link
8f526e12426e284b7d5d659b6b2e8920fa7c9ed9	drm remove unnecessary fault wrappers the fault wrappers drm_vm_fault drm_vm_shm_fault drm_vm_dma_fault and drm_vm_sg_fault used to provide extra logic beyond what was in the versions of these functions but as of commit ca0b07d9a969 drm convert drm from nopage to fault they are just unnecessary wrappers that do nothing remove them and rename the the fault handlers to remove the do_ since they no longer have corresponding wrappers link
8a88df4cda5eaed97e027f9c9e76012a7113bf9a	asoc omap-mcbsp only print warning if the st_data is missing for the port when asked to add the st controls warn only if the st_data is missing in this way we do not block the otherwise functional card to probe
419e321df8d7d605f21f980903befc65ee66e848	clk vt8500 fix unbalanced spinlock in vt8500_dclk_set_rate with the addition of a dvo clock a bug is now evident in the vt8500 clock code __number__ warning at __number__ initcall returned with disabled int this is caused by an unbalanced spinlock in vt8500_dclk_set_rate replace the second call to spin_lock_irqsave with spin_unlock_irqrestore
df7f46e83c7f52ee6e7cf96eb8c068b1d1f8c68f	staging unisys remove unneeded variable this patch remove unneeded variable used to store return value
e4cf39ea473329dfc07de1246f97d27b7fc96f79	video arm clcd fix color model capabilities for dt platforms the dt-based panel capabilities selection was picking up a subset of available modes based on hardware configuration this was wrong as the capabilities describe available memory models and adapt the display controller to them that the rgb output is wired up correctly as in r and b components are not swapped this patch fixes it by removing the unnecessary limitation
c786f74e0bcc457e85cc1eee551732afa60d6308	n_tty remove unnecessary local variable flatten conditional evaluation in n_tty_set_termios remove canon_change
afff455cf4f2501d30446eefbfd0aecb14b8a0b8	clk tegra pll fix issues with rates for vco plls without this change clk_get_rate would return the final output rather than the vco output as it would factor in the pdiv when it shouldnt this will cause problems for all dividers in the subtree of the vco pll
a7c36fd8c5ee6dcca584137cb81aeefd785a0721	fix dynamic allocation of pm clock modes i missed the combios path when i updated the atombios pm code reported by amarsh04 on irc
ac17078ae6947254331f56ce4f1db9ea221d43d6	scsi scsi_debug prohibit scsi_debug_unmap_granularity scsi_debug_unmap_alignment scsi_debug prohibits setting scsi_debug_unmap_alignment to be greater than scsi_debug_unmap_granularity but setting them to be the same value is not prohibited in this case the only difference with scsi_debug_unmap_alignment __number__ is the logical blocks from __number__ to scsi_debug_unmap_alignment __number__ cannot be unmapped but the difference is not properly handled in the current code so this prohibits such unusual setting
9ec72eafee61f68cd57310a99db129ffb71302f3	tools lib traceevent set int_array fields to null if freeing from error had a bug where on error of parsing __print_array where the fields are freed after they were allocated but since they were not set to null the freeing of the arg also tried to free the already freed fields causing a double free fix process_hex while at it link
6abb5a867ba0866cb21827b172cee6aa71244bd1	mm memcontrol avoid charge statistics churn during page migration charge migration currently disables irqs twice to update the charge statistics for the old page and then again for the new page but migration is a seamless transition of a charge from one physical page to another one of the same size so this should be a non-event from an accounting point of view leave the statistics alone
c264c651fd318274ffe27219947f17f24f07c073	disable mcp limit exceeded messages from intel ips driver on a system on the thermal limit these are quite noisy and flood the logs better would be a counter anyways but given that we dont even have anything for normal throttling this doesnt seem to be urgent either
d934a88d50f92230e48b944c729021fc39c65d98	greybus db3-platform fix code that fetches reset gpio the code that fetches the reset gpio for an ap bridge suffers from an apparent error fix it
efce8a412161b0555254bd6ac1dcdfb7886bfd8c	input tca8418_keypad use a temporary variable for parent device use a temporary variable for our parent device coming from i2c client structure well be also using it during conversion to managed resources
4a1ae8be4563d29ddd36f46759191f4e867ed954	spi rb4xx fix set_cs logic as it turns out the set_cs enable parameter refers to the logic level on the cs pin not the state of chip selection this broke functionality of the leds behind the cpld or at least delayed the commands until another one came in to toggle cs
81317fdeddcef259b6ecf7b5c0d04caa167c6b54	btrfs fix deadlock when throttling transactions hit this nice little deadlock what happens is this __btrfs_end_transaction with throttle set so it equals __number__ btrfs_commit_transaction else actually manages to start the btrfs_end_transaction so now its bad we just return and wait on the transaction this is bad because we just return after our use_count is and dont let go of our num_writer count on the transaction so the guy committing the transaction just sits there forever fix this by incing our use_count if were going to call commit_transaction so that if we call btrfs_end_transaction its valid thanks
4fa92fb25ae5a2d79d872ab54df511c831b1f363	kvm cleanup physical cpu hotplug remove the useless argument and do not do anything if there are no vms running at the time of the hotplug
60bba385c5e86ee6a654e3345093eb48e258eb1d	staging alarm-dev information leak in alarm_compat_ioctl if we pass an invalid clock type then ts is never set we need to check for errors earlier otherwise we end up passing uninitialized stack data to userspace
65ccfe21dd8fb402547bb1c50bbc2737c4ef37b8	rbd split up rbd_get_segment there are two places where rbd_get_segment is called one in rbd_rq_fn only needs to know the length within a segment that an request should be the other in rbd_do_op also needs the name of the object and the offset within it for the request split out rbd_segment_name into three dedicated functions rbd_segment_name allocates and formats the name of the object for a segment containing a given rbd image offset rbd_segment_offset computes the offset within a segment for a given rbd image offset rbd_segment_length computes the length to use for within a segment for a request not to exceed the end of a segment object in the new functions be a bit more careful checking for possible error conditions watch for errors or overflows returned by snprintf catch using bug_on potential overflow conditions when computing segment length
47f58b1ebe3739dad1ddeb5cd1f1e718648b4d24	ath9k remove duplicate assignment of variable ah ah is written twice with the same value remove one of the redundant assignments to ah
6a931423c918633d4d0cda96df042d7e44ad06b0	defxx disable defeas esic decoding on shutdown make sure the option card does not respond after shutdown by disabling it via esics expansion board control register also disable memory and port decoders the latter in particular to disable slot-specific decoding that otherwise remains active even in the board is disabled
acd2784562ae506137575c31136bef34dc642a2e	simplify intel_init_ring_buffer prototype engine contains dev_priv so need to pass it in reviewed-by chris wilson
316eb661f125397d46f16f94e3c81ad3dc4c1233	cgroup set start with the right value in cgroup_path start is set to buf buflen and do the immediately just set it to buf buflen __number__ directly
cc023478dc8a3ab07828620dd80303fcd81fb227	spi s3c64xx remove unused platform_device_id entries s5pv210 and exynos4 are now dt only platforms hence these entries can now be safely removed from the match table
358e78b5f445c35f5b7f9241425fb499ee9fe3e2	ezchip nps_enet check if napi has been completed after a new napi_state_missed state was added to napi we can get into this state and in such case we have to reschedule napi as some work is still pending and we have to process it napi_complete_done function returns false if we have to reschedule something in case we were in missed state as current polling have not been completed yet nps_enet driver hasnt been verifying the return value of napi_complete_done and has been forcibly enabling interrupts that is not correct as we should not enable interrupts before we have processed all scheduled work as a result we were getting trapped in interrupt hanlder chain as we had never been able to disabale ethernet interrupts again so this patch makes nps_enet_poll func verify return value of napi_complete_done and enable interrupts only in case all scheduled work has been completed
77b5665141a9a7e69d2f685ee2f2a3698fd27397	kvm-arm remove kvm_pud_huge get rid of kvm_pud_huge which falls back to pud_huge use pud_huge instead
55cd63acf6855cd45a183fdfca6d22450b8d1d47	omapdss dsi update manager timings on a manual update during a command mode update using dispc video port we may need to swap the connected overlay managers width and height when __number__ or __number__ degree rotation is done via the panel by changing its address mode call dss_mgr_set_timings in update_screen_dispc before starting the manager update the new manager size is updated in the timings field of dsi drivers private data via omapdss_dsi_set_size a panel driver is expected to call this when performing rotation
8ae6ace128023c08b475ddd5153761c3765812ab	gpio adp5520 use devm_gpiochip_add_data for gpio registration use devm_gpiochip_add_data for gpio registration and remove the call for gpiochip_remove from error path also remove the need of driver callback
19f1ba51c79f133aec3ce558b8292e3b081363f3	mmc sh_mmcif dont clear masked interrupts masking events on mmcif means that an occurrence of the masked event wont raise an interrupt but the event bit will still be set in the interrupt status register if simultaneously a different event occurs which was enabled both flags will be set however only the unmasked event bit should be cleared in the status register in such a case clearing also the masked bit can lead to lost interrupts which indeed can be observed on the armadillo800eva r8a7740 board with an emmc chip the problem has been introduced by the recent mmc sh_mmcif simplify irq processing patch fix the problem by only clearing enabled interrupts
ff0a6d6f932ff4b9eb8e8140f98cc1cf763d0d78	revert cpufreq schedutil reduce frequencies slower revert commit cpufreq schedutil reduce frequencies slower that introduced unintentional changes in behavior leading to adverse effects on some systems
bbac5ccff43cdcb5fc9346669ec67ea47fca3de0	remove tests from the reconnect code remove the tests from the reconnect code these tests are not needed upon entry of srp_rport_reconnect it is guaranteed that all pointers are non-null none of the functions srp_new_cm_id srp_finish_req srp_create_ch_ib nor srp_connect_ch modifies this pointer srp_free_ch_ib is never called concurrently with srp_rport_reconnect
ac06dd8df6e13591524f0e1bedf36af4ca0e967b	asoc intel byt-rt5640 remove in2n pin from dapm route table i tested couple byt-rt5640 based platforms and they have single-ended headset microphone connection to in2p only i guess in2n was either defined by accident or some early platform had floating ground for headset its better to remove in2n and add a custom route for such a platform if needed
f2889e650a8dbd51644997aef7bae71d6ac4d423	regulator core report microvolts in sysfs even with only list_voltage if a regulator only supports a single voltage list_voltage can be used to report what that voltage is so add this as one of the criteria for creating the microvolts file in sysfs
7236214c88454d96de7633e07a8314644d529f26	pm wakeup wakeup_source_create use kstrdup_const using kstrdup_const allows us to save a little runtime memory and a string copy in the common case where name is a string literal
03716e1dd01b0e761a7db8f82c81f11746a0ef97	pinctrl rockchip add support for wide iomux settings in the upcoming rk3288 soc some iomux settings are wide instead of the regular therefore add a flag to mark iomuxes as such and adapt the mux-access as well as the offset calculation accordingly
f6ec2f3204b1c0b3ca468d0cb805784c01b890e5	niu remove unnecessary break after return
6713e8fb541656d00249dca6627395b461c39ece	debugfs add bool file ops there arent any read-only or write-only bool file ops but there is a caller of debugfs_create_bool that calls it with mode equal to __number__ this leads to the possibility of userspace modifying the file so lets use the newly created debugfs_create_mode helper here to fix this
a379fd2458d78d3286c8103aa479839b073c89fe	rtc rtc-mc13xxx use functions use functions to make cleanup paths simpler
5f9c82c021cca74ad9a2dd48353c01bad567815e	media ivtv disable a bunch of ioctls that are invalid for the decoder vbi the vbi capture for the decoder is special in that it captures the vbi stream embedded in an mpeg stream that is being decoded a lot of the ioctls that would normally be valid have to be disabled since they make no sense for such a device and v4l2-compliance will complain about that
43f53b19074e846f236ef230d1eb4b14b601e965	phy phy-mt65xx-usb3 fix test fail of hs receiver sensitivity when use the default value __number__ of rg_usb20_sqth the hs receiver sensitivity test of hqa will fail set it as __number__ to fix up the issue
c844a46f135e493ffda0bd770e16f6c3dd6c7eb7	mmc sdhci-pxav3 remove cd-broken quirk for permanently present card flag pxa_flag_card_permanent is set in sdhci_pxa_platdata flags to indicate that the card is always wired to host like on-chip emmc which is permanently present and dont need detection so only mmc_cap_nonremovable should be set for this case but current code also sets sdhci_quirk_broken_card_detection which doesnt make sense
d360892d37b5d0e82595001c4be6d49311e2c265	irqchip crossbar allow for quirky hardware with direct hardwiring of gic on certain platforms such as dra7 spis __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ are direct wired to hardware blocks bypassing crossbar this quirky implementation is supposed to be the expectation of crossbar hardware usage however these are already marked in our description of the hardware with skip and reserved where appropriate unfortunately we need to be able to refer to these hardwired irqs so to request these crossbar driver can use the existing information from its table that these maps are direct wired sources and generic of crossbar should be avoided link
fd4a260cdca91ad548702e2af46a7ae5a48ad1e5	net cxgb2 remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
c2c2a644935dcdb287a87bf4f3cccd13bd8d3468	mips mt mark existing tcs as present according to the cpu_present_mask should contain all the cpus which are present in the system therefore all the tcs currently present in the system should be marked as present even if they will never be brought online patchwork
e5cfeed281a842a37c9da84bad2911c9b470347e	rbd simplify rbd_merge_bvec the aim of this patch is to make whats going on rbd_merge_bvec a bit more obvious than it was before this was an issue when a recent btrfs bug led us to question whether the merge function was working correctly use obj rather than chunk to indicate the units whose boundaries we care about we call rados objects
7feeb1482153575bc9221eff098e9a1313522dfe	media cx88 fix register mask ensure that the register is aligned to a dword otherwise the read could read out-of-range data
0ab6b544c185de913fa662c7565d78bdeccb54c4	net team use __ethtool_get_ksettings
c59c015b6aa5bc18d01c8e482149086cafd7332a	powerpc correct emulated mtfsf instruction the emulated config_math_emulation_full powerpc floating point instruction mtfsf does not correctly copy bits from its source register to the floating point status and register fpscr the error is in the preparation of the mask used to select the bits to be copied from the source to the fpscr execution of the mtfsf instruction does not produce the same results on a mpc8548 platform emulated floating point as on mpc7410 or platforms hardware floating point this error has been detected using a freescale mpc8548 based platform and the patch below tested using that platform the patch is based on the patches provided by gabriel paubert and analysis by gabriel james yang and david laight
20cc28882bf4a8c9a2605a9a76a7952e696aaece	x86 boot kaslr fix nuisance warning on builds building threw a warning on kaslr enabled builds in function warning cast from pointer to integer of different size u64ptr this fixes the warning unsigned long should have been used here link
0046a46a8f93f5b99b499118779521ba3b017d69	actually build the interface modules the ad7606_par and ad7606_spi drivers are not built if because kbuild does not currently support syntax even if we add kbuild support ad7606 fails to link because of duplicate module_init definitions make the two drivers separate modules as the kconfig help text already suggests also config_iio_buffer is a dependency of config_ad7606 so there is no need to test for it in the makefile
f625099f1a504742aef4c6ab20ba0ca981847e3c	usb usbtest update bos test coverage to usb __float__ device the commit usb usbtest support bos descriptor test for usb __float__ introduced a test for bos descriptor and usb __float__ device also can be checked so this patch extends the test coverage to support usb __float__ device
6689c87555839d90f2a0b76d1f982713487a11d2	arm fix twl section warnings related to omap_twl4030_audio_init with the recent twl related changes we can now get warning section mismatch in reference from the function sdp3430_twl_gpio_setup to the function the function sdp3430_twl_gpio_setup references the function __init omap_twl4030_audio_init this is often because sdp3430_twl_gpio_setup lacks a __init annotation or the annotation of omap_twl4030_audio_init is wrong warning section mismatch in reference from the function zoom_twl_gpio_setup to the function the function zoom_twl_gpio_setup references the function __init omap_twl4030_audio_init this is often because zoom_twl_gpio_setup lacks a __init annotation or the annotation of omap_twl4030_audio_init is wrong fix this by removing __init from omap_twl4030_audio_init as suggested by peter ujfalusi
12eb0898741870882ca474708e811983d5a5d768	alsa asihpi use standard printk helpers
9187bef2fa395e85d5e22c4792b553d98410ccd6	usb ps3 ehci hc reset work-around ps3 ehci hc errata fix __number__ the ps3 ehci hc will reset its internal insnregxx setup regs back to the chip default values on host controller reset cmd_reset or light host controller reset cmd_lreset the work-around for this is for the hc driver to re-initialise these regs when ever the hc is reset adds a new helper routine ps3_ehci_setup_insnreg which is called from ps3_ehci_hc_reset
1f2112af11e4c330cd070464e95ba9f546b8959b	spi mpc512x-psc fix compiler warning about uninitialized variable this fixes several warnings like in function mpc512x_psc_spi_prep_xfer_hw warning __ret may be used uninitialized in this function introduced in commit for some build configurations
a07203108494d00efdd8f2fcbf9f2f4f63110e60	rocker gaurd against null rocker_port when removing ports the ports array is filled in as ports are probed but if probing doesnt finish we need to stop only those ports that where probed successfully check the ports array for null to skip un-probed ports when stopping
aedfebbaa7a4883dc568d8d32b7b32a0f9833f41	be2net fix rx pause counter for lancer fixed rx pause counter for lancer swapping hi and lo words
06566f5dc3f30e74de9e7bee4da6aad9ca35f287	staging ion remove order argument from free_buffer_page now that the pages returned from the pool are compound pages we do not need to pass the order information to free_buffer_page
4a577f5275e948f96ea1a9bbce5d994ec6db618b	spi coldfire-qspi fix error return code in mcfqspi_probe if is not set mcfqspi_probe will return __number__ and release all the resources in this case we should return a error code instead of __number__ this patch fix to return in this case and move the check for to the begin of this function
a05a586239c66a256ea1fbae859e742e4c91c8d9	print debugfs object list sizes in kib instead of bytes theyre all in increments of pages so this just makes it easier on the eyes
f0776b8ce03ceb638c51b62f324844c71c446600	mfd lpc_ich only configure watchdog or gpio when present some chipsets dont currently have gpio support enabled for these chipsets dont go through the process of initializing the gpio region make the same change for the watchdog initialization for chipsets which may not enable the wdt in the future
b5b3ee6c9cca8b6e1aa8c757e570f08f802c5573	apparmor no need to delay vfree vfree can be called from interrupt contexts now
ad2aa04218de9bd734d593adb0ac59854ec0cb68	handle failures of read_vq_conf ccw in virtio_ccw_read_vq_conf the return value of ccw_io_helper was not checked if the configuration could not be read properly wed wrongly assume a queue size of __number__ lets propagate any error to virtio_ccw_setup_vq so it may properly fail
4bb2bd0798447c67d563311f337db9c2f390f2c6	tty serial uartlite remove field for driver there is no need to init field based on the patch from peter griffin mmc remove field for drivers using module_platform_driver this patch removes the superflous field for drivers which use the module_platform_driver api as this is overriden in platform_driver_register anyway
3e3ea716270dc64810f624ad6a3672440b45d3d4	call pl022_dma_removepl022 only if enable_dma is true pl022_dma_remove should be called only if enable_dma is true there is no point calling it when pl022_dma_probe is not called which again depends on enable_dma
0b1568a4536ff287a87908d7fc35c05bd7736a53	rsa fix signature verification for shorter signatures gpg can produce a signature file where length of signature is less than the modulus size because the amount of space an mpi takes up is kept as low as possible by discarding leading zeros this regularly happens for several modules during the build fix it by relaxing check in rsa verification code thanks to tomas mraz and miloslav trmac for help
ef6239e0cf5e665e7b20fd659678b98331b3081d	only enable __number__ rings on new enough firmware v2 older firmware versions dont support __number__ rings v2 use define for fw version
417009fb12f9821c30bc9540cba418321c2f14d3	drm fix indentation
5cf310e976659caeaae350258940b73daaa0d478	alsa usb-audio break out creation of silent urbs from prepare_outbound_urb refactoring in preparation for adding zoom quirk no functional change
58a4782449c5882f61882396ef18cc34c7dc1269	ipv6 sit update mtu check to take care of gso packets while testing my changes for tso support in sit devices i was using sit0 tunnel which appears to include nopmtudisc flag but using ip tun add sittun mode sit remote local dev we get a tunnel which rejects too long packets because of the mtu check which is not yet gso aware ip tunnel sittun remote local ttl inherit sit0 remote any local any ttl __number__ nopmtudisc this patch is based on an excellent report from michal shmidt in the future we probably want to extend the mtu check to do the right thing for gso
06c2a9238fad48ec38f1be00455bf942d54377ee	rcu export rcu-tasks apis to gpl modules this commit exports the rcu-tasks synchronous apis synchronize_rcu_tasks and rcu_barrier_tasks to gpl-licensed kernel modules
cc4829e5967de577794b25dfcd1a65e509d171ed	ceph use list_move_tail instead of using list_move_tail instead of list_del list_add_tail
5329d67cc32c0306426dc4bc4b5e66a36cb87ce0	mtd bcm63xxpart handle broadcom partition order the original broadcom partition order has the root fs in front of the kernel which resulted in miscalculated partition sizes detect when such an image is on the flash and also reorder the partitions accordingly
cb73b40e59f0f62099bfb8a836697a74dc151395	video fbdev atmel fix warning for const return value a const on a return value is meaningless and generates a warning on some versions of gcc warning type qualifiers ignored on function return type the function in question is only used inside the file so the author of the code most likely means static instead of const change the const to static
2ce3647e9aba981f968f42f75f6b0af79332fee3	staging lustre llog prevent out-of-bound index llog_process_thread can be called from llog_cat_process_cb with an index already out of bound leading to the following crash lustreerror assertionindex last_index __number__ failed lustreerror lbug __address__ machine_kexec at __address__ __address__ crash_kexec at __address__ __address__ panic at __address__ __address__ lbug_with_loc at __address__ libcfs __address__ llog_process_thread at __address__ obdclass __address__ llog_process_or_fork at __address__ obdclass __address__ llog_cat_process_cb at __address__ obdclass __address__ llog_process_thread at __address__ obdclass __address__ llog_process_or_fork at __address__ obdclass __address__ llog_cat_process_or_fork at __address__ obdclass if index is too big simply return success intel-bug-id reviewed-on
d27f25c9c216dc9f9a320fe78f729aebdebcae50	w1-gpio use functions
b24baf6917a376420d535548e1f88744028bcf24	btrfs uninit variable fixes in
162e52a117af5d9c5dfc62b7c2ee90b3e91a7b32	remove superfluous smp function call since the following commit move online calls to hotplugged cpu the cpu_online and cpu_down_prepare notifiers are always run on the hot plugged cpu and as of commit fix rollback during error-out in __cpu_disable the cpu_down_failed notifier also runs on the hot plugged cpu this patch converts the smp functional calls into direct calls smp_function_call_single executes the function with interrupts disabled this calling convention is not preserved because there is no reason to do so link
7f0cb0a05df262c51084f8b079188395ea1ad3da	remove duplicated code by using an offset in setantennaconfig87se both branches of if bantdiversity do exactly the same except that there is an offset of for the register values if bantdiversity is true consolidate both branches and assign the offset if necessary
42fb18fd5852dba9c43ac008558e4bc8062bda57	simplify a test create_root_ns does not return an error pointer so the test can be simplified to be more consistent
ecf244f753e09486707843f2b7b1874f33027038	rocker fix maybe-uninitialized warning in some rare configurations we get a warning about the index variable being used without an initialization in function warning may be used uninitialized in this function this is a false positive the logic is just a bit too complex for gcc to follow here moving the intialization of index a little further down makes it clear to gcc that the function always returns an error if it is not initialized
600836cc7b049f3eb47e9b39f379aa4b0926188a	media media rc use static inline functions to kill warnings this patch converts some ifdefd wrapper functions from macros to static inline functions to kill the following warnings issued by gcc cc m in function warning statement with no effect warning statement with no effect warning statement with no effect warning statement with no effect warning statement with no effect warning statement with no effect
d7b6c574d17fed09a0d9fa4bc7674c13fa156805	staging comedi dt282x automatically handle data format the dt2821 series board have jumpers that set the output range for the two analog output channels the range_table for the analog output subdevice provides all possible ranges to the user when a unipolar range is selected the board expects the data to be in a straight binary format when a bipolar range is select the data should be in twos complement format currently the user passes some configuration options when attaching to the driver to select the data format for each channel if the user does not pass the config options the data format is assumed to be straight binary the analog output subdevice now has a range_table that provides the user will all possible ranges use the range information to determine if the data values need to be munged into twos complememnt values and deprecate the config options
af8c4cfabea88b441282dff26ef08d52a90d653c	cpufreq davinci use cpufreq_generic_init use generic cpufreq_generic_init routine instead of replicating the same code here
b664f008b0d885db1d5617ed1c51d29a8c04da93	bnxt_en setup uc_list mac filters after resetting the chip call bnxt_cfg_rx_mode in bnxt_init_chip to setup uc_list and mc_list mac address filters before the patch uc_list is not setup again after chip reset such as ethtool ring size change and macvlans dont work any more after that modify bnxt_cfg_rx_mode to return error codes appropriately so that the init chip sequence can detect any failures
d84b272a12a6aa96897372449e47e57f72f2730f	re-set vblank interrupt state when enabling a crtc something atom seems to be clobbering the lb_interrupt_mask register while the crtc is off which caused glxgears or gnome-shell to hang after a modeset
20fa2f7f5f2263d6f76e1c1ce35693ca81d828ff	ath10k update wmi service map update wmi service map to sync with firmware released on which is the latest qca988x firmware as of
d636bd9f12a66ea3775c9fabbf3f8e118253467a	keys put keyring if install_session_keyring_to_cred fails in join_session_keyring if install_session_keyring_to_cred were to fail we would leak the keyring reference just like in the bug fixed by commit keys fix keyring ref leak in join_session_keyring fortunately this cannot happen currently but we really should be more careful do this by adding and using a new error label at which the keyring reference is dropped
e5989ee1342a686764934fff01e743aa06803d21	fix for crash in disable path seems like disable can race with complete_flip in process of disabling a crtc leading to __float__ call trace __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ it makes no sense to free the ctl without disabling all stages so lets just move them together to avoid the crash
23436825e671cdd55c45d151ddc66fd3c47d10e9	staging wilc1000 null dereference on error we cant pass null pointers to destroy_workqueue
cae7b6dd6c569f18f5c8e3f33cac60fbaeb58140	libfc avoid that sending after an abort triggers a kernel warning calling fc_seq_send after an abts message has been received triggers a kernel warning esb_st_seq_init avoid this by returning to the caller if fc_seq_send is invoked after an abts message has been received
f1d86b61fb6692c592e937dfb5069e4057855a3b	add debug_level_enabled function add the debug_level_enabled function to check if debug events for a particular level would be logged this might help to save cycles for debug events that require additional information collection
369f87fadd8041eea33dcd2ce3c57be6c3010162	staging comedi ni_65xx replace comedi_board calls the comedi_boarddev inline function calls just return expand the inline function calls
26fdcf0980225f8b3d5fa258d9f41433cb0664ed	media mem2mem_testdev use pr_err instead of printk is replaced with pr_err to silence checkpatch warning warning prefer netdev_errnetdev then dev_errdev then to printkkern_err
620874c2df596e51922916a0b61cd1b1e5b8504a	power supply axp288_charger remove unnecessary register writes setting the irq_enable bits is taken care of by the irq chip when we request the irqs and the driver should not be meddling with the registers itself
0d27bbfe81cb087748dc1511683bd3e7335a7da5	media docbook improve status documentation no functional changes it just improves the description of the frontend status using for the status enumeration and a table inside the docbook
09b029b6b68daa4b961841173d90f267cee9c117	ath9k check for null rate when using ieee80211_get_rts_cts_rate ieee80211_get_rts_cts_rate can return null so dont rely on its members when it does return null
bd008e5b2953186fc0c6633a885ade95e7043800	drm implement o_nonblock support on the implmentation is simple in the extreme we only want to wait for events if the device was opened in blocking mode otherwise we grab what is available and report an error if there was none testcase
17b6fd9d6dfa0faed3a25a6045f7456821ea140a	rdma_request needs not allocate p9_tag_alloc takes care of that
40ce5ed1e9d5c80819733c4fdc40a2b6c531d981	iwlwifi mvm rs minor indentation fix indentation was off a bit fix it
12de375ec493ab1767d4a07dde823e63ae5edc21	revert serial __number__ disable too much work messages this reverts commit f4f653e9875e573860e783fecbebde284a8626f5 jiri writes no please drop this one we need a better solution as it turned out that some boxes need loops and it will increase with new processors
95ee28ec64c9d16f5bcf7e7749ff30f652177659	fix sparse warnings in this patch fixes sparse warnings using plain integer as null pointer in
dad78c56620d425eede52d74e8ba73ea136703dd	media mb86a20s fix signal strength calculus a register typo made the calculation to not work fix it
aba54876bb38dde81abead1ed1936eb04fa30ca9	input xpad query wireless controller state at init when we initialize the we really dont know how many controllers are connected so send a query presence command to the base-station command discovered by zachary lund presence packet taken from
6706664d92ea841913d5fcfd06c290fbe6d33bd2	rtc class fix double free in rtc_register_device error path commit fix device_register error handling correctly noted that naked kfree should not be used after failed device_register call however while it added the needed put_device it forgot to remove the original kfree causing double-free
f43aa420a89a4a17117e21553283e2a50cf86df8	media media ti-vpe free vpdma buffers in vpe_release free vpdma buffers in vpe_release otherwise it was generating random backtrace
a09cfa470817ac086cf68418da13a2b91c2744ef	audit dont ever sleep on a command sleeping on a command in audit_log_start could slow something auditd from doing something important clean shutdown which could present problems on a heavily loaded system this patch allows tasks to bypass any queue restrictions if they are logging a command
c1f4d88abda3c6894d4027f85f640641b0ad3597	virtio_pci drop pci_msi_off call during probe the pci core now disables msi and msi-x for all devices during enumeration regardless of config_pci_msi remove device-specific code to disable
22976a5dada65a0f44918e91c5f1fb5041dc1d5e	pwm pxa remove pwm_id_base macro pwm_id_base is not used after convert to pwm framework remove it also update driver_data field of struct platform_device_id accordingly
62fad137bb1fc1dd08352aba18e7e13d0d682ef3	hid hid-sensor-hub fix sparse warning since i cant change the type of hid_set_field argument __number__ using __force __s32 to remove this warning
15f6b09a00a6d12b594c439fb3a7e2d113a05592	asoc soc-compress consolidate two identical branches the actions taken in both branches are identical so we can simplify the code spotted by coverity
25355be64ef319894c4de2034af1bdeb79dc0bd4	usb dwc3 ep0 fix debug message the way it was before was really meaningless now it looks saner
fd7252346b2b005ea5c5f1b432a63dbb9bb05768	mtd spi-nor use write_sr for write status use existing write_sr call instead of decoding and calling separately
876c6e3e028d1b326c81f6f134a4804b92f67dc7	keys fix public_key asymmetric key subtype name the length of the name of an asymmetric key subtype must be stored in struct so that it can be matched by a search for fix the public_key subtype to have name_len set
10435c1192d06bdb0bac7666452d8219d7e7c477	netfilter nf_tables eliminate duplicated code in nf_tables_table_enable if something fails in nf_tables_table_enable it unregisters the chains but the rollback code is the same as nf_tables_table_disable almostly except there is one counter check now create one wrapper function to eliminate the duplicated codes
46fa516869f4b57f9eb63db02c76642abfb9f682	dmaengine jz4780 fix up dmaengine api function prototypes several function prototypes did not match the dmaengine api they were implementing resulting in build warnings correct these
5f3aea57773dc7f788e374994636ffc0234a355f	turbostat bugfix u32 was printed as u64 when the u32 keyword is used with it means that the output should be truncated to this was not happening and all were printed also when no column name was used for an added msr the default column name was in deximal eg msr16 users report that they tend to use hex msr numbers so print them in hex to always fit into the columns use the syntax m0x10 note that the user can always supply any column header that they want eg
9645f7d3dab346a9d442dca1688740551b8c55f2	usb gadget pch_udc add debug message issue adding debugging messages cause the debugging messages are added to make sure of that major interrupt events are occurring
9489667684fbed2114dcdd10cdee2e4d20d9f308	greybus operation fix null-deref on operation destroy incoming operations are created without a response message if a protocol driver fails to send a response or if the operation were to be cancelled before it has been fully processed we get a null-pointer dereference when the operation is released
aebceccc18bf49f8fb208ac4548b7bd402b6662c	bluetooth bt3c_cs fix coding style clean up fix for braces are not necessary for single statement blocks reported by checkpatch
ecd5c9821c39626fa7c03e9c397586b24cb11b79	amdkfd implement the get version ioctl
821466d2fe8f6932c32ad86b8b36235aed644733	staging wilc1000 rename statisitcs_totalacks variable this patch rename statisitcs_totalacks variable to total_acks to avoid camelcase naming convention
ccf7d8ee3d6eb600338a184e9a192ec1d5aee924	spi spi-fsl-dspi fix continuous selection format current dma implementation was not handling the continuous selection format viz spi chip select would be deasserted even between sequential serial transfers use existing dspi_data_to_pushr function to restructure the transmit code path and set or reset the cont bit on same lines as code path in eoq mode does this correctly implements continuous selection format while also correcting and cleaning up the transmit code path
07236bf3c659d1823262c1dabec4fa05990df115	ath9k use lockless variants for the rx fifo queue the rx fifo can be accessed from the common tasklet or it can be when rx is stopped which is done when doing a reset or channel change this happens in process context since it is ensured that there are no pending tasklets when stopping rx and cleaning the fifo there is no need to use skb queue functions which take internal locks
33362c69c8e68281633a7c3a1d5c840e940097b7	asoc wm8962 correct typo when setting dspclk rate the variable dspclk holds the rate of the dspclk but the variable sysclk holds an identifier for the clock currently if read a non-sensical value from the dspclk_div register we assign sysclk to dspclk clearly this was intended to be sysclk_rate
09b9da3399c8fee4ec7fc393b2d1aeaef4607caf	staging iio adc replace of_iomap with devm_ioremap_resource the adc driver uses of_iomap which doesnt request the resource and isnt device managed so error handling is needed of_iomap is mainly used in cases where there is no driver or struct device so a switch to devm_ functions is required this patch switches to use devm_ioremap_resource instead which automatically requests the resource and is freed when the driver detaches removed the error handling to unmap registers iounmap in probe and remove functions of this driver and consequently removed an unnecessary label
75ba899e95217fe9002878edc2777bdd49d908c3	hid i2c-hid use correct type for acpi _dsm parameter acpi __float__ specification requires the fourth parameter to the _dsm device specific method to be of type package instead of integer failing to do that we get following warning on the console acpi warning argument type mismatch found integer acpi requires package fix this by passing an empty package to the _dsm method the hid over i2c specification doesnt require any specific values to be passed with this parameter
0f363b250b15af0f218bb2876d101fe5cd413f8b	x86 fix off-by-one in instruction decoder stephane reported that the pebs fixup was broken by the recent commit to the instruction decoder the thing had an off-by-one which resulted in not being able to decode the last instruction and always bail link
1a68abb0c85b5eb490971b622ff36168c64416a7	ath9k fix led gpio pin for ar9462 gpio pin __number__ is assigned ar9462 chipsets led while gpio pin __number__ worked for obselete ar9462 chipsets though they are meant for eeprom as per russell
179a98cba11b057d9f1cc70cd2a8831f9e9a06e6	dont register chpids in reserved state during ipl we register all chpids that are not in the unrecognized state this includes chpids that are not usable and chpids for which the state could not be obtained change that to only register chpids in the configured usable or standby usable after a configure operation state all other chpids could only be made available by external control for which we would receive machine checks
c3eaaf8b5b01cf076525e23d26269027a8cfe8a6	staging rtl8821ae fix potential infinite loop smatch reports the following _rtl8821ae_set_fw_clock_on info ignoring unreachable code upon investigation the code in this region has the capability of creating an infinite loop
57f1b1c8fd705f48eb9fcd87d054e1dc46b1cedc	media media sh-mobile-ceu-camera runtime pm suspending doesnt have to be synchronous in both error and clean up cases there is no need to wait for runtime pm to finish suspending the device
8ec23da73599848a5a5ecbab50f17a570b60c096	media tc358743 enable v4l2 subdevice devnode add v4l2_subdev_fl_has_devnode to subdev flags in order to enable a subdev device node
f4a2d499e7f0ea9089c8e537ddad12260f7aab69	usb sierra fix resume error reporting add error message to resume error path and make sure to also return an error when failing to submit a cached write
1a2bd6b257592cc05e9dd3d36e5810466a075fc3	staging et131x remove alignment offset padding on dma buffer this padding was used to align buffers to a boundary when returned from dma_alloc_coherent as the buffers are already aligned and the alignment no longer performed the padding is not needed
193b2f65b87e9da78b15f3e3a0cae1d37fbafa57	asoc ak4104 provide a module device table provide a module device table for the spi subsystem so the driver can be autoloaded by the spi core while at it get rid of an unnecessary
77b1e2fbbdfa0ee5cdf6c928b711493a3738468e	media dvb dvb_frontend update locking in isnt protected by so move the call to out of the locked area move the assignment of into the locked area use direct assignment instead of memcpy use mutex_lock instead of mutex_lock_interruptible because all code paths protected by this mutex wont block
c79dc99cdab0f35950460172c809e7900e214fdf	asoc codec duplicated callback function goes to component on wm8983 codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
ccc66e0a06a08a2858bf81a334ee71e295ff8b7a	staging comedi refactor pcl724 driver to remove the forward declarations move the routines and the associated struct comedi_driver and other variables to the end of the source this is more typical of how other drivers are written and removes the need for the forward declarations
cb113b47d098185f3f1f67e8300d05ddce842b66	uprobes introduce vaddr_to_offsetvma vaddr add the new helper vaddr_to_offsetvma vaddr which returns the offset in this vaddr is mapped at change build_probe_list and find_active_uprobe to use the new helper the next patch adds another user acked-by srikar dronamraju link
96a0922c2349ccfbf5583708c3602945a755c874	bonding use the correct ether type for alb currently its using the wrong eth_p_loop type which is sometimes treated as packet length instead of ether type because its use the new eth_p_loopback type
bc0403ff16e5305c3a14c2b0826616ceaabbf058	pm domains rename argument of pm_genpd_add_subdomain change the name of the second argument of pm_genpd_add_subdomain so that it is a shorter and b in agreement with the name of the second argument of pm_genpd_add_subdomain
6887a825dc5cb41ef63fe166e28362590f9f6024	fix length of async_event_mask according to prm async_event_mask have to be __number__ bits long
58c3c3aa01b455ecb99d61ce73f1444274af696b	make taskstats round statistics down to nearest even with just the interface limited to admin there really is little to reason to give byte-per-byte counts for taskstats so round it down to something less intrusive
8914d7e857807e1e60975000cba3750c9b2643e8	hexagon fix signal delivery for debug traps
75453ccb61120885d6715a49496c57930dbe6253	nl80211 send netdetect configuration info in nl80211_cmd_get_wowlan send the netdetect configuration information in the response to nl8021_cmd_get_wowlan commands this includes the scan interval ssids to match and frequencies to scan additionally add the nl80211_wowlan_trig_net_detect with nl80211_attr_wowlan_triggers_supported
79d1f5c9acf9fc8d06e5537083b19114ce87159f	arm memory fix broken mmap by ensuring task_unmapped_base is aligned we have received multiple reports of mmap failures when running with a vm split these manifest as either with a non page-aligned address ending or a segv depending on the application the issue is commonly observed in children of make which appears to use bottom-up mmap assumedly because it changes the stack rlimit further investigation reveals that this regression was triggered by mm use vm_unmapped_area on arm architecture whereby task_unmapped_base is no longer page-aligned for bottom-up mmap causing get_unmapped_area to choke on misaligned addressed this patch fixes the problem by defining task_unmapped_base in terms of task_size and explicitly aligns the result to matching the other end of the heap
1a5cfd022774a1ff8517f8f2f2da4013ef7c2e4d	media wl128x fix fmdbg compiler warning in function fm_download_firmware warning format expects argument of type int but argument __number__ has type size_t length fw_name
d8ea782b56d9d2c46a47b3231cfd16ecfb538c60	fix vma page prot flags in opal-prd driver opal-prd driver will mmap firmware area as private mapping to prd user space daemon write to this page will trigger cow faults the new cow pages are normal kernel ram pages accounted by the kernel and are not special value will be used at page fault time for the new cow pages while pgprot_t value passed in remap_pfn_range is used for the initial page table entry hence do not add _page_special in vma but only for remap_pfn_range also remap_pfn_range will add the _page_special flag using pte_mkspecial call hence no need to specify in the driver this fix resolves the page accounting warning shown below bug bad rss-counter state __number__ the above warning is triggered since _page_special was incorrectly being set for the normal kernel cow pages
46f3da990b8087c95613744a772cab7557b9b180	media it913x ver __float__ change to remove interruptible mutex locks some virtual i2c commands are missed along some pid filtering commands resulting complete stall of driver since dvb-usb cannot handle the error and commands generally should not be missed mutex_lock is used instead
0db0e377ab5be5d507a2fca3d78215cd2e83b974	libfcoe fix fcoe_sysfs vn2vn mode the libfc discovery layer is being initialized in the create paths for both legacy libfcoe module parameters and fcoe_sysfs control interfaces the problem is that for vn2vn mode the discovery layer is initialized as if it were in fabric mode and it is not re-configured when the mode is changed to vn2vn this patch splits out code that needs to be initialized once and code that can and should be re-configured when the mode changes additionally this patch makes that change so that the discovery layer can be reconfigured to the libfcoe implementation when in vn2vn mode
8dd4a0163e7315d196e54780591b7426fa78e1fa	spi use sg_next for walking through the allocated scatterlist table a null dereference or oops exception might occurs when reading at once the whole content of an spi-nor of big enough size that requires an scatterlist table that does not fit into one single page the spi_map_buf function is ignoring the chained sg case by dereferenceing the scatterlist elements in an array fashion this wrongly assumes that the allocation of the scatterlist elements are contiguous this is true as long as the scatterlist table fits within a page_size however for allocation where the scatter table is bigger than that the pages allocated by sg_alloc might not be contigous the sg table can be properly walked by sg_next instead of using an array
1c2e51e8c162417d2831007ec256ede06c3a0201	audit pass in dentry to audit_copy_inode wherever possible in some cases we were passing in null even when we have a dentry
517b9a2a90676aeeefc7e2b8508fe4260e02c432	asoc s3c24xx_uda134x use static dai format setup set the dai_fmt field in the dai_link struct instead of manually calling snd_soc_dai_fmt this makes the code cleaner and shorter
3358999a8e7ae82912e5908adb7150a6558d6702	s390 wire up syscalls
fa759e9b0984748cf626aac59bca60bdab42c644	powerpc add dscr fscr register bit definition this sets the dscr data stream control register in the fscr facility status control register also harmonise tar target address register fscr bit definition too
127e056e2a82406fd3455a9da20d02f192ae8a05	fix mclk vddc configuration for cards for hawaii need to use vddc0 for vdcc1 for certain hawaii configurations
c3518172129a60a1f3071e61a8a4ffc50c7b2a68	gpio omap rework omap_gpio_request to touch only gpio specific registers the gpio chip and gpio irq chip functionality are essentially orthogonal so gpio chip implementation shouldnt touch gpio irq specific registers and vise versa hence rework omap_gpio_request dont reset gpio irq triggering type to irq_type_none because gpio irqchip should be responsible for that call directly omap_enable_gpio_module as all needed checks are already present inside it
2ceb231b0ab0e3d700c5f7c839273bfeecbefe3b	cgroup make css_sets pin the associated cgroups currently css_sets dont pin the associated cgroups this is okay as a cgroup with css_sets associated are not allowed to be removed however to help resource tracking for zombie tasks this is scheduled to change such that a cgroup can be removed even when it has css_sets associated as long as none of them are populated to ensure that a cgroup doesnt go away while css_sets are still associated with it make each associated css_set hold a reference on the cgroup if non-root v2 root cgroups are special and shouldnt be refd by css_sets
0f27ac40fb64dc0ac8254913b414dde3386196f4	ath9k return false when reading wrong eeprom offset just setting the proper return for reading beyond the eeprom data
6de709c5ee0d7e15afca5991af87e7462b65c527	hwmon gpio-fan make of_device_id array const make of_device_id array const because all of functions handle it as const
63f5384c9a7df95a0e0eb6745f3038c703bdf4c3	f2fs remove the orphan block page array as the orphan_blocks may be max to __number__ so it is not security and rigorous to store such a large array in the kernel stack as dan carpenter said in fact grab_meta_page has locked the page in the page cache and we can use find_get_page to fetch the page safely in the downstream so we can remove the page array directly
ba6fa29c6dd51a1245a109f4b460092b51cad0f0	mac80211 dont sample max throughput rate in minstrel_ht the current max throughput rate is known to be good as otherwise it wouldnt be the max throughput rate since rate sampling can introduce some overhead by adding rts for example or due to not aggregating the frame dont sample the max throughput rate
090f1166c6790e18c30f40690098829709e8dc68	ipv6 ip6_forward perform check at the beginning packets which have l2 address different from ours should be already filtered before entering into ip6_forward perform that check at the beginning to avoid processing such packets
81f1eca663c070ea07eb390ca2a0b205287c8fc1	ftgmac100 request the interrupt only after hw is reset the interrupt isnt shared so this will keep it masked until we have the hw in a known sane state
0e6053dc6e7a42c8ba9ce6e81adb3350c7df4bc8	use list_first_entry_or_null to simplify code use list_first_entry_or_null instead of list_empty list_entry to simplify the code
38e3c5f0dae7a3bbb32c3b2bb28c3f2557d40fe9	batman-adv dont do pointer arithmetic with the size of void is currently set by gcc to __number__ but is not well defined in general therefore it is more advisable to cast it to before doing pointer arithmetic
6e81f6f1213d6b88f0f4f8d0577b418ab0166fc7	staging wlan-ng add spaces around add spaces around to fix the checkpatch issue spaces preferred around that
2dfff235918276638875a1d094f061083ccd6de8	input ambakmi enable module alias autogeneration for amba drivers
5ba6e2919b9e18a051e5bdd6c21f52ee4976513f	efivarfs efivarfs_fill_super ensure we clean up correctly on error ensure we free both the name and inode on error when building the individual variables
d8150d14e9bc44ba55c707cc67f4fa66d65cfdef	pm devfreq exynos-bus add missing of_node_put after calling of_parse_phandle of_node_put needs to be called when the device node which is got from of_parse_phandle has finished using commit updated to fix an error by myungjoo
a8a5356cd511db229aeaad636dc0f83d8c4d0a15	powerpc pull out cpu_core_mask updates into a separate function this factors out the details of updating cpu_core_mask into a separate function to make it easier to change how the mask is calculated later this makes no functional change
2a2083f7f3568c0192daa6ac0e6fa35d953f47bd	handle vxlan steering rules for mac address changes when the device mac address is changed we must deregister the vxlan steering rule associated with the previous mac and register a new steering rule using the new mac
d31b20fcc89efa8c5d3f5ea2720e08a286b69a36	use the built-in macro kbuild_modname for this driver
a76f3bfe016dbda161f9d31cc5cbdd9238d13488	iwlwifi dont declare support for if not supported remove a useless debug print about unsupported channels also add a comment about the lar special case where channels might become valid later
8e472f33b5ba742f9bfcf16f0328f5a7842b32d1	nfsv4 ensure the lock call cannot use the delegation stateid defensive patch to ensure that we copy the which can never be set to the delegation stateid
46ab9b347d677976b2b4072837cb4065839c0b80	alx fix mac address alignment problem in two places parts of mac addresses are used as values this can cause alignment problems use put_unaligned and get_unaligned to fix this
90695ee0e984ef425b9f5a9845314b925357ffdf	scsi lpfc fix number of io channels to match cpus
31e4b89acbd7b19c9a8557e6e660a583a0b97daa	print the pipe on which the vblank wait times out improve the debug message that tells us weve been waiting for a vblank that never arrived printing the pipe could lead a doh moment where weve been waiting for a vblank on a pipe that was off for instance danvet polish commit message a bit
63044c4fd49f9e2ce8ee9c5ca24afe6ebbb9fb46	crypto hash shrink hash down to two types move hash to to free up the space for
58e241f7be8dfbb19fa8f5bf8b2e56bb6d655752	omap4 pm twl6030 fix voltage conversion formula omap_twl_vsel_to_uv and omap_twl_uv_to_vsel functions used to convert voltages to twl6030 smps commands vsel implement incorrect conversion formula it uses legacy omap3 formula but omap4 power ic has different offset and voltage step voltage step is now instead of offset is either or depending on twl6030 chip revision instead of this leads to setting voltages potentially higher than expected and so potentially some limited power overconsumption for reference see formula and tables in section output voltage selection standard mode extended mode with or without offset in twl6030 functional specifications document ported to voltdm_c
3458e21c0d384ca04b27a2ea24d9314c1b57530f	netfilter use proper rwlock init function replace the open coded initialization with the init function
4d78a2239e393f09e0964a2f8da394cc91d75155	sched fix the sched group node allocation for sd_overlap domains for the sd_overlap domain sched_groups for each cpus sched_domain are privately allocated and not shared with any other cpu so the sched group allocation should come from the cpus node for which sd_overlap sched domain is being setup link
4d7408014e4f085c43b511b436ac60d1d61e6e17	video da8xx-fb increased resolution configuration of revised lcdc ip revised lcd controller in upcoming ti soc which is an updated version of lcdc ip that was found on tis da850 soc supports resolution below are the encoding details width pixels per line ppllsb __number__ where timing03 and encoded value can range from __number__ to __number__ in multiples of __number__ height lines per panel where timing226 and encoded value can range from __number__ to __number__ programmable range is __number__ to __number__ patch is verified on emulation platform of upcoming soc for updated feature and on da850 platform to make sure nothing existing breaks
fb223c32b4d3ee593c8dce07e983680d06abe387	crypto user fix rwsem leak in crypto_user the list_empty case in crypto_alg_match will return without calling up_read on crypto_alg_sem we could do the goto out routine but the function will clearly do the right thing with that test simply removed
f83e7d814084d9e982a8e24311a402e811d0ee90	mfd da903x constify da903x_chip_ops structure the da903x_chip_ops structure is never modified so declare it as const done with the help of coccinelle
3ce711a6abc27abce1554e1d671a8762b7187690	perf tools detection fails with recent binutils with recent binutils i get perf make no found install to gain symbol demanglin that happens because now contains ive reopened a bug in the hope that this check will be deleted but in the meantime the following patch fixes the problem link
42dfc43ee5999ac64284476ea0ac6c937587cf2b	x86_64 record stack pointer before task execution begins is unusable immediately after a binary is execd until it undergoes a context switch cycle the start_thread function called during execve saves the stack pointer into pt_regs and into old_rsp but fails to record it into because of this kstk_esptask returns an incorrect value for a program until the task is switched out and back in since switch_to swaps values in and out into link
a87854da2c55b15adc7326a9ee5f8fde281ffe43	gpio moxa art rename moxart_gpio_base to base renaming moxart_gpio_base to base allows better fit remove line breaks in moxart_gpio_get while doing trivial cleanup also remove fields initialized with zero in moxart_template_chip
9757518eb1913d388f6d462c6f0825110acfd2c0	staging unisys visorbus fix formatting in an effort to create a more uniform coding style within the unisys s-par driver set this patch adjusts the formatting of all directives within this source file to match the following template and thereby eliminate irregular usage of whitespace the amount of whitespace used between the and the is dependent on what is needed to make the surrounding directives as uniform as possible
01cb65f1bb3e71df1a0eb3393d3066ea0161a425	qla2xxx isp27xx fwdump template remove high frequency debug logs
757b816e40235e03e1d90c7ec06dad7a684282f3	staging dgnc remove unneeded else if pci_enable_device fails then we can return directly
8a00b6af4cc547725f231c8367ddc7cb56b2cf76	nouveau fix warning on build
7ba36effb666831ac3803ca5b8aed371e7d17c4e	lpfc fix crash from page fault caused by use after rport delete fix crash from page fault caused by use after rport delete
ea73c79e33c45e1fa0071e216f06fd5682314490	tracing syscall_regfunc should not skip kernel threads syscall_regfunc ignores the kernel threads because it has no effect see dont trace kernel thread syscalls which added this check however this means that a user-space task spawned by call_usermodehelper will run without tif_syscall_tracepoint if sys_tracepoint_refcount __number__ remove this check the unnecessary report from ret_from_fork path mentioned by is no longer possible see see commit fb45550d76bb5 make sure that kernel_thread callbacks call do_exit themselves a kernel_thread callback can only return and take the int_ret_from_sys_call path after do_execve succeeds otherwise the kernel will crash but in this case it is no longer a kernel thread and thus is needs tif_syscall_tracepoint link
4127f696f9641afac8b8a05b9dd3dae48d384e08	regulator fixed use use more compact calls instead of the calls
89c1702da717164fcff633594e130f54dd563499	mtd pxa3xx_nand clean up the pxa3xx timings with the previous modifications lots of pxa3xx specific definitions can be removed
5c29e47e6ac55b63c76999eb5b283a80208726c5	mfd cros_ec_spi warnings fix to silent those cc m in function warning format expects argument of type but argument __number__ has type warning format expects argument of type but argument __number__ has type warning format expects argument of type but argument __number__ has type
a9875d83a0ae57a18f9c9f70c2ac524b81cc2cbe	pci spear rename add_pcie_port pcie_init to spear13xx_add_pcie_port etc the add_pcie_port and pcie_init functions are spear13xx-specific add spear13xx prefix to avoid collision in global name space
89133786f9408d53361874a8c784fff150fc7f7c	uprobes remove remove it is not needed nobody except uses insert_vm_structvma with null and it is wrong again get_user_pages can not succeed before vma_linkvma makes is visible to find_vma and even if this worked we must not insert the new bp before this mapping is visible to vma_prio_tree_foreach for uprobe_unregister acked-by srikar dronamraju link
3691ac4a9c957c2896f8ebfb8a92081301f1682e	libertas fix an error code in probe we accidentally return success instead of a negative error code
6dae14216c85eea13db7b12c469475c5d30e5499	serial sh-sci fix probe error paths when probing fails the driver must not try to cleanup resources that have not been initialized fix this
67317c2689567c24d18e0dd43ab6d409fd42dc6e	arm64 display ipis of online cpus only the non-ipi interrupts are displayed only for the online cpus from show_interrupts in before calling arch_show_interrupts as a result the column headers and the ipi count dont match if any cpu is offline this patch fixes show_ipi_list to display ipis for online cpus only
444c37aeee46db70ce01199863dc046fa68e88b7	asoc fsl_sai constify rate constraints the rate constraints in this driver are shared between all device instances it should not be and is not modified at runtime so make them const while we are at it also change the type of the rates array from u32 to unsigned int while both resolve to the same type u32 is usually used to empathize that the value is for a hardware register or similar which makes it slightly confusing in this context
8bca5d1ebb8bf18187256845ba3aaff5fbc01934	vmxnet3 cleanup tso headers manipulation use existing helpers to clarify skb headers manipulation
40af177efc9385af15c49a40976f71e58e6af418	usb musb ensure in peripheral mode when checking session the change ensures otg is not in a a- state when checking for vbus in peripheral mode musb_start where vbus checking is in can be called in many situations one example is in babble recovery routine in which otg is transitioning from a-host to a-wait-bcon but vbus discharge takes time so could be set to __number__ due to this improper checking then it causes musb_bus_suspend failed which leads to warning log message flooding
6a99a964f6e6af6b6f0d536312722257ae44f812	add parameter of the mclk switch latency time
379585ab5cedda27bb919457acc2441a384353d0	staging comedi comedi_bond remove subdevice pointer math convert the comedi_subdevice access from pointer math to array access
d5c3d84657db57bd23ecd58b97f1c99dd42a7b80	net phy avoid polling phy with phy_ignore_interrupts commit phy fix the use of phy_ignore_interrupt changed a hunk in phy_state_machine in the phy_running case which was not needed the change essentially makes the phy library treat phy devices with phy_ignore_interrupt to keep polling for the phy device even though the intent is not to do it fix this by reverting that specific hunk which makes the phy state machine wait for state changes and stay in the phy_running state for as long as needed
16035d51b3e49e6e90b2e324feb437ed7893b045	brcmfmac remove redundant chip id check in dhd_sdio there is an id table registered to sdio stack which consists of all sdio devices supported by brcmfmac it is not necessary to have an extra check
a060679c6b3da17dc9e95d0500f811de118ec901	hv_netvsc cleanup netdev feature flags for netvsc __number__ adding netif_f_tso6 feature flag __number__ adding netif_f_hw_csum netif_f_ipv6_csum and netif_f_ip_csum are being deprecated __number__ cleanup the coding style of flag assignment by using macro
608c380c304ce017dfddbceff988ffd0a36636d9	virtio do not export u16 and u64 to userspace exports u16 and u64 to userspace use __u16 and __u64 instead
93db1d9e6c96050b74bb2793de8db00cd0afe6ab	mac80211 fix possible out-of-bounds access in the unlikely situation that the supplicant has negotiated admission for the background ac which it has no reason to as its not supposed to be requiring admission control to start with and wed ignore such a requirement anyway the loop here may terminate with non_acm_ac __number__ which leads to an array overrun check this explicitly just for completeness
6d7938f46f89c9773f9396c1d13b20bbc5c6d95b	scsi isci fix null ptr dereference when no firmware is being loaded null orom ptr passed in for verification which caused page fault we will set a default version when we dont have orom struct
feff9f3c9612b2de9c008e207079bb233a9eb492	asoc io remove hw_read operation we now no longer have any users of hw_read in the kernel so remove the code in order to prevent any new users being added users should be using regmap
0c5824083b8ca4aff083dc74024d0bfd46f9da9d	usb phy drop kfree of devm_kzallocs data using kfree to free data allocated with devm_kzalloc causes double frees the coccinelle semantic patch that fixes this problem is as follows expression x x
c23d86ae94b5eda449e71560e9028907abc91764	r8152 remove cancel_delayed_work_sync in rtl8152_set_speed there is no conflict between the work_queue function and rtl8152_set_speed so we dont have to cancel the delayed work in rtl8152_set_speed
0017f447cc01fa499f1d10dec09702d381f13fe0	clk tegra114 add lp1 support when the system suspends to lp1 the cpu clock source is switched to clk_m oscillator during flow the cpu clock source is controlled by the cclkg_burst_policy register and hence this register must be restored during lp1 resume
ee5d874271f2b6a6ff1046aa7a8e41e4d53888d4	arm pxa mark ezx structures as __maybe_unused the ezx platform contains multiple machine descriptors but not all of them use all of the data structures and its possible to disable all of the machines which produces some harmless warnings warning ezx_pwm_lookup defined but not used warning ezx_fb_info_1 defined but not used warning ezx_fb_info_2 defined but not used warning ezx_devices defined but not used warning ezx_pin_config defined but not used this marks all those structures as __maybe_unused to avoid the warnings obviously a configuration that contains the ezx platform but no specific model is a bit silly but it should not cause compile-time warnings
bfe2414aecca03d884f680d5cf1d612c7813ee33	introduce handle local for economy of expression bhelgaas split out from acpi_handle_printk changes
bc985c10f388c0e5fb2cff95ff2220721627fbd8	usb storage ene_ub6250 fix compile warnings fix the following compile warning in function warning may be used uninitialized in this function warning may be used uninitialized in this function
fe2bd75b2290bf6acd4b91312697e445668dd773	pci short-circuit pci_device_is_present for disconnected devices if the pci device is disconnected return false immediately from pci_device_is_present pci_device_is_present uses the bus accessors so the early return in the device accessors doesnt help here
4c38b9c30f78d44c576ca3049577fbd4d5c2acc6	asoc cs35l32 fix define for cs35l32_sdout_3st according to the datasheet the cs35l32_sdout_3st is bit3
879fe32438be9ff1ea2cf44e39e11b58206a76b2	free irq domain in probe failure paths currently the irq domain is not freed once allocated in the case where omap_gpio_probe fails therefore ensure we free the domain if the probe does fail furthermore the local variable ret is not needed and so remove this
c7a2918373983b32db3ca35823d930641747e26f	sony-laptop fix sony_nc_sysfs_store we made this an unsigned long and it causes a bug on __number__ bit big endian systems when we try to pass the value to sony_nc_int_call also value has to be signed because validate returns negative error codes
5f6d71044f4d766c3636b9fd2c43e7c9d71d31af	clk rockchip add clock-ids for rk3228 audio clocks this patch exports related clocks for dts reference
56db1c5f41c2ed0300ca570fea279a7c189c18fb	mcast do not check rv twice in a row with the loop dont check rv twice in a row without the loop rv doesnt even need to be checked make the comment more grammar-friendly
d95618ef0a05236a2642d1a829fffd90de88e5f0	rename ast_init_dram_2300 to ast_post_chip_2300 the function does more than initializing the dram and in turns calls other functions to do the actual init this will keeping things more consistent with the upcoming ast2500 post code
fd5c9d230d2ac8a2594dfd15f0cca678fd7a64c7	smack fix behavior of smack_inode_listsecurity security operation is used for generating list of available extended attributes for syscall listxattr currently its used only in nfs4 or if filesystem doesnt provide the list is the set of null-terminated names one after the other this method must include zero byte at the and into result also this function must return length even if string does not fit into output buffer or it is null see similar method in selinux and man listxattr
65b539bb900f64b9a3f9b761bf0f735dc84e6b70	mfd ucb1x00-core scan drivers in same order theyre registered cosmetic patch to scan the list of drivers in the order that the drivers are registered rather than the reverse order this avoids surprises when drivers get probed in the reverse order and input devices get registered in a different order due to than from boot
f13d4e189d209af0f552e9900acd06ee4a35e601	spi imx gracefully handle null it is possible that is null after spi_bitbang_start this happens if the master has no cs gpios specified in dt check for this case after spi_bitbang_start to prevent null pointer dereference in the subsequent for loop which accesses the field
07028959bcc674dc8ca143323aeab05849a83742	remove call to reservation_object_test_signaled_rcu before wait since fence_wait_timeout_reservation_object_wait_timeout_rcu with a timeout of __number__ becomes reservation_object_test_signaled_rcu we do not need to handle such conversion in the caller the only challenge are those callers that wish to differentiate the error code between the nonblocking busy check and potentially blocking wait
5cc3821b576964513f5532e0ac1efeb52f62ec6c	pull rehashing and unlocking the target dentry into __d_materialise_dentry
a4ed53466a289a4139405bf7190c78a8e9d8debf	mac80211 use list_move instead of using list_move instead of list_del list_add spatch with a semantic match is used to found this problem
fd2b18b4a7bf01453324733a18297ae9a197a4ae	scsi qedf use vsprintf extension using for a dma_addr_t can lead to mismatches use and the address of the dma_addr_t instead
26b7c8270bb79908df07a7e2e68af6a6116505c9	m68knommu switch to gpio init macros in coldfire __number__ init code modify the gpio setup table to use the macros for table init simplifies code and reduces line count significantly
91f6c56152c7d8ab874dbbf8146a6727d4dff426	arm shmobile let kzm9d multiplatform boot with kzm9d dtb let the multiplatform kzm9d support boot with the legacy dts for kzm9d as well as the kzm9d reference dts
995cdd0ebd064156247c983c14e8e7aef23785c8	wil6210 improve debugfs for vring when printing vring on debugfs file vrings software head tail indexes were printed in decimal format while hardware tail in hexadecimal only it is not comfortable to compare indexes in different formats on the other hand hexadecimal output useful to see hardware glitches to serve all purposes print hardware tail in both decimal and hexadecimal formats
071a74930e60d1fa51207d71f00a35b4f9d4d179	add virtual address choosing function to support randomizing the kernel virtual address separately from the physical address this patch adds find_random_virt_addr to choose a slot anywhere between load_physical_addr and kernel_image_size since this address is virtual not physical we can place the kernel anywhere in this region as long as it is aligned and in the case of kernel being larger than the slot size placed with enough room to load the entire kernel image for clarity and readability find_random_addr is renamed to find_random_phys_addr and has size renamed to image_size to match find_random_virt_addr rewrote changelog refactored slot calculation for readability renamed find_random_phys_addr and size argument link
e76415f47f9f4ec4f0289f8194eae0726dc27dfd	staging comedi amplc_pci230 prefer kernel type u64 over uint64_t fix the issues
dbb8894e0c3cf1661d83466faa277a8d436a1cba	greybus order the protocols list add protocols to the global list in sorted order based on their protocol id and then their major and minor version number
10c86babfb21a07272495a968114f677313bea51	mtd get the ecc info from the parameter page for onfi nand from the onfi spec we can just get the ecc info from the field of the parameter page
322146d5d485cddb93761bd2593fbc932399b0a1	staging comedi dont poll_wait on same subdevice twice comedi subdevices that support asynchronous acquisition commands have a wait queue head used for blocking reads or writes and for the poll file operation the comedi device may have several subdevices that support read write commands but each open file object has at most one read subdevice and one write subdevice its possible though rare for those to be the same subdevice if the subdevice supports commands in either direction in that case the poll file operation doesnt really need to do a poll_wait on the same subdevice twice although harmless it wastes a poll table entry check for that and avoid it
f935675f0c07f87da2facc4c144d511e6da48240	change locking for struct_mutex v3 struct_mutex is being locked for every plane in intel_prepare_plane_fb and intel_cleanup_plane_fb require the caller to hold the mutex and only acquire the mutex for each helper call this way the lock only needs to be acquired twice in once for pinning new framebuffers at the start the second time for unpinning old framebuffer changes since v1 use mutex_lock_interruptible instead of i915 variant to prevent a deadlock when called from the reset code changes since v2 clarify struct_mutex is locked by the caller
6c4a057bffe9823221eab547e11fac181dc18a2b	arm omap4 clock data force a dpll on before a relock all dplls except usb are in alwon powerdomain make sure the for usb dpll l3init is turned on before attempting a dpll relock so mark the database accordingly without this fix it was seen that dpll relock fails while testing relock in a loop of usb dpll
92b0ca7cb149d20bd97a2ad88d860745045a77dc	fix stack info leak in mlx5_ib_alloc_ucontext we dont set since its at the end of the struct that means we dont have to copy it to the user
6a60a6a8ea97795a288469c21262522894a1e6db	tools hv represent the ipv6 mask using cidr notation transform ipv6 subnet information to cidr notation
08348995c47ec0e6ad3712c08eb88fb4df2e8180	netronome dont access real_num_rx_queues directly the setting is only available if config_sysfs is enabled so we now get a build failure when that is turned off in function nfp_net_ring_swap_enable error struct net_device has no member named real_num_rx_queues did you mean as far as i can tell the check here is only used as an optimization that we can skip in order to fix the compilation if sysfs is disabled the following netif_set_real_num_rx_queues has no effect
bdc59cf233433ddd2cd671db02bd6b52323ce63d	pnfs pnfs_roc_drain fix a race with open if a process reopens the file before we can send off the then pnfs_roc_drain may end up waiting for a new set of layout segments that are marked as return-on-close but havent yet been returned fix this by only waiting for those layout segments that were invalidated in pnfs_roc
72ea403669c7d49e8c407c61205b6d52438d39ab	mtd nand added nand_shutdown add nand_shutdown to wait for current nand operations to finish and prevent further operations by changing the nand flash state to fl_shutdown this is addressing a problem observed during reboot tests using ubifs root file system nand erase operations that are in progress during system are causing partial erased blocks although ubi should be able to detect and recover from this error this change will avoid the creation of partial erased blocks on reboot in the middle of a nand erase operation
79bbbf8bfe646d63a52dcb1f8272a27adbcae097	is forbid to be ignored in sriov sr-iov requires the preamble
8a87bdddf9335297a88c1d57db51912be8d7f74e	iwlwifi mvm nvm increase max section size section size limitation to __number__ is incorrect nvm file need to support bigger sections in order to support papd tables
2d7fdbe23c990a843177e3bff9a093d2f5fa4e02	arm at91 pit use div_round_closest to compute the cycles until now the pit_cycle computation was dividing the rate by hz rounding to the closest integer but without using the appropriate macro
0369722f024cd374f74eac6d261014403aa27ea2	vlan make vlan_dev_real_dev work over stacked vlans sometimes we might have stacked vlans on top of each other and were interested in the first non-vlan real device on the path so transform vlan_dev_real_dev to go over the stacked vlans and extract the first non-vlan device
3538a5c8ffa37c715029af4a2e384c077558eb18	sctp label off sockets accepted or peeled off sockets were missing a security label selinux which means that socket was in unlabeled state this patch clones the socks label from the parent sock and resolves the issue similar to af_bluetooth protocol family
fb96a796f2b42eb20cfad80c5e7e2702948a0794	parisc wire up execveat syscall
a30a9ea6e21b495372aff549f3dfd63198bd1f45	rocker fix rocker_world_port_obj_vlan_add we were changing return values and accidentally made rocker_world_port_obj_vlan_add into a no-op
65eb70396848e7c10b7466fab75109bd5b1bb9df	arm ux500 remove ssp auxdata pertaining to dma bindings these are now cared for from the device tree
ab62aa931ed3512bc67857a03636756b96c78eae	regulator if a single voltage is set with device tree then set apply_uv otherwise there is no way in the bindings to configure a fixed voltage via software it seems reasonable to assume that if the binding explicitly specifies a voltage we want to actually use that voltage
facd619b8869b308e02104a200abf6f9d7cddcab	fix watermark disabling ilk on ilk disabling watermarks must be done carefully to avoid underruns if we just write __number__ to the register in the middle of the scan cycle we often get an underrun so instead we have to leave the actual watermark levels in the register intact and just toggle the enable bit presumably the hardware takes a while to get out of low power mode and so the watermark level need to stay valid until that time we also have to be careful with the wm1s_lp_en bit it seems the hardware more or less treats it like the actual watermarks numbers and so we must not toggle it too soon just leave it alone when disabling the watermarks
734de249fbe2fbf594c30202a343f0772b6d18fe	tty locate ldisc functions together
42980da2eb7eb9695d8efc0c0ef145cbbb993b2c	media cec initiator should be the same as the destination for poll poll messages that are used to allocate a logical address should use the same initiator as the destination instead it expected that the initiator was which is not according to the standard this also had consequences for the message checks in cec_transmit_msg_fh that incorrectly rejected poll messages with the same initiator and destination
92a3e661bf55457091817c5c346c4313be2508af	scsi osd convert class code to use dev_groups the dev_attrs field of struct class is going away soon dev_groups should be used instead this converts the scsi osd class code to use the correct field
4271b753bb77443f232ff1f96f4530ea2b322fd3	stop calling all the callbacks are gone now
a68809bb8d97f6df3296298e932f07b33e939d00	staging comedi addi_apci_3120 use to report hardware error in apci3120_interrupt_dma use the to report the hardware error and allow the core to the command instead of calling the function directly
142ad5db2b29a1c392e1b14934fae5d161d6c6e7	ib fix typos in infiniband drivers correct spelling typos in comments in
39020710e707a01d80ea6c9e55dad4de93bb4730	omap dss2 remove ctx loss count from only saves __number__ register __number__ in omap3 so the extra overhead from need_ctx_restore co is probably bigger than the time spent saving and restoring those few registers every time so remove the code from and restore context every time dss has been off
100106d7021fe34ba4d0195a519aa5e2ecae82ab	wil6210 fix disconnect __number__ sta in ap when disconnecting single sta in ap it might be that sta in question is already disconnected in this case need to do nothing previously it was mis-interpreted as disconnect all
308f4b044efbfbb2b7d0d076e9dcb7f961f6171b	asoc tlv320aic3x remove unused non-standard headset detection aic3x_set_headset_detection isnt made available outside the driver or referenced within the driver which sparse notices and complains about
3ff25093cbdd04add5c23f1f71f6a2a4ea6b9ec0	ath9k_hw fix duplicate and partially wrong definition of ar_ch0_therm ar_phy_65nm_ch0_therm and ar_ch0_therm were supposed to refer to the same register however they had different srev checks remove the duplicate and use the checks since there were other srev checks present in the only place that uses this this will probaby not affect runtime behavior
f7b42633720deb5ca8f4bcb175c7dc2933057e7f	ensure vl index is within bounds improve the safety of the code and ensure the array cannot be indexed out of bounds when picking the cpu for a given sdma engine
3666eb028827c3a9df942cbc0a16388898c5a686	watchdog nuc900_wdt use functions use functions to make cleanup paths simpler
49f6cba617fef4bc097a291e0dfd028cc7073c52	arm64 handle sys and undef traps consistently if an el0 instruction in the sys class triggers an exception do_sysintr looks for a sys64_hook matching the instruction and if none is found injects a sigill this mirrors what we do for undefined instruction encodings in do_undefinstr where we look for an undef_hook matching the instruction and if none is found inject a sigill over time new sys instruction encodings may be allocated prior to allocation exceptions resulting from these would be handled by do_undefinstr whereas after allocation these may be handled by do_sysintr to ensure that we have consistent behaviour if and when this happens it would be beneficial to have do_sysinstr fall back to do_undefinstr
5bd420009716f3348610fdf9c6307f0db583ba04	misc pti fix tty_port count we now have tty_port for both ttys how this was supposed to change it to have a tty_port for each of ttys
833efc0ed19ce9ed7a84dfd3684eb9d892fe9ded	usb serial invoke dcd_change ldiscs handler the dcd pin of the serial port can receive a pps signal by calling the port line discipline dcd handle this patch allow to monitor pps through usb serial devices however the performance arent as good as the uart drivers so document this point too
6054b9cae24f7ff09e502cea408dad140210681a	use simple or linear irq domain this alters the nomadik pinctrl driver to call irqdomain_add_linear for the dt case so we get all independent from irq numbers in this case call irqdomain_add_simple for the legacy case which allocates the irq descriptors for the nomadik pin controller dynamically
9f0e13546ef5773b7059b531a667ec47a5f897ee	enable wiphy device to asynchronously now pm core supports asynchronous mode for devices during system and the power state transition of one device may be completed in separate kernel thread pm core ensures all power state transition timing dependency between devices this patch enables wiphy device to asynchronously this can take advantage of multicore and improve system speed
bbd3a8eee82a2a6f4aa1cce60ccb014f25e5c560	nfsv4 dont check may_write access bit in open dont check may_write as a newly created file may not have write mode bits but posix allows the creating process to write regardless this is ok because nfsv4 open ops handle write permissions correctly the access in the open compound is to differentiate read v exec permissions fixes a regression due to commit nfsv4 add access operation to open compound
2842d4cc729882489ae73dae48dfc63f5ce404ba	iio adc mcp3422 use devm_iio_device_register devm_iio_device_register simplifies the code
ed9dfed62c6c057c1c51295d4373ae55c9284a10	xtensa remove unused symbols
c4d6618e882c64ed43a8d5bd58f9cd6b4810cef1	usb gadget udc udc-xilinx dont print on enomem all kmalloc-based functions print enough information on failures
baf05aa9271bdbc07d3160035a231abc5fbd429a	bug introduce build_bug_on_invalid macro sometimes we want to check some expressions correctness at compile time voide or if e can be dangerous if the expression has side-effects and gcc sometimes generates a lot of code even if the expression has no effect this patch introduces macro build_bug_on_invalid for such checks it forces a compilation error if expression is invalid without any extra code cast to long required because sizeof does not work for bit-fields
3e8af2e1cd214363f7de38544adea75c8f5e920c	arm ux500 remove tps61052 high power white led driver atag support its time to remove all atag support from ux500 and rely solely on device tree booting this patch is part of that endeavour
489dc48e7583d825304b0aff3fc17e706627b3c8	bluetooth return proper mgmt state when le pairing connection failed mgmt_status_busy should be returned when le pairing cannot be started due to another outgoing connection attempt is ongoing
bf7d620abf22c321208a4da4f435e7af52551a21	rxrpc dont request an ack on the last data packet of a calls tx phase dont request an ack on the last data packet of a calls tx phase as for a client there will be a reply packet or some sort of ack to shift phase if the ack is requested openafs sends a requested-ack ack with soft-acks in it and doesnt follow up with a hard-ack if we dont set the flag openafs will send a delay ack that hard-acks the reply data thereby allowing the call to terminate cleanly
8c6d59ee3509acd474365c34db291b950d2e66bf	cfg80211 fix station change if tdls isnt supported larry noticed and bisected that commit df881293c6ba9a12868491a717b25 cfg80211 pass tdls peers information during set_station broke secure connections this is is the case only for drivers that dont support tdls where any kind of change even just the change of authorized flag that is required for normal operation was rejected now to fix this remove the checks i have some patches that will add proper verification for all the different cases later
e78ade0a2f50fd1a5254d8c801dbb37f46a85e12	gpio merrifield set default handler to be handle_bad_irq we switch the default handler to be handle_bad_irq instead of handle_simple_irq which was not correct anyway
54eb72c05f7731b4b148da47419b90a5f2108036	btrfs remove unnecessary filemap writting and waiting after block group relocation we have commited transaction before remove redundant filemap writting and waiting here it can speed up balance relocation process
f2fe1bc90016966ca2423e2bd84e37c753b852e6	staging slicoss fix bare use of unsigned fix warning about prefer unsigned int to bare use of unsigned
ed00f64346631dff035adfb9b0240daaa8b46c4e	rwsem more agressive lock stealing in rwsem_down_write_failed some small code simplifications can be achieved by doing more agressive lock stealing when rwsem_down_write_failed notices that there are no active locks and thus no thread to wake us if we decided to sleep it used to wake the first queued process however stealing the lock is also sufficient to deal with this case so we dont need this check anymore in try_get_writer_sem we can steal the lock even when the first waiter is a reader this is correct because the code path that wakes readers is protected by the wait_lock as to the performance effects of this change they are expected to be minimal readers are still granted the lock rather than having to acquire it themselves when they reach the front of the wait queue so we have essentially the same behavior as in rwsem-spinlock
eea7c7036e73f661accf297e4b1630f0a48e611e	staging slicoss free io remapping on failure make sure iounmap is always called after ioremap when module loading fails also remove a call to release_mem_region because that region is never reserved in the first place fixes the following issue reported by coccinelle error missing iounmap ioremap on line __number__ and execution via conditional on line __number__
ac08de32d2e2b2b56bfe85720ec9e0b06e75350a	usb remove junk from store_remove_id retval is __number__ and carefully assigned and tested as non zero this is not useful while we are at it remove some other bogus initialisation in the function
4a8dece21eea0ad6aca442272673d48693cd93b4	fix dpms standby and suspend mode handling pch platforms and vlv should map dpms standby and suspend modes to off but due to a buggy reversed comparison this is done on pre-pch platforms instead bugzilla
7ad39395ab1394fc6fc8bc3693d6055ea173e226	nfc add nfc_attr_rf_mode when sending device netlink properties this is useful when getting devices to know if theyre in target or initiator mode
645e27b05203d1535819390bc40660c1669e6093	arm s3c24xx fix gta02 build error the gta02 has always been broken in the case when config_pcf50633_adc is not used since gta02_charger_worker then passes a nonexisting variable into the pcf50633_mbc_usb_curlim_set function this addresses the obvious typo by using the variable that is used everywhere else in this file
7ae25994e02e7cc93cf5a17333cd962fbf48309d	staging rtl8723au dont put parenthesis around constants
627cc4add53c0470bfd118002669205d222d3a54	net diag slightly refactor the inet_diag_bc_audit error checks this simplifies the code a bit and also allows inet_diag_bc_audit to send to userspace an error that isnt einval
40d3bc19667337d4cbad0075d048261fcbe39117	regulator act8865 remove error variable in act8865_pmic_probe simply use ret variable instead also remove unneeded initialize for ret variable
21ad833075801a7cd81b5ef1604ffc6c600e5ff9	fix races in gen4 page flip interrupt handling use the gen3 logic for handling page flip interrupts on gen4 unfortuantely this kills the stall_check since that looks like it can easily trigger too early with the current logic the stall check would kick in on the first vblank after the flip has been submitted to the ring if the cs takes longer than that to process the commands in the ring the stall check will cause the page flip to be complete too early that doesnt sound like a very good idea something better should be deviced if we still need the stall check for now mark i915_pageflip_stall_check as unused v2 fix irq enable_mask and add __always_unused chris wilson references
15484377f597ca98ee84de87caa13667ea68bb14	btrfs fix unprotected device list access when getting the fs information when we get the fs information we forgot to acquire the mutex of device list it might cause the problem we might access a device that was removed fix it by acquiring the device list mutex
f92c70ad28341b6430c64332521428768058dd17	media tvp5150 identify it as a media_ent_f_atv_decoder the tvp5150 is an analog tv decoder identify as such at the media graph or otherwise devices using it would fail that avoids the following warning __float__ usb entity type for entity tvp5150 was not initialized
475340846f4c9c307f2de03cb4fcc486e267e974	tty deprecate ldisc method
4eef520d2499e0c5cfed65f4a91fb0f4663a26ec	staging rtl8712 use del_timer use timer api function del_timer instead of driver specific function _cancel_timer_ex as it is a standard way for deactivating a timer this is done using coccinelle and semantic patch used for this is as follows expression x _cancel_timer_ex del_timer
2017c0bff8ba79ea527361adbe19471e174775d6	thp remove wake_up_interruptible in the exit path add the check of kthread_should_stop to the conditions which are used to wakeup on khugepaged_wait then kthread_stop is enough to let the thread exit
247b1447b6ccb2890cefc370f8e204592a70774d	mm memcontrol fold having these functions and their documentation split out and somewhere makes it harder not easier to follow whats going on inline them directly where charge moving is prepared and finished and put an explanation right next to it
27bf90bf0690f55c3679bcc4c325823cf1cfd19d	perf tools fail properly in case pattern matching fails to find tracepoint currently we dont fail properly when pattern matching fails to find any tracepoint current behaviour perf record sleep __number__ warning event parser found nothinginvalid or unsupported event run perf list for a list of valid events usage perf record or perf record this patch change perf record sleep __number__ event syntax error unknown tracepoint error file not found hint perhaps this kernel misses some config_ setting to enable this run perf list for a list of valid events usage perf record or perf record link
3453ca9e4f51a0e6865d303f4e428cb6f630594f	arm shmobile r8a7790 add adsp clocks add the adsp clocks to the cpg and mstp5 nodes of the r8a7790 device tree based on the original patch by konstantin kozhevnikov
990810b035b6f151085595c7dadf55fe23e65bbf	mfd twl6040 use functions use functions to make cleanup paths more simple
6ae0516b8a50ece5d766be608a305707e0450060	block cfq fix empty queue crash caused by request merge all requests of a queue could be merged to other requests of other queue such queue will not have request in it but its in service tree this will cause kernel oops i encounter a bug_on in cfq_dispatch_request with next patch but the issue should exist without the patch
8016bcbc380f952bfccb82fde3bb8b4b9cbd6400	platform x86 chromeos_laptop add taos tsl2583 device the samsung series __number__ chromebook is equipped with a taos tsl2583 light sensor instatiate it here
e0a6104e066595bcf791381a23b568ab0a890707	usb dwc3 dwc3-omap return probe_defer if extcon is missing and found in dt due to inter dependencies of i2c and extcon by the time dwc3 checks for extcon device its not registered especially in case of j6 in o5 the vbus regulator save us from getting to this point so for tiime being return probe_defer if extcon is enabled in dt
60abbb6ee6efe800ffcf9d5a98666f927b75dd0e	wil6210 fix recovery after scan timeout scan timeout treated as indication for firmware error and should be handled in the same way recovery state machine does not perform as designed because its state is not updated in case of scan timeout fix is to set recovery state machine into the proper state
31d4b761896101660b3efe01816b63d9814755eb	ima new helper file_inodefile replace with the new file_inode helper function
51f31cb3a22da0fdae69052a98d976fb4ff5857d	arm davinci dm644x improve readability using macro replace the vpss base address magic number with the define dm644x_vpss_base to improve readability while at it fix the indentation done using spaces in this part of code
c14688ea248c5ddfb6b8b97151de0a8620ba4a68	ocfs2 clean up an unused variable wants_rotate in ocfs2_truncate_rec clean up an unused variable wants_rotate in ocfs2_truncate_rec
090fc2e2cf6a2763f609af6f128a812d5051d935	scsi qla2xxx clean up qla24xx_iidma remove dead code and simplify a pointer computation
b6c5ef6f6d3e46d6200b141c30ac000a11b851df	serial sh-sci make probe fail for ports that exceed the maximum count the driver supports a maximum number of ports configurable at compile time make sure the probe method fails when registering a port that exceeds the maximum instead of returning success without registering the port this fixes a crash at system suspend time when the driver tried to suspend a non-registered port using the uart core
52a740454f0e417d5637b45ecbc46fe3edbf4d51	staging rtl8192e rename rtl8192_hard_data_xmit use naming schema found in other rtlwifi devices rename rtl8192_hard_data_xmit to _rtl92e_hard_data_xmit
d62a3dcd4d75b1713d12697afdbffaf9a9da8f43	asoc rsnd fixup dai remove callback operation rsnd driver is using which are using mod base operation these mod are supporting probe and remove callbacks current rsnd_probe should call remove if probe was failed since probe might be having dmaengine handle some mods remove callback might be called without calling probe but it is no problem because remove do nothing in such case so all mods remove should be called when error case of rsnd_probe and rsnd_remove
408ef7e18097810f160629447e6ebe979a0b4282	asoc max98371 delete unnecessary assignment for the field owner the field owner is set by the core thus delete an unneeded initialisation generated by
874b300a6a0bfe97225ed1f8648fa92238e4d9e9	arm fix booting if no timer parent clock is available when bringing up a new soc we needlessly prevent booting at timer init if timer clock_set_parent fails this can fail if the system is booting on bootloader configured pll values until the clock framework driver for the pll is implemented lets just warn instead this will provide helpful information for anybody bringing up a new soc what needs to be fixed this allows to boot dm814x thats still missing the pll driver
ce3ff36be91a85d87f138794dbbd704fb99320c2	fimd move window protect code to only the update bit in the crtcs so all planes are really committed at the same time
eafa6abd99eadb8971c01a4c591295ac4d8d0a9b	remove a duplicate condition we verified that mlx5_flow_context_action_count was set on the first line of the function so we dont need to check again here
f79ed82da494bc2ea677c6fc28b5439eacf4f5cc	kvm trace fix exit decoding trace_kvm_userspace_exit has been missing the kvm_exit_watchdog exit
5cc8d536c21a17e301e6f3e8c70a678b5f4b419f	wake up the card if necessary during gem callbacks the failure paths if we fail to wake the card are less than desirable but theres not really a graceful way to handle this case currently ill keep this situation in mind when i get to fixing other vm-related issues
ebb75c0bdba238013976b53e256f8d13216304e4	asoc rockchip i2s adjust devm usage remove use of snd_soc_unregister_component in remove function as devm_snd_soc_register_component in probe function automatically handles it also convert call of snd_dmaengine_pcm_register to managed resource function devm_snd_dmaengine_pcm_register and remove usage of snd_dmaengine_pcm_unregister in probe and remove functions
4f329d9fbab630af44db2f787eb79ca52e6ba22e	asoc intel skylake fix dsp resource de-allocation in pre pmd of widget handler dsp resources are allocated after the creation of dsp pipe and modules and in post pmd dsp resources are destroyed if there is any failure in pipe or module creation in pre pmd pcm trigger fails and finally post pmd gets called and dsp resources are freed without getting allocated fixes the dsp resource de-allocation by allocating the resource before creation of pipe and module in pre pmd and in post pmd free the resources
81b8c0117d88adb9c72b3fa5feff0d1efac816bd	i40e remove unnecessary delay aint nothing gonna break my stride nobodys gonna slow me down oh no i got to keep on moving this was originally put in for debugging just-in-case purposes and never removed change-id ic12c2e179c3923f54e6ba0a9e4ab05d25c3bab29
4e898ce7d9221db090e6c4e7f289760930dbda6e	mtd fsl-quadspi improve read performance by increase ahb transfer size set ahb transfer size to which improved the read performance add ahb_buf_size field in fsl_qspi_devtype_data to denote the size for different soc before dd records in records out __number__ bytes __number__ mb copied __float__ s __float__ after dd records in records out __number__ bytes __number__ mb copied __float__ s __float__
a58f24495d072c5cf2177a5343dd8d751383fdc7	f2fs add missing inmem_revoke trace enum definition
ff62b95894b88622dd6373730d57a8a7e126f687	asoc rt5670 staticise non-exported symbols
cb76b1ca9174aa29d4c7c0f4aef113be203b600c	spi rspi make qspi_set_send_trigger return unsigned int qspi_set_send_trigger returns an unsigned value so make it return unsigned int update the loop variables qspi_trigger_transfer_out_int to match the above
fc59d5bdf1e3dca0336d155e55d812286db075ad	pkt_sched fq clear time_next_packet for reused flows when a socket is we need to clear time_next_packet or else we can inherit a prior value and delay first packets of the new flow
c1cd2b96e2475437be1f1cd4ec757ef814228531	media exynos4-is initialize the isp subdev field set the subdevs owner module so the exynos4_fimc_is module cannot be unloaded when the fimc-is driver is in use
f57a1f3c14b9182f1fea667f5a38a1094699db7c	fix lvt offset configuration for thresholding for processor families with the scalable mca feature the lvt offset for threshold interrupts is configured only in msr __number__ and not in each per bank misc register as was done in earlier families obtain the lvt offset from the correct msr for those families link
9e58c36c7796736362bf1a3fbc7a8376e07e9357	staging wilc1000 remove unnecessary comments this patch removes unnecessary comments because enum cfg_cmd_type shows each command type without it
3c64306183e2215671c70b378e4d445a46a96bcf	staging comedi remove unnecessary printk noise the timeouts will return the printks are just added noise remove them
06f1f864d4ae5804e83785308d41f14a08e4b980	nfsd4 hash lockowners to simplify release_lockowner hash lockowners on just the owner string rather than on owner inode this makes the owner-string lookup needed for release_lockowner simpler currently its doing at a linear search through the entire hash that may come at the expense of making owner inode lookups more expensive if a client reuses the same lockowner across multiple files we might add a separate lookup for that
d702ffd4d1df73b9c620af1654af42ff5b8d5c09	regulator anatop fix module autoload for of platform driver this platform driver has a of device id table but the of module alias information is not created so module autoloading wont work
da225498d97565b6f25ed28ebdf0fecdf3a5ca5c	pm8001 cleaning up uninitialized variables there is a risk that the variable will be used without being initialized this was largely found by using a static code analysis program called cppche
2a72c31ee4aa31b6a762390e4811a0edf5eefcef	ixgbe fix __ixgbe_notify_dca bail out code the way __ixgbe_notify_dca was currently set up it would not be possible to add a requester both cases of the ixgbe_flag_dca_enabled bit being on and off would lead to the function exiting for a dca_provider_add
4f0302277718810494f8c618f28d1edb33af859a	qlcnic fix qlogic interface for virtual nic configuration o application expect vnic number as the array index but driver interface return configuration in array index form o pack the vnic information array in the buffer such that application can access it using vnic number as the array index
a4bc1f57fd911424a2b6101e096c43d2b8a82e7f	pinctrl st use const qualifier when required this patch adds const qualifier where applicable
c1ff840d21208aff8cea18c0ae052c536d74f53e	pull hash constants into hash__alloc_context_id the min and max context id values used in alloc_context_id are currently the right values for use on hash and happen to also be safe for use on radix but we need to change that in a subsequent patch so make the ids parameters and pull the hash values into hsah__alloc_context_id
8b5d6b0a4353d0e3517947f894be215750d681bb	usb dwc3 host align on host device name pci uses xhci-hcd so lets use the same device name to avoid confusion
3463d795bf0f8d9b32d4deabaaffcb81a1abb92b	usb gadget constify of_device_id array of_device_id is always used as const see and open firmware functions
7a3304ea5c783fba6b68c62e17d041dfe9e57d9c	asoc codec duplicated callback function goes to component on wm8978 codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
80a75f7c44c8fd8cf6b271dc20801846bd630349	swf screatch registers need an offset on vlv
52e9689e4ef070eff1e0f9e6e84a8451b86813b5	i40e move error message to debug level there is an error coming back from get_phy_capabilities that does not seem to have any functional implications we will continue looking into why this error message is occurring but in the meantime we will move it to debug to avoid confusion change-id i9091754bf62c066ddedeb249923d85606e2d68ed
7969943789df1196faa9ba67518d83fd93e4f9f6	xhci add the meaningful irq description if it is empty when some xhci host controllers fall back to use the legacy irq the member irq_descr of the usb_hcd structure will be empty this leads to the empty string of the xhci host controller in here is the example the irq __number__ is the xhci host controller cpu0 __number__ __number__ io-apic-edge timer __number__ __number__ io-apic-edge rtc0 __number__ __number__ io-apic-fasteoi acpi __number__ __number__ ir-io-apic-fasteoi __number__ __number__ ir-io-apic-fasteoi after applying the patch the name of the registered xhci host controller can be displayed correctly here is the example cpu0 __number__ __number__ io-apic-edge timer __number__ __number__ io-apic-edge rtc0 __number__ __number__ io-apic-fasteoi acpi __number__ __number__ ir-io-apic-fasteoi __number__ __number__ ir-io-apic-fasteoi tested on
6d10aab8f0658d624e5aafcd52b70afa23a75e5e	tighten security around surface sharing v2 if using legacy non-prime surface sharing only allow surfaces to be shared between clients with the same master this will block malicious clients from peeking at contents at surfaces from other possibly vt-switched masters v2
968889771749d8e730d794deed2bd2e363a98a54	kvm emulate simplify bitop handling memory is always the destination for bitop instructions
81cbcbc2d810c0ce49fba81f864302e1afe5ff27	fix wrong initialization when sysctl_min_unmapped_ratio changes before resetting min_unmapped_pages we need to initialize min_unmapped_pages rather than min_slab_pages link
b298e98ef6ab9c4279b427db717a1624ef722751	gpu host1x mipi set mipi_cal_bias_pad_cfg1 register during calibration sets the internal reference level for drive pull- down to the value specified in the tegra trm
9ef2224d9f2e684da016c8a29ecf6dc548b66e3e	extcon arizona stop microphone detection if we give up on it there should be no point in continuing to try to detect a microphone any more so stop doing so
91ea74e9ec5c584eef1dcd69554b8315c1ebb0d9	dma shdma tidyup callback chunk finder current shdma is using last which indicates last desc which needs to have callback function but that descs chunks is always __number__ we can use it as finder reflown changelog for readablity
9076a75f8e0f23ab64e2f34eb6be144e81f00a3e	f2fs introduce function read_raw_super_block introduce function read_raw_super_block to hide reading raw super block and the retry routine if the first sb is invalid
b9e0bda3cd325b55f336efb751736163f62abded	always calculate wm values based on a framebuffer the specs for gen2 say that the watermark values should always be set assuming a display mode even though the display mode may be __number__ or __number__ bpp
abb0bdad0c2c2aad5fbd5049b8c3bb71878ccda9	staging media lirc fixed quoted string split warning this patch fixes quoted string split across lines warning in
74b8031307c5d33d36742c26dd0921991bd5a255	arm imx6q clock and kconfig update for pcie support update imx6q clock initialization and kconfig for pcie support
9d18cdbb09a49b4565b84406a9eb0d0b67311da7	ram impl does not have an engine
692373e128f16da708ec6ddf80ee5b5bb3761ef9	usb musb blackfin use module_platform_driver macro this patch removes some code duplication by using module_platform_driver
fcba212de9bdf1016d981c355df29ab169da8eae	spi clps711x provide label argument for devm_gpio_request the label argument was removed by commit spi clps711x use devm_gpio_request add it back this makes it easier to know the gpio usage in also remove unnecessary gpio_is_valid checking devm_gpio_request returns error if the requested gpio is invalid
a4fab0449eb2213e426bf210126fa0f1129ca9a3	use pci_flags pci_probe_only instead of arm-specific flag
1dd6d7ca9d062721ae37388900a322a4b959e939	btrfs introduce ratelimited variants of message printing functions
6913d61be5757dab2327a64a95d87caf7cca0632	batman-adv place kref_get for tvlv_container near use it is hard to understand why the refcnt is increased when it isnt done near the actual place the new reference is used so using kref_get right before the place which requires the reference and in the same function helps to avoid accidental problems caused by incorrect reference counting
3c7df87dad065a4656b13115593c59c8a324a108	f2fs dont try to split extents shorter than f2fs_min_extent_len since only parts of extents longer than f2fs_min_extent_len will be kept in extent cache after split extents already shorter than f2fs_min_extent_len dont need to try split at all
7d65cf10e3d7747033b83fa18c5f3d2a498f66bc	unfuck broken by commit e6084d4 scanargs del never returns s the empty field results in s __number__ restore the correct checks and move nul-termination into scanarg while we are at it incidentally mixing coding style cleanups for small values of cleanup with functional changes is a bad
16757372ffa5ee0ef7e82f73a6adbb054a434a13	xen fix annoying compile-time warning commit cb6b6df111e4 kexec add quirk for xen __float__ and shutdown watches added the xen_strict_xenbus_quirk function with an old declaration without proper typing causing gcc to rightly complain warning function declaration a prototype because we really dont live in caves using stone-age tools any more and the kernel has always used properly typed ansi c function declarations so if a function doesnt take arguments we tell the compiler so explicitly by adding the proper void in the prototype im sure there are tons of other examples of this kind of stuff in the tree but this is the one that hits my workstation config
30225ed5ca9e8f713fe8e92859f698c5e82a429c	alsa fireworks fix specifiers in format strings for propper output use for loop counter and for device capabilities this is a supplemental patch for hans wennborgs patch
128465ca7c0775609b1c24f66cd6bddac5f59c9b	fix reversed if condition in interrupt mode this condition is used to determine __number__ bits or __number__ and __number__ bits transfer obviously it is reversed
0fb54e50562d8d6f4b1a4517ba9783a9c7c5c2b7	vfs spread struct mount attach_recursive_mnt
ebda780bce8d58ec0abab157397c9e099c41a05f	raid5 update analysis state for failed stripe handle_failed_stripe makes the stripe fail eg all io will return with a failure but it doesnt update stripe_head_state later handle_stripe has special handling for raid6 for handle_stripe_fill that check before handle_stripe_fill doesnt skip the failed stripe and we get a kernel crash in need_this_block this patch clear the analysis state to make sure no functions wrongly called after handle_failed_stripe
f95321f33af8b75cce171ba18e5fa04ed1fcb88f	staging comedi s626 fix async command hookup only set the sdf_cmd_read subdev_flag if the irq was sucessfully requested remove the unnecessary sanity check of in s626_ai_cmd this callback is only hooked up if the irq is available
ddc04ae77f6ed8ba60c2387536eeb685e9f5e856	usb serial keyspan fixed space near open parenthesis changes to conform with script space near open parenthesis removed __number__ errors
92e396270fea0a787ea848880565fb14cfb20f18	staging rtl8723au rtw_resume release semaphore before exit on error
628d47ce98d50860d4fc1eef250126dd50622a89	thp skip file huge pmd on copy_huge_pmd copy_page_range has a check for dont copy ptes where a page fault will fill them correctly it works on vma level we still copy all page table entries from private mappings even if they map page cache we can simplify copy_huge_pmd a bit by skipping file pmds we dont map file private pages with pmds so they only can map page cache its safe to skip them as they can be re-faulted later link
36683aab90373afd0cff0935bf886ebe6c7b0de6	i82975x_edac test nr_pages earlier to save a few cpu cycles avoid test nr_pages twice and initializing some data that wont be used cleanup patch only
f589b3e0408ccebfac98f6c2eb38d445a9423e7c	usb uhci dont allocate frame list atomically uhci_start is executed one time during usb_add_hcd call and by default uhci frame list is allocated from atomic dma pool do non-atomic allocation of and free some space in coherent atomic dma pool
1f74714f1e34a84fe4ef2a6d9b76c20794fb5dcf	remove unnecessary null test before kfree fix checkpatch warning warning kfreenull is safe this check is probably not required
188f677f84e935f83e3d539d6e8808006f6ac62f	xtensa needs to be reset on rt_sigreturn
f2e0a0b292682dd94274d6793d76656b41526147	block make wbt_wait definition consistent with declaration
8680441caa5465a2cd87b6be857be4378df46700	f2fs add req_meta about metadata requests for submit adding req_meta for all the metadata requests can help in improving the fs performance if the underlying device supports tagging so when considering the submit_bio path for all the f2fs requests we can add req_meta for all the meta requests as a precursor to this change we considered the commit mmc data tag support
c45ee4ff1f66b2a02f51b8a2c1c3dcfd7faefab0	wlcore change the wait for event mechanism wlcore needs to wait for certain events for example for roc complete event usually the events are received from the fw very fast therefore wlcore can poll with a short delay and if after a second the event was not received yet poll with a long msec delay this implementation is similar to the sending of commands to the fw empirically the change reduced the wait for roc event from to of usecs replace with usleep_range arik
a1178ca06213ba937b20d3d32102f64c15dd9a9d	drm crtc_helper use list_for_each_entry list_for_each_entry_safe is for walking a list safe against removal of entries here no entries are removed so use list_for_each_entry
15026c9eb61e205b08a60dc4b7fae3689d9f36c5	scsi lpfc fixed unassigned variable in els timeout message
0ebc1c25ca2921f6e9becb9b3e6ea3ee2ffc8aaf	mfd aat2870-core stop using obsolte simple_strtoul soothes checkpatch warning warning simple_strtoul is obsolete use kstrtoul instead file addr simple_strtoulstart __number__
8d08503c130e96e3794f66fe47053051460b1584	ceph remember subtree root dirfrags auth mds remember dirfrags auth mds when its different from its parent inodes auth mds
227383f8c28ea9e53d958801790d0e2e8f985d08	staging typec fusb302 fix module autoload if the driver is built as a module autoload wont work because the module alias information is not filled so user-space cant match the registered device with the corresponding module export the of and i2c device id table entries as module aliases using the module_device_table macro before this patch modinfo grep alias after this patch modinfo grep alias alias alias alias
d6727fe3850de741b9a64e4a7069b536e380e2c6	vxlan capture inner headers during encapsulation allow vxlan to make use of tx checksum offloading and tx scatter-gather the advantage to these two changes is that it also allows the vxlan to make use of gso
725a8fe3126e3d384cb51fc1029a4a92b0b8e5f5	arm omap3 correct hwmod dmtimer sysc register declarations currently the omap3 hwmod data defines two tiocp_cfg register structures referred to as the sysc register in the hwmod data where timers __number__ __number__ and __number__ use one of the defintions and the other timers use the other definition for omap3 devices the structure of the dmtimer tiocp_cfg register is the same for all __number__ instances of the dmtimer please note that this is a difference between omap3 and omap4 and could be the source of the confusion for omap3 devices the dmtimer tiocp_cfg register has the fields clock-activity emufree idlemode enwakeup softreset and autoidle for all __number__ timers therefore remove one of the sysc register definitions for the dmtimers and ensure the appropriate register fields are defined for all dmtimers
f4042c068ae53625e4a9f39543c2693d07a4e14c	usb wusbcore send keepalives to unauthenticated devices this patch modifies the wusb device disconnect timer code to send keepalives to all connected devices even if they are not authenticated this fixes a problem where unauthenticated devices that lose their connection before they are authenticated will stay in the device tree forever more importantly devices in this situation will never relinquish their port on the root hub so eventually all root ports will be taken up and no other devices can connect a comment in the existing code states that there are some devices that may not respond to keepalives if they have not been authenticated that comment is about __number__ years old and i dont know of any wusb devices that act that way either way any buggy devices that may still be around will continue to work as long as they can transition to the authenticated state within the wusb loa timeout of which is not unreasonable to expect
54823af9cd529c00f0e9a9e12ea29159ac401894	clk qcom always add factor clock for xo clocks currently the clock drivers do not register the xo clocks so we should always add factor clock when we later add xo clocks support into the drivers we should update this function to skip registration by doing so we avoid any dt dependencies
a4188beee59763b3507939968677776561adbba5	avoid build warning arm allmodconfig gained a new warning when dma_addr_t is wide in function arm_smmu_iova_to_phys_hard warning right shift count width of type this changes the calculation so that the effective type is always
69ea6405980f217557b6a58f70ff60d8d88519a5	lib fix generic strnlen_user for big-endian machines the aligned_byte_mask definition is wrong for big-endian machines the part of the definition assumes a long is __number__ bytes this fixes it by using bits_per_long __number__ instead of tested on and powerpc
9062155de0dfdc5cdfd38caf09d7f14b1833a2ca	qxl limit monitor config read retries when reading the monitor config fails dont retry forever if it fails ten times in a row just give up to avoid the driver hangs also add a small delay after each attempt so the host has a chance to complete a partial update
f37d6e701f2a3a04e66690397340a6417f6e053f	can pcan_usb_core fix memory leak on failure paths in peak_usb_start tx and rx urbs are not deallocated if something goes wrong in peak_usb_start the patch fixes error handling to deallocate all the resources found by linux driver verification project
9395a09d05a23bb313cd20c99fb234f308d948b3	l2tp enable automatic module loading for l2tp_ppp when l2tp is configured as a module requests for l2tp sockets do not result in the l2tp_ppp module being loaded fix this by adding the appropriate module_alias to be recognized by pppoxs request_module call
4a4ed3f96bc125f376d83f3d29aef6bb2780c10b	staging comedi mpc624 remove unnecessary printk noise the ai read timeout will return the printk is just added noise remove it its also not necessary to set datan __number__ when the read timesout remove that also
85054b2153f18eac16df9ff88913c98adea6a23e	alsa usx2y remove an unneeded check the test here is always true because is an array not a pointer also its bogus because the intent was to test if instead of if anyway usb_kill_urb and usb_free_urb accept null pointers so we can just remove this
6e1d1f336e2103b31f1cecb63bb791427af7b9ec	staging comedi comedi_test ao subdevice does not support async commands the comedi_subdevices array is kzallocd so the async command callbacks do not need to be set to null when the analog output subdevice is initialized also remove the initialzation of the subdevice len_chanlist since this value is only used by the async commands the core will default it to __number__
6bd5e82b099c3d633905098b3c0af808ced73d85	cachefiles name i_mutex lock class explicitly just some cleanup and note the caller of this function may for example call vfs_unlink on a child so the __number__ i_mutex_parent really was what was intended here
1f17fcd07bb906d34b73ca11fbed01dcc2c0cf2f	gma500 oaktrail_hdmi_i2c_handler base should be __iomem
0b5154fb9040cca94e7d9893384c0e78bfe2d296	timekeeping simplify tai updating from do_adjtimex since we are taking the timekeeping locks just go ahead and update any tai change directly rather then dropping the lock and calling a function that will just take it again
27a340f6b206dd2a0208d3bc4605c0708b55d7b4	correct external device configuration shift the external device configuration was incorrectly shifted to byte __number__ of the __number__ bit dc_host_comm_settings instead of byte __number__ this patch corrects the shift and provides the cable capability information in byte __number__
97fbfbf40b678b95551276e9413517ba7858dba7	drm add missing break in the command line mode parsing code as we parse the string given on the command line one char at a time it seems that we do want a break at every case
f6e76055ba778c56716ba79e106db28297775e87	scsi hpsa retry commands completing with status of unsolicited_abort in a shared sas setup target devices may be reset by one of several hosts and outstanding commands on that device will be completed to corresponding hosts with status of unsolicited_abort such commands should be retried instead of being treated as errors also fixed a nearby spelling error
76ca1c2cd8fc0b8764c6360263e2fbca43495ab2	asoc intel mark cht machine driver with nonatomic trigger the dsp messages are sent with nonatomic context which include trigger messages so mark the driver as nonatomic
679b16073008cc536e85e2773e67234b596fb62e	team ab walk through port list non-rcu since is being held _rcu variant make no sense
d49524d3e8406e3b858650abcf846531a2104120	wlcore resume only if sta is associated mac80211s resume callback might get called even if the sta is not associated but only up the resume sequence in this case results in configuring the wake-up conditions of a non-started role which causes fw assertion fix it by bailing out if the sta is not connected like we do on suspend
0e90ad9bfdcc8835945ccb49f39c21ff3cb0b785	qlcnic dont use kzalloc unncecessarily for allocating large chunk of memory driver allocates a large chunk of temporary buffer using kzalloc to copy fw image as there is no real need of this memory to be physically contiguous use vzalloc instead
c164b8381496ca797c37671fe510a264412ccae5	net sctp minor remove variable in sctp_init_sock its only used at this one time so we could remove it as well this is valid and also makes it more that in case of error the is null here for the sctp_destroy_sock check that was recently added
357c4774b5b08878d980847f496af38869e7aad0	tipc correctly handle releasing a not fully initialized sock commit f2f9800d4955 tipc make tipc node table aware of net namespace has added a dereference of before making sure its not null which makes releasing a tipc socket null pointer dereference for sockets that are not fully initialized
223654355c4eb35f890233e6a52b0f8d79bc3b44	can ifi fix rx and tx id mask the rx and tx id mask for is __number__ bits wide this patch fixes the incorrect mask which caused the can ids to miss the msbit both on receive and transmit
ce8fad9a1f09009ec3918a99685d9e3176f50ce3	mwifiex fix use-after-free for fw reinit errors if we fail to reinit the fw when resetting the device in the synchronous version of mwifiex_init_hw_fw mwifiex_fw_dpc mwifiex_fw_dpc will tear down the interface and free up the adapter but we dont actually check for all failure cases of mwifiex_fw_dpc so some of them fall through and dereference with a freed adapter causing a use-after-free bug in any case mwifiex_fw_dpc will always signal fw completion in the error or success case so at best this was repeat work lets not do it
92bac83dd79e60e65c475222e41a992a70434beb	input alps non interleaved v2 dualpoint has separate stick button bits non interleaved v2 dualpoint touchpad stick combos have separate stick button bits in the touchpad packets if we do not check these then the trackpoint buttons will not work when using the touchpad and when pressed when the user starts using the touchpad will report a release event even though the button is still pressed this commit fixes this by checking the separate bits note that we simply combine the buttons since the hardware does the same when using the touchpad buttons with the trackpoint so we do not have enough information to properly separate them
35397edeb14f033e51296400ff31d159dbb8444a	asoc dwc drop dma channel names assignment the dw_configure_dai_by_dt function and further data structures seem to be used in this driver only in case of a system using devicetree thus chan_name assignments have no effect since they will be ignored in dmaengine_pcm_request_chan_of call and will be substituted with values taken form dmaengine_pcm_dma_channel_names table tx rx also there is no any tx rx dma-names entries in only lower case tx rx seem to be used lastly this driver doesnt set snd_dmaengine_pcm_flag_custom_channel_name flag when registering a dmaengine pcm to indicate the chan_name should be used my intention is to eventually remove the struct snd_dmaengine_dai_dma_data chan_name field as there is also a chan_names field in struct snd_dmaengine_pcm_config which can be used for same purpose
1d3e6a6985c14f0510ebbd81fb9e8c02b24f8791	regulator da9211 check return value of devm_kzalloc
96aedd0ba9122a13fd0f756e022856ce7f05f086	fix slice intr offset
773424326b51cc851b6e28ff22447ba5fcc5f429	clk samsung exynos5420 add more registers to restore list this patch adds more register offsets to the list for preserving their values during s2r
33084060fb6d51ff566439a387f69ed90301280c	i40e add interrupt rate limit verbosity due to the resolution of the register controlling interrupt rate limiting setting certain values for the interrupt rate limit make it appear as though the limiting is not completely accurate the problem is that the interrupt rate limit is getting rounded down to the nearest multiple of __number__ this patch fixes the problem by adding some feedback to the user as to the actual interrupt rate limit being used when it differs from the requested limit without this patch setting interrupt rate limits may appear to behave inaccurately change-id i3093cf3f2d437d35a4c4f4bb5af5ce1b85ab21b7
4c7fa83aa5f8444662744dba82577075f11673ae	thermal db8500 fix missing mutex_unlock in probe error paths
a3bb8f3f818667872728085497b3a3ab3caba371	asoc use devm_ functions the various devm_ functions allocate memory that is released when a driver detaches this patch uses devm_kzalloc devm_request_mem_region and devm_ioremap for data that is allocated in the probe function of a platform device and is only freed in the remove function
5bd84629a7a0e2462c28ca52e213ebe27fadfee8	ftrace create separate t_func_next to simplify the function hash logic i noticed that if i use dd to read the set_ftrace_filter file that the first hash command is repeated cd echo schedule set_ftrace_filter echo do_irq set_ftrace_filter echo set_ftrace_filter echo set_ftrace_filter cat set_ftrace_filter schedule do_irq dd schedule do_irq records in records out __number__ bytes copied __float__ s __float__ this is due to the way t_start calls t_next as well as the seq_file calls t_next and the state is slightly different between the two namely t_start will call t_next with a local pos variable by separating out the function listing from t_next into its own function we can have better control of outputting the functions and the hash of triggers this simplifies the code
a4943ccbc316fd74d3612d7a5984a91ab7e5dc8c	ath9k fix tx pending frames accounting for dropped packets when dropping packets that have gone far enough into the tx path the pending frame counter needs to be decreased
339573406737461cfb17bebabf7ba536a302d841	libceph fix double-free of page vector ceph_release_page_vector kfrees the vector we shouldnt do it here too
086ed9a0bcca0201301b74a0c5160c04f2f38f8b	usb musb ux500_dma fix potential null dereference error static checker warning ux500_dma_controller_start error potential null dereference param_array
af8cd946136a1c1e9614ac9f9fc78e58654582ac	use devm_clk_get in this eliminates the need for explicit clk_put and makes the cleanup and exit path code simpler
2cc7aa29143b1276db3e87d2a2d50d3625b77d60	untie opregion init and asle enable stop calling intel_opregion_enable_asle and consequently intel_enable_asle on opregion init it should not be necessary for these reasons __number__ on pch split platforms it only enables gse interrupt which is enabled in irq postinstall anyway moreover the irq enable uses the wrong bit on __number__ on gen __number__ it would enable a reserved pipestat bit if there were gen __number__ systems with opregion asle support that is and the gen __number__ irq handler wont handle it anyway __number__ on gen the irq postinstall will call intel_opregion_enable_asle to enable the pipestat in short move the asle enable responsibility to irq postinstall which already happens to be in place this should not cause any functional changes but only do the one line change here for easier bisectability just in case and leave all the cleanups this allows to followup patches
5f88ac2d72a7f8e1cadab6d9cbc0fe1837cbcd7a	iwlagn change the logging level for aggregation enable check aggregation will not enable if the traffic is lower than the threshold this is not an error condition so change the logging level
b6ee56fe2afe10cf855de8d11b6097fa82c26163	hold inode mutex around ll_setattr_raw ll_setattr_raw expects to be called with the inode mutex held so do when calling it from ll_hsm_import reviewed-on intel-bug-id
7f1b0ea42a800713a3d56e1e8ca1a845e0461ca2	af_iucv block writing if msg limit is exceeded when polling on an af_iucv socket writing should be blocked if the number of pending messages exceeds a defined limit
6a3082adc85a3acc9258ad2e4858abc55be9b514	media media omap1_camera fix const cropping related warnings a recent commit media v4l2 make vidioc_s_crop const introduced warnings in omap1_camera fix them by adjusting a function declaration
1cc4b1a92c0a5057045d1cb8a135ea6385eafd3d	arm correct wakeup-gen code to use physical irq number the wakeup gen callback uses the irq element of the irq_data to setup the irq is the linux virtual irq number and is same as the hardware irq number only when the parent irqchip is setup as a legacy domain when it is used as a linear domain the virtual irqs are allocated dynamically and wakeup gen code cannot rely on these numbers to access the irq registers instead use the hwirq element of the irq_data which represent the physical irq number
0a9abb1e15aa64fd79beb73441361e772daf234d	usb move assignment out of if block we should not be doing assignments within an if block so fix up the code to not do this change was created using coccinelle
553b4858177d62a4969925ade1ea894c2a07b235	clk x86 remove clk_is_root this flag is a no-op now remove usage of the flag
124dd90f6525ee785b47b59aebadd4a35f797dc1	scsi megaraid fix sparse warnings theres a zero day mistake in the megaraid driver in that the code that obtains the version number does a __number__ on a char quantity this causes a sparse warning because it always produces zero al viro suggested these shifts should be __number__ thus treating the firmware version as a bcd quantity however in the interests of safety weve elected to replace the __number__ quantities with an explicit zero thus quieting the sparse warning while preserving the same albeit incorrect version number as had previously been seen
bff5baf8aa37a97293725a16c03f49872249c07e	btrfs fix incorrect error return ret being passed to mapping_set_error the setting of return code ret should be based on the error code passed into function end_extent_writepage and not on ret thanks to liu bo for spotting this mistake in the original fix i submitted detected by coverityscan logically dead code
8fda36cac1a2cdb4ad00966ab25120bb540fd558	staging vt6656 camel case clean up macvregbitson camel case changes pdevice priv byregofs reg_ofs bybits bits pbydata data
a9b5fcddce594a408a48d523087b5bb64ce82469	btrfs fix call to btrfs_search_slot in free space cache we are setting ins_len to __number__ even tho we are just modifying an item that should be there already this may cause the search stuff to split nodes on the way down needelessly set this to __number__ since we arent inserting anything thanks
84a185ec429fe64e5b0d81d7ac815c91578ee569	staging comedi make some variables unsigned in comedi_write in comedi_write the n and m variables are of type int change them to unsigned int as they are used to measure a positive number of bytes the count variable is also of type int and holds the returned number of bytes written change it to type ssize_t to match the functions return type
37c5939136d7ce42b36c5d5b46f5272903a68433	acpi pci irq remove interrupt number restriction the acpi compiler uses the extended format when used interrupt numbers are greater than __number__ the extended irq syntax is __number__ bits according to the acpi spec the code supports parsing the extended interrupt numbers however due to used data structure type the code silently truncates interrupt numbers greater than __number__
05b1621cb5134b89b6ab36e9b82bea32283c7c50	cpufreq maple use cpufreq_table_validate_and_show lets use cpufreq_table_validate_and_show instead of calling cpufreq_frequency_table_cpuinfo and cpufreq_frequency_table_get_attr
da69c161448d6a682b3761d9bc444161cbf25337	add si specific logic into the device initialize function v3 v3 guard doorbell_fini as well
5317f9a6299cefbf8eadea7d8a0355c0ec9cc2b0	staging comedi adv_pci1723 absorb pci1723_reset this function is only called by the to reset all the analog output channels for aesthetics absorb the function fix the range programming for each channel according to the users manual the range strobe register needs to be written after setting the dac range control register in order to load the range setting
a55e1c5c2640549ff3beb843f7ecaa242d69c351	pkt_sched sch_qfq remove redundant control statement the control in qfq_destroy_agg is unnecessary because already performed in hlist_del_init so remove it
753e0139e5569946056a8d5960111665a7f8f6f1	mtd fsmc improve the fsmc_correct_data routine this patch improves the error correction routine for bch8 loop only up to number of errors detected improve the error index calculation procedure additionally it also renames the correct routine to indicate that it is bch8 specific
f2014cd02cdd54f5f286221925b13c3d19addd52	fix crash on non-pci platforms registration of the hwmon device will fail on non-pci systems since is null in that case use the more generic member that points to the same and is always set no matter the platform
48ef5865d08fa0a36d786f2f8e12c6194d27538b	use memdup_user rather than duplicating its implementation reuse existing functionality from memdup_user instead of keeping duplicate source code this issue was detected by using the coccinelle software
6ac27689b01e23e21f08d6f55d23a94eb10a8efc	brcmfmac use device memsize config from fw if defined newer type pcie devices have memory which get shared between fw and hw the division of this memory is done firmware compile time as a result the ramsize as used by driver needs to be adjusted for this this is done by reading the memory size from the firmware
d823a50e55fade0eda3708b00dbf49c5476c82e2	rt2x00usb zero usb padding before sending urb when usb driver requires padding at the end of frame or urb it will report this need by increasing return value of get_tx_data_len callback common usb code uses that return value as desired urb length ensure that appropriate part of skbs tailroom exists and is zeroed __number__ __number__ files changed __number__ __number__ deletions-
a104a6b309715495ac29dd1ba9317a91a67e9808	net macb or vs and typos the bitwise tests are always true here because it uses where is intended
7b09406390e76df97c9f5f29c23a4f56d982f22c	handle properly the case when _trt or _art acpi entry is missing if either of the entries was missing the driver tried to free memory using uninitialized pointer in addition it was dereferencing null pointer
2bd1c85e855c94da564e151cb54553e6cfc2f04b	gpio-ml-ioh cleanup null pointer checking this patch will remove the following sparse warning make warning using plain integer as null pointer
53145c2e354b5a5ed031cec7472b4f16bab060c7	revert hid magicmouse set multi-touch keybits for magic mouse setting these bits causes libinput to fail to initialize the device setting btn_touch and btn_tool_finger causes it to treat the mouse as a touchpad and it then refuses to continue when it discovers abs_x is not set this breaks all known wayland compositors as well as xorg when the libinput driver is being used this reverts commit f4b65b9563216b3e01a5cc844c3ba68901d9b195
320c975f180b19296f0fd6c5bf2144e633aaba5e	cfg80211 fix possible memory leak in cfg80211_iter_combinations limits is malloced in cfg80211_iter_combinations and should be freed before leaving from the error handling cases otherwise it will cause memory leak
d8498088cf466483093c9a29121e3833e7923287	net systemport fix transmit locking scheme our transmit locking scheme did not account for the tx ring full interrupt if a tx ring full interrupt fires while we are attempting to transmit we will cause a deadlock to occur fix this by making sure that we properly disable interrupts while acquiring the spinlock
a53640c3f2d11a15d7834844d06554a6b1d2dce3	driver hv remove cast for kmalloc return value remove cast for kmalloc return value
989b8376f33721f7206dd058330da05972a71384	orinoco_usb return error in ezusb_probe when alloc_orinocodev fails the current code exits after alloc_orinocodev but fails to change the return value to something that indicates the failure this patch changes the return value to
61f8e1a73296d065abc959e0c0861ffbdfa2d0b3	media r820t delete an unnecessary variable initialisation in generic_set_freq the variable rc will be set to an appropriate value from a call of the r820t_set_tv_standard function thus let us omit the explicit initialisation at the beginning
897bb2c9162fa8f03653693a751b473cd131ee60	consider dif and rdma_read completions when calculating post_send counter if protection is involved iser target must wait for completion of rdma_read before sending scsi response so we must consider that when calculating post_send_buf_count additions also when processing completions
ba569dc3e8b9964a91da0cb802d3e46796e1168e	ethtool move kernel-doc comment next to struct ethtool_dump definition the kernel-doc script does not tolerate the macro definition in between
02668b061db1b9f7f18872e594ac68e237db0bed	kvm fix xsave bit scanning now properly commit tried to fix kvms xsave valid feature scanning but it was wrong it was not considering the sparse nature of this bitfield instead reading values from uninitialized members of the entries array this patch now separates subleaf indicies from kvms array indicies and fills the entry before querying its value this fixes avx support in kvm guests
bac5f5d56bbcb0ef7d3a926dd28b5f1db09117b7	save decrement during in comparison for works equally well as comparison for but one is saved no it is not optimised away at least here link
5cda0d20f949a111758b897c33f249f097f01727	be defensive about out of bounds sequence id untie the vbt based generic panel driver from the vbt parsing so that the two dont have to be updated in lockstep
be67e7e54bb1c22e396285bd7b4721786cba1209	greybus svc drop unnecessary symbol exports the svc functions are only supposed to be called by core and should not be exported most of these functions should never have been exported in the first place while a few no longer needs to be since core gained support for offloaded connections the only remaining exception is gb_svc_intf_set_power_mode which is needed by the camera driver until proper link management is in place
9c64863a49bd23c5a3a983680eb500f7796c81be	can c_can do not access skb after net_receive_skb there is no guarantee that the skb is in the same state after calling net_receive_skb it might be freed or reused not really harmful as its a read access except you turn on the proper debugging options which catch a use after free the whole can subsystem is full of this copy and paste
680681aee84864e1e110ea6480b86ac18206acbd	clk exynos4 make exynos4_plls static exynos4_plls is used only in this file make it static
2050afde19aeae33310bb62641ca52acad215cf8	regulator as3722 make __number__ a valid selector as of commit regulator core fix the init of dt defined fixed regulators the regulator core tries to query the current voltage of a regulator when applying constraints this exposes a bug in the as3722 regulator driver which fails to read the voltage of disabled regulators the reason is that the hardware is programmed to a selector of __number__ but none of the voltage tables include __number__ as a valid selector the datasheets indicate that __number__ is a valid selector when the regulators are powered off to fix this add a range including selector __number__ to the voltage tables
6683de3886a313ae3d4b8c0323313a987073481b	configfs fix inconsistent use of file_inode vs fix inconsistent use of file_inode vs
c41ad9c38ef36545563dd55345879fe5f867aa19	media adv7604 update recommended writes for the adv7611 update the recommended writes to those mentioned in the rev __float__ version of the adv7611 register settings recommendations document released by analog devices the document does not mention why the recommended settings have been updated but presumably those are more fine tuned settings that can enhance performance in some cases
fc36f59565861af2e897225bc3782479a26c5d5a	uprobes copy_insn should not return if __copy_insn fails copy_insn returns if the first __copy_insn fails it should return the correct error code link
01a8d255188f3f67e404f1a993452c3fbc0723f4	fix externs should be avoided in files as reported by checkpatch this patch fixes externs should be avoided in files in as reported by checkpatch
fe48a5c00f3c8087fc0a447caee2b5f9f97cf238	btrfs fix unprotected system chunk array insertion we didnt protect the system chunk array when we added a new system chunk into it it would cause the array be corrupted if someone some system chunk into array at the same time fix it by chunk lock
7ee00fdb16418dd5078ec73e4a631c278a366501	tty vt fix paste_selection ldisc handling there used to be a single tty_ldisc_ref_wait but then when a big-tty-mutex btm was introduced it has to be tty_ldisc_ref tty_unlock tty_ldisc_ref_wait tty_lock later btm was removed from that path and tty_ldisc_ref tty_ldisc_ref_wait remained there but it makes no sense now so leave there only tty_ldisc_ref_wait and when we have a reference to an ldisc actually use it in the loop otherwise it may be racy
3822c7cef7b422833f1b58949a01bd87b822d280	media it913x ver __float__ support for usb __number__ devices it9135 it9135 devices do support usb __number__ support added with restricton on pid count to __number__ it9137 devices wil not connect in usb __number__ mode
47a306a74842248dcd537b85f9a36c7b156c59a9	btrfs fix error handling in create_pending_snapshot cut and pasted some code to a later point in create_pending_snapshot but didnt switch to the appropriate error handling for this stage of the function
fda5842cc62c36c5ed02b763f6045e720582b083	regulator ab3100 use devm_regulator_register use devm_regulator_register to make cleanup paths simpler
112b51cfa21714d001e5b3e3f7c1f13146906a5d	input twl4030-pwrbutton report a wakeup_event on button press as the power button causes a wake from suspend we need to register the event with the pm sustem to avoid racing with suspend as the input event is reported in the interrupt handler as simple pm_wakeup_event is sufficient
64746c0c6a9a168d1e462903b66ff17705964967	staging xgifb use swap in xgi_writedac use macro definition
33f0698a52d9ebc089eccff7d2fc376974d7e7bf	regulator s2mpa01 reduce stack size for probe function in some rare configurations we can run into rather high kernel stack consumption error the frame size of __number__ bytes is larger than __number__ bytes this is probably harmless since it happens only in the probe function but there is also a relatively simple workaround moving the regulator match data into the device specific structure as a small downside we waste a little memory at runtime an alternative approach would free the array at the end of the probe function which in turn is a little more complicated
933e4af4c590c63509ffadeb77fcd1d329ac9155	can flexcan use devm_ioremap_resource using devm_ioremap_resource can make the code simpler and smaller also place alloc_candev after of_match_device to make error handling easier
35098463a8d340b419786356a807b04c28c82e3a	ath10k add module parameter to disable cold reset as cold reset is not reliable with cus223 boards make it possible to disable cold reset entirely and only use warm reset this makes it also easier to debug warm reset problems
55b644fd2431cfd28d04cc28f092d49e7bea3433	usb dwc2 add support for the dwc2 controller on meson8 socs usb support in the meson8 socs is provided by a dwc2 controller which works with the same settings as meson8b and gxbb using the generic binding results in an endless stream of overcurrent change detected messages
c6af9c406ceb3434281cf230938453931dcbab75	net wimax remove of unused rfkill_input pointer seems like this was not cleaned during the rfkill rewrite checkin
5fb437984b6c4793626be3936297fecece987a9f	misc mic use common error path instead of calling release_firmware on every error and then jumping lets have a common release_firmware in the error path this patch also fixes a memory leak where we missed release_firmware if mic_x100_load_command_line fails
e82b14bdd390c534750a191f9936f842bab255d4	pci aer_inject fix return values when device not found currently the aer_inject driver returns when the target pcie device root port is not found or if the device or root port doesnt support aer in the case where the root port isnt found the driver should return and in the other cases it should return
31694658fa5bc604a2df2cbaf72d4cfc52e9db48	kill ivybridge_irq_preinstall after daniels latest changes its now equal to ironlake_irq_preinstall
fb3cac572657fccf4e4406bd9737a0b3aaf54458	wil6210 broadcast tx hardware do not support real broadcast on the air use method similar to the directed multicast service dms as described in the dms procedures this service copies frame and delivers unicast for each associated peer do the following send original frame to tx vring and send copies to all other active vrings as currently dont support a-msdu convert broadcast frame to unicast instead of wrapping it in a-msdu
8f40db776adb9bb57b7b274953fadfd2ddcf044c	add wa_ctx_emit_reg add a helper for emitting register offsets for into the batch buffer
1015d81122f3f527b2e042960ffc65916834fd1d	fix certain engines not being recovered after a fault
723326b927b675daf4223fe31d7428eca68f194b	ima provide dedicated hash algo allocation function this patch provides dedicated hash algo allocation and deallocation function which can be used by different clients
084e5d285dac1e29ea07c8086322a5f3dd6de11d	staging rtl8712 remove unused inline _rnd512
32665f2bbfed2e325d37236d9b0071a11a69124e	correct failure handling if we should remove the page from the list if we fail with enosys since migrate_pages consider error cases except and as permanent failure and it assumes that the page would be removed from the list without this patch we could overcount number of failure in addition we should put back the new hugepage if if not we would leak hugepage memory
9f2843d17e3ca7aac99f5d77d690a80f10878a4a	staging comedi comedi_parport fix parport_insn_config_a this is the function for a dio subdevice it should be using the data0 value as the instruction to perform on the subdevice use the comedi_dio_insn_config helper to properly handle instructions also rename the function to better describe its use
cdf7370391d3a482ef2f2a8c73d16c6db3dbecf0	net batman-adv convert to using iff_no_queue
9a991600e379641b9c16310b87ca848b6da01c24	return if copy_from_user fails copy_from_user returns the number of bytes remaining if it fails but we want to return here
06144dcfd3b473a0b21c6c836ceb0a9cc4aab1c3	net usb r8152 use new api the ethtool api is deprecated we move this driver to new api as i dont have the hardware id be very pleased if someone may test this patch
d05de3413da29d635ccaff528af6e37dd932b393	clean up init_cntrs clean up init_cntrs by removing unnecessary memsets and debug statements
5347e5ae13710420eebbbd0b22c045685704da80	memcg use css_get in sock_update_memcg use instead of note if at the same time someone is moving to a different cgroup and removing the old cgroup css_tryget may return false and wont be initialized which is fine
6b101116ae445311031f3e9f91d3010d444b9845	hwmon lm90 add range check to set_update_interval when writing the update_interval attribute the parameter value was not range checked which could cause an integer overflow and result in an arbitrary update interval fix by limiting the value range to __number__
d1a31e975738c215f450f3d7c15d5fb96942a866	arm davinci re-use specifier specifier allows to dump data in hex format using the pointer to a buffer this is suitable to use here
758d1a8a8af04c70addb26761796019df267f420	iwlwifi mvm mark ret as maybe_unused in iwl_dbgfs_fw_restart_write the value returned from iwl_mvm_send_cmd_pdu in this function is not used and always returns an error which is the whole point of the call tag the ret variable with __maybe_unused to avoid this compile warning when is used in function warning variable set but not used int ret
2b847c3cb4f8565911bd8ce59b8428e635c90594	mm slub rename slab_alloc slab_alloc_node to match slab this patch does not fix anything and its only goal is to enable us to obtain some common code between slab and slub neither behavior nor produced code is affected
c8e043e6f717b0256b1cfc55d03c232e8a5c8cbd	i2c designware-baytrail fix sparse warnings there is no need to export functions that are used as the callbacks in the struct dw_i2c_dev otherwise we get the following warnings warning symbol baytrail_i2c_acquire was not declared should it be warning symbol baytrail_i2c_release was not declared should it be while here do few indentation fixes remove i2c_dw_eval_lock_support from functions exported to the modules and redundant assignment of local sem variable
7709afa8198d4e0567d9fe1e922ef1d694e215bb	dont skip shared dpll assertion on lpt since we now have support for shared dplls
229f329265d6d2a738fc861b7b9b6144980580f6	mmc host omap_hsmmc return error if any of the regulator apis fail return error if any of the regulator apis regulator_enable regulator_disable regulator_set_voltage fails in omap_hsmmc_set_power to avoid undefined behavior
f921fb139bd5ee008ec993c76b8a89a535fd11e9	greybus power_supply fix leak getting string properties when fetching string properties memory was being allocated and leaked when it was not necessary to do so
c1b2f69f816fc5442563a68c4365dbded6450af8	update radeon_info_ioctl for si v2 v2 agd5f add new max_pipes param
9319dfa1e08700d269a97ac117ac576f875eecfb	backlight corgi_lcd use spi_get_drvdata and spi_set_drvdata use the wrapper functions for getting and setting the driver data using spi_device instead of using with so we can directly pass a struct spi_device
456f6ddf9cfd876a60df259dbe4f3cb943e773b4	iwlwifi mvm change the time event type used for roc the te_p2p_device_discoverable time event type used for roc is assigned low priority in the fw and thus has low chance of being scheduled when there are active bss or go vmacs even if fragmentation is allowed this is mainly problematic in for cases where roc is requested for sending action frames to overcome this use a time event type that has priority equal to that ot the time event type used by the fw to action scan
c6fa1aeba02111ed8676494ac7cd453a03efef3c	hid wacom initialize to commit introduced with a comment that it would have the value if undefined but then forgot to actually perform the initialization although this doesnt appear to have caused any problems in practice it should still be remedied
86c921af41f0d40ff9105a73fb20378440f0299f	staging hv netvsc rename netdevice as net_device rename netdevice as net_device
5bf12f6096ad615c90accc1f37935423ea1a3c26	iwlwifi mvm do not sample the device time for session protection since the time-event is sent with the immediate flag set there is no need to sample the device time
a3d94dafbba04f498beacec68a32b063bbf62d08	media ths7303 declare as static a private function git grep shows that the function is only called from fix this build warning cc warning no previous prototype for int ths7303_setvalstruct v4l2_subdev enum ths7303_filter_mode mode
956563362be8ac7ce084b00825168be1adfb29ee	dwc3 use module_pci_driver this cuts down on the boilerplate code
ae42e3081d52867c4ebab694e9ef8e6e5a224661	staging ced1401 fix ced_writechar_callback rename camel case locals in function ced_writechar_callback
dadc08c7e01907be1116293aa72641a5f560ea4a	allow reading hsuid in state down accessing the current hsuid via is perfectly fine even when the card is down
9e978d8f7db1c5de7cdc6450a8ca208db3b95f84	xfs fix error handling for synchronous writes revisited xfs fix for hang during synchronous buffer write error if removed storage while synchronous buffer write underway xfslogd hangs detailed log related work bfc60177f8ab509bc225becbb58f7e53a0e33e81 xfs fix error handling for synchronous writes given that xfs_bwrite actually does the shutdown already after waiting for the b_iodone completion and given that we actually found that calling xfs_force_shutdown from inside xfs_buf_iodone_callbacks was a major contributor the problem it better to drop this call
6c3082151e13846fd872cc216e8cbb5a59cd0b12	irqf_no_suspend not irqf_timer for non-timer since gpio1 is not a timer it also should not use irqf_timer similar to commit ba461f094bab powerpc use irqf_no_suspend not irqf_timer for non-timer interrupts
d23f8cadf99b553eaa78544c53e96f3aec456530	blackfin-cpufreq mark cpu_set_cclk as static the cpu_set_cclk function was only used in a single source file so far indicate this setting also by the corresponding linkage specifier
3be2be0a32c18b0fd6d623cda63174a332ca0de1	hostfs drop vmtruncate removed vmtruncate
aab048923955ca2fa050a06b5a54568b4e6c5f4c	fix minor coding style problem this following warn is fixed up error open brace following function declarations go on the next line
227f33beab746aeec4ef3305bd17b1d374df09e7	mdio-sun4i oops in error handling in probe we could end up dereferencing an error pointer when we call regulator_disable
576ca4367f291a9b240d027670fa2e344edf8c8a	regulator core pull non-dt supply mapping into regulator_dev_lookup ensure we always apply the supply mapping when doing a lookup rather than only doing it in non-dt cases ensuring that regulators with supplies specified in the regulator_desc can find their supplies on non-dt systems and generally making the code more obvious
a35ccfe093199671358735ac4c928fc257629d9d	staging comedi remove unused minor bits information the enum comedi_minor_bits and the defines are not used remove them
a2b829d95958da2025ef844c0f53ac15ad720fac	avoid attempting to kill init sharing same memory its possible that an oom killed victim shares an with the init process and thus oom_kill_process would end up trying to kill init as well this has been shown in practice out of memory kill process __number__ init score __number__ or sacrifice child killed process __number__ init kill process __number__ init sharing same memory kernel panic not syncing attempted to kill init __number__ and this will result in a kernel panic if a process is forked by init and selected for oom kill while still sharing init_mm then its likely this system is in a recoverable state however its better not to try to kill init and allow the machine to panic due to unkillable processes rewrote changelog fix inverted test per ben
d13c8dca67e0ae1a529978849886525f9bdbabbc	iwlwifi mvm dont set ap sta to einval now that mac80211 calls pre_rcu_remove and we set the fw_id_to_mac_id pointer to before the station is removed we dont need to set fw_id_to_mac_id to when the station is really removed leave fw_id_to_mac_id to be which will let the drain worker iwl_mvm_sta_drained_wk know that this station is not to be drained we dont need to drain this station since it is our ap in managed mode and we flush all its frames synchronously anyway setting the ap station to could lead to confusion since internal stations are also reserved with this confusion showed up in the logs as drained sta __number__ but it is
dc9ceed6a12aff627c81e01ada191e8a23fcbe3e	regulator core make set_voltage_tol try for mid-range first the expected semantic for something expressed as a tolerance is that it should deliver the specified value with some deviation allowed but this is not what set_voltage_tol currently does instead it just passes the maximum possible range to set_voltage which will typically result in a voltage aimed at lower than the target voltage instead first try to set a voltage between the target voltage and the upper limit then fall back on the full range this will be much more robust against physical variation in systems and makes the api behave more like users would expect
0f4d3d1155d9a5e71e74658ac50b61141e370cf3	mips smp-cps flush cache after patching mips_cps_core_entry the start of mips_cps_core_entry is patched in order to provide the code with the address of the cm register region at a point where it will be running non-coherent with the rest of the system however the cache wasnt being flushed after that patching which could in principle lead to secondary cores using an invalid cm base address the patching is moved to cps_prepare_cpus since local_flush_icache_range has not been initialised at the point cps_smp_setup is called
89f6c3362cb5a6bce96dbe6aa15b4749c2262b21	nfsd4 delegation-based open reclaims should bypass permissions we saw a clients create fail as follows open create succeeds and gets a read delegation client attempts to set mode on new file gets delay while server recalls delegation client attempts a claim_delegate_cur open using the delegation gets error because of new file mode this probably cant happen on a recent kernel since were no longer giving out delegations on create opens nevertheless its a bug--reclaim opens should bypass permission checks
5d98f58fd66ea164d7e317d57de77b7d7c1391ff	asoc intel bytcr_rt5640 enable differential mic quirk some baytrail-cr devices rely on analog mics connected with differential pairs and not the single-ended default add quirk and enable it for t00taf
d39f3d77c9b1fe7cc33a14beb4a4849af0a4ac22	kmsg export continuation record flag to in some cases we are forced to store individual records for a continuation line print export a flag to allow the external re-construction of the line the flag allows us to apply a similar logic externally which is used internally when the console or the syslog output is printed cat swap swap __number__ __number__ __number__ colour tty0 enabled
9bf46f6df5d1e9db8b4b786d22e88d8b6edd949e	spi xilinx convert to let spi core validate bits_per_word set bits_per_word_mask so spi core will reject transfers that attempt to use an unsupported bits_per_word value spi_bitbang requires custom setup_transfer to be defined if there is a custom txrx_bufs thus keep the empty xilinx_spi_setup_transfer function in the code
55ca6bcd733b739d5667d48d7591899f376dcfb8	amd-xgbe fix napi rx budget accounting currently the amd-xgbe driver increments the packets processed counter each time a descriptor is processed since a packet can be represented by more than one descriptor incrementing the counter in this way is not appropriate also since multiple descriptors cause the budget check to be short circuited sometimes the returned value from the poll function would be larger than the budget value resulting in a warn_once being triggered update the polling logic to properly account for the number of packets processed and exit when the budget value is reached
3086365db61ec00d206afa2dbaec4b3d771a38f1	tty_port make tty_port_register_device wrap tty_port_register_device_attr tty_register_device is just a wrapper for tty_register_device_attr with null passed for drvdata and attr_grp so similarly make tty_port_register_device a wrapper of tty_port_register_device_attr so that additions dont have to be made in both functions
6f80563c03524c658bb4788fa0973f43108670c4	net hns set xge statistic reg as read only as the user manual of hns v2 describs should be configed as zero if we want xge statistic reg to be read only but hns v1 gets the other meanings it needs to be identified the process and then config it rightly
9890e33013fae0d67cd385d2038fcab4e52a6632	usb gadget correct a copy-paste misnomer acm was the first function to be converted and it seems that its code served as a base for converting f_sourcesink to the new function interface source_sink has nothing to do with acm though
fdc2e108932b302beb1e05515cdd722eb81d3a79	support exynos5422 mipi-dsi this patch supports mipi dsi for exynos5422 the dsi register offsets of the exynos5422 are similar with exynos5433 however the values of the registers are quite different from the exynos5433 for example the exynos5422 uses sw reset like previous chips
571e09eeff544e5562bd2a704f1fe91083f7592f	use boottime wall time obtained from ktime_get_real_ns is susceptible to sudden jumps due to user setting the time or due to ntp boot time is constantly increasing time better suited for comparing two timestamps
eebc8e2c5b7a3db19075a02730db8b73be933485	arm dts r8a7792 add jpu clocks add jpu clock and its parent m2 clock to the r8a7792 device tree
9d3c92af47d853d4e31ee971dba7bc086275b7b3	kvm x86 remove unnecessary mark_page_dirty fix __float__ not tainted __float__ __float__ suspicious rcu_dereference_check usage __float__ __float__ other info that might help us debug this __float__ __float__ __float__ rcu_scheduler_active __number__ debug_locks __number__ __float__ __number__ lock held by __float__ at __address__ kvm __float__ __float__ stack backtrace __float__ pid __number__ comm qemu-kvm not tainted __float__ call trace __float__ __address__ __float__ __address__ kvm __float__ __address__ kvm __float__ __address__ kvm __float__ __address__ kvm actually we do not write at this time mark_page_dirty should be removed
f853e9b3f16691b6ccb6d90aa67b56a852b49749	net wireless rt2x00 drop owner assignment from platform_drivers a platform_driver does not need to set an owner it will be populated by the driver core
dd1ed3b7bfed15f6162f63840941e9cf4f3611a1	ixgbevf fix broken trunk vlan changes to clean up the vlan rx path broke trunk vlan trunk vlans in a vf driver are those set using ip link set vf
b5d8f05204da22ec896145729eea1f875085126b	remove unnecessary null pointer check from nouveau_fence_new the variable chan is dereferenced in line __number__ so it is no reason to check null again in line __number__
4ddffcca5ec47dd634870492f2292635ae3777c7	staging btmtk_usb fix indentation for conditional statement the patch fixes the following warning in warning suspect code indent for conditional statements
96e70f83285676d8794f62f3c294d0247bef6b21	avoid overlap the fixmap area on i386 it is a problem when configuring high memory off where the vmalloc reserve area could end up overlapping the early_ioremap fixmap area on i386 the ordering of the vmalloc_reserve space is fixaddr_top fixed_addresses fixaddr_start early_ioremap fixed addresses fixaddr_boot_start persistent kmap area pkmap_base vmalloc_end vmalloc area vmalloc_start high_memory the available address we can use is lower than fixaddr_boot_start so we will set the kmap boundary below the fixaddr_boot_start if we configure high memory if we configure high memory the vmalloc reserve area should end up to pkmap_base otherwise should end up to fixaddr_boot_start link
09a8bf812c662c833621f19955a1d3fa495801bc	alsa hda check stream decoupled register state check stream decoupled register value with requested value before the stream
c46cb54db3a01223bdd457ead25d4a3582c0babe	staging usbip remove unnecessary braces this patch fixes the following checkpatch warning braces are not necessary for any arm of this statement
ae69a1da399fccaed406932f5cbee55a6f9d4425	coresight etm3x unlocking tracers in default arch init calling function smp_call_function_single to unlock a tracer and calling it again right after to perform the default initialisation doesnt make sense moving etm_os_unlock just before making the default initialisation results in the same outcome while saving one call to smp_call_function_single
f43b65bad6d54df7562c522a13d30efddae91234	smack fix gcc warning from unused smack_syslog_lock mutex in in commit smack make the syslog control configurable this mutex was added but the rest of the final commit never actually made use of it resulting in in file included from from from from from from from from warning defined but not used static define_mutexsmack_syslog_lock a git grep shows no other to smack_syslog_lock delete it assuming that the mutex addition was just a leftover from an earlier work in progress version of the change
16d7ea9167839d0b971ab29030886280595dd5fc	asoc allow pcms to restrict the supported formats some dma cores might add additional restrictions on which in memory audio formats can be supported by the compound sound card if the pcm component specifies a set of formats it supports by setting the formats field to non __number__ take these into account when calculating the format set for the compound sound card
8cf4328569acc37ac5c5b4eb27ae86c3758f627b	usbtest fix bos control test for usb __float__ devices commit c952a8ba7136505cd1ca01735cc748ddc08c7d2f usb usbtest add a test case to support bos for queue control will cause usb __float__ and usb __float__ devices with a bos descriptor to fail case __number__ of the control test the link pm errata released in __number__ updated in __number__ says the value of the bcdusb field in the standard usb __float__ device descriptor is used to indicate that the device supports the request to read the bos descriptor getdescriptorbos devices that support the bos descriptor must have a bcdusb value of or larger the current code says that non-superspeed devices return as this comment shows sign of this variable means tested code must return this negative error code tested code may return this negative too error code int expected __number__ this means the test will fail with usb __float__ and usb __float__ devices that provide a bos descriptor change it to only require a stall response if the usb device bcdusb is less than __float__
192bee4b1a7adbf16d12721c77d6268c76428323	greybus connection disable operations on enable errors make sure to cancel all incoming operations when failing to enable a connection
2e074fab347e1231bc1da156a12b37b6f746712c	rtlwifi btcoexist fix smatch warning smatch reports the following check btc8723b2ant_run_coexist_mechanism warn inconsistent indenting
e0d7461ceb5bb9b50e534262eb23e92deaaae6f1	dont use hw trigger for commit a6f75aa161c5 fimd add hw trigger support added hardware trigger support to the fimd controller driver but this broke the display in at least the exynos5800 peach pi chromebook so until the issue is fixed avoid using hw trigger for the exynos5420 based boards and use sw trigger as it was before the mentioned commit
28397dc9a6de41eafbd76a799883ace8f0570bd0	mfd staging constify struct mfd_cell where possible as of commit mfd stop setting refcounting pointers in original mfd_cell arrays the cell parameter of mfd_add_devices is const again hence make all cell data passed to mfd_add_devices const where possible
e640d2fc811ff8cc1451f92490d3ccc2adcad179	cxl make irq release idempotent check if an irq is mapped before releasing it this will simplify future eeh code by allowing unconditional unmapping of irqs
3337134e419bd392cf4d63c66848536ae0c9d8df	staging rtl8192u replace explicit null comparison replace explicit null comparison with operator to simplify code found with coccinelle script expression ptr position p statement s0 s1 when ptr if ptr null s0 else s1
21326db156b3d52983854c0071f17ef806f39156	asoc adau1701 fix prototype for adau1701_set_sysclk
e0d30bb9230a815eb9ce7971b9cc81378f96e9f2	clk axi-clkgen migrate to clk_hw based of and registration apis now that we have clk_hw based provider apis to register clks we can get rid of struct clk pointers while registering clks in these drivers allowing us to move closer to a clear split of consumer and provider clk apis
3eca5299532ea9d6ab63b03e7aaac9071d5eed29	do not set_termios on irtty_close issuing set_termios from irtty_close causes kernel oops for unplugged usb-serial devices since no other tty_ldisc calls set_termios on close and no tty driver seem to check if is null or not on entry to set_termios the only solution i can come up with is to remove the irtty_stop_receiver call which only updates termios
20ea6be6bffd4da8cfe3aeea9e6a090f346a54da	dmaengine of_dma approximate an average distribution currently the following dt description would result in dmac0 always being tried first and dmac1 second if dmac0 was unavailable this results in heavier use of dmac0 then of dmac1 this patch adds an approximate average distribution over the two nodes lessening the load of anyone of them i2c6 __number__ dmas dma-names tx rx tx rx
e61ee14f0e9be1ff3d0d3e6168d47125729864c7	staging hv fix a bug in vmbus_match the recent checkin that add a private pointer to hv_vmbus_device_id introduced this bug in vmbus_match fix it
0f6e87613c3234c6350aaa971bd9434d29405302	net arc_emac use dev_kfree_skb_any instead of dev_kfree_skb replace dev_kfree_skb with dev_kfree_skb_any in arc_emac_tx which can be called from hard irq context netpoll and from other contexts arc_emac_tx only frees skbs that it has dropped this is detected by coccinelle semantic patch
02f9cf96df57575acea2e6eb4041e9f3ecd32548	media mxl5007 move loop_thru to attach this patch move the loop_thru configuration to the attach function because with dual tuners until loop_tru configuration the other tuner dont work
87156518da94a696f2b27ab8945d531af2f1d339	target support xcopy requests without parameters spc4r37 extended copylid4 states also applying to lid1 reqs a parameter list length of zero specifies that the copy manager shall not transfer any data or alter any internal state and this shall not be considered an error this behaviour can be tested using the libiscsi test
ef0e9f551899d10834da3d262f20f84db61d64b3	fix an off-by-one resulting in the voltage not being set
4dcb5a0bffaa7dc51e738c4f651a31993b1eb08b	asoc davinci-mcasp fix synchronous master receive mode in synchronous mode both transmit and receive sections are using the tx clocks in setup like this the tx clocks need to be enabled when capture is running
c6c7a17010697377df1241a2914e3c1e5582e234	staging lustre llite to memdup_user kzalloc call followed by copy_to_user can be replaced by call to memdup_user
8aff51c4fbe9b06a9a5fc886d80c8f0f22d385e9	fix misspelling highlighted by checkpatch if
3856b78c1be32a2afe0618c7a84e05ff8c03cf10	iwlwifi mvm bt coex fix bt prio for probe requests the probe requests sent during scan must get bt prio __number__ fix that
fdd320da84c63092fe6e155cb7b8d80f7f765fa9	cpufreq lock cpu in cpufreq_register_driver to protect against races with concurrent cpu call get_online_cpus before registering a cpufreq driver
43471d15df0e7c40ca4df1513fc1dcf5765396ac	audit_tree use mark flags to check whether mark is alive currently audit code uses checking of to verify whether mark is still alive switch that to checking mark flags as that is more logical and current way will become unreliable in future
b757a62e9f0df5c997c666dca4ad81197b5d8917	bgmac dont update slot on skb mapping error dont update the slot in bgmac_dma_rx_skb_for_slot unless both the skb alloc and dma mapping are successful and free the newly allocated skb if a dma mapping error occurs this relieves the caller of the need to the appropriate cleanup action required when an error occurs
962963e4ee23bc7518dfee754de5f20d35de71d9	serial tegra switch to using struct tty_port many of the tty functions were converted to use a struct tty_port instead of a struct tty_struct update the tegra driver accordingly to avoid build breakage
9d3d87c750f30af0e8e268c122ffec4489bc9638	clk bcm281xx change some symbol names as i developed the bcm281xx clock code i understood there were restrictions on device tree compatible strings names and as a result bcm11351 was used in places despite the part family being more properly called bcm281xx this can be a little confusing in some cases i went to far and things using bcm11351 when that was not necessary this patch remedies this it renames the symbol used to define the compatible string but not its value so it uses bcm281xx similarly the name names provided to the clk_of_declare macro are changed hoping to minimize the number of places that the confusing __number__ string is used
d609af3a1397511a7a2c213f9f855fa82df771ee	blk-throttle adjust two function calls together with a variable assignment the script pointed information out like the following error do not use assignment in if condition thus fix the affected source code places
c09ec198eb7d5d55fe2f23012a063b7ee107b34a	dont call kvm_guest_enter twice kvm_guest_enter was already called by kvmppc_prepare_to_enter dont call it again
264b87fa617e758966108db48db220571ff3d60e	fq_codel avoid regenerating skb flow hash unless necessary the fq_codel qdisc currently always regenerates the skb flow hash this wastes some cycles and prevents flow seperation in cases where the traffic has been encrypted and can no longer be understood by the flow dissector change it to use the prexisting flow hash if one exists and only regenerate if necessary
979c0c7eb0fb969f0621c7017a6a87e6a0e36a4c	release resources properly when fb creation is failed this patch releases allocated resources properly when exynos_user_fb_create is failed
5c9f480bdb584944b5af390ccdd8c3e586bdafdb	media dvb dvb_frontend avoid possible race condition on first event enqueued before the frontend thread wakes up
78a4f0367a1de89c625237fc5524f4ef4535f031	dma mpc512x reorder mpc8308 specific instructions concentrate the specific code for mpc8308 in the if branch and handle mpc512x in the else branch this modification only reorders instructions but doesnt change behaviour
314531f18de0063131567c535af0cec3e4969c24	hid sony use the controller bluetooth mac address as the unique value in the battery name string use the controller bluetooth mac address as the unique identifier in the battery name string instead of the atomic integer that was used before
c3f007f5b6bcaeaf554014e3ec471c2308843c6e	staging vt6656 fixed open brace placement related error fixed the following checkpatch error error that open brace should be on the previous line
3ec66a4be43f4b1a447385f6dd1d1e2b9fd2b19b	staging unisys rename process_incoming fix the camelcase function name process_incoming process_incoming update all references to use the new name
2487329502f6931ea5c160e7d9f6031f9c736c3e	staging iio ad9832 use apis apis are device managed and make code simpler
bc03cfe84d833a49a0a0a6d5e45fc84169f48e30	usb sierra remove unused variable remove unused variable from sierra_release_urb
cc3a5ae6f23336ddc1d136a66c0a6a60276e99a3	openvswitch refactor get_dp function into multiple access apis avoid recursive read_rcu_lock by using the lighter weight get_dp_rcu api add proper locking assertions to get_dp
fd8c7be722e96fa658cd5e7a3305389b923b454d	be2net dont limit max mac and vlan counts for sh-r and lancer-r use the fw supported values for max unicast macs max vlans and max multicast macs
aabd3ad41a00651fa7c81c3bcb9a7138cf1bb224	rsi using band from rsi_common to fill in ieee80211_rx_status filling in band from
f5099dd4d98a8cc4ef1003378a4812597cfba4c6	ipvs pass ipvs into ip_vs_conn_fill_param_proto move the ugly hack net_ipvsskb_netskb up a layer in the call stack so it is easier to remove
d605bd024e085ba7fe0fbedf1707d339ea9cc0af	asoc arizona add debug prints for output power times when debugging it is useful to check the total power delay that is executed as part of the coalesced output delay this patch adds some debug prints for this
7e8b12c60ad38fb90a162df4e6fc120e3bee104e	ext4 defragmentation code cleanup grab_cache_page_write_begin may not wait on pages writeback since but it is still reasonable to wait on pages writeback here in order to be on the safe side fix miss typo pass length instead of end to __block_write_begin testcase reviewed-by akira fujita
109f2365f1928af241b2ccbd0f6ba0b93d911288	btrfs fix a double free on pending snapshots in error handling when creating a snapshot failing to commit a transaction can end up with aborting the transaction following by doing a cleanup for it where well free all snapshots pending to disk so we check it and avoid double free on pending snapshots
f739c39ce630c97912a16639bd10231073aef6c8	iwlwifi mvm fix beacon filtering temperature thresholds for d0i3 the slow filtering threshold should be higher in d0i3 case
0979a913f879ea39504200d83fb9f275a555a58d	iwlwifi pcie use list_head macro theres no need to declare a list and then init it manually just use the list_head macro
42415c90ceaf50c792e29823e359463bc6d4ee05	openvswitch use correct type while allocating flex array flex array is used to allocate hash buckets which is type struct hlist_head but we use struct hlist_head to calculate array size since hlist_head is of size pointer it works fine following patch use correct type
23119de4e69c8a96f10de4bcc62d3751e7d77eb4	greybus interface localize gb_interface_destroy its not referenced by svc or any other code anymore lets stop exposing it to rest of the files
2b489a45f63102205cece37057c21f6fa66f6ce4	vfio whitelist pcieport pcieport does nice things like manage aer and we know it doesnt do dma or expose any user accessible devices on the host it also keeps the memory and busmaster bits enabled which is pretty handy when trying to use anyting below it devices owned by pcieport cannot be given to users via vfio but we can tolerate them not being owned by vfio-pci
7584f2ebc18b6355f21be5fb2f75afbf3f781ce5	usb wusbcore convert nested lock to use spin_lock instead of spin_lock_irq nesting a inside a lock that has already disabled interrupts will enable interrupts before we are ready when spin_unlock_irq is called this patch converts the inner lock to use spin_lock and spin_unlock instead
68b6d5d3d14acc7553cb52d6468e9b6bada41ba1	scsi qla4xxx fix a sparse warning message fix following error symbol qla4xxx_post_aen_work redeclared with different type originally declared at incompatible argument __number__ different signedness
2538d960d0c74cdc639f05723e04a67aed1efdf9	use time_after in record_wakee to be future-proof and for better readability the time comparisons are modified to use time_after instead of plain error-prone math link
471070abd2f53e579ebeb362e78ce62d04287f49	move gpu linear window to end of dma window if the end of the system dma window is farther away from the start of physical ram than the size of the gpu linear window move the linear window so that it ends at the same address than the system dma window this allows to map command buffer from cma which is likely to reside at the end of the system dma window while also overlapping as much ram as possible in order to optimize regular buffer mappings through the linear window
2d2ea21655aa69c9b7a6da76888f899b20ce9f66	staging bcm replaced member accessing by variable
9be91db2efcf749eb159c674915d38e5ac14682a	media convert mpeg-ts demux caps to an enum while we cant document documenting enums are well supported by kernel-doc so convert the bitmap defines into an enum
a5b4e57d7cc07cb28ccf16de0876a4770ae84920	workqueue use hotcpu_notifier for workqueue_cpu_down_callback workqueue_cpu_down_callback is used only if so hotcpu_notifier fits better than cpu_notifier when hotcpu_notifier and cpu_notifier are the same when if we use cpu_notifier workqueue_cpu_down_callback will be called during boot to do nothing and the memory of workqueue_cpu_down_callback and gcwq_unbind_fn will be discarded after boot if we use hotcpu_notifier we can avoid the no-op call of workqueue_cpu_down_callback and the memory of workqueue_cpu_down_callback and gcwq_unbind_fn will be discard at build time ls __number__ laijs laijs __number__ sep __number__ __number__ laijs laijs __number__ sep __number__ size text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ tj updated description
e702c66c0724c09e8efb87cb6fff8100e988cdb0	staging comedi ni_pcidio fix the use for trig_int this driver only a of trig_now or trig_int the is trivially validated for both sources to be __number__ for a trig_int source the is actually the valid trig_num that is passed to the async callback refactor the function so that the is used to check the trig_num instead of the open coded value
43bb50ec36519f9b21d4f55da0154b00e9fe06b7	staging skein cleanup align code to parentheses align wrapped lines to parentheses if applicable
01d2d1aa0648192fd1d49f7d74d7e8b85b1c585a	f2fs use true and false for boolean variable the inode_page_locked should be a boolean variable struct dnode_of_data struct inode vfs inode pointer struct page its inode page null is possible struct page cached direct node page nid_t nid node id of the direct node block unsigned int ofs_in_node data offset in the node page bool inode_page_locked inode page is locked or not block_t data_blkaddr block address of the node block jaegeuk kim add description
07d50cae0661e5479d54d6e3e21cad15b1198103	mlxsw spectrum do not override pause settings the pfcc register is used to configure both pause and pfc frames therefore when pfc frames are disabled we must make sure we dont mistakenly also disable pause frames which might be enabled fix this by packing the pfcc register with the current pause settings note that this register is also accessed via ethtool ops but there we are guaranteed to have pfc disabled
79816824c1ae73542d9523283ce353142b67563e	usb pl2303 rename pl2303_encode_baud_rate rename baud-rate encoding function to match tty naming
ae5d1cf358a5bf0020cd25618fca10b5c5c4630e	arm64 dump make the page table dumping seq_file optional the page table dumping code always assumes it will be dumping to a seq_file to userspace future code will be taking advantage of the page table dumping code but will not need the seq_file make the seq_file optional for these cases
e72cfd58998834570b0ea9cd1961e4abe84945e1	irq resume should be immediately after gpu resume
8defffb20854500825162d336bdd183d2d218cf9	staging ks7010 avoid dereferencing packet if it is null updating tx_bytes from if packet is null will cause a null pointer dereference so only update tx_bytes if it packet is not null
0fd22b45b2d2e1de162d6a47327d449e0ed45ad2	raid5-cache fix a user-after-free bug r5l_compress_stripe_end_list can free an io_unit this breaks the assumption only reclaimer can free io_unit we can add a reference count based io_unit free but since only reclaim can wait io_unit becoming to stripe_end state we use a simple global wait queue here
08a56226d84706d402372d891550e130ef5df9f0	acpi video add dell inspiron __number__ to the blacklist with win8 capabiltiy the acpi backlight control is broken the system also loses backlight setting when resuming from s3 add this model to the the acpi video detect blacklist to make backlight functionality work although backlight functionality works via this approach may be safer
51e8137b82622d8ea22e993d613db568f11c1523	ext4 remove plugging from ext4_file_write_iter do_blockdev_direct_io takes care of properly plugging direct io so theres no need to plug again inside ext4_file_write_iter
9fe0423eac2c0781a3ece8779b086acd3e76f2c8	use the standard for pcie link capability bits use the standard rather than bare numbers for the pcie link capabilities speed bits
af4c720efc0507e01b89774fed936087baac4107	pm qos properly use the warn macro in dev_pm_qos_add_request make dev_pm_qos_add_request use warn in a better way and do not hardcode the functions name into the message use __func__ instead
17665ca4412e796b934b7b28bf6525b2849b5fd5	asoc jack remove unused variable in snd_soc_jack_report the variable oldstatus is initialized but never used otherwise so remove the unused variable dpatch engine is used to auto generate this patch
b77b7565a6d11611c3f179941d2b95c2d72939dc	sctp add pr_debug for tracking asocs not found this pr_debug may help identify why the system is generating some aborts its not something a sysadmin would be expected to use
0333464f5f7c33965173893b2a7322da6fe751ab	ixgbevf fix possible crashes in probe and remove this patch resolves couple of issues in __number__ fix a case where is tested after free_netdev this is same as the patch for ixgbe from daniel borkmann commit ixgbe fix use after free test in __number__ move pci_set_drvdata after all the error checks in ixgbevf_probe and then add a check in ixgbevf_probe to avoid running the cleanup functions twice in cases where probe failed
ca32723afedd65d612029705446bf44bde5eab14	net calxedaxgmac update ring buffer tx_head after barriers ensure that the descriptor writes are visible before the ring buffer head is updated since writel is a barrier we can simply update the head after the writel
bac9e37d744f28ce4885e3fb1555f5e789317816	staging unisys fix symbol placement in spar_channel_client_acquire the belongs at the end of the previous line not the start of the next one
a924ce0b35875ef9512135b46a32f4150fd700b2	evm limit verifying current integrity evm_protect_xattr unnecessarily validates the current integrity before updating non-evm protected extended attributes and other file metadata this patch limits validating the current integrity to evm protected metadata
30493cc9dddb68066dcc4878015660fdaa8e0965	optimize square root algorithm optimize the current version of the shift-and-subtract hardware algorithm described by john von newmann1 and guy l steele iterating times perf shows for the current version performance counter stats for __number__ runs __float__ task-clock __float__ cpus utilized __number__ context-switches __float__ __number__ cpu-migrations __float__ __number__ page-faults __float__ cycles __float__ ghz stalled-cycles-frontend frontend cycles idle stalled-cycles-backend instructions __float__ insns per cycle __float__ stalled cycles per insn branches __float__ branch-misses of all branches __float__ seconds time elapsed and for the new version performance counter stats for __number__ runs __float__ task-clock __float__ cpus utilized __number__ context-switches __float__ __number__ cpu-migrations __float__ __number__ page-faults __float__ cycles __float__ ghz stalled-cycles-frontend frontend cycles idle stalled-cycles-backend instructions __float__ insns per cycle __float__ stalled cycles per insn branches __float__ branch-misses of all branches __float__ seconds time elapsed furthermore this saves space in instruction text text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__
ca94085139d4874701af4f149bebfb05e105b245	asoc wm8996 remove spurious irqf_oneshot flag this reverts ed043aebe6ec asoc wm8996 pass the irqf_oneshot flag the coccinelle warnings is false positive because the original code does set irqf_oneshot by trigger
eda908967feecf7575a8ab74f1695b0445cf324e	balance assert_rpm_wakelock_held for commit author imre deak intel.com date wed feb __number__ __number__ add helper to get a display power ref if it was already enabled left the rpm wakelock assertions unbalanced if config_pm was disabled as intel_runtime_pm_get_if_in_use would return true without incrementing the local bookkeeping required for the assertions link cherry picked from commit
0ef7e206d6a5a5de0cd84ed4925a4f688c62e732	mtd gpmi-nand move to dma_transfer_direction this patch fixes usage of dma direction to adopt dma_transfer_direction
73222c2ddf5e2da2223d0b7329bad85c7e6ae1f8	pata_cs5535 no need to program pio0 timings during device init core libata code takes care of it nowadays
f5a25524508e68ac670b28db9112d3962dca4703	irqchip s3c24xx make interrupt handling independent of irq_domain structure keep a pointer to the corresponding s3c_irq_data struct as irq_chip_data this removes the need to fetch the intc struct from the irq_domains host_data thus making it independent of the underlying irq_domain structure also keep the real register offset of the interrupt in the s3c_irq_data struct to make it independent of the hwirq structure in the irq_domain
f7769f9cf95fa1a63eea81f13126f8fe7f708dc1	befs avoid dereferencing dentry twice no need to dereference dentry twice to get the name when we already have it stored in a local variable
5bcf099c17323a8760620511b1b8e415c2783571	nfc set rf_mode to nfc_rf_none where necessary rf_mode is now set to nfc_rf_none when a device gets allocated when the link goes down and when stop polling
65c7815a4c03019ce3a65766e3ff7a2894814c98	staging comedi rtd520 cleanup defines convert these to bit shifts and cleanup the whitespace and comments
5fd4d112d26cae71c0f92f9d83c0d29a22510025	add a simple fence selftest to i915_gem_request do a quick selftest on in the interoperability of dma_fence_wait on a i915_gem_request
ce8609146d09df213ed1e842ece7ad477e0ab7a6	blackfin bfin_gpio proc fix return value
7a9c42ccc9fd4317383e55209f825f974e64aa99	i2c-eg20t support combined transfer mode currently combined transfer mode is not supported this patch enables combined transfer mode
d466f6c5cac17e0c9f22bd4250020bf885049db7	constify the address pointer in __get_user_nocheck in __get_user_nocheck we create an intermediate pointer for the user address were about to fetch we currently dont tag this pointer as const make it const as we are simply dereferencing it and its scope is limited to the __get_user_nocheck macro
8f451829dd97fb22f03844ca52a49828e2e1d666	mac802154 use warn_on macro this patch will generate the warning if the required driver ops were not defined also it removes unnecessary debug message
7f12088798b671626b46ba77abee763d6348f146	media qt1010 do not change frequency during init changing cached frequency during init is something no-no make it behave a little bit better after that device could survive from when streaming is ongoing
0f261ede311bfd718d84bdf50dd7fcee585e82c7	ia64 disable interrupts when exiting from ia64_mca_cmc_int_handler sal specification mandates that ia64_mca_log_sal_error_record gets called with interrupts enabled and thats why ia64_mca_cmc_int_handler is enabling them it however forgets to re-disable them when exiting which triggers warn_on in generic irq handler disable the interrupts again before exiting this is analogous to a3967685745 ia64 disable interrupts at end of ia64_mca_cpe_int_handler
38c1e5e7b91dfa82547657269cabf5fba66c7a2b	pinctrl qcom-ssbi support for pm8058 the pm8058 is found in connection to the apq8060 on the apq8060 dragonboard works the same as all others just add the compatible string for this variant
846cc05f95d599801f296d8599e82686ebd395f0	nvme simplify resets dont delete the controller from dev_list before queuing a reset instead just check for it being reset in the polling kthread this allows to remove the dev_list_lock in various places and in addition we can simply rely on checking the queue_work return value to see if we could reset a controller
8dfabe7ab17a7c731bcb560fa42f9e4b745eeadf	asoc n810 use snd_pcm_hw_constraint_single use the new snd_pcm_hw_constraint_single helper function instead of calling snd_pcm_hw_constraint_minmax with the same value for min and max to install a constraint that limits the possible configuration values to a single value using snd_pcm_hw_constraint_single makes the indented result clearer and is slightly shorter
a796dac9a6bedff6db99f57828c85c97071d3d1e	wireless core reorder wiphy_register notifications relevantly currently it can send regulatory domain change notification before any new_wiphy notification moreover if rfill_register fails calling wiphy_unregister will send a del_wiphy though no new_wiphy had been sent previously thus reordering so it properly notifies new_wiphy before any other
d758b9ef7aacb66d99529b6a24dc54e9d11434b7	media staging as102 define device name string pointers constant supresses following checkpatch warning warning static const char array should probably be static const char const
1d10f6ee602ec5a4bd0c1606ba5f38277da432e1	x86 __force_order doesnt need to be an actual variable it being static causes over a dozen instances to be scattered across the kernel image with non of them ever being referenced in any way making the variable extern without ever defining it works as well all we need is to have the compiler think the variable is being accessed link __number__
60846880384f00713c7f54243f749c1923e6c0e3	serial earlycon skip parse_options if empty string earlycon param strings of the form are rejected from parse_options with an error which in turn results in a null argument for the setup method options parameter only pass non-empty string to parse_options this will enable handling actual parse errors differently than expected and allow formats
0e2a706b04c1d117c77ee47a41fd978afa25d67e	media tea575x convert to library the module is used only as a library for now remove module init and exit routines to show this while here remove fsf snail address and attach export_symbol macros to corresponding functions
332c3988fe9cbecf9d50f19596b66a34b5eda6de	input synaptics-rmi4 set the abs_mt_tool_type bit to report tool type the rmi4 sensor functions report the tool type via input_mt_report_slot_state but the abs parameter bit has not been set so the tool type is not reported to userspace this patch set the abs_mt_tool_type bit
4aa2d31f5df8c47cc92ccacf49a2dff3db6c1d53	wcn36xx fix error handling reorder out_free_dxe_pool and out_free_dxe_ctl error handling labels in order to match the way resources have been allocated
cc76daf793287b2c51b0b66153072b23cdb51c1c	crypto nx saves chaining value from co-processor this patch fixes a bug that is triggered when ctscbcaes is used with nx-crypto driver on input larger than __number__ bytes the chaining value from co-processor was not being saved this value is needed because it is used as the iv by ctscbcaes
f365ef9b79f01d69a01134b42fdff251a510b022	dlm use seq_puts instead of seq_printf for constant strings convert the seq_printf output with constant strings to seq_puts link
63a5d4c6a71fda7ac567627d6ac4a74e9555e97c	alsa export snd_pcm_constraint_mask64 allow modules to use it fixing a build failure when the newly added adau1977 driver is built as a module
53653c6b91750debba6dc4503003c851257fd340	pinctrl bcm2835 fix memory leak in error path in case of an invalid pin value bcm2835_pctl_dt_node_to_map would leak the pull configs of already assigned pins so avoid this by calling the free map function in error case
6dcbc200fe4e26fe9c53a47c5945646762c118be	regulator lp8788-buck use regulator_map_voltage_ascend all regulators have ascendant voltage list in this driver use regulator_map_voltage_ascend for them
2729011c40ba0bde6ad5381fa84775fff7456c1a	staging rtl8192e rtllib_wx remove duplicate messages some messages were reported with macros and internal driver-specific macro
5243e7bd98b2dfecef3acd82661b541905a86e7f	hyperv add error handling to rndis_filter_device_add
9883ab91e3ba5229bfe2d6e7f6ff497a2d03d4d2	alsa via82xx use snd_ctl_enum_info and reduce the open codes also add missing const to the text array
d361ae269fef68e561978d7183a4a6d1c4c0a413	make intel_aux_display_runtime_get get runtime pm not pc8 because we merged the pc8 and runtime pm features so calling intel_runtime_pm_get now has the same meaning and we plan to just remove hsw_disable_package_c8 for this exact reason my first patch tried to completely kill because i was assuming that whoever needed more than just runtime pm would have to get the appropriate power domain instead of that but it seems some people still want the intel_aux_display_runtime_get abstraction so keep it until someone else tries to replace it with the more-standard power domain calls
a798e2d2d7374ba1e35e2244506f56c8363902cf	add module_alias for autoloading ipmi driver on acpi systems id submitted this about a year ago but it never made it upstream the latest versions of the kernel drivers for ipmi can use acpi to determine the type of bmc device used in the system the following patch adds a module alias so that udev will autoload the ipmi_si driver
d03d9fe476ea81ad3be25967ef35a671dbd79b55	nfsd remove unnecessary positive-dentry check each begin with a call to may_create which returns eexist if the object already exists this check is therefore unnecessary in the nfsv2 case nfsd_proc_create also has such a check contrary to rfc __number__ our code seems to believe that a create of an existing file should succeed im leaving that behavior alone
a77b15a60cb1d54d87e8794bfbc94c9ccee679ed	bluetooth add hci authentication capabilities macros add macros for the hci capabilities as described in the bluetooth core specification volume __number__ part e section
d7a0ecab380c62ccd9fbe2e08dd720f7a367d6ee	re-arrange xdp creation in mlx5e_open_channel cqs must be created before napi is enabled here we move the xdp cq creation to satisfy that fact mlx5e_close_channel is already working according to the right order
28c8b4045b18b013e05656b493ce9a57cbf1f09a	limit strtab allocation for small sid sizes if the streamids in a system can all be resolved by a single level-2 stream table sidsize split then we currently get our maths wrong and allocate the largest strtab we support thanks to unsigned overflow in our calculation this patch fixes the issue by checking the sidsize explicitly when calculating the size of our first-level stream table
47c697aa2d07f4bf258e7ad53cdb6c77c339b843	openvswitch deferred fifo api change add_deferred_actions api currently requires actions to be passed in as a fully encoded netlink message so far both sample and recirc actions happens to carry actions as fully encoded netlink messages however this requirement is more restrictive than necessary future patch will need to pass in action lists that are not fully encoded by themselves
c389c9c4d981e49185b1c89354c85608effefe50	remove transitional references from intel_plane_atomic_check all transitional plane helpers are gone party tested-by(ivb) matt roper intel.com
a180132f270a96d3b0e1e290b2911647abe9ed8e	gpio clps711x add dt support add dt support to the clps711x gpio driver
524fd35357559381d5e84b6b5af2995579ace0eb	usb misc ftdi-elan dont print on enomem all kmalloc-based functions print enough information on failures
0cd6156177a10d39fb5811bcd23e1d3b7e58f1c0	dma mmp_pdma dont clear dcmd_endirqen at end of pending chain in order to fully support multiple transactions per channel we need to assure we get an interrupt for each completed transaction that flags bit is also our only way to tell at which descriptor a transaction ends so remove the manual clearing of that bit and then inline the only remaining command that is left in append_pending_queue for better readability
0bd8fa260821f34a64163c01a74f293745527cef	clk sunxi-ng h3 fix audio clock divider offset the code had a typo and got the wrong offset for the hardcoded divider fix that link
a71e23d9925517e609dfcb72b5874f33cdb0d2ad	fix warning error in function xen_blkbk_discard warning passing argument __number__ of dev_warn makes pointer from integer without a cast by default note expected const struct device but argument is of type long int it is unclear how that mistake made it in it surely is wrong
00ac20279174cf0a1f3d8e10654d2c5c4be5bdae	irqchip brcmstb-l2 level-2 interrupts are edge sensitive the driver was configuring the interrupt handler for the level-2 interrupts to be level triggered while they are in fact edge triggered fix this by using the correct handler link
005b0b076ff68a10cc7ca8d3ba32def3ae95ad96	caif bad assert triggering false positive fix bad assert on fragment size triggering false positive
2a6dc96b973c8d1defd39bf21e89e6907b1c72f1	media omap3isp video set the buffer bytesused field at completion time the v4l buffer bytesused field is a value that will be returned to userspace when the buffer gets dequeued as such it doesnt need to be set early at buffer queue time move the assignment to buffer completion in the omap3isp_video_buffer_next function to prepare for the video buffers queue refactoring
d55ce0a6f98305c75c4581d7a19be622bb95179a	ath9k add multi_read to be compatible with ath9k_htc
ec93ac8663ad5fcccd44c3768b23c93b87610fc2	arm switch to generic sigaltstack
baa42a359e7272135aa61548aa99263be03fb668	ohci-hub fix typo in dbg_port macro the dbg_port macro uses the outside parameter instead of the parameters given in the macro as the macro can look outside its definition this causes no direct problem
0883d9d730fc294c3d90ebd190b94e5782ead316	tools lib traceevent have bprintk output the same as the kernel does the trace_bprintk in the kernel looks like ring_buffer_producer_thread missed __number__ ring_buffer_producer_thread hit __number__ ring_buffer_producer_thread entries per millisec __number__ ring_buffer_producer_thread __number__ ns per entry ring_buffer_producer_thread sleeping for __number__ secs ring_buffer_producer_thread starting ring buffer hammer ring_buffer_producer_thread end ring buffer hammer but the current output looks like this ring_buffer_producer_thread time __number__ usecs ring_buffer_producer_thread overruns __number__ ring_buffer_producer_thread read __number__ by events ring_buffer_producer_thread entries __number__ ring_buffer_producer_thread total __number__ ring_buffer_producer_thread missed __number__ ring_buffer_producer_thread hit __number__ remove the space between the function and the colon link
f974cf57b1b95839b224b01335c45347f746a365	spi allow registering empty spi_board_info lists many boards form list of spi_board_info entries depending on config and it is possible to end up with empty list do not report error in such cases
da39257f0bc5a5780735abb8c8031e20a701d49a	media omap3isp assume media_entity_pipeline_start may fail since media_entity_pipeline_start now does link validation it may actually fail perform the error handling
948838a10ad24afea3229957b6f02f8587a569e0	regulator tps65218 add of dependency this is a dt-only driver so make it depend on of and remove of_match_ptr in the code
de2080d41b5d584205e408d72021f0f335a046fc	close leaks if ffs_epfile_io fails in aio case we end up leaking io_data and iovec_copy in case of aio read
9a3dce62cc5640d7ea17733a2bd1b57665c232b0	rtc ds1307 ds3231 temperature s16 overflow while retrieving temperature from ds3231 the result may be overflow since s16 is too small for a multiplication with __number__ ie if temp_buf0 the result s16 temp will be negative
a82c40cba28266186eff04bde6e368083eefa687	staging silicom remove unnecessary variable from do_cmd remove unnecessary variable ioctl from do_cmd as a consequence this patch removes an assignment to ioctl in an if condition reported by
31a99443a53aa65cdaaaaa3bcd5ed685eec87419	staging iio adis16060_core fix error handling we need to check adis16060_spi_read return code to avoid feeding user space with bogus data while at it introduce out_unlock label in order to simplify locking on error path
0c14e5ced264620284bd96f888614768c9bd0976	bnx2x fix status blocks configuration this fixes __number__ issues regarding bnx2xs status blocks __number__ ethtool caused corruption of status blocks in fw ram __number__ when using multi-cos the configuration of the timeout values of status blocks is incorrect harming the coalescing of interrupts for such coss
617f6f7ef5bfe8c0ac580243c3da9a836c6e39bf	rtc bq32k remove redundant check removing below static analysis error error possible null pointer dereference client if i2c_func_i2c error comes because client is dereferenced before null check so probably null this check is not required
a8c32aa846cfa271744f1c11fcf425b131137991	drbd _drbd_send_ack return __number__ upon success and an error code otherwise
8d762017f482386cd73e77bb250e0a9dd1fe5a25	remove unnecessary stub for fb_ioctl stub implementation of fb_ioctl can be omitted because function do_fb_ioctl already returns when fb_ioctl is not assigned link
60cb3b02bc74c90aaa77d1acda1eff73c8dda478	staging comedi amplc_dio200 use comedi_legacy_detach the region used by this driver is always requested using comedi_request_region the union is only used by the common code shared by the legacy and pci drivers use the new comedi_legacy_detach helper in the to release the region requested by this driver that function will handle the proper sanity checking before releasing the resource
9650388b5c56578fdccc79c57a8c82fb92b8e7f1	ipv4 arp fix a lockdep splat in arp_solicit yan burman reported following lockdep warning info possible recursive locking detected not tainted is trying to acquire lock at __address__ __neigh_event_send but task is already holding lock at __address__ other info that might help us debug this possible unsafe locking scenario cpu0 deadlock may be due to missing lock nesting notation __number__ locks held by at __address__ at __address__ arp_solicit at __address__ at __address__ stack backtrace pid __number__ comm not tainted call trace __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ vxlan __address__ __address__ __address__ vxlan __address__ vxlan __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ bug is from arp_solicit releasing the neigh lock after arp_send in case of vxlan we eventually need to write lock a neigh lock later its a false positive but we can get rid of it without lockdep annotations we can instead use neigh_ha_snapshot helper
e21de10cd8b1338200d96038aa66fb966fcf6ed0	usb musb gadget clear gadget_driver when gadget is stopped some musb glue drivers use gadget_driver pointer to know if any gadget drivers are loaded at some moment and base further decisions on it like to do runtime or not right now the pointer is left alone on stop and omap musb glue later does wrong runtime_pm decisions because of it clear the gadget_driver pointer on remove its invalid after stop anyway
4160cd9e5ef9ac9f1c9c429e1606bf08a56c8a49	make a symbol static symbol is only used in that file and can be static
623978de362a5faeb18d8395fa86089650642626	mtd nand scrub bbt on ecc errors now that read_bbt returns ecc error codes properly we handle those codes when checking the integrity of our flash-based bbt the modifications can be described by this new policy on any uncorrected ecc error we invalidate the corresponding table and retry our version-checking integrity logic on corrected bitflips we mark both tables for re-writing to flash scrubbing current integrity checks comparing version numbers etc should take care of all the cases that result in rescanning the device for bad blocks or falling back to the bbt as found in the mirror descriptor
76e9521fc9a400c62585b5fc2465d1103f6ce836	staging panel fixed a spacing after cast coding style issue fixed a spacing after cast coding style issue
534a729866f9edc9264340c5b96cb94878ffda00	dmaengine add __number__ bytes __number__ bytes and __number__ bytes bus widths the widths are missing add them
e06ed0db9709c968da1e78d3692b733a8ebc5f45	remove braces in sd_set_init_para fixed below checkpatch warnings braces are not necessary for single statement blocks
747598d5b6d1c825ad34fbf743e38113aaca597f	media go7007 dont use vb before test if it is not null as reported by smatch frame_boundary warn variable dereferenced before check vb see line __number__
f229594a327720c0761e7307a5472aea780268c3	staging comedi ni_660x allocate counters early in the ni_gpct_device_construct could fail allocating the memory for device and its counters for aesthetics call the function before initializing the subdevices
77ceab8ea590d7dc6c8f055ce43dfebd74428107	cgroups dont attach task to subsystem if migration failed if a task has exited to the point it has called cgroup_exit already then we cant migrate it to another cgroup anymore this can happen when we are attaching a task to a new cgroup between the call to on subsystems and the migration that is eventually tried in cgroup_task_migrate in this case cgroup_task_migrate returns and we dont want to attach the task to the subsystems because the attachment to the new cgroup itself failed fix this by only calling on the subsystems if the cgroup migration succeeded
dc11699908b270940b1245986236864decb6f8cc	iio lp8788_adc fix a parent device in _probe the lp8788-adc is a platform driver of lp8788-mfd the platform device is allocated when mfd_add_devices is called in lp8788-mfd on the other hand is the i2c client device therefore this platform_device is a proper parent device of iio device and device kernel message
ea365922f9eb2fb6fc0486f521748f19bfd5c502	usb gadget functionfs dereference ffs_dev conditionally should be accessed only if ffs_dev is not null
b5d512147aecc11ba8ecc62f4083f5a9f86d332f	include the domain id if removing the device whilst still in use cleanup the function a bit also include the id of the domain that is using the device
985c8dcbe15ddd8a1b98dc6b9c6403cb5d7012ab	perf make perf_event_init_context function static leftover from perf multiple task contexts link
65a5124a71e85c35fa8d047a471950325855dccf	sctp support to lookup with in transport rhashtable now when we sendmsg we translate the ep to laddr by selecting the first element of the list and then do a lookup for a transport but sctp_hash_cmp will compare it against asoc addr_list which may be a subset of ep addr_list meaning that this chosen laddr may not be there and thus making it impossible to find the transport so we fix it by using ep paddr to lookup transports in hashtable in sctp_hash_cmp if is set we will check if this ep or we will do the laddr check
cf2b8fbf1d2f7ba07999e97685563c94483d33d6	memcg zap memcg_can_account_kmem memcg_can_account_kmem returns true iff memcg_kmem_is_activememcg to begin with the check is useless because one cant enable kmem accounting for the root cgroup mem_cgroup_write returns einval on an attempt to set the limit on the root cgroup furthermore the check also seems to be redundant the point is memcg_can_account_kmem is called from three places mem_cgroup_salbinfo_read __memcg_kmem_get_cache and __memcg_kmem_newpage_charge the latter two functions are only invoked if memcg_kmem_enabled returns true which implies that the memory cgroup subsystem is enabled and mem_cgroup_slabinfo_read shows the output of which wont exist if the memory cgroup is completely disabled so lets substitute all the calls to memcg_can_account_kmem with plain memcg_kmem_is_active and kill the former
eb21b92ba0f591e7cc061440c14354fcd5762e45	mark irqs as disabled on unload to avoid more spew with the new warnings
e9f6499965c64109e296f61e3aa7fd91f9f2233c	net mvneta do not allocate buffer in rxq init with hwbm for hwbm all buffers are allocated in mvneta_bm_construct and in runtime they are put into descriptors by hardware there is no need to fill them at this point
febd5949e134e279bde927353dc705ce41b18e2d	hotplug init the zones size when calculating node totalpages init the zones size when calculating node totalpages to avoid duplicated operations in free_area_init_core
87c910d806295df26069d0325f517ed72ce29d32	allow concurrent vm flushes enable concurrent vm flushes for vega10
179a5bc4b8cbe68ca675057b960dd805867e41c4	use memcpy instead of snprintf in p9_mount_tag_show p9_mount_tag_show uses format string to print non-null terminated string this leads to out of bounds memory read because format implies that string is null-terminated the length of string is know here so its simpler and safer to use memcpy instead of snprintf
2930ffc7593b64fe00fd7c5a0a7f543078d73ed9	revert kallsyms fix absolute addresses for kaslr revert the recently applied kallsyms fix absolute addresses for kaslr kees said this got naked please dont apply this patch works for x86 and arm but may cause problems for others it appears that kees will be fixing all this up for __float__
3281bd4c436138351b65dff3f7ccfddeb5f02d13	iwlwifi change number of papd groups in phy db the number of the papd group was increased in new devices since we might now get empty entries on older devices dont warn if an entry is empty
2f8bdfa84a0b814ef66701be1e5dbc88433676e1	scsi megaraid_sas_fusion return correct error value in megasas_get_ld_map_info when no hba is found we should be returning to be consistent with the other return values
3d15286201b3d0c28777a0cb1a9e965ffad9d3bd	drivers staging rtl8192e fix code indent for conditional statement fixed warning suspect code indent for conditional statements
c2387cb9e55f9c85ed33a5bf086f348312158133	copy gpio number passed by platform data into driver private data it copies gpio number passed via platform data embedded pointer into driver private data so that we do not need to refer to this embedded pointer passed by platform data after probe function exits
b67cf7c44c7e6b485f1c255ac3c1fe98cc99b677	acpi scan remove unused list_headacpi_device_list the acpi_device_list list is not used so removed it rjw changelog
8b6fe20a5d7bc467865adb08c5abcf9e712cdc39	media media pci constify vb2_ops structure declare vb2_ops structure as const as it is only stored in the ops field of a vb2_queue structure this field is of type const so vb2_ops structures having same properties can be made const too done using coccinelle disable identifier i position p static struct vb2_ops identifier position p struct sta2x11_vip vip struct vb2_queue q position identifier on disable identifier struct vb2_ops i file size before text data bss dec hex filename __number__ __number__ __number__ __number__ file size after text data bss dec hex filename __number__ __number__ __number__ __number__
c62bc752f2d8cbaaa1fd15fa1bcdf10fb90568c0	use alloc_page to allocate pages shmem_read_mapping_page_gfp first tries to allocate pages from page cache so if pages are allocated from page cache then these pages could have valid cache line after that cpu may read garbage data from cache once gpu operation is completed with allocated pages so with this patch non-contiguous memory allocation request allocates pages from highmem through alloc_page with gfp_highuser_movable
56302c53d3dc477b8360954fc92c1dfc4fc0ec54	remove whoami readback after eoi after previous discussions regarding the subject __number__ theres no clear explanation or reason why the call was needed in the first place the sensible argument is some sort of synchronization between the cpu and the mpic which hasnt been pointed out precisely and is no longer required at least on booke platforms the benefit of this change is saving a mmio trap per interrupt when running in a kvm guest __number__ __number__
ba519dd46c46fb923b531ef833aac074cb0114b3	gpio intel-mid drop references to virtual irq rename the argument virq to just irq this irq isnt any more virtual than any other linux irq number we use hwirq for the actual hw-numbers virq is just bogus
84b0312eee685bd0b2ca250dcea7049c8be4b655	iwlwifi fix potential buffer overrun in fw name fix a potential buffer overrun when creating the fw name in by setting a maximal length to the char array copied to it the maximal length is also updated to __number__ rather than __number__ to keep both and alignment without requiring padding to the struct it is in
f3ac3fc287818a63072618b091074267bfa5184d	serial add missing module_alias for module autoloading support without this the module does not load automatically whenever suitable platform device appears
fff21fac75ccebacd29fc16b56a46a124359917a	serial zs fix a transmit lockup in console output transmit interrupts are disabled and the transmit buffer drained in the course of console output so that polled transmission is possible that however causes a lost transmit interrupt as the txip bit in rr3 is only set on a transmit buffer full-to-empty transition and then iff transmit interrupts are enabled at the same time consequently if console output disturbs a regular transmission in progress the txip bit is never set again and the transmission locks up waiting for a transmit interrupt fix the problem by restarting transmission manually rather than waiting for a transmit interrupt that will never happen
9dc99e10f068fb2175bf15cbaf4744aebc6fbd9a	tty serial efm32 drop before calling tty_flip_buffer_push the current driver triggers a lockdep warning for if tty_flip_buffer_push is called with locked this never shows up on up kernels and comes up only on smp kernels crash looks like this produced with driver from from from from from from from from from from from from from exception stack0xc04cdf70 to __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __address__ from from from bug spinlock lockup suspected on lock cpu __number__ pid __number__ comm not tainted __number__ workqueue events flush_to_ldisc from from from from from from from from from from from from release the port lock before calling tty_flip_buffer_push and reacquire it after the call similar stuff was already done for few other drivers in the past like commit author thomas gleixner linutronix.de date tue may __number__ __number__ arm serial fix amba drivers locking
f804fb562b0d9f4a8546fa2808d14e80aea8ff26	regmap export regmap_async_complete_cb this fixes below build error when error regmap_async_complete_cb undefined make1 __modpost error __number__ make modules error __number__
b469d4329cf949043f9b93a6644f2c64015ef8cd	kmemleak only scan non-zero-size areas kmemleak should only track valid scan areas with a non-zero size otherwise such area may reside just at the end of an object and kmemleak would report adding scan area to unknown object
af3aae10f16f05acba27294bc1ae234f3cb61a61	greybus arche-apb-ctrl introduce property for apb new dt property will allow user to disable apb1 or apb2 during boot and enable it only when needed through command prompt via sysfs interface to disable apb2 during boot specify property in respective apb node how to check the state cat it should be off if enabled in dt during runtime if desired to enable apb2 strictly and only for development purpose then respective apb can be enabled through echo active note if apb device is in state then no state transitions are permitted must first activate apb device echo active this will clear the init-disable flag and allow state transition from here onwards note that is only indicative state and is only applicable during testing done tested on and platform
817673172384887780efb89f3f00ed22c5c1a0d6	use drm_crtc_send_vblank_event replace the legacy drm_send_vblank_event with the new helper function link
7a01a0a292c25a85cd36efcd5920d2f1caccbb2b	update pdpx registers with lri commands a safer way to update the pdpx registers is sending lri commands added in the ring before the batchbuffer start otherwise the ctx must be idle before trying to change anything but the ring-tail in the ctx image an example where the ctx wont be idle is lite-restore this patch depends on mark tlbs dirty for v2 combine lri writes and save __number__ commands mika v3 rebase after changes and removed references to deprecated patches
7ad7cd6113bacace67c55cadef6459eb0e74403d	mlxsw reg use correct pbmc register length the last field of the pbmc register is at offset and its size is so the correct registers length is bytes
2adc3505cfb819c91855a64d997a7cdd9731ee6e	f2fs set sbi_need_fsck when encountering exception in recovery this patch tries to set sbi_need_fsck flag into sbi only when we fail to recover in fill_super so we could skip fscking image when we fail to fill super for other reason
038d7b593563818c5e9bc61e05c7f5ce1ce8e3ef	acpi processor return specific error value when mapping lapic id usually __number__ is returned for success in int-returning functions and negative value are returned on failure but in some function return __number__ for success and __number__ for failure which causes confusion to happen sometimes so modify the functions in question to follow the common rjw changelog
3fe15505296cb563362e2cf6d3aed73e123e0df0	usb renesas gadget fixup complete status stage after receiving current usbhs gadget driver didnt complete status stage after receiving it wasnt problem for us before because some usb class doesnt use data out stage in control transfer but it is required on some device
e2132fa66d1ee74a975fd6c42c0aa2fe91e3fc75	cpufreq spear use generic cpufreq routines most of the cpufreq drivers do similar things in and routines and so its better if we have generic routines for them which can be used by cpufreq drivers then this patch uses these generic routines in the spear driver
6441d314b4d898d871f21196fb5e6e4f82caedc7	sh remove sci_ick clock alias the sh-sci driver falls back to the peripheral clock if the sci_ick clock doesnt exist theres thus no need to create an alias for the peripheral clock named sci_ick
9b97420228881e839b76c8a4506da3cb187bf004	sctp support ipv6 nonlocal bind this patch makes sctp support ipv6 nonlocal bind by adding and check in sctp_v6_available as what sctp did to support ipv4 nonlocal bind commit cdac4e077489
ade6f8af52f5187e6af6f774cff43e0bc60902e4	get rid of divide when setting the tx request header div instructions show costly in profiles when the tx request header is set using right shift instead of a divide operation reduces the cycles spent in the function that sets the tx request header as shown in the profile use right shift operation instead profile before change __number__ user_sdma_send_pkts hfi1_user_sdma_process_requestafter profile after change __number__ user_sdma_send_pkts hfi1_user_sdma_process_request
ef7e20934ec906e7986566d45ea8ae652a64ba09	staging comedi cb_pcidas fix cb_pcidas_ao_fifo_insn_write the comedi core expects functions to write data values to the hardware fix this function to work like the core expects
c7bab9f929e5176169de2cee529ec203ca7f1584	arm shmobile r8a7794 add usb clocks to device tree horms resolved conflicts
095077ad37043574ce7a3978e92c89f535a6612c	scsi remove scsi_show_sense_hdr last caller is gone so remove it
ed633e709fa633c6bc24f4d6ecb55ad0c14fd335	acpi dock drop redundant spin lock in dock station object all dock station objects are created during initialization and dont change at runtime so drop the redundant spin lock from struct dock_station rjw changelog
a60eec0251fe1bfc0cd549c073591e6657761158	scsi smartpqi change aio sg processing take advantage of controller improvements
c81396f3da22aa8f1e8fbf7943616a0839c4d63d	mwifiex fix large amsdu packets causing firmware hang sometimes host prepares and downloads a large amsdu packet to firmware which leads to a memory corruption in firmware the reason is __dev_alloc_skb may allocate larger buffer than required size this patch solves the problem by checking instead of relying on skb_tailroom
565f3d2fd09a6e9c7615ae369beedabcf0e86b53	drivers staging lustre lnet fix style warnings remove an unecessary return statement in a void function remove an unecessary space between a function name and the parentheses
d07d39df303f91b17d41e86b402f5cf9e98e7492	set edid fake data only for test
1400615d64cf5afee533aff8234c837da465841b	vxlan allow setting ipv6 traffic class we can already do that for ipv4 but ipv6 support was missing add it for vxlan so it can be used with collect metadata frontends
d7789430de0865a55496213d6af2a870069c4dac	leds leds-ss4200 use define_pci_device_table this macro is used to create a struct pci_device_id array
f76254a845a661ccdb9fa246ee72197f90a8d3dd	fix xdp_flags_skb_mode detach for xdp_tx_iptunnel the xdp_tx_iptunnel program can be terminated in two ways after n-seconds or via ctrl-c sigint the sigint code path does not handle detatching the correct xdp program in-case the program was attached with xdp_flags_skb_mode fix this by storing the xdp flags as a global variable which is available for the sigint handler function
6d310dfb382a303cbaf838e1b680f55cef18ae03	scsi_debug test always evaluates to false should be used instead cppcheck found the following issue warning logical conjunction always evaluates to false alloc_len __number__ alloc_len __number__ test should be instead if alloc_len __number__ alloc_len __number__ this error was introduced by recent commit scsi_debug add report supported compare and write
b87c701b660f60cdb50a8613161b1037535e09b0	spi xlp fix module autoload for of registration if the driver is built as a module autoload wont work because the module alias information is not filled so user-space cant match the registered device with the corresponding module export the module alias information using the module_device_table macro before this patch modinfo grep alias alias after this patch modinfo grep alias alias alias alias
dde7e6d1abdc874e6b26e9478b7ffc43cd5e3ee7	make probe functions static the probe functions in this driver are not exported or declared for use elsewhere so make them static to fix the warnings warning symbol bcm7120_l2_intc_probe was not declared should it be warning symbol bcm7120_l2_intc_probe_7120 was not declared should it be warning symbol bcm7120_l2_intc_probe_3380 was not declared should it be link
9e873d429b583e59b25d0705d705239844a98717	usb fsl add missing platform_driver owner set the owner of platform_driver to ensure that the caller of driver holds a module refernece
6f6abd360603aff043352db90c28748c8c46560e	video fbdev pxafb fix out of memory error path as seen by julia the initial allocation memory is not checked anymore after commit video fbdev pxafb initial devicetree conversion introduce back the removed test
1bd14f37048bd77e33fd2db8950f2d41b64052f9	staging unisys memregion use proper errno for mapit
b1bdd4f883e1938a1921f300d7f164ce583b1a64	spi bcm63xx-hsspi use devm_clk_get use devm_clk_get to make cleanup paths simpler
3b5b24315781c744ab3868edee931ddb2145e6b5	asoc tlv320aic3x fix shared reset pin for dt currently the second tlv320aic3x instance fails to be probed from dt if the reset pin is shared with the first one this patch fixes it by moving the list add of the reset pin into the i2c_probe method
0111919da268e1ced315e009ad0d0435a2fb32ac	perf tools add missing node alias to the hw_cache array add node as a simple alias for node cache events the addition of node cache events broke the parse_alias function so any mismatched event caused the segfault like stat krava ls the arrays needs to follow enums adding those maxs to be size of those arrays so possible ommision in future wil not lead to segfault adding as allowed operations for node cache event link
e338a85e21d89574a0160fef7a89f42960cc5d7f	ath9k fix invalid noisefloor reading due to channel update while switching the current channels nf values are updated into history buffer since the current channels channel type channel flag got updated before reading nf value from hw this channel type mismatch is causing invalid readings when hw is on ht20 but getnf tries to read on extn chains
084244646217ec83970facaf7baf200c02a8183e	video fbdev aty use c99 initializers in structures use c99 initializers for structures a simplified version of the semantic match that finds this problem is as follows identifier type t field listn fs struct i1 fs t fld identifier expression e initializer is struct i1 i2 is e e
ddb09754e6c7239e302c7b675df9bbd415f8de5d	uio fix vma io range check in mmap the vma range size is always page size aligned in mmap while the real io space range may not be page aligned thus leading to range check failure in the uio_mmap_physical for example in a case of io range size and we have due to len is aligned to page size in do_mmap_pgoff now fix this issue by align to page size in the check
0384e8c6c6fa49dae44ffad31958e9b897da0160	of empty node property flag accessors when introduce empty node and property flag accessors when config_of is not defined this allows us to use them without ifdefing them in places where it makes sense to do so
52c94f413fdf5011b7e54ae68e0a2cfcb1b311df	ath9k add support for get_stats callback this useful for debugging and to keep track of of frames such as ack rts and fcs error count in a noisy environment
6aadf41d6b9f8da68db5962929c07f816db15893	alsa hda name the primary out as speaker when needed for via codecs when the primary output is the speaker output rather name it as speaker this will be more intuitive
8c203dbb78ca7a9aed4e2570c866b0f43c752e41	add tsc timestamp to the injected mce the mce injection code does not provide the time stamp information for the injected mce add it link
6d67942dd0ebc3dddc86edf9208169d064a9b3d7	bpf add __must_check attributes to refcount manipulating helpers helpers like bpf_prog_add bpf_prog_inc bpf_map_inc can fail with an error so make sure the caller properly checks their return value and not just ignores it which could worst-case lead to use after free
49bb6402f1aa1effa9d9c5df39d91a86ca8fd736	alsa compress_core add support for capture streams
d52c1bcc647ca41ee563bc38d8231e5f3816112c	btrfs avoid heavy operations in btrfs_commit_super the git blame history shows that the old transaction commit code has to do twice to ensure roots are updated and we have to flush metadata and super block manually however right now all of these can be handled well inside the transaction commit code without extra efforts and the error handling part remains same with the current code return to caller once we get error this saves us a transaction commit and a flush of super block which are both heavy operations according to ftrace output analysis
e56516867f3de862df5fd9cf30e54a0b73921e83	uio uio_aec remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
88cd4e882de73c2e62c38591abfe8c13fcc8386a	arm zynq not to rewrite jump code when starting address is this configuration is used by remoteproc
ca67f10f27b6aace4a87713f038577994ec578af	pinctrl join dev_dbg strings into a single line these are user-visible strings so can exceed __number__ columns
4de0ed7cf7a49384f3438a39543fb85d6dcd3bfc	media si2168 implement sleep implement sleep for power-management
ac9dc85eeaf2e8f19a1846979c4dc700d4fb54dc	gpio xgene use gpiochip data pointer this makes the driver use the data pointer added to the gpio_chip to store a pointer to the state container instead of relying on container_of
2f60b28831c7e63759b59113898e6fe4dc90dd43	use rb_entry to make the code clearer use rb_entry instead of container_of to deal with rbtree
4d0aa49157a38eb2be8a2ed3bf9900afa796b8d5	mmc sdhci-s3c constify platform_device_id the platform_device_id is not modified by the driver and core uses it as const
4eed83a252257ad8ad41ba1c769341960ed4cdc5	mwifiex simplify ad hoc join capability info while preparing an ad-hoc start command the capability info bitmap is needlessly set from the command and then the ess bit cleared change to set the bitmap directly without reference to the command
bcc5defa1a3fc7c6224248ff93d71694743ebb6a	staging dwc2 add helper variable to simplify code now a register is masked only in once place instead of twice this makes the two uses of this value shorter so they no longer need to be linewrapped
bfbb92c446700da645e4834fb01439097846ce1e	net macb handle the rxubr interrupt on all devices the same hardware issue the at91 must work around applies to at least the zynq ethernet and possibly more devices the driver also needs to handle the rxubr interrupt since it turns it on with macb_rx_int_flags anyway
a04ce20d9f5e9484ed3879e1290bd05933cbbe2a	usb gadget dummy_hcd move the transfer part into its own function this patch moves the part of the code which does the bare transfer into its function it is a preparion for the implementation of sg support
00d696f5291a6c749511b0f3c884c5f6d00f7339	dmaengine tegra use dma_complete for dma completion status
0cdc63449df6ee5e7840b3e58554d7a41068b542	e1000e cleanup remove redundant defines which are defined elsewhere
3fde33b7629518e2233325be10cd06f20e425e88	iwlwifi bump required firmware api version for a new firmware is coming out soon with new apis to make sure that this new firmware wont be loaded on old driver that dont support it its api version has been updated to __number__ in order to be able to load it bump the api version to __number__ api version __number__ is still supported and will be for another year or so
d04e0ba3432e3fa68bd779330e0f79a9d979bc5f	make sure irq remapping still works on dma init failure do not deinitialize the amd iommu driver completly when interrupt remapping is already in use but the initialization of the dma layer fails for some reason make sure the iommu can still be used to remap interrupts
9d9598b81c5c05495009e81ac0508ec8d1558015	virtio-blk emit udev event when device is resized when virtio-blk device is resized from host using block_resize from qemu emit kobj_change uevent to notify guest about such change this allows user to have custom udev rules which would take whatever action if such event occurs as a proof of concept ive created simple udev rule that automatically resize filesystem on virtio-blk device
59f6e2073c72d36c814a4417320bfa4874faa228	percpu resolve ambiguities in a commit in linux-next was causing boot to fail and bisection identified the patch percpu resolve ambiguities in one of the changes in that patch looks very suspicious reverting the full patch fixes boot as does this fixlet
62710c121b262fb8fe26d50179ab407e421969ed	clk stm32f4 add sai clocks this patch introduces sai clocks for stm32f4 socs
a006353a9a8d9e28d35f94bfc97e9573d6ee28aa	af_iucv use paged skbs for big inbound messages when an inbound message is bigger than a page allocate a paged skb and subsequently use iucv receive primitive with ipbuflst flag this relaxes the pressure to allocate big contiguous kernel buffers
e9883ef228e5c128d34143ae87c97f555f79620c	mmc meson-gx remove member parent_mux from struct meson_host member mux_parent isnt used outside meson_mmc_clk_init so remove it and replace it with a local variable in meson_mmc_clk_init
f81700bd831efcd12eb7f0e66b24b16c2ad00a32	procfs dont need a path_max allocation to hold a string representation of an int
7ac26436677024ab5e57e25c2c83d4c3fc232106	cpuidle ensure menu coefficients stay within domain the menu governor uses coefficients as one method of actual idle period length estimation the coefficients are as detailed below multipliers giving expected idle period length from time until next timer expiry the multipliers are supposed to have domain of the coefficients are fractions where only the numerators are stored and denominators are a shared constant since the value of the coefficient should always be greater than __number__ and less than or equal to __number__ the numerator must have a value greater than __number__ and less than or equal to if the coefficients are updated with measured idle durations exceeding timer length the multiplier may reach values exceeding unity the stored numerator exceeds this patch ensures that the multipliers are updated with durations capped to timer length
5024a2b7ae9a92b8ec97ac1507efb283778480ce	drm sti hda fix return value check in sti_hda_probe in case of error the function devm_ioremap_nocache returns null pointer not err_ptr the is_err test in the return value check should be replaced with null test
cffa781e59070cf115525a57e8f6042bd4e2bf7c	simplify check for idleness in hangcheck having fixed the tracking of the engines last_submitted_seqno we can now rely on it for detecting when the engine is idle and not have to touch the requests pointer testcase
fe707664879b15b9caafd3b9f0f9897aa26a7edd	add pipeline sync for compute job hardware ring is async processed the job is executed in parallel in some case this will result vm fault like jobs with different vmids this works around a cpc hw issue which will eventually be fixed in fw
97b290b5637f473588a297834c10cd750718e980	mips octeon fix to ip checksum offloading in little endian when hardware checksum generation is switched on the checksum generation was only being signalled to the hardware correctly in big endian mode patchwork
ffb955dba61dd823c3d52a083b6c8d0dcfda0efe	btmrvl use dts irqflags for wakeup pin use irqflags parsed from dt
332f46e4be24f252fdc719abd52f3ac711c0aab4	staging comedi ni_labpc_common move calib readback value to move the of the calib subdevice value to the function
a5e7a2dcfcf360f285db9edd479491b1e2207b4f	crypto tiger use crypto_unregister_shashes combine all shash algs to be registered and use new crypto_unregister_shashes functions this simplifies code
3802a259272e48870b8d7e02c4fc28f938a699cb	asoc omap-dmic assign the dai dma data at earlier time assign the dai dma data at dai driver probe time not in startup
334b8db3a6c57bec78bcaacef3b1658bfc6e2efe	display fw version adding a sysfs file for getting the fw version
bd62fa5e1067bd5a3c8421ae3de0021a67223e22	greybus arche-apb devm_regulator_get doesnt return null and so we dont need to check for it
1b49dcf3d7c765ad18ca7167a0e441824eb1f7af	add virtio_scsi_cmd_req_pi virtio_scsi_f_t10_pi bits this patch adds a virtio_scsi_cmd_req_pi header as recommened by paolo that contains pi_bytesout pi_bytesin elements used for signaling when protection information buffers in bytes are expected to preceed the data payload buffers also add new virtio_scsi_f_t10_pi feature bit to be used to signal host support
32eaa5841021c8d812a4f62898a6e8617d648846	omapdss add helpers add helper functions ovl_manual_update and mgr_manual_update which return whether the overlay or manager is used with a manual update display
b57b63a2ace84d09c6fc270150d0408ddef1efa7	prepare for killing free_all_bootmem_node prepare for killing free_all_bootmem_node by using free_all_bootmem
a1645eefc8358d0a9dbeba254e51aa89de4d80a4	usb misc sisusbvga avoid null pointer dereference from sisusb a failed kzalloc is reported with a dev_err that dereferences the null sisusb this will cause a null pointer deference error instead pass to the dev_err rather than smatch analysis sisusb_probe error potential null dereference sisusb kzalloc returns null
a5ef01aaac245d37edf113d65b0c146e96d841d1	bpf remove unused but set variable in __bpf_lru_list_shrink_inactive remove the unused but set variable first_node in __bpf_lru_list_shrink_inactive to fix the following gcc warning when building with warning variable set but not used
0357d2f2a8cde3069d800eb63c1ee41fed31e1b1	hexagon remove keyring related call
81ab9f6c5ff8565e4cba330e340a8979a10521d7	mips ralink dont set pm_power_off setting pm_power_off is apprently wrong and makes drivers such as gpio-poweroff not work patchwork
916136b374566181386bb79ed638de8a8d8b426e	s390 io remove dummy relaxed accessor macros for reads these are now defined by so we dont need the private definitions anymore
6a485eb9a921cd1276fc63b4967e6b713fffb6f3	scsi lpfc fixed iocb flags not being reset for scsi commands
2aae92bdc25325cfd782cc76842a4302540958f2	greybus revert greybus uart dont use spin_lock_irq this reverts commit bd3c4aa99dc23449699432e0744bcb5af7afa98c someone decided that all use of spin_lock_irq was to be considered a bug and went on a search-and-replace type bug-fixing spree last week this is however just plain wrong using spin_lock_irq is perfectly fine in paths were interrupts have not been disabled and this is in fact even preferred over the lazy approach of always using spin_lock_irqsave instead of understanding the code that is being written or modified all current uses of spin_lock_irq have already been vetted in this respect also note that it is only used in functions that may sleep that is in functions that must not be called with interrupts disabled in the first place
6f157edb4daa75ffc9e756b2ee8159270418d66f	wl18xx fallback to default conf in case of invalid conf file if the file is missing or invalid due to recent driver change fallback to default configuration instead of failing driver load
34074205bb9f04b416efb3cbedcd90f418c86200	crypto qat remove redundant arbiter configuration the default arbiter configuration for ring weights and response ordering is exactly what we want so we dont need to configure anything more this will also fix the problem where number of bundles is different between different devices
e866dd8aab76b6a0ee8428491e65fa5c83a6ae5a	greybus fix a leak on error in gb_module_create we should release as well
0b60eba1b29740a606e6b7694d2dc98b6085a1bf	bluetooth dont send unnecessary write_le_enable command if the local host features indicate that le is already in the state that is desired theres no point in sending the hci command to try to change the setting
d9510a20f81467b48cd005e86e17b5288990bc71	ocfs2 remove pointless assignment from ocfs2_calc_refcount_meta_credits the assigned value is never used coverity-id __number__
d991b98f5006e36b7ee9f8ef89ed3a8636692d69	fix first fragment frag1 handling the first fragment frag1 must contain some payload according to the specs however as it is currently written the first fragment will remain empty and only contain the headers this patch also extracts the transport layer information from the first fragment this information is used later on when uncompressing udp header thanks to wolf-bastian for noticing that the offset value was not properly initialized
31d610f19670825a0058b70f44570e9ab21a0011	pinctrl imx1-core populate subdevices support gpio devicetree subnodes to allow a more detailed dt hardware description
4a163c82d600e554ef79e931db6315026e1fc819	asoc add extra parameter to device_prep_dma_cyclic since commit dmaengine add context parameter to prep_slave_sg and prep_dma_cyclic prep_dma_cyclic got an extra context parameter add this new parameter in order to fix the following build error mxs_defconfig and imx_v4_v5_defconfig error too few arguments to function
982290a7fe36e528af292d3e3b61939b1900bfc6	check port number for validity before accessing data need to validate port number at mlx4_promisc_qp before use since port number is extracted from gid as a cooked or corrupted gid could lead to a crash
53d0b3ae2590bbd15620ce905c05320ed9cfed1a	i40evf refactor shutdown code if the vf driver is running in the host the shutdown code is completely broken we cannot wait in our down routine for the pf to respond to our requests as its admin queue task will never run while we hold the lock instead we schedule operations then let the watchdog take care of shutting things down if the driver is being removed then wait in the remove routine until the watchdog is done before continuing change-id i93a58d17389e8d6b58f21e430b56ed7b4590b2c5
179f36dde3cec0f9f05a757b68f6a58e4edbcc95	revert perf symbols fix mismatched declarations for elf_getphdrnum this reverts commit f785f2357673d520a0b7b468973cdd197f336494 we have a test to check if elf_getphdrnum is present so if it fails well get cat cc1 warnings being treated as errors in function warning implicit declaration of function and this block will not be compiled have_elf_getphdrnum_support static int elf_getphdrnumelf size_t so if elf_getphdrnum is being defined somewhere there is a problem with the test that is not detecting that function go fix it link
887c206a2257c3363f4b339cc39f39d48deeec5b	arm dove fix compiler warnings with builds add missing static keywords remove the unused function dove_crypto_init
250e41ac9f31216db1b592bfd77c6a097f10503d	alsa hda enable unsol event for ati and nvidia hdmi codecs too ati and nvidia hdmi codecs have also the pin-detection capability so lets enable the jack-detecion for them too
c509ba6e48d394aa7fe0f04c38493967c1268317	usb musb virthub use fix using the bare numbers to set the whubcharacteristics field of the hub descriptor while the values are in
d790ad03ed3432839151bc54c611ec87df8bf896	vop test for when connected to the mipi dsi output we need to use for the internal connection but these flags are meaningless for dsi panels switch the test so that we do not set the bits unless the mode requires it seanpaul resolved conflict using macros instead of hardcoded values link
ca9248d8337d525c2d2b26a1d8314478d15707fb	gfs2 allow caching of rindex glock this patch allows caching of the rindex glock we were previously setting the gl_nocache bit when the glock was released that forced the rindex inode to be invalidated which caused us to re-read rindex at the next access however it caused the glock to be unnecessarily bounced around the cluster this patch allows the glock to remain cached but it still causes the rindex to be re-read once it has been written to by gfs2_grow ben and i have tested single-node gfs2_grow cases and ive tested clustered gfs2_grow cases on my four-node cluster
2a29edf69807a43ad7594554cea4def755443103	staging comedi s526 cleanup s526_gpct_rinsn use a local variable for the iobase of the channel being read this makes the inw calls a bit cleaner move the masking of the read data to make the value stored in the data array a bit clearer the comedi core expects insn_read functions to return the number of insn data values read for this function the final value of i is correct but change the return to just to make it clear
090ad325068810a9edb09dfe8fec97a724c5743f	input elan_i2c report hovering contacts when hover is detected report abs_mt_distance as __number__ for active contacts the distance is reported as __number__
3b2cfd6e1a4e727787b0a27ee7985e4012d7a142	media ngene update for latest cxd2099 modifications for latest cxd2099
9f7eb5367d0001536c361bd1400e14521f854ff1	actually use the vm map parameters
f396df35188c59a5ecb83932190505ef297754e6	kvm ppc book3s pr fix sparse endian checks while sending sparse with endian checks over the code base it triggered at some places that were missing casts or had wrong types fix them up
0e8d1602b223efcd4eaaa799314f5d7ad1742035	ath5k free in ath5k_deinit_softc nothing else is freeing it and this mirrors the error handling path already in ath5k_init_softc
4d9bb75823eb1e22f8d6d13112d5eb6850fea475	mips netlogic remove unused pcibios_fixups this global is unneeded and seems to be carried over from ancient code patchwork
29f043a2caea2860db36fbeda0c17f79bf0cffbe	sparc make sparc use the new is_idle_task api change from direct comparison of with zero to is_idle_task
bc8eadd46c05280f7ddcf2ab7cf97d1cd15a578c	greybus arche-apb-ctrl do not export any gpios with addition of operational state in driver can switch to fw flashing state through sysfs so no need to export any gpios to userspace now testing done tested on and platform
418d620e080f3d17735be8ee95a2f40c0e6edc3e	video s3c-fb return an error when bpp is invalid this patch returns an error when bpp is invalid in s3c_fb_check_var if invalid bpp is requested an error should be returned
49e226323d462785582750d9f38acca5ffa5dd48	regulator reverse the disable sequence in regulator_bulk_disable often there is a need for disabling a set of regulators in order opposite to the enable order currently the function regulator_bulk_disable walks list of regulators in same order as regulator_bulk_enable this may cause trouble especially for devices with mixed analogue and digital circuits so reverse the disabling sequence of regulator_bulk_disable while at it also correct the comment
3f50a69077b5b8086fd16cfa0b71138082126a69	iwlwifi mvm check iwl_mvm_wowlan_config_key_params return value commit iwlwifi mvm refactor d3 key update functions refactored some code into iwl_mvm_wowlan_config_key_params function but the return value was never checked and not all the function flows returned valid values fix it
a53fd61ac2f411745471c1c877d5e072fbbf0e5c	enable hardware breakpoint upon re-registering on powerpc ptrace will disable hardware breakpoint request once the breakpoint is hit it is the responsibility of the caller to set it again however when the caller sets the hardware breakpoint again using ptraceptrace_set_debugreg child_pid __number__ addr the hardware breakpoint is not enabled while gdbs approach is to unregister and re-register the hardware breakpoint every time the breakpoint is hit which is working fine this could affect other programs trying to re-register hardware breakpoint without unregistering this patch enables hardware breakpoint if the caller is re-registering
af87b3d0151e39f23e795d327e25019be687d8c0	bluetooth hidp dont send boot-protocol messages as hid-reports if a device is registered as hid device it is always in report-mode therefore we must not send boot-protocol messages on hidinput_input_event callbacks this confuses devices and may cause disconnects on protocol errors we disable the hidinput_input_event callback for now we can implement it properly later but lets first fix the current code by disabling it
06b3a860dcf596bdc2bb1cca3252d3907b581938	btrfs fix missing deleted items in btrfs_clean_quota_tree steps to reproduce mount btrfs quota enable btrfs qgroup create while do btrfs qgroup create btrfs qgroup assign done btrfs quota disable umount btrfsck you can also use the commands btrfs-debug-tree grep qgroup you will find there are still items reasons why this happens is because the original code just checks and returns we try to fix it by deleting the leaf one by one
4dd322bc3b25be40dfa91e8ac483b846f3e8dffc	setup up shared_info for pvhvm the shared_info structure is provided via the same way as for normal pv guests see that is during bootup we get xen_start_info via the register in startup_xen then later we extract the shared_info from said structure in xen_setup_shared_info and start using it the xen_setup_shared_info is all setup to work with auto-xlat guests but there are two functions which it calls that are not xen_setup_mfn_list_list and xen_setup_vcpu_info_placement this patch modifies the p2m code xen_setup_mfn_list_list while the piggyback on pvhvm for event channels modifies the xen_setup_vcpu_info_placement
8316bd72c0248adbb9572abf2dd045a95f682bcd	pm hibernate use rb_entry since the software suspend extents are organized in an rbtree use rb_entry instead of container_of as it is semantically more appropriate in order to get a node as it is iterated
901ea5e3a8251c05fcf252149103df7f35733967	input auo-pixcir-ts simplify function return logic the invoked function already returns zero on success or a negative errno code so there is no need to open code the logic in the caller this also fixes the following make coccicheck warnings end returns can be simplified and declaration on line __number__ can be dropped
bee1b848877b9e4512bdda480f73cda12b593e2f	brcmfmac increase required skbuff headroom for firmware signalling in preparation of firmware signalling feature additional headroom is needed to accommodate signalling protocol data between host and firmware
df1a000e767f54a539f4d2d663130d063f5208ea	m68knommu switch to gpio init macros in coldfire __number__ init code modify the gpio setup table to use the macros for table init simplifies code and reduces line count significantly
23567c75286f63f77e5ec6bab7f46e0161d75356	staging wlan-ng fix brace coding style issue in this is a patch to the file that fixes up a brace warning found by the tool
dcd454af221920990cef8000ef1830c94ef846f9	microblaze add pvr version string for mb and extend pvr reg decoding
7d5b12f5a01d338d23874c7c242a74813a8848b2	perf annotate browser count the numbers of jump sources to a target instead of simply marking an offset as a jump target so that we can implement a new feature showing jumpy targets addresses that lots of places jump to link
e3794b52f56ac20947a2dbdd505e9ad29013c555	staging comedi ni_pcidio grab mite spinlock while preparing dma when setting up the dma for read streaming acquisition command grab the mite channel spinlock before preparing and arming the dma change inspired by ni_ai_setup_mite_dma in
87089dd76815b153892ed4c9f4006d66c087ae28	net ps3_gelic add missing to end of deb_dbg message trival fix dev_dbg message is missing a so add it
49bce159fb3750eaf586c0b583a4930ca9db0d9c	usb gadget xilinx fix devm_ioremap_resource check devm_ioremap_resource returns iomem_err_ptr and it never returns null fix the check to prevent access to invalid virtual address
da28caaaf878b224c3ca89c1eb7373536cc5d556	hwrng pasemi migrate to managed api use devm_ioremap and devm_hwrng_register instead of ioremap and hwrng_register this removes unregistering and error handling code changes in v2 remove hardcoded resource size in ioremap use resource struct obtained by calling platform_get_resource removing hardcoded resource size was suggested by labbe corentin
ff4dd73dd2b4806419f8ff65cbce11d5019548d0	mac80211_hwsim check hwsim_attr_radio_name length unfortunately the nla policy was defined to have hwsim_attr_radio_name as an nla_string rather than nla_nul_string so we cant use it as a nul-terminated string in the kernel rather than break the api kasprintf the string to a new buffer to guarantee nul termination
906a7985f72ee2f28433e2dd847a013da0e4cdea	caif remove unused struct member the tty_name member of struct ser_device is never set or used so it can be removed the definition of struct ser_device is private to this file and the identifier tty_name only occurs in this one place
4d2fcfbcf8141cdf70245a0c0612b8076f4b7e32	ixgbe need not repeat init skb with null
87eaec5dff4e20228fb6ac72dc849fd12f4e86be	media m5mols enable v4l subdev device node set v4l2_subdev_fl_has_devnode flag for the host driver to create the sensor device node
801cb2d62d5f673ac671c01397956d8b77a5215b	nfsd remove unused get_new_stid get_new_stid is no longer used since commit nfsd4 simplify idr allocation remove it
4d27b2ca154eff58f4d7f34e4cd374c1070a56fc	staging check return value of ipu_reset ipu_reset can fail with a timeout check the return value and act appropriately
f159451c12f47acec84d13028781e9a296dbdd7b	media ttusb-dec convert set_fontend to use dvbv5 parameters instead of using dvb_frontend_parameters struct that were designed for a subset of the supported standards use the dvbv5 cache information also fill the supported delivery systems at dvb_frontend_ops struct
dae928ec3c29e7e16723c9c4c1299e00f4e9e949	input alps detect trackstick presence for v7 protocol this patch adds detection of trackstick for v7 protocol devices code in this patch is used in official dell touchpad linux drivers for dell models dell latitude detection code and base reg for alps v3 rushmore and v7 devices is exacly same also user in bug reported that toshiba sattellite z30-a-1dg has only alps v7 touchpad device without trackstick and kernel reports to userspace also redundant trackstick device
8be69efacdc73fc110624f847bdf04b83decfc70	alsa hda remove speaker clicks on cx20549 this chip needs the speaker pin to go to d3 to avoid clicks so default_power_filter does not work here this was found on thinkpad but i guess it applies to the entire chip if not quirks should be set for at least pci ssid thanks to c4pp4 for testing buglink
e866853d67868ac0f7e0779d19aaad07285c9ff3	iio mma8452 avoid switching to active because of config change the devices config registers can only be changed in standby mode up until now the driver just held the device active so for changing a config it was necessary to switch to standby for upcoming support for runtime pm the device can as well be in standby mode instead of putting runtime pm functions in there just keep the device in standby if it already is this section is protected by a lock after all
7586f90784be0e7153f6ec4de8317168874c4a6e	staging comedi dmm32at rename dmm32at_fifostat for aesthetics rename this define used for the fifo status register define the bits of the register
b8acd7750a2366216d9ec81f96b0594f6bb86707	staging comedi contec_pci_dio cleanup find pci device code add a couple local variables and reorder the tests to make to make the more concise change the printk to a dev_err when no match is found and reword the message
29c9862f1b818bf4caa4c48a30dbe5f25c84ee08	perf session remove impossible condition check the size cannot be __number__ because it was set to __number__ on the above line in case it was __number__ and never changed link
8a5e3d472e04a19a47de41cbe4856169ade11af2	i2c au1550 relax bus timings a bit the i2c-au1550 driver has to program various setup and hold times for the signals by hand the current values seem to be working best when the driver is supplied with however on the db1300 board is the closest we can get to it and the timings are a bit too tight for that leading to the last bit of a transmission sometimes being swallowed this manifests itself in wrong readings of the ne1619 sensor and inability to configure the wm8731 i2s codec with the relaxed timings both the sensor and the i2s codec can now be accessed more reliably over a wider range of i2c block input frequencies verified on db1200 db1300 and db1550 boards
bbff83dbb717dca6248615d82cc00fb3466fb805	staging wilc1000 rename strwidlist in handle_scan this patch renames strwidlist to wid_list to avoid camelcase
36e7972c0d3f8819a5d9335c36c5dcd168cd2b72	asoc intel skylake remove call to pci_dev_put the pci bus takes pci_dev_get and pci_dev_put is also there so no need for drivers to invoke these in skl driver we were calling pci_dev_put only which is not right so remove this
37ba8fca7e42b6e689689217b9739e3a9a3c35e6	alsa fm801 save context before suspend devices in symmetry we save context first before suspend and restore it last after resume
51a8cf9d2d97017d334f33f1b39067bd2f03bc49	btrfs fix btrfs_is_free_space_inode to recognize btree inode for btree inode its root is also tree root so btree inode can be misunderstood as a free space inode we should add one more check for btree inode
f66138c8471442c24c58cdce6ba5f36c5ce93d7a	sctp add a checking for sctp_sysctl_net_register when register_net_sysctl failed we should free the sysctl_table
b7b6a688d217936459ff5cf1087b2361db952509	bnx2 convert to skb paged frag api
a672e1be30d5bc848cd0067c55ed29b2015b7c17	xfs check for possible overflow in xfs_ioc_trim if or is bigger than filesystem size return invalid value error this fixes possible overflow in btobb macro when passed value was nearly ullong_max
814fb8754155ef9535cad4ef1ce06429fe7988c6	refactor find_flow_rule the way we compare between two dests will need to be used in other places in the future so we factor out the comparison logic between two dests into a separate function
747172ac55e6251d91b210455ff45124b51ff95f	staging comedi hwdrv_apci3120 cleanup printk messages remove the printk messages that are just driver development debug noise and convert the rest to dev_err
729be47735638c3441f67d8c7e99c20f6086e5df	usb pl2303 remove unused define remove unused closing-wait define
ab99cb18ae5cbb93f650ba7bc305aae6155da880	media fix error return code convert a nonnegative error return code to a negative one as returned elsewhere in the function a simplified version of the semantic match that finds this problem is as follows return ret __number__ when ret e1 when when ret e2 when forall return ret follow the style check ret __number__
b09b9195b3722928918a5e612f7aec5719a061bb	panasonic-laptop remove sparse_keymap_free calls as sparse_keymap_setup now uses a managed memory allocation for the keymap copy it creates the latter is freed automatically remove all calls to sparse_keymap_free as this reduces acpi_pcc_destroy_input to one line replace all calls to that function with direct calls to input_unregister_device
1f6189ed18cbd99d90bffdbc76c3adc54418b2fd	amd64_edac cleanup return type of amd64_determine_edac_cap sparse complains that edac_cap was declared as dev_type and we are returning edac_type historically edac_type was correct but since then we have changed it to return a bit field link
df8fbc231b7e4a78dae2b02e116fe73e4ea63cb0	reduce memory footprint for debugging there is no need to use hex_dump_to_buffer since we have a kernel helper to dump up to __number__ bytes just via printk in our case the actual size is __number__ bytes
b0bb83df0a004ff6ef9b1a11784361c9eb63dbf9	leds-gpio of led should not be created if its status is disabled now the leds-gpio driver will create every child led node without checking the status is disabled or not for example if we have a led node like d3 and its status is disabled leds d3 label d3 gpios __number__ status disabled we except the d3 should not be created and the gpios should not be request as well but current driver will create d3 and request its gpio this patch fix this by using for_each_available_child_of_node and of_get_available_child_count to enumerate all child nodes so the disabled node will be inavailable
1ca7ee30630e1022dbcf1b51be20580815ffab73	tcp take care of overlaps in tcp_try_coalesce sergio correia reported following warning warning at warnskb cleanup rbuf bug copied seq rcvnxt it appears tcp coalescing and more specifically commit b081f85c297 net implement tcp coalescing in tcp_queue_rcv should take care of possible segment overlaps in receive queue this was properly done in the case of out_or_order_queue by the caller for example segment at tail of queue have sequence and we add a segment with sequence this can happen in case of retransmits in this case just dont do the coalescing
8e8da023f5af71662867729db5547dc54786093c	x86 fix boot failures on older amd cpus people with old amd chips are getting hung boots because commit bcb80e53877c x86 microcode amd add microcode revision to moved the microcode detection too early into early_init_amd at that point we are early in the booth that the exception tables havent even been set up yet so the whole rdmsr_safemsr_amd64_patch_level doesnt actually work if the rdmsr does a gp fault due to non-existant msr register on older cpus we cant fix it up yet and the boot fails fix it by simply moving the code to a slightly later point in the boot init_amd instead of early_init_amd since the kernel itself doesnt even really care about the microcode patchlevel at this point or really ever its made available to user space in and updated if you do a microcode load
44b911e77793d686b481608770d0c55c18055ba0	fix uninitialized fields in rule when adding promiscuous mode to device managed flow steering in procedure mlx4_flow_steer_promisc_add several fields were left uninitialized in the rule structure correctly initialize these fields
62a193edaf90df38356e292f47a17f28e0cee3f1	kvm x86 request interrupt window when irq chip is split before this patch we incorrectly enter the guest without requesting an interrupt window if the irq chip is split between user space and the kernel because lapic_in_kernel no longer implies the pic is in the kernel this patch tests pic_in_kernel to determining whether an interrupt window should be requested when entering the guest if the apic is in the kernel and we request an interrupt window the guest will return immediately if the apic is masked the guest will not not make forward progress and unmask it leading to a loop when kvm reenters and requests again this patch adds a check to ensure the apic is ready to accept an interrupt before requesting a window use the other newly introduced functions paolo
1842dd8b7bc7d713d3c252a501411b5009b3987d	greybus gpio fix null-deref on short irq requests make sure to verify the length of incoming requests before trying to parse the request buffer which can even be null on empty requests
8fc8cf4482fa1b983a5e971aa037aaa76179b28c	staging rtl8723au fix sparse warning cast to restricted __le16 usptr is used as __le16 but was defined as u16 this was reported by sparse as warning cast to restricted __le16 this patch fixes the type of usptr
406636340c301b46062b22f94e3815ef767bd6a3	caif_usb check driver name before reading driver state in netdev notifier in cfusbl_device_notify the usbnet and usbdev variables are initialised before the driver name has been checked in case the devices driver is not cdc_ncm this may result in reading beyond the end of the netdev private area move the initialisation below the driver name check
ed73591a5c2ea4a77e89a2ef303a92e2e5c517da	staging ipu-di change di address info to dev_dbg currently when ipuv3 is probed we have imx-ipuv3 __number__ di0 base __number__ remapped to imx-ipuv3 __number__ di1 base remapped to imx-ipuv3 __number__ ipuv3ex probed the di base address and the remapped address are more interesting for debug purposes so mark this message as dev_dbg instead
6eded1004abb060fbdf69611abc560c717f2bb8b	bluetooth use lmp_sniff_capable where applicable this patch replaces all lmp_sniff bit checking by the helper macro lmp_sniff_capable
09a0c3f110b2fbe3bd03817c416d00968666fd74	kvm x86 fix kvm clock versioning kvm updates the version number for the guest paravirt clock structure by incrementing the version of its private copy it does not read the guest version so will write version __number__ in the first update for every new vm including after restoring a saved state if guest state is saved during reading the clock it could read and accept struct fields and guest tsc from two different updates this changes the code to increment the guest version and write it back
fea1b139735355fe17a66f63811c58698ff03ec5	aoe do not bug if memory pressure prevented debugfs file creation if the system has trouble allocating memory for the creation of the aoe debugfs directory or of a file inside it the debugfs member of an aoedev can be null do not treat a null debugfs pointer as a bug on aoedev shutdown avoiding the user impact of an unecessary panic
398205b8391b208f0034a392242867b28ad8af3d	blk_mq call in blk_mq_run_hw_queue and only if needed surrounds every call to blk_mq_run_hw_queue except the one in in fact that one is always asynchronous and it does not need smp_processor_id we can do the same for all other calls avoiding preempt_disable when async is true this avoids peppering with preemption-disabled regions
ffd435924c86de055d33fe59941841819eef9f6a	cap cq size at t4_max_iq_size
1e3176885cce8e0137d6f4072c5910bfa00901ed	net sched use hrtimer_resolution instead of hrtimer_get_res no point in converting a timespec now that the value is directly accessible link
6528ca19c1c8d4756b534a1ce9df4c3849f9dd04	leds bcm6328 fix module autoload for of platform driver this platform driver has a of device id table but the of module alias information is not created so module autoloading wont work
5be56a62a2868f4b7733c7c51106a8b0a88b9380	pxa2xx pcmcia stargate __number__ use gpio array kill off the buff gpio as not used anywhere
00ad4c4e81ba8bfcc52c42ec9d72ff84a081fb82	tcm_fc handle target_submit_tmr allocation failure this patch makes ft_send_tm handle target_submit_tmr allocation failures via an ft_send_resp_code_and_free fcp_tmf_failed status
9f2c519c9f27d804b54422afd31a17335b32a556	memory omap-gpmc use of_platform_default_populate to populate default bus use helper of_platform_default_populate in when possible instead of calling of_platform_populate with the default match table
103eb3f7bfb4fce0e299afbf50fef8ffa8d9d38c	crypto drbg avoid duplicate maintenance of key the tfm object maintains the key for the ctr drbg
32c90f1682a01ff9e1c2fa83c18a15e35f7563ce	mtd spi-nor improve macronix_quad_enable the patch checks whether the quad enable bit is already set in the status register if so the function exits immediately with a successful return code
aab17139a0eec686bad80579f7a5d6969c998392	pipe registers need an offset on vlv
f609c29dfb7a5729bfab9384fad45fbf12653c67	staging comedi dt282x introduce dt282x_isadma_program introduce a helper function to program the isa dma controller program the isa dma as described in
694f9963edd831e4ed6fdbcb7134525cf5715a79	media media davinci_vpfe clear the output_specs clear of the output_specs before passing it to the configure_resizer_out_params so that no garbage values are set this fixes following build warning in function resizer_set_stream warning may be used uninitialized in this function note was declared here struct vpfe_rsz_output_spec output_specs
50690762cfe32abadbaa5b22bebe3855e5b8ede8	fix leaked ioremap mapping iommu_load_old_irte appears to leak the old_irte mapping after use
013a67ea69d7caac094e6d144507246f10f24d9a	iwlwifi pcie request one more interrupt vector we want to request an interrupt vector for rss queue per cpu one vector for fallback queue and one for non-rx interrupts future patch will make sure that no rss traffic is directed to fallback queue this will enable us to enable fast path on traffic that otherwise would have been received on the fallback queue
e203db293863fa15b4b1917d4398fb5bd63c4e88	fix debug_read_tlb to use seq_printf the debug_read_tlb uses the sprintf functions directly on the buffer allocated by buf kmalloccount without taking into account the size of the buffer with the consequence corrupting the heap depending on the count requested by the user the patch fixes the issue replacing sprintf by seq_printf
c2f83143f1c67d186520b72b6cefbf0aa07a34ee	mm vmscan clear pgdat_writeback when zone is balanced hillf danton pointed out that since commit mm vmscan make kswapd reclaim in terms of nodes that pgdat_writeback is no longer cleared it was not noticed as triggering it requires pages under writeback to cycle twice through the lru and before kswapd gets stalled historically such issues tended to occur on small machines writing heavily to slow storage such as a usb stick once kswapd stalls direct reclaim stalls may be higher but due to the fact that memory pressure is required it would not be very noticable michal hocko suggested removing the flag entirely but the conservative fix is to restore the intended pgdat_writeback behaviour and clear the flag when a suitable zone is balanced link
6e7cd27c0f77847f1b07a81ae2ed17b937a7531a	net ipvs sctp add missing verdict assignments in sctp_conn_schedule if skb_header_pointer fails we need to assign a verdict that is nf_drop in this case otherwise we would leave the verdict from conn_schedule uninitialized when returning
fe42cfb4908602f2fb6db7b849e170d2fa26fea1	dont initialize ret variable in fimd_probe we set it in the beginning of the function thus no need to set it at initialization
0ca04b63801b6cbdaa539c89945982ad9dc8d858	net ethernet davinci_cpdma export cpdma_chan_get_stats this is needed when the cpsw driver is built as module
f96a6ec1db1ac730b5a031f2c2f7fcc6b07459d8	usb dwc3 ep0 setaddress wont be issued while configured i have talked to usb-if about usb30cv issuing setaddres with a device on configured state and they have agreed on changing usb30cv not to do so adding back the stall reply in such case and while at that also add a debugging message for an address which is too large
0731572b6c529f8e8a320dc4df6d67d9a595ecf3	drivers hv balloon make adjustments to the pressure report the host expects that the pressure report includes the pressure due to the pages that have been ballooned make necessary adjustments to reflect that also include the free memory information in the pressure report
188ad9d6cbbce4a1d322ac208914a1dea34b30b6	include sparse mmap capability for msi-x table regions vfio-pci has never allowed the user to directly mmap the msi-x vector table but weve always relied on implicit knowledge of the user that they cannot do this now that we have capability chains that we can expose in the region info ioctl and a sparse mmap capability that represents the sub-areas within the region that can be mmapd we can make the mmap constraints more explicit
f2467b6f64da7d8446211c21f6fcd8fa10e8d948	nfs clear nfs_ino_reval_pagecache when we update the file size in nfs_update_inode if the change attribute is seen to change on the server then we set nfs_ino_reval_pagecache in order to make sure that we check the file size however if we also update the file size in the same function we dont need to check it again so make sure that we clear the nfs_ino_reval_pagecache that was set earlier
322555f52bec948a3aa6b526453f66bb63b6e283	fec use napi_poll_weight instead of using a custom fec_napi_weight just use the generic napi_poll_weight definition instead
f2f342115ef2b0755abd73573831351e371f6242	add common lid defines to rdmavt original patch is from kamal heib it has been split into separate patches this patch adds rvt_permissive_lid and rvt_multicast_lid_base to rdmavt
4ae98b4db3d0e9336d0b771636b7d053a1460805	drbd imporve the error reporting of failed conn state changes
3d4357fba82b3cf19ebf0a04d1c9cb086af15d02	sch_sfb keep backlog updated with qlen
ed6fe1f50f0c0fdea674dfa739af50011034bdfa	usb gadget f_hid add dev to configfs even if the chardev is automatically created one has to guess which one belongs to which function in the case of multiple hid functions or maybe even multiple peripherals this becomes difficult add the dev with major and minor number to configfs to allow looking up or even creating the right device node for each function this file is read-only
6d33d304e24ba42886583ed5228083162554305f	hwmon ibmpex remove unnecessary oom messages the site-specific oom messages are unnecessary because they duplicate the mm subsystem generic oom message
8b2303de399f66b0da2c7e5bcc8296be574766f1	serial core fix handling of options after mmio address guenter roeck reported a regression caused by commit serial earlycon extend earlycon command line option to support addresses and options have the following format historically used here simple_strtoul had no problems with comma but the new and recommended kstrtoull requires null-terminated string and returns in case there are options at the end there is no recommended to use function currently that will support it so stick to obsolete simple_strtoull variant
cc013fb4889892cd6058cfb122c43aeea7d930e8	net bcmgenet correctly suspend and resume phy device make sure that we properly suspend and resume the phy device when we enter low power modes we had two calls to bcmgenet_mii_reset which will issue a software-reset to the phy without using the phy library get rid of them since they are completely bogus and mess up with the phy library state make sure that we reset the phy library cached values link pause and duplex to allow the link adjustment callback to be invoked when needed
5cfafbf951acedced7567ae3fd2d29ff62ce1dec	pxa3xx vm_io is set by io_remap_pfn_range
cb28c7ab786b3e77f8435a41929b3ee9bcc51eb1	dmaengine fsl_raid kill the tasklets upon exit drivers should ensure that tasklets are killed so that they cant be run after driver remove is executed
99a01cdf9d572e91c2805a2b89d459797864e3ca	block remove blk_dev_dax config option the functionality for block device dax was already removed with commit acc93d30d7d4 revert block enable dax for raw block devices however we still had a config option hanging around that was always disabled because it depended on config_broken this config option was introduced in commit block disable block device dax by default this change reverts that commit removing the dead config option link
fc50c6e36de742229492117d8e005102a1d21900	at86rf230 make at86rf230_async_error inline this patch makes the at86rf230_async_error inline this function is small enough to handle inline
382c2fe994321d503647ce8ee329b9420dc7c1f9	sched time remove non-power-of-two divides from __acct_update_integrals when running a microbenchmark calling an invalid syscall number in a loop on a nohz_full cpu we spend a full of our cpu time in __acct_update_integrals this function converts cputime_t to jiffies to a timeval only to convert the timeval back to microseconds before discarding it this patch leaves __acct_update_integrals functionally equivalent but speeds things up by about with __number__ million calls to an invalid syscall number dropping from __float__ to __float__ seconds link
3377bad9c7ea427c002173ffcee6fc6a14833739	staging lustre ldlm make function static target_send_reply_msg function is not referenced outside of file so make it static
a10bf26b2f53242836e9362c6c9c857b627b82a9	ima replace iint spinblock with for performance replace the iint spinlock with eric paris questioned this change from spinlocks to rwlocks saying rwlocks have been shown to actually be slower on multi processor systems in a number of cases due to the cache line bouncing required based on performance measurements compiling the kernel on a cold boot with multiple jobs this patch dmitry kasatkin and i found that rwlocks performed better than spinlocks but very insignificantly for example with total compilation time around __number__ minutes with rwlocks time was __number__ __number__ seconds but always like that changelog v2 new patch taken from the allocating iint improvements patch
0c727a42043f79db210cdde0366f9137b9c6bf5a	revert serial imx remove unbalanced clk_prepare this reverts commit commit causes the following warning and sometimes also hangs the system cut here warning cpu __number__ pid __number__ at debug_locks_warn_onin_interrupt modules linked in cpu __number__ pid __number__ comm not tainted __number__ hardware name freescale device tree backtrace dump_backtrace from __number__ __number__ __number__ __number__ show_stack from dump_stack from warn_slowpath_common from __number__ warn_slowpath_fmt from mutex_trylock from __number__ clk_prepare_lock from __number__ clk_prepare from to reproduce the problem we only need to let the board idle for something like __number__ seconds tested on a imx6q-sabresd
2840bf22866935fe7197582bcbe2cde4503e0bba	vxlan add additional headroom tell upper layer protocols to allocate skb with additional headroom this avoids allocation and copy in local packet sends
41ced615e5782582789b6a0cbafe3a0603f9beb0	altera remove casts of pointer to same type casting a pointer to a pointer of the same type is pointless so remove these unnecessary casts done via coccinelle script cat type t t t foo
9eb8a2cdf65ce47c3aa68f1297c84d8bcf5a7b3a	arm64 cputype info for broadcom vulcan add broadcom vulcan implementor id and part id in this is to document the values
2366c7fdb59812bbd1382afed69e250582c64187	arm64 acpi check if it runs on xen to enable or disable acpi when its a xen domain0 booting with acpi it will supply a and a node in dt so check if it needs to enable acpi
bcb58f777eb1b7030fbe525477530cbf0ac6480d	net usb dm9601 use new api the ethtool api is deprecated we move this driver to new api as i dont have the hardware id be very pleased if someone may test this patch
11da1b7c4856de05e00f50f54efe2f5349214d5b	scsi aacraid decrease adapter health check interval currently driver checks the health status of the adapter once every __number__ hours when that happens the driver becomes dependent on the kernel to figure out if the adapter is misbehaving this might take some time when the adapter is idle the driver currently has support to the controller when it fails and decreasing the time interval will help fixed by decreasing check interval from __number__ hours to __number__ minute
de3793796f78e293cc0873744a75588c99ed2fdd	um fix pointer cast fix a pointer cast typo introduced in especially visible for the i386 subarchitecture where it results in a kernel crash also removed pointless cast as per al viro linus
13da704682471669685ccc3fe111fd6c0127b2eb	cxl early return from cxl_handle_fault for a shut down context if a context is being detached and we get a translation fault for it there is little point getting its mm and handling the fault so just respond with an address error and return earlier
f7dcdefe362c06a36483679defb116dda02177e1	ptp bnx2x use helpers for converting ns to timespec this patch changes the driver to use ns_to_timespec64 and timespec64_to_ns instead of open coding the same logic compile tested only
44825757a3ee37c030165a94d6b4dd79c564f661	get rid of an indentation level make the code simpler to read link
00272c854ee17b804ce81ef706f611dac17f4f89	dm linear remove redundant target name from error messages commit back in __number__ should have consistently removed dm-linear from all error messages
773e635266b10244c63259f3366b5b4bc7c215c1	media s5p-mfc modify mfc wakeup sequence for v8 mfc wakeup command has to be sent after the host receives firmware load complete status from risc
b47adc1792422f4caf6c1db0a2b235bfd4f02521	force gpu freq to lowest while suspending we might be leaving the gpu frequency and thus vnn high during the suspend force gt to move to lowest freq while suspending v2 fixed typo in commit message deepak v3 force gt to lowest freq in suspend_gt_powersave daniel v4 add gpu min freq set _after_ weve cancelled the rps works daniel
81fb0b901397588d01219764adb5e674eacc4f8b	staging android ion_test unregister the platform device the driver has to unregister from platform device when its unloaded
4ec49a372c2e732975be57987f695b89b930f20a	stmmac replace open coded __netdev_alloc_skb_ip_align with actual call this also matches with the sibling call netdev_alloc_skb_ip_align made in rx fast path
148124d9310f3870fb016bd2637057841d5b7705	scsi mpt2sas calulate the reply post queue depth calculation as per the mpi spec jejb checkpatch fixes
072611ed1f291053a74b28b813d683a09495eba7	mm cleancache use __read_mostly as appropiate the values are rarely changed so might as well put them in the appropiate section
43db70a50737d9044017731d65d19ec1ef0926e5	staging comedi pcmad use comedi_range_is_bipolar use the core provided helper function instead of duplicating it as a private function
c099b55a6fa6f9ec2f26105c76df462d7c7c7d5b	do not call drm_framebuffer_remove internally during teardown this may cause issues because encoders are already destroyed so removing active primaries may use freed memory instead free the fb directly ignoring refcount
3c15b8e112d7351b2586c649a759318548523364	netfilter nf_conntrack remove unused ctl_table_path member in nf_conntrack_l3proto after commit adf0516845bc netfilter remove sysctl compat code ctl_table_path member in struct is not used anymore remove it
a39b49812fe0c3f62fd3f7f6ec8c10d8f7035992	remove unnecessary code will be set to new fb after update_plane callback is called by drm_mode_set_plane
973652db6f1406e556613b7bb252f1a005005f04	i2c designware allow reduce bus speed by clock-frequency property allow more flexibility to bus speed selection now if there are i2c slave connections defined in acpi the speed of slowest device on the bus will define the bus speed however if also clock-frequency device property is defined we should use the slowest of these two this is targeted to maker boards where developer may want to connect slower i2c slave devices to the bus than defined in existing acpi i2c slave connections
0de9125fa823e526c9f68dc0987aae342ec94cbd	mmc sirf fix the capbility to support ddr50 according to hardware spec validate ddr50 mode for sdxc
a0abacd82c553d18f8e359f7296246b3009cc207	asoc ak4641 convert to module_i2c_driver
8a3ae16e60fb78e0bf062c243ffba5575b64a412	staging ipack reset previous timeouts during device registration resetting the previous timeout we avoid to read the timeout status register and see timeout errors that dont correspond to the present state of the device
7fd1a3f73f3743b4ffd520effe288a70b0ec47c9	btrfs hold a ref on the inode during writepages we can race with unlink and not actually be able to do our igrab in btrfs_add_ordered_extent this will result in all sorts of problems instead of doing the complicated work to try and handle returning an error properly from btrfs_add_ordered_extent just hold a ref to the inode during writepages if we cannot grab a ref we know were freeing this inode anyway and can just drop the dirty pages on the floor because screw them were going to invalidate them anyway thanks
61d7e4cb1173234910ee97c22d1ecf5caee88bf0	btrfs remove unused parameter from create_snapshot the name parameters have never been used as the name is passed via the dentry
f025c48958104868a9fceb04696cdfdb056794c9	dont pass the lock state to _rdma_remove_commit_uobject the only scenario where this function was called while the lock is already taken is in the context cleanup scenario thus in order not to pass the lock state to this function we just call the remove logic straight from the cleanup context function
5f9ba5b693ed6d639a3e6b47f4c6cd80e36f2547	serial mxs-auart remove unneeded zeroing of ret there is no need to explicitly zero the ret variable as it is properly initialized in a few lines below as ret serial_mxs_probe_dts pdev remove the unneeded zeroing of ret
66b8ef67756b3051bf42a077a82c3c5c279caa5b	device_cgroup add deny_all in dev_cgroup structure deny_all will determine if the default policy is to deny all device access unless for the ones in the exception list this variable will be used in the next patches to convert device_cgroup internally into a default policy rules
cfb73f202dd9952bbcdb12895813ea32008db3c5	print error instead of warn if plane setup fails omap_plane_atomic_update does warn_on if dispc rejects the given plane config change that to dev_err to lessen the possible spam to fix this correctly the plane setup needs much more work by creating a check function for dispc setup so that we could reliably check the config in atomic_check instead of only noticing the problem when programming dispc
259010c509b6f28b3b851ae45238cf526f52e185	libertas fix improper return value function lbs_cmd_802_11_sleep_params always return __number__ even if the call to lbs_cmd_with_response fails in this case the parameter will keep uninitialized because the return value is __number__ its caller say lbs_sleepparams_read will not detect the error and will copy the uninitialized stack memory to user sapce resulting in stack information leak to avoid the bug this patch returns variable ret which takes the return value of lbs_cmd_with_response instead of __number__ bugzilla
7cf372b1c40d8d979e64e03eb401a7daa09a8902	staging comedi fix printk issue in this is a patch to the file that fixes up a printk warning found by the tool included kern_facility levels for printk
f28bc92c9530fe39eccfcff392879f19bd234578	cw1200 read beyond end of array in debug code this has only one caller and rates is an array with ieee80211_tx_max_rates __number__ elements
a4b18cda4c2676a4b4b59622b2e0394dc153e00b	rhashtable use rht_obj instead of manual offset calculation
9a28033753ca9e86593e15050c7ae02fbc03f9ae	pci generic allow multiple hosts with different map_bus methods the generic driver kept a global struct pci_ops gen_pci_ops which it patched with the method appropriate for the bus device this is a problem when we have two different types of bus devices the method for the last device probed clobbers the method for previous devices the result is that only the last bus device probed has the correct and the others fail move the struct pci_ops into the bus-specific structure and initialize a pointer to it when the bus device is probed
201fde73b111e7c31fdc0e9fa6bc4b73dfef699d	perf hists browser cleanup hist_browser__update_percent_limit the previous patch introduced __rb_hierarchy_next function with various move direction like hmd_force_child but missed to change using it some place link
97db8afa2ab919fc400fe982f5054060868bdf07	net ethernet mvneta remove iff_unicast_flt which is not implemented the mvneta driver advertises it supports iff_unicast_flt however it actually does not the hardware probably does support it but there is no code to configure the filter as a quick and simple fix remove the flag this will cause the core to fall back to promiscuous mode
e4dd45fe7add0de09e0e5b2b511732d9c86b6ee7	perf record fix option currently the option does not work for record command because of the targets mismatch when synthesizing threads fixing this by using proper target interface for the synthesize decision link
870e53adbd372cbeea15ed00e1d4423725f3cea0	staging hv mousevsc fixup struct hv_input_dev_info this structure is protocol defined structure and must match the definition on the host side make appropriate adjustments
8e385a66d7db14599457fdc7898403c1fa24acb4	mips bmips add bcm6362 support bcm6362 is a bmips4350 soc which needs the same fixup as bcm6368 in order to enable smp support patchwork
f3c1196e16a84e81978bdf60690cb82fe33e880f	asoc sn95031 use soc_enum_single_decl just replace with the helper macro no functional change at all
c0e7865003ae9929f32bcb7277f591115fa242b7	tty ircomm use tty_port_close_start helper again the code is identical so leverage the helper code
a74531a54afe327589d267ecc3e5775981c9ed05	staging comedi cb_pcidda remove private data variable dac the private data variable dac is used to hold the pci base address for the board use the iobase variable provided by the comedi_device instead
d60ee966b260331d1e76f73cd97f9563d2278b10	pm domains make available to modules export these symbols so they can be used in loadable kernel modules
c69a6ca1a4e398e7e85cab792ddbd874d9335233	radeon_cp remove unneeded tests for null before calling release_firmware release_firmware does its own tests for null pointers so theres no need to explicitly test before calling it
b9bd7ff8069a7125da897de657da421c497d4f15	mmc tmio enable odd number size access current tmio is using for data transfer it works if transfer size was even number but last __number__ byte will be ignored if transfer size was odd number this patch adds new tmio_mmc_transfer_data and solve this issue
adfad8745c38d2bfe9e855f9d112a8583564112f	coresight etm3x adding cpu affinity to sysfs interface without access to the device tree it is impossible to know what cpu a tracer is affined to as such adding a new sysfs interface to convey the information
7cca606794ceb597e95fd0a0f3a8dcdd51af55e0	asoc twl6040 use neutral name for power mode change the variable names to be neutral not refering to hs this will ease up the introduction of pll selection which going to use the same enum strings
695cd4a34e4e02486e35d3c8e0ee85581a619357	alsa hda disable spdif only when no pin config set for hp with ad1981 some hp laptops with ad1981 have spdif connections but currently the driver disables it statically better to check the pin default config to judge whether to enable or disable the spdif
302fa4b58ac754a6da13f4f5546f710fecc3b945	allow multiple stacks without this patch applications with two different stack regions eg native stack vs jit stack get truncated callchains even when rbp chaining is present gdb shows proper stack traces and the frame pointer chaining is intact this patch disables the fp rsp check hoping that other checks in the code save the day for us in our limited testing this didnt seem to break anything in the long term we could potentially have userspace advise the kernel on the range of valid stack addresses so we dont spend a lot of time unwinding from bogus addresses link
a6a36008d7d735351d11af357fae7fc2827b46eb	usb ohci-nxp remove i2c_write use smbus this patch removes the re-coded i2c_write function from the ohci-nxp driver in favour of using just smbus functions
3dd98ebe532beb8d6a7ed22e16b8791e455f4e13	staging comedi skel cleanup the boardinfo for aesthetic reasons add some whitespace to the boardinfo
b147ed60775ff976f2a0724fa643f9b508bc8652	staging comedi fix initialise statics to __number__ or null issue in this is a patch to the file that fixes up a initialise statics to __number__ or null warning found by the tool
c2a146f61014543fc4b52acaddcaa31b9f17453d	wil6210 fix error path in wil_tx_vring release fragments in the order of allocation including one for skb head
f951e88bdc1c1f667d9237a52e2e5d76ae16cf54	staging rtl8723bs core rtw_cmd drop unneeded null test kfree returns immediately on null so the tests are not needed generated by
8c27d42ec61e9568fc24dbfb347d844252100765	i40e do not accept tagged packets by default remove the filter created by the firmware with the default mac address it reads out of the nvm storage and a promiscuous vlan tag and replace it with a filter that will not accept tagged packets by default the system must request a vlan tag packet filter to get packets with that tag change-id i119e6c3603a039bd68282ba31bf26f33a575490a
981bd189f80f34c07ac0d87e4760d09bcda5f4cb	blk-mq fix leak of should be freed in blk_mq_free_tag_set
019370d35a671839f1df1d05794e15942cac002b	tosa_battery convert to gpio_request_array gpio_free_array this change simplifies the implementation
276d30eab931eae0ce5c5504b8ff4ab4c97b207b	staging bcm fix typo in this patch fixed spelling typo in comment and printks withing
4eef404fd91543dc82be2bd05d3b29919ec6c0e6	media cec dont set fh to null in cec_transmit the filehandle was set to null when in non-blocking mode or when no reply is needed this is wrong the filehandle is needed in non-blocking mode to ensure that the result of the transmit can be obtained through cec_receive and the reply check was also incorrect since it should have checked the timeout field the reply can be __number__ in any case when in blocking mode there is no need to set the fh to null either
e686bd8dc55ebd605b792632c415481fbc952458	cifs use min_t when comparing size_t and unsigned long on __number__ bit size_t is unsigned int not unsigned long causing the following warning when comparing with page_size which is always unsigned long in function warning comparison of distinct pointer types lacks a cast introduced by commit cifs_iovec_read keep iov_iter between the calls of cifs_readdata_to_iov which changed the signedness of remaining and the code from min_t to min
42309ab450b608ddcfafa90e4cfa93a5001ecfba	arm ptrace reload syscall number after secure_computing check on the syscall tracing path we call out to secure_computing to allow seccomp to check the syscall number being attempted as part of this a sigtrap may be sent to the tracer and the syscall could be re-written by a subsequent set_syscall ptrace request unfortunately this new syscall is ignored by the current code unless tif_syscall_trace is also set on the current thread this patch slightly reworks the enter path of the syscall tracing code so that we always reload the syscall number from after the potential ptrace traps
614851601c121b1320a35757ab88292d6272f906	slip fix nohz local_softirq_pending __number__ warning when using nanosleep in an userspace application we get a ratelimit warning nohz local_softirq_pending __number__ according to the problem is caused by netif_rx function this patch replaces netif_rx with netif_rx_ni which has to be used from context
2e11590171683c6b12193fe4b0ede1e6201b7f45	staging fsl-mc fix incorrect type passed to dev_err macros dev_err macros expect const struct device as its second argument but here the argument we are passing is of typ struct device this patch fixes this error
1ef936b229c54e73a3cce9f4eb8dd5a146add073	i40iw code cleanup remove check of pble pages remove check for zero pages of unallocated pbles calculated in add_pble_pool as it can never be true
73e6742027f5cb5a7c747d9abab5351b01fd4c74	sctp do not try to search for the transport twice when removing an non-primary transport during asconf processing we end up traversing the transport list twice once in sctp_cmd_del_non_primary and once in sctp_assoc_del_peer we can avoid the second search and call sctp_assoc_rm_peer instead found by code inspection during code reviews
eb8c2be581e0f6c98830bc9eee09905f9fefed32	mtd onenand use mtd_set_ecclayout where appropriate use the mtd_set_ecclayout helper instead of directly assigning the field
f411703adc762a92b72f8a93c6464050d66cb87b	nfs refactor nfs_get_client add nfs_found_client clean up code that takes and releases nfs_client_lock remains in nfs_get_client logic that handles a pre-existing nfs_client is moved to a separate function no behavior change is expected
72c54c42b2943985505966ece29f2d45b0330f26	nfc st21nfca add support for hci event connectivity add support for connectivity event
f3f1768f89d601ad29f4701deef91caaa82b9f57	remove useless if from cleanup pick_next_task_rt _pick_next_task_rt never returns null link
7732c6b96f127bb5d9474715149b4e94e369412c	watchdog sch311x_wdt fix polarity when starting watchdog some motherboards like the advantech ark3400 documentation use a non-inverted gpio pin we fix this by assuming that the bios will set the polarity bit for the gpio correctly at startup and we keep the bit-setting intact when we start and stop the watchdog
18fd779a41eff52b597bd2d327194f98a83de4af	use correct domain id to flush virtual machine domains for virtual machine domains is a virtual id and the real domain id written into context entry is dynamically allocated so use the real domain id instead of when flushing iotlbs for virtual machine domains
344dc8ede105d4f6c3e410dd36ee5349a04e3929	use eth_random_addr convert the existing uses of random_ether_addr to the new eth_random_addr
6e99897ba0cdeb83e91738683000aeed6a079cae	spi pl022 remove redundant break break immediately after return has no effect
db5cffcd2bca5fafc4912446605101ec368d4d5f	plumb pg flags through to powerplay enable vce and uvd pg based on single set of pg flags
4d26ec5ddf93e7e133e36fd0454b54a3938f7d3c	fbdev sh_mobile_hdmi use devm_kzalloc use devm_kzalloc instead of kzalloc in order to be free automatically this makes cleanup paths more simple
5028578595e761a3e418092e04db2ebf6c752a3f	remove drv_version macro history is in git no need for sperate versioning also remove the success printout rtc core does it too
0b69b44901bf8c730c3c09eba25377d1f45d8c49	staging comedi pcl724 tidy up the boardinfo convert the boardinfo declaration to c99 format and move it near the struct definition
b291681926a142958112eedde62823230d6afb84	extend dsl readout fix to bdw and skl those platforms have the same bug as haswell and the same fix applies to them the original hsw fix that this extends is commit author jesse barnes virtuousgeek.org date tue sep __number__ __number__ workaround bad dsl readout v3 bugzilla link
a51435a3137ad8ae75c288c39bd2d8b2696bae8f	disable rings before hw status page setup rings should be idle before issuing sync_flush in intel_ring_setup_status_page this patch moves the ring disabling before doing the hw status page setup
f60a8b3d1968d3e2d5259e2c2d4e9f16e19a738b	vxge use swap in vxge_hw_channel_dtr_alloc use macro definition thanks to julia lawall for coccinelle scripting support
efac035ca6eaaf6ca353e730055022cdf03ae7bb	staging comedi icp_multi remove ai_maxdata from boardinfo the analog inputs of this board always have resolution remove the boardinfo and just open-code the value
c9919be642252baae7a80cacff52a3ed586b0547	mwifiex update signal strength in mbm units during wiphy registration signal_type is initialized to cfg80211_signal_type_mbm so convert signal strength from dbm to mbm also the value is absolute make it negative before sending to cfg80211
f477d3e6bb1bef4f3e2286d762137ae7e8a53195	replace constant arrays with constant values this patch removes the arrays in xgi_getvclk2ptr which each contain only one value four times and replaces them with their constant value
b1558f168f4ef5956913d73fe330c4da85c74349	clk sunxi signedness bug in sun8i_h3_bus_gates_init index needs to be signed for the error handling to work
3540bfdb30fcb423a92cc959708e71bc39eb18c3	libceph request_init and request_release_checks these are going to be used by request_reinit code
4d0fe50c75a547088e4304e5eb5f521514dfae46	ipv6 tcp fix tcp_v6_conn_request since linux commit c6aefafb7ec6 add ipv6 support to tcp syn cookies we can drop a syn packet reusing a time_wait socket as a matter of fact we fail to send the synack answer as the client resends its syn packet after a one second timeout we accept it because first packet removed the time_wait socket before being dropped this probably explains why nobody ever noticed or complained
b1113557fb5f4d47d888572a7ffeac91fc692743	define bhrb generic functions data and flags for power8 this patch populates bhrb specific data for power_pmu structure it also implements power8 specific bhrb filter and configuration functions
92ba39a7acafb4f979fddcd22545603a11c349bb	memcg remove unused variable in function mc_handle_file_pte warning variable inode set but not used
e253fb0472e7a892176c7a65cef61a6aa75f8d2e	mfd stw481x use devm_mfd_add_devices for mfd_device registration use devm_mfd_add_devices for mfd devices registration and get rid of callback to remove mfd child-devices this is done by managed device framework
f0ad462189cc898aa0ef8ced849533ee03392bcc	netfilter nf_conntrack silence warning on falling back to vmalloc since netfilter conntrack adjust nf_conntrack_buckets default value the hashtable can easily hit this warning we got reports from users that are getting this message in a quite spamming fashion so better silence this
4de22c0584fb0566487b2cba5cdfbce346b18402	mm highmem use pkmap_nr to calculate an index of pkmap to calculate an index of pkmap using pkmap_nr is more understandable and maintainable so change it
5587859fb1e8bea5e3b8a0ab7866526ad7d1d673	kvm x86 use ktime_get instead of seeking the hrtimer_clock_base the base clock for the lapic timer is always clock_monotonic
c4c0e9e544a0eb640798cc66e68f394fa4a561bf	mm mempolicy fix mbind to do synchronous migration if the range passed to mbind is not allocated on nodes set in the nodemask it migrates the pages to respect the constraint the final formal of migrate_pages is a mode of type enum migrate_mode not a boolean do_mbind is currently passing true which is the equivalent of migrate_sync_light this should instead be migrate_sync for synchronous page migration
d75249f54577d489d1642a246d3702416daa68f9	asoc davinci-mcasp symmetric sample bits for iis mode in iis mode the tx and rx configuration is symmetric the bclk and fsync is shared
59c58c324a81cfb08c490384a7c292b82609673a	use header type to identify pcie mode the original code uses programming interface field to judge if pcie is ep or rc mode however some latest silicons do not support this functionality according to pcie specification header type offset is used to indicate header type so change code to use header type field to judge pcie mode because fsl pci controller does not support header type patch still uses programming interface to identify pci mode
e44694e858ed000ef11ee37861c7f7c86d8ddbda	usb gpio_vbus avoid consecutive vbus_session calls with the same is_active basically calls should be served when vbus session starts and ends its not whenever transciever drivers detect vbus _changes_ otherwise if udc gadget drivers dont want for some reason calls with the same is_active value either otg or udc drivers need to have some protection handlings also on platforms using this gpio_vbus driver the driver is only allowed to check whether vbus is applied there is no kernel-standard way prepared for udc gadget drivers to do that with this in mind gpio_vbus should try to prevent unnecessary consecutive vbus_session calls being served with the same in_active value
32fa7e4977d86fdcfeb01b8ace32a2b63974f97c	alsa update restore default value for alc282 update default value for alc282 for coef the update doesnt seem to have high impact on the existing machines but it fixes possible issues especially expected in bios changes on new machines according to realtek tiwai
10329df8f9b90e27ef63d89f9d58fed8d466f943	be2net cleanup be_vid_config get rid of __number__ unused arguments to the routine and some unused code dont use the term vlan_tag in place of vid as they are different
29166107fd34a4d180c1adaaaccab0c050defc2e	bnx2x null dereference on error in debug code vfop is null here ive changed the debugging to not use it
50d69b5184169caeb85e082f627200da9b0e1677	iio fix iio_buffer_register stub signature match the iio_buffer_register stub signature up to the real function and make the second parameter const this fixes a the following warnings if config_iio_buffer is disabled in function warning passing argument __number__ of discards qualifiers from pointer target type in function warning passing argument __number__ of discards qualifiers from pointer target type in function warning passing argument __number__ of discards qualifiers from pointer target type in function warning passing argument __number__ of discards qualifiers from pointer target type in function warning passing argument __number__ of discards qualifiers from pointer target type
09498087f922bb623b66db9e89c6fd11a3799867	serial honor clk_round_rate errors in dw8250_set_termios clk_round_rate returns a signed long and may possibly return errors in it for example if there is no possible rate till now dw8250_set_termios ignored any error the signednes and would just use the value as input to clk_set_rate this of course falls apart if there is an actual error so check for errors and only try to set a rate if the value is actually valid this turned up on some rockchip platforms after commit serial allow hardware flow control to be used enabled set_termios callback in all cases not only acpi
c2a9c7ab475bc3aaf06521a39ac65bc48c8cad4f	btrfs check if the device is flush capable the block layer call chain from submit_bio will check if the write cache is enabled for the given queue before submitting the flush this will add a code to fail fast if its not updated changelog to reflect current code stat blkdev_issue_flush is not used yet
965cd0e4a5e5d704934fa6d476b1a4faa0417e1b	x86 pci acpi use kmalloc_node to optimize for performance use kmalloc_node instead of kmalloc when possible to optimize for performance on numa platforms link
4ef461e8f4dd13a2e64c6c8f00c420d62294e2d4	memcg remove mem_cgroup_reclaimable check from soft reclaim mem_cgroup_reclaimable checks whether a cgroup has reclaimable pages on numa node however the only place where its called is mem_cgroup_soft_reclaim which tries to reclaim memory from a zone so the way it is used is incorrect it will return true even if the cgroup doesnt have pages on the zone were scanning i think we can get rid of this check completely because mem_cgroup_shrink_node_zone which is called by mem_cgroup_soft_reclaim if mem_cgroup_reclaimable returns true is equivalent to shrink_lruvec which exits almost immediately if the lruvec passed to it is empty so theres no need to optimize anything here besides we dont have such a check in the general scan path shrink_zone either
38b4bc207795339084ab41a2d9fa1add5cfd97d0	net ethoc demote packet dropped error message to debug spamming the console with net eth1 packet dropped can happen fairly frequently if the adapter is busy transmitting demote the message to a debug print
7d3a3fe6488a62ff9aed27fc2128d35c1ba99c30	pinctrl at91 merge clk_prepare and clk_enable into clk_prepare_enable this simplifies the normal as well as the error path
86a33ae1ca06a58629c4d0d80ac6d099ff932ae0	correct cleanup order when deleting offloaded tc rules according to the reverse unwinding principle on delete time we should first handle deletion of the steering rule and later handle the vlan deletion from the eswitch
0c8f75869ed8941fcbf21643fced7bc652f68f14	scsi ufs set default ufs power management level ufs device and link can be put in multiple different low power modes hence ufs driver supports multiple different low power modes this change sets the default ufs power management level which should put the link hibernate state and device in sleep state this default power management level gives good power savings with relatively less latencies
dd6ae3bcfe0fa9cf1bdb6f952c617f2070c57b37	asoc tas2552 correct the speaker driver playback volume pga_gain the last parameter for declare_tlv_db_scale is to tell if the gain will be muted or not when it is set to raw __number__ in this case it is not muted the pga_gain is in bits in the register fix the offset in the soc_single_tlv for this
cbb22ebcfb9920380ed69854a7095d497798063d	usb chipidea core check before accessing ci_role in ci_role_show ci_role bugs when the role is ci_role_end this is the case while the role is changing
132de6717c47f6fb1d4d3ccd6033cd45aee8f779	prepare for removing num_physpages and simplify mem_init prepare for removing num_physpages and simplify mem_init
e3b88bd604283ef83ae6e8f53622d5b1ffe9d43a	mtd nand add generic read id length calculation functions when decoding the extended id bytes of a nand chip we have to calculate the id length according to some heuristic patterns does the id wrap does it end in trailing currently these heuristics are built into complicated blocks that can be hard to understand now these checks can be done generically in a function making them more robust and reusable in fact this sort of calculation is needed in future additions to and with this advancement we get the added benefit of a more readable extended id decode
6ce91ad4d8d7370be4f9ca3d7ded866cb1e2430d	asoc convert uda1380 to devm_kzalloc
70f3ff434d7fc9a3cea5ebbb8a8d7aaa4c906125	dmaengine pl08x get rid of write only pool_ctr and free_txd locking the free function says the pl08x lock should be taken before calling it however the dma pool is already properly locked the only thing that would need this is pool_ctr which happens to be a write-only variable lets get rid of this and eliminate any need for additional locking here
4f9c74c6043891d415730bcb153c579be35c352f	dm rq replace __number__ with avoid accessing directly because the bio can be split from block layer and should never have been used here
22de54a9b929e7c11e445c8f329d33aa7b154495	spi lm70llp remove printk using macros are more prefferable than using printk start using family of macros and define pr_fmt to be used with it while at it remove drvname from an existing pr_info as the name is now being printed by pr_fmt
76ee538178a1eef548d130251b6a269cce26288b	staging netlogic fix multiple irq assignments in a single line avoid the use of multiple assignments in a single line checkpatch found this issue
df5ddcc97e694bfa5dafa838c26e5b974c706929	staging lustre lnet braces not necessary braces not needed for single statement block
fb2e3e70193f6757e536dfdecf21be2e6ee308d4	asoc wm9713 use warn_on instead of bug_on use warn_on and handle the error cases accordingly
76a6ebbeef26b004c36a0c8ee0496bae5428fc31	scsi cxlflash separate rrq processing from the rrq interrupt handler in order to support processing the hrrq by other means polling the processing portion of the current rrq interrupt handler needs to be broken out into a separate routine this will allow rrq processing from places other than the rrq hardware interrupt handler
620a30e97febc8332590376c94ed0e9dba522bc8	tracing dont pass file_operations array to event_create_dir now that event_create_dir and __trace_add_new_event always use the same file_operations we can kill these arguments and simplify the code link
bbc9d21fc0071c245c19077155ea371092ff0db8	genirq implement the main use case for the exisiting inlines is to replace the handler and name of an interrupt from a region which has the irq descriptor lock held from the irq_set_type callback the first argument is the irq number so the functions need so perform a pointless lookup of the interrupt descriptor for those cases which have the irq_data pointer handy provide new functions which take an irq_data pointer instead of the interrupt number so the lookup of the interrupt descriptor can be avoided conflicts
a4e0bedca678c81eea4cd79a4bd502335639f73a	use complete address space in true ppgtt true ppgtt is capable of having a full address space even if the system has less allocated memory note that aliasing ppgtt always aliases the ggtt and thus should remain of the same size
5e0c1879919195b79a0b19feda9aafcb7a3e77e7	alsa es18xx driver should use udelay error udelay with more than __number__ may cause __bad_udelay use mdelay for instead fixed a typo spotted by clemens tiwai
856736466806ceb72c7402eb0f06bea8f5b83c5a	deindent the slb dumping logic currently the code that dumps slb entries uses a double-nested if this means the actual dumping logic is a bit squashed deindent it by using continue
63c9b9d3fe3b1b39a235755f724ab4378f21137c	usb ohci-ppc-of use dev_err instead of printk use dev_err instead of printk to provide a better message to userspace
116c326e74494806f2524ea07dc256f12b245652	pm2301_charger remove __exit __init and __devexit_p
163dc9f39a26b41fc49319fce4145b35f9705789	pinctrl join lines that can be a single line within __number__ columns there is no reason to break a line shorter than __number__ columns
945b5af3cedcdfed6d2d940e53cd19933bb57386	dmatest allocate memory for pq_coefs from heap this will help in future to hide a global variable usage
ddf9ee4084b68def495e63bb7e05d6b767e414d1	staging iio accel adis16203 fixed a brace coding style issue fixed a brace coding style issue
35c7f8a1baa6245a0e66d6ee72502d96cbc2aa19	ixgbe drop unnecessary dereference in loopback test setup this patch drops a set of unnecessary dereferences to the hardware structure since we already have a local copy of the hardware pointer
13e360ac97e2a6386f9e26e02e20bce4b6e83415	input cyapa use msleep for long delay ulseep_range uses hrtimers and provides no advantage over msleep for larger delays fix up the delays here to use msleep and reduce the load on the hrtimer subsystem
86cfb0418537460baf0de0b5e9253784be27a6f9	nfs dont disconnect open-owner on nfs4err_bad_seqid when an nfs4err_bad_seqid is received the open-owner is removed from the rbtree so that it will no longer be used if any stateids attached to this open-owner are still in use and if a request using one gets an nfs4err_bad_stateid reply this can for bad the state is marked as needing recovery and the nfs4_state_manager is scheduled to clean up nfs4_state_manager finds states to be recovered by walking the state_owners rbtree as the open-owner is not in the rbtree the bad state is not found so nfs4_state_manager completes having done nothing the request is then retried with a predicatable result indefinite retries if the stateid is for a delegation this open_owner will be used to open files when the delegation is returned for that to work a new open-owner needs to be presented to the server this patch changes nfs4err_bad_seqid handling to leave the open-owner in the rbtree but updates the create_time so it looks like a new open-owner with this the indefinite retries no longer happen
793d6b5ea80c9bba8de40b720991b436fa5e174d	iio tools make generic_buffer look for all the st sensors use the old rather than the standard new standard suffix for triggers now much to do about it since it is abi but make the testing tools recognize it too
032014bc04ae97fd0474f311259db7d669e47507	get rid of redundant warn_on in the cpu time accounting function vtime_account_irq_enter vtime_account_system we use a this is redundant as the function virt_timer_forward is always called and has a this saves several nanoseconds in my specific testcase kvm and probably all other callers like softirq
2df26639e708a88dcc22171949da638a9998f3bc	mm fix remote numa hits statistics jia he has noticed that commit b9f00e147f27 mm page_alloc reduce branches in zone_statistics has an unintentional side effect that remote node allocation requests are accounted as numa_miss rathat than numa_hit and numa_other if such a request doesnt use __gfp_other_node there are many of these potentially because the flag is used very rarely while we have many users of __alloc_pages_node fix this by simply ignoring __gfp_other_node it can be removed in a follow up patch and treat all allocations that were satisfied from the preferred zones node as numa_hits because this is the same node we requested the allocation from in most cases if this is not the local node then we just account it as numa_other rather than numa_local one downsize would be that an allocation request for a node which is outside of the mempolicy nodemask would be reported as a hit which is a bit weird but that was the case before b9f00e147f27 already link
48695f3d4e7abbfb8fbba45397dce4d5fc0ccfed	asoc intel fix block allocation so we only allocate blocks once make sure we dont alloc blocks twice with requests spanning more than one block
95e48addba6f9271aed51d9d3eaccbfc99a914b4	mac80211 stringify mesh peering events convert mesh peering events into strings and make the debug output a little easier to read also stop printing the llid and plid since these dont change across peering states and are random numbers anyway so they just amount to noise
dccab6092d3c25bf943d12fb658e63fd88bf8b4a	pm2301_charger fix module alias prefix this driver is a i2c driver use i2c rather than platform prefix for module alias
29f000f434afbdf136714aabaaab8f8f27025a36	greybus es1 set buffer sizes for messages based on email discussions the gbuf sizes are page_size and svc interrupt urb is
e90bedbb8a847a0e6debe0e00b6f69b788fca92e	unicore32 handle pgtable_page_ctor fail
59dcf1eb1a4b15610c68a4dbb7430d61a65f4af3	watchdog ep93xx_wdt fix timeout after conversion to watchdog core after the conversion of this driver to the watchdog core i noticed that we miss setting the initial timeout of the wdt device this results in a failure of the wdioc_gettimeout ioctl call
fd83e2c27c1bd8b0e9dc7596339c2411385f8b0c	bluetooth do not check func ready existence functions will be always defined and in case not implemented as dummy __no_func
0a04c9e0b2181aff8348b5e80d9d96ec8df1ffb3	perf kvm stat live use perf_evlist__add_pollfd instead of local equivalent since we can add file descriptors to the evlist pollfd and it will autogrow no need to copy all events to a local pollfd array just add the timer and stdin file descriptors link
5dc67d0ba915cda01ed3a980502945edf2c46b70	btrfs free nce and nce_head on error in name_cache_insert both were leaked in case of error
e09b0d4e9b03e08f47ad53e3c509db2cf8f1dc9c	i2c core convert to previously only the acpi pm domain was supported by the i2c bus lets convert to the common functions for pm domains which currently means we are extending the support to include the generic pm domain as well
211f25dc9dc72aafa813654eaf7ff7107a2f6c6a	musb_virthub use fix using the bare numbers to set the whubcharacteristics field of the hub descriptor while the values are in
dbaffde76405012778b8815b7721554b1302038e	pstore use scnprintf in pstore_mkfile no guarantees that the names will not exceed the name buffer with future adjustments
bafac298fb20e9ae1305c710d4fd8d20c5911afa	check for when allocating hpet msi interrupts irq __number__ is not a valid irq for a irqdomain msi allocation but hpet code checks only for negative return values link
f6e0e2a5649d56d308212583a8ca1b9d7a26c64c	fix all comparison to null could be written this fixes all comparison to null could be written like
a9f6991b6cd3f55aa8482633337cd811d84d0dd8	nfsv4 fix a typo in nfs4_enc_link_sz
3722c1b094f33322da55b69fdfafa9cbeb1a3177	net forcedeth remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
d0a84e72eb755f58ba350d9988bfbdffd6f5a22c	arm io riscpc define io addresses relative to io_base
6cce76dc9ed9efc0a43fca233ddd205e7ded55eb	msi sparse fixes warning symbol msi_head was not declared should it be warning incorrect type in argument __number__ different base types expected restricted __be64 const usertype got unsigned long long const usertype reg
482835ce02726652becc36b64522cbabc0adbeee	sh sh7757lcr update to the new mmcif dma configuration specifying mmcif dma slave ids via a struct sh_mmcif_dma instance is deprecated update sh7757lcr to specify slave ids embedded in struct sh_mmcif_plat_data
2347fc440558993013e8132791c409239da4fc0d	usb gadget complete fsl driver conversion commit usb gadget update fsl_qe_udc to use usb_endpoint_descriptor inside the struct usb_ep did not completely convert the fsl gadget drivers to use the desc in usb_ep as described in commit messages fix the macros that were still referencing the old pointer
4d5ba61ca3607dacd84a86c61bae7752e3dd9cae	iwlwifi add loose coex lut add the loose coex lut and will use later for better bt coex tpt
61db26c6454b5a0bd74ec23968b568e38ea8321a	gianfar gfar_process_frame returns void no return code is expected from gfar_process_frame hence change it to return void
fad052dc4be7b1d9e7ff40ccd8ba2b8216823b51	tile avoid struct vm_struct leak if ioreamp_prot fails in ioremap_page_range due to kernel memory exhaustion we previously would leak a struct vm_struct
a4d8d6da4820230a2e0e977fda44ced9345c41d4	pinctrl-baytrail show pin label with the reset of the gpio debug data the default gpiolib debug output shows pin labels we want baytrail custom debug output to have the same functionality
62c8c20af92ea312ecb22cec4e83082e5843076b	rtc ds1307 fix alarm programming for mcp794xx mcp794xx alarm registers must be written in bcd format however the alarm programming logic neglected this by adding one to the value after bin2bcd conversion has been already done writing bad values to month register in case the alarm being set is in october in this case the alarm month value becomes instead of the expected fix by moving the addition within the bin2bcd call also
8bcab092f8635002fa8fca0e14deb9ff46bdeeb8	add get clockgating_state method for gmc v8
49c3203707c9feebee26fec02f67b0431ac0a72a	do not use u8 to store a integer hfi1_rc_hdrerr stores the result of be32_to_cpu into opcode which is a local variable declared as u8 later this variable is used in a logical right shift which makes clang complains when building an allmodconfig kernel with llvmlinux patches warning shift count width of type opcode __number__ all of this lead to the point that opcode may have been designed to be a integer instead of an one therefore make this variable u32
e22b7651ef23ad90eed4bdbe75f12194f47d7a4f	mtd blkdevs remove dead code the only exit break from the preceding loop is nested within a condition which yields req null this code is dead coverity cid
5ace3d00fa11bb9ec5e1cc02805ac27201f27e61	usb musb dsps polling id pin status only in otg mode only start the otg_timer in dual role mode otherwise in peripheral mode when musb is disconnected from the host port otg_timer starts and continuously toggles the session which causes vbus pulse
dc4103f933291cb1a2e6742c4db432e6ed337bae	btrfs remove unused argument from select_reloc_root is no longer used remove it from select_reloc_root
b69587e2d5b09a192c45c604ea1f9e8d51f4c3a1	mmc sdhci-pci enable hs400 for some intel host controllers enable detection of hs400 support via capability bit-63 for some intel host controllers
e3abe2556b2a689b28926cd1581f0b97e9d2afa4	arm remove unnessary return statement from the void function omap2_show_dma_caps this removes the no longer required return statement at the end of the void function omap2_show_dma_cap due to no need for a return statement due to this function always running successfully
e3d5092b6756b9e0b08f94bbeafcc7afe19f0996	acpi ioapic clear on-stack resource before using it the on-stack resource-window win in setup_res is not properly initialized this causes the pointers in the embedded struct resource to contain stale addresses these pointers in my case the pointer later get propagated to the global iomem_resources list causing a exception when the list is traversed in iomem_map_sanity_check
f8415222837b651902661f12f5760169690f6696	pci use cached copy of pci_exp_sltcap_hpc bit we cache the pci_exp_sltcap_hpc bit in on device probe so theres no need to read it again on allocation of port service devices no functional change intended
2d9772ef653ccf2d5213603e371bbdfe7573df93	alsa hda add null check to all pm ops in since devptr can be null due to asynchronous probe all pm ops should have null checks at the beginning
640843ada1236da228121bb139829c657ce9993f	tpm tpm_i2c_infinion dont modify the i2c client driver is not supposed to modify the clients driver pointer this is handled by the i2c core
2b2efc7fb8a3ede936580e870c5f809e491c925c	perf util skip reading header_event file it seems perf does not parse header_event file so we can skip it as we do for header_page file link
85ba24d395620d8a0769bdaa619b32c458603180	staging bcm change order in if conditions to make more readable in this patch changes the order of several if conditions to make the code more readable
37557178a0388f52c05ead69e24587e67f2cc304	dma fix build error after update to
83924fb30038a6b425fe9d9d499e7d8b79d31d21	gpio adnp remove redundant of_match_ptr the data structure of_match_ptr protects is always compiled in hence of_match_ptr is not needed
2516a680c4202aa587858e94ce7b721dfb9363a3	usb gadget f_hid eliminate abuse of data since is not used for endpoint claiming neither for state storing we can reduce number of places where we read or modify its value as now it has no particular meaning for function or framework logic in case of f_hid we only need to store in pointer to struct f_hidg as its used in f_hidg_req_complete callback all other uses of are now meaningless and can be safely removed
4bd0e030aadaba4a0e8fd5c0233d7e61f2e6207d	media exynos-gsc fix variable type in gsc_m2m_device_run in gsc_m2m_device_run variable ret is accepting signed integer values but currently it is defined as u32 this patch will modify the type of ret variable to int
574e8b95bc3780e10e9b5e9d51074d503dd3d5d9	nvme request regions calling pci_request_selected_regions reserves these regions for our use
8e4bf84474960e832b56293c9b0674c88b5b05ce	move some req flags to the common area req_secure req_flush and req_fua may all be set on a bio as well as on a request so relocate them to the shared part of the enum
4c54c6de1aaad76092a1bc3194b351956d071b84	asoc sgtl5000 fix module device table type for sgtl5000_dt_ids the module device table for of_device_id should use of type
74b93e9f4ee0ae9292730de1a1e7d919c59c8ad2	bluetooth clean up hci_core code fix errors reported by checkpatch error spaces required around that error open brace following function declarations go on the next line
44ff5660e5cf5ccb739e77a19d2ecf1144cf9e36	brcmfmac remove unused variable data_len from brcmf_sdio_bus_txdata the local variable data_len is assigned but never used so get rid of it
fcd44b9efb0b33208a8575e5e776f4319d3b9698	media tm6000 fix fast usb access quirk the original patch used the fast usb quirk to enable fast access to registers in the tm6000_read_write_usb the applied patch moved the check to the tm6000_reset probably due to some merge conflicts
482494a8d395877c4776a3d76f89342d7ad7c4c6	modify rtc_update_alarm not to touch the alarm time rtc_class_opss set_alarm shouldnt deal with the alarm date as this is handled in the rtc core see rtc_dev_ioctls rtc_alm_set and rtc_wkalm_set cases link
cdf32c94bd3569d4e46b8f993e0fd8e45d438d18	fm10k explicitly typecast vlan values to u16
91d27a8650d5359a7a320daeb35b88cdea15e3a8	llc free the right skb we are freeing skb instead of nskb resulting in a double free on skb and a leak from nskb
7f2210fa6b791c290e36d8b3c8af7aaf22b2aaf0	nfsd use service net instead of hard-coded net where possible
1cb40d08726468602389c9a7ec345af5ade99775	n_tty remove superfluous reader wakeup n_ttys method unconditionally performs reader wakeup remove extra reader wakeup for canonical mode changes
80f22b4430cd5c108a4676803439ecb0c5cfeca1	convert to idr_alloc convert to the much saner new idr interface
27a4d5efd417b6ef3190e9af357715532d4617a3	batman-adv initialize values when adding a gateway without this initialization gateways which actually announce bandwidth of could be added if these nodes get purged via _batadv_purge_orig later the gw_node structure does not get removed since batadv_gw_node_delete updates the gw_node with bandwidth of and the updating function then discards the change and does not free gw_node this results in leaking the gw_node structures which references other structures gw_node orig_node orig_node_ifinfo hardif when removing the interface later the open reference on the hardif may cause hangs with the infamous unregister_netdevice waiting for mesh1 to become free usage count __number__ message
9f0030c8ad0ce357e8fc8c71ec6b4958041afccf	clk tegra export clock names for debugging when writing a module for testing or debugging purposes there is no way to get hold of clk handles this patch solves this by exposing all valid clocks as clkdevs for the virtual device tegra-clk-debug
5420e46d4d79bcd5d5952df98d022c8412385d32	fix io_offset undeclared error there is a compile error for microblaze pci because io_offset is not declared this patch adds declaration of io_offset bhelgaas i introduced this problem with
4b217630d0ec277c961e57f6d2985433b352c2ce	ext4 fix the number of credits needed for ext4_ext_migrate the migration ioctl creates a temporary inode since this inode is never linked to a directory we dont need to reserve journal credits required for modifying the directory
4aab97327f35aac17b7f62976ea44b1bacfaa92b	pnfs sync the layout state bits in pnfs_cache_lseg_for_layoutreturn ensure that the layout state bits are synced when we cache a layout segment for layoutreturn using an appropriate call to pnfs_set_plh_return_info
3c4c4971912d9786100012b94d4ae08a8995f0e7	hwmon it87 constify fixed string arrays make checkpatch happy by constifying fixed string arrays
ea0000f0d369a59c2086fe9c489e0a2a86e080ba	roll out the helper nonblock tracking right now still all blocking no worker anywhere to be seen
2c2dd6ac738d8a22def46e073fb7383cac8fa180	media media vb2 add a check for uninitialized buffer __buffer_in_use might be called for buffer in the following scenario reqbufn user_ptr querybuf this patch fixes kernel ops in such case
249eed53152167c64c6dc66fa269a1d8b415a7b4	perf lock subcommands should include common options when i use option for report subcommand it doesnt accept it we need add common options using opt_parent macro perf lock report error unknown switch i usage perf lock report dont complain do it key for sorting link
002a41cabb5829d59c0337dcb5fa3893e0bb15fd	f2fs invalidate xattr node page when evict inode when inode is evicted all the page cache belong to this inode should be released including the xattr node page but previously we didnt do this this patch fixed this issue v2 o reposition invalidate_mapping_pages to the right place suggested by jaegeuk kim
4a6e6a5eb3f8309273b389ca74538f65af203f6c	arm davinci fix incorrect pdctl next bit position the pdctl next bit is incorrectly set to bit __number__ instead of bit __number__ this patch fixes this issue
8c79eecebb730de8c0610d2b79a6a10e51106ba4	media vivi fill in colorspace the colorspace was never filled in causing complaints from v4l2-compliance
2f1def9979da0d4df9743ca78c63f62d7c6c4486	staging rtl8188eu remove unused macro and structure
ba76df3f65ce08413563119c9c77852b0835fbef	usb serial use module_usb_serial_driver this converts the driver to use the module_usb_serial_driver call instead of having to have a function saving a lot of duplicated code
a52690e445637dda7f71878965d64d9b6a15a2b7	fix panel fitter setting if need to enable the panel fitter the crtc timings have to be programmed according to the panels native fixed mode this isnt the case atm since after the encoder changes adjusted_mode to fixed mode the timing fields of adjusted_mode will stay at their original non-native values that the user passed in this results in a corrupted output one exception is when we have a second pass of computing encoder configs due to bandwidth limitation since then well set fields to the fixed mode values set in the first pass so in this case things will work out fix this by updating the fields when we set the fixed panel mode this regression has been introduced in commit date sun jul __number__ __number__ clean up crtc timings computation
6665ad20f020ffc8c632a4d4744a7550000f611e	crypto tegra-aes fix null pointer dereference dd is tested for null however it is derefenced in the error message print change the print to pr_err to avoid this
80ace85c915d0f41016f82917218997b72431258	btrfs add rename_noreplace rename_noreplace is trivial to implement for most filesystems switch over to and check for the supported flags the rest is done by the vfs
f54fb859da53f04a443c5e3f4cb9b936ed42d227	btrfs fix error handling in delete_block_group_cache btrfs_iget never return null so null check is unnecessary
c1bf9c654a752b68be1b4408b33443a17515a671	media v4l s5p-tv fix plane size calculation fix plane size calculation
ebaecb423bfa0f88487aa98238c89fd3df9734dc	rename to next_index it points to the next aperture index to allocate from we dont need the full address anymore because this is now tracked in struct aperture_range
f7e2965db17dd3b60f05fad88e7afc79ea75b48f	bridge mdb start delete timer for temp static entries start the delete timer when adding temp static entries so they can expire
33d740e07d1f565e44d35e7f7756a619b4f1e4ba	asoc wm_adsp show avail in bytes to match other messages all other debug messages talk about data on the compressed stream in bytes except avail which is shown in words to avoid confusion show avail in bytes as well
b7a0c7c5ba289a7d063d92c162b53e110757e331	remove unnecessary config_enabled guard commit d112a8163f83 add edp support replaced the code inside this if-conditional with gma_backlight_set which becomes a nop stub if config_backlight_class_device is disabled so there is no need to guard the caller with config_enabled note this is one of remaining todos to deprecate config_enabled macro refer to commit tree-wide replace config_enabled with is_enabled link
de7e07f9ee14f47d05aa43046404c2904f0247dc	tipc ensure that first packets on link are sent in order in some link establishment scenarios we see that packet may be sent out before packet forcing the receiver to demand retransmission of the missing packet this is harmless but may cause confusion among people tracing the packet flow since this is extremely easy to fix we do so by adding en extra send call to the bearer immediately after the link has come up
8d6083fe0ab6ffbe486b5d537922fba68e872568	bluetooth fix minor coding style issue in set_connectable there is a minor coding style violation and so just fix it no actual logic has changed
2948b0b3ebbae98601c9b38e9841dbc754ca488c	media vivi kill macros usage of macros has gone in __number__ in vivi clean up and a major overhaul but the macros remain say goodbye to them
3b84240a7b756e3fea8eaea5a29e7c10afbd0a47	nfsd clean up reset_union_bmap_deny fix the deny argument type and start the loop at __number__ the __number__ iteration is always a noop
ff9d8859e2d4e47c2d5537e309b49cf1f2ed1ddc	alsa hda apply skl display power patch to bxt for skl only the hdmi codec is in the display power well while the hd-a controller isnt so the codec flag link_power_control is set to the display power via bus link_power ops for bxt the power well design is the same as skl so the patch should be applied to bxt too
7370c68d5b9a2e853600290e797a4a79fefaf1e7	psr also doesnt have link_entry_time on skl this bit is also reserved on skylake actually the only platform that supports this is haswell so lets fix this logic and apply this link entry time only for the platform that supports it haswell this also changes the style to let more clear platform differences outside the reg write we would probably catch this case sooner if separated or
6aedb8c06df732625cf998c1428396914f3139b4	net stmmac honor dt parameter to force dma store and forward mode is documented in stmmac device tree bindings but is never handled by the driver
798e381a0c387dcbcb014e07c0e6683cf2d2dc22	ixgbevf move api neg to reset path after this patch the api negotiation will occur in the reset path so now the pf will be informed of the api version earlier this will also require the mailbox lock to be initialize sooner as well
b49f184b640dcfab7ede394cf2a1ff4fe3d154f5	udlfb make sure to get correct endian keys from vendor descriptor the driver was not using le16_to_cpu when reading keys from the vendor descriptor causing incorrect parsing mainly sku_pixel_limit was not being parsed on big-endian systems this would result in a blank screen on big-endian cpus where the dl chipss max mode was smaller than the monitors native mode
27b010815bcfbb2cc79de7544547e33e4d169594	asoc rsrc-card use asoc_simple_card_canonicalize_cpu
50db71abc529c48b21f4c3034d3cff27cfb25795	ext4 ext4_da_convert_inline_data_to_extent drop locked page after error testcase xfstests __number__ call trace __address__ deadlock __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__
0996c3910b8de402c319495c9560f3a909c8b866	b43 update some transmit header constants some constants were missing and are added now the rate mode was renamed at least the ucode in brcsmac uses __number__ for ht rates iee80211n and the more recent ucodes are using __number__ for vht ieee80211ac
309f0b70ab789bf85c5f5f32dbc466d42f024747	drbd use more generic constant names these constants are useful for the same purpose in more than one place
f859b0f662493e4f53d462f5759e3c4302933077	ipv4 cache net in iptunnel_xmit store net in a variable in ip_tunnel_xmit so it does not need to be recomputed when it is used again
32256c87ead3edec86bed5023a0ff96a6d907931	improve interrupt handler somewhat logs extra info for interrupts that have a sub-status register and handles the special ack from intr bit __number__
b43cfb245f7346cbb25c1919577d9607d2adb974	asoc adau1373 remove unnecessary bias level changes the asoc core will only call the callbacks when the devices dapm context is idle since this driver sets idle_bias_off to true this means that the device is already in snd_soc_bias_off when the suspend callback is called so there is no need to manually set this state again there is also no need to go to snd_soc_bias_standby in the resume callback since the core will go right back to snd_soc_bias_off also drop the regcache_cache_only calls from the suspend and resume handlers there shouldnt be any io happening after suspend and before resume
62a993df31f795d87bcb4c6cb005d36f32f6ad55	irqchip atmel-aic5 add sama5d2 support add sama5d2 support to irq-atmel-aic5 link
73dc3b90232780462f3771901024a160559b4532	mwifiex fix uap tx packet timeout issue when running heavy traffic we stop the tx queue if the pending packet count reaches certain threshold later the tx queue should be woken up as soon as the packet count falls below the threshold current code wakes tx queue up on sta interface only removing the check for sta interface will allow both sta and ap interfaces to resume transmit when tx_pending count becomes low
19db2307365231e798bb99324ed553bcada57913	lpfc remove redundant code block in lpfc_scsi_cmd_iocb_cmpl this removes a redundant code block that will either be executed if the enable_fcp_ring_polling flag is set in or not the code is just duplicated in both cases hence we unify it again this probably is a left over from some sort of refactoring
696b6075afa97b42b3f59f96809ed586eb691c96	thermal kirkwood fix thermal sensor formula the currently formula has been taken from the soc datasheet which is not exactly correct the correct value for the temperature in celcius of the sensor present in this soc is celsius
156acb166ea9a43d7fcdf9b8051694ce4e91dbfc	pm opp use err_cast instead of err_ptrptr_err use err_cast inlined function instead of the semantic patch that makes this change is available in more information about semantic patching is available at
8cadab0a2adc612692c7ad8a176881732fa25e2a	account for sink max tmds clock when checking the port clock its perfectly legal for the sink to support only for some lower resolution modes while the higher resolution modes can only be used with so lets take the sinks max tmds clock into account before we go and decide that a particular mode can be used with link
d5ce4164899330e616c4ef067412ba2a4833f6d8	rename intel_fbc_nuke to intel_fbc_recompress although the term nuke is part of the fbc spec its not very intuitive so lets rename it to make it easier for people that are not familiar with the spec link
798620fb1dd510d163f1c875c8422dc605f446da	s390 correct error detection check reipl_fcp_kset was just initialized so it appears that it should be tested instead of reipl_kset
779ae55bd8ee63f2ba35a0ec15f033e512e706ee	pci spear remove spear13xx_pcie_remove following compilation warning occurs when compiled with warning section mismatch in reference from the variable spear13xx_pcie_driver to the function this driver isnt allowed to unload and so doesnt have a routine but it still has spear13xx_pcie_remove marked with __exit as this driver cant unload would never be called so get rid of it
3fb6922eae7e9c8be5d6b305b37c7495ffbf0e01	remove redundant null check devm_request_and_ioremap api checks for null hence explicit null check is not necessary saves some code
0c00b1e00bba9c9046bee4e487ed19360da9ded0	fixup the clock comparator on all cpus by leaving fixup_cc unset only the clock comparator of the cpu actually doing the sync is fixed up until now
4a5a4184628c529774c1492bc1a21743b69b5fc3	leds renesas fix error handling leds convert renesas tpu led driver to devm_kzalloc and cleanup error exit path introduced a possible case in which r_tpu_probe calls iounmap on a wild pointer this changes the one case that was missed in the same way as the other error paths without this patch building kota2_defconfig results in in function r_tpu_probe warning ret may be used uninitialized in this function warning p may be used uninitialized in this function
1e64126d97ab44814778c87d76f223140e28dbfb	staging comedi dt2801 remove use of dprintk the dprintk messages in this driver are just added noise remove them
6f34cc393f6407fbec91ff6d4fd1e29fe86b59d5	i915 reuse to dump small buffers instead of pushing each byte via stack the specifier allows to supply the pointer and length to dump buffers up to __number__ bytes long
454496fd05b1463efa46ec7a42576e3d319cc291	ssb define boardflags they are sprom specific so all should be defined in ssb code
48ce8e3f7080869763cfb3ab4ac57bb0ba4da698	metag use irq_set_affinity instead of homebrewn code there is no point in having an incomplete copy of irq_set_affinity for the hotplug irq migration code use the core function instead and while at it switch to for_each_active_irq
29b02373f44d0d873a4f645b53c3cddce2f40f7b	staging vt6656 lock changes s_nsbulkinusbiocompleteread use
fef8953ae4e2b87392434a1a3774694c3f8164f6	enable fixup_user_fault retrying by passing a non-null flag we allow fixup_user_fault to retry which enables userfaultfd as during these retries we might drop the mmap_sem we need to check if that happened and redo the complete chain of actions
649663cf6380fffdfdeb52ab2b276caa6bcb3e51	partial revert of endian fixes this fixes a warning on big endian bitfields need to be handled properly
d4d3e2579756e3a5f4fbf8eac211f0696e253bcd	workqueue ensure attrs changes are properly synchronized current modification to attrs via sysfs is not fully synchronized process a change cpumask process b change numa affinity wq_cpumask_store wq_sysfs_prep_attrs apply_workqueue_attrs apply_workqueue_attrs it results that the process bs operation is totally reverted without any notification it is a buggy behavior so this patch moves wq_sysfs_prep_attrs into the protection under wq_pool_mutex to ensure attrs changes are properly synchronized
9b7839c3061cfc4f9087c2ad67d56e844d087c55	media si2168 print chip version print chip version once using log level into when init is called remove state printing as those are not very useful old printing si2168 found a silicon labs si2168 in cold state si2168 downloading firmware from file si2168 firmware version si2168 found a silicon labs si2168 in warm state new printing si2168 found a silicon labs si2168-b40 si2168 downloading firmware from file si2168 firmware version
319554f284dda9f2737d09df82ba3610bd8ddea3	inet dont use sk_v6_rcv_saddr directly when comparing two sockets we need to use inet6_rcv_saddr so we get a null sk_v6_rcv_saddr if the socket isnt af_inet6 otherwise our comparison function can be wrong
43ec2e4316047e9eecf7df86768708395888eb96	use irq_set_handler_locked use irq_set_handler_locked as it avoids a redundant lookup of the irq descriptor search and replacement was done with coccinelle
7183f337fef677165d3dbd09a42ee9578c94f890	staging save irq vector in mem space the irq vector should be saved in mem space base address according to the datasheet
c9e8440eca61298ecccbb27f53036124a7a3c6c8	staging ion fix overflow and list bugs in system heap fix a few bugs in ion_system_heap initialize the list node in the info block dont store size_remaining in a signed long allocating could overflow resulting in a call to sg_alloc_table with which panics alloc_largest_available will never return a block larger than size_remanining so it can never go negative limit a single allocation to half of all memory prevents a large allocation from taking down the whole system jstultz minor commit subject tweak
4835f37e3bafc138f8bfa3cbed2920dd56fed283	brcmfmac add length checks in scheduled scan result handler assure the event data buffer is long enough to hold the array of netinfo items and that ssid length does not exceed the maximum of __number__ characters as per __float__ spec
c626224de9370ae783e8b0cb6aaca2ba3d81fe62	staging android logger change logger_offset from macro to function convert to function and add log as a parameter rather than relying on log in the context of the macro
4f73b0654d8a954540d49bb0a300f31663423db9	device property fallback to pset when gettng one string the one string as an equivalent to an array of one element allow user to read one string as a plain string
5ed3b15b05449a2e2cc2e4d4698d420a37b092ea	remove unused sub-context parameter subctxt is not used just remove it
3f7f7a5f3fba43d3fbfef4d8406252104d1c684f	mtd fsl_ifc_nand fix module autoload for of platform driver this platform driver has a of device id table but the of module alias information is not created so module autoloading wont work
5c437a401b824399b6fa7342c66b675ebb7af43e	spi spidev_test transfer_escaped_string function move the input_tx code into its own small function this cleans up some variables from main that are used only here while we are at it check malloc calls instead of assuming they succeed
7d3b5fac45a5d41cbc6bea9f67bd07a0c50bd118	arm s3c24xx add clkdev entry for camif-upll clock the s3c-camif driver uses camera clock conn_id for the camif-upll s3c244x and camera s3c64xx platform clock by adding this new clkdev entry the platform differences are isolated from the driver
f759e2b4c728cee82e4bc1132d0e41177b79a0b1	kvm mmu avoid pte_list_desc running out in kvm_mmu_pte_write kvm_mmu_pte_write is unsafe since we need to alloc pte_list_desc in the function when spte is prefetched unfortunately we can not know how many spte need to be prefetched on this path that means we can use out of the free pte_list_desc object in the cache and bug_on is triggered also some path does not fill the cache such as ins instruction emulated that does not trigger page fault
5d2afab958f8cd203a8fe639082b5b5e74f748f9	allow a kconfig option to choose if fbcon is enabled this makes things easier for distros where wed like to have fbcon enabled all the time
3a2926054acf876313afaaddac00a8ad255f6d68	libfc differentiate echange timer cancellation debug statements there are two debug statements with the same output string regarding echange timer cancellation this patch simply changes the output of one string so that they can be differentiated
1c96bee4df1998b9dec3e2ef8f77e8436e29342b	arm dra7 hwmod add custom reset handler for pciess add a custom reset handler for dra7x pciess this handler is required to deassert pcie hardreset lines after they have been asserted this enables the pcie driver to access registers after pciess has been runtime enabled without having to deassert hardreset lines itself with this patch applied used lspci to make sure connected pcie device enumerates on dra74x and dra72x evms
d2eb0b998990abf51d6e1d3bf16a2637b920a660	jbd2 check without taking j_list_lock is adequately protected for reading by the jbd_lock_bh_statebh so we dont need to take j_list_lock in __journal_try_to_free_buffer
fe802fd92d6abd1fce2ae8d03a073807d25e9453	media siano call msg_sms_init_device_req newer firmwares seem to require an init device message apply such change from doron cohens patch
15a0a8706c32bd38bff9ebf7c6ef24f32d1ea921	perf machine add machine__get_kallsyms_filename separate out the logic used to make the kallsyms full path name for a machine it will be reused in a subsequent patch link
313cb90285d8715302d79069700d78770ee91e9a	remove arch-specific pcibios_enable_device on systems with pci_probe_only set we rely on bar assignments from firmware previously we did not insert those resources into the resource tree so we had to skip pci_enable_resources because it fails if resources are not in the resource tree now that we insert resources even when pci_probe_only is set we no longer need the arm-specific pcibios_enable_device remove it so we use the generic version bhelgaas changelog
b018e1361bad361b47294fd09ae1f33f707dd933	mfd core copy dma mask and params from parent the child device intends to perform dma operations then it needs a dma mask and params set this patches copies them from the parent device
7aa262b522ee5a7f1bf9b8fe34539b262ba6da0a	nfsv4 fix another deadlock if we dont release the open seqid before we wait for state recovery then we may end up deadlocking the state recovery thread this patch addresses a new deadlock that was introduced by commit c21443c2c792cd9b463646d982b0fe48aa6feb0f nfsv4 fix a reboot recovery race when opening a file
902d03c7f3900b8a5d2997303b87dc12397bea71	usb gadget loopback fix show methods for attributes most of usb functions place new line after attribute value lets follow this convention also in loopback function as it improves readability
03832aa87f81341d68f5f952c5418984dfb10139	input cros_ec_keyb_clear_keyboard depends on config_pm_sleep if config_pm_sleep is not set warning defined but not used move the definition of cros_ec_keyb_clear_keyboard inside the section protected by config_pm_sleep to fix this
3c31760e760c87eaa5fbcbb90d54ccab576429c8	mali-dp set to the port instead of the endpoint the crtcs port pointer was being set to the endpoint node instead of the port fix that and hold a reference on the port node link
e1094f9f74cc728c06160a2600e77a25bc5fac68	backlight lms283gf05 remove unnecessary oom messages the site-specific oom messages are unnecessary because they duplicate the mm subsystem generic oom message
2c4193df379bb89114ff60d4b0fa66131abe6a75	get rid of duplicated conditional expression variable first is initialized to zero and updated to only if it is greater than __number__ thus condition first always implies __number__ so the latter is not needed
3f53bd8f8b563cc6024d25c1665d8358745f48b2	tipc fix link acknowledge logic in receive path link state acks triggered from the receive path is done before the last received packet have been processed by the link layer the effect of this is that the last received packet will not be included in the ack this causes problems if the link window is set to tipc_min_link_win where the ack interval will be equal to the link tolerance and the link enters a stop-and-go behavior we move the ack logic to after link state processing just before the packet is delivered to higher layers
b8176627b84adfea3a729265a5a0f02c850e9275	asoc wm8994 hold runtime pm reference while handling mic and jack irqs ensures that we dont interact badly with the power management framework especially in the cases where were doing deferred work or were using a direct gpio for these signals
ea872d7712528ad991bdabb63515bc00ee10993e	sch add missing u64 in psched_ratecfg_precompute it seems that commit commit author jiri pirko resnulli.us date tue feb __number__ __number__ __number__ sch make htb_rate_cfg and functions around that generic adds little regression before tc qdisc add dev eth0 root handle __number__ htb default __address__ tc class add dev eth0 classid __address__ htb rate tc class show dev eth0 class htb __address__ root prio __number__ rate ceil burst cburst sent __number__ bytes __number__ pkt dropped __number__ overlimits __number__ requeues __number__ rate backlog requeues __number__ lended __number__ borrowed __number__ giants __number__ tokens __number__ ctokens __number__ after tc qdisc add dev eth0 root handle __number__ htb default __address__ tc class add dev eth0 classid __address__ htb rate tc class show dev eth0 class htb __address__ root prio __number__ rate ceil burst cburst sent __number__ bytes __number__ pkt dropped __number__ overlimits __number__ requeues __number__ rate backlog requeues __number__ lended __number__ borrowed __number__ giants __number__ tokens __number__ ctokens __number__ this probably due to lost u64 cast of rate parameter in psched_ratecfg_precompute
ed752e5ddedb68c9d69484baa1a712cf966e1f22	input gtco stop saving struct usb_device the device can now easily be derived from the interface stop leaving a private copy
99ce4169a9ff1c6ecdcccf01638eb6d76e5d84d1	reiserfs is_privroot_deh needs only directory inode actually and that only to get the superblock privroot is a directory and we dont allow hardlinks to
c3aed2312fd3c74e77e049b795e092689d414474	staging rtl8192u r819xu_cmdpkt checking null value after doing dev_alloc_skb checking the return of dev_alloc_skb as stated in the following bug reported-by ruc_soft_sec
91b0f3a06e432d01c66cd05973628a2ec3bde9ed	media media add a subdev type for tuner add media_ent_t_v4l2_subdev_tuner to represent the v4l2 and dvb tuner subdevices
43268701b50e7dbbad767e118e0023c703c7e3da	staging comedi amplc_pci224 only calc the pacer divisors once when the trig_timer the divisors needed to generate the pacer time are calculated in the to validate the the core always does the before the so there is no reason to recalc the divisors
c65d1fd350fa28de79e86e18ef73b902a67c791a	gpio sa1100 implement get_direction method allow gpiolib to read back the current io direction configuration by implementing the callback this in part allows debugfs to report the complete true hardware state rather than the software state
aaa6daec586cd39a6cd44b3d0ab91a84b0e3d53a	be2net record receive queue index in skb to aid rps
20ecf1e4e30005ad50f561a92c888b6477f99341	openvswitch vlan remove wrong likely statement this code is called whenever flow key is being extracted from the packet the packet may be as likely vlan tagged as not
31cbc53fe56497f39e697a904f770cff096ae765	media mantis_vp2040 use dvbv5 parameters on set_params instead of using dvbv3 parameters rely on dvbv5 parameters to set the tuner
929f61896e194f45696ba52852ccbfd5edd04df1	r8169 convert to skb paged frag api
582d2f7aedfde9e1a01170deb003df510aa778d3	gfs2 wait for async dio in glock state changes we need to wait for any outstanding dio to complete in a couple of situations firstly in case we are changing out of deferred mode in inode_go_sync where glf_dirty will not be set that call could be prefixed with a test for gl_state lm_st_deferred but it doesnt seem worth it bearing in mind that the test for outstanding dio is very quick anyway in the usual case that there is none the second case is in inode_go_lock which will catch the cases where we have a cached ex lock but where we grant deferred locks against it so that there is no glock state transistion we only need to wait if the state is not deferred since dio is valid anyway in that state
2b87f3b1bab1df814057ff551f4fc49c22a7fde9	fix haswell pfit power well check v2 we cant read the pfit regs if the power well is off so use the cached value v2 re-add lost comment jesse make sure the crtc using the fitter is actually enabled jesse danvet drop now unused dev_priv as spotted by mika
0d6ef0688d8744454646298b85336407be05e309	ipvs delete an unnecessary check before the function call module_put the module_put function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
f9cbd9b02539330ddd349df583fcfc2db8a23b90	kvm s390 provide cmma attributes only if available lets not provide the device attribute for cmma enabling and clearing if the hardware doesnt support it this also helps getting rid of the undocumented return value in case cmma is not available when trying to enable it also properly document the meaning of for cmma clearing
4ac20e62efc6b8a63a1a534ddf236af7fe8849b5	asus-wireless fix indentation fix indentation problem introduced when this driver was first merged into the kernel
b77f2767a76eaf6a26eb3c2128877b362544b804	fix quoted string split across lines fix issues with quoted string split across lines in
96ca88423605116c041b5e5a6ef3af685402afb1	media davinci-vpfe-capture delete an unnecessary return statement in vpfe_unregister_ccdc_device the script pointed information out like the following warning void function return statements are not generally useful thus remove such a statement here
ca4c22d391b8a5ac2b79135213ca68abc7aeb984	video mxsfb convert to the patch converts mxsfb driver to by using helper functions
0598b8afd65d6b0893d217f7cf77ea315cdfcb5b	be2iscsi fix exposing host in sysfs after adapter initialization is complete before probe for function was completed iscsi daemon had initiated login to target while os was coming up the targets which had login process was function specific initialization was still in progress this lead to kernel panic fixed the issue by moving iscsi_host_add call after adapter initialization is done
43160718d95db9e2336cd787fa8fcad39660b883	xgene use local variable dev instead of using a local variable dev to point to the device is simpler then repeatedly dereferencing
def1820d25fa93cf5fca10bf45f22cdb11be41f2	vme add missing put_device after device_register fails put_device must be called after device_register fails since device_register always initializes the refcount on the device structure
3374dcebb827307bc9487dcf4a7b61b8e6004b28	bypass vce clock if vce is idle on fiji
d2d7e7a03eb3c38c5680f0d18244887c255c7bf3	scsi hisi_sas replace warn_on with dev_warn for internal abort replace warn_on with dev_warn print when internal abort fails
89b548f0cfad8322cefe777746e4c12f0ab9ba60	mlxsw spectrum offload learning to the switch asic up until now we simply stored the learning configuration of a bridge port in the driver and decided whether to learn a new fdb record based on this value however this is sub-optimal in cases where learning is disabled on the bridge port as the device repeatedly generates learning notifications for the same record instead offload the learning configuration to the device thereby preventing it from generating notifications when learning is disabled
22b8b13b6f436ffbb6e540f5f8039b1084a72794	drm get rid of direct property value access for atomic drivers we wont use the values array but instead shunt things off to so to simplify things make all of properties values go through the accessors
181a4224acdfb993a21f987f8617b5c8d7bc654e	ipv4 fix reply_dst leakage on arp reply there are cases when the created metadata reply is not used ensure the allocated memory is freed also in such cases
729a7ed103ae1b04a5c87a5855885e0973161da4	perf tests take into account address of each objdump line objdump output can contain repeated bytes at the moment test reads all output sequentially assuming each address is represented in output only once __address__ __address__ c1 __number__ eb rcrl __address__ __number__ add __address__ __address__ __number__ __number__ mov __address__ __number__ __number__ __number__ mov store objdump output to buffer according to offset calculated from address on each line link
51a3db41e18254b938279cb4b160310e11a13d4f	input tnetv107x-keypad fix module_alias remove the space between platform prefix and the driver name
23f679fa6de3b3f7e1d9e1d8eaeafa5167a55a17	arm shmobile let genmai multiplatform boot with genmai dtb let the multiplatform genmai support boot with the unified dts
87e9429490dfe610faaf209795942272bc7a730a	media s5p-jpeg use module_platform_driver in file module_platform_driver makes the code simpler by eliminating module_init and module_exit calls
dabed0e6319a1900c8738676bd197f06b5b5b6cc	mlx5 keep polling to reclaim pages while any returned change mlx5_reclaim_startup_pages to keep polling while any pages are returned if none are returned keep polling for five more seconds before exiting with an error message
0ee7b8714dca511a68826a300cc4966f2e83a6c3	fnic for standalone c series sending vlan request message seen even if the link is down when physical link between standalone c series and switch is down the fip timer is not turned off and timer expiration will keep sending vlan request it can be fixed by stopping the fip_timer and it will be restarted automatically when link is up increment fnic version from to
ee34ab5b01e6e7cbd9438aeb6ccbd08d3727988e	drm fix memory leak in drm_mode_setcrtc the mode passed to the hook was never freed the drivers will make a copy of the mode so simply free it when done
664ab5d6db57c5805ed3e1bfc06f39aad80ce34e	staging comedi usbdux use comedi_buf_read_samples use comedi_buf_read_samples to read the analog output samples from the async buffer that function will set the comedi_cb_block event when samples are read from the async buffer
068c9ec62906b626a30526638fd36189b80b6464	bnxt_en modify ethtool to support combined or rings the driver can support either all combined or all rings the default is combined but the user can now select rings
e0af21c56ddd592b33f74f986a2cb4478b10786e	use correct barriers _raw_write_lock_wait first sets the high order bit to indicate a pending writer and then waits for the reader to drop to zero smp_rmb by definition only orders reads against reads lets use a full smp_mb instead as right now smp_rmb is implemented as full serialization this needs no stable backport but this patch will be necessary if we reimplement smp_rmb
fb57dc817c24d46b035320d871b7a3fcc778558d	btrfs parse parent __number__ into correct value in tracepoint value __number__ is not a tree id so besides an upper limit a lower limit is necessary as well while parsing root types of tracepoint
bd473da35bc21a0004b8ad35c19e0c8b53b03f36	tg3 call tg3_netif_stop from tg3_stop instead of making separate tg3_napi_disable and netif_tx_disable calls update version to __float__
ad81d3871004544297fda38774f20adab3db57f8	mmc sdhci-msm add support for uhs cards enabling support for ultra high speed mode cards requires some voltage switching and interaction with the pmic via a special power irq add support for this
7a0d4eae83e7dbabd02c744ec3aa0ed542ed6181	greybus power_supply add missing defines present in the specification some of the greybus properties values capacity level and scope even though they are defined in the specification were missing from the protocol header they still match the kernel ones but they should be present in there for protocol sake
eea41aee2bfad4cf5c84e1cab8aa068c66206651	tty fix led error return introduced a regression when setting the leds we do the right thing but then return an error code resolves-bug reported-by christian casteyde
bd86055fc938493259a15dc00ee77435b4d2e83f	allow more cluster size values allow __number__ and powers of __number__ between __number__ and __number__ for write_cluster_size
583cca6e2b1c4bc70dab49d030fc4f795cba5cfe	mfd remove some unused functions in wm8894-irq
26735f2f126f5d75234e205687e3c15e1a5a3684	nuvoton remove attributes config_hotplug is going away as an option as result the markings will be going away remove use of __devinit __devexit_p __devinitdata __devinitconst and __devexit
fede766f28dd766d4e8feb321fdb19edb21ef6fb	btrfs avoid deadlocks from gfp_kernel allocations during btrfs_real_readdir btrfs has an optimization where it will preallocate dentries during readdir to fill in enough information to open the inode without an extra lookup but were calling d_alloc which is doing gfp_kernel allocations and that leads to deadlocks because our readdir code has tree locks held for now disable this optimization well fix the gfp mask in the next merge window
4705845b30e56a49f50ed84ba2dbff4f8fd389e9	pinctrl nomadik always display irq in debugfs as we now grab irqs also without first reserving the gpio line lets print the mapped irq unconditionally in the debugfs file as well
953ceeda97ddfed2c6e0bea3706257d57197f269	lpfc devices are not discovered during testing when a remote nport changes its did a new ndlp is used however we left the old ndlp state unchanged and still in a discovery state the may stall discovery resulting in some devices not being discovered correct by swapping the state of the __number__ ndlps when a did swap is detected
59318461c8f65f6f322e391f333dfb6ec2fe4446	irqchip versatile-fpga add support for the secondary controller on arm versatile ab and pb is similar to other arm platforms but has a pass-thru register to connect some interrupts directly to interrupt inputs on the primary interrupt controller the pic_enables register needs to be configured for proper operation when the matching node is add the the necessary irqchip_declare as well
0769636cb5b95665ebadcd1a41c46f331f5a397d	vmxnet3 prevent receive getting out of sequence on napi poll vmxnet3s current napi path is built to count every rx descriptor we recieve and use that as a count of the napi budget that means its possible to return from a napi poll halfway through recieving a fragmented packet accross multiple dma descriptors if that happens the next napi poll will start with the descriptor ring in an improper state the first descriptor we look at may have the end-of-packet bit set which will cause a bug halt in the driver fix the issue by only counting whole received packets in the napi poll and returning that value rather than the descriptor count tested by the reporter and myself successfully
35a9c2ab3914a148b97a8df9cd7febafc7a07371	scsi qla4xxx return error if minidump data collection fails return error from function qla4_8xxx_collect_md_data if minidump data collection fails
46b348865011bf0d706fe1ec8c9cef08cf86ad40	fix oops if i2c bus not found in nouveau_i2c_identify
efb4b8b60d79f52a72e3698aa14e6ad2ad25db34	media staging media lirc export i2c module alias information the i2c core always reports the modalias uevent as name regardless if the driver was matched using the i2c id_table or the of_match_table so the driver needs to export the i2c table and this be built into the module or udev wont have the necessary information to auto load the correct module when the device is added
02e8161e341b4e54a4a36233f98b79763bfa3f48	usb gadget composite initialize reset in usb_add_config as it may contain pointers to functions from a previous session if config is removed and re-added
2adf550f2669645eaca7559c9ce7fc2e1dbfc636	mips ralink add verbose pmu info print the pmu and ldo settings on boot patchwork
876f9a348779b348f44736254365bb574fea74eb	ubi fastmap simplify expression there is no need to compute pnum again
0486e80b2a447fc94687505ca106091b15e61651	rtl8xxxu reorder chip quirks to follow flow of driver another flow order change to match the vendor driver
a561a8ea837182e2ac2c699e64a33b76f29d1668	fcoe add missing destroy_workqueue on error in fcoe_init add the missing destroy_workqueue before return from fcoe_init in the fcoe transport register failed error handling case
4c5018ce06c6be292d4ed96cecf2c8dda361a923	place zone_id check before vm_bug_on_page check if the freeing page and its buddy page are not at the same zone the current holding for the freeing page cannt prevent buddy page getting allocated this could trigger vm_bug_on_page in page_is_buddy at a very tiny chance such as cpu __number__ cpu __number__ hold zone_1 lock check page and it buddy pagebuddybuddy is true hold zone_2 lock page_orderbuddy order is true alloc buddy trigger vm_bug_on_pagepage_countbuddy __number__ prevents the freeing page getting allocated prevents the buddy page getting allocated they are not the same if we cant remove the zone_id check statement its better handle this rare race this patch fixes this by placing the zone_id check before the vm_bug_on_page check
d52e2e7557eace36e7eb731bbd40ed3588eb0f1b	omapdss picodlp panel handle gpio data in panel driver the picodlp panel driver leaves gpio requests to the platforms board file these should happen in the panel driver itself a platform data struct called picodlp_panel_data already exists to hold gpio numbers and other platform data request all the gpios in the panel driver so that the board files which use the the panel dont need to do it this will help in removing the need for the panel drivers to have platform related callbacks
8067bd8a12b4978e495dcbe25533ab90d24c1f83	powerpc fix unused variable warning for epapr_has_idle this warning can be seen in allyesconfig and was introduced by commit f9eb581c63b2acce827570e105205c0789360650 powerpc fix build of epapr_paravirt on book3s
17a7b16df4ba8e71e149fcf31e0b639ff45ddf84	ath6kl fix merge error in ath6kl_set_ies portion of the commit id ath6kl clear the ie in firmware if not set was overwritten by mistake due to a merge conflict this patch fixes the code back to how it should be kvalo more details to the commit log
f339664c0be145b381c788bc0d5c07fbe1dd9d85	ibm-emac delete an unnecessary check before the function call of_dev_put the of_dev_put function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
21f181f16cea4a4cbaea25409ddb044a4ad5cd34	staging comedi fixed a camel case fixed a camel case issue
f34541d7e823bff1be8e0d497e01dcbaf9c65edb	greybus ignore a null cookie when canceling buffer its possible for an in-flight buffer to be recorded as sent a thread has begin the process of canceling it in that case the greybus message cookie will be set to null and that value can end up getting passed to buffer_cancel change buffer_cancel so it properly handles ignores a null cookie pointer
3ad96c140d3c49dd90359d08a70275c9030e7f4a	staging rtl8712 fix unnecessary parentheses style warning in this fixes the following warning warning unnecessary parentheses maybe should be
553bf6bbfd8a540c70aee28eb50e24caff456a03	drop from irqtime_account_irq paolo pointed out that irqs are already blocked when irqtime_account_irq is called that means there is no reason to call again link
c6ab0158007e5ed9108fd74fe0f61b5b2a326eb9	usb serial ezusb remove last printk call this code shouldnt be calling printk no one needs to know this debug message the return code is good enough
299dea4e0ef46b263d1d24dfb7ff62e56a8a396e	fix register for second set of training data
638aa7ed4667f63ec45b264d1b6e259a79638733	btrfs factor btrfs_init_scrub out of open_ctree renamed to btrfs_init_scrub
ed72af3a8ccf9b29ccb575d39fb997e5f12b03f8	arm socfpga fix spelling mistake in error message trivial fix to spelling mistake mananger to manager in error message
64e94407fb5a4128636c2b15b38fa6e71a427228	drm pull together probe setup for drm_fb_helper drm_fb_helper_probe_connector_modes is always called before drm_setup_crtcs so just move the call into drm_setup_crtcs for a small bit of code compaction note that register_framebuffer will do a modeset when fbcon is enabled and hence must be moved out of the critical section a follow-up patch will add new locking for the fb list hence move all the related registration code together link
d4d7ccc834fe2401084e01fb043ad70ac410b19d	fix kprobe selftest for newer gcc commit fix kprobe selftest for gcc __float__ has added __used attribute to kprobe_trace_selftest_target to ensure that the method is listed in kallsyms table however even though the method remains in the kernel image the actual call is optimized away as there are no side effects and the return value is never checked add a return value check and a noinline attribute to ensure that an inlined copy of the method is not used by the caller also add checks that verify that the kprobe was really hit as at the moment the tests show positive results despite the test method being optimized away finally add __init annotations to find_trace_probe_file and kprobe_trace_selftest_target as they are only called from within an __init method link
5a6aa705ffdd97552ff756bbfa7d5a3b62a6c690	cfg80211 re-enable mhz support unfortunately i forgot this during the merge window but the patch seems small enough to go in as a fix the userspace api bug that was the reason for disabling it has long been fixed
f6281f6684d613948e7b9f0bd956488bb33993ab	add missing clk_put add missing call to clk_put a simplified version of the semantic match that finds this problem is as follows expression statement s e1 when e1 e2 when clk_pute1 when any if when clk_pute1 when if clk_pute1 else s
23a4e389bdc71fda949b5a19a28fa99c4d746d43	nfp create separate define for max number of vectors we are currently using define for max tx rings to allocate irq vectors its ok since the max number of rings for tx and rx are currently the same but lets make the code nicer by taking max of the two
cf1716e9dae5b21b9bbcfe5eb0106c3b0aee37e8	spi dw-mid switch to new api part __number__ the commit a3ff9582369e spi dw-mid switch to new api converted mid_spi_dma_exit but missed mid_spi_dma_stop this is follow up to convert the rest
da9e33c9bc39e2a02b28906a9cfb6efa5c8d9fed	add schedule point to ptlrpc_check_set most ptlrpc sets are believed to be small and bounded in length however at the very least the ptlrpcd reuses the ptlrpc sets at its primary work queue this work queue can easily have work added faster than the ptlrpcd thread can process the work the unbounded work can lead to the ptlrpcd monopolizing a cpu for hundreds of seconds obviously a well-behaved kernel function should obey the scheduler and share the processor we address that problem by inserting a cond_resched at the top of the main loop of ptlrpc_check_set some have suggested putting the cond_resched lower in the loop however the only current way to bound the number of loops that we exceed our allocated run time is to put the call at the top of the loop putting it lower would allow an unknown number and since it is unknown it might be excessively large at times of cycles through the loop before a resched is allowed reviewed-on intel-bug-id
6d5ac6e1771e30137ba1a2898885102b8bc21851	surface pro __number__ add support for surface pro __number__ buttons surface pro __number__ buttons are managed by a device with _hid mshw0040 different from surface pro __number__ this commit adds mshw0040 to id list to support the surface pro __number__ bugzilla
b8c649a99d582a6d8afd8457ba6145c624b8a76f	kvm ppc booke allow irq deliveries to inject requests when injecting an interrupt into guest context we usually dont need to check for requests anymore at least not until today with the introduction of epr we will have to create a request when the guest has successfully accepted an external interrupt though so we need to prepare the interrupt delivery to abort guest entry gracefully otherwise wed delay the epr request
2e0ad0e2c13534f1a0e7f63661e666c281e09b66	x86 acpi irq fix possible eror in gsi to irq mapping for legacy irq a default identity mapping between gsi and irq is built for legacy irqs so when overriding the default identity mapping for legacy irqs we should also invalidate isa_irq_to_gsigsi when setting isa_irq_to_gsiirq gsi otherwise there may be two entries with the same gsi in the isa_irq_to_gsi array and acpi_isa_irq_to_gsi may give wrong result link
08c0ca5ebd361420d40a4c6970e3dd1a4c64306a	asoc codec duplicated callback function goes to component on ak4554 codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
3ec39abdcc0d3099e8d8894dcbcc8c9490ee48e2	raid6test use prandom_bytes use prandom_bytes to generate random bytes for test data
fcaf57b67dd03314ade476b847f246ae377160a8	hwmon ibmpowernv do not use the opal index for hwmon attribute names the current opal firmware exposes the different sensors of an ibm power system using node names such as the ibmpowernv driver when loaded parses these names to extract the sensor index and the sensor attribute name unfortunately this scheme makes it difficult to add sensors with a different layout specially of the same type like temperature as the sensor index calculated in opal is directly used in the hwmon sysfs interface what this patch does is add a independent hwmon index for each sensor the increment of the hwmon index temp fan power etc is kept per sensor type in the sensor_group table the sensor_data table is used to store the association of the hwmon and opal indexes as we need to have the same hwmon index for different attributes of a same sensor
5ec8dca7617b77afb0e3c7e6271089172b498546	btrfs dont try and free ebs twice in log replay this work is done by btrfs_free_path anyway so theres no need for this duplicate work thanks
8ccba14233000f48639aad4cab55ed7b61260db5	rtc ds1511 clean up the change removes redundant sysfs binary file boundary checks since this task is already done on caller side in the change enables burst mode of access to sram for any operations it is worth to mention that this may influence on userspace for instance prior to the change readfd buf __number__ readfd buf __number__ __number__ and readfd buf __number__ sequences of syscalls over ds1511s sysfs nvram fd led to different ds1511 state changes buf content if some userspace applications are written specifically for ds1511 and exploit this strange feature they may be impacted also the change corrects nvram size accessible to userspace from __number__ bytes to __number__ bytes
1867e04db2ed067df9903400c96c33fe555becc3	staging comedi addi_apci_1516 rename this_board variables for aesthetics rename the this_board variables to board that name is more commonly used for the boardinfo pointer in comedi drivers
4dc3082dc1dd1415177d71f15d4b19bebb1365c0	acpi hotplug pci drop acpiphp_bus_trim if trim_stale_devices calls acpi_bus_trim directly we can save a potentially costly acpi_bus_get_device invocation after making that change acpiphp_bus_trim would only be called from one place so move the code from it to that place and drop it
402a343a24f5ed6fb9f88255d5b916be2fa3b32e	staging unisys visorbus remove postcode from chispet_init get rid of the postcodes from the function chipset_init they were being noisy so dont replace them with errors
a33a4c73810589f80b8a37477e1b28b4c1d61913	sfc enable rss hashing for udp this improves udp spreading and also slightly improves gro performance of encapsulated tcp on __number__ series nics
e661c8978e4833d4148d08b405a2f3175d6f97d9	leds ipaq-micro fix sparse non static symbol warning fixes the following sparse warnings warning symbol micro_leds_device_driver was not declared should it be
1955351da41caa1dbf4139191358fed84909d64b	bpf set register type according to is_valid_access this prevent future potential pointer leaks when an unprivileged ebpf program will read a pointer value from its context even if is_valid_access returns a pointer type the ebpf verifier replace it with unknown_value the register value that contains a kernel address is then allowed to leak moreover this fix allows unprivileged ebpf programs to use functions with legitimate pointer arguments not an issue currently since reg_type is only set for ptr_to_packet or ptr_to_packet_end in xdp and tc programs that can only be loaded as privileged for now the only unprivileged ebpf program allowed is for socket filtering and all the types from its context are unknown_value however this fix is important for future unprivileged ebpf programs which could use pointers in their context
c90269c1fbfcb3082d379237f0912ea231e90a24	asoc rsnd tidyup debug print position on rsnd_dma_attach it cant output corrent dma name rsnd_mod_init it goes to rsnd_mod_init by this patch
5879a267520898d595e9cbcae0aad4739c822146	move driver authors to credits theyre not active anymore link
2e4f81ee90e801017115afb7397198f65e512031	perf test no need for setting on the record test were not looking at perf_record_sample entries and now by default we use perf_count_sw_dummy so just remove that setting link
8d540ea79211dd272403ed79b2033bbded19ac42	cpufreq drop redundant check from cpufreq_update_current_freq both callers of cpufreq_update_current_freq cpufreq_update_policy and cpufreq_start_governor check cpufreq_suspended before calling that function so drop the redundant cpufreq_suspended check from it
58d26c1eab8e94f89f17593e11d88a3821be6c3c	pinctrl sirf fix spinlock deadlock in sirfsoc_gpio_set_input sirfsoc_gpio_set_input is called in those functions which have held the spinlock so delete the duplicated locking
cc9f4daa638e660f7a910b8094122561470ac331	cgroup net_cls fix false-positive suspicious rcu usage in dev_queue_xmit net_cls protected with rcu-bh __float__ __float__ info suspicious rcu usage __float__ not tainted __float__ __float__ suspicious rcu_dereference_check usage __float__ other info that might help us debug this __float__ rcu_scheduler_active __number__ debug_locks __number__ __float__ __number__ locks held by __float__ at __address__ __float__ at __address__ __float__ stack backtrace __float__ cpu __number__ pid __number__ comm dhclient not tainted __float__ hardware name openstack foundation openstack nova bios bochs __float__ __number__ __address__ __address__ __number__ __float__ __address__ __address__ __address__ __address__ __float__ __address__ __address__ __address__ __address__ __float__ call trace __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ cls_cgroup __float__ __address__ __float__ __address__ __float__ __address__ sch_htb __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__
89211418cb7102cc98164af08ce1c87a40b10c0a	mmc sdhci-of-arasan use sdhci_pltfm_init for private allocation commit mmc sdhci add size for caller in allows users of sdhci_pltfm to allocate private space in calls to this patch migrates the sdhci-of-arasan driver to this allocation
b0f9bf369f34791cf8271be8c610a1e50ead6002	media dvb-frontends fix potential null pointer dereference in stv0900_set_mclk the dereference should be moved below the null test dpatch engine is used to auto generate this patch
c5ec618fbf83045b9d51679d809ddd45f990fe0a	watchdog sunxi add a31 watchdog support this patch adds support for the watchdog hardware found in a31 and newer socs this new hardware has registers at different offsets and the system reset control has been split out of the mode register into a new configuration register differences not supported by this driver include separate interrupt lines for each watchdog instead of sharing an interrupt line and registers with the timer block
655048a0b98bc6288ce87cb95a18bf4cada6c1a9	iio light apds9960 correct fifo check condition correct issue that the last entry in fifo was being read twice due to an incorrect decrement of entry count variable before condition check
be49b1f111c76ce20a60a90587e2b8e8ab809a06	rtl8xxxu simplify calculating of hw value used for setting tx rate calculating the value in one place rather than using one calculation in one place and a different one for management frames in another location makes little sense
17b375461672dc3cc4d495d838a9c93e6c8c9ed3	fix string split this patch fixes all warnings of checkpatch about string splitting
e2afb7de6e7dad21f9d709f80f23bbd3c5bdad11	tc error handling clean-ups rewrite turbochannel error handling to use a common failure path making sure put_device is called for devices that failed initialization while at it update printk calls to use pr_err rather than kern_err patchwork
52592da32b85e8be7e6ab534059b9457b3dea4e5	serial pch_uart add module_device_table pch_uart currently isnt auto-loaded if built as a module
604284071ab09df80fc9872c84c3b4b914ce0f95	local functions should not be exposed globally the function ata_ering_clear_cb is only referenced in this file and should be marked static to prevent it from being exposed globally this quiets the sparse warning warning symbol ata_ering_clear_cb was not declared should it be
1a07cbba1425ec7215854cfaa9a8df66047cfb57	uwb use for_each_clear_bit use for_each_clear_bit to iterate over all the cleared bit in a memory region
e04e37a88dcd674df131582b84ab2dc488397d53	net sunhme use use the wrapper functions for getting and setting the driver data using platform_device instead of using with so we can directly pass a struct platform_device this is a purely cosmetic change
88582f5646927348d31424fa8bdb0f2d97a046c0	cdn-dp dont unregister audio dev when unbinding after snd_soc_unregister_codec the dai link would remain bound to the invalid codec that would cause crashes after unbind dp driver lets unregister audio codec when removing dp driver to prevent that link
202f7680af1563516a057f884cea30be94d3014f	mfd pm8921 fixup probe error path when irq invalid platform_get_irq returns a negative error code when an irq is invalid or unspecified make irq signed to properly handle this
e0b047bd8fc73b35ba1081097e0223eb778d982c	spi davinci change the lower limit of pre-scale divider to __number__ spi hardware spec for keystone specify a lower value of __number__ for pre-scale divider which determine what max value of spi clock spi-max-frequency the device can support this translates to a clock divider of __number__ so fix the lower limit value used for the boundary check in davinci_spi_get_prescale function to __number__ so that a maximum of spi device clock rate __number__ is possible to be set for spi-max-frequency
476171ce7850b28280db6a2d0c0e4d3ff26c8117	gpiolib add missing braces in gpio_direction_show add missing braces in an condition
25e443373c171b77a1404d21396c38f12f255e16	staging comedi adv_pci1723 remove range_pci1723 this comedi_lrange is the same as the global range_bipolar10 exported by the comedi core use that range instead
2e70aedd3d522b018c01df172cd213a8a75e2d55	revert net kernel socket should be released in init_net namespace this reverts commit c243d7e20996254f89c28d4838b5feca735c030d that patch is solving a non-existant problem while creating a real problem just because a socket is allocated in the init name space doesnt mean that it gets hashed in the init name space when we unhash it the name space must be the same as the one we had when we hashed it so this patch is completely bogus and causes socket leaks
392faa0e1a8de2529183b62409f90997a2c80d3f	omapdss dispc use dss_feat_get_num_ovls use dss_feat_get_num_ovls in instead of omap_dss_get_num_overlays to remove the dependency to note that we still have uses of omap_dss_get_num_overlays in but these will be moved out in the future patches
19c1ea14c930db5e9c0cd7c3c6f4d01457dfcd69	ipv4 fix leak commit convert call_rcufc_rport_free_rcu to kfree_rcu introduced a memory leak this patch reverts it
bc10aa93a8853d6dac820696ae9a3e757e19f315	rtc update to use y2038-safe time interfaces currently uses y2038 problematic rtc_tm_to_time and rtc_time_to_tm so replace them with their corresponding y2038-safe versions rtc_tm_to_time64 and rtc_time64_to_tm
5c5ed6e2cd8b8f944cc7a27fb8a66b695dccf32f	unregister switcheroo client on exit currently nouveau only registers as a vga_switcheroo client but never unregisters this patch adds the necessary unregister calls
a19467788170c55104082ba82c8d50f54b9d6106	gpio zynq mask non-wakeup gpio interrupts on suspend added flag to the gpio chip so that irq from non-wakeup gpio will not wake the system
2fc09962e24ace45154d0c16024f1eb15700f3e8	fix resource leaks in vortex_open when vortex_up is failed the skb buffers allocated by __netdev_alloc_skb in vortex_open are not released which may cause resource leaks this bug has been submitted before this patch modifies the error handling code to fix it
af2d68d1be24972a79b1616cf7d4d29137841f87	media vivi add v4l2_ctrl_modify_range test case update the brighness range depending on the selected input useful for testing control range events
1ba7db07ccc2825669d6e376632316813a072887	make implementation static the atmel_hlcdc_crtc_reset function is never used outside the file and can be static this avoids a warning from sparse
6bd2960080bc5842159d89a8d476a9044225788c	mtd st_spi_fsm provide the sequence for enabling addressing mode the fsm serial flash controller is driven by issuing a standard set of register writes we call a message sequence this patch supplies a method to prepare the message sequence responsible for setting addressing mode on the flash chip acked-by angus clark
6b1355f9ace06a65443c607e1b70872a5f613f80	pm devfreq exynos-ppmu staticize event list the ppmu_events array is accessed only in this compilation unit so it can be made static
ac56aa228a1cada777bd0a70f034522f09e1e758	staging bcm renamed variable buffsize buff_size
675090fa84368d66f46acb521a3eff5a4318d9ff	fix spacing related issues fixes the following types of checkpatch issues warning please no space before tabs error space prohibited after that open parenthesis error space prohibited before that close parenthesis error need consistent spacing around
b97390aec4756373168ad2976e1f117b610513ea	protect debug message against null derefernce the pr_debug in add_stripe_bio could race with something changing so it is best to hold the lock until after the pr_debug
d6f7f41274b548435ab5de1041a492fc4a714196	usb serial clean up bus probe error handling clean up bus probe error handling by separating success and error paths
5c273b16771eaeb3957d365bb3695b92aff037cf	mlx5_core simplify signature handover wqe for interleaved buffers no need for repetition format pattern in case the data and protection are already interleaved in the memory domain since the pattern already exists a single key entry is sufficient and may save some extra fetch ops
9cee3d40b166cc098ad91bcafe5fccccc31f07e3	staging comedi do not use bit macro the file is part of the user api for comedi devices and is intended to be migrated to the bit macro from should not be used there replace the use of the bit macro with hexadecimal constants of the same value the bit macro replaced expressions of the form __number__ n in this file originally but reverting back to that form would encourage patches changing them back to use the bit macro
fd985e1def964bb3a3adf5e2760af10510fd3f58	clean up high_bits_offset usage usually does if high_bits_offset expr-involving-high_bits_offset at least to avoid generating useless code on machines where high_bits_offset is zero do that in uart_get_attr_port
0f23ae74f589304bf33233f85737f4fd368549eb	revert btrfs device_list_add should not update list when mounted this reverts commit b96de000bc8bc9688b3a2abea4332bd57648a49f this commit is triggering failures to mount by subvolume id in some configurations the main problem is how many different ways this scanning function is used both for scanning while mounted and unmounted a proper cleanup is too big for late rcs for now just revert the commit and well put a better fix into a later merge window
bcfe0c0954f3336c44993e5ce444e09ad6087637	drm warn_on if a modeset driver uses legacy helpers legacy hooks are only used for shadow-attaching drivers warn when a kms driver tries to use them
48eb80ba3d0912f48f07ad95ef18ce50db7d7da8	staging cx25821 change indent with spaces to tabs __number__ change indent with spaces to tabs
26c2ad8a49dffcb6bdae447dc7c02db81323dbf7	s6e8aa0 update calls to add the new flags argument to calls of and remove any direction setting code afterwards currently both forms with or without the flags argument are valid thanks to transitional macros in these macros will be removed once all consumers are updated and the flags argument will become compulsary
66d7c2629aa4f2c861b7cca9ff15b6bc38e9c9a8	asoc rt5663 fix sparse warnings fixes the following sparse warnings warning duplicate const warning symbol rt5663_button_detect was not declared should it be warning symbol rt5663_aif_dai_ops was not declared should it be warning symbol rt5663_dai was not declared should it be warning symbol rt5663_i2c_shutdown was not declared should it be warning symbol rt5663_i2c_driver was not declared should it be
88538bb5449caef8347a2785f7ac32c0b8d5858c	media cx231xx fix identation one of the identation blocks is wrong fix it while here replace pr_info by pr_debug inside such block and add the function name to the print messages as otherwise they will not help much
e70bea5fe0e3d6355fd95674eaff5aa5a32f0564	btrfs fix the amount of space reserved for unlink our unlink reservations were a bit much we were reserving __number__ and i only count __number__ possible items were touching so comment what were reserving for and fix the count value thanks
49528b4e479195e5db4fe51fcd5ddd97901efc16	gfs2 fix a use-after-free that coverity spotted in function gfs2_inplace_release it was trying to unlock a gfs2_holder structure associated with a reservation after said reservation was freed the problem is that the statements have the wrong order this patch corrects the order so that the reservation is freed after the gfs2_holder is unlocked
2c696148c69bfc220d1debe9cd451d87f45526fa	staging rtl8192e rename dm_ctrl_initgain_byrssi_highpwr use naming schema found in other rtlwifi devices rename dm_ctrl_initgain_byrssi_highpwr to _rtl92e_dm_ctrl_initgain_byrssi_highpwr
99590ba565a22c9f58f7528a94881d0455eef018	livepatch fix deferred module patching order when applying multiple patches to a module if the module is loaded after the patches are loaded the patches are applied in reverse order insmod __float__ livepatch enabling patch patch1 insmod __float__ livepatch enabling patch patch2 modprobe nfsd __float__ livepatch applying patch patch2 to loading module nfsd __float__ livepatch applying patch patch1 to loading module nfsd fix the loading order by storing the klp_patches list in queue order
06e454c40e67df631e2020571ab4e089d9fe0026	usb serial remove debug module parameter now that the dbg macro is no longer being used in the driver the debug module parameter doesnt do anything at all so remove it so as to not confuse people
272c03bb19018a03e50be44b30b4c7485918b8a2	input eeti_ts use bitn use idiomatic bitn to form single-bit masks
ced2284339580b50b997807d02ccee19692b72b3	fix thermal hysteresis unit conversion thermal hysteresis represents a temperature difference but the original code treats it as a temperature value convert it from tenths of degree kelvin to milli-celsius by deducing __number__ this is not right kelvin and celsius have same degree size from temperature difference view the conversion between tenths of degree kelvin unit and milli-celsius unit is just to multiply __number__
0e5ffd1cb5f7ce19f23cc829d5dc3ebb1491570f	lightnvm fix off-by-one error on target initialization if one specifies the end lun id to be the absolute number of luns without taking zero indexing into account the lightnvm core will pass the off-by-one end lun id to target creation which then panics during nvm_ioctl_dev_create
ac229dca7e4e582114e1ec9765fda0915aa58468	tcp remove rfc4653 ncr this patch removes the partial implementation of the aggressive limited transmit in rfc4653 tcp non-congestion robustness ncr ncr is a mitigation to the problem created by the dynamic dupack threshold with the current adaptive dupack threshold could cause timeouts by preventing fast recovery for example if the last packet of a cwnd burst was reordered the threshold will be set to the size of cwnd but if next application burst is smaller than threshold and has drops instead of reorderings the sender would not trigger fast recovery but instead resorts to a timeout recovery ncr mitigates this issue by checking the number of dupacks against the current flight size additionally the techniqueue is similar to the early retransmit rfc with rack loss detection this mitigation is not needed because rack does not use dupack threshold to detect losses rack arms a reordering timer to fire at most a quarter rtt later to start fast recovery
592a202a3d463d683632c268a3948978237a868d	ocfs2 remove unreachable code
5c64f52acdbc615e3ef58692f42ee00b83d0225d	clear_refs remove and introduce clear_refs_test_walk clear_refs_write has some prechecks to determine if we really walk over a given vma now we have a test_walk callback to filter vmas so lets utilize it
99aded71b52cfdfa22721c42e42efdd13a02f0a6	staging drivers rtl8188eu use instead of sizeofstruct fix coding style issue
ef6ca1a84a3da9bf45d31399090153e00fc6cd68	arm zynq drop use of slcr_unlock in zynq_slcr_system_restart the slcr is unconditionally unlocked early on boot in zynq_slcr_init and not ever re-locked as such it is not necessary to explicitly unlock in the restart codepath
85e510a1f9691179a5ba0929b4b89da354d89d91	media tc358743 use instead of non-ascii wide-dash character smatch complains about non-ascii characters it turns out that a wide-dash character was used instead of the more common character replace those dashes with
4ee7830c3ef9224bd078abe41a33c7396f827078	arm shmobile r8a7740 add a4su pm domain support add support for the a4su power domain this domain contains the usbphy hardware block which is currently not used by any driver
042bac563b28c8067fa958470dd5c1dc31d42cb2	staging comedi cb_pcidas absorb cal_enable_bits this inline function just returns the bits needd to enable a calibration source for aethetics absorb it into the callers sorten the variable name in the private data used to hold the current calibration source
fcba5d04c87c5c0174f159d26b295a46bfb6da58	greybus es2 fix arpc response-allocation error handling the wrong pointer was checked for allocation failures when allocating the arpc response buffer something which would lead to allocation failures going undetected
b5fc40d3b37bdb3524cdf1f550bd0c3b05ac3888	asoc cache fix error code when not using asoc level cache it is not an error to have no cache so we shouldnt return an error code and cause our callers to fail just silently do nothing instead thanks to jarkko for identify the problematic commit
f51a822c315e9d4c4c67247bea10e4b8eb795af1	libceph set page alignment in start_request the page alignment field for a request is currently set in ceph_osdc_build_request its not needed at that point nor do either of its callers need that value assigned at any point before they call ceph_osdc_start_request so move that assignment into ceph_osdc_start_request
8ef9fc78911ef64df98feba8ad12e406e8fa479b	acpi processor fix incorrect placement of __initdata __initdata should be placed between the variable name and equal sign for the variable to be placed in the intended section
bc14e00672b563f41a1ac1d421b5c78c94868983	serial sh-sci dont check irq in verify port operation the irq number cant be modified by the user as the port is fixed theres no need to check the new irq number as it will be ignored by the core
6d04d7a0d9b63dfb8942eb5e0855b9be40bc5893	staging wilc1000 wilc_deinit fixes inconsistent returns this patch fixes the warning reported by smatch wilc_deinit warn inconsistent returns this semaphore protect a cfg_values variable but cfg_values variables was not used here so just remove this line
ae872dbba92efbbaa7486fe84326427a66ed8335	backlight pcf50633 fix checkpatch warning this patch fixes the checkpatch warning as below warning please no spaces at the start of a line also long comments are fixed for the preferred style
e0471c8d8abbc2b07fc82f7b02896d1637909319	affs re-structure superblock locking a bit affs wants to serialize the superblock the root block in affs terms updates and uses for these purposes this patch pushes the locking down to the affs_commit_super from the callers
ed34add734e33afa33e7bf5ee5826650efdc0fe8	staging comedi das08_isa use comedi_request_region use comedi_request_region to request the region used by this driver
b5f53dde8d8e84a6ee200dbd0bd90a400a8fe1a1	drivers hv ring_buffer remove code duplication from hv_ringbuffer_peek does the same as hv_ringbuffer_read without advancing the read index the only functional change this patch brings is moving hv_need_to_signal_on_read call under the ring_lock but this function is just a couple of comparisons
e94570a36bda79b9f87abd283d7277b6a92c508d	dmaengine zynqmp_dma add missing module_license we get a warning about the missing module_license tag for this newly added driver module warning modpost missing module_license in see for more information this adds a gpl license matching the version __number__ or later information in the comment at the start of the file
c0c6e079497f850759e64f28f39a5a2d350dc230	use module_pci_driver to register driver removing some boilerplate by using module_pci_driver instead of calling register and unregister in the otherwise empty functions
8060c90186ec2d609b3ef3b2799e22f5a82ae55d	staging lustre lu_dirent_calc_size return type to size_t change the type accordant usage intel-bug-id reviewed-on
5cf80993add2d01dcfe3283cb290998b9d3d72cd	mwifiex reset skb length before inserting to free queue after handling command response cmd skb is inserted into command free queuewhich keeps track of availabile skbs for reuse purpose skb length is not getting reset to zero here this patch takes care of it
fc0b721f27beb5464d9fb5e521f5cd68127dd14e	usb gadget dummy_hcd move common bits of into one function
a8c6da90b823fb94ca76ca0df6bb44e6e205dc87	target remove unused su_group usage in fabric this patch removes two instances of left over code performing local scope access to struct in target_fabric_configfs_register and target_fabric_configfs_deregister
407353ec85ccc775ce342a6c5a1202f34ed827cc	phy marvell fix initialization a bug was introduced in the merge commit b633353115e3 merge the generic marvell_config_init and therefore marvell_of_reg_init is not called anymore for the marvell in net-next this patch calls marvell_config_init and moves the specific init function for the below the marvell_config_init function to avoid adding a function predeclaration
2247925f0942dc4e7c09b1cde45ca18461d94c5f	bnxt_en fix null pointer dereference in reopen failure path net device reset can fail when the or is in a bad state subsequent netdevice open fails in bnxt_hwrm_stat_ctx_alloc the cleanup invokes bnxt_hwrm_resource_free which inturn calls bnxt_disable_int in this routine the code segment if invalid_hw_ring_id results in null pointer dereference as is not yet initialized and fw_ring_id is zero the fix is to initialize cpr fw_ring_id to invalid_hw_ring_id before bnxt_init_chip is invoked
7d607f917008218564ae44ca3ef47076a9b36e8f	mmc host omap_hsmmc use devm_regulator_get_optional for vmmc since vmmc can be optional for some platforms use devm_regulator_get_optional for vmmc now return error only if the return value of devm_regulator_get_optional is not the same as since with the regulator can be obtained later and all other errors are fatal
bc76e320f21f8bd790a72bd5dc06909617432352	drop now misleading ddi comment from dp_link_down since commit author imre deak intel.com date fri jan __number__ __number__ dont disable dp port after a failed link training and commit author imre deak intel.com date thu jan __number__ __number__ dont disable the dp port if the link is lost we no longer call intel_dp_link_down from generic dp code but only from the dp encoder functions have their own encoder disabling callback in hence the early return is no longer needed and the big comment just confusing so lets rip it out to ensure what we dont accidentally use this again on ddi encoders add a warn_on instead spotted while reading through
be5d740bdc5448a8a542f8aa84d88d65fe88e486	organize hot path calldowns into a single cacheline save a cacheline by having hot path calldowns together
2ea4adf75235c14c5a52a90eb3c282383f79a86b	pci dont assign or reassign immutable resources ioresource_pci_fixed means the resource cant be moved so if its set dont bother trying to assign or reassign the resource
9a11d2e7e66b6b8764a2430686b8716637bf812e	send vblank event after crtc updates virtio_gpu was failing to send vblank events when using the atomic ioctl with the drm_mode_page_flip_event flag set this patch fixes each and enables atomic pageflips updates
4b9347dcbe3b426d19bda99b2061a2d1fe5a2dce	common dma-mapping add dma_attr_force_contiguous attribute this patch adds dma_attr_force_contiguous attribute to the dma-mapping subsystem by default dma-mapping subsystem is allowed to assemble the buffer allocated by dma_alloc_attrs function from individual pages if it can be mapped as contiguous chunk into device dma address space by specifing this attribute the allocated buffer is forced to be contiguous also in physical memory
b380f783772eeb66a0da85549a85aadbe5f8e76d	selinux use kmalloc_array in sidtab_init a multiplication for the size determination of a memory allocation indicated that an array data structure should be processed thus use the corresponding function kmalloc_array this issue was detected by using the coccinelle software
23272427ccf70d40b3abb81ea92f505adc1bdcd1	media v4l2 soc-camera fix requesting regulators in synchronous case with synchronous subdevice probing regulators should be requested by the soc-camera core in soc_camera_pdrv_probe subdevice drivers supporting asynchronous probing call soc_camera_power_init to request regulators erroneously the same regulator array is used in the latter case as in the former which leads to a failure this patch fixes it by preventing the second regulator request from being executed
5c84fc3c3914e9adfa6155a167c6c0c2709e6a62	btrfs dont count crc or header errors twice while scrubbing each crc or header error was counted twice this is now fixed
00ca0250125934c8e47f58f973ea2f8905cee017	mips bcm63xx let clk_disable return immediately if clk is null in many of clk_disable implementations it is a no-op for a null pointer input but this is one of the exceptions making it treewide consistent will allow clock consumers to call clk_disable without null pointer check patchwork
2e9723a3e76a050f80064249dac644f86541d3b4	move modeset checks out of that way the control flow is clearer and it prepares the stage to extract these ums functions and hide them somewhere theres still tons of display stuff outside of these but that requires more work
131ddc5c7d814d61f945b6322019e5148f6d39f0	mm unrig vma cache hit ratio current code doesnt count first find operation after vma cache flush which happen surprisingly often artificially increasing cache hit ratio on my regular setup the difference is before after boot login into kde vmacache_find_calls __number__ vmacache_find_calls __number__ vmacache_find_hits __number__ vmacache_find_hits __number__ rebuild kernel no changes to code usual config vmacache_find_calls __number__ vmacache_find_calls __number__ vmacache_find_hits __number__ vmacache_find_hits __number__ rebuild kernel full rebuild usual config vmacache_find_calls __number__ vmacache_find_calls __number__ vmacache_find_hits __number__ vmacache_find_hits __number__ total cache hit ratio if someone is counting _relative_ cache _miss_ ratio misreporting is much higher link
2f82df0f3e6e89867695956aa061b464fe2c8958	m32r remove deprecated irqf_disabled this patch removes the use of the irqf_disabled flag from its a noop since and it will be removed one day
4841f3ad0cd00d77b77566e01f71769864f658d9	pci keystone reorder struct keystone_pcie reorder struct keystone_pcie to put generic fields first no functional change intended
6fa81a12b3f1834a22167aa2d7b24dcc4bf884e3	print orig_ax in __show_regs the value of contains potentially useful debugging data for syscalls it contains the syscall number for interrupts it contains the negated vector number to reduce noise print it only if it has a useful value something other than heres what it looks like for a write syscall rip __number__ rsp __number__ eflags __number__ orig_rax __number__ rax __address__ rbx __number__ rcx __number__ rdx __number__ rsi __number__ rdi __number__ link
69f3fecc49cabaadf4839dda4227427fc15b4c7e	staging ks7010 remove unused local variable eap_key code declares and assigns to a local variable that is never used it can be safely removed remove unused local variable
4947f5e4e9b4aac23f79c7cd0b7307ada0e5d49c	staging rtl8723au remove redundant casting in casting value returned by kcmzalloc is useless
657da160cc22c69edc2bea6d9825c9e041d1c83f	gma500 cdv_intel_crt mark few functions as static
899e4aad15e93315fa18ab9e9c88904ad237cfa0	mmc cavium-octeon use proper gpio name for power control the devm_gpiod_get_optional function appends a to the string passed to it so if we want to find the power-gpios signal we must pass power to this function removed point after subject line
a165de82b08ddba1fc8b0c4eb56b9020f981c002	scsi bfa update the driver version to
8180ef8894fa402443205cff1e23417e8d3434df	btrfs keep inode pinned when compressing writes a user reported lots of problems using compression on the new code and it turns out part of the problem was that igrab was failing when we added a new ordered extent this is because when writing out an inode under compression we immediately return without actually doing anything to the pages and then in another thread at some point down the line actually do the ordered dance the problem is between the point that we start writeback and we actually add the ordered extent we could be trying to reclaim the inode which makes igrab return null so we need to do an igrab when we create the async extent and then drop it when we are done with it this makes sure we stay pinned in memory until the ordered extent can get a reference on it and we are good to go with this patch we no longer panic in btrfs_finish_ordered_io thanks
c45eabec08776d462c34802d3e5bad295bda628e	scsi scsi_debug fix false positive logical block reference tag check fail reading partially unwritten sectors generates a false positive logical block reference tag check failure when dif is enabled this bug is caused by missing ei_lba increment in loop of dif_verify when unwritten sector is skipped
02ed21aeda0e02d84af493f92b1b6b6b13ddd6e8	define and set power9 hfscr doorbell bit define and set the power9 hfscr doorbell bit so that guests can use msgsndp isa __float__ calls this msgp so name it accordingly in the code
f551b4386cefaf47b116a432c64582a8355bf362	i40e fix pf reset after offline test when the ethtool testing starts it sets the i40e_testing state bit which blocks new netdev opens so that things dont get confused while the testing might be messing with register and other things unfortunately that was keeping the pf resets after the register test from working correctly because the netdev would not get reopened this patch reorders the tests to put the register test last as it is the only one that needs a reset and we wait to trigger the reset until after we clear the i40e_testing bit change-id ieaa18d74264250ac336b0656b490125ee8a22d2a
6ea9c7ddd96d88e6cc391e63b5ed2fcfe41d5725	asoc fsl_sai use np variable the np variable is already assigned to so use it to improve readability no functional change
81e49f811404f428a9d9a63295a0c267e802fa12	i915 bail out earlier when shrinker cannot acquire mutex the main shrinker driver will keep trying for a while to free objects if the returned value from the shrink scan procedure is __number__ that means no objects now but a retry could very well succeed but what we should say here is a different thing that it is impossible to shrink and we would better bail out soon we find this behavior more appropriate for the case where the lock cannot be taken specially given the hammer behavior of the i915 if another thread is already shrinking we are likely not to be able to shrink anything anyway when we finally acquire the mutex
13cab3d422e89ccdcc78377e76299a2fdb4df90b	staging rtl8188eu offset renamed to write_address this name is better suited for this variable
bd0faf08dc7fcb3e555b35f556c9012b3c93de3b	soc bcm brcmstb match additional compatible strings match all known sun-top-ctrl compatible strings from our mips chips counterparts this allows us to properly report the soc information to user-space through our soc driver
2e1a2556ebbbe7b53a05b721ac0d3d8ca9873cdb	cxl free virtual phb when removing when adding a vphb in cxl_pci_vphb_add we allocate a pci_controller struct using pcibios_alloc_controller however we dont free it in cxl_pci_vphb_remove causing a leak call pcibios_free_controller in cxl_pci_vphb_remove to free the vphb data structure correctly
4405d5d9dd76740bfb715fc6a32343e087a13e1e	backlight corgi_lcd use devm_gpio_request the devm_ functions allocate memory that is released when a driver detaches this patch uses devm_gpio_request for these functions
d5d4e02874537d65ed2f431d39bf2f6d2967bd1b	ia64 sn2 add missing put_cpu sn_hwperf_op_cpu uses get_cpu but is missing a corresponding put_cpu
7b5cc1a9c9f4096555345c365508d727149553fe	do proper access checking before calling handle_mm_fault the handle_mm_fault function expects the caller to do the access checks not doing so and calling the function with wrong permissions is a bug catched by a bug_on so fix this bug by adding proper access checking to the io page-fault code in the amd iommuv2 driver
f57e1e3a67503927824839996a6efce269281afa	do not use fdi_normal_train on haswell this should be already configured when fdi auto-negotiation is done
a9d20988ac7db47fec4510cefc966e876a4ce674	clockevents check state instead of mode in path macros are present for backward compatibility as most of the drivers are still using old interface these macros shouldnt be used anymore in code that is common to both driver interfaces and drivers implementing interface which have their set to __number__ clkevt device structures are normally globally defined will not participate in as they will always be marked as unused fix this by checking state of the clockevent device instead of mode which is updated for both the interfaces link
b666a9cd993c6a49c4bf23a1ed476359c978f60b	btrfs add barrier for waitqueue_active in clear_btree_io_tree waitqueue_active should be preceded by a barrier in this function we dont need to call it all the time
f8f0ad8621cf01e1e3f8264863b270c2308a9c1a	usb serial fix generic disconnect implementation there is no need for the generic disconnect callback to stop the read and write urbs a second time as this has already been taken care of by close which is called from hangup as part of disconnect
0a8e7d49d59ce3910dd341d0d3df419f8defc9fe	convert init function to return error the init functions do not return any error they behave as the following panic thus leading to a kernel crash while another timer may work and make the system boot up correctly or print an error and let the caller unaware if the state of the system change that by converting the init functions to return an error conforming to the clocksource_of_ret prototype proper error handling rollback errno value will be changed later case by case thus this change just return back an error or success in the init function
5fc1398725dbc6f6c7200901c3a52f840d9090b8	staging winbond reg white space deleted white space deleted before semicolons
a30dd801fad1ff961c8eb28850b3b8d013316743	fix multiple assignments fix all multiple assignments on directory
d9b5327ad757164418e8d4e260a343377e99f205	fix no hdp flush for compute ring no pfp on compute
3897957494d979ad592a00a6ced4b6c9410e9452	net stmmac add bql support add support for byte queue limits to the stmicro mac driver tested on a amlogic s802 quad cortex-a9 board where the use of bql decreases the latency of a high priority ping from to when the link is saturated by __number__ tcp streams
d4969581452be430135ba5040c5b6c9023c1d461	pktgen remove one sparse error warning incorrect type in assignment different base types expected unsigned short unsigned short usertype got restricted __be16 usertype protocol lets use proper struct ethhdr instead of hard coding everything
58dec65d714f9f2872fdfe8f6a1f36027431de95	media fix error return code convert a nonnegative error return code to a negative one as returned elsewhere in the function a simplified version of the semantic match that finds this problem is as follows return ret __number__ when ret e1 when when ret e2 when forall return ret due to a merge conflict
7c74d5b7b7b63fc279ed446ebd78de20d81f2824	fix msr_ia32_sysenter_cs msr value commit d56fe4bf5f3c always set up sysenter msrs missed to add ull to the __number__ and wrmsrl_safe complains in function warning right shift count width of type wrmsrl_safemsr_ia32_sysenter_cs __number__ fix it link
24c4b47829a16f0f335621b3dee1a437297068d0	memory samsung exynos-srom fix wrong count of registers this patch fixes wrong count of array for srom registers from probe function
3e692a942f6eb0ec0151449e6c5fb88ffc854b6d	ata pata_samsung_cf use devm_ioremap_resource use devm_ioremap_resource in order to make the code simpler and remove redundant return value check of platform_get_resource because the value is checked by devm_ioremap_resource
692e7c45d95ad1064b6911800e2cfec7fc0236db	mm memcontrol catch root bypass in move precharge when mem_cgroup_try_charge returns it bypassed the charge to the root memcg but move precharging does not catch this and treats this case as if no charge had happened thus leaking a charge against root because of an old optimization the root memcgs res_counter is not actually charged right now but its still an imbalance and subsequent patches will charge the root memcg again catch those bypasses to the root memcg and properly cancel them before giving up the move
29f646dfb2269fa55d48a8d8c91a42ee64e5e4fc	dont proceed in audio_fini in dcev11 if disabled if amdgpu_audio is disabled then the audio structure is not initialized so we shouldnt read it in the fini function
860276a738d43f645bcd016b76a40e677538be80	warning on quoted string on multiple lines fix warning on quoted string on multiple lines in
dc5730f5aabd05984f7d8bc72698a6d8a0e8bee3	media tw9910 add g_tvnorms video op report to soc_camera which standards are supported by tw9910
04aeb56a173282210c5dab5c9b3071fa3613806f	allocate non pages for rx ring with __gfp_nomemalloc high order pages are optional here since commit mlx4 allow order-0 memory allocations in rx path so here is no reason for depleting reserves generic __netdev_alloc_frag implements the same logic
762ff31dd4ec9d97e38bf3c1aa3c4bbd8e3e87ce	dmaengine sa11x0 use correct print specifiers for size_t this driver when compiled on __number__ bits gave warnings warning format expects argument of type but argument __number__ has type we should use to print size_t values
2b5166efda83259fe1d98424a7875293718ec22e	media v4l of remove the head field in struct v4l2_of_endpoint the field is unused remove it
50cf7c8ab324de348990bb028ad9ed10872d527a	pinctrl re-enable old state in case of error in pinctrl_select_state if a new state is applied the groups configured in the old state but not in the new state are disabled if something goes wrong and the new state cant be applied we have to re-enable those groups
5412df0bda90a2bdcef2771849ad5472b9ef8100	watchdog pcwd_usb use allocated buffer for usb_control_msg usb_control_msg must use a dma-capable buffer this fixes the following error reported by smatch usb_pcwd_send_command error doing dma on the stack buf
f741554e25e5c94bca1d5157608baab80586f81c	staging sm750fb replace uint32_t with u32 replace uint32_t with u32 consistent with linux kernel coding practice problem found using
e06465050e2a62ccab164d116e443101279c14bb	drivers misc ti_dac7512 drop dac7512_drv_name the drivers name can be provided directly so drop the
126a66caec4a00b8d66dbc3174b0efa905cf68c3	i2c omap drop the lock hard irq context the lock is taken while reading two registers on rt the first lock is taken in hard irq where it might sleep and in the threaded irq the threaded irq runs in oneshot mode so the hard irq does not run until the thread the completes so there is no reason to grab the lock drop locking from isr completely and remove lock field from struct omap_i2c_dev
f748b65bfc8cabdf50f1a6934a9cd43f173f2264	staging dt3155v4l pci_iomap returns a void __iomem not a void
33c2dcfdfe7f114cc656bcb4c839f5939d5e60ba	perf evlist refactor mmap_pages parsing logic will be re-used for the out-pages argument for mmap based writes in perf-record link
ac3a497f13e42a99ed6fe188ebf2dcc39eb7ac20	hwrng core do not register device opportunistically currently we only register the device when a valid rng is added however the way its done is buggy because we test whether there is a current rng to determine whether we need to register as the current rng may be missing due to a reinitialisation error this can lead to a reregistration of the device as the device already has to handle a null current rng anyway lets just register the device always and remove the complexity
197ac858ae982eac0d59e1d3e7e87bc1e2b2908a	staging unisys virtpci fix alignment issues use the appropriate whitespace alignment for multiline statements in
cd6cfd7311a385144a2f9c74f692ae2df3ae033f	ath9k do not set channel flags in ar_phy_mode mhz channel bandwidth is configured via the pll clock instead of the ar_phy_mode register using that register is ar93xx specific and makes the mode incompatible with earlier chipsets in some early versions these flags were apparently applied at the wrong point in time and thus did not cause connectivity issues however now they are causing problems as pointed out in this openwrt ticket
821112aa413285ae8a49f787ba01ab30e930ad85	simplify intel_crtc_prepare_encoders we dont have the callback call directly
b7552e1bccbe3da9c8e7386c6188e8ea4667c8e7	bpf rather use get_random_int for randomizations start address randomization and blinding in bpf currently use prandom_u32 prandom_u32 values are not exposed to unpriviledged user space to my knowledge but given other kernel facilities such as aslr stack canaries etc make use of stronger get_random_int we better make use of it here as well given blinding requests successively new random values get_random_int has minimal entropy pool depletion is not cryptographically secure but doesnt need to be for our use cases here
7448fcd3b8caee05c6e5a7dc965b5845affbb2e8	staging comedi ni_daq_700 remove local variable in the attach function there is no need for the local variable iobase in the attach function if its __number__ the attach fails otherwise the value is just stored in
6ca3f8bdf8253504426935c97cabb44bdc6f5888	arm exynos4 add hdmi support for origen this patch adds hdmi tvout support for origen board
e6dcd87fff69a9d454104b65569074855cf95b1e	pci imx6 do not wait for speed change on as can be seen from __number__ different behavior between imx6q pcie and imx7d pcie maybe caused by the different controller version regarding to the doc description the direct_speed_change should be cleared after the speed change from gen1 to gen2 unfortunately when gen1 device is used the behavior is not documented so ic design guys run the simulation and find out the following behaviors __number__ direct_speed_change will be cleared in after speed change from gen1 to gen2 this matches description __number__ set max link as gen1 and re-run the simulation direct_speed_change will not be cleared remain as __number__ this matches your result but function test is passed so this bit should not affect the normal pcie function imx6_pcie_wait_for_speed_change will report false failures for gen1 gen1 speed transition so avoid doing that check and just rely on imx6_pcie_wait_for_link only __number__
edb1dc51de2f93905f49ba693c1777d6497a5cae	switch to gpuobj accessor macros
4403437e57c43c59c691a710a440d0924ed91b28	staging comedi mpc624 change type of private data ai_speed for aesthetics change the type of this member to unsigned int
7c8bb6cb95061b3143759459ed6c6b0c73bcfecb	nohz assert existing housekeepers when nohz full enabled the code ensures that when nohz full is running at least the boot cpu serves as a housekeeper and it cant be later offlined lets assert this assumption to make sure that we have cpus to handle unbound jobs like workqueues and timers while nohz full cpus run undisturbed also improve the comments on housekeeper offlining prevention link
b98fe24ca7d0effdd4c47a9f681d9e4f10442827	batman-adv use kasprintf kasprintf combines kmalloc and sprintf and takes care of the size calculation itself the semantic patch that makes this change is as follows expression expression list args statement s a when a if a null s
0c0f9b95c8b710b74772edd9693fe7ab5419a75a	nvme fix potential corruption on sync commands this makes all sync commands uninterruptible and schedules without timeout so the controller either has to post a completion or the timeout recovery fails the command this fixes potential memory or data corruption from a command timing out too early or woken by a signal previously any dma buffers mapped for that command would have been released even though we dont know what the controller is planning to do with those addresses
4918c6ca6838658b71d3ce75e1a4373195ac8d40	kvm vmx require kvm_set_tss_addr being called prior to running a vcpu very old user space namely qemu-kvm before kvm-49 didnt set the tss base before running the vcpu we always warned about this bug but no reports about users actually seeing this are known time to finally remove the workaround that effectively prevented to call vmx_vcpu_reset while already holding the kvm srcu lock
2aab38502d0e1bf6cf98183769e35a9ff999dcb1	dm thin cleanup dead code remove unused parameter from cell_defer change thin_bio_map to use many returns rather than setting a variable
645ec714545bca2a0ed13d7ac5b97d95e09da853	pinctrl sunxi remove irq_mask_ack and use irq_ack instead if irq_mask_ack is not defined mask_ack_irq will call irq_mask and then irq_ack in order to avoid code duplication between irq_mask_ack and irq_mask just declare irq_ack
3932b9ca55b0be314a36d3e84faff3e823c081f5	xtensa make platform_default_mem parameters configurable this allows using xtfpga platform with both mmu and nommu cores
63d99c0e89039e1509209d36ee17fc374fd112c9	mtd nand remove nand_bbt_search option this option was never used and isnt currently used
c43fd7746698a10aa6435d62ec28f977dd6246cc	mmc sdhci-pci add flag for devices that can support runtime pm only allow runtime pm for devices that specifically indicate that they support it
102a2786c9df756cffdbcfd11096124e4dc6c311	virtio_net drop config_enable now that virtio core ensures config changes dont arrive during probing drop config_enable flag in virtio net on removal flush is now sufficient to guarantee that no change work is queued this help simplify the driver and will allow setting driver_ok earlier without losing config change notifications
7d1cadca957d3c586fe71054ed843565013236d9	serial imx support rs-485 rx disable on tx some rs-232 to rs-485 transceivers require rx to be disabled on tx to avoid echo of tx data into the rx buffer specifically the xr3160e transceiver behaves this way this commit disables rx on active tx when ser_rs485_enabled is active and ser_rs485_rx_during_tx is disabled note that this is a change in behavior of the driver until now ser_rs485_rx_during_tx was enabled unconditionally even when disabled in the tiocsrs485 ioctl serial_rs485 flags field
45966c3467e8291382a8970adbd78403a7818d45	libceph introduce apply_temps helper apply_temp helper for applying various temporary mappings at this point only pg_temp mappings to the up set therefore transforming it into an acting set
bd8e0ff956456ad9071dbb6c2ed7d33bd22fc216	new helper iov_iter_rw get either read or write out of
bbe1bd0b6bba138eaf441c6c964bde9866da8808	befs add check for ag_shift in superblock ag_shift and blocks_per_ag contain the same information in different ways same as block_shift and block_size do it is worth checking this two are consistent but since blocks_per_ag isnt documented as mandatory to use some implementations of befs dont enforce this so making it non-fatal if they dont match and just having it as a warning
ccd9726e05f0b181016db1adcff633cf9baf5c4e	gpiolib of remove gpio_to_desc usage as demonstrated by commit gpiolib acpi remove gpio_to_desc usage gpio_to_desc must die replace one of its usage by the newly-introduced gpiochip_get_desc function
1dad6b3515b2cac308a039cf2d081f6b72db1e4a	greybus operation fix missing symbol exports add missing export_symbol_gpl for gb_operation_response_alloc gb_operation_result gb_operation_get gb_operation_request_send and gb_operation_cancel which are all supposed to be accessible from protocol handlers
80ad0d4a7a75158f2824d541e4802c88aba4f063	rds rds_cong_queue_updates needs to defer the congestion update transmission when the rds transport is tcp we cannot inline the call to rds_send_xmit from rds_cong_queue_update because a we are already holding the sock_lock in the recv path and will deadlock when try to get the sock lock b cong_queue_update does an irqsave on the rds_cong_lock and this will trigger warnings for a good reason from functions called out of sock_lock this patch reverts the change introduced by rds bypass workqueue when queueing cong updates the patch has been verified for both as well as to ensure that there are not regressions for either transport for verification of a client-server unit-test was used with the server blocked in gdb and thus unable to drain its rcvbuf eventually triggering a rds congestion update for the standard ib regression tests were used
3d99beabf17506b9d48461d1677a61a430000ad7	i2c rcar update copyright and license information make clear that the driver is gpl v2 only remove fsf address remove filename in comment update copyright information
2c33d7cc3875e75311d24a3bfe8d40ca201da2da	staging r8723au add missing initialization of change_inx in sort algorithm in function warning may be used uninitialized in this function depending on the uninitialized data on the stack the array may not be sorted correctly
8d01e1ef6766babffb5965218beb207dde693fb5	drm shmob_drm convert to turn clk_enable and clk_disable calls into clk_prepare_enable and clk_disable_unprepare to get ready for the migration to the common clock framework
0dc1549bfd67053181415a3f7544628a6bcd2a08	net kill long time unused bonding private flags we dont use them for years just kill them now
54ea17a597b00e46b3720e75dd7595cd5dfa5670	mtd spi-nor drop jedec_probe function its a one-liner doing no magic and its name may be confusing because it does not have to use jedec when using alternative read_id
f884c19224dc190d47251031814857c652d8a563	staging ft1000 remove assigments of ret and initialise it in beginning as ret is every time assigned to einval in fail cases initialise it at the beginning
c10cc5a9d46ba09111d4c2769207da4a80506885	bluetooth use gfp_kernel in sco_conn_add this patch changes the memory allocation flags in the sco_conn_add function replacing the type to gfp_kernel this function is executed in process context and it is not called inside an atomic section
03128fc8b56f99738f73856532dd3888e38fc063	media increment dvb api to version __float__ for atsc-mh frontend control increment the dvb api version to __float__ to signify support for controlling an atsc-mh frontend
baf040a0d1ac6319725c0fe400503683ac016580	perf tools make test use the preset debugfs path use preset debugfs path instead of hardcoded one link
a1132fc1bb6914940aeaa68f32a79ca846e2090f	staging comedi adv_pci_dio use a const pointer to the diosubd_data for aesthetics use a const pointer to access the diosubd_data in the boardinfo when doing the
7d3113042823344dcc175b0ea00a83d0273c98a4	caif stash away hijacked skb destructor and call it later this patch adds functionality for avoiding orphaning skb too early the original skb is stashed away and the original destructor is called from the hi-jacked flow-on callback if caif interface goes down and a hi-jacked skb exists the original is restored
e22504425f72cf8a6d43884e4080e534e4919e61	gpu scheduler for kiq kiq is used for interaction between driver and cp and not exposed to outside client as such it doesnt need to be handled by gpu scheduler
c24e7daf823256c83ce3efe6fa9b9b8ab5b78480	iio pressure hid-sensor-press fix memory leak in probe channels is allocated via kmemdup and it is never freed in the subsequent error paths use directly instead so that we avoid such memory leak problem
e8790ab4ce2a46505a8e1479645414425dbc81f0	regmap mmio staticize regmap_mmio_gen_context regmap_mmio_gen_context is only used in thus make it static
a40d3e420d50156b7a43e66d5f5b40c444ebc5da	ath10k clean up ath10k_ce_completed_send_next_nolock the error handling was just weird simplify it
718a0609ae263b291848ecd0fa88bcf15ad49280	pci unfold conditions to block runtime pm on pcie ports the conditions to block d3 on parent ports are currently condensed into a single expression in pci_dev_check_d3cold upcoming commits will add further conditions for hotplug ports making this expression fairly large and impenetrable unfold the conditions to maintain readability when they are amended no functional change intended
98706ea99f2da8afdac69686de4ff982aca6a5c7	fix build this uses the proper div macro
8066ce3b872d0437df904cee4c0edc4501a500de	arm pxa pxa27x dont map imemc region statically the imemc mapping not only has no user but maps a reserved memory space it just wastes vmalloc space remove it
0296951a62bb863008821b33343cff446fce4b84	usb move assignment out of if block we should not be doing assignments within an if block so fix up the code to not do this change was created using coccinelle
38daf88ae16d053cffc8745e05b9f7a324ce36eb	mxser allow overlapping vector for many cards this saves some io space because interrupt status port has precedence over the rest of ports on the card hence it can be mapped to a hole in ports here we add a kernel parameter which allows that if a user wants to but they need to explicitly enable it by a module parameter
9a8b300f2f7812ebf4630b8b40499da38b38e882	use tnf flag instead of vm fault we are using the wrong flag value in task_numa_falt function this can result in us doing wrong numa fault statistics update because we update num_pages_migrate and numa_fault_locality etc based on the flag argument passed link
5332b6263742cd75963eccdea9e3af4a464c2999	media dib7000p avoid division by zero dib7000p_read_word may return zero on i2c errors resulting in dib7000p_get_internal_freq returning zero so dont divide by the result of dib7000p_get_internal_freq without checking it for zero in dib7000p_set_dds on one of my machines the device id pinnacle systems inc pctv dual dvb-t about once a two days gets into a state where most i2c reads return with an error tuning during this state will result in a divide by zero without this patch this patch doesnt fix the root cause for the device getting into a bad state but it allows me to the drivers bringing it back into a usable state
054880febeb890b24d705240384856ea6b3ccf7b	asoc core bind dais to codecs at registration time we should always have a codec already there when registering a codec dai and for links a dai_link will have two codecs so its much simpler to do things at registration time this results in a slight change in the error handling for failed codec dai registrations but practically speaking these are never supposed to fail so there shouldnt be much issue the change is that we dont fail the overall codec registration if the dai registration fails this seems more robust anyway as we may not need to use a given dai in a particular system
6c3acd97572b2414075503aa79f305c1d6268114	f2fs allocate hot_data for atomic writes wed better allocate atomic writes to hot_data zone
ffd491fd6f4129c201926edbbd63e2088d82d2fa	media qt1010 signedness bug in qt1010_init_meas1 qt1010_init_meas2 returns zero on success and negative error codes on failure so the return type should be int instead of u8
67390d21fe8fefbf961395274f8d67a071306d9a	media siano dont break long lines due to the restrictions and latter due to checkpatch warnings several strings were broken into multiple lines this is not considered a good practice anymore as it makes harder to grep for strings at the source code as were right now fixing other drivers due to kern_cont we need to be able to identify what printk strings dont end with a it is a way easier to detect those if we dont break long lines so join those continuation lines the patch was generated via the script below and manually adjusted if needed use while if ne if if __number__ substr __number__ __number__ x __number__ substr __number__ x __number__ if ne print print if ne else print next else print else if if next print
baede40c4daf2157413ae218946d6fe3b3ed1292	media au0828 tune retry interval for i2c interaction adjust the retry timeout and number of retries to speed up xc5000 firmware download with this change it goes from __float__ seconds to __float__ the net time waited is pretty much the same but we just poll more often tested at __number__ khz as well as __number__ khz
20959c4b4078847e629eed8918abb52bfe5f559a	target remove unneeded check in sbc_parse_cdb the check of scf_scsi_data_cdb seems to be a remnant from before hchs refactoring of this function there are no places where that flag is set that isnt also set
afe1bb73f8ed588ab6268c27c5a447fe0484e48f	ocfs2 unlock rw lock if inode lock failed in ocfs2_file_aio_write it does ocfs2_rw_lock first and then ocfs2_inode_lock but if ocfs2_inode_lock failed it goes to out_sems without unlocking rw lock this will cause a bug in ocfs2_lock_res_free when testing which is increased in __ocfs2_cluster_lock and decreased in __ocfs2_cluster_unlock
134f0e9b5da9079795776a2790944b28728fece7	simplify ipp_find_obj the patch simplifies ipp_find_obj and removes debug messages
707214d097eb505fe067668838ae800260a064ba	put the gpio into output mode no call was being made by the gpio driver to put the gpio into output mode meaning that the calls to gpio_set_value which were being done were not valid a similar issue appears to exist with the dt gpio requests but as they appear to be being used for pinmux its less clear to me that we want to configure them without this fix cragganmore systems cant talk to their spi devices
5af1a9ce3d114bbd49b5a06bfc5f5404d73709e3	convert to module_pci_driver
7f06ea1e79696d6357b214dd6436ba4c17cf71f4	ath10k check result when we execute in the target check that the result it returns doesnt contain an error this is to make sure that we dont accidentally use invalid calibration data while at it remove the useless label in the function and add few debug messages
61bc95c1fbbb6a08b55bbe161fdf1ea5493fc595	on g45 enable cursor plane briefly after enabling the display plane on g45 some low res modes and produce a blank screen when the display plane is enabled with with cursor plane off experiments showed that this issue occurred when the following conditions were met a a previous mode had the cursor plane enabled xserver b this mode or the previous one was using self refresh thus the problem was only seen with low res modes the screens lit up as soon as the cursor plane got enabled therefore the blank screen occurred only in console mode not when running an xserver it also seemed to be necessary to disable self refresh while briefly enabling the cursor plane bugzilla danvet drop spurious whitespace change
609e71313bddd217808eea2ddd5d0faecaa07131	asoc tas2552 clean up the digital analog dapm route definition the strings should be static const char const tas2552_input_texts soc_dapm_enum should have route in place of xname and no need to have it as an array also align the parameters
8b38937b7ab55e93065a14c88753b1fe83e93c60	do not enter deferred errors into the generic pool twice we used to have a special ring buffer for deferred errors that was used to mark problem pages we replaced that with a generic pool then later converted mce_log to also use the same pool as a result we end up adding all deferred errors to the pool twice rearrange this code make sure to set the and fields for deferred errors then if flags and mean we call mce_log we are done because that will add this entry to the generic pool if we skipped mce_log then we still want to take action for the deferred error so add to the pool change the name of the boolean error_logged to error_seen we should set it whether of not we logged an error because the return value from machine_check_poll is used to decide whether storms have subsided or not link
041497eb721ddbdc1e690316976dd8ba7bc136a2	delete unused module_device_table from in commit c39dfebc7798956fd2140ae6321786ff35da30c3 make explicitly non-modular we removed the code relating to modular support since it currently only supports built in however when redoing my build coverage for mips allmodconfig which sets config_of i noticed a remaining line that needs to be removed else we will get a build failure for an undefined module macro unfortunately this didnt appear for any of the other arch i tested more frequently such as arm since module_device_table is a no-op for non-modular code we can just remove the offending line
2754867792edfc9a6f2f49294be278d9be533ce2	cfg80211 add documentation for cfg80211_get_bss this was missing but is referenced a lot in the documentation
0a1abe7961f1b90bb136157a302490da7d4fe47b	mtd nand docg4 show parent device in sysfs fix a bug where parent device symlinks arent shown in sysfs while at it make use of the default owner value set by mtdcore
039b33070e8be5f4b452617792ac7269e577d23e	usb core hub removed some warnings generated by removed some warnings saying there was an unwanted space between function names and their arguments
901c6c665b1024ea2bbabc24ba609a118459a2d8	gfs2 update master statfs buffer with sd_statfs_spin locked before this patch function update_statfs called gfs2_statfs_change_out to update the master statfs buffer without the sd_statfs_spin held in theory another process could call gfs2_statfs_sync which takes the sd_statfs_spin lock and re-reads m_sc from the buffer so theres a theoretical timing window in which one process could write the master statfs buffer then another comes along and re-reads it wiping out the changes
e2be23712a9c8e3710c9e2684a3204bd20c685d6	fix error return value in cmm_mem_going_offline cmm_mem_going_offline is only called from cmm_memory_cb which sends the return value through notifier_from_errno the latter expects __number__ or notifier_to_errnonotifier_from_errnox is __number__ for any x __number__ so passing a positive value cannot make sense hence negate enomem
3228723b0ce0ef6ef6d3f59f282f061430691ab9	asoc intel remove invalid kfree of devm allocated data kbuild robot reports following warning warning invalid free of devm_ allocated data as julia explains to me the memory allocated with devm_kalloc is freed automatically on failure of a probe function so this kfree should be removed otherwise the double free will be got in error handler path
16c1d606263ea37754be0d0ed655ab1c99c4cf7e	use of_get_next_parent in of_get_ibm_chip_id use of_get_next_parent to simplifiy the logic in of_get_ibm_chip_id
89f637f716a90ec9da7a26d53ad883ea2b806e66	greybus svc fix device-id allocation flag use gfp_kernel for device-id allocation in svc_process_hotplug which is called from a work queue
63f10d2ca78c17cdd612c1daee7daffacca8b7fb	alsa hda fix unsol event initializations for via codecs fix a issue to enable unsolicited response to line-out pins
2b4a8bd242d2880b232d07105981a8d31e8bc262	fix __number__ bit pci size issue the size might be __number__ bit so use ilog2 instead of __ilog2 or __ilog2_u64 ilog2 can select or function automatically
e58b57a354cade526266f60d3d936eed7c421c90	tty add c_cmspartty add the missing c_cmspartty macro
2eb4c7b1e7f275fe833aabe0a251b8e3f767fb08	tda998x force the page register at startup time this patch forces the page register to be set on the first operation
dd6e1f71b785a6ac2511e2ddb86315f292873e59	scsi libfc fix incorrect variable assignment previous assignment was causing the use of the uninitialized variable _explan_ inside fc_seq_ls_rjt function which in this particular case is being called by fc_seq_els_rsp_send mkp fixed typo addresses-coverity-id __number__
1fd9c67203af91977bf3b964ff3744cf74fc6f3f	virtio_balloon return the amount of freed memory from leak_balloon this value would be useful in the next patch to provide the amount of the freed memory for oom killer
0ac5b708e362bdbe7c16b67dc3cad41f69aeab3f	cxgb4 use the node info to alloc_ring for rx queues
47b70db5558388b3f4ecd10b492a0b3f6d680789	remove double indentical assignment in dev_change_net_namespace this patch removes double assignment of err to in dev_change_net_namespace
c30176fc6f483163affeb0f629c0e27b23c084a1	thermal core move idr handling to device management section given that idr is only used to get id for thermal devices zones and cooling makes sense to move the code closer
193918307f4e66eb6a811f30795991c6f7680b34	nbd remove harderror and propagate error properly instead of a variable harderror we can simply try to correctly propagate errors to the userspace this patch removes the harderror variable and passes errors through error pointers and nbd_do_it back to the userspace
5f2b3eab3fade514f9647e88356d29c7795ed7ef	mmc sdhci-of-at91 fix warnings remove field if calls are used which set it automatically generated by
83e877a334eb5ff14f6e822b6f3d8d31b5057be2	arm exynos fix skip scu_enable for exynos5440
45527d435c5e39b6eec4aa0065a562e7cf05d503	add and functions panels often require an initialization sequence that consists of three steps a powering up the panel b starting transmission of video data and c enabling the panel turn on backlight this is usually necessary to avoid visual glitches at the beginning of video data transmission similarly the shutdown sequence is typically done in three steps as well a disable the panel turn off backlight b cease video data transmission and c power down the panel currently drivers can only implement and functions which is not enough to implement the above sequences this commit adds a second pair of functions and to allow more fine-grained control over when the above steps are performed treding rewrite changelog add kerneldoc
c6a0371cbefade85376bbc326d18451860632dce	ext4 remove unneeded parameter to ext4_ext_remove_space this patch removes the extra parameter in ext4_ext_remove_space which is no longer needed
3419ae781f1592b3d367107db6500090495490cd	asoc turn of mic detect when card is removed if mic detect is left enabled and the wm8903 detects a status change the wm8903 driver will make a callback against the freed jack which will cause a crash this problem can be triggered by fully initializing an audio card then removing and re-inserting the machine driver module
418fc57abf5bfc35858b40467e2a6a50fcd34c01	usbnet cdc-ether apply usbnet_link_change use usbnet_link_change to handle link change centrally
c54e9bd38a06babf94fd45e5f1df9a1109e12818	bnx2x fix vector traveling while looking for an empty entry fixes the bug that may prevent from mac to be configured while there is an empty slot for it
3d6f0e0cb348ab1d74cb6fcb2745ebca6029bf9d	alsa korg1212 use setup_timer and mod_timer no functional change refactoring with the standard helpers
f3906bd36087dd3440ecaf6e044690374d01f927	refactor gid caches ib_dispatch_event refactor ib_dispatch_event into a new function in order to avoid duplicating code in the next patch
892db58bd1285d44e6e1a1e36157161990ec5ae4	at91 fix selection for older products since commit serial at91 distinguish usart and uart the older products which do not have a name field in their register map are unable to use their serial output as the main console output is usually the serial interface aka dbgu it is pretty unfortunate so instead of failing during probe we just silently configure the serial peripheral as an uart it allows us to use these serial outputs the proper solution is proposed in another patch
33d877bb42df3db877677039746a71c93322add2	staging vt6655 baseband remove unnecessary space after a cast no space is necessary after a cast this issue was found by checkpatch
33cd66e3c8048f03b9cc107b7a21c29cfd700ab7	hwmon f71882fg convert to use devm_ functions convert to use devm_ functions to reduce code size and simplify the code
fa1bd91809d58b3c183611556219fafd93c08625	bluetooth fix minor coding style in replace the status checks with the short form of the boolean expression
30670539b867d08c1931abd4815699de5887ee58	spi au1550 fix bug in deallocation of memory this patch fixes a bug on the deallocation of memory allocated using request_mem_region by using release_mem_region instead of release_resource and kfree
40a0136b5a7113ccf8d17e56c1f25f63427c4022	staging vt6655 no braces needed for single statement if for blocks there is only one line inside the if and for blocks so the braces are not needed
4752bc309b7604d507c973c7b7678ac2ce10a058	make register_disk static
4d6ff250857a8b5f8e33ea62ff16f165085f8655	alsa dice fix array limits in dice_proc_read the array limits are supposed to be in units of u32 instead of in bytes the current code has a potential array overflow
516354e0b458c3c16555364e105bdee5cd1cf5f1	remove code without effect the tempal variable is assigned and then immediately overwritten remove everything without effect the inb is kept for possible side effects
1786bd7503cfe5dfdb57b6b965cfb9a092b04df0	staging comedi pcmmio remove unnecessary for loop and sanity check there is only one asic on the board so the for loop in the interrupt handler to check multiple asics is not needed the sanity check of the irq in the interrupt handler is also not needed if it _is_ wrong we have bigger problems in the kernel
c878a52d3c7cabab5b24460825c24eafd8be7058	cpuidle check if device is already registered make __cpuidle_register_device check whether or not the device has been registered already and return immediately if thats the case rjw changelog
e3f2a9cc84d35fac73c906de57ad3b3f5ff82008	scsi st clean up dev cleanup in st_probe st_probe leaves a cdev pointer hanging around that is compared during the error path and freed later theres no need for the pointer to hang around at all so we free it immediately and simplify the error handling
d67d4be56a3ec8d07b1f29aab6095b363085b028	rbd pass null version pointer in add_snap rbd_header_add_snap passes the address of a version variable to rbd_req_sync_exec but it ignores the result just pass a null pointer instead
c260b7722f8c21963d0f0347f7fc203da9ee1a6b	net allow userns root to control tun and tap devices allow an unpriviled user who has created a user namespace and then created a network namespace to effectively use the new network namespace by reducing capablecap_net_admin calls to calls allow setting of the tun iff flags allow creating of tun devices allow adding a new queue to a tun device
a5d3a21a9a8c5a2b8332768a3ce9636b630ef664	asoc twl6040 move ignore_pmdown_time to driver struct its set unconditionally
b2cfdf3c6720b9b77758ef229401f28f48c3372b	mrf24j40 use ieee802154_alloc_hw for private data this patch removes the own private dataroom allocation by calling devm_kzalloc for devrec and assign this pointer to instead we using like all other drivers ieee802154_alloc_hw and give the size for the private driver dataroom at the first argument
872951850666689e931e567ebdc7c483135d14cf	refactor retrigger_dynirq and resend_irq_on_evtchn these two function did the same thing with different parameters put the common bits in retrigger_evtchn this changes the return value of resend_irq_on_evtchn but the only caller in ignored the return value so this is fine
9ff4a80b2551d43f92c3d9a7a11e406ce7aa47f3	cpufreq imx6q use cpufreq_table_validate_and_show lets use cpufreq_table_validate_and_show instead of calling cpufreq_frequency_table_cpuinfo and cpufreq_frequency_table_get_attr
6ac4262f367fd0d9b0219dfd014ffcca4a6cfa6a	asoc fsi convert to devm_xxx
687d84798de4c202c104db888b33e956bb5b883d	staging comedi dt9812 pass the comedi_device to dt9812_configure_mux for aesthetic reasons instead of passing the struct usb_dt9812 pointer pass the comedi_device pointer to this function
ab0831d0f35b44724390134d03bcff99ae0d8a7e	i2c mpc report correct i2c error return codes this patch enforces correct i2c error returned codes from freescales mpc i2c bus driver allowing for proper error handling
893be483434a364f3a01127bdbfbdab8c5331501	staging comedi adl_pci9111 remove unnecessary is_valid the is_valid variable in the private data is only used in the detach of the board to determine if the pci9111_reset function can be called that function only requires a valid to work use that for the check instead and remove the unneeded variable from the private data
e3429cd240b06c79df3ea90f28065a7e011744cd	warsusetimeoutmode enable to mode for rc6 for skl till d0 and bxt till a0 danvet fixup line continuation alignment
75287a677ba1beab7ca0db948468f44eb23a709f	kernfs convert node name allocation to kstrdup_const sysfs frequently performs duplication of strings located in read-only memory section replacing kstrdup by kstrdup_const allows to avoid such operations
e43ed5fa1435e3ae8a2a5727ea30581640f9e18d	staging comedi dmm32at use helpers use the new helpers in the step __number__ tests of dmm32at_ai_cmdtest
19c2aedc54b927ab10d3723038182eedf90438a4	iio_event_code clamp channel numbers make sure we only use the allotted space for channel numbers in the event mask and do not let them override other fields since negative values are valid channel number cast the channel number to signed when extracting it from an event mask
d9e52fb1627b1f6fe5810941f2e1641a3d394641	hpsa correct lun data caching bitmap definition the bitmap was changed after this definition was added to the driver correcting the bitmap definition
e495dd833b2345f89888378c6ec7456995791087	staging lustre re-use kbasename common helper to get the name of a file from a pathname we may use kbasename helper
da7de91c3e237f3ace1aa29b82c69702dc0176c5	cpufreq intel_pstate check cpuid for msr_hwp_interrupt the msr msr_hwp_interrupt is valid only when __number__ so check for feature before accessing this msr
d882f07a83642283b9bc4e7f4c56ac4982c5e629	mips idle dont call local_irq_disable in cpu_wait implementations the generic idle loop has already disabled interrupts so this is redundant
c1a5e9f69a4048e9127f5e8b2887bc89c435f9a3	call get_adjust_train from clock recovery and channel eq move the call to intel_dp_get_adjust_train out of intel_dp_update_link_train and call it instead from the clock recovery and channel equalization features a follow up patch will remove the dp register write from that function so that it handles only the dpcd write
c62bddfb6aea7e2fa5ba85f83f71e17e8e681e55	staging unisys fix strict checks in create_device use the variable name rather than the type and add a set of missing brackets to the if statement in create_device
65e116e17327bce9b75adb02574a6edf126f7ef2	omapdss configure wb fifo thresholds fifo thresholds for all pipelines are set in dispc_init_fifos but we are missing it for wb pipeline add that
d82f0f1fc8a4f214a50c9dfc64e3896f9894afb7	sctp fix dst leak commit failed to release the reference to dst entries that it decided to skip
3adde1f59195df2965f632e22b31f97fb371612f	input synaptics remove topbuttonpad property for lenovos __number__ the __number__ series of the lenovo thinkpads added back the hardware buttons on top of the touchpad for the trackstick unfortunately lenovo used the pnpids that are supposed to be __number__ buttons touchpads so the new laptops also have the input_prop_topbuttonpad yay instead of manually removing each of the new ones or hoping that we know all the current ones we can consider that the pnpids list that were given contains touchpads that have the trackstick buttons either physically wired to them or emulated with the top software button property thanks to the extra buttons capability in query we can reliably detect the physical buttons from the software ones and so we can remove the topbuttonpad property even if it was declared as such
2544b794372b63e46384ac4af91c5630e92cf7f4	staging hv storvsc in case of scsi errors offline the device when we do get fatal errors from the host offline the device since the host has already tried all possible recovery actions
35011d398e7543fbad086dad6d41b454a7c2e1e9	simplify avfs control code in smu7
f5294f455afd30bdc90f31d6d0101bb773e9ddba	media vim2m support expbuf
f98692ea6dda68c7eda6d53a3bc850702c3b8fde	asoc use standard cache sync for wm8978 saves a bit of code and supports further refactoring
fd61576fdda88c9677f9ea62e6f32997ce39daea	asoc samsung i2s add missing clk_disable_unprepare on error in samsung_i2s_probe add the missing clk_disable_unprepare before return from samsung_i2s_probe in the error handling case
2fa37fd71396b8eff72d23cafc8c583dd8eb928c	orangefs fix warnings warning null check before freeing functions like kfree debugfs_remove debugfs_remove_recursive or usb_free_urb is not needed maybe consider reorganizing relevant code to avoid passing null values null check before some freeing functions is not needed based on checkpatch warning kfreenull is safe this check is probably not required and by julia lawall generated by
ff13cf37fac6961c1c53886eb47753c82cc16963	staging unisys visorbus remove return values for write_vbus functions this patch removes the return values from the channel functions nobody was checking the return values and the value stored into the vbus info is not critical to the functioning of the device
9432ba6015371f186926cd62e2395718217a17a1	kvm ppc add papr_enabled flag when running a papr guest some things change the privilege level drops from hypervisor to supervisor sdr1 gets treated differently and we interpret hypercalls for bisectability sake add the flag now but only enable it when all the support code is there
d33b98fc82b0908e91fb05ae081acaed7323f9d2	block partition msdos provide uuids for partitions the partition table includes a unique id often referred to as the nt disk signature when combined with a partition number within the table this can form a unique id similar in concept to partition uuid constructing and recording this value in struct partition_meta_info allows msdos partitions to be referred to on the kernel command-line using the following syntax
992e7bd2be1817d6327febebcfff7ab836a3306c	pci spear add __init annotation to spear13xx_add_pcie_port add __init annotation to spear13xx_add_pcie_port because spear13xx_add_pcie_port is called only by spear13xx_pcie_probe which is marked __init this fixes a section mismatch warning warning section mismatch in reference from the function spear13xx_add_pcie_port to the function
ca13bb3d4e54f5c30089e55d5b8f4bb80c8f05e2	iommu add iommu_exec flag for safely allowing xn mappings whilst most iommu mappings should probably be non-executable there may be cases where executable mappings are required this patch introduces a new mapping flag iommu_exec to indicate that the mapping should be mapped as executable
4a3ef226762a89ed6d9281e9dd5c6cab6e65b905	arm imx27 clk-imx27 spi rename ipg clock and add per clock spi-imx driver needs two clock ipg and per the first clock must be named and the second must be added
c239c25a82808ad2cbc795b69e621c4c24f154d6	perf tools do not synthesize the treads of default guest as the default guest is designed to handle orphan kernel symboles with and it has no user space so we should skip synthesizing threads if machine is default guest link
2fae98634334e256b67241970526ddfadc77db2b	cgroup remove cgroup_pid_fry and friends cgroup_pid_fry was added to mangle pid listing order on v2 to make it clear that the output is not sorted now that v2 now uses a separate read method this is no longer used remove it acked-by acked-by zefan li
fee32378cad26dbe3f16009ba8ce43f483d10a19	staging brcm80211 use native error code in brcmf_c_pattern_atoh the function brcmf_c_pattern_atoh returned meaningless value these have been replaced by linux error code
a77a8c23e4db9fb1f776147eda0d85117359c700	pl2303 improve the chip type information output on startup the chip type distinction is getting more and more relevant and complicating so always print the chip type printing a name string is also much better than just printing an internal index number
cecd59d84d8e401db7860fc5fae503c965e5c470	qlcnic allow vlan0 traffic o adapter allows vlan0 traffic in case of sr-iov after setting qlc_sriov_allow_vlan0 bit even though we do not add vlan0 filters
66b38bc52bd1e0d00987e23bf7153c46201ff2ba	rcu split rcugp to each flavor this patch add new rcugp to each flavors folder now we could use cat to get the selected rsp info
2852230eb210bbd249c5f217eef36b641b2e4bb8	staging comedi cb_pcimdas cleanup the private data remove the unused variables from the private data
a4bb3ecdc12a78dc4d0e690d40ec10887b640786	check-before-clear pagereclaim with the page flag sanitization patchset an invalid usage of clearpagereclaim is detected in set_page_dirty this can be called from __unmap_hugepage_range so lets check pagereclaim before trying to clear it to avoid the misuse
d19081e044356ae6464e939aef04514c5e227b5a	tiny locking cleanup we only need to disable the irqs one time rename wq_flags to more conventional flags roland
53dc110c97436dcf2a758091c98093657116e91c	arc smp cpu halt interface doesnt need self cpu-id
fb209019c92a9141fd73f3c4928edc1b299b3490	radix-tree remove a use of from delete_node if radix_tree_shrink returns whether it managed to shrink then __radix_tree_delete_node doesnt ned to query the tree to find out whether it did any work or not
c895db0fb2c9e77fd94ba7995e2a01652a91910c	restart the block after unsuccessful transfer restart the ssp block in case the ssp transfer failed in any way the block hung in some cases otherwise
cd295aebf1c6fe8a051fc7adf5f0db63f4bee9b9	omap dss2 reorganize functions in group dispcs overlay and manager related functions
48c20407f49039d8da155ca00877ec5f057799e6	r8169 fix the default setting of rx vlan if the parameter features of __rtl8169_set_features is equal to the variable changed is alwayes __number__ and nothing would be changed
80067c8320aebab6d740e07be6ecf3dd04787f60	batman-adv add build check macros for packet member offset since we removed the __packed from most of the packets we should make sure that the offset generated by the compiler are correct for data
e2858b4ab1f8d7ce36ae3cd96ba650664af0db5e	kvm mmu use kvm_mmu_sync_roots in kvm_mmu_load no need to open-code this function
d98d099b9fbb7bbb20a74efe5327322831c9c9a3	intel_pstate fix pid_reset to use fixed point values commit d253d2a526 improve accuracy by not truncating until final result changed internal variables of the pid to be fixed point numbers update the pid_reset to reflect this change
8287ac00ddfece19834d40a424406eecc692b407	staging dgnc removes dgnc_mbuf function this patch removes the dgnc_mbuf function this function was causing the errors in function warning the frame size of __number__ bytes is larger than __number__ bytes in function dgnc_sniff_nowait_nolock warning the frame size of __number__ bytes is larger than __number__ bytes this patch removes it so the kernel wont be making noise when its device is found on the system
75619bfa904d0f2840b4274eb92ce47b2e1c472e	nvme end sync requests immediately on failure do not retry failed sync commands so the original status may be seen without issuing unnecessary retries
0e8d931a824aa1585e638d3c51cb172dfc982595	btrfs remove unused parameters from __btrfs_write_out_cache both unused after the call to update_cache_item has been moved to __btrfs_wait_cache_io
7ac75ba4f364fb655c89b4f9ccf1cfbdf9dfd370	staging comedi amplc_pc263 change return type of pc263_find_pci pc263_find_pci finds a supported pci device returning __number__ on success or on failure and returning the pointer to the pci device via a struct pci_dev parameter change it to return the struct pci_dev on success or null on failure
5d3cae8bc39dd38d1aa5fd4bbc788c7b43fcaa71	unix_diag dumping exact socket core the socket inode is used as a key for lookup this is effectively the only really unique id of a unix socket but using this for search currently has one problem it is onumber of sockets does it worth fixing this lookup or inventing some other id for unix
79c4c379c8f16a12c28ea2084db5138e33d17ebd	gfs2 f_ra is always valid in dir readahead function as a result we dont need to test it each time
c3dfefa0a6d235bd465309e12f4c56ea16e71111	reenable gmbus on again with the rework to merge the bit-banging fallback into the gmbus i2c adapter weve gotten rid of the deadlock possibility that originally lead to the disabling of this code this reverts the revert commit author jean delvare linux-fr.org date sat jun __number__ __number__ __number__ revert enable gmbus for post-gen2 chipsets bugzilla
9c6235c8633210cc2da0882e2e9d6ff90aa37503	mfd intel_soc_pmic_bxtwc add bxt_wcove_usbc device the intel whiskey cove pmic includes several function units adc thermal usb type-c gpio etc the corresponding device has to be created in the mfd this change adds the usb type-c device
f2bd5a9ec5edc307e5f84dc9df14253898e19678	input axp20x_pek add axp20x_pek_probe_input_device helper move all input device related initialization into a new axp20x_pek_probe_input_device helper function this introduces one functional change the input device is now registered before the sysfs attr get registered this is not a problem as the sysfs attr are to configure some long press settings forced poweroff in the hardware and do not interact with the input_device this is a preparation patch for not always registering the input dev
d7847a7017b2a2759dd5590c0cffdbdf2994918e	fix build bug caused by merge artifact with the removal of cpu_has_hypervisor the build robot by fengguang wu reported a build failure in function cstate_pmu_init error cpu_has_hypervisor undeclared first use in this function which was caused by a merge mistake i made when applying the following patch remove cpu_has_hypervisor apply the missing hunk as well link
0875eb755b66a6766be117133dbb6d8157ace337	media snd_tea575x report correct frequency range for versus ja models my __number__ cannot tune below approx __number__ mhz that is below that it does not even generate the standard not tuned to anything radio noise anymore so clearly the __number__ cannot tune to the japanese frequencies this patch assumes that likewise the __number__ cannot tune to the frequencies
bf9d834a9bc54477f3745ba0bf926c8917c45680	add some __init annotations in the file has some functions that can be annotated with __init
0f2ad9ed7c6fecb008372e8a709595a2a21059aa	mips ath79 use dynamically allocated watchdog device remove the static watchdog device variable and use the platform_device_register_simple helper to allocate and register the device in one step this allows us to save a few bytes in the kernel image
e3a3c3a205554e564751cd9c0276b2af813d7a92	uio fix uio_pdrv_genirq with device tree but no interrupt if device is initialized from device tree but has no interrupt assigned uio will still try to request and interrupt old way fails and fails registration this is wrong dont try initializing irq using platform data if device tree is available simplified code based on suggestion by grant likely fixed memory leak in irq can not be registered error path
bb63f1f8a08cf8028564ad04831ebd7a8ffb9cba	bridge fix fatal typo in setup of multicast_querier_expired unfortunately it seems that i didnt properly test the case of an expired external querier in the recent multicast bridge series the setup of the timer in that case is completely broken and leads to a null-pointer dereference this patch fixes it
557579279f5f783fa86295cf767a19f9e98bb62d	b43 n-phy enable forgotten write of hw power adjust table weve implemented table calculation but forgot to enable writing it in power setup function by the way document table layout
390306c38dd43908f7f7730229999790a773d1d5	ceph check mds_wanted for imported cap the mds may have incorrect wanted caps after importing caps so the client should check the value mds has and send cap update if necessary
fca660beb875a0449bebcfe2d6696cadb4cc593c	dmasound_core saner arguments for sq_fsync it is not and it has never been an
04d983fc4d675949e04417c39ce91bd862d2714a	media v4l vsp1 fix typo in register field names the vi6_rpf_alph_sel alpha0 and alpha1 fields are inverted swap them
5c63f094a75820b85f7aecf6ee84439d610017c0	staging comedi usbdux tidy up usbdux_pwm_write remove the sanity check of the private data this function can only be called if the private data was successfully allocated in the attach tidy up the function a bit
4f86a95d75386b47178335599264a000601e01ed	serial imx do not the ubrc register ubrc is a read-only register so we should not store and restore it inside imx_flush_buffer
93227c801372522d6f667aac0de2cacc7995d8b9	regulator lp3972 convert to devm_regulator_register both num_regulators and are no longer required after this conversion thus remove them from struct lp3972
cd854fc6f18f0c231f11f2c42167a07e3b265c72	mips uprobes remove __weak attribute from arch_uprobe_copy_ixol arch-specific implementation of arch_uprobe_copy_ixol is expected to override the weak implementation in generic code as currently both implementations are marked as weak it is up to the linker to chose one remove the __weak attribute from mips code to make sure the correct version is used patchwork
7ca9b574915a17a588db37c5635890fe660ef7e9	pcc_freq convert acpi_get_handle to acpi_has_method acpi_has_method is a new acpi api introduced to check the existence of an acpi control method it can be used to replace acpi_get_handle in the case that __number__ the calling function doesnt need the acpi handle of the control method and __number__ the calling function doesnt care the reason why the method is unavailable convert acpi_get_handle to acpi_has_method in in this patch
586b06328c16c04a7040c92b7a13aea0447e35ec	staging rtl8188eu remove label directly return null instead of using another label and goto
d6ae4a9995fa19ecde23f425a027f445074ba1ec	driver staging wlan-ng setting character pointers as const changed declaration of ctlx_str to static const char const ctlx_str
b37e1d6eebe4cb22ecf6ee489c8e223f512a08ef	staging comedi aio_aio12_8 replace comedi_board calls the comedi_boarddev inline function calls just return expand the inline function calls
3a2300385f601fbd8aed67555a1a3fef5b3d4d10	usb serial generic driver is only for testing make some noise during probe to make sure the users are aware of the intended purpose of this driver
1b2766fb496c462b3f6e1d1c52c72f8601ac8540	mips ar7 use gpiochip data pointer this makes the driver use the data pointer added to the gpio_chip to store a pointer to the state container instead of relying on container_of
31a8944752f8a91d8591148f60cd6dfb08c4e415	gpio zynq use gpiochip data pointer this makes the driver use the data pointer added to the gpio_chip to store a pointer to the state container instead of relying on container_of
81632df69772efaacc6218281f58d5ed19d5c97e	cdn-dp do not use drm_helper_hpd_irq_event the cdn_dp_pd_event_work is using drm_helper_hpd_irq_event to update the connector status this function is used to update all connectors of drm_device therefore the detect of other connector will be call when cdn_dp_pd_event_work is triggered every time it is not necessary and it may cause system crash replace drm_helper_hpd_irq_event with drm_kms_helper_hotplug_event only update cdn-dp status
b350d7b8b8c99d67dc9a21eeeb1f3564c5213cbd	net ethernet aquantia using netdev_tx_ok instead __number__ use netdev_tx_ok as the return value for successful transmission
0717d0f5d2737a63650a8d928360769e0d411bd5	alsa usb-audio fix build error by consitification of rate list
3b4821f8a4597c01318f3bebe208789bcf80aac9	avoid kernel segfault in vce when gpu fails to resume when gpu fails to resume we can not trust that value we write to gpu memory will post and we might get garbage more like __address__ on x86 when reading them back this trigger out of range memory access in the kernel inside the vce resume code path this patch use canonical value to compute offset instead of reading back value from gpu memory
fdf51599c0fca3dc1e45924b71e09a862f34ec78	media radio-si4713 embed struct video_device instead of allocating it also set the v4l2_dev pointer in struct video_device as this was missing
40777645eb7fe5b9184b339e1a8aa889993f6d75	clocksource sun4i use the bit macros where possible
aaa7088eb29a0ffe6cf8d8a443695df41e5a62f3	ieee802154 fix skb get fc on big endian this patch fixes ieee802154_get_fc_from_skb function on big endian machines the function get_unaligned_le16 converts the byte order to host byte order but we want to keep the byte order like in mac header
577d3983c87a1bf47c4e761df3ba2b9c36229c8e	drm omapdrm prevent processing the same event multiple times the vblank interrupt is disabled after one occurrence preventing the atomic update event from being processed twice however this also prevents the software frame counter from being updated correctly that would require vblank interrupts to be kept enabled while the crtc is active in preparation for vblank interrupt fixes make sure that the atomic update event will be processed once only when the vblank interrupt will be kept enabled
fd3c02531461924853db65f2664db361b53a70d3	call drm_put_dev directly in again omap already sets the driver data pointer to the drm_device also drop the driver unregister call that should be and already is done in the module unload hook
80b8ce89ebb145d91fd2ef1a1e9610aee1613109	i7core_edac fix misuse of logical operation in place of bitop
21f9f2ef7c12dcefbdadaf96382bf547f84f23b3	media staging dont call put_ir_rx on rx twice there is an exit path where rx is kfreed on put_ir_rx and then a jump to label out_put_xx will again kfree it with another call to put_ir_rx fix this by adding a new label that avoids this call to put_ir_rx for this specific case detected with coverityscan use after free
b7283d5a044c010d5e68afccc0598846f254db7b	usb chipidea remove unneeded null check as reported by dan carpenter there is a null check in udc_start that follows a dereference of the pointer thats being checked however at that point udc pointer shouldnt ever be null and if it is the dereference should cause an oops
ed5054b6f395b5524e2a9d5e0e6302fc7ac2481a	staging silicom remove parentheses from return statements in remove unnecessary parentheses from return statements in to resolve errors
9a005bef5b5b5ceb78ff1138e6d6baf4bbeb8061	clear sa bo when created this help fix reloading driver hang issue of sdma ring
acb7aa0db09b8abd38abeb84334a8a27a52fbb1b	nvme use round_jiffies_relative for the periodic once-per-second timer the nvme driver has a once per second event where the management kthread wakes up the system and then reschedules itself for __number__ second later for power efficiency reasons id like this timer to happen together with other wakeups in the system this patch makes the schedule_timeout call in the kthread use round_jiffies_relative causing the wakeup to at least align with other once per x seconds events in the kernel
104450eb08ca662e6b1d02da11aca9598e978f3e	scsi lpfc fcoe vport enable-disable does not bring up the vport fcoe vport enable-disable does not bring up the vport vpi structure needed to be initialized before being re-registered
10eccb46b521359fa344f63459087df722f0776d	bond cleanup netpoll code this started out with fixing a sparse warning then i realized that the wrapper function bond_netpoll_info could just be removed by rolling it into the enable code
24a70313969fc3fc440216b40babdb42564acff3	btrfs remove warn during log replay the log replay code only partially loads block groups since the block group caching code is able to detect and deal with extents the logging code has pinned down while the logging code is pinning down block groups there is a bogus warn_on were hitting if the code wasnt able to find an extent in the cache this commit removes the warning because it can happen any time there isnt a valid free space cache for that block group
7f788ec07d169123bb1bd14e6221a2b228079ce8	usb ehci dont use no_irq in xilinx ehci driver drivers shouldnt use no_irq this driver is used by microblaze and ppc ppc defines no_irq as __number__ and microblaze has removed it
446f8d81ca2d9cefb614e87f2fabcc996a9e4e7e	dont try to tear down the stolen drm_mm if its not there every other place properly checks whether weve managed to set up the stolen allocator at boot-up properly with the exception of the cleanup code which results in an ugly memory manager not clean delaying takedown at module unload time since the drm_mm isnt initialized at all v2 while at it check whether the stolen drm_mm is initialized instead of the more obscure stolen_base __number__ check v3 fix up the logic also we need to keep the stolen_base check in i915_gem_object_create_stolen_for_preallocated since that can be called before stolen memory is fully set up spotted by chris wilson v4 readd the conversion in i915_gem_object_create_stolen_for_preallocated the check is for the drm_mm the stolen allocatot must already be initialized when calling that function if we indeed have stolen memory bugzilla
71f4b9cdfccfb82cff702fe61f4ace97a1dfb0e0	mfd omap-usb-host use devm_gpio_request_one use devm_gpio_request_one to make cleanup paths more simple
01d06e9f963ba6a83154ab81929b7f5e04bbe5dd	only flush fbc on sw when fbc is enabled avoid touching fbc register when fbc is disabled
0c4dd4ba1426c599072511dcf95a15ee5e12725b	fuse dont wake up reserved req in fuse_conn_kill waking up reserved_req_waitq from fuse_conn_kill doesnt make sense since we arent chaging here which is what this waitqueue signals
08b472f7b602c60c69f278ba1e15535f5c86ee24	regulator mt6311 trivial clean up make mt6311_buck_ops mt6311_ldo_ops and mt6311_regulators const and remove unneeded error variable in mt6311_i2c_probe
ab592a74a5519d9de2af3003a721cfe0c6684b8a	usb host ehci-mv remove unused variable
e3f5a5f27153228569f3396049838e9727dae86e	kmsg escape the backslash character while exporting data non-printable characters in the log data are hex-escaped to ensure safe post processing we need to escape a backslash we find in the data to be able to distinguish it from a backslash we add for the escaping also escape the non-printable character __number__ thanks to miloslav trmac for the heads up
069013a9e2bbf1ace3f796cb664023dcd40730f7	nios2 fix timer initcall return value when called more than twice the nios2_time_init function return an uninitialized value as detected by gcc warning ret may be used uninitialized in this function this makes it return __number__ here matching the comment above the function
5d2de0d9b778e2b26f108bec1e3e56bd2902c5ab	staging rts5208 parenthesis alignment matching open parenthesis
ffc29315e5b665d3e7e17d6156ac82f85a6d0205	nfc call llcp_add_header properly when sending llcp dm or disc dsap and ssap were swapped when sending dn or disc
155e8b3b0ee320ae866b97dd31eba8a1f080a772	clk bcm support rate change propagation on bcm2835 clocks some peripheral clocks like the vec video encoder clock need to be set to a precise rate in our case with the current implementation where peripheral clocks are not allowed to forward rate change requests to their parents it is impossible to match this requirement unless the bootloader has configured things correctly or a specific rate has been assigned through the dt with the assigned-clk-rates property add a new field to struct bcm2835_clock_data to specify which parent clocks accept rate change propagation and support set rate propagation in bcm2835_clock_determine_rate
5f9492ff1dd7164e3785b9fbd1221fc717efe2c4	usb core endpoint remove unnecessary operation now that usb_endpoint_maxp only returns the lowest __number__ bits from wmaxpacketsize we can remove the operation from this driver
e336ed9647b06e3bb52995dbc51101cbdf39f2a2	crypto user fix empty string test in report api the current test for empty strings fails because it is testing the address of a field not a pointer so the test will always be true test the first character in the string to not be null instead
15ea19105bdeef36820ade6754b9b7f1e3511e98	mei mei_clear_list kill file_temp file_temp is used only once so there is no any benefit of creating a temporary variable
c148d16369ff0095eca950d17968ba1d56a47b53	ipv6 fix checksum annotation in udp6_csum_init
6cf38956c9838414b2678c7e661001313d200d8c	arm omap4 pm remove l4 wakeup depedency with mpu since errata fix exist now with commit implement timer workaround for errata i103 and the sync and gptimer synchronization errata got fixed hence the l4_wakeup static dependency with mpu can can be removed now static dependency was one of the proposed workaround but from power savings perspective it isnt an ideal workaround
ee6f280e7895c838d90e8ef19ba737c8003ae85d	enable output polling during s4 thaw to avoid processing hotplug events we disable connector polling for the duration of s3 suspend we also disable it for s4 freeze and keep it disabled after s4 thaw this wont prevent though hotplug processing since we re-enable interrupts anyway there is also no need to prevent it at that time since we reinitialize everything during thaw so the device is in a consistent state so to simplify things enable polling during thaw which will allow us to handle s4 thaw the same way as s3 resume in an upcoming patch
fe671fefebea7af6e9db13582e0dd9be26334616	staging bcm rename pvoid to void in this patch renames uppercase pvoid to void in
123f87758658285f5f844d7e8a8b974ce88d1ffc	scsi ufs remove redundant platform_set_drvdata commit device-core ensure drvdata null when no driver is bound removes the need to set driver data field to null
226e73e23b6b7f7d6df47562a7555ddb121163cf	asoc davinci-mcasp change __davinci_mcasp_set_clkdiv first parameter change the first parameter to struct from struct the function internally does not use or need the dai information
718e715d1a0182b5f6483bf82fae7c6b337bb16d	staging xgifb xgi_getlcdinfo delete if_def_lvds check delete if_def_lvds check this function is never called when its true
27addb96db38fc7279fcd40f9df10438f5dc8f2e	arm nspire fix compiler warning cc warning initialization from incompatible pointer type enabled by default warning near initialization for enabled by default
dc341c4ec2bf7c122f818f881eb2a1d5d6e8e9c9	staging fsl-mc dont use devres api for refcounted objects mixing two memory management systems in this case managed device resource api and refcounted objects is a bad idea lifetime of an object is controlled by its refcount so allocating it with other apis that have their own lifetime control is not ok drop apis in favor of plain allocations
977ad481b66ca91e1f6492b3c5c4748c68fdee9c	kprobes set kprobes_all_disarmed earlier to enable re-optimization in original code the probed instruction doesnt get optimized after echo __number__ echo __number__ this is because original code checks kprobes_all_disarmed in optimize_kprobe but this flag is turned off after calling that function therefore optimize_kprobe will see kprobes_all_disarmed true and doesnt do the optimization this patch simply turns off kprobes_all_disarmed earlier to enable optimization
79ef5dca5e5cd5a33662d64c927c1b9786d4edee	bump patchlevel to indicate availability of interop
d1e3b5564834ea24dee6b364a172365f64865fe5	atombios hw i2c fixes these fixes make writes work properly previously only reads worked note that this feature is off by default
8a891633b832874e2a1545abbddfd33ba22eb016	nfsd fix bad length checking for backchannel the length for backchannel checking should be multiplied by sizeof__be32
0e02dcae1ce238a2afda25da8cfd829c540088bb	staging comedi allow comedi_bufinfo comedi_cancel and comedi_poll on locked subdevice comedi subdevices can be locked for mostly exclusive access by a particular file object by means of the comedi_lock ioctl some operations disregard the lock for example the read and write file operations are allowed for the file object that set up an asynchronous command on the subdevice making it busy regardless of whether it is locked the comedi_bufinfo comedi_cancel and comedi_poll ioctls are also associated with the file object that made the subdevice busy with a command they currently obey the exclusive access lock on the subdevice as well but it makes more sense for them to ignore it like the read and write file operations remove the exclusive subdevice access checks for these ioctls
bba636d0592e5d33b960ba480459180ad5dc1fdd	hwmon gl518sm convert to use devm_ functions convert to use devm_ functions to reduce code size and simplify the code
a6fb35d3790aeaaaa50575c68fa188da29da6ecf	mtd bcm47xxsflash define opcodes we need them to add support this may duplicate some defines with bcma ssb code but it makes more sense to keep that in bcm47xxsflash which is supposed to work with both buses duplicated defines will be removed from
535afa2e9e3c1867460d6981d879b04d8b2b9ab3	check port in infoframe_enabled v2 same as ibx and g4x they all share the same genetic material v2 we all need a bit more port in our lives
3ef76759484832e498cba381aa1b24b90cf36a26	media dib0700 drop useless check when remote key is pressed struct dvb_usb_device can never be null so dont waste time checking for this rationale the urbs context is set when usb_fill_bulk_urb is called in dib0700_rc_setup and never changes after that d is dereferenced unconditionally in dib0700_rc_setup so it cant be null or the driver would crash right away
cc51846ba81ca179a3be20f6313e3b72531888c1	pwm atmel-hlcdc fix default pwm polarity the pwm device exposed by the hlcdc ip is configured with an inverted polarity by default registering the pwm chip with the normal polarity was not a problem before commit pwm add core infrastructure to allow atomic updates because the hook was called no matter the current polarity state but this is no longer the case
c8c10253d8706be7ce8bc8197e385cb837eed5a0	usb s3c-hsotg fix unregistration function after driver conversion to infrastructure commit use new udc_start and udc_stop callbacks f65f0f1098 the gadget unregistration function is almost always called with driver parameter being null what caused that the unregistration code has not been executed at all this is a leftover from the earlier verison of this function which used simple interface where driver parameter was obligatory this patch removes the null check for the driver pointer and removes all dereferences of it it also moves disabling voltage regulators out of the atomic context because handling regulators which are usually i2c devices might require sleeping
6f172a43a6d679e4a6563376f749868a9bf29752	remove debug dependency of dpcd revision read performing dpcd aux reads based on debug settings may introduce obscure bugs in other places that depend on the read being done or being not done to reduce the uncertainty perform the reads unconditionally
25b286c02defa26b136818b17909789102225aa8	watchdog pnx4008 add support for soft reset add support for explicit soft reset using the reboot mode the default reboot mode behavior is unchanged you can overwrite the default reboot type in the board specific file dt_machine_start definition using the reboot_mode parameter
ab5023efdcfa87512663aca120245b0fec8511eb	mmc sdhci-s3c use null instead of __number__ for pointers the third argument for of_get_property is a pointer hence pass null instead of __number__ fixes the following sparse warning warning using plain integer as null pointer warning using plain integer as null pointer
df3c9577f41c90a718616bb83b91fbd30f0eeeb5	staging lustre use null instead of __number__ for pointer
526018bc5eccfe3177780f03d2aaba0efee40720	x86 uv uv3 update acpi check to include sgi uv3 add uv3 to exclusion list instead of adding every new series of sgi uv systems just check oem_id to have a prefix of sgi link
8d0ec428d5311e3b72bff117e657dd53e3533962	hwmon w83791d use permission-specific device_attr variants use device_attr_ro for read only attributes and device_attr_rw for attributes this simplifies the source code improves readbility and reduces the chance of inconsistencies the conversion was done automatically using coccinelle it was validated by compiling both the old and the new source code and comparing its text data and bss size groeck updated description
6bf563d50af2de34024bde0de1733d4028f9400c	net ethernet mediatek add to stop pdma while stopping the frame engine stop pdma while the frame engine is going to stop
b016b646e8676858f39ea9be760494b04b9ee0af	serial sh-sci convert to turn clk_enable and clk_disable calls into clk_prepare_enable and clk_disable_unprepare to get ready for the migration to the common clock framework
01a4303d392841cca293fc3895e3f4985c5365d6	staging comedi usbduxsigma remove unnecessary check in usbdux_ai_cmd the comedi core verifies that the command chanlist_len is valid for the subdevice based on the len_chanlist that was setup during the attach there is no need to recheck it in the function
472cc83c3296cdc9248f1afbcfae8bba0f6f9707	perf buildid-cache dont use globals where not needed to some variables were global but used in just one function so move it to where it belongs link
7b1742eb06ead6d02a6cf3c44587088e5392d1aa	vfs make argument of d_real_inode const leaves the dentry alone except if the third argument is non-zero unfortunately very difficult to explain to the compiler without a cast
9d2d93d86de32b82939a32d6abe6c8c5d3cb97f2	usb gadget bcm63xx_udc remove unnecessary initializations udc-core now sets dma-related and parent fields for us we dont need to do it ourselves
25847ee7c9517f91323f9139713ebdc94c865a2e	greybus arche-platform avoid doing same thing again in poweroff fn if user switches from fw_flashing off mode then we do not need to do same things again for example clk_disable and event as while switching to fw_flashing driver makes sure that device goes to off state and then brings back in fw_flashing state testing done tested on platform
0be017120b80f0fe3da9a8239f989a27e54828f2	hid wacom report correct device resolution when using the wireless adapater the wacom_wireless_work function does not recalculate the tablets resolution causing the value contained in the features struct to always be reported to userspace this value is valid only for the pen interface meaning that the value will be incorrect for the touchpad if present this in particular causes problems for libinput which relies on the reported resolution being correct this patch adds the necessary calls to recalculate the resolution for each interface this requires a little bit of code shuffling since both the wacom_set_default_phy and wacom_calculate_res are declared below their new first point of use in wacom_wireless_work
03c86ee1548a6ffecc65cf83b0a2d2774fed2f1d	input adxl34x default platform_data should not use defines from driver only use the defines which are defined in the platform_data include file
3bfd847203c6d89532f836ad3f5b4ff4ced26dd9	net use passed in table for nexthop lookups if a user passes in a table for new routes use that table for nexthop lookups specifically this solves the case where a connected route does not exist in the main table but only another table and then a subsequent route is added with a next hop using the connected route ip route ls default via dev eth0 dev eth0 proto kernel scope link src dev eth0 scope link metric __number__ dev eth1 proto kernel scope link src ip route ls table __number__ dev eth2 scope link without this patch adding a nexthop route fails ip route add table __number__ via rtnetlink answers network is unreachable with this patch the route is added successfully
878ba03932d757ce4e954db4defec74a0de0435b	create an x86 arch_calc_vm_prot_bits for vma flags calc_vm_prot_bits takes bits and turns them in to the bits we need to do a similar thing for protection keys we take a protection key __number__ bits and encode it in to the __number__ bits note this code is not new it was simply a part of the mprotect_pkey patch in the past i broke it out for use in the execute-only support link
b6823c51fcd82e993275f5403e120279232ecaec	uas remove cmnd reference from the cmd urb it is not strictly necessary for the cmd urb to have a reference to the cmnd and without this reference it becomes easier to drop all references to a cmnd on an abort
c1340e8aa628d65bcb5c5b7e332bde8a17851ebf	iw_cxgb3 support for iwarp port mapping now with the new iwarp port mapping service in the iwcm it is trivial to add cxgb3 support
cd03d9a85802c0023e522c21a1dabaf3e5785010	mmc omap_hsmmc cleanup use of for debounce_clock there really does not seem to be a need to use check for getting the debounce clock as clkdev is perfectly capable of handling situations when certain clocks are only available on select platforms also get rid of the got_dbclk flag and instead use the dbclk clock pointer to know if a valid debounce clock exists for the platform
fb9e3534768c1daa0bd09dd00d1a8828e15079c8	md convert md_trim_bio to use bio_advance
2e3d3cf5c7d6c69d6940054645bc2d3d575ab916	staging comedi das1800 remove subdevice pointer math convert the comedi_subdevice access from pointer math to array access
905cc1991aa839fc4c9030f505966ab34637379a	hid hid-sensor-hub move to devm_kzalloc devm_kzalloc will manage resources freeing and allows to make error path smaller and nicer
3b79cd15bfc5f1ddb5e387310fa3dbb09b81b552	arm correct emi_sel clock muxing the correct muxing for emi_sel clock should be pfd pll3 axi clk root pfd this patch corrects the muxing in the clock driver
da029d0c6757972d19d88b0289ded58f4f704236	staging octeon-ethernet make dropped packets to consume napi budget we should count also dropped packets otherwise the napi handler may end up running too long patchwork
baae5f91577ac6416b03c3d95815f52e1e244f3b	toshiba_haps change logging level from info to debug two of the internal functions are printing an info message one whenever the hdd protection level changes and another when the driver receives an acpi event this patch changes those two prints to debug as that information is more pertaining to debuging purposes
890c98e3746fa8705cc9c70979e64360cf2d8a31	mfd set adp5520 bits if new value is different from the old one current code checks if all the bit_mask bits are all zero is wrong we need to write new value if the bit mask fields of new value is not equal to old value
8c95742e566f3945f992472a5f99f78aaa7f890b	fix depth input into drm_mode_legacy_fb_format currently the pitch is passed in as depth this causes drm_mode_legacy_fb_format to return the wrong pixel format the wrong pixel format will be rejected by vmw_kms_new_framebuffer thus leaving to null this eventually causes a crash in vmw_fb_setcolreg when the code tries to dereference
3620437a73b0ba68bac9c4e8d0fc9b809efca521	consolidate hest error source parsers aer_hest_parse and aer_hest_parse_aff are almost identical we use aer_hest_parse to check the acpi_hest_firmware_first flag for a specific device and we use aer_hest_parse_aff to check to see if any device sets the flag this drops aer_hest_parse_aff and enhances aer_hest_parse so it collects the union of the pcie acpi_hest_firmware_first flag settings when no specific device is supplied no functional change
7a0e67b68701d73b2252bd73f7fd49c54aea1e58	asoc da7210 bugfix for head phone volume control this patch takes care of reserved bits of headphone volume register by using correct volume range
21949ab7df0d78b575c87c2e70192b487fd37511	r8152 check tx agg list before spin lock check tx agg list before spin lock to avoid doing spin lock every times
de1e98c69bc22870342a099c2fc1257b09b15b7a	net usb catc use new api the ethtool api is deprecated we move this driver to new api as i dont have the hardware id be very pleased if someone may test this patch
b72061a3cb0f1c5aa3f919e2dadb4a1631773e7a	net fec fix build due to wrong dev annotation commit netdev ethernet dev_alloc_skb to netdev_alloc_skb should have used ndev instead of dev this causes the following build errors in function fec_enet_rx error dev undeclared first use in this function error each undeclared identifier is reported only once error for each function it appears in in function fec_enet_alloc_buffers error dev undeclared first use in this function fix it so that fec driver can be built again
1cbfab3804b185ce2744b5b8064d06ca19491e36	greybus connection remove disable from destructor remove implicit disable of legacy connections from the destructor this is a step towards removing the legacy-protocol handling from core
fdb184d1467f9ed5b17c553b85eb1bb72bdbf62f	bridge add empty br_mdb_init and br_mdb_uninit definitions this patch adds empty br_mdb_init and br_mdb_uninit definitions in to avoid build failure when config_bridge_igmp_snooping is not set these methods were moved from to by commit
3cda284b77cba833baea9a0f5e256a34d249761f	clk hi3620 delete error messages for a failed memory allocation in two functions the script pointed information out like the following warning possible unnecessary out of memory message thus remove such statements here
427934b8714ec130b068d1c9d88f25b24aaede32	increase the size of nmi buffer and make it configurable testing has shown that the backtrace sometimes does not fit into the temporary buffer that is used in nmi context the warnings are gone when i double the temporary buffer size this patch doubles the buffer size and makes it configurable note that this problem existed even in the x86-specific implementation that was added by the commit a9edc8809328 perform a safe nmi stack trace on all cpus nobody noticed it because it did not print any warnings
7c91d908f5af027ed14b3d103331f91f386c1043	usb fsl_udc_core use usb_endpoint_xfer_isoc to judge iso xfer some iso gadgets like audio has sync attribute as well as usb_endpoint_xfer_isoc for their bmattributes at iso endpoint descriptor so it needs to use usb_endpoint_xfer_isoc to judge iso xfer
a0f36536ac2ec0f7a9cfb53c72d6d8c378815fdb	nfc pn544 use devm_kzalloc api
e3f2f63e8cc8a9b9a16f351b55a108ab82de6d2e	media cx24120 check for lock before updating ber ucb ber ucb arent available unless were locked dont update dvbv5 stats when not locked and mark these counters as unavailable
dcf9585a7511147c7ffd580be8580dd39bc52fb6	xfs return the converted extent in __xfs_reflink_convert_cow well need it for the direct code also rename the function to xfs_reflink_convert_cow_extent to describe it a bit better
6d3bfc7be6f80d0c6ee6800d58d573343bf6e260	libata fix ioctl linux __float__ regression on mon mar __number__ __number__ at ronald wrote in reply to __number__ i have the same issue git bisect took rebuilds xd smartd does not work anymore since libata set proper sk when ck_cond is __number__ it seems that the sam_stat_check_condition is not cleared causing because that patch modified sensebuf and the check for clearing sam_stat_check_condition is no longer valid fix that
a1f2e40b1a30c2b8a2dfc40d859550081195b57a	greybus gb_operation drop operation refcount on cancel an extra reference is taken out on an operation in gb_operation_request_send if the response never arrives we need to put back the reference
b88a497701f84a0edc6631a79d21087e049bbcb1	thermal step_wise add missing static storage class specifiers fixes the following sparse warnings warning symbol step_wise_throttle was not declared should it be warning symbol thermal_gov_step_wise was not declared should it be
4b83a7a75375f9d5edd1fb0067986a0f23695ddd	media cx23885 fix pointer to structure for cam fixes problem with cam when after re-iinitialization cam used old pointer to structure
7b4e6cfbae304177b8edc0c12341b4896cab3f2d	introduce missing initialization the result of one call to a function is tested and then at the second call to the same function the previous result and not the current result is tested again also changed to bssid at the suggestion of stanislav yakovlev the semantic match that finds the first problem is as follows expression ret identifier f statement if s1 when any if s2
aaf932e8161e45291cc85085b6d850f1bbdf53c8	simplify the dynamic constraint code somewhat we have two struct event_constraint local variables in intel_get_excl_constraints cx and c instead of using cx after the dynamic allocation put all cx inside the dynamic allocation block and use c outside of it also use direct assignment to copy the structure let the compiler figure it out
827f798ac13c27c4a122175c60a3a684b59e9103	powerpc add hvcalls for and gpci get performance counter info
130797a6c3f1421c10880a1681d6a9c57b80ef17	acpica fix wrong object length returned by acpi_ut_get_simple_object_size the object length returned by acpi_ut_get_simple_object_size should be rounded up to the closest word boundary this patch ports a fix from acpica upstream to linux rjw changelog
32d39862be8ff3b098e56cbb0d667f76df015948	staging comedi me_daq cleanup the boardinfo rename the boardinfo variables so they are a bit more concise remove the unnecessary comments in the boardinfo add some whitespace to make the code more readable
9f52fc9a2d4a31accf5ff1eaf4feca76b7f559b3	staging xgifb delete xgi_opencrtc delete redundant function also eliminates the following sparse warning warning symbol xgi_opencrtc was not declared should it be
21daff96a90e8bc2dfa57499c8305dbb9430f661	iwlwifi mvm set global rrm capability allow to publish rrm capabilities without the need to support a minimal capability set since some rrm neighbor report are fw independent set this capability unconditionally
fea3cb063bf9b9d6b4efd5c973217a708812f5e2	ksz884x use setup_timer convert a call to init_timer and accompanying intializations of the timers data and function fields to a call to setup_timer a simplified version of the semantic match that fixes this problem is as follows expression f d
e502fb8f8801c9561c57397e7fd917187762324e	deadline remove unused struct member commit deadline-iosched allow non-sequential batching removed last use of last_sector
b39f93efc698fadc94a5fa273798f9e317089c72	media cec improve flushing queue when the adapter is unloaded or unconfigured then all transmits and pending waits should be flushed move this code into its own function and improve the code that cancels delayed work to avoid having to unlock
921d42ead788c1dab520634c693ff8887765182c	make semaphore signaller detection more robust extract all this logic into a new helper function semaphore_wait_to_signaller_ring because the current code has way too much magic the current code doesnt look at bi16 which encodes vecs signallers on hsw those are just added after the fact so cant be encoded in a neat formula the current logic cant blow up since it limits its value range sufficiently but thats a bit too tricky to rely on in my opinion especially when we start to add bdw support im not a big fan of the explicit list but i think its more robust to use the same mapping both when constructing the semaphore commands and when decoding them finally add a fixme comment about lack of broadwell support here like in the earlier ipehr semaphore cmd detection function danvet actually drop the untrue claim in the commit message chris pointed out
08f2a14c97133d7b2b3c3c27d1a528a7adac69f1	staging lustre indent an if statement this if statement wasnt intended
21e9efd92bb5e205b6243166b0fd38d3a5be8235	i2c tegra disable clock before returning error disable clock before returning error in tegra_i2c_init as its leaves i2c clock on in case of error and never turns off again as it will have unbalanced clock
5cacaac77cfc1130a2d8bf60addb5c6c9c878214	fix up map and fenceable for vma formerly create vmas part __float__ map and fenceable tracking the map_and_fenceable tracking is per object gtt mapping and fences only apply to global gtt as such object operations which are not performed on the global gtt should not effect mappable or fenceable characteristics functionally this commit could very well be squashed in to a previous patch which updated object operations to take a vm argument this commit is split out because its a bit tricky or at least it was for me danvet drop the bogus hunk in i915_vma_unbind as discussed with ben
c9f85a90d41476aca2d3b60f98ab87d7ae1b8612	power bq24190_charger fix charge type sysfs property access to the bq24190s configurable charge type property none trickle fast is being masked by an incorrect power_supply_property entry after applying this patch a new charge_type property will appear in the bq24190-charger sysfs folder backed up by already present in the driver
7a966fbd78683fe4ff7f019fd80fc08d9753880b	fbcon fix memory leak in con2fb_release_oldinfo kmemleak reported a memory leak as below unreferenced object __address__ size __number__ comm pid __number__ jiffies __number__ age hex dump first __number__ bytes __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ backtrace __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ this memory leak cause is fbcon_opss cursor_src is allocated in soft_cursor but not released in con2fb_release_oldinfo so cursor_src is needed to be released when oldinfo is going to be released
6abcc11dba58e954d3d1a9d3f9722c4358712f08	staging wilc1000 rename pfconnectresult of struct connect_attr this patch renames pfconnectresult of struct connect_attr to result to avoid camelcase naming convention
dbb204e39fec2dc4800f19eae321ad7e1b95f2fa	ath9k fix channel frequency calculation for ar9340 a multiplication is missing from the current formula
b4f16c938eed87aac733972e735c5bea700948aa	mips bfp simplify code slightly this keeps the if condition slightly simpler its going to become ore complication
b4e3a3e844a0e33cf106a1c9f27ff93340c37640	prepare fimd clocks while migrating to common clock framework ccf i found that the fimd clocks were pulled down by the ccf if ccf finds any clocks which has not been claimed by any of the drivers then such clocks are pulled low by ccf calling clk_prepare for fimd clocks fixes the issue this patch also replaces clk_disable with clk_unprepare during exit since clk_prepare is called in fimd_probe
ed961ac23384826d92ed7f3dd6fe8e007db76145	net geneve convert to using iff_no_queue
16df2a26fb3efb52f066098cdbd0f81c8378d861	fix catastrophic error flow hang in case of the hca going into catasrophic error flow the beacon post_send is likely to fail so surely there will be no completion for it in this case use a best effort approach and dont wait for beacon completion if we failed to post the send
2d1155478fb6f972b3a97cbf13151ee4f078a164	staging dwc2 make large enough the hardware offers a register containing the number of host channels however the values of these register mean host channels not since the dwc2_hw_params struct stores the actual number of host channels supported instead of the raw register value it should be __number__ bits wide instead of __number__ before this commit hardware with __number__ host channels would overflow the field making it appear as __number__ channels this bug was introduced in commit staging dwc2 interpret all hwcfg and related register at init time
63c3b902e517012b127d6528434b928ceaa10f7b	mm add anon_vma_lock to validate_mm iterating over the without anon_vma_lock may cause null ptr deref in anon_vma_interval_tree_verify because the node in the chain might have been removed bug unable to handle kernel paging request at __address__ ip __address__ pgd pud pmd __number__ oops __number__ preempt smp debug_pagealloc cpu __number__ pid __number__ comm trinity-child64 tainted g w __number__ rip __number__ process trinity-child64 pid __number__ threadinfo __address__ task __address__ call trace rip cr2 __address__ figured out by bob liu
ff8878fd64c0e578d979816a675c8ecb937888bd	mmc sdhci-pxav3 remove unused clk_enable from sdhci_pxa clk_enable from struct sdhci_pxa is unused remove it from the private driver data
2d6dd1711346d1708eacdbb1b5e8a5a573562fd1	arm ux500 remove static maps from platsmp this removes the reliance on static maps for scu and backupram for the smp startup of the ux500 soc
28965e17ee7a9591c241b831fee050d2391688c6	cdc-wdm unify error handling in write this makes sure the error handling path is the same for all error conditions thus reducing code duplication
c666601a935b94cc0f3310339411b6940de751ba	rbd move snap_rwsem to the device rename to header_rwsem a new temporary header is allocated each time the header changes but only the changed properties are copied over we dont need a new semaphore for each header update this addresses
2d0a074517da34a6386bdd9a22bc006c8fa21044	dma mv_xor use request_irq instead of devm_request_irq even through the usage of functions is generally recommended over their classic variants in the case of devm_request_irq combined with irq_of_parse_and_map it doesnt work nicely we have the following scenario for some reason the driver initialization fails at a later point since irq_of_parse_and_map is no device-managed we do a unfortunately this doesnt work because the free_irq must be done prior to calling irq_dispose_mapping but with the devm mechanism the automatic free_irq would happen only after we get out of the function so basically we revert to using request_irq with traditional error handling so that in case of error free_irq gets called before irq_dispose_mapping
03ab30f73dbf2f4f719d2c0c2acef81bf0445eb7	ocfs2 convert between kuids and kgids and dlm locks convert between uid and gids stored in the on the wire format of dlm locks aka struct ocfs2_meta_lvb and kuids and kgids stored in and
b0e0f85631f9d905095d2896a952430f5eb0aba1	checked for null pointer
51f5e78355db2e9b4d5d9093f83be3567178d236	nfsd remove nfs4_lock_state nfsd4_release_lockowner
8d0a69d735318cbd99c1376d16ed7ff82a7a678e	clk palmas fix a possible null dereference of_match_device could return null and so cause a null pointer dereference later even if the probability of this case is very low fixing it made static analyzers happy solving this with of_device_get_match_data made also code simplier reported-by coverity cid __number__
ef3d0c4a5e8c7ad3429b9f9ef66cf5a7563cd513	fix incorrect resolving of the loopback mac address
bfa10b8c98bb335bc3e401d3ec947d446f04d1aa	floppy remove floppy-specific o_excl handling block layer now handles o_excl in a generic way for block devices the semantics is however different for floppy and all other block devices as floppy driver contains its own o_excl handling the semantics for all-but-floppy bdevs is there can be at most one o_excl open of this file while for floppy bdev the semantics is if someone has the bdev open with o_excl noone else can open it there is actual userspace-observable change in behavior because of this since commit e525fd89d380c block make handle exclusive access on kernels containing this commit mount of causes the fd0 block device be claimed with _excl preventing subsequent bring things back into shape make it possible analogically to other block devices to mount the floppy and open it afterwards remove the floppy-specific handling and let the generic bdev code o_excl handling take over
f439c429c320981943f8b64b2a4049d946cb492b	x86 support pat bit in pagetable dump for lower levels dumping page table protection bits is not correct for entries on levels __number__ and __number__ regarding the pat bit which is at a different position as on level __number__ link
a7165264429b7b0d95557f306f310e77407fc2ee	cgroup these var names are unnecessarily unwiedly and another similar variable will be added lets shorten them
bb5b8589767a300014ba21c5984e6a4d15f0702d	mm make sure isolate_lru_page is never called for tail page the vm_bug_on_page would catch such cases if any still exists
c3f7de6a4c1ce04e9dff0a7db48051e9e2529b57	support for probing gp10b
1c2593cc8fd5960f8861de1be67135851f884836	replace hard coded acpi0007 replace hard coded acpi0007 with acpi_processor_device_hid
0b2ed795e1f49dace195f3a4d35eee281b6cfbbf	mmc sdhci-pltfm drop error message for too small mmio resource size the requirement resource_size may not necessarily be reasonable for example sdhci-dove appears to sidestep some registers in sdhci_dove_readw moreover current code displays an error message for too small resource size but still moves forward every dt should be responsible for describing its properties correctly so letss remove this error message from the common framework
4c503dd5fbdc33118d27f60e5c364d364980d4fd	usb chipidea using devm_request_irq to instead of request_irq using devm_request_irq to instead of request_irq
9d7ebbbf2264c4ad3c8d50fcb84952126184a7ad	pinctrl dont print unavailable function groups there is no reason to try to print groups associated to a function if get_function_groups returns an error moreover it can lead to a null pointer dereference error
b2d185edbac9c40adb1d390ad966e6900992e69d	spi spi-ep93xx remove dev_err for kzalloc failure the kzalloc failure will have already output a message
d7c7c0256b936901eb7a70fbc6d674a6bdfd463e	acpi hotplug pci do not clear event callback pointer for docks after recent changes adding dock station handling to the acpi hotplug core it is not necessary to clear the pointer in the acpiphp device hotplug context for dock stations any more so dont do that
6080758d441acd7765314f3e9b6ca843e18e9a68	dm ioctl use offsetof instead of open-coding it subtracting sizes is a fragile approach because the result is only correct if the compiler has not added any padding at the end of the structure hence use offsetof instead of size subtraction an additional advantage of offsetof is that it makes the intent more clear
5a55b527af43423fea51e9927185a1a6e9c80ee7	only apply legacy pde overflow detection to machines prevent the overflow check from firing on machines with the full page tables that are not restricted to gen8_legacy_pdes v2 also fix the off-by-one in the compare
6a3f45dccfa3db4de43aabc2f75a337e878f9b4b	serial __number__ allow probe drivers to ignore tx_loadsz in most cases the tx_loadsz is the same as fifosize this will store the fifosize in it if it was not separately delivered from the driver
fdfb0becea3be2edf4200c4ea8cf8b6fe9daa89a	blackfin bf54x fix gpio resume code back in commit c03c2a87347b849ec927d we fixed logic in the non-bf54x gpio resume code to set the data levels properly before the direction to avoid spurious line glitches but we missed the bf54x code paths so add the same fix there
dfa30ac13952ee0c2918090815688a909ad074f0	staging dgap remove redundant error value check the retval in dgap_block_til_ready is initialized to zero and if no error has occurred in this function the retval has a zero so it doesnt need to check retval itself
a3fa516dd81c49d9c276f59d57ed6e36aaefbe1d	xfs add finobt support to growfs add finobt support to growfs initialize the agi fields and the root finobt block
97f1d8cd8d61642d01af1fc181f3103314128c3b	be2net modify error message to incorporate subsystem modify ioctl error message to print subsystem also
debded848dee028d7f1f1e42a4e118df9636fb84	try to fix crt port clock limits are limited to max __number__ mhz crt dotclock most other platforms have a limit of __number__ mhz supposedly gen3 and gen4 go up to __number__ mhz vlv is a bit special since the docs are poor supposedly the dac would be good up to __number__ mhz but currently we limit the dpll to __number__ mhz so well have to limit the port clock to the same unless we change the dpll limits
1d10ecf8371be22c68b2e52e7376c7075c97f656	arm imx fix return value check in imx3_init_l2x0 in case of error the function ioremap returns null not err_ptr the is_err test in the return value check should be replaced with null test dpatch engine is used to auto generate this patch
5fd1b95fc9b96629d185f5fe3d9342fcff78eb30	apparmor update policy_destroy to use new debug asserts
b3ccc1a56280119fe1fbf9929a76b4034358bfef	ath9k_hw enable pa linearization this feature had been disabled in ath9k because the code to support it was incomplete but now the code is in sync with the internal qca codebase so its time to enable it on many newer devices the calibration is assumed to be done with pa linearization enabled tests with a particular ar933x device showed that the signal emitted at full power was highly distorted and unreliable with pa linearization disabled with this patch the signal becomes clear and stability is improved
fbd0968708c5e6a4811e62b103fa3d8c165f65c3	staging rtl8188eu remove exit label an exit label which does nothing except return is not worth having so remove it
93bef23024983d707248c25a849f5860119cd5e4	media smiapp implement support for autosuspend delay suspending the device by __number__ ms by default this is done on explicit power off through s_power callback through releasing the file descriptor nvm read or when the probe finishes
f0ef8834b280ebb6c271f155ea040bf4af6c1881	serial imx use the dmaengine_tx_status use the dmaengine_tx_status to simplify the code do not change any logic
867f1edbcca970f6ec6d797764dbd165f4e528ab	media coda v4l2-compliance fix zero pixel format priv field if unused the pixel format priv field has to be cleared by the driver in try_fmt
948fa2d115c553ae32aced66e0f00f89245dc05e	tipc increase size of tipc discovery messages the payload area following the tipc discovery message header is an opaque area defined by the media int_h_size was enough for but needs to be expanded to carry ipv6 addressing information
df111be6310fc41d059a485368e3c51a684859c2	rbd check for overflow in rbd_get_num_segments it is possible in rbd_get_num_segments for an overflow to occur when adding the offset and length this is easily avoided since the function returns an int and the one caller is already prepared to handle errors have it return if overflow would occur the overflow check would not work if a zero-length request was being tested so short-circuit that case returning __number__ for the number of segments required this condition might be avoided elsewhere already i dont know have the caller end the request if either an error or __number__ is returned the returned value is passed to __blk_end_request_all meaning a __number__ length request is not treated an error
6b866095276690ea5018d9d604ecba1cd04c2023	fix a check the issue was reported by static analysis the value holding flags was with being compared to true after that such comparsion is always false resolution drop the comparsion to true in the condition with is right according to result variable name reporting_mode and description in bit __number__ __number__ cinr reporting in idlemode msg bugzilla
eb042ec35956de2684de2a05a814cd15efe570ca	jffs2 fix a memleak in read_direntry need to free the memory allocated for fd if failed to read all of the remainder name
be91c33dd15eff6b0dffc60cee4c8042e75493d2	virtio balloon move vq initialization into separate function the probe and pm restore functions will share this code
5119dd1e3f7e84073dea4d53322f2fd99f0d0d8b	usb renesas_usbhs add support for r-car h3 this patch adds a compatible string to support for r-car h3 since the hs-usb controller of r-car h3 is almost the same specification with r-car gen2 these have __number__ pipes and usb-dmac this patch sets the type of renesas_usbhs_driver_param to usbhs_type_rcar_gen2
a9e32cd81624faf4deb7c850f846efc00a3d36b4	i2c tegra remove non device-tree support tegra has only supported device-tree for configuration for quite some time now and so simplify the tegra i2c driver by dropping code for non device-tree
1f4a63bf019524c96e79f088cd717b96ef00a249	xfs calling destroy_work_on_stack to pair with init_work_onstack in case config_debug_objects_work is defined it is needed to call destroy_work_on_stack which frees the debug object to pair with init_work_onstack cherry picked from commit
e9f322b4913e5d3e5c5d21dc462ca6f8a86e1df1	omapfb use eprobe_defer if default display is not present currently omapfb returns eprobe_defer if no displays have been probed at the time omapfb is probed however sometimes some of the displays have been probed at that time but not all we cant return eprobe_defer in that case because then one missing driver would cause omapfb to defer always preventing any display from working however if the user has defined a default display we can presume that the driver for that display is eventually loaded thus this patch changes omapfb to return eprobe_defer in case default display is not found
9d332d92a95c9c67abe08b5f7cba64d8fc1e3c76	mkiss fix error handling in mkiss_open if register_netdev fails we are not propagating the error and we return success because ax_open succeeded previously fix this by checking the return value of ax_open and register_netdev and propagate the error in case of failure
b2111724a639ec31a19fdca62ea3a0a222d59d11	net use per task frag allocator in skb_append_datato_frags use the new per task frag allocator in skb_append_datato_frags to reduce number of frags and page allocator overhead tested ifconfig lo mtu __number__ perf record netperf udp_stream perf report before throughput __number__ netperf k copy_user_generic_string netperf k __alloc_pages_nodemask netperf k get_page_from_freelist netperf k __rmqueue netperf k skb_append_datato_frags netperf k prep_new_page netperf k next_zones_zonelist netperf k __inc_zone_state netperf k alloc_pages_current netperf k sock_alloc_send_pskb netperf k udp_sendmsg netperf k zone_watermark_ok netperf k __cpuset_node_allowed_softwall netperf k fib_table_lookup netperf k memcpy_fromiovecend netperf k __udp4_lib_lookup after throughput __number__ netperf k copy_user_generic_string netperf k prep_new_page netperf k skb_append_datato_frags netperf k sock_alloc_send_pskb netperf k enqueue_task_fair netperf k udp_sendmsg netperf k __ip_route_output_key netperf k __netif_receive_skb netperf k fib_table_lookup netperf k resched_task netperf k __udp4_lib_lookup netperf k _raw_spin_lock_irqsave
e69616b1e65cb9d3dcf34399e8fac331911abfe5	trivial code style brackets fix
57253fd8c91e76780e9628451f680efcbcc52c85	bluetooth ews adds ext control field bit mask adds extended control field bit masks and rearrange defines to logical groups masks flags and shift groups
96449f097e3874af0e8ddd721d3ebeed2ec389da	usb musb dsps print babble message only when musb is active host the musb controller uses single bit defintion for both reset and babble events the babble event is valid only when controller is active a-host and hence print the babble message only when the controller is active a-host
46cdd1900fa7a1d7afd1f8d051e513105d0cea98	usb gadget udc at91 use ptr_err_or_zero coccicheck found this pattern which could be converted to ptr_err_or_zero no functional changes
3deb9979c7319bc7846d1aac528a9db85162960a	mtd nand allocate aligned buffers if nand_own_buffers is unset some nand controllers are using dma engine requiring a specific buffer alignment the core provides no guarantee on the nand_buffers pointers which forces some drivers to allocate their own buffers and pass the nand_own_buffers flag rework the nand_buffers allocation logic to allocate each buffer independently this should make most nand engine happy and allow us to get rid of these custom buf allocation in nand controller drivers
5437f4b2576f1763a27bc4c0e7f7c280220ba1aa	stmmac added pci identifiers stm has a device id within its own vendor space and it is being used in the sta2x11 hub
e5ffa727e5330478d9f074521dbf195c8593ed9f	turn instmem lock into mutex the gk20a implementation of instance memory uses to map memory regions into the kernels virtual address space these functions may sleep so protecting them by a spin lock is not safe this triggers a warning if the debug_atomic_sleep kconfig option is enabled fix this by using a mutex instead
5f338d0ce0b4c9e6c554b92cfb288789a41bfbc1	spi rspi spi dma core needs both rx and tx dma to function the spi dma core framework needs both rx and tx dma to function as a preparation for converting the driver to use this framework fall back to pio if no dma channel or only one dma channel is available this affects only rspi which could do dma transfers for tx-only before rspi-rz and qspi at least for single spi transfers will need both rx and tx dma anyway
1a058f164348a71229afd35bb5bbbb0fb514555d	fix incorrect event codes in power9-event-list these have been changed in the hardware update linuxs version
29f397b739ceef90c8b848f6579cbacd088e896e	spi rspi use null as the clock id theres only one clock so we can use null as the clock id
50dd9050e45ce11c575eabcaee8a914caf78fb74	alsa hda add capture mute led support in led_power_filter now the led_power_filter needs to handle __number__ situations only mute_led_nid is set only cap_mute_led_nid is set both mute_led_ind and cap_mute_led_nid are set buglink
c808d3d839ab70c87a6c9356c50569c87661378e	mac_esp rename irq rename the mac esp irq as esp to be consistent with all the other mac drivers and esp drivers
318141a18f7337338451512cc37ada3bf0a22ae6	staging comedi adl_pci9118 handle abort in main interrupt handler for aesthetics move the abort detection from the dma handler to the main interrupt handler this allows removing the unused int_amcc parameter from the dma and non-dma handlers
0ecfe806f146e0cb10c2c5abbb3bb4e91959e41a	mac80211 fix race between connection monitor suspend when the connection monitor timer fires right before suspend the following will happen timer fires monitor_work gets queued suspend calls ieee80211_sta_quiesce ieee80211_sta_quiesce deletes timer cancels monitor_work synchronously running it note wrong order of these steps monitor_work runs re-arming the timer later timer fires while system should be quiesced this causes a warning warning at mac80211 but is otherwise harmless im not completely sure this is the scenario thomas stumbled across but it is the only way i can right now see the warning in a scenario like the one he reported
f3004d54027d1c440f1e45ec3aa7caba6cca6f1a	usb serial remove debug module parameter now that the dbg macro is no longer being used in the driver the debug module parameter doesnt do anything at all so remove it so as to not confuse people
3883e301bf05457d09ffc16c03ead6182ac3d732	m32r use set_current_blocked and block_sigmask as described in signal sigprocmask should do retarget_shared_pending the modification of is incorrect as we need to check whether the signal were about to block is pending in the shared queue also use the new helper function introduced in commit signal add block_sigmask for adding sigmask to which centralises the code for updating after successfully delivering a signal and reduces the amount of duplicate code across architectures in the past some architectures got this code wrong so using this helper function should stop that from happening again
737ea6cfd2263127e6cb00e607135b1087468d60	media vpu mediatek add mdp support vpu driver add mdp support
fca97d763dc662db446c9a6e5486ef0c77d8ad5b	ath9k fix ani trigger threshold since the limits based on ini has been changed the error limit for ofdm has to be __number__ not __number__
f1dd1460a40894b00bbeacd753025e9251ec11bd	perf session fix accounting of ordered samples queue properly account flushed samples within the ordered samples queue link
a1ae9be5fc137d7e911a77ef408273ff55a53a39	usb dwc3 gadget reset resource index to zero if we collected two requests together only the last of them has then we only have to stop transfer once the clean-up code will cleanup everything until first trb with the lst bit set after xfercomplete this index should be no longer valid since there is no transfer pending
f9558b49dc2acabb95fb40b7486b7b41d317215e	staging comedi ni_660x cleanup else not useful fix the warning warning else is not generally useful after a break or return
adbdeae5cece1d888a1542edfe9e1c6f8884fef8	bluetooth hci_bcm new acpi ids these are used at least by acer with bcm43241
c5782e9f5a535af09d7834693a52afdbcc6e5f3f	fix sparse warning related to build_bug_on_invalid commit baf05aa9271b bug introduce build_bug_on_invalid macro introduces this macro only when _checker_ is not defined define a silent macro in the else condition to fix following sparse warning error undefined identifier build_bug_on_invalid error undefined identifier build_bug_on_invalid error undefined identifier build_bug_on_invalid error undefined identifier build_bug_on_invalid error not a function
fb3d769173d26268d7bf068094a599bb28b2ac63	leds ledtrig-heartbeat make top brightness adjustable led class heartbeat trigger allowed only for blinking with max_brightness value this patch adds more flexibility by exploiting part of led core software blink infrastructure
9c650d09a9c3029cc90cae5d2cd7ab131bdb86c2	fix mis-merge in gmap handling commit split dropped some changes from commit a3a92c31bf0b kvm s390 fix mismatch between user and in-kernel guest limit this breaks kvm for some memory sizes kvm-s390 failed to commit memory region like exactly
44bb4385ce1cfb231d37cbc7bb6faf70f98b7b17	fs_is_visible only needs namespace_sem held shared
1e0b0c4c6b9241b66c6032e14962a149f852f23a	sparc sysfs fix cpu hotplug callback registration subsystems that want to register cpu hotplug callbacks as well as perform initialization for the cpus that are already online often do it as shown below get_online_cpus for_each_online_cpucpu init_cpucpu put_online_cpus this is wrong since it is prone to abba deadlocks involving the cpu_add_remove_lock and the when running concurrently with cpu hotplug operations instead the correct and race-free way of performing the callback registration is cpu_notifier_register_begin for_each_online_cpucpu init_cpucpu note the use of the double underscored version of the api cpu_notifier_register_done fix the sysfs code in sparc by using this latter form of callback registration
bf6ea084ebb54cf8e1d6e60aac3c727cf45bf6c7	hwmon coretemp do not return for low temperatures some intel cpus do not set the valid bit in ia32_therm_status if the temperature is too low to be measured this condition will not change until the cpu is hot enough for its temperature to be measured returning an error in such conditions is not very useful drop checking the valid bit and just return the reported temperature instead
8dd87fba939370e729b0ee72c163f279d310de06	fixes for sparse endianness warnings fix endianness problems detect by sparse introduced with the enhanced mpa patch
2371e9cf14074c7d2542da56c5d6161fbe29a946	asoc ux500 swap ad slot definitions ad slots definitions for ab8500 codec were erroneously swapped between even and odd channels fix this by swapping the definitions to be coherent with the channel number
b047d9ccc3a40b672594b4eab1eac91d7efebcd9	staging comedi me4000 introduce me4000_ai_reset introduce a helper function to stop any ai conversions and reset the ai control register this consolidates the common code in me4000_reset and me4000_ai_cancel use the new helper in the ai to ensure that the ai control register is set to a known state after reading the samples the ai control register will now always be __number__ after the of a command or doing an knowing this the programming of the register for single acquisition mode in the can be simplified
409ae5a76e0505c8ffe1424f9c00dbf2ec7b5eea	lightnvm invalid offset calculation for lba_shift the assumes its value to be the logarithmic of the la size a previous patch duplicated the lba_shift calculation into lightnvm it prematurely also subtracted a shift which commonly is applied per-command the shift being subtracted twice led to data loss when restoring the logical to physical mapping table from device and when issuing commands using rrpc fix offset by removing the shift subtraction when calculating lba_shift
db6e9186c90188edea20aaa5161ea073440cc2a1	usb pl2303 return errors from usb_submit_urb in open return errors from usb_submit_urb rather than eproto on errors in open
0d4dd7d61bc1c06151ad79e246a91c158784a2c2	staging comedi pcl724 remove all __number__ boardinfo all uninitialized data will default to __number__
bee026d0fe4bcc2b29e9279c319ed5e60a3bda97	asoc max98088 use warn_on instead of bug_on use warn_on and handle the error cases accordingly
fd511e218c6a3272ce6a57be9c41e1bc09e37306	mtd onenand omap2 drop owner and name assignment owner and name are automatically set by mtdcore make use of that
2531f6ccd01c584cc0b06baf854982d89c4f760f	staging xillybus removed unnecessary warning message
caa0e2d0e331a04cbc1cb9bca3169c1d94b80838	virtio_config reorder functions this simply reorders functions in virtio_config so width access wrapper helpers are all together drops an extra empty line while we are at it
52674c65f9751f607a4ed9d75227a0d8e4f54189	mpt2sas use pci_enable_msix_exact instead of pci_enable_msix as result of deprecation of enablement functions pci_enable_msix and pci_enable_msi_block all drivers using these two interfaces need to be updated to use the new pci_enable_msi_range or pci_enable_msi_exact and pci_enable_msix_range or pci_enable_msix_exact interfaces
f5e097f0465e874ac76e8b6ae355b6faa83973a1	dma_buf cleanup dma_buf_fd remove redundant error variable
08d050263190174914951a158ddf759177a58039	arm ux500 fork cpu-db8500 platform_devs for sequential dt enablement to aid in sequential one-by-one device tree enablement we split cpu-db8500s platform_devs structure into normal platform boot where we leave all devices to be added in tact and a dt version where we will remove the devices as they are dt enabled
4ea8efadf5690c1ab22f981a5fcff819bd09ff31	net mpls delete route when all nexthops have been deleted when all devices for all nexthops in a route have been deleted the route is effectively dead so remove it
48c7823f42da2bc881ae2e325ed40123871c2fb9	nvme remove unused sq_head read in completion path
7547881d0951384f9833ec3a80fac8f3f16f3b98	nvme correct sq doorbell semantics the value written to the doorbell needs to be the first free index in the queue not the most recently used index in the queue
6c672c9bf44e718ccc8bb137032a57070980bb4e	stmmac dont exit mdio registration when mdio subnode is not found in the dts originally most of the platforms using this driver did not define an mdio subnode in the devicetree commit e34d65 stmmac create of compatible mdio bus for stmmac driver introduced a backward compatibily issue by using of_mdiobus_register explicitly with an mdio subnode this patch fixes the issue by calling the function mdiobus_register when mdio subnode is not found the driver is now compatible with both modes
5a80e98aafc7566659fe0fc542180871b29b706d	staging unisys visorbus my_device_create does not call device_epilog dont have my_device_create call device_epilog have it call chipset_device_create directly instead
9f6bd8fa5860fc7b041b10f2d463c78d65bdb59d	drivers net cpsw fix cpsw hung with add vlan using vconfig while adding vlan in dual emac mode only specific ports should be subscribed for the vlan else it will lead to switching mode and if both ports connected to same switch cpsw will hung as it creates a network loop fixing this by adding only specific ports in case of dual emac
c6795ad4c7934a1db196697308ea0c3ac8b15f52	fix typo fix a small typo in the iio_modifer enum
5c6021da1c3c46f3c2727626b4a3b9c96bf688ec	staging wilc1000 removes goto definitions from wilc_wlan_firmware_download this patch removes goto definitions from wilc_wlan_firmware_download function goto _fail_1 feature is error return it returns error type directly without result variable replacement as well
5b5ffa49d4bbb8ca4c41c094261660264f16bd20	ext4 remove a wrong bug_on in ext4_ext_convert_to_initialized if a file is fallocated on a hole may be greater than ee_block ee_len
4945f1fdc14ef090abe50d1b5682bfc1e4763c06	alsa seq fix init order of snd_seq_device stuff when the sequencer driver is built in kernel it may panic at boot because of the uninitialized snd_seq_bus_type initialize it properly via subsys_initcall instead of module_init to assure that the bus is registered beforehand
0bad3d8453e60ed5093ffccc0dd906ffb9bfe62c	asoc wm8974 convert to snd_soc_cache_sync convert to snd_soc_cache_sync for sync reg_cache with the hardware
9fd13331ab8f108ade0e8077b69ff4663b63d43f	qlcnic fix missing bracket in module parameter
c9ee0f98662a6e358b5f2969755c938ce9c3a63a	arm64 cpufeature define helpers for sys_reg id define helper macros to extract op0 op1 crn crm op2 for a given sys_reg id while at it remove the explicit masking only used for op0
251b9c21d26ca9d210e7673f0819ee1f6c19402a	regulator gpio-regulator dont oops on missing regulator-type property catch missing regulator-type property in dt and return an error gracefully instead of deferencing a null pointer and crashing
5895a9c0818d3c800ac8e7d3d3827cc89df2bdbf	arm revert exynos4 fix routing timer interrupt to offline cpu this reverts commit this implementation can introduce a problem and arm smp fix per cpu timer setup before the cpu is marked online patch can solve the cpu_oneline vs cpu_active problem so that should be reverted
c24a59649f3c8f4f78adc2d0e31423fa883b012b	ip_tunnel report rx dropped in ip_tunnel_get_stats64 the rx_dropped stat wasnt being reported when ip_tunnel_get_stats64 was called this was leading to some confusing results in my debug as i was seeing rx_errors increment but no other value which pointed me toward the type of error being seen this change corrects that by using netdev_stats_to_stats64 to copy all available dev stats instead of just the few that were hand picked
2d175069f2b5477692d4bd7586bc530ffe8107bb	pm cpufreq initialise the cpu field during conservative governor start this change initialises the cpu id field of cs_cpu_dbs_info structure in conservative governor and keep this consistent with other governors similar initialisation is present in ondemand governor
e272e7f0fbfbe4e6e5d89cd61064d6dddd73e81b	ocfs2 do not bug if jbd2_journal_dirty_metadata fails jbd2_journal_dirty_metadata may fail currently it cannot take care of non zero return value and just bug in ocfs2_journal_dirty this patch is aborting the handle and journal instead of bug
ea79c2ed6ec374347e4c61755bcb6fe8c2b24961	usb fix breakage on systems without acpi commit da0af6e usb bind devices to acpi devices when possible really tries to force-bind devices even when impossible unlike what it says in the subject config_acpi is not an indication that acpi tables are actually present nor is an indication that any usb relevant information is present in them there is no reason to fail the creation of a usb bus if it cant bind it to acpi device during initialization on systems with config_acpi set but without acpi tables it would cause a boot panic
77b563ed06a63e59ce1bf2803170898e852b3866	prepare combiner_handle_cascade_irq for irq argument removal the irq argument of most interrupt flow handlers is unused or merily used instead of a local variable the handlers which need the irq argument can retrieve the irq number from the irq descriptor search and update was done with coccinelle and the invaluable help of julia lawall
55bef83cc68bda76a14a23b1076a9a9a9e43af68	isdn capi use kref from tty_port after commit tty move tty buffers to tty_port the tty buffers are not freed in some drivers this is because tty_port_destructor is not called whenever a tty_port is freed this was an assumption i counted with but was unfortunately untrue so fix the drivers to fulfil this assumption here it is enough to switch to refcounting in tty_port
46317da71ee85dccc351735e8b463123f4d448a3	staging comedi pcmuio tidy up switch_page all the ports are left unlocked in the driver so the pagelock in the private data is not necessary the paranoia sanity checks are also unnecessary remove them
f6b45c28f451e8e415db49f693b2fec90c2cb557	asoc wm8995 use soc_enum_single_virt_decl for the upcoming consolidation for muxs and virtual muxs we need to mark virtual enums as such
0f15b1511ad2e82a6b422d275c369e92242854e6	isdn remove dead code multi is assigned to __number__ and then acts as a constant remove the dead code
a68de8e4ab2756d8e125cf327f044c895b6a6b3d	clk fixup locking issues for clk_set_parent updating the clock tree topology must be protected with the spinlock when doing clk_set_parent otherwise we can not handle the migration of the enable_count in a safe manner while issuing the callback to make the clk-hw perform the switch to the new parent we can not hold the spinlock since it is must be allowed to be slow path this complicates error handling but is still possible to achieve
2981e225f7048b36470383bf5622c42139bd96f7	btrfs ignore non-fs inodes for we have to ignore cache objects in
fd71f807376437756bfab0ee21d5978a7b05a0f5	ath10k ap handle ht station which does not have ht rx mcs this is a workaround for ht-enabled stas which break the spec and have no ht capabilities rx mask no ht rx mcs map as per spec in section modulation and coding scheme mcs mcs __number__ through __number__ are mandatory in with __number__ ns gi at all stas firmware asserts if such situation occurs
58570ac5355f95a2554dee9ca36b0f9c3d401fb5	scsi qla2xxx ensure plogi is sent to fabric management-server upon request
844bdf1b2a2f1790eba9e679bda1c632ee744d4e	sparc64 fix old style declaration gcc warnings fix gcc warnings by moving the inline keyword before the return type
c5d0db0690ff0a963dc082e7645268c466bf9a84	iio mma8452 use iio event type iio_ev_type_mag iio_ev_type_thresh in rising direction describes an event where the threshold is crossed in rising direction positive or negative values being possible this is not the case here since the threshold is no signed value and only the magnitude is compared iio_ev_type_mag is what describes the behaviour of these devices see the sysfs-bus-iio abi documentation
8441189e696db0134f23a2791ab3cc225a8ee2e5	rtc sh dont validate alarm time provided to the rtc core doesnt give broken dates to a drivers callback so there should be no need for validation
d038db86984977646815fff54c1be11bff6b9f5b	clean up code in tv dac load detection
f268dfe905d4682150d4acbb25f59adc04cd9398	exec make exec path waiting for mmap_sem killable setup_arg_pages requires mmap_sem for write if the waiting task gets killed by the oom killer it would block oom_reaper from asynchronous address space reclaim and reduce the chances of timely oom resolving wait for the lock in the killable mode and return with eintr if the task got killed while waiting all the callers are already handling error path and the fatal signal doesnt need any additional treatment the same applies to __bprm_mm_init
e18a99e28fe308f0028be8644418a1ac653a2a96	usb otg remove unused function twl6030_set_phy_clk remove the unused function twl6030_set_phy_clk of
2dba6a911c284603d2085fec1e2d3c142f58a010	md dont delay reboot by __number__ second if no md devices exist the md_notify_reboot method includes a call to mdelay1000 to deal with exotic scsi devices which are too volatile on reboot the delay is unconditional even if the machine does not have any block devices let alone md devices the kernel shutdown sequence is slowed down __number__ second does not matter much with physical hardware but with certain virtualization use cases any wasted time in the bootup shutdown sequence counts for alot md_notify_reboot only impose a delay if there was at least one md device to be stopped during reboot
0e14e0bfe85dd22ba19446bdfdc2cf0e941b9731	leds gpio fix error handling for led name null pointer case make sure that already registered leds will be torn down properly if the name of the next led to create is unavailable
9010a286d9857fccfac69e5e8bdf9b74ea1f7c0e	staging vt6656 sparse fixes iwctl_siwgenie use memcpy extra is in kernel space replace copy_from_user with memcpy with no need to error check we already know that extra is valid by error checking on sparse warning warning incorrect type in argument __number__ different address spaces expected void const noderef got char
f77329d1edba3ce8ebfaaa8045b4b99145477141	pinctrl adi2 statize adi_gpio_irq_domain_ops its only referenced in this file make it static
10974ccf04b096fd79ad90fd50276b79c069f2cc	asoc imx-pcm-dma add null test add null test on call to devm_kzalloc the semantic match that finds this problem is as follows expression x x when x null
84890c03b6c5d7e8d76ea5e20b6aaf7e7ad410f0	bump flush stripe batch size bump the flush stripe batch size to __number__ for my __number__ disks raid array the stripes takes __number__ __number__ this is still quite small a hardware raid card generally has size which we suggest the raid5-cache has similar cache size the advantage of a big batch size is we can dispatch a lot of io in the same time then we can do some scheduling to make better io pattern last patch prioritizes stripes so we dont worry about a big flush stripe batch will starve normal stripes
db0606ecd635de0522191e0200868a92ffc18b4d	spi s3c64xx fix checkpatch error and warnings fix the following checkpatch error and warnings error should be foo warning line over __number__ characters warning quoted string split across lines
0b4ac3dce4093f426322be0eec0e38127a62bb7f	do not return a error in remove function in the linux device driver model the remove callback is not allowed to fail and the device will be removed regardless of the return value of the remove callback so if we abort in the remove function and do not free all resources we will create a resource leak also all kinds of undefined behaviour are expected to happen since the iio device is still there while its parent is already gone the error which the driver tries to handle in the remove function is non-critical so we can just ignore it and continue to free all resources and remove the iio device
26b9c4a57fc3ff0ae6032548870bebfa5cd0de3d	remove the explicit flush of the gpu write domain rely instead on the insertion of the implicit flush before the seqno breadcrumb
3db3525196a992da628fb210776d73ec4bb59460	mmc sdhci-acpi get uid directly from acpi_device uid was made available on acpi_device since commit ccf78040265b acpi add _uid support for acpi devices use it from there instead of reprocessing the acpi object info
e7b6d8a61e3244392f882a31d08eab338cdeb772	staging unisys visornic remove poll_for_irq prototype remove poll_for_irq prototype not needed
72a921da070c9d7b5ac527ee20d80826100f0138	asoc remove unused control_data field of struct max98088_priv the control_data field is used to initialize the codecs control_data field but since this is also done by the snd-soc-cache core the redundant assignment can be removed and the field can be dropped
6dabae400b7fed5cbe50fce6fbe30f086182ff6b	media media usb em28xx em28xx-audio dont print error when allocating urb fails kmalloc will print enough information in case of failure
078c6ac1bd83654df62ea5914f98093e1f764320	pwm jz4740 pass device to clk_get in preparation to switching the jz4740 clk driver to the common clk framework make sure to pass the device to clk_get
62fd5258ebe3ea240371234955a6e2cc99e0b6c3	radix tree test suite test radix_tree_replace_slot for multiorder entries when we replace a multiorder entry check that all indices reflect the new value also compile the test suite with which shows other problems with the code due to some dodgy pointer operations in the radix tree code
9b7b819ca1e508195feed5ece558dca66adeef05	compat cleanup coding in compat_get_bitmap and compat_put_bitmap in the functions compat_get_bitmap and compat_put_bitmap the variable nr_compat_longs stores how many compat_ulong_t words should be copied in a loop the copy loop itself is this if nr_compat_longs-- __number__ if __get_userum umask return else um __number__ since nr_compat_longs gets unconditionally decremented in each loop and since its type is unsigned this could theoretically lead to out of bounds accesses to userspace if nr_compat_longs wraps around to unsigned-1 although the callers currently do not trigger out-of-bounds accesses we should better implement the loop in a safe way to completely avoid such warp-arounds
f7f2c183043a79e1c6115c69314e3d0d2c5e061f	staging netlogic remove unnecessary externs using extern is not necessary for function prototypes
03b1e3023b34dceedd882136f5a4c834e501fb39	mfd mc13xxx remove duplicate mc13xxx_get_flags declaration mc13xxx_get_flags declaration given twice this patch removes this duplicate
f6f293112e3d747e5d39ff0d12793909c3946035	gpio pl061 lock irqs when starting them this uses the new api for tagging gpio lines as in use by irqs this enforces a few semantic checks on how the underlying gpio line is used
64e09fa2e1fef1696a8685c7aad7e0d3dd24ce71	switch xfs_find_handle to fget_light
3334bf12480f10377e44d932baf53f34ec737f8b	hexagon do_notify_resume needs tracehook_notify_resume forgets to call tracehook_notify_resume if tif_notify_resume is set
cff93c58f7a99b3bf2fc3b343a1b6ca0546120da	spi bitbang fix checkpatch issue fix the following checkpatch warnings warning sizeof should be warning please no space before tabs warning space prohibited between function name and open parenthesis warning line over __number__ characters
572064280ecc9dc89227cf3797bc2144896a34f5	media adp1653 check platform_data before usage the driver requires platform_data to be present thats why we need to check and fail in case of the absence of necessary data
33e8fc463eeec29227282e4bd2082f5928d629a5	ashmem fix arguments to ashmem_shrink the arguments to shrink functions have changed update ashmem_shrink to match jstultz tweaked commit subject
f5c244383725a6de06bc62fa7c54c0ea0d942eec	libfs use iop_xattr flag for empty directory handling instead of special xattr inode operations use the iop_xattr inode operations flag for the special libfs empty directories
97ef8ef5a8fe022308c33c03d24424b579eecb36	crypto fix module description md5 is not sha1
c0fa7e104bbae5286f4fcf359f66a536f849c040	mfd max77687 add registration of max77686-clk the max77686 clock driver has been in-tree for over __number__ months but never actually enabled through the mfd registration before add it to the table so the device will probe and configure properly
f1eec30ac83cf95d0607a1c736cf42b44846bad8	greybus first framework for the es1 ap controller
c865c43de66dc973865bda337022f03b6e16c8df	kvm vmx retain limit and attributes when entering protected mode real processors dont change segment limits and attributes while in real mode mimic that behaviour
793be8984fb979ae8887609862842cbb1f60bfaf	tty moxa convert to dynamic device this allows us to provide the tty layer with information about tty_port for each link we also provide a tty_port for the service port for this one we allow only ioctl so this is pretty ugly
ac526f42abdae2cdc3ae1a24c855f731e1a90232	remove redundant null check make smatch happy and remove this warning hvc_iucv_init info redundant null check on hvc_iucv_filter calling kfree
0595439a0a8740f776a0ae367a4c7f243add24ec	power generic-adc-battery fix power_supply_property returned value the power_supply_prop_status case in gab_get_property wasnt providing any value
8b0878a0a3a8da26a9766a2d3abd8768c21b4121	add debug messages to print dp link training pattern currently we do not print the training pattern used in any of the dp link training stages including this piece of information in debug messages will help debugging also use the wrapper intel_dp_program_link_training_pattern in intel_dp_enable_port instead of implementing it v2 downgraded log level from error to debug chris link
f5faa0774e07eada85b0c55ec789b3f337d01412	workqueue use instead of in worker_maybe_bind_and_lock worker_maybe_bind_and_lock uses both and at the same time as worker_maybe_bind_and_lock can only be called by the current worker task they are always the same update worker_maybe_bind_and_lock to use consistently this doesnt introduce any functional change tj massaged the description
b579035ff766c9412e2b92abf5cab794bff102b6	ipv6 remove old conditions on flow label sharing the code of flow label in linux kernel follows the rules of rfc __number__ an informational one for conditions on flow label sharing there rules are not in the last proposed standard for flow label rfc __number__ or in the previous one rfc __number__ since this code does not follow any current or old standard we can remove it with this removal the ipv6_opt_cmp function is now a dead code and it can be removed too changelog to v1 add justification for the change remove the condition on ipv6 options remove ipv6_hdr_cmp and it is now unused as well
9270bdf5405668ca5d75ace1d7872e2762162c47	mfd arizona check errors from regcache_sync if the control bus is unrelabile we may hit errors during regcache_sync especially given that it tends to be one the most dense bursts of in many systems
54b50af089552bae368502e35dead67e81129b8d	nfs reduce debugging noise from encode_compound_hdr get rid of encode_compound when xdr debugging is enabled the current linux client never sets compound tags
4813dd0efcfbf85bd79759fda50b9a6ad4e5ff9c	regulator twl remove vdd1_vsel_table and vdd2_vsel_table since commit regulator twl fix twl4030 support for smps regulators vdd1_vsel_table and vdd2_vsel_table are not used any more remove them
5e8456fdd23c23bbfa06e0d647c90758102a4410	net hyperv use new api the ethtool api is deprecated we move this driver to new api as i dont have the hardware id be very pleased if someone may test this patch
923386f761f5ff35da2ac778839876fe4a2f165f	clk ti remove un-used definitions from public clk_hw_omap struct clksel support has been deprecated a while back so remove these from the struct also
34c7bb4705a0a2d344b0c82eaf3d3bfa2bc9da45	qed protect the doorbell bar with the write barriers spq doorbell is currently protected with the compilation barrier under the stress scenarios we may get into a state where due to the weak ordering several ramrod doorbells were written to the bar with an out-of-order producer values need to change the barrier type to a write barrier to make sure that the write buffer is flushed after each doorbell
664c98d4e1c2ff60627d78d4c8ae81cd2df13783	perf stat record add pipe support for record command allowing storing stat record data into pipe so report tools could read data directly from record committer note before this patch perf stat record usleep __number__ perf report incompatible file format rerun with to learn more perf stat record usleep __number__ perf script incompatible file format rerun with to learn more ls ls cannot access no such file or directory after perf stat record usleep __number__ perf report to display the header info please use options error the file has no samples perf stat record usleep __number__ perf script display of symbols requested but neither sample ip nor sample address is selected hence no addresses to convert to symbols __number__ failed to process type __number__ ls ls cannot access no such file or directory link
14c8a620ba436511b1347c592633befa49535176	gpio drop retval check enforcing from gpiochip_remove as we start to decomission the return value from gpiochip_remove the compilers emit warnings due to the function being tagged __must_check so drop this until we remove the return value altogether
9e2fa646936160eca525bcb80c2cce05faa9b208	kvm ppc mask mas2 epn high in tlbwe emulation mask high __number__ bits of mas2s effective page number in tlbwe emulation for guests running in mode
c212991a6bc3ba120d41205a294c5b89f05f1535	f2fs rewrite f2fs_bio_alloc to make it simpler since gfp_nofs__gfp_wait is used for allocation requests of bio in f2fs so there is no chance of returning null from the bio allocation making the bio allocation routine for f2fs simpler
6fec27d80feb12f88babcfe75f70f955c51723e8	kvm x86 emulator emulate movapd add emulation for prefixed instruction of __number__ opcode that has been added earlier
9d4bb6c9183f1283158bbb00ebf65ec4cf18ee33	greybus uart fix double free of tty port when inserting and removing a module with a uart protocol defined a double free of the tty_port would happen and that would generate a lot of kernel oops in different places related to memory corruption
1bc55f796a9872208e19b57fd00f4c484be35318	staging lustre libcfs calculate crypto performance using pages use alloc_page and use cfs_crypto_hash_update_page to compute the hash instead of cfs_crypto_hash_digest since tgt_checksum_bulk computes the hash by page anyway intel-bug-id reviewed-on
34e7317d6ae8f6111ac449444f22e14f4a14ebfd	move the code at the end of hooks no functional changes preparation to simplify the review of the next change just reorder the code in functions so that logic goes to the end also change arch_uprobe_pre_xol to use utask instead of autask to make the code more symmetrical with arch_uprobe_post_xol
7412301b76bd53ee53b860f611fc3b5b1c2245b5	smack assign smack_known_web as default smk_in label for kernel threads socket this change fixes the bug associated with sockets owned by kernel threads these sockets created usually by network devices drivers tasks received smk_in label from the task that created them the floor label in the most cases the result was that they were not able to receive data packets because of missing smack rules the main reason of the access deny is that the socket smk_in label is placed as the object during smk check kernel threads capabilities are omitted
12003e5b18ca33807b3f9448309ec92184192b85	ecryptfs use entire helper page during page crypto operations when encrypting ecryptfs pages and decrypting pages from the lower filesystem utilize the entire helper page rather than only the first __number__ bytes this only affects architectures where page_cache_size is larger than __number__ bytes
de66c610a6adade32bf955f67b4f4f4aaeeeff85	fm10k prevent null pointer dereference of msix_entries table according to the c standard dereferencing a variable before it is checked invokes undefined behavior and thus compilers are free to assume the check for null isnt necessary prevent this by re-ordering the null check of msix_entries in fm10k_free_mbx_irq
e5f3d00c243177f4d7a0e86d17b7eaefd4a0c908	media cxusb ts mode setting for tt ct2-4400 there is a new version of the technotrend ct2-4400 usb tuner the difference is the demodulator that is used si2168-b40 instead of for tt ct2-4400v2 a ts stream related parameter needs to be set otherwise the stream becomes corrupted the windows driver for both ct2-4400 and ct2-4400v2 sets this as well after this patch the driver works for both versions
c09df940ebe0167dcf13d52ea122c99b9bb8365a	mmc sdhci fix incorrect adma2 descriptor table size the adma2 descriptor table size was being calculated incorrectly fix it note that it has been wrong for a long time and likely has not caused any problems because of a combination of __number__ not needing alignment descriptors for block operations __number__ more memory being allocated than was requested __number__ the use of sdhci_quirk_no_endattr_in_nopdesc which does not use an extra descriptor for the end marker
4f8c85272c5e7ea1f2fe15d866835bc6f8fc996f	xen remove redundant null check before unregister_and_remove_pcpu unregister_and_remove_pcpu on a null pointer is a no-op so the null check in sync_pcpu can be removed
db9481c0476c6475d058ac7ecebb5a822b43cc99	ext4 use kzalloc in ext4_kzalloc commit ext4 introduce ext4_kvmalloc ext4_kzalloc and ext4_kvfree intruduced wrappers around but introduced a typo for ext4_kzalloc by not using kzalloc but kmalloc
7f6d942a819cd29854903097392b29010cbcf4da	serial amba-pl011 remove redundant label the label out is only used to return the error code we can return the error code directly and remove out label
c6010c8b4d2c6e75853ca63c602c9af56fcbead5	usb gadget f_fs fix kernel panic if use_os_string not set if flag is not set dont need to invoke ffs_do_os_descs in _ffs_func_bind so uninitialized ext_compat_id pointer wont be accessed by __ffs_func_bind_do_os_desc to cause kernel panic
b6a83d928c652c092acd1ce79c19d44a1da9a6db	cleanup gru_dump_context a little ret is zero here so we can remove the part of the condition uhdr is alread a __user pointer so we can remove the cast
5d2560a427fc7c4050a320be62c4994705ca81b1	alsa firewire-tascam fix null pointer dereference when model identification fails when unsupported models are connected snd-firewire-tascam module causes null pointer dereference in fw_core_remove_address_handler due to list_del_rcu this commit prevents this bug
5639bc4a64786c94eba3d2ba6a4ff4b290da1fb1	mips hugetlb keep tlb cache hot while flushing if we only flush the tlb of the given huge page the tlb cache remains hot for the relevant mm as it is and less will be refilled after flush huge or not patchwork
b24c9fe9fcf9c7a04fa08e5c1da7d156011e6b63	staging most hdm-usb synchronize release of struct buf_anchor in case a channel that is going to be destroyed has been tagged as not healthy by the function hdm_poison_channel while the functions hdm_write_completion or hdm_read_completion are being executed they race for destruction of buf_anchor this patch fixes the problem
563ad2b640955a0da21aedce1aaa332c7d016dde	plug memory leak in ls_ucode_img_load_gr error path the last goto looks spurious because it releases less resources than the previous one also free if ls_ucode_img_build fails
96f316c24c0aea2984c90170966d9a2cb93d1094	hwmon max6642 convert to use devm_ functions convert to use devm_ functions to reduce code size and simplify the code
810f4893e93b4e074be6b7a7cc6a36a1f2c51aa8	r8169 drop tp arg from rtl8169_tx_vlan_tag since vlan dont check for vlan group before vlan_tx_tag_present we dont check and thus tp is not needed in this function
cfe275c2db6932e81ea23288a8a74f0b815c9513	serial pxa add spin lock for console write v3 remove empty line v2 move local_irq_save after clk_prepare_enable v1 at up mode when cpu want to print message in kernel it will invoke peempt_disable and disable irq so it is safe for up mode for smp mode it is not safe to protect the hw reigsters one cpu will run a program which will invoke printf another cpu will run a program in kernel that invoke printk so when second cpu is trying to printk it will do __number__ save ier register __number__ enable uue bit of ier register __number__ push buffer to uart fifo __number__ ier register when first cpu want to printf and it happens between __number__ and __number__ it will enable thre bit of ier and waiting for transmit intterupt while step __number__ will make the ier lost thre bit add spin lock here to protect the ier register for console write
b3a459961014b14c267544c327db033669493295	fix a mr reference leak in check_rkey avoid that calling check_rkey for rxe_mem_state_free triggers an mr reference leak
7257f9d1ac2e06a10f753d65ce819de70cf678fa	staging declare request_cache as static for declare request_cache variable as static it is only used by and its naming is common which will lead to namespace pollution
862548dace34690b6a477f32e8ce68b50f7cbdf6	add parameter names to callback declarations this makes it more clear what these functions are operating on
ec5c08969928d3725b8e21a2ebb9e438392d099e	alsa cs4231 utilize the module_isa_driver macro this driver does not do anything special in module this patch eliminates the module boilerplate code by utilizing the module_isa_driver macro
dd7dfad7fb297b1746bcdbebbdc970d723a635bd	x86 mm set memblock initial limit to memblock_x86_fill could double memory array if we set to so memory array could be around so kdump will not get big range like under try to put it down under it would use about or so and that is limited link
b60a8280ba2a34351dd8b98664df3785c27528dd	remove extern from function prototypes there are a mix of function prototypes with and without extern in the kernel sources standardize on not using extern for function prototypes function prototypes dont need to be written with extern extern is assumed by the compiler its use is as unnecessary as using auto to declare variables in a block reflow modified prototypes to __number__ columns
c5ce36f6b06217d6d03006a5fe2aef19918b9081	staging lustre osc fix space prohibited after that fixed a coding style error space prohibited after that
10aa97c379cdd1e9f537a00ef2d787989759269d	f2fs manipulate dirty file inodes when data_flush is set it needs to maintain dirty file inodes only if data_flush is set otherwise lets avoid its overhead
c876a1b7dd6da5dd2d54990fa2772cbfe3779726	fix passing casted pointer in mlx5_query_port_roce fix static checker warning mlx5_query_port_roce warn passing casted pointer to mlx5_query_nic_vport_qkey_viol_cntr __number__ vs __number__
a2ffb564ddedf2e02b2c8e4c2ef40c8892b0162f	mips bcm47xx fix detection for some boards when a nvram reset was performed from cfe it sometimes does not contain the productid value in nvram but it still contains hardware_version patchwork
875bc23ac041519b24bd2c1faf71822e4b3e4322	usb usbtest fix the bit mask of usb __float__ extension descriptor usb __float__ link pm adds to use according to usb __float__ ecn errata for link power management spec bit encoding __number__ reserved __number__ lpm __number__ besl altemate hird definitions supported __number__ recommended baseline besl valid __number__ recommended deep besl valid recommended baseline besl value recommended deep besl value reserved so fix the bit mask from to
613d8c188ffc6f24b7a64dbce74a1b78017c0238	fix typo in mlx4_set_vf_mac fix typo in mlx4_set_vf_mac
fc915e93226cf00f4b8d1263ce2711959f9b1b76	e1000e remove prototype of non-existent function
f99847a6909b95f857ee502ec98c372dcfd90b12	asoc wm8903 free irq on device removal without this request_irq on subsequent device initialization fails and the codec cannot be used
c89b73703ea3e61ab233560d2c6c4fc0963111dc	tty max3100 use msecs_to_jiffies for time conversion this is only an api consolidation and should make things more readable it replaces var hz __number__ by msecs_to_jiffiesvar
a3882b7814fb3a5b7ea211e421451b1c4685f8f9	avoid re-enable rx two times rx is enabled when the tty port is open so no need to do it in initialization time it can allow the device to receive characters but no tty client is listening to them it produced an infinite number of irq as rxfifo is not read to clear that irq in the device so it is still pending
ef03c9ae967bf1b40bec1456f7e744033853a01d	asoc constify the compr_ops field of snd_soc_platform_driver the asoc core does not modify a platform drivers compr_ops structure making it const allows asoc platform drivers to declare their snd_compr_ops struct as const
7a5c8b57cec93196b3e84e3cad2ff81ae0faed78	sparc implement watchdog_nmi_enable and watchdog_nmi_disable implement functions watchdog_nmi_enable and watchdog_nmi_disable to nmi watchdog sparc uses arch specific nmi watchdog handler currently we do not have a way to nmi watchdog dynamically with these patches we can enable or disable arch specific nmi watchdogs using proc or sysctl interface example commands to enable echo __number__ to disable echo __number__ it can also achieved using the sysctl parameter link
8f6f9b2982b2c924fe2dde816e2decb3ca1d8f8f	asoc core indicate unregister debug message once current snd_soc_unregister_card indicates unregistered debug message when it was called but it should be called only when it was really unregistered
b698538951a45dd853d9e40f51e143fdd46a60c6	mpi_read_raw_from_sgl replace len argument by nbytes currently the nbytes local variable is calculated from the len argument as follows unsigned int len unsigned nbytes if nbytes __number__ else nbytes len lzeros given that nbytes is derived from len in a trivial way and that the len argument is shadowed by a local len variable in several loops this is just confusing rename the len argument to nbytes and get rid of the nbytes local variable do the nbytes calculation in place
f8ffcc9279f90ba3790c6dc0f01207ad6ea1c8df	use list_del_init instead of using list_del_init instead of list_del init_list_head spatch with a semantic match is used to found this problem
0db3241458685b22b6cd4db363722e6932244601	media em28xx fix identation snd_em28xx_capture_open warn if statement not indented
4db665e50ccc75ee64eb3ccdf53850956a83cbb6	staging rtl8192e remove useless type conversion some type conversions like casting a to a pointer of same type casting to the original type using operator etc are not needed therefore remove them done using coccinelle type t t t a ta a t p t
6d70e935596a51742ecc899b3d9629f11e506522	staging mei resuming timer regardless of the watchdog timeout value the timer_work does not only handle watchdog but also handles mei timeouts
a95cded32de3deae13af34715200532e6823cc9f	convert call_rcufree_head to kfree the rcu callback free_head just calls kfree so we can use kfree_rcu instead of call_rcu
a2673b6e040663bf16a552f8619e6bde9f4b9acf	fsnotify fix oops in fsnotify_clear_marks_by_group_flags fsnotify_clear_marks_by_group_flags can race with fsnotify_destroy_marks so when fsnotify_destroy_mark_locked drops mark_mutex a mark from the list iterated by fsnotify_clear_marks_by_group_flags can be freed and we dereference free memory in the loop there fix the problem by keeping mark_mutex held in fsnotify_destroy_mark_locked the reason why we drop that mutex is that we need to call a callback which may acquire mark_mutex again to avoid this and similar lock inversion issues we move the call to callback to the kthread destroying the mark
aefc958960e78acc39d5e52b8bc7abce6874ccd2	fix line over __number__ characters fix a warning line over __number__ characters
e7968531f86983a8f199818a7ffcaa380d1b4399	reject dmc firmware versions with known bugs dmc version __float__ has a known bug where the firmware polls forever for a port pll to lock if the pll was disabled when entering dc5 which locks up the machine version __float__ fixes this so make that the minimum required version on bxt
5e259c4b0667edb1c3d24d9f698465e496d2c569	staging unisys visorbus remove noisy postcode in bus_destroy since kzalloc will display error the postcode becomes redundant it can be removed
1ff52fa0f19c407e0e091bf0c8e169ee017ef725	media ad5820 fix sparse warning use a type with explicit endianness in machine to big endian conversion
12d7b7a23694b4d3dba58d7ae971ee9120a617e5	dmaengine pch_dma fix memory leak on failure path in pch_dma_probe memory allocated for pch_dma is not deallocated in case of failure in pch_dma_probe found by linux driver verification project
34b68400ee3aabda0cd0c951fca3b8e6fd96c015	staging comedi drivers set before attaching the comedi and functions are used to attach legacy and pnp type devices to the comedi subsystem if we can set the before doing the attach the drivers will not have to worry about doing it drivers that do additional probing can still change the if necessary
e75dac921d88ac1fa1ad08686ab242556f8b888b	iwlwifi limit mac_change_interface to bss context currently when mac80211 asks to change the interface type we will accept it for both the bss and pan contexts this is not terribly complicated today but with the addition of the p2p device abstraction the pan context handling will get more complex so restrict mac_change_interface to the bss context also fix a small locking issue and use is_active instead of the vif pointer to check if the other context is activated guarding exclusive interface types on the bss context ibss against the pan context being used for something else
88253ab8e637f210decc8d3ec910e5205cb75b34	staging wilc1000 removes an unnecessary if-condition this patch removes an unnecessary if-condition regardless of an if-condition is performed unconditionally _end_ statement
fa722499bbf89b5976bdfc77139f7d623a69a18a	iio max30102 set parent device initialize the parent of the iio device to the device that registered it this makes sure that the iio device appears the right level in the device hierarchy
54e4c9ee0db1e7637e752c42efd4454ef5dc7cd4	staging comedi addi-data remove unnecessary variable initializations in nearly every variable in is initialized to __number__ when it is declared and then set to some other value before ever being used as such we can remove all of these initializations they are accomplishing nothing
cad2a2d7761238c0b9ff62eecc89215e6bd61831	introduce haswell_init_clock_gating this is based on ivy bridge clock gating for now but is subject to changes in the future note compared to the ivb clock gating this drops the the idicos medium uncore sharing tuned in commit author ben widawsky bwidawsk.net date fri may __number__ __number__ set idicos to medium uncore resources eugeni wants to benchmark the effect of this first danvet added note
a7871def65887dd42b51b89c674a90c085e934c9	hwmon ntc_thermistor fix checkpatch warning fix checkpatch warning quoted string split across lines
5b62408ffe42ffce28e94bc5e7a6dec45e6456ee	staging dgap fix memory leak in dgap_parsefile in dgap_parsefile char pointers are set with kstrdup without checking that some string is allocated to that char pointer before this patch frees the memory if already allocated and then set the poniter with kstrdup
bf7f61f2dfc5c5764e862bee317a5a227091d0d2	remove max_idle_state macro this patch removes the usage of max_idle_state macro and dead code around it the number of states are determined at run time based on the cpuidle state table selected on a given platform
5a4267ca20d4c452a97dace4612f1dfc04147fbd	btrfs try harder to avoid btree node splits when attempting to move items from our target leaf to its neighbor leaves right and left we only need to free data_size free_space bytes from our leaf in order to add the new item which has size of data_size bytes therefore attempt to move items to the right and left leaves if they have at least data_size free_space bytes free instead of data_size bytes free after __number__ runs of the following test i got a smaller number of btree node splits overall sysbench __number__ before this change __number__ splits average of __number__ test runs of throughput average of __number__ test runs after this change __number__ splits average of __number__ test runs of throughput average of __number__ test runs an ideal test would not just have multiple writing to a file insertion of file extent items but also do other operations that result in insertion of items with varied sizes like creations creation of links symlinks xattrs etc
664c100bce0070148131f8d49518015476c03cae	fix gcc __float__ warnings in fix some signedness and variable usage warnings in change_bit and test_and_change_bit
f801cf40243d8f81ac05aa7466d9d8b1e676ee7c	ieee802154 earlier switch we should change the pointer earlier to the lowpan interface sometimes we call iphc_decompress which also use some netdev printout functionality this patch will change that the correct interface will be displayed in this case which should be the lowpan interface
e9f7cd51ccfa4d77ca1c01fd50c1c6af55ded1c9	pata_cs5535 fix drv_name and also a module description while at it
c81095a465b2c1cd819fb14ee3cd07bc1b377af1	fix endian issue when using the partition length when reading partitions the length has to be translated from big endian to the endian order of the host similarly when writing partitions the length needs to be in big endian order the userspace tool nvram needs a similar fix as it is reading and writing partitions through
b48b2c3e50433ff6f7e46186daa7f986bd960215	openrisc use generic strnlen_user function the generic version is both easier to support and more correct
9561f7faa45cb855b1ba83a4acf3f2ad3665e71f	hid hiddev potential info leak in hiddev_ioctl smatch has a new check for rosenberg type information leaks where structs are copied to the user with uninitialized stack data in them in this case the hiddev_devinfo struct has a two byte hole struct hiddev_devinfo __u32 bustype __number__ __number__ __u32 busnum __number__ __number__ __u32 devnum __number__ __number__ __u32 ifnum __number__ __number__ __s16 vendor __number__ __number__ __s16 product __number__ __number__ __s16 version __number__ __number__ xxx __number__ bytes hole try to pack __u32 num_applications __number__ __number__
239d1346f5f77135e272eee0c33cfa3e52fc4e1c	staging dgnc fix sleeping under spinlock bug this commit changes the memory allocation flags to atomic in order to avoid sleeping in the code
64c42998f14d5894ea3138625897d620b30c8e4e	block ioc_cgroup_changed needs to be exported with the ioc changed ioc_cgroup_changed can be used by modular code so ensure that it is exported
de41447aac034c4acc8d9d1ddbdcb7ce4e8a3f6f	nvme-fc avoid memory corruption caused by calling nvmf_free_options twice do not call nvmf_free_options from the nvme_fc_ctlr destructor if nvme_fc_create_ctrl returns an error because nvmf_create_ctrl frees the options when an error is returned
ab387b400872791d0e4d8652a08b44848b85e188	asoc wm8962 fix spelling mistake mesurement measurement trivial fix to spelling mistake in dev_err message
4d2420b4615fcbe1141e26e90e20beb505ed01c2	staging et131x remove unused spinlock phy_lock is no longer used in any useful code its all been moved into a phy_device remove the lock definition and init
aa2064d7dd35ac5812645780d2f22a7899e7c6e1	edac fix mc scrub mode comparsion bug for correctable errors the mc structure field scrub_mode is of integer type not bit field use it accordingly link
64038301baed7d3d59a940ed8db311e27e8995d4	mpt3sas added smp_affinity_enable module parameter module parameter to configuring affinity hint for msix vector smp affinity feature can be by setting module parameter smp_affinity_enable to by default this feature is enabled smp_affinity_enable __number__ enabled
8785b1d487f0a31afd2c802499786d3b355eccea	rbd dont release write request until necessary previously when a layered write was going to involve a copyup request the original osd request was released before submitting the parent full-object read the osd request for the copyup would then be allocated in rbd_img_obj_parent_read_full_callback shortly we will be handling the event of mapped layered images getting flattened and when that occurs we need to resubmit the original request we therefore dont want to release the osd request until we really konw were going to replace it--in the callback function
537632e0a54a5355cdd0330911d18c3b773f9cf7	ore unlock r4w pages in exact reverse order of locking the read-4-write pages are locked in address ascending order but where unlocked in a way easiest for coding fix that locks should be released in opposite order of locking descending address order i have not hit this dead-lock it was found by inspecting the dbug print-outs i suspect there is an higher lock at caller that protects us but fix it regardless
9eb13cf3ecf67a0ff3114d6b66878a1149f96b7d	i2c omap fix draining irq handling commit i2c omap sanitize exit path changed the interrupt handler to exit early and complete the transfer after the draining irq is handled as a result the ardy may not be cleared properly and it may cause all future i2c transfers to timeout with timeout waiting for bus ready this is reproducible at least with n900 when twl4030_gpio makes a long write fifo size during the probe the fix is to continue until we get ardy interrupt that completes the transfer tested with n900 __number__ boots in a row without errors without the patch the problem triggers after few reboots
cdb1b3424dba7d38a2835f6f5f5aaeae74885410	reduce log level of pci space warning if a phb has no space theres no need to make it look like something bad happened a pr_debug is plenty enough since this is the case of all our modern power chips
026359658aecd348bc5c4a136a26f204b169103b	perf evlist add a debug print if event buffer mmap fails add a debug print if mmap of the perf event ring buffer fails link
1752b50ca240a7f722f57e81ba04496eb15c466f	libceph introduce and switch to reopen_session hunting is now set in __open_session and cleared in finish_hunting instead of all around the session lost message is printed not only on connection resets but also on keepalive timeouts
3108b54bcedde5d952c90460df5bc21efc1e134f	ext4 remove dynamic array size in ext4_chksum the ext4_checksum inline function was using a dynamic array size which is not legal c it is a gcc extension remove it
4107692760db8160a65347f7bb2fa7fa7bf9b0d1	dynamic_debug print ram usage by ddebug tables if verbose print ram usage of dynamic-debug tables and verbose section so user knows cost of enabling config_dynamic_debug this only counts the size of the _ddebug tables for builtins and the __verbose section that they refer to not those used in loadable modules
12636551a2d9361e188c8fe280d2a3d90bac4e35	staging rtl8712 fix unnecessary parentheses style warning this fixes the following warning warning unnecessary parentheses maybe should be
0e62780f5f27f24a30d5a08ed731088115e1fe80	asoc convert wm8741 to table based dapm and control init
83ef7777aa5ffbf08a71e14f0a127de315293113	free memory allocated with alloc_apertures fix a memory leak by deallocating the memory we got from alloc_apertures
7b102ed66030a454eac1afce3af89eb3d03b0ce4	hwmon i5k_amb fix checkpatch issues fixed warning simple_strtoul is obsolete use kstrtoul instead unsigned long temp simple_strtoulbuf null __number__ __number__ warning simple_strtoul is obsolete use kstrtoul instead unsigned long temp simple_strtoulbuf null __number__ __number__ warning simple_strtoul is obsolete use kstrtoul instead unsigned long temp simple_strtoulbuf null __number__ __number__
91d1cfa8779e1929167a7cf1e5825462af7d6e4a	video exynos mipi dsi fix mipi dsi regulators handling issue when fb_blank_unlank event occured exynos mipi dsi regulators have to turn on
e3176ca2769e420f64eba4b093bbddea6d7a89c3	btrfs stop silently switching single chunks to raid0 on balance this has been causing a lot of confusion for quite a while now and a lot of users were surprised by this some of them were even stuck in a enospc situation which they couldnt easily get out of the addition of restriper gives users a clear choice between raid0 and drive concat setup so theres absolutely no excuse for us to keep doing this
8c136b590f79f7f4f60ae4709fc1340885ca2eba	ensure write caches are flushed at end of user cmdstream if the gpu is done with one user command stream the buffers referenced by this command stream may go away and get unmapped from the mmu if the write caches are still dirty at this point later evictions will run into mmu faults killing the gpu make sure the write caches are flushed before signaling completion of the user command stream
35ae66e0a09ab70ed588e65f26b4c725cd1656b6	block make rq_affinity __number__ work as expected commit introduced a new rq_affinity __number__ so as to make the request completed in the __make_request cpu but it makes the old rq_affinity __number__ not work any more the root cause is that if the cpu and is in the same group and cpu ccpu will be the same as group_cpu so the completion will be excuted in the cpu not group_cpu this patch fix problem by simpling removing group_cpu and the codes are more explicit now if ccpu cpu we complete in cpu otherwise we raise_blk_irq to ccpu
d86938fb63a9189cedfd3509cafc4b1def68703d	usb remove err usage err was a very old usb-specific macro that i thought had gone away this patch removes it from being used in the driver and uses dev_err instead
f344b0d940d2da88c23b864f818da43081ce300f	bond track sum of rx_nohandler for all slaves sample output with this set applied for an active-backup bond cat __number__ cat __number__ cat __number__
2062ff489ca9d97b4bfee56e944727d9b02b0d63	host ehci-platform remove duplicate check on resource sanity check on resource happening with devm_ioremap_resource
8327b830f293ff48eaade64b4fc2e247b7655615	thermal devfreq_cooling replace dev_warn with dev_err there isnt much the user can do on seeing this warning as the hardware is actually okay dev_err suits much better here
b1a8e3d2d198319e40318563ff80f95605da5a0e	remove retrigger variable in gpio_irq_handler commit arm omap use handlers from generic irq framework removed retrigger support in favor of using generic irq framework this patch cleans up some unused remnants of that removal
20b5af93505cba9d55577f576fcd0d162eb2ad4a	serial sc16is7xx remove unnecessary module_alias the driver has a i2c device id table that is used to create the modaliases and also sc16is7xx is not a supported i2c id so its never used
7602fa1d29f5c4e92d6a36e79000a0f55c317a32	tightly bind rgb output to dc previously the association to a dc was done via the encoders field that has the disadvantage that when an encoder is detached from its crtc that field is set to null leading to situations where it is impossible to access the dc registers required by the rgb output however the coupling between dc and rgb output is really fixed on tegra while they can be detached logically in drm the rgb output can rely on the dcs existence
52e2abb30cf0560edbb8f898d6c308e5ef80dd3f	fix sparse warning for using false as null warning using plain integer as null pointer
3e53ac8230c1af075402bb3c1c89777791c2055e	asoc qcom make osr clock optional some lpass integrations like on apq8016 do not have osr clk so making osr clk optional would allow such integrations to use lpass driver
20d3cbd75ef17b96dfb4f5f1600c0278d330f5ca	tools lib traceevent report unknown vmx exit reasons with code allows to parse the result even if the kvm plugin does not yet understand a specific exit code link
72154e50728e8a08940332db20884b63dfa6590d	asoc rsnd select each src correctly for cmd data path to select cmd data patch it should use correct src from each stream in mux case but current code is selecting src from fixed stream this patch solves this issue
6250d982ee02ba44c230b7fb6f17432732a7a0fe	staging comedi adl_pci9118 use comedi_async scans_done to detect eoa the comedi core now counts the number of samples added to the async buffer and detects the end-of-scan and increments the comedi_async scans_done counter remove the private data member ai_act_scan and use the scans_done member to detect the end-of-acquisition
6e408ed8be0e65d869af4525b53e363b83c9b739	pinctrl imx fix initialization of imx_pinctrl_desc to there are two iomux controllers iomuxc and iomuxc_lpsr they should not share one pin controller descriptor otherwise the value filled into imx_pinctrl_desc when probing the first iomux controller will be overridden when probing the second one in this patch discard the static allcoated imx_pinctrl_desc and switch to dynamically allcate pin controller descriptor for each iomux controller
7ff89ac608d9e856cae6fa651553fa0709bf9c50	audit add exclude filter extension to feature bitmap add to the audit feature bitmap to indicate availability of the extension of the exclude filter to include pid uid auid gid rfe add additional fields for use in audit filter exclude rules
6b37d3e956a43dba0d340fd112df185b7516fc66	reset socfpga no need to store modrst_offset since we can just add it to membase once there is no need to store modrst_offset separately and to repeat the addition with every access
01b41159066531cc8d664362ff0cd89dd137bbfa	handle unbalanced hotplug when cpu_hotplug_enable is called unbalanced a preceeding cpu_hotplug_disable the code emits a warning but happily decrements the disabled counter this causes the next operations to malfunction prevent the decrement and just emit a warning link
d5a3a945fdf2584f3191e8cc958234057ef691da	staging xgifb prefer using the bit macro this patch uses the bit macro for bit shift operation
13d0580cd1eabceb1661049d8830d913d1e31098	staging mt29f_spinand remove space after a cast modify retval to reflect removal of space during cast operation checkpatch found this issue check no space is necessary after a cast
ec0fffd84b162e0563a28a81aa049f946b31a8e2	mm oom_kill remove memcg argument from oom_kill_task the memcg argument of oom_kill_task hasnt been used since oom-kill remove boost_dying_task_prio kill it
ab101e35448b777a62a5e02155783ec93d4c77db	regulator pwm-regulator diffientiate between dev device and rdev regulator_dev
acd8bc1a70ffff39018cd5cd1977e20d0ffce8d3	mips malta remove maybe_unused attribute from first introduced in e6ca4e5bf11466b5e9423a1e4ea51a8216c4b9b6 mips malta malta-memory add support for the ememsize variable but it is not needed since both variables are visible to the compiler patchwork
3dd1cd2d33d94fd56228b9a7f7b467ceccae8f4d	iwlwifi mvm fix locking in iwl_mvm_bt_rssi_event this will deadlock due to commit iwlwifi mvm implement bt coex notifications info possible recursive locking detected tainted g w o is trying to acquire lock at __address__ iwlmvm but task is already holding lock at __address__ iwlmvm other info that might help us debug this possible unsafe locking scenario cpu0 deadlock change-id i9104f252b34676e2f7ffcd51166f95367e08a4d9 reviewed-on conflicts
d2891c4d071d807f01cc911dc42a68f4568d65cf	bluetooth fix delay work init in add_peer_chan when adding devices very rapidly we sometimes see a crash __float__ cpu __number__ pid __number__ comm not tainted debian __float__ hardware name hikey development board dt __float__ task __address__ __address__ __float__ pc is at __float__ lr is at __float__ pc __address__ lr __address__ pstate __number__ this was due to add_peer_chan unconditionally initializing the delayed work structure even if the lowpan_btle_dev passed into add_peer_chan had previously been initialized normally this would go unnoticed as the delayed work timer is set for __number__ msec however when calling add_peer_chan faster than __number__ msec it clears out a previously queued delay work causing the crash above to fix this let add_peer_chan know when a new lowpan_btle_dev is passed in so that it only performs the delay work initialization when needed
0dc2bc49be545626a2dc6da133202ffe69ac3fcc	direct-io rearrange fields in to avoid holes fix most problems reported by pahole there is still a weird __number__ byte hole after map_bh im not sure what causes this
8e4763f67fe7279822c131bde4eadf5f7e456b2c	use module_pci_driver macro this driver duplicates the module_pci_driver code so remove the duplicated code and use module_pci_driver and also remove the obvious comments about _init and _exit
aba97d74034d73d2e1c63cd5da73a51d014c092e	staging comedi aio_iiro_16 fix subdevice __number__ type subdevice __number__ is a digial input not a digital subdevice fix the type and for aesthetics rename the function used to read the inputs
a46737aee59e4e001106e1d3777e0801843361db	asoc twl6040 one workqueue should be enough it is a bit overkill to have three __number__ separate workqueue for a single driver we can manage things with one workqueue nicely
b92675d998a9fa37fe9e0e35053a95b4a23c158b	arm release device node after it is no longer needed the device node returned by of_find_node_by_name needs to be released after it is no longer needed to avoid a device node leak
676b8bae806ebf7e36d640ea64ac06116143fc5b	staging rtl8192e rename rtl8192_read_eeprom_info use naming schema found in other rtlwifi devices rename rtl8192_read_eeprom_info to _rtl92e_read_eeprom_info
e84c48ae3024ac2f14ed1c3671e5ea37c60fb838	rcu round fast_no_hz lazy timeout to nearest second currently if several cpus in the same package have all lazy rcu callbacks their wakeups will be uncorrelated if all the cpus are in the same power domain as is often the case this will result in unnecessary power-ups of the package this commit therefore uses round_jiffies to round the timeouts to a second boundary increasing the odds that they can be coalesced with each other or with other timeouts
bc6bcb59dd7c184d229f9e86d08aa56059938a4c	netfilter xt_tcpoptstrip fix possible mangling beyond packet boundary this target assumes that is well-formed that may be well not the case add extra sanity checkings to avoid possible crash due to out of the real packet boundary after this patch the default action on malformed tcp packets is to drop them moreover fragments are skipped
553bc087caf052458dc9f92bc42710027740caa9	arcnet com90xx add __init attribute add __init attribute on a function that is only called from other __init functions and that is not inlined at least with gcc version on an x86 machine with allyesconfig currently the function is put in the segment declaring it as __init will cause it to be put in the and to disappear after initialization the result of objdump on the function before the change is as follows __number__ l f __number__ check_mirror and after the change it is as follows __number__ l f __number__ check_mirror done with the help of coccinelle the semantic patch checks for local static non-init functions that are called from an __init function and are not called from any other function
0f63bdedcc749917e74093ecbd8dae7b77934f19	mfd stw481x export i2c module alias information the i2c core always reports the modalias uevent as name regardless if the driver was matched using the i2c id_table or the of_match_table so the driver needs to export the i2c table and this be built into the module or udev wont have the necessary information to auto load the correct module when the device is added
7fd0ddc5bf1ab5259c80a53a01984e13befd658b	rcu fix synchronize_sched_expedited type error for s the type of s has been long rather than the correct unsigned long for quite some time this commit fixes this type error
b99553fb60c1a1d3569993fdb5e21fb7214dbbf0	ath9k fix ani levels the commit ath9k_hw improve ani processing and rx desensitizing parameters modified the immunity level tables for both cck and ofdm fix them so that the tables are in sync with the internal
7b095098ac5d28e865d179588d364a0cf8b0f81f	arm omap2 gpmc remove unused gpmc_round_ns_to_ticks function this function is not used anywhere so its safe to remove it this means less code to maintain
b79af13efd98ca2908f2df1120e79a7ff70faa0d	dm space map metadata constify dm_space_map structures declare dm_space_map structures as const as they are only passed as an argument to the function memcpy this argument is of type const void so dm_space_map structures having this property can be declared as const file size before text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ file size after text data bss dec hex filename __number__ __number__ __number__ __number__ __number__
3580aa10fbb3a0ffbca9853dc827ea84f1073748	asoc switch over to use snd_soc_register_component on fsl ssi
db81a62451b24eaef59f41e6fb312a88e1a83454	nfc atomic socket allocation rawsock_create is called with preemption disabled so we should not sleep
3cb6dcfa44e883412f8df2f2b1917b0d359f3ec4	input regulator-haptic simplify code all the use cases in this driver has a regulator_haptic_toggle call after regulator_haptic_set_voltage so make regulator_haptic_set_voltage call regulator_haptic_toggle to simplify the code
5cd038f53ed9ec7a17ab7d536a727363080f4210	sched migrate waking tasks current code can fail to migrate a waking task silently when ttwu_queue is enabled when a task is waking it is pending on the wake_list of the rq but it is not queued __number__ in this case set_cpus_allowed_ptr and __migrate_task will not migrate it because its invisible to them this behavior is incorrect because the task has been already woken it will be running on the wrong cpu without correct placement until the next wake-up or update for cpus_allowed to fix this problem we need to finish the wakeup so they appear on the runqueue before we migrate them link
a0e86bd4252519321b0d102dc4ed90557aa7bee9	audit always follow va_copy with va_end a call to va_copy should always be followed by a call to va_end in the same function in this is not always done this patch makes sure va_end is always called
265c7f8a72e972a707246a2bb2c492524aa95ea4	media v4l2-ctrls type_ops can handle array elements extend the control type operations to handle n-dimensional array elements
33fba5de1e2318d301b84089e6468dedec9ad381	media s5c73m3 use devm_regulator_bulk_get api devm_regulator_bulk_get saves some cleanup and exit code
94cccde648d32abe61e2d0d1b18178f3027f1a78	vfio use pci_enable_msi_range and pci_enable_msix_range pci_enable_msix and pci_enable_msi_block have been deprecated use pci_enable_msix_range and pci_enable_msi_range instead bhelgaas changelog
a5310dc66906d2e7dc3ab6688541df1da491c578	staging rtl8192e rtl8192e merges two lines of code and removes unused variable this patch merges an assignment with an immediately following return of the assigned variable it also removes a variable that becomes unused due to this transformation the following coccinelle semantic patch was used to make this transformation expression ret identifier f ret identifier ret type t identifier c ret c when ret when strict
79b591c091b31291fecd9551db0a67fdc5901d50	tpm_tis_core convert max timeouts from msec to jiffies tpm_tis_core was missing conversion from msec when assigning max timeouts from constants
29b968b2af7782fe879190cd43c10261506ebc11	pm clk export symbols for existing api fcns while trying to convert a dma driver from bool to tristate we encountered the following error pm_clk_add_clk undefined error pm_clk_create undefined error pm_clk_destroy undefined error pm_clk_suspend undefined error pm_clk_resume undefined since in principle there is nothing preventing these functions from being used in modular code as well as builtin we add the export of them we expand the scope to also include pm_clk_add of_pm_clk_add_clks pm_clk_remove pm_clk_remove_clk pm_clk_init pm_clk_runtime_suspend pm_clk_runtime_resume pm_clk_add_notifier these functions are also non-static and presumably form part of the existing api used by other drivers that may become modular in the future
c92f2125ac5338151bb5c45e371c701e107e3197	cpufreq stats drop cpu field of struct cpufreq_stats cpu field of struct cpufreq_stats isnt used anymore and so can be dropped this change makes cpufreq_stats_update_policy_cpu empty and so that is removed as well
470043ba995a79a274a5db306856975002a06f19	security smack fix memleak in smk_write_rules_list the smack_parsed_rule structure is allocated if a rule is successfully installed then the last reference to the object is lost this patch fixes this leak moreover smack_parsed_rule is allocated on stack because it no longer needed ofter smk_write_rules_list is finished
63ae37ea5186a6890a8968611180dc61118f719d	media omap3isp fix crash caused by subdevs now having a pointer to devnodes commit v4l dynamically allocate video_device nodes in subdevices makes the embedding video_device directly fix accesses to the devnode accordingly
d6c7276be180fbd0a30cda8fac5c82d483be47b6	remove dead code from alloc_cached_mr the only place that assigns mr inside the loop already does a break so if mr will never be true here since the function initializes mr to null at the top we can just drop the extra if and break here
c2b0c1e7fb69b54e704cb2dae5a80cc78a8cb0b2	r8169 fix the reset setting for rtl8111evl should stop any tlp requirement before resetting by enabling register bit __number__
5ffd7c8b13643f4bb6e35b2eababf5336d5e8353	mips dec do not set up the fpu interrupt if no fpu following the arrangement for processors that wire fpu exceptions to the fpe cpu exception handle the case where no fpu is in use which for decstation systems will only ever happen when the nofpu kernel option has been used do not register the fpu interrupt in such a case either patchwork
6b1446bc7c89025e07037f9c238a60b6fbe3c207	media v4l vsp1 video fix coding style commit media v4l vsp1 use media entity enumeration interface wasnt aligned with the driver coding style fix it by renaming the rval variable to ret furthermore shorten lines by accessing the media_device instance in a more straightforward fashion
ea03f57b91dfcd23df11861b212949b1b967374c	staging wilc1000 rename session_index member variable this patch rename the ack session_index variable to session_index to avoid camelcase naming convention
5fc6c39653f1c34de3f2357d50ba5baff6b6e482	mfd arizona map micvdd from extcon device to the arizona core the extcon driver should be able to get its regulator against rather than against the main arizona device we must add a supply mapping allowing the regulator to be located this patch does so
6d440b2559c9e477ff11b40c6f2dd69193d46161	revert iwlwifi mvm drop non vo frames when flushing this is now implemented by mac80211 commit below mac80211 will the frames on the queues before suspending disconnecting it will then send the deauth and wait until the queues are empty commit date wed jan __number__ __number__ mac80211 let flush drop packets when possible this reverts commit
90029640fd5963343fb862d419db161bc0424120	powerpc remove unused cpu_ftrs_a2 in commit fb5a515704d7 remove and associated pieces we removed the last user of cpu_ftrs_a2 so we should remove it too
66bf93212f19548f5ed221356b2d70189cc18254	asoc dapm only lock codec for if not using regmap if we do use regmap then regmap will take care of things for us we actually already have this check at a higher level for the current users but this makes sure we do the right thing in the future too if we need to
4a850cbefa9592ddde3670a41c10c9576a657c43	sched remove unused params of build_sched_domain build_sched_domain never uses parameter struct s_data and so passing it is useless remove it link
7a89c79a946d72597fb96a06a9a9e95ff6b832b4	serial ifx6x60 remove casting the return value which is a void pointer casting the return value which is a void pointer is redundant the conversion from void pointer to any other pointer type is guaranteed by the c programming language
d8a69251fb58a756e2dd00cc5c7f1b54d383e203	power pm2301_charger remove deprecated create_singlethread_workqueue alloc_ordered_workqueue with wq_mem_reclaim set replaces deprecated create_singlethread_workqueue this is the identity conversion the workqueue charger_wq is used for running all the charger related tasks this involves charger detection checking for hw failure and hw status this workqueue has been identity converted it queues multiple workitems viz hence the deprecated create_singlethread_workqueue instance has been replaced with a dedicated ordered workqueue the wq_mem_reclaim flag has been set to ensure forward progress under memory pressure
b00ddb27324eee53cbed8be7fc00dc572727bb0e	assert that created vma has a whole number of pages vma and their objects are supposed to composed of whole pages add an assert to catch any invalid construct when we create the vma
5b7610f235627878617648a99dd1442997f1c889	arm fix wl12xx on dm3730-evm with mainline u-boot i upgraded my u-boot and noticed that wl12xx stopped working turns out the kernel is not setting the quirk for the mmc2 copy clock while the eariler bootloader i had was setting it
ea51874cb34dd8e25181603c91030e42e4428453	regulator pv88060-regulator constify regulator_ops structure declare regulator_ops structure as const as it is only stored in the ops field of a regulator_desc structure this field is of type const so regulator_ops structures having this property can be made const too file size before text data bss dec hex filename __number__ __number__ __number__ __number__ file size after text data bss dec hex filename __number__ __number__ __number__ __number__
ce9b499c9f58d7f3f680413f3ab5407f4e647ba2	revert kernfs remove unnecessary null check in __kernfs_remove this reverts commit tejun writes im sorry but can you please revert the whole get_active waiting while a node is deactivated has potential to lead to deadlock and that interface is something fundamentally flawed and that cgroup will have to work with the remove_self like everybody else iow i think the first posting was correct
8862ce68a8e0a38a0ad93fadb1ae50e35e740e71	staging olpc_dcon olpc_dcon fix spaces between operator and variables this issue is caught by and is related to the following warning check spaces preferred around that
92c177b7947d9c889ea7b024871445015ea74221	ratelimit aux transfer debug messages aux transfers always fail with non-zero status flags when theres nothing connected on the port so we dont usually need to see all of the debugging information from it also we try reprobing a so without ratelimiting most of the kernel log is filled up with messages from radeon_dp_aux_transfer_native
22e244b813ddd9a290a446ddca24ceca1f78dad2	media coda split format enumeration for encoder end decoder device let the decoder capture side and encoder output side only list uncompressed formats and the decoder output and encoder capture side only list compressed formats
f49f85108b2b3b1aaa7632418411c401fbb6741c	asoc use dai_fmt in snappercl15 machine driver
934d6086ea6b165af9218e8dcc2a9e69e1850743	limit the ioremap of the pci bar to the registers in the future we may like to experiment with using a wc map of the gtt portion however that will conflict with mapping the entire bar as uc in order to access the gpu registers instead we can shrink the register ioremap to only map the register block tested-by (ivb) ben widawsky bwidawsk.net danvet squashed-in follow-up fix for registers file size from chris wilson
4f3c15569e9e927ebbed6da4a2281f5d8a292a90	make firmware loading re-callable make it possible to call gm20x_secboot_prepare_blobs several times after either success or failure without re-building already existing blobs the function will now try to load firmware files that have previously failed before returning success
6f88a20a7ff0b8724b9832c139fc06095e71b9bf	staging comedi das08_cs remove thisboard macro the thisboard macro relies on a local variable having a specific name and yields a pointer derived from that local variable replace the macro with a local variable where used use the comedi_board helper to get the pointer
7be2edbbb87a34fbf1441991a679af94fe1d981d	bluetooth ensure hci_conn always contains the local identity address to be consistent with the remote address info in hci_conn we want it to also contain the local identity address information this patch updates the code to copy the right values in place whenever an le connection has been established
5fcb93475697911eb239f68241903eb5540803ac	bluetooth remove redundant check for remote_key_dist in the smp_cmd_sign_info function the smp_dist_sign bit is explicitly cleared early on in the function this means that theres no need to check for it again before calling smp_distribute_keys
6a01f0c08d20a2b1356c1cb90ef97a0dc412b64c	ath9k make use of list_for_each_entry_safe this does the same thing as the previous code
4dbdbda84f963312e0b5dfdf2dfbf64de047dd44	nfsd clean up forgetting openowners using forget_n_state forces me to implement the code needed to forget a specific clients openowners
4ae9ccf2fab87aaf9e0e906ba85675be020f6948	arm at91 remove poweroff code now that all the soc have been converted to use the new poweroff driver we can remove the poweroff code defined in mach-at91
1ac53c027bb6be5a82b080a1320bfd6f7fba641b	staging comedi ni_daq_700 move the comedi_driver variable move the comedi_driver variable to remove the need for the forward declarations add some whitespace to the declaration for aesthetic reasons
a75831f3600c479054fc3f70cd11257ab07886e2	media s5p-jpeg convert struct spinlock to spinlock_t spinlock_t should always be used could not get this to build with allmodconfig make warning symbol version dump is missing modules will have no dependencies and modversions building modules stage __number__ modpost __number__ modules
810627d9a6d0e8820c798001875bc4e1b7754ebf	xfs fix force shutdown handling in xfs_end_io ensure gets propagated back to aio completions
2f31fa881fbe70808b945a6d23cae1ca8eadf1b3	remove ib_get_dma_mr calls the pd now has a local_dma_lkey member which completely replaces ib_get_dma_mr use it instead
36b35a0dbe904a06e94154f29db0d0e218420c98	f2fs support data flush in background previously when finishing a checkpoint we have persisted all fs meta info including meta inode node inode dentry page of directory inode so after a sudden power cut f2fs can recover from last checkpoint with full directory structure but during checkpoint we didnt flush dirty pages of regular and symlink inode so such dirty datas still in memory will be lost in that moment of power off in order to reduce the chance of lost data this patch enables f2fs_balance_fs_bg with the ability of data flushing it will try to flush user data before starting a checkpoint so users data written after last checkpoint which may not be fsynced could be saved when we mount with data_flush option after every period of cp_interval could be configured in sysfs seconds user data could be flushed into device once f2fs_balance_fs_bg was called in kworker thread or gc thread
ba50e7e16b86e25048290b682f7a4e09e069d321	media cx25840 fix regression in hvr-1800 analog support the refactoring of the cx25840 driver to support the cx23888 caused breakage with the existing support for analog support rework the routines such that the new code is only used for the __number__ validated with the following boards hvr-1800 retail hvr-1800 oem hvr_1850 retail thanks to steven toth and hauppauge for loaning me various boards to regression test with thanks-to steven toth kernellabs.com
6ac0483b35bfc7546398d1198b65ed7be17f3cc5	propagate invalid setcrtc cloning errors back to userspace when invalid cloning configurations were detected during modeset we never copied the error code into the return value variable leading us to return __number__ success to userspace this regression has been introduced in commit author jesse barnes virtuousgeek.org date fri nov __number__ __number__ use compute_config in set_config v4 testcase bugzilla
5505bdb54d92267a5b6f092c337bd84d247bcf49	ixgbevf fold ixgbevf_pull_tail into ixgbevf_add_rx_frag this change folds the ixgbevf_pull_tail call into ixgbevf_add_rx_frag the advantage to doing this is that the fragment doesnt have to be modified after it is added to the skb
a9fad6886f5229fc9989ac6cdd7ddecbf570a58f	omapdss hdmi wait for framedone when stopping video at the moment when hdmi video output is stopped we just clear the enable bit and return while its unclear if this can cause any issues i think its still better to wait for framedone interrupt after clearing the enable bit so that were sure the hdmi ip has finished as we dont have any ready-made irq handling for hdmi and this only needs to be done when disabling the hdmi output this patch implements a simple loop with sleep polling the framedone bit
026085ef5ae07c3197f2baacc091ce067b86ed11	cgroup remove redundant of old css_set from migrate we can now assume that the css_set reference held by the task will not go away for an exiting task pf_exiting state can be trusted throughout migration by checking it after locking threadgroup changes in v4 tejun heo fix typo in commit message undid the rename of css_set_check_fetched li zefan fix comment in cgroup_task_migrate changes in v3 frederic weisbecker fixed to put error in retval changes in v2 tejun heo updated commit message removed stale patch description about dropped function rename
ffdce4668234a113e767edd27aa1331903959106	mips ath79 remove superfluous alignment checks from the alignment of the where parameters are checked in the core pci code already patchwork
c40dcf6e8ce477ba8c1c21b949b28e03b1700902	rtc rtc-msm6242 use functions use functions to make cleanup paths simpler
501f1bde66525f94403a5b78832a9218ef9b1c14	ima prevent keys on the from being removed set the key_flags_keep on the to prevent userspace from removing keys from the keyring
274c34dbe756d441e2c1925465569ef93d380541	load palette at the end of mode_set_nofb load palette at the end of mode_set_nofb moving the palette loading to mode_set_nofb saves us from storing and restoring of framebuffer addresses in dma registers that were just recently written there
d265cf48ea0a5cf6d201abb0bfab6674019126d4	fec fix the order for the clocks on fec_probe the clocks are enabled in the following order clk_ahb clk_ipg clk_enet_out clk_ptp so in the error and remove paths we should disabled them in the opposite order also fix the order in the functions
8c11f4772c54d9bea4448ae9de1d4b99695ee72a	staging comedi cb_pcidas tidy up trimpot_7376_write rename this function so it has namespace associated with the driver change the return type to void it always returns __number__ and the return value is never checked for aesthetics remove the static const local variables they dont add any significant value remove the bitstream local variable the value passed to this function will always be in the correct range due to so the masking is not necessary change the type of the value param to match the callers type and write_calibration_bitstreams type
db38f290cadc16304b84f6d18cbaa06251dde875	cleanup on its minor cleanup so that the function names comply with the coding style
8c6a5dca88401d119e2e6b8e81c2ea3b9b18b4ff	amd use pci_zalloc_consistent remove the now unnecessary memset too
7e72a54c08c3a3d296c11139774e13cc80424060	fix adis16260 channel offsets and scales most of the channel offsets and scales in the adis16260 are incorrect temperature scale is off by a factor of __number__ voltage scale is off by a factor of __number__ temperature offset is completely wrong this patch fixes these issues also use the iio_degree_to_rad for the angle velocity since this makes it much easier to compare it to the value given in the datasheet
671bd9934a861288a248b051751061b11654aef9	kvm x86 fix pmu when guest does not use pmi if a guest enables a performance counter but does not enable pmi the hypervisor currently does not reprogram the performance counter once it overflows as a result the host performance counter is kept with the original sampling period which was configured according to the value of the guests counter when the counter was enabled such behaviour can cause very bad consequences the most distrubing one can cause the guest not to make any progress at all and keep exiting due to host pmi before any guest instructions is exeucted this situation occurs when the performance counter holds a very high value when the guest enables the performance counter as a result the hosts sampling period is configured to be very short the host then never reconfigures the sampling period and get stuck at loop we encountered such a scenario in our experiments the solution is to reprogram the counter even if the guest does not use pmi
adc4e04a4bbd7696c9aa99eec951ddaf26ac27e1	mlxsw switchx2 move port used check outside port remove function be symmentrical with create and do the check outside the remove function
6d8d4974a25db8b2c9be6ccc765765824e4781bd	thermal update driver license as per the comment at the top of this file this is a gplv2 driver this patch updates the driver license accordingly
e6c11f9a462e9ef4876d5e1539a6c06eded4c793	btrfs reuse existing variable in scrub_stripe reduce stack usage the key variable occupies __number__ bytes the key_start is used once we can simply reuse existing key for that purpose as the key is not a simple type compiler doest not do it on itself
a2acaa2163566ad2e04b10fdf81de650e9b9261b	dmaengine ste_dma40 fix up static memcpy event lines the commit dmaengine ste_dma40 assign memcpy channels in the driver had two problems it assigned magic numbers to the memcpy event lines instead of giving them symbolic names it seems to have missed one of the memcpy event lines number __number__ this patch fixes it up
15dc006af830d85417c97b60a40b5a0b991ee32e	regulator pcap use devm_regulator_register use devm_regulator_register to make cleanup paths simpler and remove unnecessary remove
4704c573fc9fee38dd30f07d02037a7edc42bacd	use has_psr to avoid unecessary interactions lets be more conservative and protect platforms that dont support psr from unecessary interactions
805c1f4aedaba1bc8d839e7c27b128083dd5c2f0	net_sched act action flushing missaccounting action flushing missaccounting account only for deleted actions
3828924af2e24a615b302fe1da69527d58474cdc	watchdog s3c2410_wdt use instead of are more preferred than
92cd40322848a12f1f3ef2d7804233b93030c532	ath9k fix moredata flag endianness in cabq tx while compiling ath9k with some extra flags ive found that __number__ warning restricted __le16 degrades to integer __number__ warning invalid assignment __number__ left side has type restricted __le16 __number__ right side has type int theres no way for frame to be mistreated as the offending moredata flag when considering cab queue this couldve however theoretically led sometimes to increased power consumption on connected stations as they would keep their rx active waiting for frames that would never come
63274cfb94aac109fc2490a70a96b26751608e57	rcu eliminate check_for_new_grace_period wrapper function one of the calls to check_for_new_grace_period is now redundant due to an immediately preceding call to note_gp_changes eliminating this redundant call leaves a single caller which is simpler if inlined this commit therefore eliminates the redundant call and inlines the body of check_for_new_grace_period into the single remaining call site
1ad759d8479b4b28f2a6c874d380066cf987b341	ipv6 remove unneeded check to pskb_may_pull in ipip6_rcv this is already checked by the caller tunnel64_rcv and brings ipip6_rcv in line with ipip_rcv
198cd2d35fa170d9e98f872d04ebb6b8798d4d0d	staging rtl8188eu rework function patha_fill_iqk rename camelcase local variables remove unnecessary debugging messages and local variables
af201f723f694c8bf12f80c39c897371c4800d31	switchdev fix handling for drivers not supporting ipv4 fib ops if config_net_switchdev is enabled but port driver does not implement support for ipv4 fib ops dont fail route offload operations route adds will not be marked as offload routes will be installed in the kernel fib as usual this was by florian when testing dsa driver with net-next on devices with l2 offload support but no l3 offload support what he reported was an initial route installed from dhcp client would fail route not installed to kernel fib this was triggering the setting of which would disable route offloading after the first failure so subsequent attempts to install the route would succeed there is follow-on to address the handling of route install failures but for now lets differentiate between no support and failed support
d604e1d2cd0e5225e1b6132f27734137b8e0d63e	use rdmavt pkey verbs function no need to keep providing the query pkey function this is now being done in rdmavt remove support from hfi1 the allocation and maintenance of the list still resides in the driver
0f6d64cee9c518f5d3138a90cead62fba2031074	target implement mode page informational exceptions the windows scsi compliance test asks for this mode page and its easy to implement we can just return all to show we dont support any of these features
242489cfe97d44290e7f88b12591fab6c0819045	standardize arguments in slowpaths just how the locking-end behaves when unlocking go ahead and obtain the proper data structure immediately after the previous asm-end call exits and there are probably pending waiters this simplifies a bit some of the layering link
b4bfa3c7d0a464a468615e4c6e06b92387115a04	set power state variable after enabling clocks and power power state variable holds the state of the mixer device power on and power off functions are toggling these variable at wrong place state variable should be changed to true only after runtime pm and clocks are enabled else it may result to a situation where mixer registers are accessed with device power enabled similar logic for poweroff sequence
acf35a4ec6f75bcb1c20c7aa02586de6220d76c5	mlxsw reg fix max temperature getting fix copy paste error in mtpm unpack helper
6064803313bad9ae4cae233a9d56678adb2b6e7c	perf tools use sscanf for parsing when reading those files to synthesize mmap events it makes the code shorter and cleaner link
bf988c16a3d65c853bd3eb0ec4f15a88a76a3ccd	check return value of sscanf added code to check return value of sscanf
68946159da1b0b6791c5990242940950b9383cfc	dont mix hexa and decimal with in the printf format append to all in order to avoid while reading when there is other decimal value in the log also replace some of the hexadecimal print to decimal to uniformize the format with netfront
d31e545b00057516eac84ff0e2675bf802c2a522	media via-camera replace current_norm by g_std the current_norm field is deprecated replace it by properly implementing g_std
5c044e6368995e6590b616aa0043fe03670aefaa	coding style cleanup in mlx4_en_dcbnl_ieee_setpfc fix some coding style issues in this function
a340af58730e892ccb507f7a70054f7909b28d49	move waforceenablenoncoherent to common init fn
1a3555cd3245b3204189a1118364ad41467b73ca	remove unused ll_quota_on and ll_quota_off they are not used anywhere so safe to drop
338c5188f6fbccf3ef34a6ae46ada8f64565e1d0	asoc wm_adsp correct handling of some coefficeint blocks
a575be4cbb951244f93342487c2537f729f2239d	asoc wm9712 use core reset helper use the new snd_ac97_reset helper and the reset functionality provided by snd_soc_new_ac97_codec to perform the device reset rather than open-coding it
18fcf49f87f4b280d3cd695fc77766004b223af5	net_sched fix a memory leak in tc action
ea1fb96b650ddf9f3362b2bc79f527912c5b132e	staging lustre osc fix debug log message formatting corrected newline specifier in debug log message intel-bug-id reviewed-on
c6b3d5bcd67c75961a1e8b9564d1475c0f194a84	cgroup fix top cgroup refcnt leak as mount and kill_sb is not a one-to-one match if we mount the same cgroupfs in serveral mount points and then umount all of them kill_sb will be called only once try mount cgroup cpuacct xxx mount cgroup cpuacct xxx cat grep cpuacct cpuacct __number__ __number__ __number__ umount umount cat grep cpuacct cpuacct __number__ __number__ __number__ youll see cgroupfs will never be freed
e32993eb3aed598790ba0c581796c357898bd8f0	wl12xx remove redundant null check on ssid is an array of u8 so it can never be null so the null check on is redundant and can be removed
c87059793dd02390b504b0292bdb024ffd68b822	drivers hv vmbus handle channel rescind message correctly properly cleanup the channel state on receipt of the offer rescind message starting with ws2012 the host requires that the channel relid be properly cleaned up when the offer is rescinded
828e9834e9a5b7e61046aa3c5f603a4fecba2fb4	arm64 head create a new function for setting the boot_cpu_mode flag currently the code for setting the __cpu_boot_mode flag is munged in with el2_setup this makes things difficult on a be bringup as a memory access has to have occurred before el2_setup which is the place that wed like to set the endianess on the current el create a new function for setting __cpu_boot_mode and have el2_setup return the mode the cpu also define a new constant in boot_cpu_mode_el1 for readability
8c7f5f5833815af06872bd6151604e0e18e24c99	input pxa27x_keypad pass correct pointer to free_irq free_irq expects the same pointer that was passed to request_irq otherwise the irq is not freed the issue was found using the following coccinelle script type t t devid devid type t devid position p devid position p
31a5a09c1c5c888181e86a951a9a6c3ec27f7642	iwlwifi dont double free a pointer if no fw was found in the very unlikely case in which no firmware could be found the same pointer was freed twice fix that
3c973b0e71bff472545a2939ede2b567745d0c1c	cleanup redunant lksb flags in lksb flags are defined both in and so clean them up from
e20038724552cd05e351cd7d7526d646953d26b7	macsec fix lockdep splats when nesting devices currently trying to setup a vlan over a macsec device or other combinations of devices triggers a lockdep warning use netdev_lockdep_set_classes and ndo_get_lock_subclass similar to what macvlan does
62a1391ddd6fbe82fc02154dc760bcc5cbc9ef68	ext4 remove an unused statement in ext4_mb_get_buddy_page_lock in this patch the statement poff block blocks_per_page in ext4_mb_get_buddy_page_lock has no effect it will be optimized out by the compiler but its better to remove it
9898df6482f71fa0d27b029789ef2f37988c06b3	media ts2020_set_params bug point to fixes corruption of
c09088d934c1e1672be8b3cfe3ba4f40ab2bf13e	hwmon da9052 fix adc to voltage calculation the adc resolution of the pmic is this means that the maximum possible value is __number__ and not the __number__ as originally in the code
66e3015f6ec84f7143af0f01ce096b6cd9e1a4b9	staging comedi addi_apci_3xxx use comedi_fc helpers to validate timer arg use the comedi_fc helper cfc_check_trigger_arg_is to validate the trigger argument when the source is trig_timer for aesthetics rename the local variable tmp to arg
c7aca235aa60d1432c95b752812d359d0dbece4f	drop invalid warn during data rate calculation its possible to have a non-zero plane mask and still wind up with a total data rate of zero there are two cases where this can happen planes are active from the kms point of view but are all fully clipped positioned offscreen the only active plane on a crtc is the cursor which is handled independently and not counted into the general data rate computations these are both valid display setups although unusual so we need to drop the warn testcase link cherry picked from commit
e8b0c32eae319e287d0329b4148c9a1a51525053	dwc_eth_qos use gfp_kernel in dma_alloc_coherent since we are in non-atomic context here we can pass gfp_kernel to dma_alloc_coherent this enables use of the cma
54a5e02abb03d296c07426d51ddaea8f4cc9ca39	staging comedi __number__ prefer using the bit macro fix the issues
84e9cd6b5c42d021cc0a2dac7d6e49e9d9dfa037	staging gs_fpgaboot fix a compiler warning with make the below warning is fixed in function warning declaration of shadows a global declaration warning shadowed declaration is here by renaming file function argument of gs_load_image with fw_file
b166aeb99faa0b42f75ab4f48e98afa44d6a8958	use new drm_fb_helper functions use the newly created wrapper drm_fb_helper functions instead of calling core fbdev functions directly they also simplify the fb_info creation v3 dont touch remove_conflicting_framebuffers v2 remove unused variable pdev in nouveau_fbcon_create
4945a084799e24f0954e20f81b9004749cba93e4	ceph fix minor typo in unsafe_request_wait
ec671b5360b914fb3ad79053593d195996a95dde	remoteproc qcom fix initializers for qcom_mss_reg_res array the recently added initialization is rather unusual because it uses a constructor for a variable-length array to assign a constant structure to a member that uses a fixed-length array this confuses clang and breaks the build error incompatible pointer types initializing const char with an expression of type struct qcom_mss_reg_res __number__ struct qcom_mss_reg_res warning suggest braces around initialization of subobject struct qcom_mss_reg_res we can either turn this constructor into a regular initializer by removing the struct qcom_mss_reg_res or we can make the array variable length the latter approach is used for the arrays of strings in the same structure so lets use that here too
35d51807577d4ab10f321ef22e4dcea30bee1caa	whack-a-mole with tif_freeze blackfin has reintroduced it completely unused
9b67eb7365725ed00dde4714d71d4afe205329b2	move triggering checking its better to be checking whether triggerring in fimd_trigger function also it will return if in triggerring on fimd_te_handler then it cant execute remain codes
cf4cbe5314884c3123fe4ca137e9d750b6e2b8c9	turbostat byt does not have msr_misc_pwr_mgmt and so fails with turbostat msr __number__ offset read failed error it seems that baytrail and airmont do not have this msr it is included in subsequent goldmont atom
50f7c4c967d0b5acd8e7ba6ab654dc4a7ac869ac	rbd fix integer overflow in rbd_header_from_disk is read from disk via rbd_req_sync_read and thus needs validation otherwise a bogus snap_count could overflow the kmalloc size leading to memory corruption also use u32 consistently for snap_count
934bdc73dd3029c1b91e1a3538268b4afccd58cf	ath9k use ath_ps_ops in ath9k_spectral_scan_
ca9a2054fe041326888811a94f17459acab9f950	tpm_nsc use struct dev_pm_ops for power management make the tpm_nsc driver define its pm callbacks through a struct dev_pm_ops object rather than by using legacy pm hooks in struct platform_driver this allows the driver to use tpm_pm_suspend and tpm_pm_resume as its pm callbacks directly without defining its own pm callback routines
8d71397bd2021f8ef68ae34d8bea431cc903fcdd	net hns optimizate fmt of snprintf it misses string format in function snprintf as below snprintfbuff eth_gstring_len it needs to add to fix it as below snprintfbuff eth_gstring_len
355958f2893d97375da17696d2566dd4ab7b54a8	cifs use build_bug_on to validate uids and gids are the same size the assumption that sizeofuid_t is the same as sizeofgid_t is completely reasonable but since we can verify the condition at compile time
6a7f4911a470fede7d40746487fb1e4a95657efd	net sa11x0-ir get rid of is initialized to zero and never changed get rid of this redundant variable
814979eb8494c2269f4907ef0494f199d6d06ec2	arm shmobile remove move over arch_shmobile_legacy to use the default legacy arm implementations of __clk_get and __clk_put in by deselecting have_mach_clkdev this has the nice side effect that is no longer used and can be removed
b99d2a57b7d9e9e64e9193d70696b77ed035c311	tg3 check all adv bits when checking config this patch makes sure the driver checks all advertisement bits when checking the current hw advertisements
d8bbeb39fbf3ff06b6adae9d336f44bee4e3f3ec	pci designware wait for iatu enable add a loop with timeout to make sure the iatu is really enabled before subsequent config and accesses bhelgaas split to separate patch use dev_err instead of dev_dbg
84ed30538b5d9a29a9612b93dd0a45d561624f82	xtensa copy_thread with clone_vm must not copy live parent ar windows when doing a fork new vm the new task has a mirror image of the parents stack so keeps the same live register windows etc however when doing a clone with clone_vm keeping the same vm eg when creating a new thread the child starts afresh on a new stack it cannot share any part of the parent stack it especially cannot have the same live ar windows as the parent otherwise it will overwrite the parent stack on overflow likely causing corruption and so it effectively the register windows need to be spilled turns out its much easier to simply not copy parent register windows when clone_vm is set
3f6c4654c8bff4230ba279a7b5b6d8721b572ddf	ptp stmmac convert to the __number__ bit time methods this device stores the number of seconds in a __number__ bit register so more work is needed on this driver before the year __number__ comes around compile tested only
8e645c345a4cf6b8b13054b4ec2f6371f05876a9	selinux fix possible memory leak free ctx_str when necessary
7fbe7a9374f8bb18db653f4693861c8625d01db1	simplify the calculation of iov resource alignment the alignment of iov bar on powernv platform is the total size of the iov bar no matter whether the iov bar is extended with number of roundup_pow_of_twototal_vfs or number of max pe number __number__ the total size could be calculated by vfs_expanded vf_bar_size this patch simplifies the pnv_pci_iov_resource_alignment by removing the first case
b1e42d9f7057d074e6ada45abe003c4d8578bd20	staging android ion fix checks found by alignment fixes
4e1d2ac63368843d63dc38ed42f141506bd1e988	media vivi remove pointless support
69784fa539efa477f39b5a849c27d5e630e0db27	revert initialize the console pm state this reverts commit a86713b1536c818972675e6dd8c6e738f0379f1d kevin hilman writes multiple boot failures on arm1 were bisected down to this patch how was this patch tested and on which also the changelog states that this should be done only for uart_cap_sleep but the patch does it for every uart greg i suggest this patch be dropped from tty-next until it has been better described and tested __number__
c1c3a526bb4ddbec7639a9fb3b84fede25b201d9	separate function for opal irq setup the patch put the opal interrupt setup logic in opal_init into seperate function opal_irq_init for easier code maintaining the patch doesnt introduce logic changes except rename variable names release virtual irq upon error from request_irq dont cache the virtual irq to opal_irqs upon error from request_irq
acee29988e9a22a343728c36954d2ea6f9c0c970	remove pointless ddi_translations local variable dont need the ddi_translations local variable since all they with is assign and return just return the right thing directly and get rid of the local variable v2 resolve conflicts due to kbl
688538636bec2d49d6aae3f9c152216c7aafb8e7	arm pxa mioa701 add wm9713 codec the mioa701 is using the wm9713 for audio battery and touchscreen add the missing audio part which disappeared
c2dc6cc946aa8463e1e7676c8f82334c1dc8a01c	add a test that we terminate the trimmed sgtable as expected in commit trim the object sg table we expect to copy exactly across and allocate the table thusly the copy loop should therefore end with the new_sg being null
3525f5556a1b9e15cb1b796771f2c62deed7aa7a	pinctrl msm silence recursive lockdep warning if a driver calls enable_irq_wake on a gpio turned interrupt from the msm pinctrl driver well get a lockdep warning like so info possible recursive locking detected not tainted is trying to acquire lock at but task is already holding lock at other info that might help us debug this possible unsafe locking scenario cpu0 deadlock may be due to missing lock nesting notation __number__ locks held by at at at at silence it by putting the gpios into their own lock class
3c02d66b32679cd713b91de6827ee09fe26cf75b	input q40kbd remove redundant platform_set_drvdata commit device-core ensure drvdata null when no driver is bound removes the need to set driver data field to null
b3f68f16dbcde6fcdf0fd27695391ff7e9d41233	task_work revert hold task_lock around checks in keyctl this reverts commit d35abdb28824cf74f0a106a0f9c6f3ff700a35bf task_lock was added to ensure exit_mm and thus exit_task_work is not possible before task_work_add this is wrong task_lock must not be nested with write_locktasklist and this is no longer needed task_work_add now fails if it is called after exit_task_work link
e3251e0d7921fbedfe61cb237c6ce6c273bd93a7	stlye fixes just made it more neat and not bother
5f1a12f5d03ecd920e09c08e1b9fc1312a1d6da4	media pvrusb2 stop statically initializing reserved struct fields to zero in any statically initialized data structure the compiler is going to zero any part which is not already explicitly initialized while we can take that knowledge overboard and simply avoid initializing anything that needs to be zero its at least a good idea not to bother zeroing parts that we dont otherwise care about like reserved fields which may change in the future avoiding initialization of those fields now also avoids possible conflict down the road
2400a1f89d329ad8948c08e6e08fef33ce42f73b	media soc-camera protect against racing open2 and rmmod to protect against open racing with rmmod hold the list_lock also while obtaining a reference to the camera host driver and check that the video device hasnt been unregistered yet
87b723a16de9ff95e2b7d61dbd86bddd3c1716d9	dont check for idleness before retiring after a gpu hang when we force the cleanup after a gpu hang we want to retire all requests or else we may leak them if truly wedged and the gpu never advances again converting to the active request helpers had the issue of doing the check against busyness before reporting the request so if we claim the gpu had hung but this engine hadnt we could potential skip the request cleanup triggering the self-check bug
18d4a06f9bb013737b9c21921b15033afb0198d9	leds propagate error codes in blinkm_detect use the error codes from the lower levels instead of
d9bfbcc0c2bc15b9ce79e71a0b3d7e69a714d621	media v4l2-dev is always set so simplify code these days must always be set this means that some old code that still tests for a null can be removed or simplified
920e2ffbe243fb0555b2c238e26fe7dbc03db98c	staging comedi pcmuio pointers should be cleared with null pointer variables should be cleared with null on __number__ this quiets some sparse warnings about warning using plain integer as null pointer
4d4e1eef9a513437dad15d8d116a3f669e0d578d	staging lustre obd fix a coding style issue fixed a brace coding style issue for functions
9fe4df4db1350a5075b617bfda40b423f161bb6f	staging comedi usbdux tidy up usbdux_pwm_period rename the local variable used for the private data pointer to devpriv fix the fx2delay calculation so it does not use floating point values
2150489ffbd1cd6f5d1091c1738b1adfbdf34a43	make use of iio_sw_buffer_preenable this is not a fast path so although the original code was more consise use the generic case to cut down on code repitition
5034bfc976928b447cb6decd311d35161107a72f	use for private data management use for managing private data attached to a trigger instead of using a custom field in the iio_trigger struct
f9932c6e66c17ca3d84a7c6424c844bea8003ffb	mfd act8945a use devm_mfd_add_devices for mfd_device registration use devm_mfd_add_devices for mfd devices registration and get rid of callback to remove mfd child-devices this is done by managed device framework
880fa62648bf193eb17193a9eae00a52c7844ea7	zap call to drm_plane_helper_disable v2 the primary plane can still be configured when crtc is off furthermore this is also a noop now that affected planes are added on modesets changes since v1 move commit so no frontbuffer_bits warnings are generated
a78f6a4140f95cbedc0b28c4c883e8aa9ba044f1	i2c sh_mobile replace magic hex values with constants no functional change binaries are identical
4e9b551c14560399776c05f4234650c6d3729458	rds add rds_send_path_reset rds_send_path_reset is the path specific version of rds_send_reset intended for mp capable callers
cdfa0badfc8849ad1b7fc0188e17e2a0ede81ba9	xen switch to post-init routines in xen earlier with the virtual mapped linear p2m list the post-init mmu operations must be used for setting up the p2m mappings as in case of config_flatmem the init routines may trigger bugs paging_init sets up all infrastructure needed to switch to the post-init mmu ops done by xen_post_allocator_init with the virtual mapped linear p2m list we need some mmu ops during setup of this list so we have to switch to the correct mmu ops as soon as possible the p2m list is usable from the beginning just expansion requires to have established the new linear mapping so the call of xen_remap_memory had to be introduced but this is not due to the mmu ops requiring this summing it up calling xen_post_allocator_init not directly after paging_init was conceptually wrong in the beginning it just didnt matter up to now as no functions used between the two calls needed some critical mmu ops alloc_pte this has changed now so i corrected it
a74b0c481589762f28f35a26b2c77126f38de652	remove wafbcdisabledpfcclockgating on ivb production ivb does not need it i confirmed this with art
7f6cd6c40d7bf3c640294359a8a835d03c94d634	media adv7604 check v4l2_of_parse_endpoint return value the v4l2_of_parse_endpoint function can fail so check the return value
56de55a1a8fcabf8b3f6a64eedd3b6079b1f2fc7	use explicit limit for vram_contiguous split vram wont have a valid offset so just set an explicit limit when the flag is given to trigger reallocation if necessary
1bc05e77db1b0c2f5ec3917a9b21d64c01342b5f	media s5p-fimc fix image flip setting fimc_reg_citrgfmt_flip_x_mirror bit causes x-axis image flip vertical flip and thus it corresponds to v4l2_cid_vflip likewise setting fimc_reg_citrgfmt_flip_y_mirror bit causes y-axis image flip horizontal flip and thus it corresponds to v4l2_cid_hflip currently the driver does x-axis flip when v4l2_cid_hflip is set and y-axis flip for v4l2_cid_vflip fix this incorrect assignment by setting proper fimc_reg_citrgfmt register bits for and
731857715f03035c812c3f6bdcb6b0179150c1aa	input regulator-haptic fix module autoload for of platform driver this platform driver has a of device id table but the of module alias information is not created so module autoloading wont work
33dde2bfe8ca97bdd8253bc0496482b048fa0b32	nl80211 allow the use of dfs channel in mesh this permits the use of dfs channel once the cac is conducted and no radar is detected
5f17482a3244c07646279d16c0e5b8c0b2b76d0e	asoc wm8978 enable symmetric rates wm8978 needs __number__ the will be strange without this patch when it used asymmetric rate in same time
cdaf0b835df04177397b90214f8b457fd23b67e0	net lpc_eth fix rename of dev_hw_addr_random in parallel to the integration of dev_hw_addr_random has been renamed to eth_hw_addr_random this patch fixes it also in the new driver
b343ca84b4e3ba65508503333c923a797801a588	revert veth showing peer of veth type dev in ip link kernel side this reverts commit as per stephen hemminger the layout of the netlink attribute is not implemented correctly so revert this for now
7def52b78a5fda14864aab9b6fd14f09a4d4ff72	dm integrity fix to not interrupts from interrupt context use spin_lock_irqsave and spin_unlock_irqrestore rather than in submit_flush_bio otherwise lockdep issues the following warning warning cpu __number__ pid __number__ at
dce90d47c4288c7d3c1988bebb059ea7451d5fd5	workqueue introduce put_pwq_unlocked factor out lock pool put_pwq unlock sequence into put_pwq_unlocked the two existing places are converted and there will be more with numa affinity support this is to prepare for numa affinity support for unbound workqueues and doesnt introduce any functional difference
ef934e89f5e68535c447789b74de42cf389e55de	can cc770 dont touch skb after netif_rx there is no guarantee that the skb is in the same state after calling net_receive_skb or netif_rx it might be freed or reused not really harmful as its a read access except you turn on the proper debugging options which catch a use after free
d16efa0626bfd11157d4a622a24aaae98435f26d	alsa close holes in struct snd_pcm_hw_rule on a system there are two holes due to the alignment of fields reordering things slightly gets rid of those holes reducing the size of the struct by percent of its original size
8144f1f69943f447fd1bcb2d26ca011002d5df63	locks show delegations as deleg in now that they are a distinct lease type show them as such
c15c928f36a2710746c2b945067215f436f45544	nfs remove unneeded null pointer check in nfs4_remote_mount data is never null here
b7e2d195cc523bd92ed7a64aac089421dbab2a2d	ssb mark ssb_bus_register as __maybe_unused the soc variant of the ssb code is now optional like the other ones which means we can build the framwork without any front-end but that results in a warning warning ssb_bus_register defined but not used this annotates the ssb_bus_register function as __maybe_unused to shut up the warning a configuration like this will not work on any hardware of course but we still want this to silently build without warnings if the configuration is allowed in the first place
439aa0efd7a4a9ac225e94feee03824101c7d38e	mmc mxcmmc add missing dma_async_issue_pending
c6f0b9f195416e2d3c474e51190b6aa0c238aa36	remove redundant return in bitmap_checkpage the return __number__ is not needed since bitmap_checkpage will finally return __number__ for the case
0735f2fc8c49f1fbbbb245d038582922984ed3d5	bnx2x init fw_seq after undi_unload is done
68bee6157384017521e881c9436b3b6336cfac96	remove bxt disable pixel mask clamping this wasetdisablepixmaskcammingandrhwoincommonslicechicken was only used for preproduction hw which is no longer in use remove the workaround to simplify the code
04b7d704c6160fa4e8eeffc8540575fb15142f7f	hwrng octeon use devm_hwrng_register use resource managed function devm_hwrng_register instead of hwrng_register to make the error-path simpler also remove octeon_rng_remove as it is now redundant
91dc95427a0d30ac2c58d6e943c7f40a3f25d908	rcu protect accesses with access_once a number of accesses dont have access_once but all of the can race against other loads or stores this commit therefore applies access_once to the unprotected accesses
2a4d59625bf0f0ae57d6fecf5970ca03613f5db8	phy rockchip-typec add pm runtime support adds pm_runtime support for rockchip type-c so that power domain is enabled only when there is a transaction going on to help save power
d91940818d81ca1761de855c17f3528b3ec7eabe	qed set hw-channel to ready before acking vf when pf responds to the vf requests it also cleans the hw-channel indication in firmware to allow further vf messages to arrive but the order currently applied is wrong the pf is copying by dmae the response the vf is polling on for completion and only afterwards sets the hw-channel to ready state this creates a race condition where the vf would be able to send an additional message to the pf before the channel would get ready again causing the firmware to consider the vf as malicious
76ec8d64ce50acc8a159740b08a721b7259f9ae7	replace raw bit ops with functions in preparation for adding event channel port ops use set_evtchn instead of sync_set_bit
45555706d2361088c9e1209638b6ade0bb4bdd41	staging rtl8723au remove no-op function dm_checkstatistics
dffe87cd683b51bda103255a163bbeb5e46f9e36	staging comedi dt2814 remove use of comedi_error the comedi_error function is just a wrapper around dev_err that adds the prefix to the message and a terminating new-line character the addition of the driver_name is just added noise and some of the users of comedi_error add unnecessary additional new-line characters use dev_err directly instead of comedi_error to avoid any confusion and so that all the comedi generated kernel messages have the same format
e1e746b3c55d1d1e0841a2e600a154d8f6747232	kvm disable smap for guests in ept realmode and ept unpaging mode smap is disabled if cpu is in non-paging mode in hardware however kvm always uses paging mode to emulate guest non-paging mode with tdp to emulate this behavior smap needs to be manually disabled when guest switches to non-paging mode
bf14e65cb750be9837c8b0f61471145a03ba4a36	ath10k enable per-vif sta powersave per-vif should be used to configure powersave
02d88fb4fb6a580b0224b3bf07bbfd9d4806f6fb	gianfar fix tx csum generation errata handling both etsec76 and etsec12 errata relate to tx checksum generation for some mpc83xx and mcp8548 older revisions they require the same workaround manual checksum computation and insertion and disabling the tx csum acceleration feature per frame through tx fcb frame control block csum offload settings the workaround for etsec76 needs to be fixed because it currently fails to disable tx csum insertion via fcb this patch fixes it and provides a common workaround implementation for both tx csum errata
b91eee8cd8a547e43e271e5908e16c4a53c9416d	drm remove remove the struct hdmi_vmode members which are only used within a single function we can directly reference the appropriate instead
ef6acf68c259d907517dcc0ffefcd4e30276ae29	netfilter ctnetlink fix error return code in init path initialize return variable before exiting on an error path a simplified version of the semantic match that finds this problem is as follows return ret __number__ when ret e1 when when ret e2 when forall return ret
b5c050c719922901891bdd8580d224e2a0035db5	pwm lpss allow duty cycle to be __number__ a duty cycle is represented by values which reflects of the duty cycle means always off logical __number__ on output allow this in the driver
2678aeba5fe1a799788cce2a34003d8fa6ad7153	dont disable unused planes when a plane isnt in use it isnt attached to a crtc and therefore the dc registers arent available for programming
346dbb79ea0118ebb0df372b35cab9d5805216cd	irqdomain export irq_domain_add_simple all other functions are exported already and apparently this one got left out by mistake which causes build errors for arm allmodconfig kernels error irq_domain_add_simple undefined error irq_domain_add_simple undefined
06b241f32c711d7ca868a0351dd97fe91fd8817b	mm __delete_from_page_cache show bad page if mapped commit e1534ae95004 mm differentiate page_mapped from page_mapcount for compound pages changed the famous bug_onpage_mappedpage in __delete_from_page_cache to vm_bug_on_pagepage_mappedpage which gives us more info when but nothing at all when not although it has not usually been very helpul being hit long after the error in question we do need to know if it actually happens on users systems but reinstating a crash there is likely to be opposed in the non-debug case pr_alertbug bad page cache plus dump_page dump_stack add_taint i dont really believe lockdep_now_unreliable but that seems to be the standard procedure now move that or the vm_bug_on_page up before the deletion from tree so that the unnullified gives a little more information if the inode is being evicted rather than truncated it wont have any vmas left so its safeish to assume that the raised mapcount is erroneous and we can discount it from page_count to avoid leaking the page im less worried by leaking the occasional than losing a potential page with each page leaked
d9048cdbc9ed3103eef95adfe29f6482d23b1316	pinctrl stm32 constify gpio_chip structures these structures are only used to copy into other structures so declare them as const the semantic patch that makes this change is as follows disable identifier i position p static struct gpio_chip identifier expression e position p e position p identifier struct gpio_chip e on disable identifier static struct gpio_chip i
7b4e0c4ac1809eab6fcfe6818ec8b70be79b41bc	acpi pm remove redundant power manageable check from acpi_bus_set_power now that acpi_device_set_power checks whether or not the given device is power manageable it is not necessary to do this check in acpi_bus_set_power any more so remove it
87683e22c646e563061a91f4a0106e6913acebf8	pci pciehp always implement resume regardless of pciehp_force param previously the driver ignored resume unless the pciehp_force module_param was specified on some laptops that means that interrupts are not delivered after s3 so card removals and insertions are not handled this patch makes the driver handle resume regardless of pciehp_force bhelgaas changelog
a2b7cbdd2559aff06cebc28a7150f81c307a90d3	netfilter ctnetlink make some parameters integer to avoid enum mismatch not all parameters passed to ctnetlink_parse_tuple and ctnetlink_exp_dump_tuple match the enum type in the signatures of these functions since this is intended change the argument type of to be an unsigned integer value
09378d7c21a806d5ddb75ebcae242d98cea30e44	the incompatible pointer type warning in fix the definition of the function ccount_read to be compatible to the member read of the structure clocksource
3541e349e18eeacbe8e5e97ed984f018be4cfdaf	media vivid fix broken bayer text rendering sometimes when a bayer pixelformat is selected the rendering of the osd text by vivid was all wrong every other line of the text was shifted by half the width or more it turned out that to render bayer formats the interleaved boolean is set to true in the tpg this mode indicates a semi-biplanar mode where two interleaved planes are used to render the frame from outside the tpg it looks like a single plane but internally it is two planes however in the tpg_s_bytesperline function the interleaved bool wasnt checked and only the bytesperline value for plane __number__ was updated but for the interleaved mode the same value has to be copied to bytesperline1 as well the effect was that whatever old value was left in bytesperline1 was used which caused all sorts of weird and seemingly unpredictable shifts
9b545df809644912552360054c7bbe8b8a9e01fa	uprobes fold xol_alloc_area into get_xol_area currently only xol_get_insn_slot does get_xol_area xol_alloc_area but this will have more users and we do not want to copy-and-paste this code this patch simply moves xol_alloc_area into get_xol_area to simplify the current and future code
1adb7d31b051cd97fbb75c46772b00c13ec29c9e	fix pci_request_acs call-place the pci_request_acs function needs to be called before pci probing to be effective so move it to another call-place to ensure that
e80f14b6d36e3e07111cf2ab084ef8dd5d015ce2	dont rs when not used v2 fix conflict on rebase
ed36bfc3b0a033362200aae699c8a2148fe2f04f	i2c iproc fix typo in the driver fix typo in the driver from i2c_timeout_mesc to i2c_timeout_msec
17f14b51f2dc2fce2636ee49c5fbf49ff27aecb0	pci delete unnecessary null pointer checks the pci_dev_put function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
9eebfe478d1b83389c3ac1bd73a45b6665e356db	mips bpf add seen_skb to flags when looking for the pkt_type the skf_ad_pkttype uses the skb pointer so make sure its in the flags so it will be initialized in time patchwork
41eedf39dfb145fb8fa04cd5b799f7bdc7679696	rndis_wlan integer overflows in rndis_wlan_do_link_up_work if offset is negative then we can get past this check if offset control_buffer_size or if we pick a very high req_ie_len then we can get around the check if offset req_ie_len control_buffer_size i made resp_ie_len and req_ie_len unsigned i dont know if it was intentional that they were signed in the original
6d3c15da1ddbffff2d0f50132a239209b2fa138e	bluetooth remove unnecessary braces from one-line if-statement this patch is just a trivial coding style fix to remove unnecessary braces from a one-line if-statement
3fe4f900bf3061b3994c56eea497d8a839241277	mtd nand sh_flctl handle dma_submit errors some build tools noticed that cookie is being set but not used might as well catch the errors here and handle them the same way we handle other dma prep steps
9b0a1de3c85d99d881c86a29b3d52da7b9c7bd61	usb musb gadget fix otg active status flag in gadget mode should be set only when connected to the host musb_g_reset already takes care of it
a0f8eefb127f5be07628954f310a7fc8c82b2fc3	rcu remove redundant return from rcu_report_exp_rnp empty void functions do not need return so this commit removes it from rcu_report_exp_rnp
86f46aba8d1ac3ed0904542158a9b9cb9c7a143c	protect against self-requeue of a cq work item we need to make sure that the cq work item does not run when we are destroying the cq unlike flush_work cancel_work_sync protects against self-requeue of the work item which we can do in ib_cq_poll_work
c297977ec18deb36b2c0a5ee57101f7ab736ec00	be2net fix to parse rss hash from receive completions correctly wrong pointer variable is being used to parse the rss hash from receive completions leading to corrupted rss_hash values filled into skb
a04278096c14922bf7c701afe5c0c648d427a14d	brcmfmac minor optimization of brcmf_sdbrcm_txpkt function when taking care of packet alignment to boundary padding may be added between sdpcm header and cdc data it clear both sdpcm header space and padding space changed it to only clear padding space in filling the sdpcm header it uses unaligned access to set sdpcm software header but preceding code assures it is properly aligned change-id iad22f277f3496440ba4d2db771205714774570ac reviewed-on
4a4e07c1bdbbc24d905e4c266b92cada9371db5d	ocfs2 call o2quo_exit if malloc failed in o2net_init in o2net_init if malloc failed it directly returns then o2quo_exit wont be called in init_o2nm
09dcd1958be42ea473fef24a2c02d975f520ea71	soc support for nps hw scheduling this new header file is for nps400 soc part of arc architecture the header file includes macros for of hw scheduling the control of hw scheduling is achieved by writing core registers this code was moved from so it can be used from available only for config_eznps_mtm_ext
68c2e5de360411674d9821ee2b46f5d8ee965161	af_packet make tpacket_rcv to not set status value before run_filter it is just an optimization we dont need the value of status variable if the packet is filtered
33c388b81ce4b2f249730014b9b9f103a7578ca2	fix possible memory leak in ap_module_init ap_configuration is malloced in ap_module_init and should be freed before leaving from the error handling cases otherwise it may cause memory leak
7ba0eb6df96ab8e57d791ccd1215339c31538e5d	clean up polaris11 pg enable fix the logic for
434ed7f4b08fb8c23bdfabbb1f9427f2ed9ec27c	arm64 fix up obsolete cpu function usage thanks to spatch
d8b2ba7c5928173fe1c12bd2545f5ed85d1c3c7a	destroy ocrdma_dev_id idr on module exit destroy ocrdma_dev_id idr on module exit reclaiming the allocated memory this was detected by the following semantic patch written by luis rodriguez defines_module_init declarer name module_init module_exit declarer name define_idr identifier init module_initinit defines_module_exit identifier exit module_exitexit declares_idr depends on defines_module_init defines_module_exit identifier idr define_idridr on_exit_calls_destroy depends on declares_idr defines_module_exit identifier exitvoid missing_module_idr_destroy depends on declares_idr defines_module_exit identifier exitvoid
b6e0a70898970a6f0d8d3e6e610b4ae96077ad9d	staging unisys fix camelcase for function names in this patch fixes camelcase function names in reported by the checkpatch script dodiskaddremove do_disk_add_remove senddiskaddremove send_disk_add_remove
a50396a40fa796787eeef7143d17268dbecc79ef	mmc sdhci-msm factorise sdhci_msm_pdata outisde of sdhci_msm_host theres no need to allocate one sdhci_msm_pdata for each sdhci_msm_host this patch removes the sdhci_msm_pdata member from sdhci_msm_host and uses one static global sdhci_msm_pdata for all sdhci msm hosts it also marks sdhci_msm_ops as const
cfd19c5a9ecf8e5e38de2603077c4330af21316e	mm only set when alloc_no_watermarks was used __alloc_pages_slowpath is called when the number of free pages is below the low watermark if the caller is entitled to use alloc_no_watermarks then the page will be marked this protects more pages than are strictly necessary as we only need to protect pages allocated below the min watermark the pfmemalloc reserves this patch only sets when alloc_no_watermarks was required to allocate the page david noticed the problem during review
064931abb5cf173913edd54575f208bd7a41f4a7	arm omap3 hwmod data fix iva interface clock the omap3 hwmod data listed iva2_ck as an interface clock between the iva and l3 this is incorrect iva2_ck is not an interface clock since it cannot auto-idle specifying it here prevents the iva and at least one of the core clockdomains from going idle which causes pm problems such as these upon system suspend __float__ powerdomain iva2_pwrdm didnt enter target state __number__ __float__ powerdomain core_pwrdm didnt enter target state __number__ fix by specifying the actual interface clock in the hwmod data
eb8fc32354aa77678dc6e7950a8f0c79cace204f	mlxsw spectrum_router fix use after free in mlxsw_sp_router_fib4_add_info_destroy the fib_entry pointer is used after it has been freed by mlxsw_sp_fib_entry_destroy use a temporary variable to fix this
7c287f1849cd904c210608a6a7bcec055bcb1152	media xc5000 add support for showing the snr and gain in the debug output when debugging is enabled also show the analog snr and the total gain status values
8b5de0ebe420aa57f962dcd9777298d3ae55953f	clean up psp reload_quirk
9e4278cd9b8e6e6464a4eb5e65c2b232076aa6c6	asoc intel skylake create asoc jack for hdmi in nau88l25_ssm4567 machine creates asoc jack for hdmi pcm and calls hdmi codec api to initialize jack in skl_nau88l25_ssm4567 machine
82e76ed38edbdb338d64f5f2486fcd1482c8859a	asoc rsnd src add rsnd_src_of_node this patch adds rsnd_src_of_node to get src subnode from dt this is prepare for new dt bindings for dmac
8aaa414fadaec2b682168a5c937a3950a77956bf	asoc alc5623 fix regmap endianness commit asoc alc5623 convert to direct regmap api usage broke probing of the codec because of wrong endinness of the id and codec version read from the device fix this by removing the existing flipping of the endiannes and extracting the codec type byte from the word from the regmap
f34e432b673781175c782fa8c5a619114340ba38	nfsd4 fix write reply size estimate the write reply also includes count and stable_how
5271156b1a93eeb9a1a48d8a4be5074b3c31a5cd	net thunderx bgx0 configuration changes on only one lane of dlm0 and dlm1 of bgx0 can be used so even though lmac count may be __number__ but lmac1 should use serdes lane of dlm1 since its not possible to distinguish from as pci devid are same this patch adds this config support by replying on what firmware configures the lmacs with
9de1bc875261411bf0a900e90cfe0c7a31c4917b	mm slab_common add unlikely to size check of kmalloc_slab size is usually below than kmalloc_max_size if we add a unlikely macro compiler can make better code
1b737f88dc1b05cf571e96d42f748aaff6df1eb5	mac80211 fix p2p-device management frame rx theres an issue in receiving broadcast management frames on p2p device virtual interfaces such frames have the rx flag ieee80211_rx_ra_match cleared and are thus dropped in ieee80211_rx_h_mgmt_check they should be let through to make it to ieee80211_rx_h_userspace_mgmt and then to userspace
ba2d084055fd3f67af120070f5620173efd867c8	btrfs sysfs fix typo in compat_ro attribute definition
4a1a99712a8a13d97e9de818869bf1b88583d6bc	perf top setup signals for terminal output the tui code setup standard signals handling while the stdio display code does not this leads to premature termination of display thread when signal is received and leaving terminal in wrong state also adding terminal cleanup at the end of display thread to ensure we get the old terminal state in case of signal interruption link
68d1b02a58f5d9f584c1fb2923ed60ec68cbbd9b	do not set preferred_node on migration to a second choice node setting the numa_preferred_node for a task in task_numa_migrate does nothing on a system either we migrate to the node that already was our preferred node or we stay where we were on a system it can slightly decrease overhead by not calling the numa code as much since every node tends to be directly connected to every other node running on the wrong node for a while does not do much damage however on an __number__ node system there are far more bad nodes than there are good ones and pretending that a second choice is actually the preferred node can greatly delay or even prevent a workload from converging the only time we can safely pretend that a second choice node is the preferred node is when the task is part of a workload that spans multiple numa nodes link
a44b45f236dd1c1a8caccf9a078adf2941a20267	perf annotate browser the idx_asm field should be used in asm only view when hide_src_view is true we cant use that takes into account also non asm lines we must use instead otherwise we may end up with an index after the number of entries oops fix it link
cf880248c56495a5e616cde226d7c85972a3218c	ia64 cant reach do_signal when returning to kernel mode
f7233c5491156bc530ed965d4fabc55db35f2e37	i40e some fd message fixes change the message that gets printed when a filter to the sb so that user can tell if a filter was added or deleted print filter add failures only in case of sb filters for atr the information is not useful to the user and hence suppress it unless in higher debug mode change-id i78d7a7a6ecfa82a38a582b0d7b4da038355e3735
ce30c4fe1a229bffab3fe3594306f332e120c199	ath10k replace warning with an error message if htt op version is unset print an ath10k error message rather a call trace when htt op version is not found from firmware meta data ie this should be sufficient to figure out what went wrong
6d3c730f03e0d1aed2125c1a64ad8857c63f5163	bluetooth use lmp_ssp_capable macro make the check more user friendly
b1116dcc63a91ee79a122abea025aab15ea2c8e7	usb dwc3 core convert to module_platform_driver use the module_platform_driver macro
0c460a55dd97b639202d6152979669c8951522cd	imx-drm ipuv3-crtc implement mode_fixup ask the ipu display interface via ipu_di_adjust_videomode to adjust a video mode to meet any di restrictions the function takes a subsystem independent videomode so the drm_display_mode must be converted to videomode first and then the adjusted mode converted back to a drm_display_mode
41add2e84bff0c887949698e01dab28105f11a6b	staging comedi ni_pcidio mark buffer for writing when setting up dma when setting up the dma for read streaming acquisition on the dio subdevice mark the whole buffer as writable before starting the dma this prevents a spurious detection of a dma overwrite of good data during the first interrupt problem reported by nicholas nell fix suggested by frank mori hess
9e7b399d6528eac33a6fbfceb2b92af209c3454d	serial imx remove unbalanced clk_prepare the current code attempts to prepare clk_per and clk_ipg before using the device however the result is an extra prepare call on each clock here is the output of uart clocks only uart enabled and used as console grep uart uart_serial __number__ __number__ __number__ __number__ __number__ uart __number__ __number__ __number__ __number__ __number__ this patch balances the calls of prepares the result is grep uart uart_serial __number__ __number__ __number__ __number__ __number__ uart __number__ __number__ __number__ __number__ __number__
d33c33352b3228ca3a422e55981f80fc12dc30f8	asoc cq93vc use regmap for avoid use of the asoc-specific register functions by converting to use the mmio regmap provided the core mfd
634ffdd9ef91b1a6252347276bed77d3d73b0b9a	staging lustre llite remove useless cast on void pointer the semantic patch used to find this is expression x e type t identifier f t t t e
c55bfa67e94e22ec0449fe7c55b3ef20fbe13348	btrfs set dead flag on the right root when destroying snapshot we were setting the btrfs_root_subvol_dead flag on the root of the parent of our target snapshot instead of setting it in the target snapshots root this is easy to observe by running the following scenario mount btrfs subvolume create btrfs subvolume snapshot btrfs subvolume delete btrfs subvolume snapshot btrfs send the send command failed because the send ioctl returned a test case for xfstests follows
04405784591117539eac4f5348c86d66dc0dd4f1	tools hv gather subnet information now gather sub-net information for the specified interface
b38be288140c3d5317bf55439cd3d6fd6395a98e	mtd sst25l use devm_kzalloc devm_kzalloc is device managed and makes code simpler
d3014e21e18bfaf5b22144a45c399c8eb21aaba9	enable irqs on error path we need to re-enable the irqs here before returning
c97926dd8d7cc094830b253afc817cbf406c0de7	mtd mxc_nand add mx53 nfc driver support this has already been tested with samsung nand k9lag08u0m on mx53evk board has already been tested ok too
109582af18b9aade9385ea6609a792f80a7d70ca	netns returns always an id in __peernet2id all callers of this function expect a nsid not an error thus returns netnsa_nsid_not_assigned in case of error so that callers dont have to convert the error to netnsa_nsid_not_assigned
28405212b5f972c8a9f666a5bcd1abdcb4a5dd5a	asoc samsung convert s3c24xx_uda134x to use devm_snd_soc_register_card suppreses a following kernel warning soc-audio soc-audio asoc machine s3c24xx_uda134x should use snd_soc_register_card
829a5071ccf040b78bd93286a218580c66833b00	bnx2x fix a power state test if pcie supports pm capabilities bnx2x will always claim eeprom is accessible as pci_d0 is zero
fcd70eb50e2d572a67839410aa30f6b545355980	asoc mxs-saif use devm_snd_soc_register_component devm_snd_soc_register_component makes code simpler
adc0c3e87b0e1baeccabe09b6dba738f17d0e91d	perf evlist factor out a function to propagate maps for a single evsel subsequent fixes will need a function that just propagates maps for a single evsel so factor it out link moved them to before perf_evlist__add to avoid having to move it in the next patch
7d6c429b263c2f735f3df8c282cc77a8659e5d74	irda use msecs_to_jiffies rather than manual calculation also use mod_timer instead of direct assignment to expires
b9840124d699614f1429748e43827b1fb35c1138	asoc imx-sgtl5000 use devm_clk_get commit asoc sgtl5000 let the codec acquire its clock removed the clk_put calls lets use devm_clk_get instead so that we do not need to call them anymore
b9a348cb12f3925a27fcf0a38a146b40978588d0	arm opcodes add instruction encoding enabling boot from hyp mode requires the use of some more virt-specific instructions eret and msr elr_hyp reg add the necessary encoding to
45777c49ec376f5325e9ebbca85ee3e71697b0d2	wl18xx alloc memory to ensure alignemnt we get dma alignment trouble if the beginning of the struct is not aligned to __number__ bytes use kmemdup to ensure alignment
fc75ba5159a63fad40442b9a9527a0f9b06de79b	net fec improve error handling unmap initial buffer on error dont free skb until it has been unmapped move cbd_bufaddr assignment closer to the mapping function
b9a1b7179cde240abf67a613f2a67be7c56cc59f	i915 dont call drm_atomic_state_put on invalid pointer the introduction of reference counting on the state structures caused sanitize_watermarks in i915 to break in the error handling case as pointed out by gcc in function error may be used uninitialized in this function this changes the function back to only drop the reference count when it was successfully allocated first link
237ec70903bcf50768138b6c663c67ef1f946cc8	dmaengine mpc512x fix hanging dma device transfer for mpc8308 since the mpc8308 has no external request lines to initiate dma transfers all transfers must be triggered by software because of this the current implementation of dma transfers from and to devices on mpc8308 socs using major and minor loops is faulty after the completion of the first major loop the dma engine resets the start flag in the channels tcd thus halting the transfer the driver would have to set the start bit again to trigger the next iteration of the major loop on mpc512x socs this is done via the external request lines so in this case the driver doesnt have to interfer in any way this has the effect that on mpc8308s every dma transfer to or from a device hangs after executing the first major loop the patch fixes this behavior by using just one major loop for the whole dma transfer on mpc8308s
c3fe5872eb3f5f9e027d61d8a3f5d092168fdbca	bfs correct return values in case of failed memory allocation the return should be enomem instead of enospc return when sb_bread fails
832b404ea0f48a57f1099327cd3137e9a6a51f88	consolidate chained irq handler chained irq handlers usually set up handler data as well we now have a function to set both under replace the two calls with one search and conversion was done with coccinelle expression e1 e2 e3 irq_set_handler_datae1 e2 __number__ bug e2 e3 e3 e2 expression e1 e2 e3 irq_set_handler_datae1 e2 __number__ bug e2 e3 e3 e2
ac33fbb86578c5587eb5904e66b9ea3ec99c78aa	staging most hdm-usb initialize variables by declaration this patch moves initialization of the variables to the declaration where possible
b8b0e465ddb0c9cb16089ddfed68a8569e006465	mtd nand gpmi may use minimum required ecc for __number__ oobsize nand by default nand driver will choose the highest ecc strength that oob could contain in this case for some nand flash the ecc strength will be up to which beyonds the bch capability this patch allows the nand driver try to use minimum required ecc strength if it failed to use the highest ecc even without explicitly claiming in dts
97191d734f6ac028e5e6dcd574378c1544a16c0b	i2c-designware use div_u64 to fix link this fixes the following link error in function dw_i2c_probe undefined reference to __aeabi_uldivmod make vmlinux error __number__
c281735c52623e46cdef4b7cc74e81d117e944da	remove empty function after the switch to functions and the removal of rtc_device_unregister the remove function does not do anything delete it
9291975d6647794710553630c2613b5658c81d3f	staging line6 eliminated remaining strict_strouls eliminated remaining calls to strict_stroul and replaced them with strict_kstrtou8
832fd395ce61710c82d871196f7c7cd41fb076b6	drm fix getconnector connection_mutex locking ive fumbled my own idea and enthusiastically wrapped all the getconnector code with the connection_mutex but we only need it to chase the link even there its not really needed since races with userspace wont matter but better paranoid and consistent about this stuff if we grap it everywhere connector probe callbacks cant grab it themselves which means theyll deadlock i915 does that for the load detect pipe furthermore i915 needs to do a ww dance since we also need to grab the mutex of the load detect crtc this is a regression from commit date thu may __number__ __number__ drm split connection_mutex out of v3
27ae296716e527e5e5f0b54bc92739a2864d2b9a	ixgbevf use pci drvdata correctly in ixgbevf_suspend we had set the pci driver-specific data in ixgbevf_probe as a type of struct net_device so we should use it as netdev in ixgbevf_suspend
380013fc9442f65d5b898fc168e9994049ea2937	ath9k remove unused structure ath_dbg_bb_mac_samp
c0dfbfe2a7ca401aaadf00dbab4e597027125e11	mfd tps65910 make of_device_id array const make of_device_id array const because all of functions handle it as const
0665ccc4c3f229abe3eabe49f3f99763515cf0af	clocksource convert down counting clocksource on convert the down-counting clocksource to the generic mmio clocksource infrastructure
18273b05def692d1883745d22e72fa275bc92c17	asoc wm8580 move regulator acquisition to i2c probe better style as we get all the resources we need prior to starting the asoc level probe
23b7840a1b1327fbcc2599e33f50b26d263d5328	ath6kl minor cleanup in ath6kldev_submit_scat_req
86aed6765c2c71d8e86b7d43f8ec64ac638ef2a2	drm remove unused variable in drm_pick_crtcs
3372ec28622083ac87daf18918a222fbee06f6f9	vt use msecs_to_jiffies for time conversion converting milliseconds to jiffies by val hz __number__ is technically ok but msecs_to_jiffiesval is the cleaner solution and handles all corner cases correctly this is a minor api consolidation only and should make things more readable
eb119bd612906519cacef2536a9a524c2da5f7fb	access to snooped system memory through the gtt is incoherent we ignore all the user requests to handle flushing to the gtt domain if the user requests such on a snoopable bo and as such access through the gtt to such pages remains incoherent the specs even warn that such behaviour is undefined a strong reason never to do so
c99b6841d74a5c7d3698cc2a3ec44241fe64b769	omfs convert to use bexx_add_cpu convert cpu_to_bexxbexx_to_cpue1 e2 to use bexx_add_cpu dpatch engine is used to auto generate this patch
2fd40d2d349f0faf49460b4eca3f49dfe9094619	mwifiex update command response skb length correctly same skb is being reused for storing command response from firmware in pcie chipsets there was a bug while updating the skb length this patch ensures skb length correctly gets updated based on rx_len
bae636eb5a5cb52b67753bd89dc2887cc582f58b	staging wilc1000 rename bisenabled of struct set_multicast this patch renames bisenabled of struct set_multicast to enabled to avoid camelcase naming convention
b6719412dc28458f3c142a27bf3e0d2ab3ce0573	mfd use devm managed resources for tps6586x allocate memory for device state using devm_kzalloc to simplify accounting and letting the kernel do the garbage-collection
d79cca1a994f6f4f1cf3d92909f2a73df6b84874	asoc max9768 use managed gpio request makes the code a bit shorter and simpler
a54e78088974e26770337bfafecced497e64ac2c	staging unisys include removed unused function declarations this patch removes the unused function declarations in
45078ea03f169ddb1bf13aceba748c4bfca524ac	pinctrl ssbi-mpp use devm_pinctrl_register for pinctrl registration use devm_pinctrl_register for pin control registration and clean the error path
2bcdcbfae2895764372ef973a969f395a548f1ea	dc syncpoint at syncpoints are resources provided by host1x and their lifetime is tied to the host1x device they are not properly reference counted either so removing the host1x device before any of its clients causes a use-after- free error adding proper reference counting would be a major enterprise so work around it for now by requesting and freeing the syncpoint at init and exit time respectively the host1x device is guaranteed to be around at this point
22b3c181c6c324a46f71aae806d8ddbe61d25761	arm dma-mapping limit iommu mapping size arm_iommu_create_mapping has size parameter of size_t and arm_setup_iommu_dma_ops can take a value higher than that when this is called from the of code so limit the size to size_max
17e8b42c17c3e9735ea03c4e6b67cedf5de170f4	interrupt pin is active-low the interrupt pin of the pca953x is active low and on the rising edge no interrupt should be produced
c9f721b2f3168a0a3b1cc29e92ad1f6f3d62e376	usb gadget s3c-hsotg stall ep0 in set_halt function when s3c_hsotg_ep_sethalt function is called for ep0 it should be stalled in the same way that it is in s3c_hsotg_process_control function because set_halt for ep0 is delayed response for setup request endpoint __number__ if halted it doesnt need clear_halt because it clears stalled state automatically when next setup request is received for this reason this patch moves code setting ep0 to stalled state to new function named s3c_hsotg_stall_ep0 which is called in s3c_hsotg_process_control function as an immediate response for setup request and in s3c_hsotg_ep_sethalt function as a delayed response for setup request
79c3f971d9ba718db6533c85b6d09edc6e47cd69	staging unisys visorbus chipset_init add error handling controlvm_respond_chipset_init now errors out correctly pass the errors back up to the stack to be processed
3fd94f37da000a2b562a3f4e6c553b7ab1ad9e19	asoc tobermory register jacks at the card level the jacks are card level elements so use snd_soc_card_jack_new instead of snd_soc_jack_new to register them
ff974e4083341383d3dd4079e52ed30f57f376f0	wil6210 debugfs interface to send raw wmi command debug aid
52722ca8c53243c2b3eb45731c01ec4d8d219f3b	media s5p-mfc set last buffer flag setting the last buffer flag causes the videobuf2 core to return from dqbuf calls on the capture queue after the last buffer is dequeued
43c3dd08da890e458f670b4fc0630513fb405620	dax bdev_direct_access may sleep the brd driver is the only in-tree driver that may sleep currently after some discussion on linux-fsdevel we decided that any driver may choose to sleep in its method to ensure that all callers of bdev_direct_access are prepared for this add a call to might_sleep
c03d996900f9d063b47ef7462885a9085c8a587f	mtd nand add nand_need_scrambling option flag some mlc nands are sensitive to repeated patterns and require data to be scrambled in order to limit the number of bitflips add a new flag to let the nand controller know about this constraint
ddb31d43cb20222f929b0d242bdb516de51b6c23	thermal exynos simplify temp_to_code and code_to_temp remove dead temp check from temp_to_code this function users in exynos_tmu_initialize always pass correct temperatures and exynos_tmu_set_emulation returns early for exynos4210 because tmu_support_emulation flag is not set on this soc move temp_code check from code_to_temp to exynos_tmu_read code_to_temp only user there should be no functional changes caused by this patch
85168d56cc8603963cfdda1e2b9e8f9b68aef867	pm domains simplify detaching a device from its genpd theres no need to validate the pm domain by using genpd_lookup_dev when removing the device via genpds genpd_dev_pm_detach function thats because this function cant be called unless there is a valid pm domain for the device to simplify the behaviour lets move code from pm_genpd_remove_device into a new internal function genpd_remove_device which is called from pm_genpd_remove_device and genpd_dev_pm_detach
2fb57f06319ec71c94d842281326aa575066f188	media media coda stop all queues in case of lockup add a __number__ second timeout for each pic_run command to the coda in case it locks up stop all queues and dequeue remaining buffers
e03a9a55b4e45377af9ca3d464135f9ea280b8f8	perf change close semantics for group events in order to always call list_del_event on the correct cpu if the event is part of an active context and avoid having to do two ipis change the close semantics slightly the current perf_event_disable call would disable a whole group if the event thats being closed is the group leader whereas the new code keeps the group siblings enabled people should not rely on this behaviour and i dont think they do but in case we find they do the fix is easy and we have to take the double ipi cost link
fdde1a82265ba635284c27f3ab65be461487ff00	intel_mid_powerbtn join string literals there is no need and bad practice for debugging to split string literals join them back
933bfb44b228f26e09364d122576c8e938588d4f	hold rpm reference while setting freq limits through sysfs this changes ensures device is active when frequency limits are changed this is needed as we are writing to register rpnswreq in intel_set_rps if not done might lead to undesired errors like __float__ blitter timed out waiting for forcewake ack to clear v2 added elaborate commit message jani fixing rpm reference drop in early exit paths ville link
2c932d4c9165ddbe417af612dbe2113df7f2057e	fuse fix return value from fuse_get_user_pages fuse_get_user_pages should return error or __number__ otherwise fuse_direct_io read will not return __number__ to indicate that read has completed
9d4c7d8799c418816342e263479fa010b182183e	removed unused added_devices variable commit removed the last user of this variable so we should discard it completely
f02b7d0c7b433b9a8175ac9027391272877a43ce	hwrng exynos fix unbalanced pm runtime currently this driver calls pm_runtime_get_sync rampantly but never puts anything back this makes it impossible for the device to autosuspend properly it will remain fully active after the first use fix in the obvious way
02bfd8ecf5cf980ede53e30a903b102924fc32f4	xfrm remove unused defines xfrm_replay_seq xfrm_replay_oseq and xfrm_replay_seq_mask were introduced years ago but actually never used
142b007b65aa763957627ea5c343a1001d5ed449	acpi add sdhci to acpi platform devices add the generic acpi sdhci device id to acpi_platform_device_ids to make the acpi core create a platform device object for the acpi device node of that id rjw added the changelog
0b9d9753155b9ed72e864592f9bf482a688c3c11	handle rmrrs for non-pci devices should hopefully never happen rmrrs are an abomination but while were busy eliminating all the pci assumptions we might as well do it
5ced937b7d8dae2c6a536112abaad6352769a931	disable planes before dc if the dc clock is disabled before the attached idmacs are properly stopped the idmacs may hang the ipu or even the whole system make sure the idmacs are in safe state by disabling the planes before removal of the dc clock also set the atomic parameter to false to stop calling the atomic_begin hook which does nothing useful as we immediately afterwards turn off vblank interrupts and possibly send the pending vblank event crtc and plane helpers
d0bac768fbe274f60d41d759c76f7ba2b2e98aeb	media mt9v022 support required register settings in snapshot mode some camera systems cannot operate mt9v022 in normal mode and use only the snapshot mode the technote for mt9v022 tn0960 and mt9v024 tn-09-225 describes required register settings when configuring the snapshot operation the snapshot mode requires that certain automatic functions of the image sensor should be disabled or set to fixed values according to the technote bit __number__ and bit __number__ in the register must be set in snapshot mode and unset for normal operation this applies for mt9v022 and mt9v024 add required reg settings dependent on sensor chip version
bdc80de2a6dbaa0d08c393b4ba8912a0ad4b047f	use is_err to check regulator_get return regulator_get never returns null theres no need for is_err_or_null
b6573da139ecbee6f2c77392b51266d4521d50ac	input synaptics-rmi4 prevent null pointer dereference in f30 if the platform data has set f30 in rmi_f30_config might be null prevent a kernel oops by checking for non-null f30
c090e111633cd82e4e0f72c7e964460676ad1250	arm tegra always lock the cpu reset vector currently the reset vector is not locked on tegra20 because the hardware doesnt support it however in order not to depend on the chip id which becomes available only later in the boot process we set the bit anyway
740134960811bdeadaf52d6155d8fea97470dcda	serial use null for pointers compare pointer-typed values to null rather than __number__ the semantic patch that makes this change is available in
0f500a5f6cadac888d5d3fce326452372d1a8343	cfg80211 move world roaming check for beacon hints we should not add new beacon hints even if the wiphy is not world roaming without this we were always adding a beacon hint if not world roaming for every non world roaming wiphy interface fix locking
4beac0293fabb68125e1a9d2ce81d89343f8702d	bonding fix system hang due to fast igmp timer rescheduling after commit net convert resend igmp to notifier event we try to acquire rtnl in bond_resend_igmp_join_requests but it can be scheduled with rtnl already held when bond_change_active_slave is called with rtnl causing a loop of immediate reschedules calls because rtnl_trylock fails each time since its being already held for me this issue leads to system hangs very easy modprobe bonding ifconfig bond0 up ifenslave bond0 eth0 rmmod bonding the fix is to introduce a small __number__ jiffy delay which is enough for the sections holding rtnl to finish without putting any strain on the system also adjust the timer in bond_change_active_slave to be __number__ jiffy since most of the time its called with rtnl already held
25add7ec708170e4eaef1f9793a07803b2fb5c71	kasan update log messages we decided to use kasan as the short name of the tool and kerneladdresssanitizer as the full one update log messages according to that
007890d726602c925077381500f0b633cfacd711	can janz-ican3 drop invalid skbs the commit which added the janz-ican3 driver and commit can unify droping of invalid tx skbs and netdev stats were committed into mainline linux during the same merge window therefore the addition of this code to the janz-ican3 driver was forgotten this patch adds the expected code
504fc0286d847a23aed30bea214a9e51802f0318	media stk1160 make some functions static as warned by gcc warning no previous prototype for stk1160_has_audio int stk1160_has_audiostruct stk1160 warning no previous prototype for stk1160_has_ac97 int stk1160_has_ac97struct stk1160
66c1a12c65c5bee2427b7813218d1279e4906084	socket use ki_nbytes instead of iov_length this field already contains the length of the iovec no need to calculate it again
dd01d7d89a0c492821c6db005c21e68258a833fc	add __init to some functions in zswap is only called by __init init_zswap
1a25f26138cde2b83fd74ead6da0bbd4b6c42b60	regmap use async for patch application try to speed up patch application a little using async
644f6a121af0aee94b243d33cfe38d6d474e8cbc	hwa avoid constant suspend and resume on the root hub prevent the usb core from suspending the hwa root hub since bus_suspend and bus_resume are not yet supported otherwise the pm system will chew up cpu time constantly attempting to suspend and resume the root hub but never succeeding
53df1ad52545854fc34d336b26f3086b2fb2d6f7	exynos bugfix on retrieving old_index from the policy might have been changed since last call of target thus using cpufreq_frequency_table_target which depends on policy to find the corresponding index from a frequency may return inconsistent index for thus old_index should be calculated not based on the current policy we have been observing such issue when were updated and sometimes cuased system lockups deu to incorrectly configured voltages
fbaecff06a7db4defa899a664fe2758e5161b39d	usb core hub modify hub reset logic in hub driver currently if port power is turned off by user on hub port using usbdevfs then port power is turned back on by hub driver this commit modifies hub reset logic in hub_port_connect to prevent hub driver from turning back the port power on if port is not owned by kernel
b91671bb23a79c32a23b0ad5d6e6ad292bb21bdf	ubi fix livelock in produce_free_peb the while loop in produce_free_peb assumes that each work will produce a free peb this is not true if is __number__ and the only scheduled work is the wear_leveling_worker produce_free_peb can loop forever in case nobody schedules an erase work fix this issue by checking in the while loop whether work is scheduled
a03f1f058969ec350fb7451a6fbca23096ee5727	memcg tcp_kmem check for cg_proto in sock_update_memcg is allowed to return null but sock_update_memcg doesnt check for null the function relies on the mem_cgroup_is_root check because we shouldnt get null otherwise because mem_cgroup_from_task will always return all other callers are checking for null and we can safely replace mem_cgroup_is_root check by cg_proto null which will be more straightforward proto_cgroup returns null for the root memcg already
3984aa55204e2c3f423a70b013c44c64261788df	cfq-iosched allow parent cgroup to preempt its child currently we dont allow sync workload of one cgroup to preempt sync workload of any other cgroup this is because we want to achieve service separation between cgroups however in cases where cgroup preempting is ancestor of the current cgroup there is no need of separation and idling introduces unnecessary overhead this hurts for example the case when workload is isolated within a cgroup but journalling threads are in root cgroup simple way to demostrate the issue is using dbench4 __number__ __number__ on ext4 filesystem on plain sata drive mounted with to make difference more visible when all processes are in the root cgroup reported throughput is __float__ when dbench process gets its own blkio cgroup reported throughput drops to __float__ fix the problem by making check in cfq_should_preempt more benevolent and allow preemption by ancestor cgroup this improves the throughput reported by dbench4 to __float__
9cf4a281314c9345c13c7bbb5786d7b8a72553f0	amdkfd delete some dead code this is dead code we dont need to unbind here we can just return directly
895b31f3b6b800b8f46569391f2396b1f221c602	pm domains make genpd parameter of pm_genpd_present const the pm domain pointed to by the genpd parameter is never modified
18591add41ec9558ce0e32ef88626c18cc70c686	thermal rockchip handle set_trips without the trip points in some cases some sensors didnt need the trip points the set_trips will pass to trigger tsadc alarm in the end ignore this case and disable the high temperature interrupt
a1e844036af9cb0d87e878a4f90ce64713c76e5a	tty ircomm use tty_port_close_end helper again the code is identical so leverage the helper code
88ef9b1bcec362e15d677ca183bce219706b77ca	staging line6 replacing with retval send_midi_async info why not propagate retval from usb_submit_urb instead of
3ff74be5c1a72df6d304dcb453f68e3c3bea3bdd	gpio sysfs reduce gpiochip-export locking scope reduce scope of sysfs_lock protection during chip export and unexport which is only needed to prevent gpiod re-exports during chip removal
66642c5c1dea411dd2842159f9f297ce8e914994	xfs take the ilock shared if possible in xfs_file_iomap_begin we always just read the extent first and will later lock exlusively after first dropping the lock in case we actually allocate blocks
36b78e8ababe6c596680d742f20bece5e8dc9820	mlxsw reg remove extra space in sfgc id define
bf23cee62d5953927758ff6287d300dc945afc84	iio chemical vz89x hardware i2c workaround chipset sometime updates in the middle of a reading causing it to reset the data pointer and causing invalid reading of previous data we can check for this invalid state by reading msb of the resistance reading that is always zero and by also confirming the voc_short isnt zero
a9ff999538ab2bf6d3b1ed8ab5a016bfc6fe2cd1	gpu host1x check relocs after all gathers are consumed the num_relocs count are passed to the kernel per job not per gather for multi-gather jobs we would previously fail if there were relocs in other gathers aside from the first one fix this by simply moving the check until all gathers have been consumed
2c11ab90067a8bb9d7dca3e65ace950fcd9c2f1b	mwifiex fix a bug in rx multiport aggregation logic its been observed rx aggregated packets are always followed by a single rx packet this patch improves our logic to add that extra packet in next aggregation
3e4216531c442ea99cb32a69e5ef4af723e7b5a9	x86_pkg_temp_thermal fix the thermal zone type the thermal zone type should not include an instance number otherwise each zone is considered a different type and the thermal-to-hwmon bridge fails to group them all in a single hwmon device i also changed the type to x86_pkg_temp because pkg was too generic and other thermal drivers use an underscore not a dash as a separator or maybe cpu_pkg_temp would be
42677db9004f959f6f881c6c138d080c0923b5e2	platform-msi refactor its_pmsi_init to prepare for acpi introduce its_pmsi_init_one to separate firmware dependent code ie of dependent code and firmware agnostic code so that gic3-its code can be made to support other firmware bindings easily rewrote commit log
39be6b8b0cc84b33cd17bc570e80a25126f87c9c	staging dgap fix possible null dereference the return pointer from dgap_getword is used in strcmp where it is dereferenced but dgap_getword can return null lets put a check there and return __number__ as error
91f8aecc501e456c97a6f49f7ea3797e874d5d89	dmaengine fix compilation warning
d50466c90724d5aae4d38a9a9bc163bea6f94098	microblaze intc refactor dt sanity check avoid funky casts and arithmetic
cd094927c68718c8bda432c18e85b6ec3a9ee3d1	convert to module_pci_driver
e7d021e28328e0cc47b21cb9c6d8885326b0c2f5	evm fix checkpatch warnings this patch fixes checkpatch return warnings introduced with commit checkpatch warn on unnecessary void function return statements use to produce the warnings
239adcf6bd68dd7b1910f236e7f2854de535e7aa	greybus es1 fix build-time cport constraint the cport count of es1 is now defined by cport_count
5ff22646d246e23bf8056c63bed6aaf9fd22ed12	module optimize search_module_extables while looking through the __ex_table stuff i found that we do a linear lookup of the module also fix up a comment
6932078376e2c1fd49b6c4aa41cc5e162ee83d8a	cpufreq dont use smp_processor_id in preemptible context workqueues are preemptible even if works are queued on them with queue_work_on lets use raw_smp_processor_id here to silence the warning bug using smp_processor_id in preemptible __number__ code caller is cpu __number__ pid __number__ comm tainted g w workqueue events od_dbs_timer from from from from from from from from
f7c05e837df794d2aaf19174269a270c93a52eca	spi sh-msiof fix spi bus population from dt dt doesnt instantiate spi children if is not set up properly
3b632cf0eaa2e89a12c18f043e6e7c5bcc003645	blk-mq dont allow queue entering for a dying queue if the queue is going away dont let new allocs or queueing happen on it go through the normal wait process and exit with enodev in that case
f3cc01f0948c1deb12cfb1da2959f391229c9d4b	assign request ringbuf before pin in preparation to make to accept requests assign ringbuf into request before we call the pinning v2 no need to unset ringbuf on error path chris
d1def91cd7fcc82ac0bea9a46b5e31a7a005ecb6	tilepro dont receive packets when the napi budget __number__ processing any incoming packets with a with a napi budget of __number__ is incorrect driver behavior this matters as netpoll will shortly call drivers with a budget of __number__ to avoid receive packet processing happening in hard irq context
c574b759138474d2fbe7e437c529010b7f4db2f1	media v4l2-async dont fail if registered_async isnt implemented after sub-dev registration in v4l2_async_test_notify the v4l2-async core calls the registered_async callback but if a sub-dev driver does not implement it v4l2_subdev_call will return a which should not be considered an error
b6778fd7812d877abdbc78b9b2d4304150b2ce05	jffs2 refactor csize usage in jffs2_do_read_inode_internal replace the verbose with a shorter csize
347aa6c41317157b8f8333d058ca02e156748666	arm imx legacy pcm037 move peripheral initialization to the change moves some of peripheral registrations and initializations all peripherals dependent on gpios from to level this allows to safely shift the shared gpio controller driver initialization level after init level of iomuxc driver
c590032f9ab8d03aab235a7601db22a267c2d958	net bcmgenet fix accounting of packet drops vs errors bcmgenet driver needs to separate packet drops from packet errors when the driver has to drop a packet due to lack of buffers or replacement skbs increment only when the driver encounters a bad rx packet or tx error increment only relevant detailed error counter
2fd59077755c44dbbd9b2fa89cf988235a3a6a2b	perf disable irqs across rcu rs cs that acquires scheduler lock the perf_lock_task_context function disables preemption across its rcu read-side critical section because that critical section acquires a scheduler lock if there was a preemption during that rcu read-side critical section the rcu_read_unlock could attempt to acquire scheduler locks resulting in deadlock however recent optimizations to expedited grace periods mean that ipi handlers that execute during preemptible rcu read-side critical sections can now cause the subsequent rcu_read_unlock to acquire scheduler locks disabling preemption does nothiing to prevent these ipi handlers from executing so these optimizations introduced a deadlock in theory this deadlock could be avoided by pulling all wakeups and printks out from critical sections but in practice this would re-introduce some rcu cpu stall warning bugs given that acquiring scheduler locks entails disabling interrupts these deadlocks can be avoided by disabling interrupts instead of disabling preemption across any rcu read-side critical that acquires scheduler locks and holds them across the rcu_read_unlock this commit therefore makes this change for perf_lock_task_context link
66dcb017b30498a94f601efbb56790f8d34ac41d	staging bcm removed unneccessary return statement
fa9d60785783ebe11d3fafbedf5ec82bd3b02aec	enforce consistency one branch of the if clause uses pr_info the other pr_err change the false branch to also use pr_info this minor oversight has gone unfixed since the initial vga_switcheroo implementation in link
efdbd2b30caa65dd9e687853afa4d7ce8b39447e	macvlan propagate promiscuity setting to lower devices when a macvlan device is placed in promiscuous mode it currently just sets its multicast mask to permissive but doesnt change the state of the lower device as a result not all multicast traffic can be received on such device additionally none of a vlan traffic can be received on such device as well this patch propagates the promiscuous mode setting to lower device so that lower device may receive all packets that macvlan may be interested in
a8ba84626b1b33ff53c4adaff9b69304eb41877f	staging xgifb add braces around if-statements add braces to instances of if-statements found by to conform to kernel style
2338799f3247ec19447a201baea8cf55bdc071d9	cpufreq tegra use cpufreq_table_validate_and_show lets use cpufreq_table_validate_and_show instead of calling cpufreq_frequency_table_cpuinfo and cpufreq_frequency_table_get_attr
145c52d5ce304f93e15f6a0b4471b2ffae37b3a8	make for all request numbers hex we have a mix of decimal and hex here so lets make them consistently hex also strace will print them in hex if it cant decode them so having them in hex here makes it easier to match up no functional change
d078c6e4ea5e6a93d44d5815d0ee4a9bb5c5718b	usb host ehci-sched remove unnecessary braces this patch removes unnecessary braces in single statement blocks at the same time as replaces the if statement with a ternary conditional tested by compilation only caught by checkpatch
e6fbd47add0d13189bacb1881fe006db5027536e	amd-xgbe fix mask appliciation for clause __number__ register the application of a mask to clear an area of a clause __number__ register value was not properly applied update the code to do the proper application of the mask
5184eeb3b016470956de4c89ca9b53c65ef41452	thermal int340x_thermal use permission-specific device_attr variants use device_attr_rw for read-write attributes this simplifies the source code improves readbility and reduces the chance of inconsistencies the semantic patch that makes this change is as follows declarer name device_attr identifier device_attrx x_show x_store x x_show x_store if not x_show x_store then false declarer name device_attr_rw identifier device_attrx x_show x_store device_attr_rwx
a297569fe00a8fae18547061d355c45ef191b483	do not touch unless really needed in udp recvmsg path we currently access __number__ cache lines from an skb while holding receive queue lock plus another one if packet is dequeued since we need to change cache line contains pointers offsets and cache line offsets and cache line offsets and is only needed to make sure packets are properly handled while msg_peek is operated i had first the intent to remove but the msg_peek at non-zero offset support added by sam kumar makes this not possible this patch avoids one cache line miss during the locked section when and do not have to be read it also avoids the skb_set_peeked cost for non empty udp datagrams
beb9969b8a644991dbfdaf18b9f1161a39a91df8	asoc ssm2518 fix warnings warning end returns can be simpified simplify a trivial if-return sequence possibly combine with a preceding function call generated by
a0dbf2a726e5387251a567c8531d9fd3e34d2dfb	arm smsc911x fix possible stale smsc911x flags if this function is called the first time with flags set and the second time without flags set then the leftover flags from the first called will be used rather than the desired default flags
1c86438c9423a26cc9f7f74a8950d9cf9c93bc23	pci add new pci_is_bridge interface add a helper function to check a devices header type for pci bridge or cardbus bridge requires pci rename pci_is_bridge to pci_has_subordinate
cbe157b60c8e70d4b4dc937dfdd39525d8f47b46	net calxedaxgmac fix race with tx queue since the xgmac transmit start and completion work locklessly it is possible for xgmac_xmit to stop the tx queue after the xgmac_tx_complete has run resulting in the tx queue never being woken up fix this by ensuring that ring buffer index updates are visible and recheck the ring space after stopping the queue also fix an off-by-one bug where we need to stop the queue when the ring buffer space is equal to max_skb_frags the implementation used here was copied from
73cf0e923d685a6a1b7754c7d29cc14944f271d9	ipv6 remove unnecessary test the init_net test in function addrconf_exit_net is introduced in commit create ipv6 devconf-s for namespaces to avoid freeing init_net in commit ipv6 fix bad free of addrconf_init_net function addrconf_init_net will allocate memory for every net regardless of init_net in this case it is unnecessary to make init_net test
4a30d30b87e5aa444a7f5983cd5b7d2466f4cb31	media s5p-jpeg synchronize v4l2_cid_jpeg_chroma_subsampling control value when output queue fourcc is set to any flavour of yuv the v4l2_cid_jpeg_chroma_subsampling control value as well as its in-driver cached counterpart have to be updated with the subsampling property of the format so as to be able to provide correct information to the user space and preclude setting an illegal subsampling mode for exynos4x12 encoder
3e588e3afb5780005605c7f4e3dc4ca61c8dbaec	staging rtl8712 changed struct members to __le32 fixed sparse warning cast to restricted __le32 struct recv_stat and struct phy_stat have always little endian members
59bedbccb5d27356a808f9451a3fb25adb093cc9	staging lustre mdc avoid returning freed request in mdc_close if ptlrpc_request_pack fails then set req to null so that an already freed request is not returned in intel-bug-id reviewed-on
13bf6992fe5496d56101b5d57fbdae2ee91184f2	clocksource arm_arch_timer refactor arch_timer_needs_probing when booting with dt its possible for timer nodes to be probed in any order some common initialisation needs to occur after all nodes have been probed and arch_timer_common_init has code to detect when this has happened this logic is dt-specific and it would be best to factor it out of the common code that will be shared with acpi this patch folds this into the existing arch_timer_needs_probing which is renamed to arch_timer_needs_of_probing and no longer takes any arguments this is only called when using dt and not when using acpi which will have a deterministic probe order mark reword commit message
f074211f6041305b645669464343d504f4e6a290	xfs fallback to vmalloc for large buffers in xfs_getbmap xfs_getbmap uses for a large buffer for extents which is kmallocd this can fail after the system has been running for some time as it is a high order allocation add a fallback to vmalloc so that it doesnt require contiguous memory and so wont randomly fail on files with large extent lists
6003a4201077da41427dae5e71bb2f31dfdc0c10	kvm fix waitqueue_active without memory barrier in async_pf_execute seems to be missing a memory barrier which might cause the waker to not notice the waiter and miss sending a wake_up as in the following figure async_pf_execute kvm_vcpu_block if the cpu might reorder the test for the waitqueue up here before prior writes complete task_interruptible kvm_vcpu_check_blockvcpu __number__ kvm_arch_vcpu_runnablevcpu return kvm_mp_state_runnable return __number__ waited true schedule the attached patch adds the missing memory barrier i found this issue when i was looking through the linux source code for places calling waitqueue_active before but without preceding memory barriers after sending a patch to fix a similar issue in details about the original issue can be found here
8df322385a7e253672dc5077c11dc1a6219d25cc	make interrupt mask sane coccinelle found this one im not certain what the intent is but this fix makes no functional changes
8f213af2c0309659f2011650a7a7ef3587db9de2	fix compilation warning fixes the following warning warning section mismatch in reference from the function exynos4_clk_sleep_init to the unknown reference the function exynos4_clk_sleep_init references the unknown reference __initdata unknown this is often because exynos4_clk_sleep_init lacks a __initdata annotation or the annotation of unknown is wrong
4f993973d274151975a59f50dc509ca6598be501	drm simple_kms_helper make connector optional at init time drm_simple_display_pipe_init pretends to attach a connector to the display pipe in case a drm bridge has to be used then its the bridge that takes care of connectors this patch makes the connector parameter optional for drm_simple_display_pipe_init so that a drm bridge could handle connector by itself later link
894a16db293c5383f1d9c819909a27bd6738efde	asoc intel board add kabylake machine id kabylake platform is similar to skylake so add machine id since same machine driver supports both add these in id table
16e00f5a5f12eb32ca39df6a7afd5c0062705af6	fix compile of memory hotplug without config_memory_hotremove implement memory hotplug remove in the kernel broke compile when config_memory_hotremove is not defined due to missing symbols this fixes the issue by adding the missing symbols
901f1379f6c9dc2d73b51971d129a6f7d5b9b20a	sunrpc use sg_init_one in dont opencode sg_init_one
2867173572d5ca5084e8836c8a1d0cafa95b729b	fsl-diu-fb simplify platforms that have only one port allow the platform code not to define a value for this would be for platforms that only have one monitor port set_monitor_port will never be called with an unsupported port anyway
27a0faafdca53bda21ed340ca8f8960696dda049	usb dwc3 st fix usb_dr_mode_peripheral configuration set usb3_force_vbusvalid when configured for usb_dr_mode_peripheral mode as it is required to have a working setup this worked on the internal driver by relying on the reset value of the syscfg register as the bits arent explicity cleared and set like the upstream driver also add a comment about what setting this bit means
e285a9a64d64e65a10e97c6ae1e9385c9595b563	update rev id for pitcairn
6e641c943fd5355592b7b955fe3d0f07c927a0aa	documentation fix size parameter for snprintf cppcheck reports this error error dangerous usage of devname strncpy doesnt always it the terminating is needed for the global char array unload_heads_path so never write the last array entry which is initially
d29bb9782d22063892e28716cdb76a87d2876ddb	add a vm_bug in __free_one_page if the zone is uninitialized freeing pages to uninitialized zones is not handled by __free_one_page and should never happen when the code is correct ran into this while writing some code that dynamically onlines extra zones
a57a22c817fbcb69d41ae517e02933618482f42d	omapdss take pixelclock unit change into account in hdmi_compute_acr pixelclock unit change from khz to hz should be taken into account in cts value calculations in hdmi_compute_acr
78347cdb89065f9d40ea28596ef2bd8058eb6d12	cpufreq governor reset sample delay in store_sampling_rate if store_sampling_rate updates the sample delay when the ondemand governor is in the middle of its dance od_sub_sample sample type is set the governor will still do the bottom half of the previous sample which may take too much time to prevent that from happening change store_sampling_rate to always reset the sample delay to __number__ which also is consistent with the new behavior of cpufreq_governor_limits
e8c0a7793523e607bace8e457aa1bad0b16215ad	add debug messages for resource allocation the xri resources are split into pools for nvme and fcp io when nvme is enabled there was not message in the log that identified this allocation added debug message to log xri split
ecb7a8ebdc4b063715d5a37919f9118c3f1031a8	gpio-charger use cansleep version of gpio_set_value context of gpio_charger_get_property is sleepable so we should use gpio_set_value_cansleep instead of gpio_set_value it will remove warn_on incase of using gpio from i2c-to-gpio expander like pca953x
cb1ff431c3dd904cda37d6d07d4a3ea29840d621	convert use of to in little endian cases the macros be16_to_cpu and cpu_to_be64 unfolds to which provides special case for constants in big endian cases __constant_be16_to_cpu and be16_to_cpu expand directly to the same expression the same applies for __constant_cpu_to_be64 and cpu_to_be64 so replace __constant_be16_to_cpu with be16_to_cpu and __constant_cpu_to_be64 with cpu_to_be64 with the goal of getting rid of the definition of __constant_be16_to_cpu and __constant_cpu_to_be64 completely
b29050448a7efcedf5e8bec71c371169389a7a26	bluetooth remove useless code in hci_connect this patch removes unneeded variable assignments in hci_connect sec_level is already assigned to bt_security_low in hci_le_connect and pending_sec_level and auth_type are assigned right after if statement
fce0af1dc34e2765357dfbd21dd923c89254bcdb	mips octeon support all pip input ports on cn68xx cn68xx has __number__ pip input ports patchwork
6b831d78477c9bbfbcb4cb60af13e13bd2c7467e	media airspy fix error handling on start streaming free all reserved usb buffers and urbs on failure return all queued buffers to vb2 with state queued on error case
891fa525dc29cbed3ef0b74d5e0ab2fb5233f9a6	arm shmobile remove duplicate shmobile_invalidate_start declaration
fa459711a0b8fb190a12fe86b03d910c252a7f5c	revert clk avoid circular clock topology this reverts commit joachim reports that this commit breaks lpc18xx boot this is because the hardware has circular clk topology where plls can feed into dividers and the same dividers can feed into the plls the hardware is designed this way so that you can choose to put the divider before the pll or after the pll depending on what you configure to be the parent of the divider and what you configure to be the parent of the pll so lets drop this patch for now because we have hardware that actually has loops a future patch could check for circular parents when we change parents and fail the switch but thats probably best left to some debugging kconfig option so that we dont suffer the sanity checking cost all the time
b891f62fcd28a46ab0818cd9acbb5bbb20542ab6	asoc intel add debug output when boot fails add the debug output from ipcd and ipcx when booting fails
405d55c99da7a3045275fdb1a30614293a53c6e7	tcm_vhost remove unused variable in vhost_scsi_allocate_cmd the variable se_sess is initialized but never used otherwise so remove the unused variable dpatch engine is used to auto generate this patch
ac36960f42ee2788dd0a2988779e45952a8327a9	rtc rtc-at91rm9200 use module_platform_driver_probe use module_platform_driver_probe macro which makes the code smaller and simpler
85dd0c59aa877c0a39172e6b442de9c1b756e710	arm omap4 board-4430sdp register platform device for hdmi audio codec add platform device registratation for hdmi audio codec this is to be able to transmit audio through the hdmi output featured in sdp4430 and blaze boards
c0b4e04d1a984dec4d6704ac3fcf289b1cb32993	usb gadget pxa25x_udc remove redundant platform_set_drvdata commit device-core ensure drvdata null when no driver is bound removes the need to set driver data field to null
c509e754af96882eb46130e215cc4aa8f763d4ac	ixgbe fix wol issue with fiber there are times we turn of the laser before shutdown this is a bad thing if we want to wake on lan to work so now we make sure the laser is on before shutdown if we support wol
abae1b71dd37bab506b14a6cf6ba7148f4d57232	cma_validate_port should verify the port and netdevice previously cma_validate_port searched for gids in ib cache and then tried to verify the found port this could fail when there are identical gids on both ports in addition netdevice should be taken into account when searching the gid table fixing cma_validate_port to search only the relevant ports cache and netdevice
2e659c0551c99c9712724d96acd3d9271587265c	net convert to using iff_no_queue
847d74a26010e9bae51299b7c1008c5ec9a349f4	staging comedi remove old auto-config all the comedi drivers that call comedi_pci_auto_config or comedi_usb_auto_config define a auto_attach handler in their struct comedi_driver there is no need to fall back to abusing the attach handler any more so remove the code that supports that
62a92c8f553e49270a0ee391b8733da71ab0aebc	remove a redundant check there is no way to end up in _free_event with being null the latter is initialized in event allocation path and remains set forever in case of allocation failure the error path doesnt use _free_event having the check however suggests that it is possible to have a situation in _free_event and confuses the robots this patch gets rid of the check link
8a3c95ab385fb98621455807ae52b4454192f8c5	lightnvm do not protect block __number__ device blocks should be marked by the device and considered as bad blocks by the media manager thus do not make assumptions on which blocks are going to be used by the device in doing so we might lose valid blocks from the free list
1da8b822f809b621f34e8cdac2f40c93dcc2d348	ext3 add __init macro to init_inodecache init_inodecache is only called by __init init_ext3_fs
65ec17b0d5a5351846e3503d5599e1630e57ffc4	hwmon adt7411 convert to use devm_ functions convert to use devm_ functions to reduce code size and simplify the code
7067a347665feec4aa1f7ecdd892a24715f094a6	staging comedi remove unused members from addi_private remove all the unused members from the addi_private definition
e84c282b40251f314c429f39b044785e323f2648	tools lib traceevent let filtering numbers by string use function names as a pointer can be converted into a function name let the filters work with the function name as well as with the pointer number if the comparison expects a string then convert numbers into functions but only when the number is the same size as a long link
809a591b16781cc69f1f3ff2cc9a790e3ae8ec8f	staging iio light isl29018 rename lux_scale to calibscale this patch renames lux_scale to calibscale and lux_uscale to ucalibscale this is done in order to avoid confusion since these parameters are used for hardware applied calibration
ae366c2049b48b54e5250cb57438bbebd1dbe610	alsa usb-audio use strim instead of open code
69d54b916d83872a0a327778a01af2a096923f59	kprobes makes works correctly for optimized kprobes doesnt work correctly on optimized kprobes masami hiramatsu has a test report on x86_64 platform this patch forces it to unoptimize kprobe if kprobes_all_disarmed is set it also checks the flag in unregistering path for skipping unneeded disarming process when kprobes globally disarmed
8763e6ac2d368ac9d650df35b00c3af2a7c1878b	perf c2c report display total records column in offset view adding total records column into cacheline pareto table between cycles and cpu info perf c2c report cycles total cpu rmt hitm lcl hitm load records cnt __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ its useful to see how many recorded samples represent each offset link
8b4c7e5da29b48381d3855a7b5cd656a58c6154c	video s3c-fb use dev_get_platdata use the wrapper function for retrieving the platform data instead of accessing directly this is a cosmetic change to make the code simpler and enhance the readability
cfd1979e81c72386cb4dad51a957d6f154f23525	stmmac update the driver version to nov_2012 many new feauture have been introduced in the driver ethtool coalesce options rx hw so this patch updates the drivers version
879a3d9dbbde823ac77d39131e7a287f31b8296f	cgroup use cgroup_addrm_files in cgroup_clear_directory cgroup_clear_directory incorrectly invokes cgroup_rm_file on each cftset of the target subsystems which only removes the first file of each set this leaves dangling files after subsystems are removed from a cgroup root via remount use cgroup_addrm_files to remove all files of target subsystems tj move cgroup_addrm_files prototype decl upwards next to other global declarations commit message updated
4a6698b80cfe36dd4e3c6bc30ab81b4e0a837f64	usb gadget uvc uvc_alloc can be static the function isnt called from outside of its compilation unit make it static
e486fad9136dce21f5ba4322ae0454d23805d342	fix pipe_wm_linetime definition looks like a error
67d955383ab2ef8866c494c14156a4f3d29e441c	sched remove noop in next_prio when computing the next priority for a given run-queue the check for rt priority of the task determined by the pick_next_highest_task_rt function could be removed since only rt tasks are returned by the function link
29423b7e51a8ea4d687cf98c3a50f33c554be194	drivers hv vmbus_channel_offer_channel for win7 and beyond the offfer message sent by the host has been extended in win7 ws2008 r2 state to reflect this extension all these changes are backward compatible
d9b7f22623b5fa9cc189581dcdfb2ac605933bf4	slub use free_page instead of put_page for freeing kmalloc allocation when freeing objects the slub allocator will most of the time free empty pages by calling __free_pages but high-order kmalloc will be diposed by means of put_page instead it makes no sense to call put_page in kernel pages that are provided by the object allocators so we shouldnt be doing this ourselves aside from the consistency change we dont change the flow too much put_pages would call its dtor function which is __free_pages we also already do all of the compound page tests ourselves and the mlock test we lose dont really matter
7037f3beae352faa478ff5729c308756233ef4d3	mmc dw_mmc remove the unnecessary is_err checking for clock if clock are null clk_disable_unprepare should be just returned in clk_disable_unprepare already checked whether clk is error or null
90db15e17e46e2841843bf20f258fed963228bed	asoc tlv320dac33 cleanup manual bias level transitions since the asoc core now takes care of setting the bias level to snd_soc_bias_off when removing the codec there is no need to do it manually anymore
32dd9e873bba08fbcf31682c38c76efd90a476e3	media media platform soc_camera_platform constify structures structures are stored in the fields of the v4l2_subdev_ops structure which are of type const also v4l2_subdev_ops structure is passed to a function having its argument of type const as these structures are never modified so declare them as const done using of the scripts disable optional_qualifier identifier i position p static struct v4l2_subdev_core_ops identifier position p struct v4l2_subdev_ops obj position identifier on disable identifier struct v4l2_subdev_core_ops i file size before text data bss dec hex filename __number__ __number__ __number__ __number__ file size after text data bss dec hex filename __number__ __number__ __number__ __number__ __number__
6c9fe14f9d64cc12401a825a60ec5c5723496ca4	btrfs fix the bug that is never cleared is never cleared since the original code uses __number__ __number__ which will only clear it if pending_changes is already __number__ this will cause a lot of problem when mount it with inode_cache mount option if the btrfs is mounted as inode_cache pending_changes will always be __number__ even when the fs is frozen
ab27b91b9f1937ddb9e0eb0d0892728f852b48cf	userns convert sysfs to use where appropriate
e0edf3733fb62f91bbb8ec3fab4a90b0ac2dd037	bluetooth fix issue with shared skb between hci raw socket and driver any hci raw socket gets a copy of each skb that is either received or send via the bluetooth subsystem the raw socket uses skb clones to send out data but the problem is that it needs to add an extra packet type byte in front of it and some drivers need to also add an extra header before submitting the packet so far this all worked magically fine since all of the drivers and the raw sockets are adding the same byte at the same location but that is by pure coincidence since the data of cloned skbs is shared this means that the raw socket and driver kept writing into the shared data area to fix this the only safe way is if the hci raw socket creates a copy of the skb before sending it out to not always copy all skbs around the copy is only created once and only after any of the hci filter checks succeeded
52e1718c6fd1a1f54c676c2107dc931e93865fe8	kvm ppc clean up move vcpu to the beginning of vcpu_e500 to give it appropriate prominence especially if more fields end up getting added to the end of vcpu_e500 and vcpu ends up in the middle remove gratuitous extern and add parameter names to prototypes agraf fix bisectability
825fe38a0976756fba907952d5ac9d4046068fe0	leds netxbig fix module autoload for of registration if the driver is built as a module autoload wont work because the module alias information is not filled so user-space cant match the registered device with the corresponding module export the module alias information using the module_device_table macro before this patch modinfo grep alias alias after this patch modinfo grep alias alias alias alias
df253423d41d377b353964b8a3343df4507fda7c	media remove braces remove unnecessary curly braces around single if statement
eb32b5aae92176e7a00411082955dab8c62761ee	gpio pca953x add nxp pca9698 add the nxp pca9698 gpio expander to the supported list note this only enables gpio functionality
cd34e2969b28de7685bb51d4b0fafeced8ef7f66	f2fs fix to return correct error number in f2fs_write_begin fix the wrong error number in error path of f2fs_write_begin
e68035fb65dec05718d765fbea14d2e527214ff6	workqueue convert to idr_alloc and friends are about to be deprecated convert to the new idr_alloc interface
c9fe74e68b01d44716cf26615b979f0221aaa2ff	fix warning of cast to pointer from integer of different size
68f227930b887ef9f18065f15a17aa9dc1ac2d31	be2net fix pcie error recovery in case of adapters interrupts registered by roce driver are not unregistered when msix interrupts are disabled during error recovery causing a crash detach the adapter instance from roce driver when error is detected to complete the cleanup attach the driver again after the adapter is recovered from error
23d38844276680abbf33624f56b6779d43f53633	f2fs optimize scan_nat_page when __number__ max_free_nids stop scanning other nat entries jaegeuk kim fix handling the return value of add_free_nid
1b846f9282c0781f8ecf90e355008d94a0b973dd	bridge simplify br_getlink a bit static checkers complain that we should maybe set ret before we do the goto they interpret the null return from br_port_get_rtnl as a failure and forgetting to set the error code is a common bug in this situation the code is confusing but its actually correct we are returning zero deliberately lets re-write it a bit to be more clear
d9f46bb1a84ee15f58c9c58ab91962b7dc6eb9a4	f2fs remove unnecessary condition judgment remove the unnecessary condition judgment because max_slots has been initialized to __number__ at the beginging of the function as following if max_slots __number__
c2a60109a37e6d47c30ea94d4bb0fb644ab4aad2	staging unisys visorbus fix formatting in an effort to create a more uniform coding style within the unisys s-par driver set this patch adjusts the formatting of all directives within this source file to match the following template and thereby eliminate irregular usage of whitespace the amount of whitespace used between the and the is dependent on what is needed to make the surrounding directives as uniform as possible
9f3670e8f6df6557fefe3ae0e626189c8c30c74c	fix struct qm_fqd set accessor for context_a is
a1c805a9bdc55b244706b911e842d0649990953b	rtc rtc-pcap remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure since commit device-core ensure drvdata null when no driver is bound thus it is not needed to manually clear the device driver data to null
e305f48bc453da773a3601135a2cce40b8e62856	fs fix file mode for o_tmpfile o_tmpfile like o_creat should respect the requested mode and should create regular files this fixes two bugs o_tmpfile required privilege because the mode ended up as __number__ and it produced bogus inodes with no type
0c2e55324199d89aaea816ce7a76571c3f88d158	staging comedi dmm32at tidy up the irq support in dmm32at_attach an irq is only needed by this driver in order to support async commands since it is optional modify the attach so that if the request_irq fails the attach does not fail remove the printk noise about the irq only hookup the async command support if the request_irq was successful
ca4744084772e1fee999391bee0fcdca5d91a757	arm mm fix the memblock allocation for lpae machines commit added much needed memblock_virt_alloc_low and further commit bootmem restore goal for fixed the issue with low memory limit thanks to yinghai but even after all these fixes there is still one case where the limit check done with arch_low_address_limit for low memory fails russell pointed out the issue with __number__ bit lpae machines in below thread since on some lpae machines where memory start address is beyond the low memory marker in memblock will be set to default arch_low_address_limit which is wrong we can fix this by letting architectures set the arch_low_address_limit using another export similar to memblock_set_current_limit but am not sure whether its worth the trouble tell me if you think otherwise rather am just trying to fix that one broken case using memblock_virt_alloc in setup code since the is updated appropriately makes it work on all arm __number__ bit machines
d12f51aa7bd43667078d021ba89e6ed8bfe42432	media m920x fix error do not use assignment in if condition
999633d304f2467ae48104ea218b1e8fb0303d40	xfs update free inode record logic to support sparse inode records xfs_difree_inobt uses logic in a couple places that assume inobt records refer to fully allocated chunks specifically the use of can cause problems for inode chunks that are sparsely allocated sparse inode chunks can by definition define a smaller number of inodes than a full inode chunk fix the logic that determines whether an inode record should be removed from the inobt to use the ir_free mask rather than ir_freecount fix the agi counters modification to use ir_freecount to add the actual number of inodes freed rather than assuming a full inode chunk also make sure that we preserve the behavior to not remove inode chunks if the block size is large enough for multiple inode chunks this behavior was previously implicit in that in such configurations of a single record never matches m_ialloc_inos hence add some comments as well
aa27deaabfa0c4a08cdb4d3209a13ab02695c186	wil6210 reduce dmesg pollution after fw crash when fw crashes dmesg get polluted with the fw not ready error message print it only once per fw lifecycle
1d91ac6213003f525ac34da5e39cbb6612d19deb	ima skip memory allocation for empty files memory allocation is unnecessary for empty files this patch calculates the hash without memory allocation
5789f37cbc560aff45ff4d00673705eac92d3b4d	bluetooth expose hardware error code as debugfs entry when the hardware error event is send by the controller the bluetooth core stores the error code expose it via debugfs so it can be retrieved later on
5023829969f56b78a16da94f34c605bbbb344018	usb gadget fixed a brace coding style issue
82832046e285952f14e707647f9ef82466c883cc	imx-drm imx-drm-core fix error cleanup path for imx_drm_add_crtc imx_drm_add_crtc was kfreeing the imx_drm_crtc structure while leaving it on the list of crtcs delete it from the list first
3b99b9d5538f0a32dea6e1d79a04233514920b61	staging bcm remove typedef for _section_type this patch removes typedef for enum _section_type because it is not being used
292098beb5ea8624e6114cdd53a1b089c233560b	scsi lpfc fixed messages for misconfigured port errors fixed messages for misconfigured port errors to be consistent for all os platforms
fe424b2fc2674a13b7746b2cb3b0eb88b1fe182d	media media davinci vpif_capture use module_platform_driver this patch uses module_platform_driver to simplify the code
020178a1bcadf20b9d057988984f374c905d542e	drm add drm_crtc_vblank_waitqueue add a small static inline helper to grab the vblank wait queue based on the drm_crtc this is useful for drivers to do internal vblank waits using wait_event co v2 pimp commit message daniel add kernel doc daniel
8f0cfa4d2a628a53e469f98aff7988555d654bc6	pass computed vco to bxt_set_cdclk rather than compute the vco inside bxt_set_cdclk lets precompute it outside and pass it in a small step towards a fully precomputed cdclk state
f5372e940cdb00babf45b258da00f835e3574766	rtlwifi rtl8192cu remove is_hardware_type_8192ce and is_hardware_type_8192cu in the is_hardware_type_8192ce and is_hardware_type_8192cu is unnecessary because codes arent shared
e8dfc30582995ae12454cda517b17d6294175b07	writeback elevate queue_io into wb_writeback code refactor for more logical code layout no behavior change remove the mis-named __writeback_inodes_sb will decide when to queue_io before calling __writeback_inodes_wb
8f51c8108267443865d8ec08403b66da9905ba14	spi spi-s3c24xx remove redundant return value check of platform_get_resource remove unneeded error handling on the result of a call to platform_get_resource when the value is passed to devm_ioremap_resource
5b47f3cbf03f69efc24b34200d6b432fe354b8d5	staging use ioremap_nocache instead of ioremap the cpu might write-combine cache memory access something that for most modules is not desired
9daaa397b3e18282715eeb0d7be79ea5bbadc119	vxlan port module param should be ushort udp ports are limited to __number__ bits
c8baa8af8f75eec074d447484ef53cc4dc6d879e	staging rtl8821ae fix space required before the open parenthesis fix issues with space required before the open parenthesis error in
61c1c6147f69d8dea31fd133d2ec0b1594c9a3eb	backlight lp855x dont clear level on dont clear the backlight level when were going into suspend or blanking instead just temporarily set the level to __number__ so we retain the value when we resume
dfbeb85f2fe6093ac7deb5dd40f4fd6c75b9fc78	qed add additional dcbx debug messages
cad1525a5e7443cd93368a22e5b7571c373c8cc0	acpi remove trailing whitespace minor cleanup remove some extra trailing white space
788c1eba50133777df5ca2972cda3c9a8f78f52f	nfsd4 fix setclientid_confirm same_cred check new clients are created only by nfsd4_setclientid which always gives any new client a unique clientid the only exception is in the callback update case in which case it may create an unconfirmed client with the same clientid as a confirmed client in that case it also checks that the confirmed client has the same credential therefore it is pointless for setclientid_confirm to check whether a confirmed and unconfirmed client with the same clientid have matching credentials--theyre guaranteed to instead it should be checking whether the credential on the setclientid_confirm matches either of those otherwise it could be anyone sending the setclientid_confirm granted i cant see why anyone would but still its probalby safer to check
125458ab3aefe9cf2f72dcfe7338dc9ad967da0b	fix asid configuration asid should be enabled before initializing otherwise only lsb asid will be considered hence moving configuration of ttbcr register ahead of while initializing context bank will rewrote comment
4443ec94d246e65fcee8ebf63f4d3abea0ff86df	i40e clear nvm update state on ethtool test once in a great while the nvmupdate tools and the driver get out of phase with each other this gives us a way to reset things without having to unload the driver change-id i353f688236249a666a90ba3e7233e0ed8c1a04e9
a7dab19845cbbb78744b420a9a3d63356caaaf24	staging comedi me4000 fix aref test in me4000_ai_check_chanlist the aref cr_aref values are all defines the defines are subdevice flags fix the test in this function reported by coverity
5343c00dd0f2543d5751575515bdae4b801820ea	fix sparse warning about gfp_t use properly convert gfp_t result to bool to fix warning incorrect type in initializer different base types expected bool unsigned usertype preload got restricted gfp_t
ff38e82931aeaa339d6bf4a9980e011cbfd14927	hid wacom add outbounding area for dtu1141 dtu1141 has an extra __number__ mm tablet active outbounding area on each side of the display same as those recently released dtus
9b5d585d148a19bcadae81fa17ddbe3e22efb9e9	genirq ensure irq descriptor is valid when setting-up the irq in the function setup_irq we dont check that the descriptor returned from irq_to_desc is valid before we start using it for example chip_bus_lock called from setup_irq assumes that the descriptor pointer is valid and doesnt check before dereferencing it in many other functions including we do check that the descriptor returned is not null and therefore add the same test to setup_irq to ensure the descriptor returned is valid
8a853759c262fd52ff0f5e89f89c65928077fe4a	usb xhci allow to be called repeatedly dont set to null in xhci_stop as we have still not de-allocated it it was resulting in a null pointer de-reference if is called repeatedly we want repeated to work for the otg use case
144432618e4f9f3d24eaa9de0a1b6a5bee00989e	make static inlines no reason why couldnt be static inlines instead of cpp macros
9bb096ff375f41e4c22000fd21f0ed01e2348c3e	regulator s5m8767 fix to work when platform registers less regulators
701615f82f29d0cce28a397267f847de3ee93b6e	greybus operation add completion work queue add dedicated bound work queue for operation completions and use the connection work queues for incoming requests only there is no need to keep responses ordered internally or with respect to requests instead allow operations to complete as soon as possible when a response arrives or the operation is cancelled note that this also allows synchronous requests to be submitted from request handlers as responses will no longer be blocked on the same single-threaded work queue similarly operations can now also be cancelled from a request handler
06d0b5d9edcecccab45588a472cd34af2608e665	use smp_store_boot_cpu_info to store cpu info for bsp during boot time git commit x86 hotplug support functions for cpu0 alters what the call to smp_store_cpu_info does for bsp we should use the smp_store_boot_cpu_info and for secondary cpus the old variant of smp_store_cpu_info should be used this fixes the regression introduced by said commit
ae6816ba0f594edb194d108cfa0dedceb59fb0ff	mfd stm32-timers fix max register stm32 timers register bank size is fix regmap max_register
57b17ae71f412b870415b698655f00846e34ce0a	gpu host1x mipi registers are __number__ bits wide on platforms an unsigned long would be __number__ bit and cause unnecessary casting when being passed to writel or returned from readl make register values __number__ bits wide to avoid that
cc3de6a3acce264f4eb0b5bf552478e5f1380bba	f2fs fix calculating incorrect free size when update xattr in __f2fs_setxattr during xattr updating free size should be corrected to remainder free size old entry size it can avoid enospc error when we update old entry with the same size new entry at fully filled xattr
56238e456c58a6a3ed905828e16a6d8d6d9c2b04	staging rtl8712 remove cast on void pointer the following coccinelle script was used to detect this expression x e type t identifier f t t t e
a727b025f43d7952c0697562f5cecda9f42758aa	tty serial_core add tty null check to uart_tx_stopped commit tty serial_core convert uart_close to use tty_port_close created a case where a port used for a console does not get shutdown on tty closing then a call to uart_tx_stopped segfaults because the tty is null this could be fixed to restore old behavior but we also want to allow tty_ports to work without a tty attached so this change to allow a null tty_struct is needed either way
2d6a554dd5128195300f2d2cff36c590b1b88049	mips octeon remove unnecessary null test before debugfs_remove_recursive fix checkpatch warning warning debugfs_remove_recursivenull is safe this check is probably not required patchwork
eba66b3e341ef7b72c2603b55cd5cd38d028c9da	media smiapp provide module identification information through sysfs provide module ident information through sysfs
813b451644686fb7e26a54005e2f7bd495a06121	extcon max77693 staticize default_init_data commit extcon max77693 initialize register of muic device to bring up it without platform data added this structure but forgot to make it static without this patch we get the following warning warning symbol default_init_data was not declared should it be
53335acc444fdb8cf3479e4c45a3165281a592dd	arm only manually add hwmod data when dt not used the omap_init_aes routine in only needs to be called when there is no device tree present
82c6544dddc6c4bd940917af2f987dee6be0fc17	net mediatek remove superfluous queue wake up call the code checks if the queue should be stopped because we are below the threshold of free descriptors only to check if it should be started again if we do end up in a state where we are at the threshold limit it makes more sense to just stop the queue and wait for the next irq to trigger the tx housekeeping again there is no rush in enqueuing the next packet it needs to wait for all the others in the queue to be dispatched first anyway
15b31c59bc71c9c7e7c1d13cd62e38b9ef67379e	handle pte exec in amdgpu_vm_bo_split_mapping
884dc5a2d39cae6dec323163654a99bda8363399	arm s3c24xx delete double assignment delete successive assignments to the same location a simplified version of the semantic match that finds this problem is as follows expression i i
ab5701ada2473b111c24ca7f4360b0cdb5badb60	usb serial cp210x clean up crtscts flag code the crtscts flag code cleared and inconsistently bits unrelated to crtscts functionality it was also harder than necessary to read
ce5df97be530e4746bf9a4ac14589a1cfdfd8efc	rcu remove redundant check for rcu_head misalignment there is now an unconditional check for rcu_head misalignment in __call_rcu so remove the old conditional one in debug_rcu_head_queue
b3f6a57506b8c07894549ef3a2aa6bf3b0ba33fd	spi omap-uwire use devm_ functions this patch introduces the use of devm_clk_get and devm_ioremap instead of the unmanaged interfaces and removes the corresponding free function calls
30b03b1528b60623986ee0b50ec0e5dab9094be8	iw_cxgb4 use the mpa initiators ird if our ord the i40iw initiator sends an mpa-request with and the cxgb4 responder sends an mpa-reply with ord __number__ causing i40iw to terminate due to insufficient resources the logic to reduce the ord to peers ird was wrong
18aff33e7314253b9437234bd6d69ddc4827de70	rcutorture print symbolic name for rcu_torture_writer_state currently rcu_torture_writer_state is printed as an integer which slows debugging this commit therefore prints a symbolic name in addition to the integer paulmck more const as suggested by josh triplett
760c6a9139c37e16502362b22656d0cc4e840e8f	coredump clarify unsafe core_pattern warning i was amused to find unsafe core_pattern warning having these lines in turns out kernel is formally right default core_pattern is just core which doesnt qualify for secure path while setting hint admins about solution clarify sysctl names delete unnecessary characters string literals are concatenated regardless and reformat for easier grepping link
cf084c6ae078759b3d65d37b34de824500fc0623	rt2800 __number__ initialize registers based on rt5592loadrfnormalmodesetup from
0c8551e5fa3833c6080542da662394817fea4616	arm omap mcbsp fix possible memory corruption commits arm omap mcbsp start generalize omap2_mcbsp_set_clks_src and arm omap mcbsp start generalize signal muxing functions incorrectly set two struct omap_mcbsp_platform_data fields after omap_device_build_ss and kfree calls fix this by moving these pdata assignments before those calls
63288b721a80fb58c00cd47e61a90bc8b33ba588	arm imx fix shared gate clock lets say clock a and b are two gate clocks that share the same register bit in hardware therefore they are registered as shared gate clocks with imx_clk_gate2_shared in a scenario that only clock a is enabled by clk_enablea while b is not used the shared gate will be unexpectedly disabled in hardware it happens because clk_enablea increments the share_count from __number__ to __number__ while clock b is unused to clock core and therefore the core function will just disable b by calling directly the consequence of that call is share_count is decremented to __number__ and the gate is disabled in hardware even though clock a is still in use the patch fixes the issue by initializing the share_count per hardware state and returns enable state per share_count from hook in case its a shared gate while at it add a check in clk_gate2_disable to ensure its never called with a zero share_count
f22ff5523af8b365167cb79189f8b91470d57c8c	acpi dock avoid initializing acpi_dock_notifier_list multiple times function dock_add will be called multiple times if there are multiple dock stations which causes acpi_dock_notifier_list to be initialized multiple times to avoid that move the initialization of acpi_dock_notifier_list from dock_add to acpi_dock_init rjw changelog
831115af5ca36d713355bf1b379081691eca8b3f	ecryptfs remove unnecessary casts when parsing packet lengths the elements in the data array are already unsigned chars and do not need to be casted
25026d0d21faefe59aa316bf9ae29b56755e4e05	arm kirkwood remove redundent usb clock alias now that usb is instantiated via dt and the usb dt node has a clocks property we no longer need a c coded clock alias remove it
d223760f38b13f3c0a14978b6c4261b9bd690494	wait for all fences before installing an exclusive clflush fence ensure that before we overwrite the reservation_object with our exclusive fence for the pending clflush operation that we do wait upon all the fences in the current reservation_object
7281491c594e7b8501eb5dfcf6cd3724f8a1b5b0	dynamic_debug enlarge write buffer current query write buffer is __number__ bytes on stack in comparison the ddebug_query boot-arg is __number__ allocate the buffer off heap and enlarge it to __number__ bytes big enough for queries at __number__ bytes each and error out if not this makes it play nicely with large query sets to be added later the buffer should be enough for most uses and others should probably be split into subsets changed user_buf_page from __number__ __number__
f0cb54524366654e72c87e0a1f87c0b3ff36deb3	x86 mce use notifier chain only for mce decoding drop the edac_mce custom hook in favor of the generic notifier mechanism also do not log the error to mcelog if the notified agent was able to decode it
612f676bbef9b937764db453c931ea48be8020ef	media dvb return the error from i2c_transfer if negative just returns whatever error that was returned by the i2c core in the case of errors only returning if the transfer size is not what it was expected
db7dabf707f1eb3c4288ca8bedd4b2aa6701ca7b	staging comedi vmk80xx make sure private data is clean when detached currently the private data used in this driver is stored in a static array during the usb and empty location is found in this array for use by the usb device some initialization of the private data is then done before comedi_usb_auto_config is called to allow the comedi core to attach its comedi_device to the usb device the can fail for various reasons if it does make sure that the private data is clean before returning an error the usb simply calls comedi_usb_auto_unconfig to allow the comedi core to disconnect its comedi_device from the usb device since the private data points to the static array it cannot be kfreeed during the detach instead make sure it clean before leaving the detach
8f61419f1dc2def067e941e077f0f7cf0244f90e	staging comedi ni_at_a2150 factor out chanlist checking from step __number__ of the validates that the is compatible with the hardware for aesthetics factor out the step __number__ code for the analog input async command support tidy up the factored out code to minimize the noise change the comedi_error which is a wrapper around dev_err to dev_dbg
824ab37df006ea2d06e4c4817344c0e8c056b744	spi img-spfi implement a handle_err callback the driver can be greatly simplified by moving the transfer timeout handling to a handle_err callback
1a39b5e1f932b0ab292c1737724f17bd6a73d630	alsa hda add gpio control to ad1884 hp fixup the ad1884 hp quirks control gpio1 bit as the primary mute as well add the similar control to ad1884 fixup for auto parser too
2a51835f6149905b86954574c258ee094d98813e	introduce enable_requested and is_enabled in the power well code just like what we do for having those variables makes it a bit easier to parse the code
6a75c0b62b0981c3a34d3336725b0840747e7680	asoc cs4349 remove unneeded null test for its safe to call gpiod_set_value_cansleep with null desc
72282a88d4ea2c0f3e520fab34db56af7119f6e7	drm zte checking for null instead of is_err drm_dev_alloc never returns null it only returns error pointers on error link
0cffd6312f3fd9e51fec946eb918a988b109b520	media davinci use a local media device pointer instead the function has a local variable that points to the media device use that instead of finding the media device under the entity
a11d342fb89aedec5003d116e7427d43cbba714d	acpi video force vendor backlight on lenovo ideapad z570 lenovo ideapad __number__ is a pre-win8 laptop where not using vendor backlight causes the backlight controls not to work
474fe9f7f551b151222db07a968b15bf05ffe4c4	dont bother with p9_tag_lookup just store the pointer to req instead of that to as opaque data
99c1f08f6459cfa6fe1f5fb68706b437e006be2e	rbd record mapped size add the size of the mapped image to the set of mapping-specific fields in an rbd_device and use it when setting the capacity of the disk
31a3248dd97be9268859abed9a30c1040b2f4090	bluetooth simplify if statements in tlv_data_is_valid function the if statements for checking the flags parameter could be written a bit easier to read this changes this no functional behavior has been changed
d1afa65ca59d4e6a5f1a8c1ab9bfa73f2fa8b777	trivial use bug_on use bug_onx rather than ifx bug the semantic patch that fixes this problem is as follows identifier x x bug identifier x bug
6de25d05439a49554ede8f663bbae4900a6c0547	staging rtl8188eu remove unused function declarations
daad1660285a967b5da363e8de264e86b4a496a0	ath9k fix regression in bssidmask calculation the commit that went into __float__ ath9k summarize hw state per channel context group and set hw state opmode primary_sta beacon conf per channel context instead of whole list of vifs this would allow each channel context to run in different mode broke multi-vif configuration due to not properly calculating the bssid mask the test case that caught this was create wlan0 and sta0-4 __number__ total not sure how much that matters associate all __number__ works fine disconnect __number__ of them leaving sta0 up start trying to bring up the other __number__ one at a time it will fail with iw events looking like this in these logs several sta are trying to come up but symptom is the same with just one the patch causing the regression made quite a few changes but the part i think caused this particular problem was not recalculating the bssid mask when adding and removing interfaces re-adding those calls fixes my test case fix bad comment as well
db08948b97180a3c9f49ce91caf1fb643a8110be	vme fake remove unexpected unlock in fake_master_set is unlocked in some error handling path without take the lock so remove those unexpected unlock
92b69f509196fc5afc6a357511b864d372f42419	workqueue sanity check in wq_worker_sleeping in theory is equals to in wq_worker_sleeping after is checked and cpu sanity check will help us if something wrong
7410b3c6c5c919d1ca432fb47ce75a8092729eae	remove nr_segs unused function parameter nr_segs is no longer used in bio_alloc_map_data since c8db444820a1e3 block dont bvec array anymore
2c2f7ec1425e76d4a4cce43c0221032c0f94dae9	at86rf230 remove tx_timeout this patch removes tx_timeout handling we used it in sync xmit handling since we support async xmit handling a xmit timeout handling isnt easy to implement and should be implemented by netdev watchdog mechanism
cb2336b5965d95d03e46d145d5e11aea4eaab0ad	liquidio remove unnecessary code remove code thats no longer needed it used to serve a purpose which was to fix a link-related bug for a while now the nic firmware has had a more elegant fix for that bug
97387e3baaf3c35ad560f8878e943c720a77da1b	ldm fix reassembly of extended vblks from ben hutchings decadent.org.uk extended vblks those larger than the preset vblk size are divided into fragments each with its own vblk header our ldm implementation generally assumes that each vblk is contiguous in memory so these fragments must be assembled before further processing currently the reassembly seems to be done quite wrongly no vblk header is copied into the contiguous buffer and the length of the header is subtracted twice from each fragment also the total length of the reassembled vblk is calculated incorrectly
04e57767ef1805393f22ef9989e5dfcb61379711	staging rtl8723au use ether_addr_copy
cbf0541374e2fcfdfdcaf8365c957a137eb9feea	input uinput support injecting multiple events in one write call rework the code in uinput_inject_event so that it matches the code in evdev_write and allows injecting more than one event or zero events
6d1d8dfa8b65831cfa9a528e3d17efa7e7f4226c	uprobes dont put null pointer in uprobe_register alloc_uprobe might return a null pointer put_uprobe cant deal with this
59399c59262bbb8ae60a37935c3a512d2e79cca3	use spin_event_timeout to poll the indicator register macro spin_event_timeout was designed for simple polling of hardware registers with a timeout so use it when we poll the miimind register this allows us to return an error code instead of polling indefinitely note that phy_init_timeout is a count of loop iterations so we cant use it for spin_event_timeout which asks for microseconds
963719c872a3a71bc2abf4d4899392acab93b09d	usb host ohci-at91 remove useless uclk clock now that the system clock driver is forwarding set_rate request to the parent clock we can safely call clk_set_rate on the system clk and get rid of the uclk field
099256e58ef63ba171d5418fdc662e093cdba1be	media media rc nuvoton-cir switch resource handling to devm functions switch to managed resource handling using the devm_ functions
c8b62ab41f76218efca5e4baa5c22ef52a9fe3a5	arm tegra add pllc clock init table pll_c will be used as a clock source fill in tegra_pll_c_freq_table so that its possible to explicitly initialize the pll nvidias downstream kernel and the chromeos kernel have different pll_c tables contains entries for and output whereas the chromeos kernel contains entries for output i chose to upstream the chromeos values for now since the rate appears to match the default rate of this pll when the hw boots and its not clear to me why __number__ or are more useful swarren wrote commit description
cbf0aceff852b794b74ab1fd7c311121cb879917	use arch independent types in uapi header user api structs should not use types which depends on architecture the patch fixes it for all structures except drm_exynos_g2d_userptr as g2d related stuff seems to be more complicated and will be later
dfd7c845ba981af4994b50c11d58fd230ca15a32	pm devfreq rockchip-dfi fix module autoload if the driver is built as a module autoload wont work because the module alias information is not filled so user-space cant match the registered device with the corresponding module export the module alias information using the module_device_table macro before this patch modinfo grep alias after this patch modinfo grep alias alias alias
3d7b5a2882133a04716903b1f4878a64c6610842	btrfs automatic rescan after quota enable command when qgroup tracking is enabled we do an automatic cycle of the new rescan mechanism
63e24c497158c066583b9c06378d89ace694265a	smack use memdup_user rather than duplicating its implementation reuse existing functionality from memdup_user instead of keeping duplicate source code this issue was detected by using the coccinelle software
d720e055945ca039939b2a857b7c54d22de9dff7	media cx18 use setup_timer use setup_timer instead of init_timer to simplify the code
1c7fae18a1fb6b6bcd6669066ee801769de0e943	pci imx6 use u32 not uint32_t use u32 not uint32_t for consistency use tmp not temp for consistency within the driver
686dc6b64b58e69715ce92177da0732a6464db69	ipv4 compat_ioctl is local to make it static ipv4 compat_ioctl is local to make it static
cda57a1ef6f0da7e24f392ffdf00538ec0480310	nfs set verifier on existing dentries in nfs_prime_dcache nfs_prime_dcache currently only sets the verifier when it doesnt initially a matching dentry in the dcache set the verifier in the case where we do find a dentry in the dcache this ensures that we dont have to look up the dentry again if we want to use it after a readdir
97bb59a03dd6767fcc00be09b0c6d9e5294eeea6	rbd fix a memory leak in rbd_get_client if an existing rbd client is found to be suitable for use in rbd_get_client the rbd_options structure is not being freed as it should fix that
4fa0a0ef292a416210018a1074c7b5056773d649	net ieee802154 mrf24j40 use spi_get_drvdata and spi_set_drvdata use the wrapper functions for getting and setting the driver data using spi_device instead of using with so we can directly pass a struct spi_device
7c68dd435b3ea128550c3eed62cd3cb405431374	fix wrong reading of reserved_eqs we mistakenly read the reserved_eqs field as a standard numeric value rather than a log2 value
2a3edc5d55c23ee7e2c7fa662ac76cc41863c7a4	media common dont break long lines due to the restrictions and latter due to checkpatch warnings several strings were broken into multiple lines this is not considered a good practice anymore as it makes harder to grep for strings at the source code as were right now fixing other drivers due to kern_cont we need to be able to identify what printk strings dont end with a it is a way easier to detect those if we dont break long lines so join those continuation lines the patch was generated via the script below and manually adjusted if needed use while if ne if if __number__ substr __number__ __number__ x __number__ substr __number__ x __number__ if ne print print if ne else print next else print else if if next print
b9f918a31d629e99c9ca3d6ac2a2d7a905715c69	mpilib fix comparison of negative mpis if u and v both represent negative integers and their limb counts happen to differ mpi_cmp will always return a positive value this is obviously bogus u is smaller than v if and only if it is larger in absolute value
4e44cd08d9581423f10df7887ffeff685571122a	media coda fix driver_data for mx53 coda_7541 is the coda_product type for mx53 the driver_data for mx53 is coda_imx53 instead
c47ac6aee6df4dc17460f56dd66af0a271e8392c	add validation to flow specifications parsing add validation check that all set fields in flow specification are supported by vendor
df8557982fb3fa0a1e638cd1bf7b7092a202fa32	rename hash_size fix the warning warning hash_size redefined in file included from from from from from warning this is the location of the previous definition
4971f2bdb746e6cc8423ea60f99694884f6052c5	port oom changes to do_page_fault commit d065bd810b6deb67d4897a14bfe21f8eb526ba99 mm retry page fault when blocking on disk transfer and commit make pagefault killable the above commits introduced changes into the x86 pagefault handler for making the page fault handler retryable as well as killable these changes reduce the mmap_sem hold time which is crucial during oom killer invocation port these changes to openrisc
679750054ae8129a536734bccf526ff6da35376a	mark pnv_pci_init_ioda2_phb as __init mark pnv_pci_init_ioda2_phb as __init it is called only from an init function pnv_pci_init and it calls an init function pnv_pci_init_ioda_phb pnv_pci_init init pnv_pci_init_ioda2_phb non-init pnv_pci_init_ioda_phb init this should fix a section mismatch warning
199964b1d080d82cc8d39a7df1ece8671ef07753	media staging media lirc fix module_parm_desc typo it tx_mask was intended instead of tx_maxk
d7d0a75c4486f0e493af61d769aa49b94ae4c8bd	common modes sweep ignores sweep common_modes array should start with index __number__
7488b1b94b46f262a60a94d9468d324201574cf8	input stmpe-ts report btn_touch event stmpe touchscreen supports btn_touch event but doesnt report it add btn_touch reporting capability to the stmpe touchscreen driver
ff77c150f71b761dcf29b9d1947df3165d2dc83e	hwrng core drop current rng in set_current_rng rather than having callers of set_current_rng call drop_current_rng we can do it directly in set_current_rng
d2866409baaf644c8f875498b05fd3adf26fcdcd	alsa log emu8000 dram size at level info detected sound font memory goes unreported unless the kernel was built with alsa debugging enabled elevate that to a pr_info
ac3c5ec8d4d6aa026465e61fb70bbf8baabd073b	staging bcm2835-audio removed redundant check this was reported by
bb273c8f9399f81e20222448c475ecc362a083f3	arm at91 update struct atmel_nand_data to support pmecc user will use the newly added field correction_cap and sector_size to pass pmecc parameters to driver
ce7fda2e15afa7996ee922c8619ea514dff6f66f	introduce i915_vm_to_ggtt in a couple of places we have an i915_address_space that we know is really an i915_ggtt that we want to use create an inline helper to convert from the i915_address_space subclass into its container
3c860ab40cf1719977b78ef58942b9be46013319	use dsi pll1 for enabling mipi dsi on port c dsi pll1 is used for enabling dsi on port c v2 addressed review comments of jani used operator instead of for
47701a36a3ed6d97e5bbe7ad72cceb49ca329d00	vlan unlink the upper neighbour before unregistering on netdev unregister were removing also all of its sysfs-associated stuff including the sysfs symlinks that are controlled by netdev neighbour code also its a subtle race condition cause we can still access it after unregistering move the unlinking right before the unregistering to fix both
eacd0c47966b918f10c7ac1a91dd9fccb0f58ddd	input tegra-kbc simplify use of devm_ioremap_resource remove unneeded error handling on the result of a call to platform_get_resource when the value is passed to devm_ioremap_resource move the call to platform_get_resource adjacent to the call to devm_ioremap_resource to make the connection between them more clear a simplified version of the semantic patch that makes this change is as follows expression expression ret __number__ identifier l res platform_get_resourcepdev ioresource_mem n when res if res null when res res platform_get_resourcepdev ioresource_mem n e devm_ioremap_resourcee1 res
2cb63c7901fb33557ac612a3ba399a903c0d7357	net __number__ remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
fe638401a091f4473e9e30942ea3cecc0c0b2b94	arm64 perf extend armv8_evtype_mask to include commit arm64 perf enable pmcr long cycle counter bit added initial support for a cycle counter enabled using unfortunately that patch doesnt extend armv8_evtype_mask so any attempts to set the enable bit are ignored by armv8pmu_pmcr_write this patch extends the mask to include the new bit
16040894b26af9f85d9395f072c53d76a44eba21	tipc fix compatibility bug in commit d999297c3dbbe7fdd832f7fa4ec84301e170b3e6 tipc reduce locking scope during packet reception we introduced a new function tipc_link_proto_rcv this function contains a bug so that it sometimes by error sends out a non-zero link priority value in created protocol messages the bug may lead to an extra link reset at initial link establising with older nodes this will never happen more than once whereafter the link will work as intended we fix this bug in this commit
7d5691e5ce814b43c08d5d5701c73346de4d1356	staging bcm replace ushort with unsigned short in this patch replaces ushort with unsigned short in
bfe17178a8240c008484c43cf9e018d43ff9a990	media lmedm04 make some string arrays static it takes more to initialize these on the stack than they occupy in so just make them static const
ed3347e83cce7edf6cd9b5e530b9da11908d2f83	asoc da9055 replace direct snd_soc_codec dapm field access the dapm field of the snd_soc_codec struct is eventually going to be removed in preparation for this replace all manual access to with snd_soc_codec_get_bias_level
2c2770541040318fa6ac0ac4424d8af6dd0709bf	at91 correct check of buf used in dma we only use buf of ring in dma rx function while using buf of xmit in dma tx function so in dma rx we need definitively to check the buf of ring which is corresponding to dma rx function and use macro page_aligned to simplify the expression
bcffe53fcb96efe326a909dece5f32e1dd8eaa6a	regulator rc5t583 remove unused fields from struct rc5t583_regulator_info the and of struct rc5t583_regulator_info are not used after convert to use regmap remove them
34a03c1d30f04ca7439c685c0ea9b7d79c353705	coresight fixing cpu hwid lookup in device tree some dt specification will represent cpu nodes with address cells greater than one making the current code fail using the proper retrieval helper function ensure the correct hwid for cpus is read properly with different address cell size
b61e9dcc5e77d534fa770a02877fd45f51d4e7f4	stick msghdr into raw_frag_vec well want access to
4e776381e0ea81500129ebaa213048e257d79e69	bump i40e to and i40evf to bump change-id ie0c36583ffd9997679f46bdf89bc462d3e992995
c11082f0c00acde7c9049e92dbcafd1f73fb60e6	b43 enable radio rev __number__ support aka bcm43217
43c9e3846ba30ca3d657bd82f1005d1573bb3a6d	ath10k fix htt tx ce ring size qca4019 can queue up to __number__ frames at a time this means it requires roughly __number__ entires on the ring to work properly otherwise random tx failure may occur
0dfa95aaa817eec8473abf5465eae135b1cf1138	mips ptrace switch syscall reporting to tracehook_report_syscall_entry set ret just so __must_check is satisfied but dont use the variable for anything yet
eb17cee275ac5d0bcd31ed2d205051088140ce49	media em28xx remove obsolete device state checks from the ioctl functions v4l2_device_disconnect is called when the device is disconnected so that the v4l2-core rejects all ioctl calls
d644a115e86433abbb544808c4be1e4b5a048c2b	asoc samsung-i2s use devm_snd_soc_register_component
13d932f79cea6b59b9a18a54c2e776d88799654d	staging speakup remove extern keywords from prototypes addresses check check extern prototypes should be avoided in files removes the extern keyword from function prototypes
66be084885979bf8718383846a156c9da56c5a5c	serial remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
6ab5db9ca63377904136dce678f0c42f09f1ce6d	staging comedi adv_pci_dio remove valid member from private data this member is set at the end of the driver attach and is only used to verify that pci_dio_reset can be called in the the only requirement for pci_dio_reset to work is that the is valid remove the valid member from the private data and use to see if the reset can be done
47b1be5c0f4ed4991f3d956dbd7ba69cb5bc521f	staging request irq only after adding the crtc if the bootloader already enabled the display the interrupt handler will be called as soon as it is registered if the crtc is not already added at this time the call to imx_drm_handle_vblank will result in a null pointer dereference the patch fixes a kernel panic __number__ which has been on linux-next since jan __number__ __number__ __number__ __number__
3645adbbab4329dd83a41674a56bf4afcdcc5914	ixgbe fix uninitialized in ixgbe_ptp_check_pps_event this patch fixes a bug in ixgbe_ptp_check_pps_event where the type was uninitialized and could cause unknown event outcomes
57b63d00df0ded2e3ac98a28588a87901704bad8	drop write perm from module params which dont support changing weve given write permissions to dynamically change some module parameters through although they only support setting on module load fix the permissions
48265667a756ab1c2750048caee3da719a86ebb2	be2net pad skb to meet min tx pkt size in lancer in lancer packets that are __number__ bytes or less may cause a transmit stall the work-around is to pad such packets to a __number__ byte length
deb6596f163b7340ff8f5a7c23e25317e165c669	alsa refactor slot assignment code there are two loops that are almost identical but only with different checks refactor them with a simple helper and give a bit more comments whats doing there
0191a2a28cdc34a57fee2c027c101a023f9a61f9	media em28xx fix check for audio only usb interfaces when changing the usb alternate setting previously weve been assuming that the video endpoints are always at usb interface __number__ hence if vendor audio endpoints are provided at a separate interface they were supposed to be at interface number __number__ instead of checking for interface number __number__ to determine if an interface is a pure audio interface should be checked
06d71bcfee91b2be105f43c85fcd3960e179818b	arm sun6i add restart code for the a31 the allwinner a31 has a different watchdog with a slightly different register layout that requires a different restart code
025b4a545fc4ef99fb44b32842c6bc30d3690a3f	i40e add fw check to disable dcb and wrap autoneg workaround with fw check for fw __float__ dcb should be disabled also autoneg workaround to avoid rx stall is still needed for fw __float__ change-id iff36ad86be2f597e7701096014d6d094332a9a21
6decd63acacb3b8de81ccc435cf9acea8b6bdfeb	rhashtable-test fix division a division went in unnoticed use do_div to accomodate non architectures reported-by kbuild test robot
8c8282c04d6aef91db1729cd5a2ab314598d23ed	hdmi use proper power-up sequence this reflects the power-up sequence as described in the documentation but it doesnt seem to be strictly necessary to get hdmi to work
1dd3cdc7ff3cc190b99be41ab01346ea2039189a	staging cxt1e1 remove set a value to static variable cleanup error error do not initialise statics to __number__ or null
959c9bdd5828981d3d226873aba930019798fa65	fix invalid iommu table ben found the root cause commit fix pci-e devices rescan issue on powerpc platform overwrites the iommu table of pci device while enabling pci device the patch intends to fix the iommu table after that point
bd5632b0989b180db1199f7fc6969dd4ca45643d	ath10k fix board data fetch error message the error message order of board data fetch is board info directory and then file name hence place print arguments in the order
ab6039a70bb559b2fb5f363934da67d864ccda2a	ixgbe fix race condition with shutdown it was possible for shutdown to pull the rug out from other driver entry points now we just grab the rtnl lock before taking everything apart thanks to hariharan for noticing this tight race condition
420766a97a93279ef5ccc096aa55ef8e03000e08	arm mxc imx-sdma device gets iosize than the sdma on all imx soc gets io space not
3b6521f53572d7fc1b40c93931948716a53a82ab	deposit a pgtable for dax pmd faults when required although all architectures use a deposited page table for thp on anonymous vmas some architectures s390 and powerpc require the deposited storage even for file backed vmas due to quirks of their mmus this patch adds support for depositing a table in dax pmd fault handling path for archs that require it other architectures should see no functional changes link
91d542f4dcc231749c36114ed8e26bb27d4521e4	mtd bcm47xxpart look for nvram at the end of device nvram is always placed at the end of device and it does not have to start at the beginning of a block so check few possible offsets
b6fe8e7c0189d017fdba90d1cd134337098c19c3	arc export symbol for pm_power_off in need export symbol for it or can not pass compiling the related error with allmodconfig modpost __number__ modules error pm_power_off undefined error pm_power_off undefined
21d9625180e953853257ffaec38f52200d8489f0	powerpc kernel drop owner assignment from platform_drivers a platform_driver does not need to set an owner it will be populated by the driver core
fcb44e12d38a18f99d22ff66e739bb2f2ac762f0	thinkpad_acpi add the ability setting tpacpi_led_none by quirk some new lenovo or thinkpad laptops dont have ec controllable leds their led quirks are __number__ this patch set when quirk equals __number__
623f594e7d20e4b5dac50aba5bd23822f2a95d6f	proc make struct unsigned unsigned int is better on x86_64 because it most of the time it autoexpands to value while int requires movsx instruction link
b5a0a9b59c8185aebcd9a717e2e6258b58c72c06	read and set up l1 substate capabilities the pcie spec sec __float__ says the l1 pm substates capability may be implemented only in function __number__ read the l1 substate capability structures of upstream and downstream components of the link and set it up in the device structure bhelgaas add specific spec reference
fce8591f73c6a30c231f220d1092362aae0b985c	pci designware fix transfers by using cpu not realio address which is the input of the outbound io address translation unit should be the cpu address it was incorrectly programmed to the realio address we should pass global_io_offset rather than to pci_ioremap_io so we map the new window into the first available spot in the linux view of the space we must also pass cpu address instead of realio address to pci_ioremap_io this patch fixes above issue it has been tested with lecroy ptc in aic mode and pericom pi7c9x2g303el pcie switch which does not work otherwise reviewed-by marek vasut
3655bba8fe693e31c44c43cd30a9aaeee8bd45df	bluetooth check address in mgmt_disconnect_failed check the address and address type in mgmt_disconnect_failed otherwise we may wrongly fail the mgmt_op_disconnect command
953b19013a0dd313490db9bc625609a6936c5c98	fix null vs zero in sparse warning this patch fixes the warning using plain integer as null pointer generated by sparse by replacing the offending with null if the initialization with null was unnecessary due to unconditional assignment before first use it was removed
ee64baf4ea3b7affb7e325bb3d188515ec4bb66e	use __builtin_expect for we always expect that get_user and put_user return with zero give the compiler a hint so it can slightly optimize the code and avoid branches this is the same what x86 got with commit a76cf66e948a tell the compiler that uaccess is unlikely to fault
3c7ec94d2c4a67d9663a080aa5080134308261c4	modpost use proper kernel style for autogenerated files if the kernel build process is creating files automatically the least it can do is create them in a properly formatted manner sure its a minor issue but being consistent is nice
a2105ae1de117e17522d37b6dedb1f286c544160	bluetooth enable delete_netdev to be scheduled when last peer is deleted this patch fixes an issue with the netdev not being unregistered when the last peer is deleted removing the logical negation operator on the boolean solves this issue if the last peer is removed the condition will be true and the delete_netdev is scheduled
80ba4f1d365af206b9e818d17d22fed02fe5def0	mwifiex fix null pointer deference when adapter is null if adapter is null the error exit path in mwifiex_shutdown_sw is to down the semaphore sem and print some debug via mwifiex_dbg however passing a null adapter to mwifiex_dbg causes a null pointer deference when accessing this fix checks for a null adapter at the start of the function and to exit without the need to up the semaphore and we also skip the debug to avoid the null pointer dereference
67f03de5f0ad6b4b0481bb43e4a819d1a441900b	avoid races when updating tb_update_count the increment might not be atomic and were not holding the timekeeper_lock therefore we might lose an update to count resulting in vdso being trapped in a loop as other archs also simply update the values and count doesnt seem to have an impact on reloading of these values in vdso code lets just remove the update of tb_update_count
3415b57cb3d7b6b6cd5fcbf5f3f64ca28a3f95e2	usb input fix up dev_err usage we should always reference the input device for dev_err not the usb device fix up the places where i got this wrong
73577d61799e8d8bb7d69a9acdc54923e5998138	ehci-platform add the max clock number to __number__ allwinner a64 ehci requires __number__ clocks to be enabled
8f76f5a01d1c4126d6f6393f9a7bcfe244a5fded	use helper to turn off crtc use shiny new drm_crtc_force_disable instead of open coding the same no functional change intended link
210fd7460e755c6de4972bca4ffa9cd9580279aa	tty vt compute vc offsets in advance only improves readability no functional changes
9a2477c2cabddf6fa52eda49502017191b34acb6	staging lustre make functions only used locally static add a static modifier to two functions that have no separate declaration and are only used within the file they are defined in this problem was reported by sparse
e539761d98dbd80204867194a9f110f8392c2637	iwlwifi mvm add iccm data to __number__ b-step data dump in __number__ hw family b-step only the iccm is separate from the sram this adds the iccm to the dump data collected for fw debug
d7f621e50704306c348ccb192f17047f1499f9bc	enable logical ring contexts hence execlists the time has come the walrus said to talk of many things
8797fe75f164d4b2f183e776003612ece565c76e	tile-module use kmalloc_array in module_alloc a multiplication for the size determination of a memory allocation indicated that an array data structure should be processed thus use the corresponding function kmalloc_array replace the specification of a data type by a pointer dereference to make the corresponding size determination a bit safer according to the linux coding style convention
a0eba4f7ebcdf81da0a4480d8fc514af4f76579e	openrisc export ioremap symbols used by modules noticed this when building with allyesconfig got build failures due to iounmap and __ioremap symbols missing this patch exports them so modules can use them this is inline with other architectures
e0ac913374247f000aa97fdd732dcaf0070dd466	asus-laptop log unknown keys
3cc6e78777ae6f577b67e26c76577ef357ac9009	remoteproc remove redundant null check before release_firmware release_firmware deals gracefully with null pointers so checking first is redundant
76a10e2b3a9dc3e6a290681aa126776c0ad304ad	lkdtm rename count to crash_count the count variable name was not easy to understand since it was regularly obscured by local variables of the same name and its purpose wasnt clear this renames it and its lock to crash_count which is more readable
e1cdee73dfcac393768117511e52a6142587dacf	spi fsl-espi determine need for byte swap only once determine need for byte swap only once and store it in new member swab in struct fsl_espi
93f5afe9560b80e03a58ba5324ec71124df7655f	drbd if disk timeout expires fail only the affected volume not all volumes of the resource
14cddfd5308b0880abd6e58b6660f5cc8e8020f9	update amd mcheck init to use cpu_has facilities use cpu_has facilities to find available ras features rather than directly reading cpuid __number__ use the struct cpuinfo_x86 ptr instead link
de03cd716ba7b8103ef9bef425be1ac72b81aeca	mtd docg3 add erase functions add erase capability to the docg3 driver the erase block is made of __number__ physical blocks as both share all __number__ pages that makes an erase block of at least __number__ kbytes
f283d22713b0bdc147097c92c9b45855339cf1c8	apm fix deadlock in apm_ioc_suspend ioctl i found the xorg server on my arm device stuck in the msleep loop in apm_ioctl i suspect it had attempted suspend immediately after resuming and lost a race during that a new suspend cycle must have started and changed to suspend_pending so it was never seen to be suspend_done and the loop could never exited it would have moved on to suspend_ackto but never been able to reach suspend_done so change the loop to only run while suspend_acked rather than until suspend_done this is much safer
cf193f6d2ad322cdec1872b28d761db8d22e5c00	fix lnagain assignment to use register __number__ this should be register __number__ instead of __number__ probably happened by from the lines below
c0771df8d5297bfb9c4fbe8ada085a49cb22ec4f	intel-iommu export a flag indicating that the iommu is used for igfx we really dont want this to work in the general case device drivers care whether they are behind an iommu or not but the integrated graphics is a special case because the iommu and the gtt are all kind of smashed into one and generally horrifically buggy so its reasonable for the graphics driver to want to know when the iommu is active for the graphics hardware
d5d1e1bed4da02bd7a2352ab495721e31a7d95e4	usb chipidea udc return immediately if re-enable non-empty endpoint some gadget driver like uac1 will try to enable endpoint again even the ep is not empty it will cause the ep reset again and may affect the dtd list which has already queued it returns immediately and indicate the endpoint is in use in this way the eps behavior will not be affected and the gadget driver is also notified
11588f493a2441f09ceb2088d07cc012b53cbf75	nfs check return value from rpc_queue_upcall this function could fail to queue the upcall if is not running causing a warning message to be printed instead i want to check the return value and revoke the key if the upcall cant be run
f28b49d2bcdb9ef9e771b3d6750f40be9d453316	define new cr4 bit there is a new bit in cr4 for enabling protection keys we will actually enable it later in the series link
0bc2c9b4dca9668a236fde48ebb15e5f0735cbff	nfsv4 dont discard the attributes returned by asynchronous delegreturn delegreturn will always carry a reference to the inode except when the latter is being freed so lets ensure that we always use that inode information to ensure close-to-open cache consistency even when the delegreturn call is asynchronous
270ca16bc7ff575a5900aec2475fa7f8742f7337	bluetooth remove header declared but not defined hci_del_off_timer doesnt exist anymore
d584515fbb59d65bd307f7a453e7849489f62986	isdn fix typo in correcting spelling extenal to external in
be0f6dbca39036213893d8b83a7779d96844c144	video da8xx-fb remove unneeded var initialization modedb helper now updates var information based on the detected panel remove the unnecessary initialization
8fe6a79fb8088a759b3dc57eb641fc3183ad72b8	net_sched sch_plug use a private throttled status we want to get rid of generic qdisc throttled management so this qdisc has to use a private flag
a11a2bf4de5679fa0b63474c7d39bea2dac7d061	sunrpc optimise away unnecessary data moves in xdr_align_pages we only have to call xdr_shrink_pagelen if the remaining rpc message does not fit in the page buffer length that we supplied to xdr_align_pages
50d60c6322f14e32bc11635732c54db1447fd3f5	wcn36xx fix coccinelle warnings warning opportunity for simple_open see also structure on line __number__ warning opportunity for simple_open see also structure on line __number__ this removes an open coded simple_open function and replaces file operations references to the function with simple_open instead generated by
9de79c500600c5868e83712a2ea5b0b48f83af24	mips change use of unsigned short to int use types elsewhere in the code patchwork
fd7524294ccaa6168593042121e3bbd26a529fd5	media v4l2-dv-timings use swap in v4l2_calc_aspect_ratio use macro definition thanks to julia lawall for coccinelle scripting support
1eba648f998ef9c31b8cf062754a4a7b4ab9001f	rtl8180 enable rtl8187se support finally make rtl8187se works hopefylly this patch adds pci id for rtl8187 updates copyright notes and updates module_description
749586b7d34df910118bff2c248d08877d772e81	use async_tx_quiesce instead of open-coding it handle_stripe_expansion contains if tx async_tx_acktx dma_wait_for_async_txtx which is very similar to the body of async_tx_quiesce except that the later handles an error from dma_wait_for_async_tx admittedly by panicing but that decision belongs in the dma code not the md code so just us async_tx_quiesce
a7c6f30c02326a5acccc602b0d0f08a9853eec3f	pinctrl zynq fix utf-8 errors fix up name in the zynq driver i caused this i fix it
ebe5a0596f2ee4182dc42b39583be71e81aa0443	gpio vt8500 export dedicated gpio before multifunction pins the vendor does not provide numbering for gpio pins vendor source exports dedicated gpio pins first followed by multifunction pins as this is what end users expect this patch changes vt8500 and wm8505 to do the same
80e9710b34550ae906424feb2cf40dee0422ce46	media cx24120 convert ucblocks to dvbv5 stats dvbv3 is a legacy api drivers should use dvbv5 in order to support modern applications so implement ucb using dvbv5
fd7723e29e4f61c54d2e08295cda1986665dc8e5	usb host constify dev_pm_ops structures declare dev_pm_ops structures as const as they are only stored in the pm field of a device_driver structure this field is of type const so dev_pm_ops structures having similar properties can be declared const too size details after cross compiling the file for powerpc architecture file size before text data bss dec hex filename __number__ __number__ __number__ __number__ de3 file size after text data bss dec hex filename __number__ __number__ __number__ __number__ de3
984c9d38ae370993f28b36c8be9923b1de39f5e7	greybus interface deactivate interface on enumeration failure deactivate an interface immediately on enumeration failure note that an interface is always registered
d174a024007dd543fd066cffd8eb727806a62da6	register ability of alarm to wake device from suspend
9969441f9f86a8a7de8c36514fa789e5f5d83145	xfs add dax truncate support when we truncate a dax file we need to call through the dax page truncation path rather than through block_truncate_page so that mappings and block zeroing are all handled correctly otherwise truncate does not need to change
bda2f8fca20b564ac8edb2b9c080d942c2144359	add missing iio_buffer_init make sure to properly initialize the iio buffer data structure
dc9372808412edbc653a675a526c2ee6c0c14a91	of_irq_find_parent check for parent equal to child an interrupt controller may often implicitly inherit itself from a parent node when in fact the controller is the interrupt root controller guard against the case of child parent and return null in this case this can also be fixed by adding an explicit interrupt-parent to a root interrupt controller node based on code from grant likely
26d04ca8c46e3af510f0bbbe4d0b1aca8e18b393	asoc lm49453 use soc_enum_single_decl just replace with the helper macro no functional change at all
569174433d3bd96e206a4b5969a4498371c70d16	batman-adv use per_cpu_add helper this_cpu_add is an atomic operation and be more faster than per_cpu_ptr operation
f6c137ff00a478ae619deea8650829dd2f8e71b9	kvm s390 randomize sca address we allocate a page for the sca so lets use the space to improve hit rate of some internal cpu caches no need to change the freeing of the page as this will shift away the page offset bits anyway
80dbb01ad762a2a111b5abad55e44b0408ec342e	sound dmasound_atari remove obsolete irq_type_slow irq_type_slow is no longer used by the atari platform interrupt code since commit patch m68k convert atari irq code in so drop it note that its value has been reused for a different purpose irq_type_none since commit patch genirq core in
6d41533433e2eff26005ee39d103948fa65dd891	virtio-gpu wait for cursor updates finish
48b5953ed826224a1332f2fd784d37d5f084ca9c	gpio gpiolib dont compare an unsigned for __number__ the parameter offset is an unsigned so it makes no sense to compare it for __number__ fix the compiler warning regarding this by removing this comparison as the macro gpio_offset_valid is only used at this single place simplify the code by dropping the macro completely and dropping the invert too no functional change
62f14c0ef5d1bbd640b42a59f8f084f764a067c4	pinctrl samsung do not pass gpio_chip to pin_to_reg_bank the pointer to gpio_chip passed to pin_to_reg_bank utility function is used only to retrieve a pointer to samsung_pinctrl_drv_data structure this patch modifies the function and its users to pass a pointer to samsung_pinctrl_drv_data directly
b75d280272bd0cbc79024b4635b0ccd67c416953	leds leds-wm8350 use dev_err instead of printk fixes the following type of checkpatch warnings warning prefer netdev_errnetdev then dev_errdev then to printkkern_err
9df30601c843aeb9877c966d9d75d4947117c923	restore vlan filter after seamless reset when detaching the mlx5e interface clear all the vlans rules from the vlan flow table when attaching it back restore all the active vlans rules to the hw
06412088ce98f745405b8f65cfc51ddd6b842bbf	asoc s3c2412-i2s fix dai registration as s3c2412-i2s is using the s3c_i2sv2 it should call the more specialised s3c_i2sv2_register_dai instead of simply calling snd_soc_register_dai without this call the snd_soc_dai_ops structure isnt initialised correctly
2267a0c85c4314b64440b9a1e3442d2eb90a719f	fix return value for non-existent ioctls for non-existent ioctls should be returned
b4ad0f04907f40a873c49e86afb034cafab16d5d	staging bcm merged some lines which got shorter by the latest patch
f2f33387f999bd914938dc2da4a3408ea14ad878	ixgbe update ptp_overflow check comment and jiffies this patch fixes the comment on ptp_overflow_check to match up with what is currently used as the parameters also change the jiffies check to use time_is_after_jiffies macro
35b6280899424a0faf5410ce1ee86f9682528e6c	libceph define and use ceph_crc32c_page factor out a common block of code that updates a crc calculation over a range of data in a page this and the preceding patches are related to
45a5b3a183b43e07b7d1eaf1ef7c00fc87511b1b	hwmon nct6775 check array index when accessing temp_offset smatch complains about a potential out-of-bounds access to the temp_offset array that doesnt happen in practice but it doesnt hurt to add an explicit check either this prevents potential problems in the future for example if the number of fixed temperature sensors is increased to add support for another chip
a1d263428ac7447afd9f79fce8d2d7863a2307e2	enhancing edp drrs debug message when downclock mode is not found the same info is added to the corresponding debug log
d5ebe37e8cded781bb91ac63dda2da180ecb90b6	input wdt87xx_i2c populate vendor and product in input device these attributes can be used to identify controllers present in the system
075719c3cb79f309fc775a7f8f49d91a0351ceb3	convert messages in gmc v6 to make the kernel log messaging more consistent and use the functions instead of a mix of and printk
1b9b922a3a601b0c99a095ffafed61fcf6ebe0b7	btrfs check for empty bitmap list in setup_cluster_bitmaps dave jones found a warning from kasan in setup_cluster_bitmaps bug kasan stack-out-of-bounds in at addr __address__ read of size __number__ by task __address__ mapping null flags __number__ page dumped because kasan bad access detected cpu __number__ pid __number__ comm nfsd tainted g w __address__ __number__ __address__ __address__ __number__ __address__ __address__ __address__ __address__ __number__ __address__ __number__ call trace __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ andrey noticed this was because we were doing list_first_entry on a list that might be empty rework the tests a bit so we dont do that
45e4089bc6398da2cf0609b614bc519970cb8442	perf tests fix attr watermark field name typo currently the watermark field is coded as watermask as the type is global through the framework and tests the typo spawned no error link
83d7c81f6a6a28b7c3f3512b1d09d37593aaa43b	store bxt de pll vco and ref clocks in dev_priv we have need to know the de pll refclk and output frequency in various cdclk calculations so lets store those in dev_priv
ad745810070e013f8f66744dc31ab7c202881dec	mtd s3c2410 remove unnecessary oom messages the site-specific oom messages are unnecessary because they duplicate the mm subsystem generic oom message
47ef34271b8714b01ec1647d9013abf8f11fda3d	asoc wm8940 use soc_enum_single_decl just replace with the helper macro no functional change at all
b9eef55c2ab33053ae236b5d383965f9ee6a0094	net fec fix rmon registers on imx6 commit fec add support for reading rmon registers causes the imx6q to crash this fixes it by only enabling the rmon registers the registers are already cleared by the mac being reset
cc293bf7a9aa6fad68d107c79705732bd2fc57e3	convert use of typedef ctl_table to struct ctl_table this typedef is unnecessary and should just be removed
772a6e1fff9a8c942e982598632cfc41451e2e9a	staging rtl8723au fix sparse errors in this patch fixes the following sparse errors check warning incorrect type in assignment different base types expected unsigned int unsigned usertype got restricted __le32 usertype warning incorrect type in assignment different base types expected unsigned int unsigned usertype got restricted __le32 usertype warning incorrect type in assignment different base types expected unsigned int unsigned usertype got restricted __le32 usertype warning incorrect type in assignment different base types expected unsigned int unsigned usertype got restricted __le32 usertype
9f89df3ed6846629c8a30c42a0856f891b5b47d3	i2c exynos5 remove an unnecessary read of fifo_status register this patch removes an extra read of fifo_status register in the interrrupt service routine which is read again before the actual use
123a17d1427a2d7ad9142df1f6543c578864a0dd	media em28xx-i2c fix the error code for unknown errors commit e63b009d6e em28xx-i2c fix error code for i2c error transfers changed the code to return on all unknown errors but the proper error code for unknown errors is so only report in case of the errors and which are according to mauro carvalho chehabs tests related to i2c clock stretching and return for the rest
1f2a30037bf18ae6d1bab2c47caeceb4eb0f6464	do not use netdev_err before the netdev is registered since it is un-named at this time
11ccf116d0d756d06989775288e41f737d98e0c5	block fix warning with calling smp_processor_id in preemptible section after commit introduced an unsafe calling of smp_processor_id with preempt debuggin turned on we spew a lot of bug using smp_processor_id in preemptible __number__ code caller is from from from from from from from from from from fix this by just using raw_smp_processor_id its just a hint after all theres no pinning of the cpu or accessing per-cpu structures involved
96081cdfae35c1e332be42d89dee278c72d8915d	remove unnecessary braces remove unnecessary braces to silence the following type of checkpatch warnings warning braces are not necessary for single statement blocks warning braces are not necessary for any arm of this statement
faae5aae2d4d7fe976d6ef62c3c209b8990124ac	wlcore check ssid length against the correct element commit wlcore compare ssid_len before comparing ssids introduced a new bug the ssid length from the request struct was compared against the ssid length of another request instead the one of the cmd this might cause the sched scan request to fail with in many cases
d0306a514da25976fde942d21f85b12384dd4c1f	staging usbip fix sparse warnings regarding endianness the whubcharacteristics field in usb_hub_descriptor structure is __le16 so there is no need for cast the cpu_to_le16 returns a __le16 type for a u16 type used cpu_to_le16 to silence last sparse error warning incorrect type in assignment different base types expected restricted __le16 usertype whubcharacteristics got unsigned short unsigned usertype warning incorrect type in assignment different base types expected unsigned short unsigned short usertype got restricted __le16 usertype warning incorrect type in assignment different base types expected unsigned short unsigned short usertype got restricted __le16 usertype warning restricted __le16 degrades to integer
cdcac9cd7741af2c2b9255cbf060f772596907bb	pci_regs define lnksta2 pcie cap bits we need these for detecting the max link speed for drm drivers
dd30333cf5a2f9dfecda5c6f4523133f13847aae	nfsd4 better error return to indicate ssv non-support as __float__ becomes less experimental and ssv still isnt implemented we have to admit its not going to be and return some sensible error rather than just saying our servers broken discussion in the ietf group hasnt turned up any objections to using nfs4err_enc_alg_unsupp for that purpose
f468911feec94201b4296e3fe7480ebaf278fc4d	detach backing store from its resources when it is evicted when the backing store buffer is evicted issue a readback from the resources and notify the resources that they are no longer bound to a valid backing store
c13fb7789096596f7cd5a64b24dbb66116bfc519	fix cxsr_latency_table reorg i have re-ordered some struct members in patch commit date thu oct __number__ __number__ shrink cxsr_latency_table but that particular one is not initialized with named initializers which broke it move the bitfields back at the beginning space saving is still there link
3beb27028c446dce74a1690ea3ef2dfae7503e74	rtl8187 enable monitor mode to fix multicast reception the rtl8187 cards dont seem to receive multicast frames which among other things makes them fail to receive ras in ipv6 networks the cause seems to be that the rtl818x_rx_conf_multicast flag doesnt have the desired effect fix the issue by setting rtl818x_rx_conf_monitor instead which puts the card into monitor mode and resolves the problem so that multicast frames are sucessfully passed to the kernel the existence of the problem and the effectiveness of the solution has originally been confirmed on an based card with the usb id of subsequent testing by larry finger on an based card which follows the second __number__ non-b code path in the driver has confirmed that the fix does not cause any noticeable regresssions there either
ec71997eff2231098212a99934c0fb987a9e6b04	rtlwifi initialize local array and set value gcc __float__ is spitting out uninitialized-variable warnings against error ofdm_index_old1 may be used uninitialized in this function ofdm_index_oldi this patch adds initialization to the variable and properly sets its value
372039031c62886c8c5b57a7b0111446e9caefa8	mac80211 fix for mesh sync to indicate tbtt adjustment currently the mesh sync code checks whether peers indicate tbtt adjustment but it never sets the corresponding flag itself by setting to true it will set the corresponding field in the mesh configuration ie of own beacons this indication will be set in the current beacon the tbtt adjustment will be performed afterwards affecting the next beacon thus the first beacon with stable tbtt will not indicate adjustment anymore and peers will continue tracking the new offset
587c0a42552a69a58e7ccd363d30fd48d809fdcb	f2fs add offset check routine before punch_hole in f2fs_fallocate in the punch_hole if offset bigger than inode size it returns success then f2fs_fallocate will update time and dirty mark in that case inode has not been modified actually so i have added offset check routine that prevent to call the punch_hole
b4d2d23148b446f6853e711eb31c533c7385eba5	powernow-k6 really enable auto-loading commit fa8031aefec0cf7ea6c2387c93610d99d9659aa2 cpufreq add support for x86 cpuinfo auto loading v4 added a device id table to this driver but didnt declare it as the module device id table
53d498198d3e8bce4287112beafc30befcba98cc	dm cache metadata check the metadata version when reading the superblock need to check the version to verify on-disk metadata is supported
9777cca0c4d3d35a97cb5711be575967712bd59b	skip capturing an error state if we already have one as we only ever keep the first error state around we can avoid some work that can be quite intrusive if we dont record the error the second time around this does move the race whereby the user could discard one error state as the second is being captured but that race exists in the current code and we hope that recapturing error state is only done for debugging note that as we discard the error state for simulated errors igt that exercise error capture continue to function
1ac90609b721824b9a9a5b5fd4e4b647a3d28d45	usb storage remove redundant memset in usb_probe_stor1 scsi_host_alloc will zero our private data no need to memset it
f0947e5ccedb749b2f701aa5279cd8f848a720a1	f2fs fix i_name during f2fs_sync_file as similar as the i_pino fix i_name also should be fixed when i_nlink is __number__ the errorneous scenario is like this __number__ touch test1 __number__ link test1 test2 __number__ unlink test2 __number__ fsync test1 after this i_name should be test1
a0676f608322812f9a71e15144d25c32d60c954d	gart fixes for vega10 flags need to be __number__ to be considered invalid
8ba4fcdf0f4068407e98cd9cc0f230c2dd8d56de	module unify the return value type of try_module_get the prototypes of try_module_get are different with different macro when enable module and module unload it returns bool but others not make the return type for try_module_get consistent across all module config options jeyu slightly amended changelog to make it clearer
ad34b42e542366f7b79d2d8a72fdd6ac3c146513	input rotary_encoder remove redundant platform_set_drvdata commit device-core ensure drvdata null when no driver is bound removes the need to set driver data field to null
b5f98e65c0d887388eb9cbf55c76cb97fb4c2187	clk clean up everything on debugfs error maybe the third time will be the charm if config_common_clk_debug is defined clk_debug_create_one is called to populate a debugfs directory with a few entries that are common for all clock types if an error happens after creating the first one debugfs_remove is called on the clocks directory the problem with this is that no cleanup is done on the debugfs files already created in that directory so the directory never actually gets removed this problem is silently ignored fix this by calling debugfs_remove_recursive instead reset the field to null afterward to ensure it cant be mistaken as a valid pointer
aa8c09be7a6f58e1b0dd19413d872fffdb054677	arm64 mmu move tlb maintenance from callers to create_mapping_late in preparation of refactoring the kernel mapping logic so that text regions are never mapped writable which would require adding explicit tlb maintenance to new call sites of create_mapping_late which is currently invoked twice from the same function move the tlb maintenance from the call site into create_mapping_late itself and change it from a full tlb flush into a flush by va which is more appropriate here also given that create_mapping_late has evolved into a routine that only updates protection bits on existing mappings rename it to update_mapping_prot
5f2eca833cc244c6872e83fb4a5faaae1c0a87b7	perf c2c report fallback to standard dimensions fallback to standard dimensions in case we dont find the dimension within c2c ones link
12aad550f005fef2dd0ad40e4978549f64f8f296	crisv10 stop returning info from handle_ser_rx_interrupt the return value is not used anywhere so no need to return anything
4b8c59a3d83e9cf2b65b16999a0c704fc72de056	serial sh-sci support generic sclsr overrun detection for all ports with a valid sclsr register we can use the generic fifo overrun detection logic test the validity of the sclsr register rather than depending explicitly on port type which can be ambiguous for the types
0fcb5c76ca71afbef6c18d0710f2d4557b1d216a	ptp sfc convert to the __number__ bit time methods this patch changes the driver to use the newer api depending on how the hardware represents a time value this driver may or may not yet be ready for the year __number__ compile tested only
6ddd855c13bcd324a2d9756134e6b57c659cfde6	hwmon tmp103 remove duplicate test for i2c_func_smbus_byte_data functionality since commit b42261078a91 regmap i2c fallback to smbus if the adapter does not support standard i2c regmap-i2c will check the functionality based on the regmap_config setting if the adapter does not support standard i2c so remove the i2c_func_smbus_byte_data functionality check in the driver code
daf41ac2c4b5b2e663079ccc58b8d6a70a3c111b	media uvcvideo simplify redundant check x constant implies x unsigned constant that check just obfuscates the code
89482a56a079f01c2f4c709f8e23fbf7eeda1b43	cifs add a third receive phase to cifs_demultiplex_thread have the demultiplex thread receive just enough to get to the mid and then find it before receiving the rest later well use this to swap in a preallocated receive buffer for some calls
53675abbd1e54a30e621a9744bf9cce0712ddd6c	x86 apm remove unused variable commit x86 switch from ts_polling to tif_polling_nrflag left variable polling unused so remove it
5a96ffbe795d71347fbebac9cf29772543d22961	staging comedi dt282x remove use of comedi_error the comedi_error function is just a wrapper around dev_err that adds the prefix to the message and a terminating new-line character the addition of the driver_name is just added noise and some of the users of comedi_error add unnecessary additional new-line characters use dev_err directly instead of comedi_error to avoid any confusion and so that all the comedi generated kernel messages have the same format
3500b0be62c8cc2f93e8022dc70071ec31b067de	video s3c-fb disable runtime pm in error paths from probe
cf61e2a1487d833e4748dead4096584de70bf742	memremap dont modify flags these patches implement a memremap_wc flag for memremap which can be used to obtain writecombine mappings this is then used for setting up dma_coherent_mem regions which use the dma_memory_map flag the motivation is to fix an alignment fault on arm64 and the suggestion to implement memremap_wc for this case was made at __number__ that particular issue is handled in patch __number__ which makes sure that the appropriate memset function is used when zeroing allocations mapped as io memory this patch of __number__ dont modify the flags input argument to memremap memremap_wb is already a special case so we can check for it directly instead of clearing flag bits in each mapper
fd48e639dfd3e86dd85bdeb40512a44b74b02e6f	cxgb4vf initialize mdio_addr before using it in commit cxgb4vf fix ethtool get_settings for vf driver mdio_addr of port_info structure was used unininitialzed fixing it
3d8b2b489e490ae63b7eddb3dcdfcee9bc32d473	write magic value to channel object to make it work looks like the rewrite in commit ebb945a94b port all engines to new engine module format missed that one little detail
feb8cd0fe7d63fd259c28f8a52fc88745717c9ec	mei bus revamp probe and remove functions instead of generating device id on the fly during probing we find the matching id entry on the device id table get bus the module reference counter so it cannot be unloaded after the driver has bounded to the client device
a5c0e0b4ac07434056c5c4ecafeb9a5cff3d1a9d	align code with open parenthesis this patch fixes one existing alignment checkpatch check warning of the type alignment should match open parenthesis in the omap iommu debug source file
0ccb7eefeb56c8d3cdce53ede23e06c8be894670	pci xgene request host bridge window resources request host bridge window resources so they appear in ioport_resource and iomem_resource and are reflected in and for example the following entries did not previously appear in __address__ __number__ __address__ pci bus __number__ __address__ __number__ __address__ __number__ __address__ __number__ __address__ __number__
47825a9b1b37b38cca1891e5393da4b13155f165	staging comedi pcl726 tidy up pcl726_attach for aesthetics add some whitespace to the subdevice initialization only allocate and initialize the digital input and output subdevices if the boardinfo indicates that they exist on the board
f95cb5ebd834117ff4829a460656095a0ae63921	omapdss dispc skip scaling calculations when not scaling current code calculates scaling factors for video overlays even when the overlays are not scaled change the code to skip calculations when not scaling this optimizes the code a bit but also fixes a problem when configuring an overlay for a disabled display if the display is disabled we dont necessarily know the pixel clock used when the display is enabled and in some cases like hdmi the pixel clock is set to zero until a proper video mode is set later a wrong pixel clock will mess up the scaling calculations causing an error like omapdss dispc error failed to set up scaling required fclk rate __number__ hz current fclk rate __number__ hz a proper fix would be to check later whether the clocks are enough for the scaling at the point when the overlay or display is actually enabled but this patch removes the problem for now
7d780555c03e052756b97ff6625dceb03e8575d8	staging comedi pcl725 remove subdevice pointer math convert the comedi_subdevice access from pointer math to array access
95ad5c291313b66a98a44dc92b57e0b37c1dd589	dcache d_splice_alias should detect loops i believe this can only happen in the case of a corrupted filesystem so looks like the appropriate error
c091ff51b4d2543b828d53ce47f66905dee870fd	dmaengine shdma make channel filter ignore unrelated devices the shdma_chan_filter function relies on the dma channel being embedded in an shdma_chan structure if this assumption isnt true for instance when the system contains dma channels supported by an unrelated driver the function will crash avoid this by returning false directly when the channel belongs to an unrelated device
221a27c240343b39052c05baa64deace845801ff	input cypress_ps2 remove casting the return value which is a void pointer casting the return value which is a void pointer is redundant the conversion from void pointer to any other pointer type is guaranteed by the c programming language
dcd211997ddba3229e875f5990ea14f920934729	qla2xxx fix scsi_host leak on qlt_lport_register callback failure this patch fixes a possible scsi_host reference leak in qlt_lport_register when a non zero return from the passed does not call drop the local reference via scsi_host_put before returning this currently does not effect existing tcm_qla2xxx code as the passed callback will never fail but fix this up regardless for future code
6e06780a98f149f131d46c1108d4ae27f05a9357	dont clear shared banks on intel when offlining cpus it is not safe to clear global mci_ctl banks during cpu offline or operations these msrs are either thread-scoped meaning private to a thread or core-scoped private to threads in that core only or with a socket scope visible and controllable from all threads in the socket when we offline a single cpu clearing those mci_ctl bits will stop signaling for all the shared socket-wide resources such as llc imc etc in addition it might be possible to compromise the integrity of an intel secure guard extentions sgx system if the attacker has control of the host system and is able to inject errors which would be otherwise ignored when mci_ctl bits are cleared hence on sgx enabled systems if mci_ctl is cleared sgx gets disabled cleanup text link
0f750be948852325f84466d136316ef510e7fd7b	staging ozwpan convert hard coded value to macro use macro instead of hard coded value for readability
5b896029e9c4c9fd67eed80b7400dd68bdd93f52	fix error return code the function dmfe_init_one return __number__ for success and negative value for most of its internal tests failures there are three exceptions that are error cases going to fore this three cases the function abort its success execution path but returns non negative value making it dificult for a caller function to notice the error this patch fixes the error cases that do not return negative values this was found by coccinelle but the code change was made by hand this patch is not robot generated a simplified version of the semantic match that finds this problem is as follows return ret __number__ when ret e1 when when ret e2 when forall return ret
c3e75c7d5e203b6d1d16519bef8571b5d228b7fe	media v4l2-dv-timings fix cvt calculation this patch fixes two errors that caused incorrect format detections the first bug is in the calculation of the vertical backporch the combined period of vsync and backporch must a certain minimum value and not be equal to it the second bug is a rounding error in the reduced blanking calculation expand the ideal_duty_cylce to be in parts per ten thousand to avoid rounding errors
bf4a1c920286076609779c2c70c5a2bf69169fc7	add devices attached to the system mmu to an iommu group patch written by antonios motakis iommu groups are expected by certain users of the iommu api vfio since each device is behind its own system mmu we can allocate a new iommu group for each device
2ebe21fdde1c92ef1654f23d29194145be0e1ddc	net order mpls ethertypes numerically all ethertypes other than eth_p_mpls_uc eth_p_mpls_mc and eth_p_atmmpoa were already ordered numerically this commit moves those three values into correct numerical order too
b7eec52bcb7ab93a8cce0f718f42fa17d6d91745	mac802154 tx cleanup crc calculation
e71f41bc7f73ec7f2cb678b51ace47eb05dc6af1	bluetooth use bdaddr_bredr type for old blacklist ioctl interface the old blacklist ioctl interface was only able to operate on addresses so use the bdaddr_bredr address type definition instead of an open coded magic __number__ value
4531929e3922f2cdd34208d7dc1404ac06e6ced5	f2fs move grabing orphan pages out of protection region move grabing orphan block page out of protection region and grab all the orphan block pages ahead jaegeuk kim remove unnecessary code pointed by chao yu
7b0ce60c0b203a2a037f308e387152acbf99c445	sunrpc drop double-underscores from im planning on using these functions inside the client so remove the underscores to make it feel like im using a public interface
3ec53d6fceedbe0a5af0bb7dcb42e82dabd795d3	m68knommu convert printkkern_info to pr_info the old style use of printkkern_info is depracated convert use of it in to the modern pr_info
4b1fb9352f351faa067a914907d58a6fe38ac048	macsec fix netlink attribute validation macsec_validate_attr should check ifla_macsec_replay_protect not ifla_macsec_protect to verify that the replay protection and replay window arguments are correct
3033d2c0dd1d7ecbc8d4e04a7c1085931f86b68a	backlight lm3639 remove unnecessary return statements fixed the following checkpatch warning warning void function return statements are not generally useful
8707d5abbd96f7a124647357005511bee8d3ccdd	usb renesas gadget dont touch udc-core now handles that for us which means we can remove it from our driver
89272b8c0d427021bed70b1b83e1a16be375ccf5	dt add empty of_get_property for non-dt the patch adds empty function of_get_property for non-dt build so that drivers migrating to dt can save some config_of this also fixes the current tegra compile problem in linux-next
dbe95ad00b95a8baaedd87ce84996d95e5811055	arm shmobile r8a7779 use gic_iid macro arm shmobile add gic_iid macro for icciar interrupt id enabled to use gic_iid macro this patch exchange current gic interrupt setting from gic_spi to gic_iid updated git commit id in changelog
b80b93096bc05f013418e315ccc544ce2e8efc28	drivers net cpsw-phy-sel add am43xx platform support am43xx phy mode selection is similar to am33xx platform so adding only the compatibility string to the driver
f5e4626097f865783177f265d7793995bd8a2a76	crypto omap-sham correct dma burst size each cycle of sha512 operates on __number__ data words where as sha256 operates on __number__ data words this needs to be updated while configuring dma channels doing the same
1f4bd45a7e4238b154791c24c32d5619b2046531	mtd cs553x_nand remove unnecessary oom messages the site-specific oom messages are unnecessary because they duplicate the mm subsystem generic oom message
7f46ddbd487e0d0528d89534fdfb31d885977804	kvm apic fix ldr calculation in x2apic mode
fc184f089220f7abd604993d7c69218603c2ffb2	sctp use bitmap_weight use bitmap_weight to count the total number of bits set in bitmap
8431de80dad20979cc8354a90f70e2faac017932	msm_serial_hs fix type inconsistency for tx and rx command_ptr_ptr both tx and rx command_ptr_ptr are of type while allocating memory for it sizeofu32 is used as part of kmalloc api instead of sizeofu32 adm hardare requires size of command_ptr_ptr as __number__ word both sizeofu32 and sizeofu32 are same on architecture whereas sizeofu32 would be different in size compare to sizeofu32 on anyother architecture hence correct usage of sizeofcommand_ptr_ptr for tx and rx with kmalloc and apis
1e5cc266dbc401d11aefb966ad35e651c2f67414	batman-adv skip the window protection test when the originator has no neighbours when we receive an ogm from from a node for the first time the last_real_seqno field of the orig_node structure has not been initialised yet the value of this field is used to compute the current ogm-seqno window and therefore the protection mechanism will probably drop the packet due to an out-of-window error to avoid this situation this patch adds a check to skip the window protection mechanism if no neighbour nodes have already been added when the first neighbour node is added the last_real_seqno field is initialised too
606f13e9efa0892561e7c471242e4ad0bcaf6ecb	gpio max732x fix irq-events handler max732x clears all pending interrupts on i2c read when interrupts register is being read driver doesnt need to send any acks when interrupt was handled so replace handle_edge_irq with handle_simple_irq using handle_edge_irq callback set may lead to null pointer dereference in some cases this was observed on hibernation process unable to handle kernel null pointer dereference at virtual address __number__ backtrace handle_edge_irq from resend_irqs resend_irqs from tasklet_action tasklet_action from __do_softirq __do_softirq from run_ksoftirqd run_ksoftirqd from smpboot_thread_fn smpboot_thread_fn from kthread kthread from ret_from_fork
0f2ee9bea701d1712aa505eee8ddf5e98870c3f6	staging comedi daqboard2000 check spaces preferred around that fix checkpatch issues of the form check spaces preferred around that
b8de73df1b5143c3d567e707e4dab0b20c82ab54	staging hv storvsc fix a typo fix a typo in a function name
7cd35277b4b7af2121dbc5534fc112e2b3896ef4	delete duplicate added for dcx delete the duplicate introduced by commit author a.sunil kamath intel.com date thu apr __number__ __number__ implement for display c5 state
bd07b0076b465712804a5b01609dbe8fba9b9110	staging wilc1000 rename pstrtailmsg in wilc_mq_send this patch renames pstrtailmsg to tail_msg to avoid camelcase
57bfa9d41741614cb945064521fc8904440313c7	staging bcm hostmibs added temporary variable to shorten lines
cea82d8af3986508a05949cfbb6ad8e99ffc15eb	asoc wm8731 use the preferred form for passing a size of a struct according to chapter __number__ the preferred form for passing a size of a struct is the following p the alternative form where struct name is spelled out hurts readability and introduces an opportunity for a bug when the pointer variable type is changed but the corresponding sizeof that is passed to a memory allocator is not so do it as recommeded
719d5a9b2487e0562f178f61e323c3dc18a8b200	kvm x86 ensure emulator fetches do not span multiple pages when the cs base is not page-aligned the linear address of the code could get close to the page boundary even if the eip value is not so we need to first linearize the address and only then compute the number of valid bytes that can be fetched this happens relatively often when executing real mode code
3677a649a751c8f061ba379a98c369473ccac980	fix for thunderx erratum the goal of erratum workaround was to make sure that asids and vmids are unique across all smmu instances on affected cavium systems currently the workaround code partitions asids and vmids by increasing global cavium_smmu_context_count which in turn becomes the base asid and vmid value for the given smmu instance upon the context bank initialization for systems with multiple smmu instances this approach implies the risk of crossing asid like for cn88xx capable of __number__ smmuv2 __number__ context banks each smmu_0 asid range smmu_1 asid range smmu_2 asid range crossing asid smmu_3 asid range crossing asid since now we use asid __number__ we effectively misconfigure bits of smmu_cbn_ttbrm register for moreover we still assume non-zero bits upon context invalidation in the end except devices all other devices under other smmus will fail on guest power since we try to invalidate tlb with asid but we actually have zero padded entry this patch adds asid support for stage-1 aarch64 contexts so that we use asids consistently for all smmu instances
a0049865ea53df19a3f14128fa080719e8f4bdba	move hotplug even debug print to second connector loop the hotplug work function has two loops iterating over connectors the first for handling hotplug disabling due to irq storms and the second for actually handling the hotplug events move the debug printing into the second one so we can abstract the storm handling better this may change the output ordering slightly when there are multiple simultaneous hotplug events
9751a9e449da2a7749d89968039d532c615beeaa	thermal power_allocator allocate with kcalloc what you free with kfree commit cf736ea6f902 thermal power_allocator do not use interfaces forgot to change a devm_kcalloc to just kcalloc but its corresponding devm_kfree was changed to kfree allocate with kcalloc to match the kfree
092b6dbe8a4a24c17f2ebfe86995dc994e61f420	mmc android-goldfish remove incorrect __iomem annotation make sparse happy sparse incorrect type in argument __number__ different address spaces
8785955bbc28be446bcb2ad08cfb0599246746f7	mwifiex remove unnecessary null check ra_list cannot be null here so remove the unnecessary null check
0243508edd317ff1fa63b495643a7c192fbfcd92	ipv6 fix protocol resubmission udp encapsulation is broken on ipv6 this is because the logic to resubmit the nexthdr is inverted checking for a ret value __number__ instead of __number__ also the resubmit label is in the wrong position since we already get the nexthdr value when performing decapsulation in addition the skb pull is no longer necessary either this changes the return value check to look for __number__ using it for the nexthdr on the next iteration and moves the resubmit label to the proper location with these changes the v6 code now matches what we do in the v4 ip input code wrt resubmitting when decapsulating
627f7675f0f530ea555d76543dc4e469d70a1532	use in ironlake_panel_vdd_work use of the struct_mutex is not correct for locking in mode setting paths
9dc16f64e84fea59d6af6bb5da59603b369ff05c	ia64 reuse system and user vtime accounting functions on task switch to avoid code duplication
efb15c396445644aaea9d88e68300762f01fca92	net ethernet davinci_emac use there are two generics functions so we can use them instead of defining the same code in the driver
3efa921d5b50c045259f6556262fed77dfecec86	pinctrl sunxi fix incorrect null check should be tested for null instead of map as kmalloc pointer is assigned to it this also fixes a potential null pointer dereference bug later in the code
9a7a848df1995f05f750b4ed491ac80a459c912f	media exynos4-is fix error handling of irq_of_parse_and_map return value of irq_of_parse_and_map is unsigned int with __number__ indicating failure so testing for negative result never works
b6eb48d02dc73d19bebc396a9e92dd64a65d3199	minix describe usage of different magic numbers one can get this information from but adding the explanations at the definition sites is more appropriate
13a4f42016fecbf971c3f6e249027a009a83839f	alsa bebob apply new enumerator to normalize the type of clock source previous commit allows this driver to detect several types of clock source while theres no normalized expression for it this commit adds a new enumerator for this purpose
1ebfcc1f5884509925522ab76c17db9befe0aac9	bluetooth look up rpa for connection requests with identity address we need to check whether theres a matching irk and rpa when were requested to connect to a remote le device based on its identity address this patch updates the hci_connect_le function to do an extra call to hci_find_irk_by_addr and uses the rpa if its cached this is particularly important once we start exposing the identity address to user space instead of the rpa in events such as device connected and device found
6f2efbdeda5e45e7087f3ae0f8c354056a96491c	blackfin serial bfin-uart remove unused field remove unused field for hardware flow control
ca3504be633315cb19b433bada574d109065e2fa	staging rtl8723au rtw_surveydone_event_callback23a remove superfluous memset
023934b4052b1a955ac8d68c8d4b216d1c55c611	asoc spear_pcm no need to wrap snd_dmaengine_pcm_close if a pcm driver using the dmaengine pcm helper functions doesnt need to do anything special in its pcm_close callback snd_dmaengine_pcm_close can be used directly for as the pcm_close callback and there is no need to wrap it in a custom function
20a34e78f0d71cab058a943b2e9601b97b761227	update color management during vblank evasion without this a vblank may occur between updating color management and planes which should be prevented intel_color_set_csc was called in update pipe config because the handover from hardware may not have any csc set which resulted in a black screen because of this also update color management during fastset mlankhorst remove comment in response to review feedback
b56fa1ed09615f148271045d220b1c55580bdfc9	alsa hda check array bounds in get_input_path this gives us some additional safety
703860ed4e36ded696bd44af6107243fdedfb746	pci use u8 not int for pm capability offset the power management capability pci_cap_id_pm is defined by pci and must appear in the pci configuration space from it cannot be in the pcie extended configuration space from so we only need a u8 to hold its offset
fe392efdae2982243e3a560b8f41c8e4c89b5d51	skip watermark merging for inactive pipes even though the inactive pipes should have their watermarks set to all __number__ with we can possibly shave off a few cycles by completely skipping the merge procedure for inactive pipes
c2a137cb634f5819cdebad315cd6eea598d8255d	i40evf fix up strings in init task make sure errors are reported at the correct log level quit printing the function name every time and make the messages more consistent in format v2 removed unnecessary periods and redundant oom message change-id i50e443467519ad3850def131d84626c50612c611
2a07616cd9d5482c8388b8c4762b51f7ec02ba42	staging comedi amplc_dio200_common use comedi_buf_write_samples the used in this driver for async commands returns the full scan with each sample so it should have the sdf_packed subdev_flag set add the missing subdev_flags and use comedi_buf_write_samples to add the sample to the async buffer the async events will set properly by the core a dev_warn message will also be output by the core if the buffer overflows remove the unnecessary events and dev_err message in the driver
0834be6c52367d397d75e185dad549e3da9be312	staging most remove unneeded null check the loop cursor of list_for_each_entry_safe can never be null
ab7322af8c620987ed058e39506c97e5f2d3c65c	perf strlist load should return a negative errno to match what its users return link
3d930678034e756d0960d214412d344772b21109	clk ux500 register slimbus clock lookups for u8500 at the same time the prcc bit for the kclk is corrected to bit __number__ instead of __number__
db5225d4050d5ef4bd7e9aced161c87d6a90decc	staging ipu-di add comments explaining signal generator configuration
0dc68bc0840e6772a29e0066abf8914e75856d57	arm davinci dm355 remove dma resources for spi the driver is converted to not use the dma resource
1d1e9a467c7a478d24a1af39e467a414a8363661	be2net dont call vid_config when theres no vlan config be_vid_config is called from be_setup to replay config cmds after a card reset skip calling it when no vlans are configured
6507babab4f7fe6c51c20abedd66d7449b7a9aca	wl18xx make driver operational again we have done updating the driver to the new fw api so make the driver operational again
085617a1eb865c2987c05652bf82d35f500ac4b4	usb gadget printer define pnp string buffer length avoid using magic numbers
fdb1e28e05c9d1d6d9c3226e5443ad12e2032e00	mwifiex fix missing debug messages some critical messages are missed until gets initialized in mwifiex_register_dev we will use print message instead of mwifiex_dbg at those places to resolve the problem
ac0a2e98927e4797ae716b7327c3a9c85ba5431c	mmc sh_mmcif convert to previously only were being used adapt properly to the clock api by also using
36cc9fd9ce0fd0e4654890aa347d258616aef5fa	soc ti wkup_m3_ipc drop wait from wkup_m3_rproc_boot_thread the function wkup_m3_rproc_boot_thread waits for asynchronous firmware loading to parse the resource table before calling rproc_boot however as the resource table parsing has been moved to rproc_boot theres no need to wait for the asynchronous firmware loading completion so drop this
bd6f0bba1d2705748ec94e0aa23ae0c5bd6b2287	cdrom remove unnecessary prototype for cdrom_get_disc_info move the function to the proper spot instead
a3d86542de8850be52e8589da22b24002941dfb7	add pebsv3 decoding pebsv3 as present on skylake fixed the long standing issue of the status bits they now really reflect the events that generated the record
20f12f2c4819a36de92ec6be382d0636d3485c6b	asoc cs35l33 mark pm functions as __maybe_unused the newly added cs35l33 driver produces a harmless warning when config_pm is disabled error cs35l33_runtime_suspend defined but not used error cs35l33_runtime_resume defined but not used this adds __maybe_unused annotations to shut up the warning regardless of the configuration
fb856e50900a84dd9f8d50d3882eb4a26ba6ea54	bluetooth cleanup rfcomm device registration error handling if rfcomm tty device registration fails cleanup by releasing the tty_port reference to trigger rfcomm_dev destruction rather than open-coding it the dlc reference release is moved into rfcomm_dev_add which ensures cleanup in both error paths if __rfcomm_dev_add fails or if tty_port_register_device fails fixes releasing the module reference if device registration fails
85ead8185a7632ca28b52f3948281ad23dec9253	f2fs delete unnecessary wait for page writeback no need to wait inline file page writeback for no one use it so this patch delete unnecessary wait
5102e237912adf5c826cc7421fe25da66d293e94	renesas missing unlock on error path we need to unlock before returning here
5dbdf6feecad54b739cb7a5cff521fba86cabba5	ath6kl return error case when ath6kl_usb_alloc_pipe_resources fails incase the resource allocation for the struct ath6kl_urb_context in the function ath6kl_usb_alloc_pipe_resources fails return this error case so that ath6kl_usb_probe is aware of this error case
d297e1037327884fe9545f434d720fd3e8f18c80	update scanline_offset only for active crtcs update_scanline_offset in intel_sanitize_crtc was supposed to be called only for active crtcs but due to some underrun patches it now gets updated for all crtcs on gmch platforms move the update_scanline_offset to the very beginning of intel_sanitize_crtc where we update the vblank state this seems like a better place anyway since the scanline offset ought to be up to date before we might need to consult it so before any vblanky stuff happens
4a322296680e560a8ff7eb05c1e58a8cf8497344	mfd rt5033 remove unnecessary module_alias the driver has a i2c device id table that is used to create the module aliases which already contains a rt5033 so the alias is not needed
a13f1dc4c3b7ac7de9d9ac266c0ed0374cae3421	use simple_dev_pm_ops use this macro to reduce some of the boilerplate
51dacaa7baa95b00f7369a687295f59d4e963d64	staging rtl8723au remove some unused __number__ header parsing macros
79c134239df989167acd277364b83ff9e91e70c4	net sxgbe fix error paths in sxgbe_platform_probe we need to use post-decrement to ensure that irq_dispose_mapping is also called on moreover if one of the above for loops failed already at so we reach one of these labels with that value of i well enter an essentially infinite loop of out-of-bounds accesses
1cc896ed61fa0441dffef726ff678fd82a9e6265	dont touch invalid iova_domain members when __iommu_dma_map and iommu_dma_free_iova are called from iommu_dma_get_msi_page various helpers are still invoked in the process whcih is unwise since they access a different member of the union the iova_domain from that which was last written and theres no guarantee that sensible values will result anyway clean up the code paths that are valid for an msi cookie to ensure we only do iova_domain-specific things when were actually dealing with one
ca27379f5d2956e08558fbfc0d35b3ba64abbe0c	gpio amdpt add a new acpi hid this patch adds a new acpi hid amdif030 in the pt_gpio_acpi_match
71ad00d61ec861dc68b4544887729850e58cb99b	irq_work fix build failure when config_irq_work is not defined when config_irq_work is not defined difficult to do as it also requires config_printk not to be defined we get a build failure in function flush_smp_call_function_queue undefined reference to irq_work_run undefined reference to irq_work_run recipe for target vmlinux failed simplest thing to do is to make irq_work_run a nop when not set link
947d2756cddec83c72af99b02010002ddc57aeb3	rds tcp call pskb_extract helper function rds-stress experiments with request size __number__ bytes acks using __number__ threads show a improvment when pskb_extract replaces the pattern in the rx path so we leverage the perf gain with this commit
3fe45aeaf2033c9eaa5028ed5ba68b466008876f	alsa hda add pcm volume to vmaster slave list the new parser may use pcm volume but it was missing the vmaster slave list thus master volume didnt control it reference
1acff63f6ec2622662e647364293cc3ca495401f	iser-target fix smatch warning unused return value from down_interruptible
c8a06381501c9b4d9750059967e78ffe6263e537	staging wilc1000 renames u16index variable this patch renames u16index variable to index to remove the prefix variable defined name
779ba5a39214f0e3112bd2b94c26df03dc518a29	acpica events cleanup to move acpi_gbl_global_event_handler invocation out of acpi_ev_gpe_dispatch acpica commit this patch follows acpi_ev_fixed_event_detect which invokes acpi_gbl_global_event_handler instead of invoking it in acpi_ev_fixed_event_dispatch moves acpi_gbl_global_event_handler from acpi_ev_gpe_dispatch to acpi_ev_gpe_detect this makes further cleanups around acpi_ev_gpe_dispatch simpler lv zheng link
1faaa78f36cb2915ae89138ba5846f87ade85dcb	bnxt_en use eth_hw_addr_random use eth_hw_addr_random to set a random mac address in order to make sure will be properly set to net_addr_random
477d9f0ea6ef6c1501b32434dc06ce3fbbf9c200	fix warn_on if drm_dp_aux_chardev is enabled rafael antognollis new drm_dp_aux_chardev feature causes a warn_on if and drm_dp_aux_unregister is called after drm_connector_unregister radeon is the only driver affected by this besides i915 amdgpu calls drm_dp_aux_unregister before drm_connector_unregister
bab6a9eac05360db25c81b0090f6b1195dd986cc	fix setting initial mac address commit optimize rx fast path filter checks introduced a regression under which the mac address read from the card was not converted correctly the most significant byte was not handled fix that
3839c08d3ae44cf39b26eecefdae07f7b2443e7e	arm kirkwood remove unneeded pcie clock adding since the pcie devices is properly initialized from the dt the clocks are now referenced in the device tree nodes and its not needed to have this hack to add them explicitly
ce3d10933a3e2e1d2cb3b9ae91b6b945f189bb90	ion free low memory from page pools first when the shrinkers are called with gfp_high free low memory first it is more important to have free than high memory
2d37545751f27e38aa6beb71564adc35cc2d79ea	staging skein removed space before
bfd14b9a7231e7cf77520bca1848c40c6b6360ae	perf annotate make a copy of filename for passing to basename the basename function may modify the string passed to it so the string should not be marked const link
8b71d441f75d180d3174b2e1b649db385552c266	asoc wm8985 use standard cache sync implementation
a35ad97cd48cfab45f4ee5eb0e6f5787a05cab25	ocfs2 fix deadlock risk when kmalloc failed in dlm_query_region_handler in dlm_query_region_handler once kmalloc failed it will unlock dlm_domain_lock without lock first then deadlock happens
b5016e8203003c44264ec88fe2276ff54a51f689	get rid of rt_mutex_owner_maskall this is a left over from the original rtmutex implementation which used both bit0 and bit1 in the owner pointer commit rtmutex simplify pi algorithm and make highest prio task get lock removed the usage of bit1 but kept the extra mask around this is confusing at best remove it and just use rt_mutex_has_waiters for the masking link
a659643a6b504189e899e56901c760f89eb4bb13	staging comedi cb_das16_cs return __number__ for successful attach the comedi core expects a __number__ value during the attach to indicate an error the normal success return to the kernel is __number__ so use that here
3a122c27673691f99120dcaf36bccaa471bfb0df	limit i915_ring_test_irq debugfs to actual rings for simplicity in testing only report known rings in the mask this allows userspace to try and trigger a missed irq on every ring and do a comparison between i915_ring_test_irq and i915_ring_missed_irq to see if any rings failed v2 move the debug message to after the rings are selected so that the message accurately reflects reality
419e172145cf6c51d436a8bf4afcd17511f0ff79	cpufreq dont leave stale policy pointer in clear when stopping a governor or the pointer may be stale on systems with have_governor_per_policy when a new policy is allocated due to cpu hotplug rjw changelog
9066c6a7eb5492dda0ccd48bb78be52feff9043c	f2fs fix wrong memory footprint statistics in debugfs our value of memory footprint statistics showed in debugfs is not calculated correctly fix it in this patch
a831ffb56048fdd1d99178c34d05469421fd2a36	nfp lock area cache earlier we shouldnt access area_cache_list without its lock even to check if its empty
75ddead2a77db61e818bc0cbe330a856a912f4d9	usb gadget storage-common set fsg_max_luns to __number__ mass storage spec allows up to __number__ luns so lets not add some more restrictive limits
2207a4e1ca6a1bb126360b6d0c236af6664532f2	pinctrl vt8500 wmt remove redundant dev_err call in wmt_pinctrl_probe there is a error message within devm_ioremap_resource already so remove the dev_err call to avoid redundant error message
ef178f9238b142cc1020265e176b20d27fd02ba9	kbuild lto handle basic lto in modpost dont warn about lto marker symbols modpost runs before the linker so the module is not necessarily ltoed yet dont complain about sections link
4096953054ad4369774f9dadc125ef7a57bb9ed0	qla2xxx isp25xx multiqueue shadow register crash fix when creating queues from qla25xx_setup_mode the shadow index register pointers were not being initialized to point at the registers
1201939a6f981cb656872784e39ef443540078cd	asoc cq93vc use core functions support future refactoring by using the core functions rather than calling the driver provided functions directly
39179cb5b789e0c0275ccb8fa83cfaf9257d1474	soc ti knav_qmss_queue return proper error if devm_kzalloc fails return if devm_kzalloc fails
21dbd96f2287a49219d35a0e916cf3f2bcaab9d0	crypto skcipher allow givencrypt to be null currently for skcipher iv generators they must provide givencrypt as that is the whole point we are currently replacing skcipher iv generators with explicit iv generators in order to maintain backwards compatibility we need to allow the iv generators to still function as a normal skcipher when the rng is not present in the initramfs during boot iow everything but givencrypt and givdecrypt will still work but those two will fail therefore this patch assigns a default givencrypt that simply returns an error should it be null
0fa8103be4c20f893486c533e4c6dfbc5ccddeb4	fix drain freelist excessively the drain_freelist is called to drain slabs_free lists for cache reap cache shrink memory hotplug callback etc the tofree parameter should be the number of slab to free instead of the number of slab objects to free this patch fix the callers that pass of objects make sure they pass of slabs
64876fe552cf09ba26b71bd69a004bf72b86dc18	power_supply isp1704_charger add compatible of match for
acd5705d2d17a229b1aa0e549951ec66164b9379	kselftests timers ease alarmtimer-suspend unreasonable latency value on the hardware i have resume latency from an alarm is often seconds with a fair amount of variability due to the rtcs single second granularity having four seconds be the bar is maybe a little too tight so extend this to __number__ seconds
2ce7be1b777d4f06c5b28a397cf85d9beb1bca0e	ubi fix spelling of detach in debug output
ba7454e17f90a7dfecc3eb82ec19eb7ac5b6f0e0	kvm x86 dont take when creating irqchip i dont see any reason any more for this lock seemed to be used to protect removal of when already partially inititalized now access is properly protected using and this shouldnt be necessary anymore
e7f2337ae70e0cdaac577c5a4823775097d0e9e7	mac80211 consider only relevant vifs for radar_required calculation should reflect whether radar detection is enabled for the channel context when calculating it make it consider only the vifs that have this context assigned instead of all the vifs
8127e723dab6f6e7949da43f87e5f946c4b99cf2	cleanup on duplicate assignment while creating the pci root bus through function pci_create_root_bus of pci core it should have assigned the secondary bus number for the newly created pci root bus thus we neednt do the explicit assignment for the secondary bus number again in pcibios_scan_phb
50aefc19c7696973ea6d2cea3c2620b1217a6756	staging vt6655 remove from function name remove from function function name passed as an argument to another function function name is used as pointer without
87983c66bc02c9cd8e4a42e7924435145d52bb13	x86_64 vsyscall turn vsyscalls all the way off when i see no point in having an unusable read-only page sitting at __address__ when instead skip mapping it and remove it from i kept the ratelimited warning when programs try to use a vsyscall in this mode since it may help admins avoid confusion link
6b1eb1450269cadfe992465db9941fc42f3bc688	misc hpilo change e-mail address from to this patch changes maintainers email address from to in
0841b04a5ffba5bd5a7f5b49f014adaf639bf3a4	asoc max98095 fix build failure in function max98095_jack_detect_enable error struct max98095_priv has no member named jack_detect_delay error struct max98095_priv has no member named jack_detect_delay
38a46eb8cc0faec0345c27083fb26d1e7e02ccff	input mc13783_ts use module_platform_driver_probe this patch converts the drivers to use the module_platform_driver_probe macro which makes the code smaller and a bit simpler
47b89ad64526d18baf2ba92e908d36f6f5c991bb	staging wilc1000 handle_set_mac_address rename result this patch renames result to ret that is used to get return value from wilc_send_config_pkt it will be changed until all function has same variable name as ret
3527ed81ca01bbaf09df952e68528377a9cd092f	pci remove in struct pci_bus the pci_bus members are now unused so remove them
4e75732035d7e97e001bdf6e3149d3967c0221de	sysctl dont call sysctl_follow_link unless we are a link there are no functional changes just code motion to make it clear that we dont follow a link between sysctl roots unless the directory entry actually is a link
40a5ec988c3403106f5fb68ca3a328beff3c11bf	usb host ehci-mv use devm_ioremap_resource instead of devm_ioremap using devm_ioremap_resource api should actually be preferred over devm_ioremap since the former request the mem region first and then gives back the ioremaped memory pointer devm_ioremap_resource calls request_mem_region therby preventing other drivers to make any overlapping call to the same region
f50b9e12db1fbe3cef9e819e87955e0c99662a03	dont check resource with devm_ioremap_resource devm_ioremap_resource does sanity checks on the given resource no need to duplicate this in the driver
59dc9f2534569d11a55c8b5dbe93c36f2b2fa506	perf tools fix column alignment when headers arent shown on tui if user sets config option to false it didnt calculate default column width so it broke the alignment this is because it does the calculation just before showing headers move it to the beginning of the hist browser so that it can be called regardless of the config option link
2a16fc93d2c9568e16d45db77c7b5f15e1921cf1	nohz avoid ticks double reprogramming in highres mode in highres mode the tick reschedules itself unconditionally to the next jiffies however while this clock reprogramming is relevant when the tick is in periodic mode its not that interesting when we run in dynticks mode because irq exit is likely going to overwrite the next tick to some randomly deferred future so lets just get rid of this tick self rescheduling in dynticks mode this way we can avoid some clockevents double write in favourable scenarios like when we stop the tick completely in idle while no other hrtimer is pending
443954815b63b36f09623d74170520e6554f5fac	mac80211 mesh dont hash sdata in mpath tables now that the sdata pointer is the same for all entries of a path table hashing it is pointless so hash only the address
473462a1436b5c4b7e62909985b1c8f9b17f028a	mipi-dsi add exynos3 soc support this patch adds socs support
51e20d0e3a60cf46b52ee1af598a35834919ed27	thermal prevent polling from happening during system suspend the thermal driver should use a freezable workqueue to schedule polling to prevent thermal_zone_device_update from being run during system suspend when the devices it relies on may be inactive make it use the system freezable workqueue for this purpose
7daa7624e3adeba0955141d95eef9d66c78e945f	iwlwifi mvm avoid variable shadowing remove an extra variable queue that already exists also since there are no code paths that use queue without intializing it remove the unnecessary zero initialization
a26a42508157bc9fda89e3b1d64e47b9e4b55c30	hsi remove deprecated irqf_disabled remove the use of the irqf_disabled flag from its a noop since and it will be removed soon
e6d53bdcc38d451fa6afbe412a759f132d44f361	ath9k fix internal regulator for ar955x the internal regulator needs to be programmed correctly for ar955x
bb8a79477738ee038c9cfd471e8ab60da1e37177	pci designware-plat remove redundant remove the struct member which is only used as a temporary no functional change intended
00bd059fee89b26d7c4b064abff716174aaacae0	staging comedi adl_pci9118 tidy up the interrupt bit defines rename the camelcase defines used for the interrupt register bits and convert them to bit shifts
a995d9e2a50b30907814f178eeaa1f632a66c0cb	usb gadget bcm63xx_udc dont assign directly udc-core provides a better way to handle release methods lets use it
881c98ff62e0106c3cf6aa521f7c8baf98ebb501	omapdss remove declarations for non-existing funcs dss_mgr_set_device and dss_mgr_unset_device are declared in but the functions do not exist remove the declarations
94e734655fbe294c50d304547cae033e87ec229e	arm at91 do not configure at91sam9g10 twi pio as open-drain as indicated in the datasheet twd and twck must not be programmed as open-drain
bc7892ba39992c6d645e906f1d52a626395b4b11	vxlan allow removal of single destination from fdb entry when the last item is deleted from the remote destinations list the fdb entry is destroyed
5355d96d6fb56507761f261a23c0831f67fa0e0f	convert to core runtime pm
13a32eb08de6fd87044a524b2c644ccfaa6808a3	remove needless parenthesis this patch removes needless parenthesis this was pointed out but in case of fimc side we missed it
477d30d787b969e4c11fc958077cc7954805e236	use module_platform_driver macro this driver does seems to do only platform_driver_register in the init function and platform_driver_unregister in the exit function so replace all this code including the module_init and module_exit with module_platform_driver
3f60498b87f3c3944f78dcd5a9d6e566a300a92b	fix spacing coding style in the following wanings fixed warning please no spaces at the start of a line
b820cd7643d5fdf05d6f5d32507d330609113248	serial altera-uart fix null device in log message add device pointer to before null device ttyal0 at mmio irq __number__ base_baud __number__ is a altera uart after altera_uart ttyal0 at mmio irq __number__ base_baud __number__ is a altera uart
3abef4e6c23feef4aa9ab161ae138d6d39ae69f3	mm numa take thp into account when migrating pages for numa balancing wanpeng li pointed out that numamigrate_isolate_page assumes that only one base page is being migrated when in fact it can also be checking thp the consequences are that a migration will be attempted when a target node is nearly full and fail later its unlikely to be user-visible but it should be fixed while we are there migrate_balanced_pgdat should treat nr_migrate_pages as an unsigned long as it is treated as a watermark
e98c72c94205c59745f9ed0ac2837d5b83084a46	amd-xgbe free structures later the channel structure is freed before freeing the per channel interrupts resulting in a kernel oops move the call to free the channel structure to after the freeing of the per channel interrupts
4335d60e5e271497116fd77ed68dacca7cfb1548	bonding use rcu_dereference to access curr_active_slave the bond_info_show_master already in rcu read-side critical section and the we access curr_active_slave without the curr_slave_lock we could not sure whether the curr_active_slave will be changed during the processing so use rcu to protected the pointer
26481bf41b98746d4e7fa4b56c222ca1dee4dd15	iwlwifi mvm prioritize external nvm values on top of the otp values read first the nvm sections from the otp then read the nvm sections from the external file and override the otp values if there were any values in the otp
b738ae160a9991d133671873f68c2ccffe524d12	media cx88 use dvbv5 parameters on set_params instead of using dvbv3 parameters rely on dvbv5 parameters to set the tuner
06b230e3dd46e3e45fb57990b09007c7cd071515	cpupower fix breakage from libpci api change libpci introduced an additional member in the pci_filter struct which needs to be initialized to to get the same behavior as before the api change the libpci internal helpers got updated accordingly but as the cpupower pci helpers initialized the struct themselves the behavior changed use the libpci helper pci_filter_init to fix this and guard against similar breakages in the future this fixes probing of the amd cpuidle monitor on systems with libpci
03c1b7609fbb367c7a9ae49bd41e72cad38fe305	arm exynos fix build with arm exynos add support for firmware-assisted patch added to new references to functions from causing the new build breakages then arm exynos fix build with and patch tried to fix the issues by always building which caused the build breakage fix it by building only for and adding appropriate is_enabled checks to fixed check and added patch description
d3f8ef1169afb08976b4b1dafe7bc740f655d886	igb fix for improper exit in igb_get_i2c_client this patch fixes an issue where we check for irqs disabled then exit after explicitly disabling them with spin_lock_irqsave
e0a63c0bfcc6f8283377258b5d892f88abd913c1	nfs return directly if encode_sessionid fail encode_sessionid may return error nfs needs process the return value
d5a7f23f9c8be29833ef4d805976b6906c25c658	asoc wm8996 make sure we bounce to reset while it matches the current code only bringing the device out of reset isnt actually doing what the function says so make sure we set the gpio high before we pull it low
d03702a27df017d1807fd4809f03adaa8e37005f	pty add tty_port this has function in the pty driver yet however as the tty buffers will move to the tty_port structure we will need tty_port for all ttys in the system pty inclusive for ptys this is ensured by allocating __number__ tty_ports in pty_install where the is allocated both tty_ports are properly assigned to each end of the tty freeing is done at the same place where tty is freed in this means btw that tty_port does not outlive tty in pty this might be a subject to change in the future if we see some problems
f08654a2b582b4e48e8a4a3d2c5c98832adc4387	spi sirf replace bug condition by error code for unsupported transfer return error for unsupported bits-per-word format bug is not right for this scenerios as we are not an assert but an error handler
c9e79a4714493df6508d8346195ea30fb69b7783	wl12xx set max_sched_scan_ie_len correctly the wiphy max_sched_scan_ie_len attribute was not set correctly and remained as __number__ so when ies were being passed in a scheduled scan we were returning fix this by setting the attribute properly
2c2fea11957c8c45bf873d9bcd7cd9a342654e79	make warning more verbose the warn_on1 in debug_locks_warn_on is surprisingly awkward to track down when its hit as its usually buried in macros causing multiple instances to land on the same line number this patch makes it more useful by switching to warn1 so that the particular debug_locks_warn_on is more easily identified and grepd for for example warning at l
bb5abf9f64df97431a12602d3e8cdea934d48bb3	remove unnecessary checks in dpm_init no need to check this is a vestige of the old pm code
d2b9775d795ec05fb42504c0f47dd06ba5fd709e	serial sh-sci correct pin initialization on hscif correct pin initialization on hscif rts must be deasserted its active low sck must be an input as it may be used as the optional external clock input initial pin configuration must always be done regardless of the presence of dedicated rts and cts pins if the register exists the bits exist too regardless of hardware flow control being enabled or not rts must be deasserted
f170c684b55cb8d3bab55b1fb8fa812778d551f2	scsi ipr reorder error handling code to include iounmap the out_msi_disable label should be before cleanup_nomem to additionally benefit from the call to iounmap subsequent gotos are adjusted to go to out_msi_disable instead of cleanup_nomem which now follows it this is safe because pci_disable_msi does nothing if pci_enable_msi was not called a simplified version of the semantic match that finds this problem is as follows expression statement s e1 when e1 e2 when iounmape1 when any if s return __number__ if when iounmape1 when if iounmape1 return else s
3e5d2fdceda172554e681b68c853bf5d08205bbf	kvm mtrr simplify kvm_mtrr_get_guest_memory_type kvm_mtrr_get_guest_memory_type never returns which is implied in the current code since if means no mtrr contains the range must be true simplify the code to indicate this fact
c5a93a282f09a79d86f4299c03fdf032abec7252	ungate smc clockgating first before suspend put all clockgating support in smc the sequence in suspend routine should be adjusted accordingly otherwise it causes asic hang
8c0069ae3a85eeedbbf955e380e822756f7a9d2f	smsc911x enable transmit time stamping this patch enables software and phy device transmit time stamping compile tested only
f169c10597bd55125fc5c9d0c63b8ebf6dd6b5b2	alsa timer use setup_timer and mod_timer no functional change refactoring with the standard helpers
c7a857a09f1f00e6cb04c6565c136a9f0018532d	media adv7343 use devm_kzalloc instead of kzalloc i2c drivers can use devm_kzalloc too in their methods doing so simplifies their clean up paths
497e1b3f6b6d3cf2206d15687eb7bfa0ab0e968d	input cap11xx add missing of_node_put for_each_child_of_node performs an of_node_get on each iteration so to break out of the loop an of_node_put is required found using coccinelle
6f19a2b1c386d6ef75bcfebf5c1a68d28658d62e	staging usbip userspace libsrc removed assignments in if conditions this patch fixes the following checkpatch error do not use assignment in if condition
ab8b5e49f742efbeb59471fa0f19361a7afe1922	media cx23885 incorrect i2c bus used in the ci registration this patch fixes a bug that was introduced by the commit commit media cx23885 move registration to a separate function
718894ad94626b72403c21fab5ccdd982147e4c6	mtd nand_bbt refactor check_pattern_no_oob this function only returns __number__ or so make that clear
7eaf7e8eb31747e4259d60288b44b194fb3d56c7	raid5 remove unnecessary bitmap write optimization neil pointed out the bitmap write optimization in handle_stripe_clean_event is unnecessary because the chance one stripe gets written twice in the mean time is rare we can always do a bitmap_startwrite when a write request is added to a stripe and bitmap_endwrite after write request is done delete the optimization with it we can delete some cases of device_lock
2e94283b68d8fad5e358e32e52aebf1f569544d7	staging rtl8192ee remove unnecessary return statement removes void function return statements
33ca8ab97cbb676d11a4b026ad392c046893a6dc	input parkbd use parallel port device model modify parkbd driver to use the new parallel port device model
fcac0233d89ddce72945f3e0afaf4680572d8525	regmap use is_aligned instead of to improve the performance the stride value should always equal to so we can use bit rotation instead of to improve the performance
8f13bd4e6cfed02e107ab916e14cee5675933e5f	asoc wm8904 replace the codec field of the snd_soc_widget struct is eventually going to be removed use instead
bd2753b2dda7bb43c7468826de75f49c6a7e8965	only add extra pages count for the first memory range during pre-allocation early page table space robin found this regression i just tried to boot an system it fails very early in boot with kernel panic not syncing cannot find space for the kernel page tables git bisect commit a git revert of that commit does boot past that point on the configuration that commit will add up extra pages for all memory range even above try to limit that extra page count adding to first entry only link
ff541f4b2a7546ffa8edf123f4b3b49bb24574e2	asoc core giving warn when device starting from non-off bias with idle_bias_off just found some cases that some codec drivers set the bias to _standby and set idle_bias_off to __number__ during probing it will cause unpaired issue also as mark suggested there is no reason to start from _standby bias with idle_bias_off __number__ so here giving one warning when detected __number__ and snd_soc_bias_off just after
3b03ad5929e3ba5e1c3db7a70d426f883be061c2	drbd do not mod_timer with a past time in case we can not find out why the request takes too long happens when io got suspended on drbd level rearm the timer with a reasonable value
352f91747f670b3d82601e7a518df13ba6ecb5e4	staging comedi fix brace coding style issue in this is a patch to the file that fixes up a brace warning found by the tool
5b28f15aa62ac98badad2ed6f2f2aaeab11cb178	staging unisys refactor destroy_device fix the function declaration so it is a single line rename camelcase local variable names busno bus_no devno dev_no fix use of uuid_le_cmp to check for __number__ instead of using fix spelling error destory to correctly read destroy
342a11e1459bb5a053b60ae248e3b78d4da79395	bcma pci remove define_pci_device_table macro dont use define_pci_device_table macro because this macro is not preferred
83dfe53c185e3554c102708c70dc1e5ff4bcac2c	f2fs fix reference leaks in f2fs_acl_create our f2fs_acl_create is copied and modified from posix_acl_create to avoid deadlock bug when inline_dentry feature is enabled now we got reference leaks in posix_acl_create and this has been fixed in commit fed0b588be2f posix_acl fix reference leaks in posix_acl_create by omar sandoval lets fix this issue in f2fs_acl_create too
d4aefec5daf51ebda90ebf0989598c206cf8e640	usb host ehci-omap fix and failure handling path of obviously disabling put regulator and are missed in and failure handling path of so add them
14408dba8440ef629a3a2827bc4c7b5045889295	openvswitch change enoent return value to enodev in lookup_vport this reduces the number of valid no such device error values that need special attention by the caller userspace code will need to keep on checking for both enodev and enoent as long as older kernel modules are around
95123fc43560d6f4a60e74f72836e63cd8848f76	input ar1021_i2c fix too long name in drivers device table the name field in structure i2c_device_id is __number__ characters and we expect it to be null-terminated however we are trying to stuff it with __number__ bytes and thus null-terminator is lost this causes issues when one creates device with name microchip_ar1021_i2c as i2c core cuts off the last c and automatic module loading by alias does not work as result the suffix in the device name is superfluous we know what bus we are dealing with so lets drop it also no other driver uses capitals and the manufacturer name is normally not included except in very rare cases of incompatible name collisions bugzilla
6d9cf123cd79277c65605faff8d25dbdd1b6ca64	wcn36xx use allocated self sta index instead of hard coded
47d1845ffac0af9e4b439277fee50b62aed650a7	usb phy mxs add sync time after controller clear phcd after clear phy needs stable time for switch clock to ahb clock
faa8971607322d9244b3c15799f02ae533769bf8	dp83640 let external input pins from the module parameters be defaults this patch changes the driver to use the new pin configuration method when programming the external time stamp input signals
6b90da4b58b39a80f490479953aa2563c3c41a6d	iio magnetometer mmc35240 fix sensitivity on z-axis datasheet says page __number__ that typical value for sensitivity for __number__ bits mode on z-axis is __number__ anyhow looking at the input driver provided by memsic the value for mmc35240 is __number__ also testing shows that using __number__ for z-axis senzitivity offers better results
a79fc765b5c53465f0b34b491775c63ba652c9a9	input export matrix_keypad_parse_of_params couple of input drivers depend on this symbol error matrix_keypad_parse_of_params undefined error matrix_keypad_parse_of_params undefined
c088b2d904445f501c5aa7a6fc63ca9e8b96f224	drbd dont pretend that barrier_nr __number__ was special we used to have a barrier implementation where barrier_nr __number__ was reserved that is long gone just use the full sequence space
950e2958a5e96406e6e5ff4190a638a54769f89b	be2net bug fix on returning an invalid nic descriptor in function be_get_nic_desc it will go through the descriptor array returned from by comparing the desc_type field it determines whether there is a nic descriptor in the array or not in the case of no nic descriptor this function should return null the code may return an invalide descriptor when there is no nic descriptor in the array and the desc_count is less than max_resource_desc in this case even there is no nic descriptor it will still return the lase descriptor since the i doesnt equal to max_resource_desc this patch fix this issue by returning the descriptor when find it and return null for other cases
b48e127884b117b429d3473577b9dc3f2b42b8eb	nfs pass current net to rpc_pton while parsing mount options
abd2c2fe1212698ed326d5746e487abecb2ed325	add get clockgating_state method for vi common
718f13e72be48e2e088f8a3993017c281f275dcd	bring back representors ndos that were accidentally removed the vf representor udp tunnel ndo entries were removed by mistake return them
09efc56345be4146ab9fc87a55c837ed5d6ea1ab	ath9k_hw reduce ani firstep range for older chips use instead of which is closer to the old implementation also drop the overwrite of the firstep_low parameter to improve stability
3f71f6da7791a5feae0ff07e718431d1df01273a	efi rtc-efi export as module alias when the rtc-efi driver is built as a module we already register the efi rtc as a platform device if uefi runtime services are enabled to wire it up to udev and let the module be loaded automatically we need to export the alias from the module
54292d64e1b6cbe735852aaf59e56ef78dc15f82	nfc check for connection less sockets when looking for a service name connection less server sockets will be in bound state not listen
181548c05147154605711f3b1cf863267b5b8f7a	namei pick_link callers already have inode no need to refetch and once we move unlazy out of there recheck
93d7b7622c199f1be25ca8fe64b3cbf468ea49b9	revert asoc fsl fix multiple definition of init_module this reverts commit while the commit fixes multiple init_module definition error with module build it breaks build when both imx-pcm-fiq and imx-pcm-dma are built in as below ld ld ld ld ld ld ld ld ld ld in function imx_pcm_free multiple definition of imx_pcm_free first defined here in function snd_imx_pcm_mmap multiple definition of snd_imx_pcm_mmap first defined here in function imx_pcm_new multiple definition of imx_pcm_new first defined here make4 error __number__ lets revert the commit and find a proper fix for multiple init_module definition error later
b0897972edfa42b4af5c3189b2b7a7fac5867828	arm remove bogus struct clk comparison for timer clock with recent changes to use determine_rate the comparison of two clocks wont work without clk_is_match that does __clk_get_hw on the clocks first as weve been unconditionally already calling clk_set_parent already because of the bogus comparison lets just remove the check as suggested by stephen boyd
19d566420b8c5a26d4f9666ef665e088173d3df3	pass up real error code pass up the real error code returned by platform_get_irq_byname
ea6da4fd388a1eeab30d64da3eab3c5338714c74	introduce skb_mac_offset introduce skb_mac_offset that could be used to get mac header offset
6db61d79c1e1b2346e2142d6c950a8d2e8380b82	flow_dissector ignore flow dissector return value from ___skb_get_hash in ___skb_get_hash ignore return value from skb_flow_dissect_flow_keys a failure in that function likely means that there was a parse error so we may as well use whatever fields were found before the error was hit this is also good because it means we wont keep trying to derive the hash on subsequent calls to skb_get_hash for the same packet
93b80f29044639ce98baabd3431af9d78e9d1223	remove and fix debug prints after allocation failure the prints after functions are not needed because in case of failure allocator will print their internal error prints anyway
a94e3fbe4d53d4e512c4ea88a475e605b8d8dccb	nfit add sysfs dimm family and dsm_mask attributes communicate the command format and supported functions to userspace tooling
90e2b545ce78516e727ba641e9f2b0703a17da1a	hwmon lm75 improve error handling use devm_add_action_or_reset instead of devm_add_action and check its return value
e527aec434b59745654d3b34a3aa7ce3392a85a5	remove unused variables max_mnest and rc are never used
d1ea7be5f755bf1a4d4fdccc35880fcf5069df60	nvme fix another build warning the nvme_user_cmd function was recently moved around from one file to another which made a warning reappear that i had fixed before at some point in function nvme_user_cmd warning cast to pointer from integer of different size this applies the same workaround that we have elsewhere in the driver with an extra type cast to uintptr_t link
666a584d3a765a914642f80deef7a33fb309df5d	support for backup battery charging palmas series device like tps65913 tps80036 supports the backup battery for powering the rtc when no other energy source is available the backup battery is optional connected to the vbackup pin and can be nonrechargeable or rechargeable the rechargeable battery can be charged from the system supply using the backup battery charger add support for enabling charging of this backup battery also add the dt binding document and the new properties to have this support
7fd1ce7eafb8a68d75363e7500433b0ee4392843	ath6kl dont advertise ht capability for incapable firmware with firmwares which do not support rsn capability override ath6kl_fw_capability_rsn_cap_override from host would cause handshake failure when ht cap is advertised to fix this do not advertise ht cap with cfg80211 for those fw kvalo fix a checkpatch warning
ca4b5eb88aa0da96ede750d8b894e7079612aa65	cxgb4 remove redundant memset before memcpy the region set by the call to memset immediately overwritten by the subsequent call to memcpy and thus makes the memset redundant also remove the __number__ sizeofinfo on line __number__ because info is memcpyed to before being used in the loop and it isnt used outside of the loop
68cdf5d6e91068c98d6091b193dc7a5ab7dcf5eb	use hard-coded page size for the page size of the devices objects is defined in units regardless of the system pages size thus using the linuxs page_shift macro yields wrong device configuration in systems where
70a0686a72c7a7e554b404ca11406ceec709d425	lockdep fix up warning on sun at arnaud lacombe wrote in function mark_held_locks warning comparison of distinct pointer types lacks a cast the warning is harmless in this case but the below makes it go away link
14d03233517001849742e45803219755430a5eed	media adv7604 remove debouncing of adv7604_fmt_change events adv7604_fmt_change events was debounced in adv7604_isr to avoid that a receiver with a unstable input signal would block the event handling for other inputs this solution was prone to errors a better protection agains interrupt blocking is to delay the call of the interrupt service routine in the adv7604 driver if too many interrupts are received within a given time
7cba5b3f5fdfcb0be4f15b54a1f3a7455f973c16	pinctrl single correct argument for pinconf pcs_pinconf_set is always using arg shift to configure two parameters case but pcs_add_conf2 didnt remove shift for config argument so correct it
f60935c17f0c99d4d70fa7e90cfdba3e7008282d	media s5p-mfc fix setting controls fixed s_ctrl function when setting the following controls v4l2_cid_mpeg_video_decoder_mpeg4_deblock_filter v4l2_cid_mpeg_mfc51_video_decoder_h264_display_delay
03c6eaa37ad7cd4838a8a6d745eb4da4db48c2f1	staging iio accel use __be16 instead of u16 this patch fixes these warning messages found by sparse warning incorrect type in argument __number__ different base types expected restricted __be16 const usertype got unsigned short usertype
cc045e3952175e84c38dad22dea14465b9fc8fb5	cgroup deal with dummp_top in cgroup_name and cgroup_path my kernel fails to boot because blkcg calls cgroup_path while cgroupfs is not mounted fix both cgroup_name and cgroup_path
14497328b6a628cedafdd2df1bb8d3e9d1d5338f	scsi ufs verify command tag validity a race condition appear to exist between request completion when scsi_done is called to end the request and set the tag back to at blk_queue_end_tag scsi_end_request and scsi layer error handling which aborts the command and reuses it to request sense data sending the request sense is done with tag which was set to and so it is invalid assert command tag passed from scsi layer is valid
5c4a43b024cce66bd65c45c338f1ec9fcbdf3a81	use u64 instead of s64 to avoid compilers warning dccp_timestamp_seed is initialized once by ktime_get_real in dccp_timestamping_init it is always less than ktime_get_real in dccp_timestamp then ktime_us_delta in dccp_timestamp will always return positive number so can use manual type cast to let compiler and do_div know about it to avoid warning the related warning with allmodconfig under unicore32 cc m in function warning comparison of distinct pointer types lacks a cast
5e4bf1a55da976a5ed60901bb8801f1024ef9774	dont flush the tlb on pmd fixups if we have a write protection and fix up the pmd then the hugetlb code the only user of pmdp_set_access_flags in its do_huge_pmd_wp_page page fault resolution function calls pmdp_set_access_flags to mark the pmd permissive again and flushes the tlb this tlb flush is unnecessary a flush on is guaranteed on most x86 cpus and even in the worst-case well generate a spurious fault so remove it link
f11a869d4e38397ac81f2a3d22e8d2aeb3992b0f	be2net take care of __vlan_put_tag return value the driver should use return value of __vlan_put_tag with appropriate null-check instead of old skb pointer
34c5801d81b9ae287010888be55ec98a3026cddd	qla2xxx move mailbox failure messages to a default debug level move the mailbox failure messages to a default debugging level so that benign failures wont flood the system logs but will still show up if default debug messaging is enabled
fcc023c726b5879d8f3f0f0f48c45d09055272c4	usb dwc3 gadget prevent dctl register corruption if we dont read out the contents of the register in order to reinitialize reg variable we will be writing unknown contents to the dctl register whenever we try to use dwc3_gadget_wakeup function
b69a9787b1dfb2e5055fb4e0fea71f9e16c7ea01	prepare for killing free_all_bootmem_node prepare for killing free_all_bootmem_node by using free_all_bootmem
3272dd9b0fe4bc09321219ab65dc5eda3e82445c	fix issue when using devicetrees when the mdio-gpio driver is probed via device trees the platform device id is set as however the is re-used as bus-id for while creating mdio gpio bus so for device tree case the mdio-gpio bus name appears as __address__ where as for non-device tree case the bus name appears as which means the bus_id is fixed in device tree case so we cant have two mdio gpio buses via device trees assigning a logical bus number via device tree solves the problem and the bus name is much consistent with non-device tree bus name without this patch __number__ we cant support two mdio-gpio buses via device trees __number__ we should always pass __address__ as bus name to phy_connect very different to non-device tree bus name so setting up the bus_id via aliases from device tree is the right solution and other drivers do similar thing
2a20af722dde611b6b060af18dff651a8db96073	drivers iio light fix sparse warnings fixing below warnings warning cast to restricted __be16 warning cast to restricted __be16 warning cast to restricted __be16 warning cast to restricted __be16
84b7f88235dfe56048c39229481a010e9754eb6f	refactor guc_init_doorbell_hw we have essentially the same code in each of two different loops so we can refactor it into a little helper function this also reduces the amount of work done during startup as we now only reprogram found to be in a state other than that expected and so avoid the overhead of setting doorbell registers to the state theyre already in
750db0f5f7d0ff6b86158015f02c275702639b20	torture stop onoff task if there is only one cpu if the whole system has only one cpu that cpu wont be able to be offlined so there is no need onoff task is stil running
946973a348a16f724374e0f818b31c095686471f	annotate io address space properly mark address pointer with __iomem in the io accessors otherwise we will get a sparse complain like following warning incorrect type in argument __number__ different address spaces expected unsigned char noderef usertype got void
9cf766f666cc4518e22f185159f285f4e3183230	asoc wm9705 cleanup printk usage use dev_err instead of printkkern_err this is common practice and makes it easy to find out which device generated the message while we are at it also align the error messages with the other drivers
e144760a33e3f09ccf6f3abb186920753f27a998	media stk-webcam remove bogus std support its a webcam the std api is not applicable to webcams
795d5fd4b8b06944976c95e8592e17e2d415aa81	add timeout to pcie pll lock detection loop tegra pcie driver waits for pll to lock using busy loop if pll fails to lock for some reason this leads to silent lockup while booting as pcie code is not modular fix by adding timeout so if pll doesnt lock in a couple of seconds just pcie driver fails and machine continues to boot
fb6d208d54de2791d6d361ef258ea7d5d3427d01	asoc davinci-evm add pm callbacks to platform driver set snd_soc_pm_ops for the pm ops
46b05c7bd51edafb8c8da088b49bddf7f78d48f9	fixed possible race condition in zcrypt module handling
5574d5f036f6fe52618e450aa09f8f284fafaeeb	usb musb tusb6010_omap fix build failure error musb undeclared cc in function tusb_omap_use_shared_dmareq error musb undeclared first use in this function error each undeclared identifier is reported only once error for each function it appears in
e7d6ef9790bc281f5c29d0132b68031248523fe8	fix idiotic braino in d_alloc_parallel check for d_unhashed while searching in in-lookup hash was absolutely wrong worse it masked a deadlock on dget done under bitlock that nests inside thanks to j r okajima for spotting it
87c8b28d291de9999e9da2ef5d4165861983eb83	bluetooth fix missing rcu_read_unlock in hci_bdaddr_is_paired when finding a matching ltk the rcu_read_unlock function was failing to release the rcu read lock this patch adds the missing call to rcu_read_unlock
3ef7f1ee57c3f59f5a004551d1b4974ebaf572fe	staging rtl8192e rename r8192_set_mac_adr use naming schema found in other rtlwifi devices rename r8192_set_mac_adr to _rtl92e_set_mac_adr
09461459e12019375dbda88f81d1fe8926ce139c	express brightness level in percent
315ca6d98ed3fd7abe235637c28dd2f9f0a77795	rds tcp set rds_flag_retransmitted in cp_retrans list as noted in rds_recv_incoming sequence numbers on data packets can decreas for the failover case and the rx path is equipped to recover from this if the rds_flag_retransmitted is set on the rds header of an incoming message with a suspect sequence number the rds_flag_retransmitted is predicated on the rds_flag_retransmitted flag in the rds_message so make sure the flag is set on messages queued for retransmission
74c831653309872b4a514cb27f456f20a7914173	greybus connection fail on missing protocol make sure to fail properly when a protocol is missing this prevents the connection from being created which is fine as we currently never bind protocols post creation this is an intermediate step in moving protocol binding to connection_init
359597cb374b7935bf804cde590ac55f9cb275b7	acpi add acpi_device_uid for convenience add a nicer way to get the acpi _uid
954b1244530064d48dde133f906026e56ba0ae56	ethtool fix sparse warning fixes sparse complaints about dropping __user in casts warning cast removes address space of expression
098b325b8fc3bb1e000cadbae538e20cd1ee1fa7	staging lustre lov ld_target could be null could be null if the ost target is not filled in yet intel-bug-id reviewed-on
98e35be2badd7a499a001a0681d1904f8c56f3e6	backlight lp855x fix initial brightness type valid range of the brightness is from __number__ to __number__ so initial brightness is changed from integer to u8
78228cbdeb0aa5c96e2a721e7e0d6953b416b5a3	remove static from local variable the static is not required and breaks re-entrancy if it will be required
113b1a071583aff4750e95f3373fac18ac319bee	spi qup make of_device_id array const make of_device_id array const because all of functions handle it as const
d584a66279949561418c82b12bb4c055e6c25836	firewire ohci disable msi for via vt6315 again revert half of commit d151f9854f21 if isochronous is attempted with packets larget than __number__ kbyte via vt6315 rev __number__ immediately stops to generate any interrupts if msi are used fix this by going back to legacy interrupts thread isochronous streaming with vt6315 ohci __number__ with smaller packets the loss of irqs happens too but only very rarely rarely eneough that it was not yet possible for me to determine whether quirk_no_msi is an actual fix for this rare variation of this chip bug i am keeping quirk_cycle_timer off of vt6315 rev __number__ because this has been verified by myself with certainty on the other hand i am also keeping quirk_cycle_timer on for vt6315 rev __number__ because i dont know at this time whether this revision accesses cycle timer non-atomically like most of the other via ohcis are known to do
b23cd22d3923b11e4a8fd1854b52932ac691d7ac	rtlwifi rtl8723be update driver for regulatory changes the driver is converted to use the channel plan in the eeprom
80c2022e5645a1a789531d13010292c5c18bf1db	of fix export of of_find_matching_node_and_match commit of introduce for_each_matching_node_and_match renamed of_find_matching_node to of_find_matching_node_and_match and created a new static inline of_find_matching_node wrapper around the new name however the change neglected to change the export_symbol reference causing build errors for modules this patch fixes the export_symbol statement discovered on a powerpc efika build with the mpc52xx_uart driver being built as a module
ad65adf4a3039ecd93d4712ac6524dbd9e0e848a	asoc max98088 use table based control init
3a2cf2f971b7128b1daff50abbd88c766b458544	staging comedi addi_apci_1564 fix counter code in main driver source the rev __float__ apci-1564 boards do not have counters fix the code in the main driver source so that the accesses to the counters do not happen if the member is not initialized this does not fix the code in that code violates the comedi api and is currently broken
c8a82538001e1a68f4a319d5a75de90d1f284731	uprobes move alloc_page from xol_add_vma to xol_alloc_area move alloc_page from xol_add_vma to xol_alloc_area to cleanup the code this separates the memory allocations and consolidates the cleanups and the error handling
aba51024e7159c93914557caaa2b8cda26331091	uprobes fix leak in pre_ssout pre_ssout should do xol_free_insn_slot if arch_uprobe_pre_xol fails otherwise nobody will free the allocated slot
242e18c7c1a8ff3aa05c9fbb6e0bb427511152a6	btrfs reduce lock contention on extent buffer locks the extent buffers have a refs_lock which we use to make coordinate freeing the extent buffer with operations on the radix tree on tree roots and other extent buffers that very cache hot this can be highly contended these are also the extent buffers that are basically pinned in memory this commit adds code to cmpxchg our way through the ref modifications and as long as the result of the reference change is still pinned in ram we skip the expensive spinlock
8563000d3bf3ccfccce335c092a7c43078be8ffd	ext4 use consistent ssize_t type in ext4_file_write the generic_file_aio_write function returns ssize_t and ext4_file_write returns a ssize_t so use a ssize_t to collect the return value from generic_file_aio_write it shouldnt matter since the vfs paths shouldnt allow a read greater than max_int but there was previously a bug in the aio code paths and its best if we use a consistent type so that the return value from generic_file_aio_write cant get truncated
dc7be2950b25c95cd240b8fe44edb59f8d7e3ae6	media s5p-g2d add copy time stamp handling since the introduction of the timestamp_type field it is necessary that the driver chooses which type it will use this patch adds support for the timestamp_type
b0a31431b4d81fb1ccc36ce64ce3fe6a0aca4031	flow_dissector remove unused function flow_get_hlen declaration commit net add function for parsing the header length out of linear ethernet frames added this function declaration but it is defined nowhere
cd97a713acbc1b63feb67ba137c3b827fa4f2308	ieee802154 fix byteorder for frag tag this patch fix byteorder issues with fragment tag of generation fragment header warning restricted __be16 degrades to integer warning incorrect type in assignment different base types expected restricted __be16 usertype frag_tag got unsigned short
1aa8ec255370d3e6f60dfa4a8cdd5e1357b1ab78	add api to help find connection type to fill the audio infoframe it is required to identify the connection type as dp or hdmi this patch adds an api which parses eld and returns the display type connected
766957f6f1841e5d435798741852f2697ad0b2ad	staging comedi adl_pci9118 remove unused defines these defines are not used in the driver remove them
dd91016dfc9ba9236cb0149984da3f0434278b49	dont change the tasks state if fails currently this doesnt matter the only hook cant fail but we need to fix arch_uprobe_pre_xol anyway if fails we should not change we should just return the error to make restart actually possible
ed68a34a22ac310cbf9ea58f30f4076ca146d251	ata pata_samsung_cf remove unused macros these macros are not used in the file remove them
379170a42c84cee5f95fac536a4b5b76843baf90	sound cap value in sb201_audio_set_speed we set s before we have capped speed so it could be the wrong value this could lead to a divide by zero bug
4ca048e3a38e9691eb3e390c5eea3acd9b51cd17	bluetooth fix hci init for generation bluefritz devices the generation of bluefritz devices from avm berlin pretend to be hci version __float__ controllers but they are not they are simple bluetooth __float__ devices since this company never created any newer controllers it is safe to use the manufacturer id instead of an usb quirk hci command read page scan activity plen __number__ hci event command complete plen __number__ read page scan activity ncmd __number__ status success interval __float__ msec window __float__ msec hci command read page scan type plen __number__ hci event command status plen __number__ read page scan type ncmd __number__ status unknown hci command
b2b1ec9b55ed0840956db15f823c4a73383c08be	nvme removed unused nn var from nvme_dev_add the logic in nvme_dev_add to enumerate namespaces was moved to nvme_dev_scan when moved the nn variable is no longer used this patch removes it
85a624403c77c3f074931aefdfced59f61b668cb	ethtool silence warning on bit loss sparse was complaining when we went to prototype some code using ethtool_cmd_speed_set and __number__ which uses the upper __number__ bits of __u32 speed for the first time check warning cast truncates bits from constant value becomes the warning is actually bogus as no bits are really lost but we can get rid of the sparse warning with this one small change
8a3a180d21793f2e4386b3cb61c48322564fc80a	arm cache-l2x0 aurora use writel_relaxed instead of writel the use of writel instead of writel_relaxed lead to deadlock in some situation smp on armada __number__ for instance the use of writel_relaxed as it was done in the rest of this driver fixes this bug
03c5b0d90300fc725fc1fb644872b522483a2d7e	mmc sh_mobile_sdhi remove superfluous check in scc error check the function will only be available if sdr104 was detected in probe so no need to check in the function itself again
70ad35db3321a6d129245979de4ac9d06eed897c	pstore convert console write to use maybe im missing something but i dont know why it needs to copy the input buffer to and then write instead we can write the input buffer directly the only implementation that supports console message ramoops already does it for ftrace messages for the upcoming virtio backend driver it needs to protect overwritten from console messages if it could use method instead of the problem will be solved easily
6b15075c2c3662dbe1ac41404c6a2013b24efa1d	ia64 sn do not needlessly convert between pointers and integers the nasid_to_try variable is an array of integers so plain integers can be used when assigning values to the elements rather than casting a null pointer to an integer which results in the following warning from gcc warning cast from pointer to integer of different size nasid_to_try1 intnull warning cast from pointer to integer of different size nasid_to_try1 intnull replace intnull with a simple __number__ to silence these warnings
869aa41044b04964e27822124b88f799e46f01b9	sch_gred prefer gfp_kernel allocations in control path its better to use gfp_kernel allocations where possible before taking qdisc spinlock we preallocate memory just in case well need it in gred_change_vq this is a followup to commit sch_gred should not use gfp_kernel while holding a spinlock
3998bfbf310fd3efa19b9b2d420773157ee1d1b2	m68knommu remove extern declarations of from we do not need to have local extern declarations of memory_start and memory_end in there are declarations already in
cc740ec84dc888144fe31b44e3af7ad467ccfc70	asoc sta32x replace direct snd_soc_codec dapm field access the dapm field of the snd_soc_codec struct is eventually going to be removed in preparation for this replace all manual access to with snd_soc_codec_get_bias_level
094e1a3d7d7d456b504058ed40ea19d40e05a7ff	asoc switch over to use snd_soc_register_component on tegra20 spdif
14cd7923122c7c4473848f7c737604bfe945b81b	asoc intel chv_platform_data can be static sparse symbol chv_platform_data was not declared should it be
5ec39efa16036c8291d2d81282280213c2c16ad1	mwifiex process tx even when scan is ongoing with channel scan gap fw comes back to connected channel after each single channel scan so we can safely transfer data to fw during scan fw would send this data once on connected channel
beb107f30ea74611286ede91f0aa93b145c476b4	added missing mutex_unlock in case of failed to get iova function was returning without releasing the mutex added it
0daaad97dcdc5cf91d368894a0954704e9a2cf2d	f2fs avoid lock debugging overhead if config_f2fs_check_fs is unset we dont need to add any debugging overhead
0893f74545e615eda796c8d443cafee1959f3a73	define complete armv8 recommended implementation defined events defined all the armv8 recommended implementation defined events from j3 arm recommendations for implementation defined event numbers in arm ddi
2c3e62a14864c630720cd7b123bdd5ba93280ddc	iwlwifi mvm modify the tsf_id logic for tsf synchronization the fw does not require exact match in the beacon interval between the master interface and the slave one but instead requires that the beacon interval of one interface is the module of the other modify the tsf_id selection to align with the above
72cc9ba39a046132a638888eaa5a14baf55621b2	media em28xx ignore isoc dvb usb endpoints with wmaxpacketsize __number__ bytes for all alt settings some devices without dvb support such as the terratec grabby and easycap dc-60 provide isochronous dvb usb endpoints with wmaxpacketsize set to __number__ bytes for all alt settings ignore these endpoints and avoid registering a dvb device node and loading the dvb driver extension
e432bc7e15d80288aff0bcccb2ff0f9ae572abdd	vfio check that iommu page is fully contained by system page this checks that the tce table page size is not bigger that the size of a page we just pinned and going to put its physical address to the table otherwise the hardware gets unwanted access to physical memory between the end of the actual page and the end of the aligned up tce page since compound_order and compound_head work correctly on non-huge pages there is no need for additional check whether the page is huge aw for the vfio related changes
c5f7ef72fcca7602ff8c75682b2a8568ba4e5064	myricom update to __number__ bit stats driver was already keeping __number__ bit counters just not using the new interface ps imho drivers should not be duplicating network device stats into ethtool stats it is useless duplication
ec073c9b319fee6564dcb9f1fb7a70eb6a8a06b5	jz4740-battery use devm_kzalloc this is just a small cleanup makes a logic a little bit more simplier
9329b697349f6b44b4936ac7499eaef02366554c	staging lustre llite style cleanup for ll_mkdir style cleanup to make the code readable intel-bug-id reviewed-on
7b61980a99dfa36eb40df8b7c56bde3f29de0ae9	usb phy msm remove the set_power callback since it will not set the pmic current drawn from usb configuration by set_power callback then remove it
5183c137974da0c8192fc4c5cc5cae5974125b06	media budget-ci fix hauppauge rc-5 ir support hauppauge rc-5 tables require the full scancodes the code at budget-ci handles it right however it request the rc-code to mask them with breaking support for some remote controllers fix it by not selecting a scancode mask when the driver is on full_rc5 mode
7d007dd745c2ce98ce1d4ac8870f64ab1b597950	initial support
15075cac423d634ddf39dac66f943b3bce847f87	tracing separate open function from set_event and available_events the open function used by available_events is the same as set_event even though it uses different seq functions this causes a side effect of writing into available_events clearing all events even though available_events is suppose to be read only theres no reason to keep a single function for just the open and have both use different functions for everything else it is a little confusing and causes strange behavior just have each have their own function
167cffb646aa4a7f3267b07eae1af16b54bc0e9b	acpi use struct dev_pm_ops for power management in the thermal driver make the acpi thermal driver define its pm callbacks through a struct dev_pm_ops object rather than by using legacy pm hooks in struct acpi_device_ops
79e35dc3c23dd2ac9f8681361026c82b71a0b006	f2fs add f2fs_balance_fs for direct io otherwise if a large amount of direct io writes were done the segment allocation may be failed because no enough segments are gced changes v2 add f2fs_balance_fs into __get_data_block instead of f2fs_direct_io
cff5638ef7852196879f9687e70d49ea291bbb33	usb gadget bdc_udc fix race condition in bdc_udc_exit bdc_ep_disable expects to be called with held the assumption is met in all the cases except for call from bdc_udc_exit that is called from bdc_remove as a result a race can happen or unheld can be unlocked in bdc_req_complete the patch proposes to acquire-release around bdc_ep_disable in bdc_udc_exit found by linux driver verification project
b8681711271a0124d9495dae2e1ac0616b0ed47a	perf report set the machines symbol filter take into use the machines symbol filter member link
b9eaee5a8ac18dcfebf6bb295b6eced1d934be51	powerpc add transactional memory to power8 cpu features
f4e2e9a4b26789d963000f974f2dc80230bb4674	xtensa use generic idle loop link
beae2c9eb500d5509feb9fd148d34d97a9b1d276	crypto aesni shut up warning the rfc4106 helper functions cause an annoying false-positive warning in allmodconfig if we turn on warnings again in function warning may be used uninitialized in this function the problem seems to be that the compiler doesnt track the state of the one_entry_in_sg variable across the section this takes the easy way out by adding a bogus initialization which should be harmless enough to get the patch into so we can turn on this warning again by default without producing useless output a follow-up patch for rearranges the code to make the warning go away
f4ab408c4b55fcbc447cf0288456613bad824626	keep min freq above floor on set the min_freq_softlimit to maxrpe setting a floor can ensure a minimum experience level the value came from a power and performance study of various types of workloads media gpgpu idle etc v2 rebased
3157c5897212997da27ea1a641a246f2a1808cff	fix reversed logic in evergreen_mc_resume need to unblank the display when resuming the mc no functional change as this code path is not currently hit we always disable the displays entirely rather than just blanking them
3445432b7b24665cf4693fc4794c62d4d768a978	perf symbols avoid sys kernel syscall aliases when removing duplicate symbols prefer to remove syscall aliases starting with sys or compat_sys a side-effect of that is that it results in slightly improved results for the vmlinux symtab matches kallsyms test link
3c2fcfcb6858585e9df6c7832464ab28bfb5bb6b	orangefs make wait_for_direct_io take iov_iter incidentally insane or compromised server returning than requested on read should not oops the kernel initialize the iov_iter for read according to the iovec weve got thats why pvfs_bufmap_copy_to_iovec needed a separate size argument we shouldnt abuse iov_iter_countiter for passing that
5897a391d41d42f19285376a4ad1320d452c2946	arm omap3 clock data fill in some missing clockdomains several clocks are missing clockdomains this can cause problems with the hwmod and power management code fill these in
24a7d36a7260a30b8477d1fe0335c87ad846ed56	attribute_container fix whitespace errors this is a clean-up patch to the file to fix the whitespace errors
b801b1591c10f546206d4db29a31793a4e1efbbb	qed correct default vf coalescing configuration when starting the vfs vport the pf would first configure the status blocks of the vf and then reset them that would cause some of the configured information to be lost specifically it would mean that all the vfs queues would use the rx coalescing state-machine of the status block
3009de604831e6dd908c39c05fd063bd668edb0e	staging sm750fb fix build warning with proc_pandisplay change the options to the proc_pandisplay function pointer to match the function pointer that we want to assign to it in order to remove the build warning
54a14e62f406197644384d7d68910997ce2fe203	staging vt6655 replace vnsvoutportw with iowrite16 removig macro from functions
199d847a2d89e5ccfca991092c1fb1cae3743f58	chan spec conversion trivial conversion
107f301861fd29b3bec9e76278cb87da9990aa11	i40evf dont lie to ethtool dont tell ethtool that the vf can do when it really has no idea what its link speed is set the supported values to __number__ instead suggested by ben hutchings change-id iceb0d8af68fe5d8dc13224366979ba701ba89c39
b569450682e944653f307b47c549ca12150d4596	bluetooth dont forget to check for le_link otherwise the wrong error can be returned
3dd282c4bdf4bdac1b010c19088ea0c565b6d79f	staging lustre lov adjust page bufsize after layout change otherwise the coh_page_bufsize keeps increasing when the files layout keeps changing in lov_init_raid0 intel-bug-id reviewed-on
f2cfa997ef77bcfc3900eb968fa5254f951bb8f2	bnx2x enlarge the dorq threshold for vfs a malicious vf might try to starve the other vfs pf by creating contineous doorbell floods in order to negate this hw has a threshold of doorbells per client which will stop the client doorbells from arriving if crossed the threshold currently configured for vfs is too low under extreme traffic scenarios its possible for a vf to reach the threshold and thus for its fastpath to stop working
e2897b8238ab8fdee067cfe472dd52a3414d5716	net netcp add missing of_node_put in netcp_probe this node pointer is returned by of_get_child_by_name with refcount incremented in this function of_node_put on it before exitting this function this is detected by coccinelle semantic patch
6e1b3095ddd2aa5286c8219ee19ab77c0398b43f	net cdc_mbim reject ip packets on dss vlans dss vlans are pseudo network interfaces representing arbitrary data streams and specifically not ip preventing spurious ip packets can sometimes be a hassle the kernel will for example send an ipv6 router solicit when the interface is brought up unless the user has been careful enough to disable ipv6 first such packets forwared to a mbim dss session will look like spurious noise to the device and can cause it to log an error or even malfunction drop all ip packets on the designated dss vlans to prevent such unwanted spurious transmissions
faf667efdbe5f6c8d6962aab8680680838678097	intel-hid remove redundant set_bit call remove redundant set_bit call for key_rfkill as it is already made by sparse_keymap_setup due to key_rfkill being assigned to event code __number__ in intel_hid_keymap
c7b91b33cf446ec09eedf4594cff8d7b85ef6870	pwm lpss remove callback the lpss pwm driver calls pwm_lpss_disable when the pwm device is released for example unexported from sysfs this in turn calls pm_runtime_put which makes runtime pm count to be unbalanced if the device has not been enabled at this point this is easy to reproduce cd echo __number__ export echo __number__ unexport the count is unbalanced and prevents the pwm device from being powered on next time fix this by removing callback there are no resources to be released anyway
b91524ee48771586b99bfbed9d4607c3e407d7cb	staging comedi cb_pcidas64 use auto_attach method this driver does not need to support manual attachment of supported pci devices replace the attach hook with an auto_attach hook this will be called via comedi_pci_auto_config at pci probe time the auto_attach calls new function cb_pcidas64_find_pci_board to find the correct entry in pcidas64_boards for the pci device this driver no longer increments the pci reference count during attachment so remove the call to pci_dev_put when detaching the device
cdb647a772e9def47594ff8ce7acf47f4d257b2e	irqchip mtk-sysirq get irq number from register resource size originally mtk-sysirq hardcoded supported irq number to __number__ this was fine since all socs before support the same number of irqs for intpol however mt8173 intpol support __number__ more irq pins changes to get irq number from register resource size to suppor mt8173 properly link
496360f5a8a267d72486fb5615f04e063edd6ed0	asoc codec duplicated callback function goes to component on wm8900 codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
0bd1e94bf3da386510186cb2acd3e91f0ea59bc6	parisc add error checks when building up signal trampoline handler add checks if the userspace trampoline code was correctly generated by the signal trampoline generation code in addition only flush caches as needed and fix the old flushing code which didnt flushed all generated instructions
eea54ed46edd42cf703be752d21731567142aa28	drm zte remove leftover inf from struct zx_hdmi there is a leftover inf field in struct zx_hdmi from commit drm zte move struct vou_inf into zx_vou driver remove it link
8a540ff9e1d685b5feb0a9df5d2b74db1e0b4d39	bond_sysfs use real_num_tx_queues rather than since now number of tx queues can be specified during bond instance creation and therefore it may differ from use rather real_num_tx_queues for boundary check
ecc663c3d0dc181fd15e4d60753024d180fd7e8f	rtc stk17ta8 clean up the change removes redundant sysfs binary file boundary checks since this task is already done on caller side in
fa915996fb4e06a90d15fa485742a77cd8c1642b	media tef6862 clamp frequency clamp the frequency to the valid frequency range as per the v4l2 specification
4d53dc0c02c1ad74dbeda89a9245f7fe15d45d02	add cea modes before inferred modes currently were adding cea modes after the inferred modes which means we might get multiple modes that are very close to each other but slightly different which seems a bit silly thats because duplicate mode check that occurs when adding inferred modes would not consider cea modes as potential duplicates reverse the order so that cea modes get added before inferred modes and are thus considered potential duplicates or as ajax put it on irc the point of the pick a timing formula heuristic was to generate something the sink could _likely_ sink if it tells us timings it can sink explicitly then second-guessing seems dumb
6027ce497d44dd8eae1a9215789df178f6b422cc	hung_task fix the broken rcu_lock_break logic introduced by softlockup check all tasks in hung_task commit looks absolutely wrong rcu_lock_break does put_task_struct if the task has exited it is not safe to even read its nothing protects this task_struct the task_dead checks are wrong too contrary to the comment we cant use it to check if the task was unhashed it can be unhashed without task_dead or it can be valid with task_dead for example an autoreaping task can do release_taskcurrent long before it sets task_dead in do_exit or a zombie task can have task_dead but release_task was not called and in this case we must not break the loop change this code to check pid_alive instead and do this before we drop the reference to the task_struct note while_each_thread under rcu_read_lock is not really safe it can livelock this will be fixed later but fortunately in this case the max_count logic saves us anyway
4fd4d7d8de0ade3da10f9d08506dca5b4ddf1245	staging iio reorganize hmc5843_set_rate
e3e89ae43e132b80039614098597ad2fec6cfbb1	sh-pfc drop the sh_pfc_pinctrl spinlock the spinlock is used to protect data that is only accessed sequentially during initialization remove it
1813badd98ce02e4b96d8997b68ddef4d4ad4ec5	use kcalloc to allocate zeroed arrays instead of kzalloc dont circumvent the array size checks
25f13b4040b68dfc5a2a22e7234894e718e3f4c5	re-check in the inner optimistic spin loop in the following scenario thread should back off its attempt to lock ww1 and unlock ww2 assuming the acquire context stamps are ordered accordingly thread thread successfully lock ww2 set attempt to lock ww1 confirm null enter mutex_spin_on_owner set what was likely to happen previously is attempt to lock ww2 refuse to spin because null schedule detect thread is off cpu stop optimistic spin return unlock ww2 wakeup thread lock ww2 now we are more likely to see detect null stop optimistic spin return unlock ww2 successfully lock ww2 because thread will stop its optimistic spin as soon as possible the whole scenario is quite unlikely since it requires thread to get between thread setting the owner and setting the ctx but since were idling here anyway the additional check is basically free found by inspection link
ad9cf3bbd18a94806314741ac8092c3422f5aebe	block mark blk-mq devices as stackable commit block add a queue flag for request stacking support introduced the concept of stackable and blk-mq devices fit the definition in that they establish so establish queue_flag_stackable in queue_flag_mq_default while not strictly needed dm _could_ just check for to assume the device is request-based request-based dm support for blk-mq devices benefits from the ability to consistently check for queue_flag_stackable before allowing a device to be stacked into a request-based dm table
8383dfd8893a8d4413549d03c55f3c337d6b8f1d	asoc wm8997 replace direct snd_soc_codec dapm field access the dapm field of the snd_soc_codec struct is eventually going to be removed in preparation for this replace all manual access to with snd_soc_codec_get_dapm
72e9cf2ab12ef3e050577ffebdb0c88a28df821d	avoid oom when requesting highmem if highmem pages are requested from the balloon on a system without highmem the implementation of alloc_xenballooned_pages will allocate all available memory trying to find highmem pages to return allow low memory to be returned when highmem pages are requested to avoid this loop
99db11c6e8a89b236b283df0ec592aecdd00d8ef	phy miphy28lp fix sparse warnings add missing __iomem annotation to the base address so sparse doesnt complain
dcc19d28091a86d5baf78e3fbb32e3fc3de524be	allow for instances to trigger their own stacktrace probes have the stacktrace function trigger probe trigger stack traces within the instance that they were added to in the set_ftrace_filter cd mkdir cd echo set_ftrace_filter cat trace tracer nop irqs-off need-resched preempt-depth delay task-pid timestamp function __number__ __float__ schedule schedule_preempt_disabled do_idle cpu_startup_entry start_secondary verify_cpu
bf4c4f434d473e63e87b2b0b4f86d52079764df0	staging brcm80211 brcmfmac connect request made robust connect request made robust by passing broadcast bssid to the fw in set_ssid request this fix helps sta to connect to any available ap in ess instead of sticking to one unresponsive ap
ccc40ed7555d053f60328e9742e559fb75e85002	media hdpvr removed unnecessary get_video_info call from hdpvr_device_init
1c1c35ae4b75d6fc08393a1f73a5a06dc68eebb8	kvm x86 stack size is overridden by __linearize when performing in the emulator for stack operations it ignores the stack size and uses the ad_bytes as indication for the pointer size as a result a wrong address may be accessed to fix this behavior we can remove the masking of address in __linearize and perform it beforehand it is already done for the operands so currently it is inefficiently done twice it is missing in two cases __number__ when using rip_relative __number__ on fetch_bit_operand that changes the address this patch masks the address on these two occassions and removes the masking from __linearize note that it does not mask eip during fetch in mode code fetch when rip should result in and not wrap-around since we make limit checks within __linearize this is the expected behavior partial revert of commit kvm x86 emulator does not calculate address correctly
81fdbb4a8d34242f0ed048395c4ddc910f1dffbe	ext4 move variables to their scope
48b51d4dda3195320ec95b3393f44bfb060653c1	mtd nand omap free region as per resource size memory as is now obtained via resource upon freeing use resource size this also helps get rid of one macro
77d3d2e275629b50a24d805c80800a973ccfe04a	pinctrl mvebu delete an error message for a failed memory allocation in three functions the script pointed information out like the following warning possible unnecessary out of memory message thus fix the affected source code places
0d76091ca89d6094b52d442db39f61c896207256	asoc pcm3008 replace the codec field of the snd_soc_widget struct is eventually going to be removed use instead
ffbc559b0699891c6deb9fd2b4750671eab94999	bail out if fb is not bound to crtc fixes possbile null pointer dereference resolves kernel crash in nv50_crtc_do_mode_set_base during shutdown
97b1d23f7bcbee00a5b85bf2c022c612ea67429d	metag drop show_mem from mem_init the recent commit mm vmscan move lru lists to node changed memory management code so that show_mem is no longer safe to call prior to setup_per_cpu_pageset as will still be null this causes an oops on metag due to the call to show_mem from mem_init pgdat_reclaimablestruct pglist_data pgdat show_free_areasunsigned int filter __number__ show_memunsigned int filter __number__ mem_init mm_init start_kernel this wasnt a problem before with zone_reclaimable as zone_pcp_init was already setting to via setup_arch and paging_init which happens before mm_init free_area_init_nodeint nid __number__ paging_initunsigned long mem_end __number__ setup_archchar cmdline_p start_kernel no other arches appear to call show_mem during boot and it doesnt really add much value to the log so lets just drop it from mem_init
b418c5276a41c821c25410542df83d283bbc0b2a	rds ib drop unnecessary rdma_reject when rdma_accept fails rdma_reject is called in it as such it is not necessary to execute rdma_reject again
39387dc2cf22bc5e9c310a4991c6a40852df4217	rtc rv3029 add update_bits helper for eeprom access this simplifies the update of single bits in the eeprom
5bab305d3c573afc33b241a53452f6736910b2b4	regulator lp872x remove unnecessary function the lp872x_check_dvs_validity is used for checking dvs platform data if the dvs platform data is not defined return as error code now this is unnecessary because the default dvs mode is set in this case
9c41ef086e435be8f10be4cb9636c7ecf6709ddd	fix whitespace in eeh
c66875b1ee0e5da138977e616c9c203ff97ace28	print smc fw info in cgs the non-powerplay code handles this directly do it in cgs for powerplay reviewed-by rex zhu
8c0c459ced458b19a589b3a31e5c1231bd1b887a	asoc remove unused control_data field of struct wm8978_priv the control_data field is used to initialize the codecs control_data field but since this is also done by the snd-soc-cache core the redundant assignment can be removed and the field can be dropped
a1f613f167a36610d238b66f5e49bfdb1d04aa89	crypto atmel-aes fix atmel_aes_handle_queue this patch fixes the value returned by atmel_aes_handle_queue which could have been wrong previously when the crypto request was started synchronously but became asynchronous during the call
2d1a9a946faebfedd660a1f1c2b90984fff41f91	dmaengine omap-dma dynamically allocate memory for lch_map on omap1 platforms we do not have __number__ channels available allocate the lch_map based on the available channels this way we are not going to have more visible channels then it is available on the platform
75caeecdf9c7151af5f7d972e2dabbff1bef30a7	fuse update mtime on openo_trunc in atomic_o_trunc mode in case of is set fuse does nothing in fuse_do_setattr while handling openo_trunc hence i_mtime must be updated explicitly in fuse_finish_open the patch also adds extra locking encompassing openo_trunc operation to avoid races between the truncation and updating i_mtime
4d94c157f87eebdcd84e9e5e27ad65978f776c2e	ipw2x00 remove ipw2100_rates_11b its just a duplicate of ipw2100_bg_rates
8cef7a7892e7820a825aab28a1bff42ca216e9f0	be2net enable interrupts in be_probe roce and other ulps need them as the nic pci function may be used by other protocols the chip interrupts must be enabled in be_probe itself rather than be_open
1a308118c238c5aa0af3d303b42fa6bbee279394	nfsd4 allow an exchange_id to kill a __float__ client following rfc __number__ section we can permit a __float__ client to remove an established __float__ clients state but we dont allow updates
7676fa70feb2f3bcdd4b854a553a57d8ef8505aa	arm64 acpi make acpi_map_gic_cpu_interface as void function since the only caller of acpi_parse_gic_cpu_interface doesnt need the return value make it have a void return type to avoid introducing subtle bugs and update the comments of the function accordingly
f64f17265977efb54e330aae1e72637d75308244	fix fbc_fence_off having a __number__ byte register at seems unlikely as thats not __number__ byte aligned since later platforms have more or less the same fbc registers with new names assume that fbc_fence_off is at just like dpfc_fence_yoff this feels like a simple typo in bspec looks a lot like after all should still be tested on real hardware of course but i dont have any mobile gen4 systems
f1213cacc7ffc7d4cdef3692f22b28a2df3216f5	gfs2 fix race in gfs2_rs_alloc qe aio tests uncovered a race condition in gfs2_rs_alloc where its possible to come out of the function with a valid allocation but it gets freed before use resulting in a null ptr dereference this patch envelopes the initial short-circuit check for non-null into the mutex lock with this patch i was able to successfully run the reproducer test multiple times resolves
86557861dfe4f8defde0df40620b97cc60285aa4	btrfs skip superblocks during discard btrfs doesnt track superblocks with extent records so there is nothing persistent on-disk to indicate that those blocks are in use we track the superblocks in memory to ensure they dont get used by removing them from the free space cache when we load a block group from disk prior to btrfs remove empty block groups automatically that was fine since the block group would never be reclaimed so the superblock was always safe once we started removing the empty block groups we were protected by the fact that discards werent being properly issued for unused space either via fitrim or the block groups were still being released but the blocks remained on disk in order to properly discard unused block groups we need to filter out the superblocks from the discard range superblocks are located at fixed locations on each device so it makes sense to filter them out in btrfs_issue_discard which is used by both and fitrim
d0500864c63ca668dfcd53e40e469690eae593a3	staging unisys fix camelcase in create_bus fix camelcase local variable names busno bus_no devicecount dev_count
6d4b3621bb613da51ae7474c50f5cb37465b6f37	hwmon nct6775 constify strings nct6775_sio_names should be a constant pointer to an array of constant strings
9ad42a79247d5e16d26f7d1531a68f20a889c5af	selinux call warn_once instead of calling audit_log_start two of the conditions in selinux_audit_rule_match should never happen and the third indicates a race that should be retried remove the calls to audit_log which call audit_log_start and deal with the errors in the caller logging only once if the condition is met calling audit_log_start in this location makes buffer allocation and locking more complicated in the calling tree audit_filter_user
5963ded8fecedbab6b99274126434c7a22c45c84	switch to
3897de6a6eb74ff8f25c2021431bedd4ba138685	nfc microread remove useless irq field in microread_i2c_phy irq field is never used
442168273ecf57cf4494e492a59f29991089ff42	mtd nand nandsim fix error check debugfs_create_dir and debugfs_create_file returns null on error or a pointer on success they do not return the error value with err_ptr so we should not check the return with is_err_or_null instead we should just check for null
e69a70d951787013e5fe65e843edd5711571546c	pata_serverworks cleanup cable detection merge identical cable routines for dell and sun systems into common oem_cable one
27028626b4b9022dcac23688e09ea43b36e1183c	raid10 record correct address of bad block for failed write request record block address on a device not block address in an array
c590b5e2f05b5e98e614382582b7ae4cddb37599	ethtool make harder to misuse by drivers as the patch bnx2x remove zeroing of dump data buffer showed it is too easy implement in a driver lets make sure drivers cannot get confused by userspace requesting a too big dump also warn if the driver sets to something weird and make sure the length reported to userspace is the actual length of data copied to userspace
f2d928f933ce1b1803dac12f1bc8117b8f7563a9	staging lustre lnet potential deadlock in lnet fixes potential deadlock in lnetmdattach intel-bug-id reviewed-on
9a21a007b6420649d7bcdebbbbd43d24f648af6b	i40evf add more info to interrupt vector names this patch adds the netdev name to the vf misc vector name without this patch all the interrupts show the same info so it difficult to distinguish them change-id i247828697e1373ecfb5f8dc1bc9618e98a7f4942
7caf69fb9c5017df01945a1861c042f6aa08edeb	batman-adv fix symmetry check route flapping in multi interface setups if receiving an ogm from a neighbor other than the currently selected and if it has the same tq then we are supposed to switch if this neighbor provides a more symmetric link than the currently selected one however this symmetry check currently is broken if the interface of the neighbor we received the ogm from and the one of the currently selected neighbor differ we are currently trying to determine the symmetry of the link towards the selected router via the link we received the ogm from instead of just checking via the link towards the currently selected router this leads to way more route switches than necessary and can lead to permanent route flapping in many common multi interface setups this patch fixes this issue by using the right interface for this symmetry check
33bee520cbaee22118fb96ab500ba4cd4e8cb749	add missing drm_format_rgb565 to ipu_plane_formats drm_format_rgb565 is missing from ipu_plane_formats the support is there just need to make it available to userspace
9c836d0c44798227a75c410cf33a76992cf93437	i2c mpc fix isr return value isr should not return irq_handled for not handling anything this patch fixes the return value of isr for the same case
8d214b7d9c45f4af23ce41b2bc74f79c44f760de	allow full ppgtt with param override when ppgtt was disabled by default the patch also prevented the user from overriding this behavior via module parameter being able to test this on arbitrary kernels is extremely beneficial to track down the remaining bugs the patch that prevented this was commit date thu mar __number__ __number__ disable full ppgtt by default by default ppgtt is set to __number__ means off __number__ means aliasing only __number__ means full all other values are reserved
7aa0557fae5ce26dddc877869c7ad934e71f30db	cpufreq longhaul fix double invocation of during frequency transitions the cpufreq core takes the responsibility of invoking cpufreq_freq_transition_begin and cpufreq_freq_transition_end for those cpufreq drivers that define the callback but dont set the async_notification flag the longhaul cpufreq driver falls under this category but this driver was invoking the _begin and _end apis itself around frequency transitions which led to double invocation of the _begin api the _begin api makes contending callers wait until the previous invocation is complete hence the longhaul driver ended up waiting on itself leading to system hangs during boot fix this by removing the calls to the _begin and _end apis from the longhaul driver since they rightly belong to the cpufreq core note that during module_exit the longhaul driver sets the frequency without any help from the cpufreq core so add explicit calls to the _begin and _end apis around that frequency transition alone to take care of that special case
b9536ad52152ff440231dcc2dd9cfa644f5413c9	nfsv4 release the sequence id in the return on close case otherwise we deadlock if state recovery is initiated while we sleep
35e729ac5d5c1a164aee475583cb9830e9707b61	net ethernet davicom dm9000 initialize variables directly clean up the code a bit to initialize the variables directly when defining them
4123ea34aac754cdbd0a5e482c29be433c311d67	mtd nand mxc implement onfi features to be able to support different onfi timing modes we have to implement the onfi_set_features and onfi_get_features tested on an soc
eef0df6a59537032ab6b708f30b28d9530f8760e	mpi_read_raw_data fix nbits calculation the number of bits nbits is calculated in mpi_read_raw_data as follows nbits nbytes __number__ afterwards the number of leading zero bits of the first byte get subtracted nbits count_leading_zerosbuffer0 however count_leading_zeros takes an unsigned long and thus the u8 gets promoted to an unsigned long thus the above doesnt subtract the number of leading zeros in the most significant nonzero input byte from nbits but the number of leading zeros of the most significant nonzero input byte promoted to unsigned long bits_per_long __number__ too many fix this by subtracting bits_per_long __number__ from nbits only mpi
c9d26f1aab007a7083f509b4be263bc904ddb0d3	pinctrl sx150x rename reg_advance to reg_advanced this matches the datasheets and is less confusing since the register has nothing to with advancing anything
c416e5aa40c51b3e8ae75a3e122dd5eabce078cd	reorder model numbers re-order the model array to match the order in to easier spot gaps and such
a651684c100d47b34acb815d56c0c258565296dc	usb renesas_usbhs fixup dma transport data alignment renesas_usbhs dma can transport alignment data not this patch fixup it
842750488de659ffd12a28e5f5328c9f15ea08e1	mmc sdhci-of-arasan remove disable clk_ahb from sdhci_arasan_resume we dont really need disable clk_ahb when failing to resume otherwise we may take risk of bus error for accessing register without clk_ahb
21090f06f09f72f2806c19f0bdcd4fde622c2676	usb gadget udc amd5536 do not rely on driver argument future patches will remove the extra driver argument to in order to do that we must make sure that our udc does not rely on it first
9d8abf45944e4f1c18a04070fc3ed2f3ffcbbcb6	replace strict_strtoul with kstrtoul the usage of strict_strtoul is not preferred because strict_strtoul is obsolete thus kstrtoul should be used
210cb67cb5b9f9a23b7ce91de50bab357440ba9d	asoc io use dev_get_regmap if driver doesnt provide a regmap less error prone and one less line of code in drivers
dd2151be28b9ed734fc5738ac675ed7e234847e3	acpi hotplug pci rework the handling of eject requests to avoid the need to install a hotplug notify handler for each acpi namespace node representing a device and having a matching scan handler move the check whether or not the ejection of the given device is enabled through its scan handler from acpi_hotplug_notify_cb to acpi_generic_hotplug_event also move the execution of acpi_ost_sc_eject_in_progress _ost to acpi_generic_hotplug_event because in acpi_hotplug_notify_cb or in acpi_eject_store we really dont know whether or not the eject is going to be in progress for example acpi_hotplug_execute may still fail without queuing up the work item
f32eca7d6f962a9d8e998dc28a96665a9a7deb78	staging dgnc avoiding buffer overflow neo_vpd error buffer overflow __number__ __number__ neo_vpd warn buffer overflow __number__ __number__ neo_vpd warn buffer overflow __number__ __number__
e35e305eff0fda4ddd5cfbd8eea06948faa503af	simple add auo b116xw03 panel support the auo b116xw03 is a __float__ hd tft lcd panel connecting to a lvds interface and with an integrated led backlight unit this panel is used on the samsung chromebookxe303c12
48a87cc26c13b68f6cce4e9d769fcb17a6b3e4b8	net netprio fd passed in scm_rights datagram not set correctly a socket fd passed in a scm_rights datagram was not getting updated with the new tasks cgrp prioidx this leaves io on the socket tagged with the old tasks priority to fix this add a check in the scm recvmsg path to update the sock cgrp prioidx with the new tasks value thanks to al viro for catching this
0d35773979b9c0925edfefeaac173bbeafc83d94	spi spi-topcliff-pch remove deprecated create_singlethread_workqueue the workqueue wk serves as a queue for carrying out execution of requests it has a single work and hence doesnt require ordering also it is not being used on a memory reclaim path hence the singlethreaded workqueue has been replaced with the use of system_wq system workqueues have been able to handle high level of concurrency for a long time now and hence its not required to have a singlethreaded workqueue just to gain concurrency unlike a dedicated per-cpu workqueue created with create_singlethread_workqueue system_wq allows multiple work items to overlap executions even on the same cpu however a per-cpu workqueue doesnt have any cpu locality or global ordering guarantee unless the target cpu is explicitly specified and thus the increase of local concurrency shouldnt make any difference work item has been flushed in pch_spi_free_resources to ensure that there are no pending tasks while disconnecting the driver also dropped the label err_return since its not being used anymore
f45651f9bb22f7ab60d806707be2c75f3d219157	staging remove linked list of registered devices the linked list of registered devices is not needed as the struct tpci200_board is saved in private data field of the pci device
9f5ac8ed4013c616bd3b29147808c8b2f057c251	dont leak the scratch page recently discovered by enabling config_dma_api_debug in our ci by the looks of it broken since forever v2 dont forget to set the scratch page back to wb chris reuse intel_gtt_teardown_scratch_page for that and fix it up to treat needs_dmar correctly bugzilla
10c43dd4c4403d35fc6477d547aa3a38b466b310	staging hv storvsc fix a bug in copy_from_bounce_buffer fix a bug in copy_from_bounce_buffer
2545e0720a5a4bf8ebccc6f793f97a246cf3f18d	cifs writing past end of struct in cifs_convert_address is an int bits but strict_strtoul writes a long so this can corrupt memory on __number__ bit systems
a4ea1cc90604df08d471ae84eb9627319d10c844	cgroup always use rcu accessors for protected accesses still has places where a rcu pointer is set and accessed directly without going through rcu_init_pointer or rcu_dereference_protected theyre all properly protected accesses so nothing is broken but it leads to spurious sparse rcu address space warnings substitute direct accesses with rcu_init_pointer and rcu_dereference_protected note that is specified as the extra condition for all derference updates this isnt ideal as all it does is suppressing warning without actually policing synchronization rules however most are scheduled to be removed pretty soon along with css_id itself so no reason to be more elaborate combined with the previous changes this removes all rcu related sparse warnings from cgroup acked-by li zefan
efeb156e7275c5b6c6e0f96aceb3c6abf98fc392	kprobes silence warning enabling debug_strict_user_copy_checks causes the following warning in file included from from in function copy_from_user inlined from write_enabled_file_bool at warning call to copy_from_user_overflow declared with attribute warning copy_from_user buffer size is not provably correct presumably due to buf_size being signed causing gcc to fail to see that buf_size cant become negative
73f14f6d007df1596da7cea9113084acfe846b8f	arm omap fix typo on timer cleanup fix __number__ vs typo in function omap4_local_timer_init error implicit declaration of function omap4_sync32_timer_init at top level warning omap4_sync32k_timer_init defined but not used also mark the omap4_local_timer_init stub as __init and take off the explicit inline and let the compiler do the work instead
2bab480d1ca9b654eff316eba44fad2eac8884b4	staging lustre return proper error code for libcfs_kkuc_msg_put the functon libcfs_kkuc_msg_put returns which is not correct return instead if the kuc header is corrupt
1e179d4e283bd197035960ef751b5ccac06cbf91	check for allocation failure in radeon_ring_backup static checkers complain if this we dont check for allocation failure also we can use the new kmalloc_array function here as a cleanup
425061b0f5074c727446b6383d0880f089ede469	play nice in multi-platform builds the rockchip iommu driver unconditionally executes code and registers a struct iommu_ops with the platform bus irrespective of whether it runs on a rockchip soc or not this causes problems in multi-platform kernels where drivers for other socs will no longer be able to register their own struct iommu_ops or even try to use a struct iommu_ops for an iommu that obviously isnt there the smallest fix i could think of is to check for the existence of any rockchip iommu devices in the device tree and skip initialization otherwise this fixes a problem on tegra20 where the drm driver will try to use the obviously non-existent rockchip iommu
21173d0b4d2a0b9e9e5f3155cf2cfc5781a6f4b1	update reschedule warning text modify the reschedule warning to output the offline cpu number and use a better debug message link tweaked the warning message
c1ab0e9cf94f52abe59cb63358518dac29b5b101	net systemport constify ethtool_ops structures check for ethtool_ops structures that are only stored in the ethtool_ops field of a net_device structure or passed as the second argument to netdev_set_default_ethtool_ops these contexts are declared const so ethtool_ops structures that have these properties can be declared as const also the semantic patch that makes this change is as follows disable identifier i position p static struct ethtool_ops identifier struct net_device e position p identifier expression e position p netdev_set_default_ethtool_opse position p identifier on disable identifier static struct ethtool_ops i
113f9017e503ba5a21138f93720857b77e4069f9	cpufreq brcmstb-avs-cpufreq remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
bf2f2f7958388b2000736452fd7a126182ee69d0	spi altera remove the code to get unused platform_data the definition of struct altera_spi_platform_data does not exist in current tree so remove the code to get platform_data which is never used
83448bf7867917d5fd104e65275d8e153f3293a8	watchdog xen dont unconditionally enable the watchdog during resume this was found to be a problem particularly after guest migration
d31af0a325ca4ff8e57b8616ab2228913df369ad	nvme increase depth of admin queue usually the admin queue depth of __number__ is plenty but for some use cases we really need it larger examples are use cases like mat where you have to touch all of nand for like purposes in those cases we see a good increase with an increased queue depth
e577516b9db3e0f19df82b6430fe3b06e05d6304	mlxsw fix use-after-free bug in mlxsw_sx_port_xmit store the length of the skb before transmitting it and use it for stats instead of since skb might have been freed already this issue was discovered using the kernel address sanitizer kasan
f1927479554bf19d2ac54c4b1a38538e54e1881b	media pwc dont return einval when an unsupported pixelformat is requested instead chaneg the passed in format to the pwc default pixelformat
1e6dd8adc78d4a153db253d051fd4ef6c49c9019	perf fix off by one test in perf_reg_value the test should be array_size instead of array_size link
eac378a9ceb7196b776a965d915e02995fb8ba55	kvm check that idmap doesnt intersect with va range this is more of a safety measure than anything else if we end-up with an idmap page that intersect with the range picked for the the hyp va space abort the kvm setup as it is unsafe to go further i cannot imagine it happening on we have a mechanism to work around it but could potentially occur on a system with the kernel loaded high enough in memory so that in conflicts with the kernel va
6ac6b475c56ce4bbaf36b02db7d1372f2e17aeec	extcon arizona get pdata from arizona structure not device in the case of a device tree system there will be no pdata attached to the device causing us to deference a null pointer better to take the pdata from the arizona structure as this will always exist and we know will have been populated since it is populated by the mfd device which binds in the extcon driver
3d70a363d965ddb34678e33d5ab8d19ac5969aed	ata pata_samsung_cf add missing __iomem annotation added missing __iomem annotation and staticized local symbol in order to fix the following sparse warnings warning symbol pata_s3c_data_xfer was not declared should it be warning incorrect type in argument __number__ different address spaces expected void const volatile noderef got void warning incorrect type in argument __number__ different address spaces expected void volatile noderef got void warning incorrect type in argument __number__ different address spaces expected void got void noderef warning incorrect type in argument __number__ different address spaces expected void got void noderef
7b9d1f0b7a18b86db0ac1de628fa91c0994fefbe	misc bh1780 introduce the use of devm_kzalloc this patch introduces the use of devm_kzalloc and does away with the kfrees in the probe and remove functions a label and the kfree being called on the return path of failure on i2c_check_functionality which is completely unnecessary and removed the null assignment of ddata is no longer required is also done away with
4bfab2034bab9374eba1921cf7bd51fd8d48661b	arm mm remove general hugetlb code from arm general forms of huge_pte_alloc huge_pte_offset and follow_huge_pmd are now available in this patch removes the arm copies of these functions and activates the general ones by enabling config_arch_want_general_hugetlb
9689dcce0b456793c46bdeea7a79adfab1bc9c5d	svcrpc dont revert to svc_pool_default on nfsd shutdown this was unexpected behavior at least for me--why would you want configuration settings automatically lost on nfsd in practice this wont affect distributions which likely set everything on every startup but id expect the behavior to be less confusing to someone manually restarting nfsd for testing
f683739539e819e9b821a197d80e52258510837b	prevent positive return value of walk_page_test from being passed to callers walk_page_test is purely pagewalks internal stuff and its positive return values are not intended to be passed to the callers of pagewalk however in the current code if the last vma in the do-while loop in walk_page_range happens to return a positive value it leaks outside walk_page_range so the user visible effect is return value according to the reporter mbind causes it this patch fixes it simply by reinitializing the return value after checked another exposed interface walk_page_vma already returns __number__ for such cases so no problem
c59ab673699b6dcf457caea46799679e2526917c	bonding clean the primary slave if there is no slave matching new primary if the new primay is not matching any slave in the bond the bond should record it to params clean the primary slave and select a new active slave
36471012e2ae28ca3178f84d4687a2d88a36593e	tcp must free metrics at net dismantle we currently leak all tcp metrics at struct net dismantle time tcp_net_metrics_exit frees the hash table we must first iterate it to free all metrics
5d24ceab4eaf0dd7825c5a06dc6f264c0a59660c	mips bcm47xx read out full board data read out the full board data independently of the sprom version now we also get the full boardflags and so on if sromrev is not set and our code would assume a rev __number__ device when a nvram option is not set because it is not there this is no problem patchwork
7648e109422b6cd684491c144eeee40e89d19631	staging comedi daqboard2000 fixed coding style issue fixed coding style warning
d03f6bbaa42c2c5466350718f804537384902d5d	staging android remove unnecessary braces fixes the following checkpatch warning warning braces are not necessary for single statement blocks
163195fc12cae0c8b5c0d74d3ba8d2c5f81773bc	fix handling of a pm_runtime_get_sync success case if the device was already up a __number__ is returned instead of __number__ we were erroring out leading the driver to sometimes fail at screen initialization generally with enoent returned to it
8ff63de690d74bec848caab64a86bd53c797365c	media au0828 remove control buffer from send_control_msg there are no cases where a control message is ever sent to the au0828 with an actual buffer defined remove the reference to which currently requires us to hold a mutex since it is shared with the read function
3e4273db10ee7bd1000a088f4c647cb993fc009c	staging unisys visorbus remove unneeded checks for valid variable addr the retry variable created in handle_command is statically allocated and its address is never set to null therefore conditionals to verify the validity of the retry variables address are unnecessary
3e00ed0e984bbec47f5e531bad3cf36885aa5d83	mtd fixup corner case error handling in mtd_device_parse_register since commit mtd implement common reboot notifier boilerplate we might try to register a reboot notifier for an mtd that failed to register lets avoid this by making the error path clearer
7de89f058ec2c58ef16582e4efadeb33d711c9e1	e1000e cleanup remove e1000_set_d0_lplu_state replace the function e1000_set_d0_lplu_state with the contents of it coded in place of the single call to the function
54d5b7d079dffa74597715a892473b474babd5b5	workqueue make get_work_pool_id cheaper get_work_pool_id currently first obtains pool using get_work_pool and then return for an off-queue work item this involves obtaining pool id from performing idr_find to find the matching pool and then returning its which of course is the same as the one which went into idr_find just open code work_struct_cwq case and directly return pool id from tj the original patch dropped on-queue work item handling and renamed the function to offq_work_pool_id there isnt much benefit in doing so handling it only requires a single if and we need at least bug_on which is also a branch even if we drop on-queue handling open code work_struct_cwq case and keep the function in line with get_work_pool rewrote the description
973e02c1e89768d13be259bf77f88b5cfd16bade	arm define arm specific arch_match_cpu_phys_id core library now provides architecture specific hook to match the logical cpu index with the corresponding physical identifier most of the cpu dt node parsing and initialisation is contained in so its better to define arm specific arch_match_cpu_phys_id there this mainly helps to avoid replication of the code doing cpu node parsing and physicalmpidr to logical mapping
8dbee53b2a8dcc23e8d52d85d7e0b4fe268c55e7	media tw2804 revert adc control commit case in adlink mpg24 there is bt878 exists it captures one frame of all video inputs video signal for it one transmits through tw2804 chip so we cant control adc shut on tw2804 as some another can use bttv capture way
28acf3b20c562b8afa513629db749a64c7c45924	wadisablerccunitclockgating isnt applicable to ivb wadisablerccunitclockgating is only relevant for snb
6cac4695f2042a1d0e17aa48c5705f69907e74c3	rbd set instead of no point in providing an empty callback and then setting for each rbd_dev dynamically
de755c330512364d3396c7da0c20b1c20b3b08b2	gpio mcp23s08 fix casting caused build warning
db41cf2df6c16cec5bc7834b6932a276dc49324e	sparc32 remove ldxa and stxa defines unused these were for sharing some mmu code between sun4 and sun4c
ab03e04741fc7a5747daabc57d15cb1a3e2fd289	backlight ltv350qv use devm_ functions the devm_ functions allocate memory that is released when a driver detaches this patch uses devm_kzalloc of these functions
de9b9422026357c878a9fa3714936be0e1388e9c	ext3 pass custom eof to generic_file_llseek_size use the new custom eof argument to generic_file_llseek_size so that seek_end will go to the max hash value for htree dirs in ext3 rather than to i_size_read
669506e781d12939ad270b4c281189de119d1319	fix stepping check for a couple of both wadisablesdeunitclockgating and wasetgapsunitclckgatedisable are needed on b0 as well
f6ca26f26837f90727a1450f010a1638834e34e1	qede allocate enough data for weve got the number of longs yes but we should multiply by sizeoflong to get the number of bytes needed
ad14d4e0308afda06a60036020a15025571604af	usb dwc3 gadget release spin lock during gadget resume its a requirement that we release controllers lock while calling gadget api function pointers this patch just fixes that long standing bug
f97fcad38f2ecf2e34b6f0ab93f74f2978dbe008	md remove need for mddev_lock in md_seq_show the only access in md_seq_show that could suffer from races not protected by is walking the rdev list this can receive sufficient protection from rcu so use rdev_for_each_rcu and get rid of mddev_lock now reading will never block in md_seq_show
304adf8a8fff972f633bf52b3d160682d3f3d5d2	genirq introduce helper irq_desc_get_irq introduce helper irq_desc_get_irq to retrieve the irq number from the irq descriptor link
1d6b3c9ba756a5134fd7ad1959acac776d17404b	perf tools decompress kernel module when reading dso data currently perf decompresses kernel modules when loading the symbol table but it missed to do it when reading raw data link
526edcf56759142c1c250d2d4c55db9f25be644b	net mvmdio slight optimisation of orion_mdio_write make only a single call to mutex_unlock in orion_mdio_write
9c350d834f08407d8470b3c09bbc34e42d261362	plane use fbs formats cpp to compute x offset use the framebuffers format to compute its cpp and use it when calculating the address shift value link
550bf89366e068cd6e29c36156f700a02dbb6388	regulator da903x convert da9034 ldo12 to use linear ranges the voltage table of da9034 ldo12 is __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ the voltage table is composed of two linear ranges for selector __number__ __number__ volt __number__ __number__ selector for selector __number__ __number__ volt __number__ __number__ selector __number__ this patch converts da9034 ldo12 to use newly introduced helpers for multiple linear ranges
7f64fb41aad9a8504dd76e81b2391eae64e1498a	parisc provide default implementation for most architectures that define config_have_dma have implementations for both dma_alloc_attrs and dma_free_attrs all achitectures that do not define config_have_dma also have both of these definitions provided by add default implementations for these functions on parisc
0fd682f644d5773c0107838f5316db3361332a19	staging vt6655 fix assignment of bool to __number__ this patch fixes the following warnings detected using coccinelle for file warning assignment of bool to warning assignment of bool to
dd783a212c023b309e91ab9752c07e22f759461e	modify query info named port_num when querying rc qp this patch modified the output query info to fix bug in hip06
8f318526a292c5e7cebb82f3f766b83c22343293	add missing barrier to version of gic_read_iar commit make sure read from icc_iar1_el1 is visible on redestributor fixed the missing barrier on arm64 but forgot to update the counterpart which has the same requirements lets fix it
d6cfef0bf6642d9e368d5b39b7896ea9de7d73bc	remove braces in mmc_ddr_tuning fixed below checkpatch warnings braces are not necessary for single statement blocks
f1092794c0132cfca2329748983b840ffeae379e	staging fbtft fb_ssd1331 remove unnecessary cast compiler can typecast variables implicitly so explicit type cast is not required and should be removed semantic patch used type t t e identifier x t x te
f868089b09b51bd17ee41dedb96f98a1d0952fec	nfs fix a potential busy wait in nfs_page_group_lock we cannot allow nfs_page_group_lock to use task_killable here since the loop would cause a busy wait if somebody kills the task
1bb564718f298dfd7c435819d3bc902e6be666c6	use strreplace theres no point in starting over every time we see a
563c47df79747412bf5d0fdb8fd24089d7316c2b	crypto atmel-sha add sha_mr_mode_idatar0 this patch defines an alias macro to sha_mr_mode_pdc which is not suited for dma usage
20420500cb553793f64c885a51024686e74b9819	i2c-scmi convert to module_acpi_driver
5a1bbf21325bd4f2641f6141fb8c47f6095578dd	input add new keycodes for passenger control units entertainment systems used in aircraft need additional keycodes for their passenger control units so lets add them
1f8c37a4e29bb4794950228d2d9571029f277d7b	use timestamps for selftest the wire protocol for the ping uses a pair but this wont work when one side uses a timeval to look up the current time beyond __number__ this changes the code to use ktime_get_real_ts64 to create a timestamp that has the right format on all machines
5939d9dfe4406a49d8688eb827d88abcaf233c42	power twl4030_madc_battery add missing module_alias without module_alias twl4030_madc_battery wont get loaded automatically
c3322b30fe37db53feb4f60ccb1eb5175af2d2e0	iwlagn remove un-necessary step no need to copy twice
1cb9cf726efeb77e05ee4f27f32700c46ecb1b8a	kvm s390 improve debug feature usage we do not use the exception logger so the area is unused just have one area that is bigger __number__ pages at the same time we can limit the debug feature size to __number__ longs as the largest user has __number__ parameters string boiler plate vcpu psw mask psw addr
c2372aafbc4ff59bb6a6bda7ed73364d7f7c53bb	remove bogus version check in context the omap2_iommu_save_ctx and omap2_iommu_restore_ctx performs a sanity version check against a fixed value that is correct only for iommus this fixed check does not scale for all iommus and is not absolutely required so it has been removed
124c39371114f43df34882685db3682a91dea10c	xhci use boolean to indicate last trb in td remainder calculation we only need to know if we are queuing the last trb for a td when calculating the td remainder field the total number of trbs left is not used we wont be able to trust the pre-calculated number of trbs used if we need to align trb data by splitting or merging trbs in order to satisfy comply with data alignment requirements in xhci specs section
475a361a6f2c7c690fd59a8f5224615e781cc3bd	asoc rsnd src add rsnd_src_halt based on datasheet process
f6266a41d820feaa7b7febe122b285e336e40bfd	staging comedi adl_pci9118 use comedi_bytes_to_samples remove the assumption of the sample size by using the comedi_bytes_to_samples helper function to convert the number of bytes to the number of samples
4db0d88e2ebc4f47092adc01f9885a43ad748995	ext4 fix reading new encrypted symlinks on no-journal file systems on a filesystem with no journal a symlink longer than about __number__ characters exact length depending on padding for encryption could not be followed or read immediately after being created in an encrypted directory this happened because when the symlink data went through the delayed allocation path instead of the journaling path the symlink was incorrectly detected as a fast symlink rather than a slow symlink until its data was written out to fix this disable delayed allocation for symlinks since there is no benefit for delayed allocation anyway
6d99d6a3cffdcbf1705ebd41b528fc31feaa7966	staging dgnc remove dgnc_init_globals function the dgnc_init_globals function is only initializing the timer so initialize it directly and remove dgnc_init_globals and change the comment appropriately
7c7f1547b627092737493f0781780af85cc9b1a4	fix rcu splat from new tlb tracepoints dave jones reported seeing a bug from one of my tlb tracepoints according to paul mckenney the right way to fix this is adding an _rcuidle suffix to the tracepoint this patch does just that link
1642182ea0eedecc5d6f330c43cef8639327f0e5	add interrupt support for dp83640 phy added functions for ack_interrupt and config_intr tested on an mpc5200b powerpc board
55c99a4dc50fb749076592e8c66c235ca0124360	use iommu_attach_group since the conversion to default domains the iommu_attach_device function only works for devices with their own group but this isnt always true for current iommuv2 capable devices so use iommu_attach_group instead
ea4df502dcee1d7ff394282f81c640e6a14e1997	ll_get_child_fid callers already have the child no need to bother with d_lookup
92eaa328f2789c65441a85d50b5acea1375cb692	asoc switch over to use snd_soc_register_component on dw i2s
ed3fa31f35896b42c54333edabf0a9e986fa952c	bluetooth use lmp_bredr_capable where applicable this patch replaces all lmp_no_bredr bit checking by the helper macro lmp_bredr_capable
acf0e531a48bdf805fec024dcc2735a61933a213	media ivtv use for_each_sg use for_each_sg instead of open-coding it
f1d11f394f6e3fc0368e72244fb5ddc4142e804b	use irq_domain_add_simple to be able to use sparse_irq while yet not using device tree we need to use irq_domain_add_simple that will allocate descriptors for the irqs in the non-dt case and fall back to using the linear irqdomain in the dt case
3848c23b19e07188bfa15e3d9a2ac27692f2ff3c	perf report dont show blank lines if entry has no callchain when all callchains of a hist entry is percent-limited do not add a blank line at the end it makes the entry look like it doesnt have callchains link
2bc552df76d83cf1455ac8cf4c87615bfd15df74	add error reporting to of_amba_device_create add error reporting to of_amba_device_create so the user knows when and why some device tree nodes fail to initialize the issue was spotted on universal board using revision __number__ of arm exynos4210 soc on which initialization was silently failing for pl330 mdma1 device tree node it was using the wrong addres resulting in amba_device_add returning
7f379cff11fb9e00e0ff9eff8fbc39ddfd4b1bec	kvm update_memslots drop not needed check for the same slot shift loops will shift array in needed direction and stop at place where new slot should be placed regardless of old slot size
06a7a3cff042a36fb7e6af71039a17c6d1a6d90f	spi rspi add support for loopback mode add support for specifying loopback mode
242a4018cc7902fbdaf213314db2bc622f5c579d	disable idle dop clock gating it seems we need this at least for the current platforms we have but probably not later in any event it should cause too much harm as we do the same thing on several other platforms
bbb433639c8e7b0ab68b7ed05871272880db4094	arm mach-qong add watchdog support add watchdog support for mach-qong target
32e9072b92a1c556a303d8d0e0d64feb667e601d	ipx remove spurious null checking in ipx_ioctl we already unconditionally dereference sk via lock_socksk earlier in this function and our caller sock_do_ioctl makes takes similar liberties
d75a4a972ad1ed6d1326c63ae2fb0f9586161b4d	fujitsu-laptop do not log set_lcd_level failures in bl_update_status any set_lcd_level call can fail for one of two reasons either requested brightness is outside the allowed range or the acpi method used for setting brightness level is not available for bl_update_status the first case is handled by backlight core which means bl_update_status will not even be called if requested brightness is outside the allowed range the second case will be logged anyway by set_lcd_level itself so there is no point in generating another message in bl_update_status remove the superfluous debug message along with a local variable that is now redundant
187094feeb77b5f49513f6a1cfe12749c080bd96	serial pl011 remove redundant early amba_ports declaration this early amba_ports declaration was introduced by commit c16d51a32 amba pl011 workaround for uart registers lockup for use in the pl011_lockup_wa routine this routine was later removed by commit serial pl011 implement workaround for cts clear event issue
585ee0f27ef7b8db46807b960388b7e58b60766d	set sgt pointer in bo pin fix tegra_bo_pin to set the parameter sgt pointer host1x job pinning requires the sgt to determine physical memory addresses of gathers
e6021511f11e71d0e77e5c31f5b0722a80c3545c	mfd arizona dont use devres for dcvdd currently the arizona core uses a devm_regulator_get against its own device node to obtain dcvdd the arizona core is an mfd device and dcvdd is usually supplied by a child node arizona-ldo1 of the core as devres destruction for the mfd device will run after all its children have been destroyed the regulator will be destroyed before devres calls regulator_put this causes a warning from both the destruction of the child node as the regulator is still open and from the put of the regulator as the regulator device has already been destroyed this patch handles the regulator get and put without devres to avoid this issue
31dd624e1cf937655a06fa4eeec06f4bafa34ab7	bluetooth fix missing hdev locking in smp_cmd_ident_addr_info the hdev lock must be held before calling into smp_distribute_keys also things such as hci_add_irk require the lock this patch fixes the issue by adding the necessary locking into the smp_cmd_ident_addr_info function
c7c5fbcdc3b064943491d8dd1229cb25479e9093	put old hw fence of job if gpu reset
6cecdf7a161d2b909dc7c8979176bbc4f0669968	save vcpi with payloads this makes it possibly for drivers to find the associated mst_port by looking at the payload allocation table link
c59878a4131c6db060d7c8b5074328c64330aa7d	asoc ab8500 replace direct snd_soc_codec dapm field access the dapm field of the snd_soc_codec struct is eventually going to be removed in preparation for this replace all manual access to with snd_soc_codec_get_dapm
ab708099a0617e2c37b26d9ecbb373456057ba9b	kvm x86 pop esp is not emulated correctly according to intel sdm if the esp register is used as a base register for addressing a destination operand in memory the pop instruction computes the effective address of the operand after it increments the esp register the current emulation does not behave so the fix required to waste another of the precious instruction flags and to check the flag in decode_modrm
a95e1f5dbca385908aa4087bb98470b0e0ac58d8	pm devfreq fixed syntax errors if was included without config_pm_devfreq there has been a compiler error with an additional semicolon added this patch removes that errorneous semicolon
0654f4ab2baa6100dc6b0b26f4f1fa3f02d10245	arm at91 fix at91x40 build patch arm at91 fix external interrupts in non-dt case fixed a run-time error on some at91 platforms but did not apply the same change to at91x40 which now doesnt build this changes at91x40 in the same way that the other platforms were changed
90bcf1338193da4c87fb7492c716f225b907acf4	md fix a potential deadlock lockdep reports a potential deadlock fix this by droping the mutex before md_import_device __float__ __float__ info possible circular locking dependency detected __float__ not tainted __float__ __float__ is trying to acquire lock __float__ at __address__ __float__ but task is already holding lock __float__ at __address__ __float__ which lock already depends on the new lock __float__ the existing dependency chain in reverse order is __float__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ other info that might help us debug this __float__ possible unsafe locking scenario __float__ cpu0 cpu1 __float__ __float__ lockdetected_devices_mutex __float__ __float__ lockdetected_devices_mutex __float__ __float__ deadlock
a2d57b35c0226102b1f2ffdc2f719fcc30c99bf5	kvm s390 extend diag __number__ fields the new store hypervisor information instruction which we are going to introduce needs previously unused fields in diag __number__ structures
9f57921507dacdcba186e384b2025601ad09b227	staging comedi dt282x use comedi_fc helpers to validate timer args use the comedi_fc helper cfc_check_trigger_arg_is to validate the trigger arguments when the source is trig_timer all the arguments are unsigned int change the local variable to an unsigned int and rename it for aesthetic reasons
10ee1c34bedcc0e2a196d85ec87806fd111b5e79	net_sched use tcindex_filter_result_init
a51a79d50ebc21d47f73f1e7f695ef2f86ef3417	i2c st use new __number__ bit address helper function
025f152046c8a4101a61943ab2065fdf1fa02c0e	nfc update llcp socket target index when getting a connection getting a valid connect means we have a valid target index
555304f47d5694b6a8f671778143acf4a0bf5c5c	rip out intel_dpio_write again unfortunately it looks like further vlv patches are still stalled due to fried hw and too many people are a bit annoyed about the unused function warning so lets just rip it out we can easily put it back in again
922315210b8007a26374e30712813b714af71cac	perf script check before using it found by code inspection while looking at thread__resolve_callchain callsites one had it the other didnt link
bccc2f7b4c1a7fd3d51e34f9dc3397312afb030b	locking powerpc annotate as raw is protecting the interrupt controller hardware this lock can not be preempted on in mainline this change documents the low level nature of the lock otherwise theres no functional difference lockdep and sparse checking will work as usual
8dfeae0d73bf803be1a533e147b3b0ea69375596	move nodes_per_socket into bsp_init_amd nodes_per_socket is static and it neednt be initialized many times during every cpu core init so move its initialization into bsp_init_amd link
7680a227293676eec528e4ef966769e65275d697	staging comedi daqboard2000 change daqboard2000_write_cpld return value daqboard2000_write_cpld currently returns __number__ on success or __number__ on failure change it to return __number__ on success or on failure
b917bb387812f9abb81fc842e4c3b3ec727e10cf	btrfs reada remove pointless bug_on check for fs_info we dereference fs_info several times besides that post-mount functions should never see a null fs_info
5fb8e412abac14823490c4b37e0fbd0efee80837	staging vt6656 move union vnt_tx_data_head up one level move s_vfillrtshead union vnt_tx_data_head to void argument s_vfillctshead union vnt_tx_data_head to void argument in s_vgeneratetxparameter create union vnt_tx_data_head pointing to rts_cts
6d9be0a5c459ac30a5b3e7fbe51c55f65a5f4c7c	acpica add prototype verbose mode acpica commit add72dca18ab5d02f1bf9b08027570e58da520e8 this mode will emit aml byte code after each asl statement this is a prototype only and requires additional development this patch only affects acpica disassembler which is not in the kernel source tree link
fe9b47944edff9b6244c4f5e81bd7b50574dc22b	iwl4965 fix a null pointer dereference in il_tx_queue_free and il_cmd_queue_free if in il_tx_queue_init fails in il_tx_queue_free and il_cmd_queue_free in iwl4965_hw_txq_ctx_free will causes a null pointer dereference because is null at that time this patch fixes this problem by adding a if-check before kfree to avoid double free in il_tx_queue_free and il_cmd_queue_free caused by the fixing and in error handling code of il_tx_queue_init are assigned null values otherwise a double free will occur this patch has been tested in real device and it actually fixes the bug thanks stanislaw for his suggestion
f5e2199ae574245b56b32e047c93625a28fe3b3a	staging bcm2835-audio allocate enough data for work queues we accidentally allocate sizeofvoid bytes instead of __number__ bytes it results in memory corruption
7ca6759fa5cf97b1d822ec526d625d80482b8d6f	regmap drop unneeded goto delete jump to a label on the next line when that label is not used elsewhere a simplified version of the semantic patch that makes this change is as follows identifier l goto l
55f856e640560494518eaf24fe9d2d2089fba71a	fix guess-unwinder regression my attempt at fixing some kasan false positive warnings was rather brain dead and it broke the guess unwinder with frame pointers disabled is broken cat __address__ __address__ restore the code flow to more closely resemble its previous state while still using read_once_nocheck macros to silence kasan false positives link
c3661283f947ff5023b717240d069e9be765b0a9	cnic update version to and copyright year
27356f54c8c32609ff45b4ed333bb64fb2eef374	verify hotplug memory range add_memory and remove_memory can only handle a memory range aligned with section there are problems when an unaligned range is added and then deleted as follows add_memory with an unaligned range succeeds but __add_pages called from add_memory adds a whole section of pages even though a given memory range is less than the section size remove_memory to the added unaligned range hits bug_on in __remove_pages this patch changes add_memory and remove_memory to check if a given memory range is aligned with section at the beginning as the result add_memory fails with when a given range is unaligned and does not add such memory range this prevents remove_memory to be called with an unaligned range as well note that remove_memory has to use bug_on since this function cannot fail avoid printk warnings
0130944bc1d212ad4b33584424d56fe7c049eb65	i2c qup use address helper function in read transfer qup_i2c_issue_read derives the address from i2c_msg this called in the read path when i2c_m_rd flag is set therefore use the __number__ bit address helper function
09b64267c1f72f2670fcde9f11e5453ce365ca23	dont suspend gt until after we disable irqs and display v2 when i moved the irq disable down to after display disable i didnt realise the gt suspend also required irqs off so move it down as well fixes warns seen at time v2 moved the rps flush down as well
bfd063cebb75d3305089e9eeedbd25469d3dc1e6	media ivtv fix format enumeration dont show invalid formats depending on the device node only the compressed or the uncompressed format should be shown not both
56c1d2335b355205d6fabb7663d383e73ea0de47	change alias guids default to be host assigned change the default mode to be host assigned instead of sm assigned this is the expected operational mode because it doesnt depend on sm availability as pf generates random guids as the initial admin values this gives out of the box experience
3ff60f89bc4836583f5bd195062f16c563bd97aa	ack interrupts before handling them vlv otherwise we might receive a new interrupt before we have time to ack the first one eventually missing it without an atomic xchg operation with mmio space this patch merely reduces the window in which we can miss an interrupt especially when you consider how heavyweight the operations are notice that before clearing a port-sourced interrupt in the iir the corresponding interrupt source status in the port_hotplug_stat must be cleared spotted by bob beckett v2 reorder the iir clearing to reduce the window even further add warning to commit message and comments to the code as per chris wilsons request imre deak pointed out that the pipe underrun flag might not be signaled in iir so do not make valleyview_pipestat_irq_handler depend on it v3 improve the source code comment
76bcceff0bfbded075c9703ec5413a9bf50ef8c4	use pv tlb instead of native we also optimize one the tlb flush the native operation would needlessly ipi offline vcpus causing extra wakeups using the xen one avoids that and lets the hypervisor determine which vcpu needs the tlb flush
1180e7d6599c1fb0c56a23a649a3eb37d877b9d0	net cleanup vlan_features setting in register_netdev vlan_features contains features inherited from underlying device netif_soft_features are not inherited but belong to the vlan device itself ensured in vlan_dev_fix_features
39dbd7df5632ac083caa01641cea831b1fe3a3ac	usb ohci properly handle ohci-platform suspend suspend scenario in case of ohci-platform glue was not properly handled as it was not suspending generic part of ohci stern suggested properly handle ohci-platform suspend scenario calling explicitly the ohci_suspend routine in ohci_platform_suspend will ensure proper handling of suspend scenario
51fab693477c39ba82c153d3fb30a4cc6de49874	btrfs use token to avoid times mapping extent buffer the api in tree log code has done sort of changes and it proves that we can benifit from using token so do the same thing here function_graph tracers timer shows that it costs nearly half time of
7857230f7916c5b3b6b683ed332660e8eb2e58d4	sound use swap in sb_audio_close use macro definition thanks to julia lawall for coccinelle scripting support
42b9023fc642f6590b6e23bea5f5f017aba114c5	net sundance remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
8aa99dd3762b67e6555a9f3ef015989bbace39a5	stop hardware before freeing memory memory shouldnt be freed when hardware is still running
09c728aced2bb212ce060a91c28d2ee40a6bf33c	alsa asihpi only set sync if card supports hardware stream grouping
b977a3068a284b2ad4612cdb8ca326cbd2a7ffc9	usb misc usb3503 use dev_get_platdata use the wrapper function for retrieving the platform data instead of accessing directly
a45515f3838328334cfac3d1fcddca9f67fb9172	staging rtl8188eu remove unused function the function rtw_init_recvframe was not being used
2d8339d0ec7986d4654003f4da88e17ea14c1779	iio magnetometer ak8975 add ak8963 added ak8963 in the id table unfortunately some commercial devices using caps version ak8963
5549fb25811710585d5ec77a0e6a1fbc8808df93	virtio console add locking in port unplug path port unplug can race with close in port_fops_release port_fops_release already takes the necessary locks ensure unplug_port does that too
ca0984caa8235762dc4e22c1c47ae6719dcc4064	mm incorporate zero pages into transparent huge pages this patch improves thp collapse rates by allowing zero pages currently thp can collapse pages into a thp when there are up to khugepaged_max_ptes_none pte_none ptes in a range this patch counts pte none and mapped zero pages with the same variable the patch was tested with a program that allocates of memory and performs interleaved reads and writes in a pattern that causes some areas to first see read accesses resulting in the zero pfn being mapped there to simulate memory fragmentation at allocation time i modified do_huge_pmd_anonymous_page to return vm_fault_fallback for read faults without the patch only of the program was collapsed into thp and the percentage did not increase over time with this patch after __number__ minutes of waiting khugepaged had collapsed of the programs memory fix bogus bug
12027f1b3fd69a4e9017e6b13c72547a99c6cf54	ubi correct ubi_wl_flush locking commit ubi modify ubi_wl_flush function to clear work queue for a lnum takes the work_sem semaphore in write mode for the entire loop which is not very good because it will block other workers for potentially long time we do not need to have it in write mode read mode is enough and we do not need to hole it over the entire loop so this patch turns changes the locking takes work_sem in read mode and pushes it down to the loop
71fdb70eb48784c1f28cdf2e67c4c587dd7f2594	fix clear_sched_clock_stable preempt wobbly paul reported a problems with clear_sched_clock_stable since we run all of __clear_sched_clock_stable from workqueue context theres a preempt problem solve it by only running the static_key_disable from workqueue link
79a3ed2e98557a2844e75c203e742f9c229ad1d3	ceph ceph_frag_contains_value can be boolean this patch makes ceph_frag_contains_value return bool to improve readability due to this particular function only using either one or zero as its return value no functional change
b5af0a26da84b75376706a92c7a58036a0bf3541	coresight etb10 fixing the right amount of words to read this patch rectifies the amount of words to read when the internal buffer is deemed bigger than the amount of space available in the perf ring buffer the amount to read is set to the amount of space in the perf ring buffer rather than being subtracted by it
5667ab17999a16c2bb1a5cdcaf183d8710aeb717	greybus arche-apb-ctrl rename init_seq and cleanup fn apb_ctrl_coldboot_seq and apb_ctrl_poweroff_seq is appropriate name as per spec and implementation so rename it also move apb_ctrl_poweroff_seq fn above to group it with other _seq functions testing done tested on and platform
61e6561fae573c3c618118a71ff966ddb14299da	media omap3isp queue fail qbuf if user buffer is too small add buffer length check to sanity checks for userptr qbuf
8e70946943961cf5bb9be3a0cf12bd0da7a7cb0d	lguest add a dummy pci host bridge otherwise linux fails to find the bus
148a1bc84398039e2b96ff78678c4d9a67f81452	drivers char mem check addresses arriving at read_kmem with an offset representing a bogus kernel address __number__ from a simple cat leads to copy_to_user faulting on the kernel-side read x86_64 happens to get away with this since the optimised implementation uses rep thus the user write which is allowed to fault and the kernel read are the same instruction the kernel-side fault falls into the user-side fixup handler and the chain of events which transpires ends up returning an error as one might expect even if its an inappropriate on other architectures though the read is not covered by the fixup entry for the write and we get a big scary unable to hande kernel paging dump the more typical use-case of mmap_kmem has always within living memory at least returned for addresses which dont satisfy pfn_valid so lets make that consistent across too
21ca352b71ca252e1933b1538fe89da8a04395c3	kconfig fix lists definition for the compiler is more strict in that it refuses to assign a to a struct fix that by explicitly casting the poisonning constants tested with all __number__ frontends now
8804b2722dc5d6f9b7ba0a9e812eae9ee5ce95bc	tcp remove false sharing in tcp_rcv_state_process last known hot point during synflood attack is the clearing of in tcp_rcv_state_process it is not needed for a listener so we move it where it matters performance while a synflood hits a single listener socket went from __number__ mpps to __number__ mpps on my test server __number__ cores __number__ nic rx queues
b7f957ac272cb6f7a36536a1801b4da453df9c9b	pci generic request host bridge window resources with core function use devm_request_pci_bus_resources to request host bridge window resources instead of doing it by hand in the driver no functional change intended
db9c9305701a2ee006d2a28770a7aa2dda70a087	staging slicoss removed unnecessary parentheses unnecessary parentheses around the right hand side of an assignment is removed using the following semantic patch identifier constant c f c f c f c f c
1435003c2c2dccad015c8b76199bc39d60343e3b	net amd8111e use new api the ethtool api is deprecated we move this driver to new api
4cbc69023a2129c271ed67da555d62eca42469d2	watchdog softdog make pretimeout support a compile option it occurred to me that the panic pretimeout governor will stall the softdog because it is purely software which simply breaks when the kernel panics testing governors with the softdog on the other hand is really useful so make this feature a compile time option which nees to be enabled explicitly this also removes the overhead if pretimeout support is not used because it will now be compiled away saving on arm32
fff71b14113030f490a8e9eace2e1a22dddfa284	cc2520 adds terminating newline
2dbd5186a39c7ef0d92045c43b4857c23cb117ab	allow legacy verbs through extended interfaces when an extended verb is an extension to a legacy verb the original functionality is preserved hence we do not require each hardware driver to set the extended capability this will allow the use of the extended verb in its simple form with drivers that do not support the extended capability
21aea5cc06667b7e34cf7bd3fc17a1fb2937baa9	mark the static key for movntqda as static silence sparse who warns that the global variable is not declared static
bfc4f9d5206739d0612782508a39e93b0793609d	remove unused marco long_align
88ea46bcbfd677b779897bbada32ec0709a6c92f	mmc sdio fall back to sdio __float__ for broken __float__ cards i have two sdio wlan cards which specify being sdio rev __float__ cards but their funce tuple reports the smaller size of a rev __float__ card so enforce __float__ on these cards to avoid reading the not present registers they are not really used anyhow my cards initialize properly after this patch
b93767e3bd253d40414609801c3d43e8b241580a	arm imx switch to sched_clock_register the __number__ bit sched_clock interface now supports __number__ bits upgrade to the __number__ bit function to allow us to remove the __number__ bit registration interface
5c32c3dd8501b017e0ce139a2abcd23cc471b773	drop virtio_gpu_execbuffer_ioctl wrapping instead of wrapping virtio_gpu_execbuffer to execute the ioctl just execute it directly message-id
5d32d4868ad87a5be8571b22b3d732576504dfb0	watchdog use devm_request_and_ioremap reimplement a call to devm_request_mem_region followed by a call to ioremap or ioremap_nocache by a call to devm_request_and_ioremap the variable res_size is then no longer needed the semantic patch that makes this transformation is as follows expression myname identifier i struct platform_driver i myname expression expression size return when when any when
3940c34ac898b15afb72271394444199401bbe99	gpio tag line labels used for interrupts when a gpio line is marked as used for an interrupt it is helpful to set the label to interrupt so we know what is going on when inspecting the lines if a gpio is already properly named by we dont need to do this it only happens when a line is used from the irqchip side of a gpio driver without communicating with the gpio side such as when gpiochip is used as interrupt provider in the device tree if the line is still marked as used by interrupt when we unmark it as used by an interrupt also remove this label from the descriptor also shape up the code around unmarking irq lines
26dd8e0291fd699142722632c6588a438d6ef0e4	percpu use bitmap_clear use bitmap_clear rather than clearing individual bits in a memory region
34b2cff4eeaa694bf629dfe140eec8cebb60cb9a	caif_usb use ether_addr_copy use ether_addr_copy instead of memcpya b eth_alen to save some cycles on arm and powerpc
d239222e82a209af611840b2a7cd72c26944eb12	staging wilc1000 rename bssid of function get_if_handler this patch renames bssid of function get_if_handler to bssid to avoid camelcase naming convention
c815fdebef444d591f57a1e90dcfa0e2f8112e10	wlcore spi populate config firmware data configure the config firmware names and make it available in platform data lets also fix the order of the struct wilink_family_data while at it
73ba8afe33e22b4bae26098add458bed3e666bc2	staging unisys visorinput handle_locking_key simplifications by directly returning for the error-case a test was eliminated also the old_state variable was removed as it was not necessary and some redundant parens were removed
eec11535ca3d3e2daa2c8f59fa8ce1963db98abd	hfs fix hfs_readdir i was looking through static analysis warnings and there is a bug here that goes all the way back to the start of git basically were copying the pointer and nearby garbage instead of the data the pointer is pointing to
a5eb71b207ecefac07bc36fd50b43d83c047b0ce	i2c simplify boilerplate code for attribute groups declaring attribute groups can be done with macros these days lets use them for consistency and readability reasons also put the attr macros directly below the referenced functions while we are here
d09f698056a33c8b078497fb23e3304b6f8a908f	be2net remove wrong and unnecessary calls to netif_carrier_off __number__ in be_probe as soon as the mcc q is created a gratuitous link status event is received and processed accordingly is called the extra netif_carrier_off call in probe can race with this and cause wrong state __number__ be_close need not call netif_carrier_off it is ok to show the actual link state even when the device is administratively down
2c4c7146c7f6cffcbd71f1df95e6bc6727324e05	mmc dw_mmc rockchip unset the mmc_cap_erase flag in its enabled by default it doesnt need to set mmc_cap_erase in rockchip anymore
aea585ef8fa6516395022e9d2fed6ec5014128bc	sysfs remove is used to implement the following behaviors __number__ ensure buffer filling on the first read __number__ force buffer filling after a write __number__ force buffer filling after a successful poll however and dont really work as sysfs doesnt reset file position while the read buffer would be refilled the next read would continue from the position after the last read or write requiring an explicit seek to the start for it to be useful which makes superflous as read buffer is always refilled if f_pos __number__ update sysfs_read_file to test for instead and remove while this changes behavior in extreme corner cases re-reading a sysfs file after seeking to non-zero position after a write or poll its highly unlikely to lead to actual breakage this change is to prepare for using seq_file in the read path while at it reformat a comment in fill_write_buffer
2239aa3d15056e4be807eaa8d778b247156ce552	cpufreq tegra dont error target when suspended d4019f0a92ab cpufreq move freq change notifications to cpufreq core added code to the cpufreq core to print an error if a cpufreq drivers function returned an error this exposed the fact that tegras cpufreq driver returns an error when it is ignoring requests due to the system being suspended modify tegras function not to return an error in this case this prevents the error prints the argument is that since the suspend hook cant and doesnt inform the cpufreq core when its requests will be ignored theres no way for the cpufreq core to squelch them so its not an error for the requests to keep coming this change make the tegra driver consistent with how the exynos handles the same situation note that probably suffers from this same issue though
6b254afd2ef384b21aeaf166ddc957fe1083a7e2	cxgb4 save tid while creating server filter save the filter tid while creating the server filter which is used later to retrieve the corresponding filter instance while handling the filter reply
d50e5c24480f8a6e2918ecd998e65f990f88b0ee	add to initialization of mmvce_vcpu_cntl register add a bit needed during initialization into the driver where it is supposed to be currently this is happening in the vce firmware and although functional this is the correct place to perform this initialization
5416857867c9cc94aba641898c567d9707de30f1	use the generic menu_get_ext_help nconf is the only front-end which does not use this helper but prefer to the code the test wrt menu validity added in this version of the code is bogus anyway as an invalid menu will get dereferenced a few line below by calling menu_get_prompt for now convert nconf to use menu_get_ext_help as do every other front-end we will deals with menu validity checks properly in a separate commit
1343000c34e84cd31e720dbefd491e6b06347f33	arm shmobile r8a7740 remove intc function gpios those gpios have been deprecated by the pinctrl api they are unused and unneeded remove them
1b11b0cb799e5f82ca6391a23eaa8f41c7466cc0	fix race in installing chained irq handler fix a race where a pending interrupt could be received and the handler called before the handlers data has been setup by converting to irq_set_chained_handler_and_data search and conversion was done with coccinelle expression e1 e2 e3 irq_set_chained_handlere1 e3 __number__ bug e3 e2 e3 e2 expression e1 e2 e3 irq_set_chained_handlere1 e3 __number__ bug e3 e2 e3 e2
669d67bf777def468970f2dcba1537edf3b2d329	net codel fix build errors fix the following build error in function fq_codel_dump_stats error unknown field qdisc_stats specified in initializer warning missing braces around initializer warning near initialization for error unknown field qdisc_stats specified in initializer warning excess elements in struct initializer warning near initialization for st error unknown field qdisc_stats specified in initializer warning excess elements in struct initializer warning near initialization for st error unknown field qdisc_stats specified in initializer warning excess elements in struct initializer warning near initialization for st make1 error __number__
c2536543d53be247786b8beb7c505c629fd55813	extcon max77693 fix return value return the value obtained from the function instead of hardcoding silences the following warnings max77693_muic_set_path info why not propagate ret from max77693_update_reg instead of max77693_muic_set_path info why not propagate ret from max77693_update_reg instead of
8157becf8db0c798e1260f3af7c495a9b88e3b57	watchdog ath79_wdt convert to use module_platform_driver this makes the code a bit smaller by getting rid of some boilerplate code
29ff66571d38f01c5a5d3af871401b8a65323422	hid logitech prevent possibility of infinite loop when using interface if the device data is not accessible for some reason returning __number__ will cause the call to be continuously called again as none of the string has been consumed
e441fd68663e298e99a99e215e0144a0eda6250d	thermal core allow orderly_poweroff to be called only once thermal_zone_device_check thermal_zone_device_update handle_thermal_trip handle_critical_trips orderly_poweroff the above sequence happens every ms based on the configuration the orderly_poweroff function is getting called every ms with a full fledged file system it takes at least seconds to power off gracefully in that period due to the thermal_zone_device_check triggering periodically the thermal work queues bombard with orderly_poweroff calls multiple times eventually leading to failures in gracefully powering off the system make sure that orderly_poweroff is called only once
1e83d48b5e84e4c71a073e35ea4e2e6d0a1bdaac	add missing of_node_put add missing of_node_put to decrement the reference count
f9a703e173849425079e29e63bf960c2625e0a85	iwmc3200wifi add a range check to iwm_cfg80211_get_key smatch complains that key_index is capped at __number__ in nl80211_get_key but only has __number__ elements i dont know if this is really needed but the other implementations seemed to check for overflows so ive added a check here
8ae6bcd1dcea249591b4165bd7f795c4868bc531	mtd nand nandsim set ecc algorithm explicitly this follows recent work on switching to enum nand_ecc_algo and deprecating nand_ecc_soft_bch
510dd4609f581329a421fa20e1b802b629bb7ee2	i40e dont re-enable atr when flushing filters if sb has rules when flushing and replaying fdir filters it is possible we would disable atr and then re-enable it even though we should have kept it disabled due to existing filters fix this by checking whether we have filters before re-enabling alternatively we could instead restore atr and then replay filters however this would cause us to rapidly enable and then disable atr in some cases change-id i076e4cc1e4409bce7f98f3c213295433a4ff43d8
36055a0652b6acb0e54ca0ad5ead2ac51e90f9ab	do not use rvt prints which rely on driver too early trying to print debug and error messages with the rdmavt helpers will not work out so well if the drivers have not provided the get_card and get pci functions use the normal pr_error instead until we can check this
d555b6c380c644af63dbdaa7cc14bba041a4e4dd	btrfs warn_on for unaccounted spaces these were hidden behind enospc_debug which isnt helpful as they indicate actual bugs unlike the rest of the enospc_debug stuff which is really debug information thanks
d308b9f1e4412bcf583c82c4ca15ef97cb8b0e6f	stop_machine remove cpu_stop_works from list in cpu_stop_park cpu_stop_park does cpu_stop_signal_done but leaves the work on the owner of this work can this memory right after that and corrupt the list so if this cpu becomes online again cpu_stopper_thread will crash link
a324e4de0ce5c467b33a54ed65cc2f41c68855ae	tty ar933x_uart convert to use functions use functions in order to simplify cleanup paths
d9b3682ffd6d7fa98195eb64307b70e9a25cc655	crypto caam remove bogus references to crypto api internals the caam driver includes algorithm types that it doesnt even use such as struct rng_alg which has recently been moved to an internal header file and consequently broke the build of caam this patch removes these bogus references
82af03f7b945634bfa93fef4e2f50db4459aabea	staging greybus use setup_timer function this patch uses setup_timer function instead of initializing timer with the function and data fields
341b2a3541c21a2c60daf87bcd6d6e8c4f1aed62	crypto qat remove unnecessary return codes remove unnecessary return code variables and change function types accordingly
0bceb15ad15e9374387688ced76c1ac5f5eb6e14	kvm x86 use ioapic_in_kernel to check for ioapic existence
f2dafc095018fcc6a71793cfefdd490c9f1c63be	pwm print error messages with pr_err instead of pr_debug make the messages that are printed in case of fatal errors actually visible to the user without having to recompile the driver with debugging enabled
1034023606d0e971f4dee6f725e441b785a846b5	pci designware rename dw_pcie_valid_config to dw_pcie_valid_device rename dw_pcie_valid_config to dw_pcie_valid_device and use the result directly as a boolean value instead of testing against __number__ no functional change intended
dd61d963b90609690c94cfc98227e8aff5a9939c	net phy dp83640 fix checkpath error
8dc1c48bca1ca422baa55b1b1f7fee28ccb842c8	staging rtl8187se delete typedef _led_ctl_mode the typedef _led_ctl_mode and the enum constants is not used in the driver i delete it
9b8dd1e8a55a12b67240b6b28160ac8c1dec0172	ceph ceph_readpage_to_fscache didnt check if marked previously ceph_readpage_to_fscache did not call if page was marked as cached before calling fscache_write_page resulting in a bug inside of fscache fs-cache assertion failed cut here kernel bug at invalid opcode __number__ smp call trace __address__ ceph __address__ ceph __address__ ceph __address__ __address__ ceph
967baed40eaaf6df632b7e929b903140a9744b87	usb gadget f_rndis avoid to use error macro if cdev can be null the udc_irq service runs the isr_tr_complete_handler which in turn nukes the endpoints including a call to rndis_response_complete if appropriate if the rndis_msg_parser fails here an error will be printed using a dev_err call through the error macro however if the usb cable was just disconnected the device cdev might not be available and will be null since the dev_err macro will dereference the cdev pointer we get a null pointer exception
a29d0e0bc0eeefad2a50a8aa7e3f4b98f72c7feb	f2fs skip writeback meta pages if cp_mutex acquire failed skip writeback meta pages if cp_mutex lock acquire failed cp will flush dirty pages instead
3d48203847c096afaddb2ba3c0623cfe49e91fa3	mwifiex fix empty tx ring check for pcie8897 while unloading driver while unloading driver we free all pending tx packets by flushing tx ring there is unhandled case for pcie8897 while checking for ring empty condition this patch adds the handling by calling mwifiex_pcie_txbd_empty
3798ff31d1fb1ee33de619ffc81a6a56c3ccb973	staging unisys visornic dont destroy global workqueues until devs destroyed visornic_cleanup was previously incorrectly destroying its global workqueues prior to cleaning up the devices which used them this patch corrects the order of these operations
d2e074ccbf84e91819ae07b3ca838120db2c97a9	i2o use pci_bus_alloc_resource not allocate_resource directly convert i2o_res_alloc to use pci_bus_alloc_resource rather than pci_find_parent_resource and allocate_resource we dont have a resource to start with so pci_find_parent_resource cant do anything useful a bus may have several memory resources available so there might be several possible parents this is more likely on root buses because host bridges may have any number of apertures im pretty sure this didnt work in the first place because it passed size min max to allocate_resource the min and max parameters are constraints on the of the resource not on its size so i think it was impossible for allocate_resource to succeed
5b74d7a3b888fd3db6dce77eb11b3d55b64f6833	use cached value of register the control register has not changed since the previous access therefore we can use the cached value and safe one bus access
079ea1901b7186165d958ee54338c68883096d92	rmw hpd registers no need to hard code the entire register to just one bit
5ef766fe785ddcda29057f64b30f19e9bdfabe12	iwlwifi mvm combine ssid_bitmap setting for regular scans the only difference in the ssid_bitmap between lmac and umac scans is that in lmac bits __number__ to __number__ are used while in umac bits __number__ to __number__ are used so we can combine the bitmap creation into a single function and simply shift left if lmac is used
87e4ee759f44f8d1e0f039bc9ba2ef57ea2a9bee	arm zynq timer set clock_event cpumask the timers are common to both a9 cores so lets set the clock event structs cpumask accordingly to all possible cpus
6cc7e908362a9dfec3c821f77ec98b6758592060	sunrpc ensure xs_reset_transport resets the close connection flags otherwise we may end up looping
9d31b3ce81683ce3c9fd10afa70892e373b21067	batman-adv fix potential tt client orig-node memory leak this patch fixes a potential memory leak which can occur once an originator times out on timeout the according global translation table entry might not get purged correctly furthermore the non purged tt entry will cause its orig-node to leak too which additionally can lead to the new multicast optimization feature not kicking in because of a therefore bogus counter in detail the holds the reference to the orig-node usually this reference is released after batadv_purge_timeout through batadv_tt_global_del_orig which purges this global tt entry and releases the reference to the orig-node however if between two batadv_purge_orig_node calls the orig-node timeout grew to then this call path isnt reached instead the according orig-node is removed from the originator hash in _batadv_purge_orig the batadv_update_route part is skipped and wont be reached anymore fixing the issue by moving batadv_tt_global_del_orig out of the rcu callback
d9a44abf3aede89c3dbb6dfa8a95c856b9ae8da3	crypto qat use hweight for bit counting use predefined hweight32 function instead of writing a new one
68792e2a1989bf34a9498356c3e3cc70b9231df2	inline hz usage in bcm63xx_spi_setup_transfer bcm63xx_spi_setup_transfer is called from only one place and that has t always set to hz will always be just use it directly in the two places instead of moving it in a local variable
3e1ed981b7a903ba81199d4d25b80c6bba705160	netlink revert broken broken nla_ok commit netlink nla_ok is broken first clause tests if could even be accessed at all it can not possibly be omitted
8d40c3ae51483059733187ba8bc6e031764fafec	warn if gpll isnt used on our conversions assume that gpll is always used apparently that should be the case always but lets scream if we ever encounter something different
fee25ce12504ff071254fd213055c3f1d3004622	orangefs make sure that reopening pvfs2-req wont overlap with the end of close
f43380981716c9b48bf2809e4cd1cb0c6b71429d	arm mmc mmci remove wrong error handling of gpio __number__ zero is a valid gpio and shouldnt be handled as an error return code from of_get_named_gpio it was a leftover from old code before getting was modified
5f96ddb4607382528ef2eb23b49ce1856fdb316d	delete useless code as pptable changed in vbios the vbios table changed so this code is useless now
f4fa03701d8ad94846f3577d46cd8cc782fe9d8a	staging lustre remove max_u64 function removed the max_u64 function to find the maximum value of two unsigned __number__ bit numbers to use the linux macro max instead
9aa8dcab7e44288c6fd620c5b831d2ca535866c2	explicityly track screen target width and height we can no longer make the assumption that vmw_stdu_update_st will be called when theres a valid display surface attached so instead of using display_srf for width and height make a record of these paremeters when the screen target is first defined
ff4e65581eb5349b7cefeda4083abe6eba44378a	ieee802154 remove default channel settings this patch removes the default channel setting a channel is always set and there is no default channel setting according drivers should set the default channel and page in probing routine this behaviour is currently a lack of all drivers
29a167ec87fb971931a033766e9e387d0fcabe7d	greybus raw use the bundle struct device instead of the connector we are removing struct device from the gb_connection structure in the near future the gb_bundle structures struct device should be used as a replacement this patch moves the raw driver to use the bundle pointer instead of the connection pointer
72f0095e7993dd9af8d5531740bf549359314bf0	asoc mop500_ab8500 add a null pointer check in mop500_ab8500_machine_init avoid possible crash null pointer dereference by making sure that dem_kzalloc is successful
05bce79e6d24ee6eb2beddf0f6314358404d472f	acpi drop unnecessary local variable from acpi_system_write_wakeup_device the len variable is unsigned therefore checking whether it is less than __number__ is useless also drop the len variable since the count parameter can be used instead rjw changed the subject
2455a8e43d6b052047cf3fce9f417ff7fd619fc9	dont use a temp buffer for opregion debugfs file hasnt been necessary since commit author williams, dan j intel.com date mon oct __number__ __number__ __number__ i915 switch from acpi_os_ioremap to memremap
7f4050a07be8ce5fad069722326ccd550577a93a	arm hw_breakpoint dont try to clear v6 debug registers during boot v6 cores do not provide a way to clear the debug registers without first enabling monitor mode meaning that we could take spurious debug exceptions instead rely on the registers being in a sane state when we boot as they are defined to be disabled out of reset anyway
b36bdc5911effe819e415b144388853bf07a543b	use managed resources this converts the u300 pin controller to use managed resources for its memory region
53102d202fe9c0368f09055753a4ffa200fe4092	media smiapp remove unused function smiapp_replace_limit_at function is not called by the driver this was detected by sparse as warning symbol smiapp_replace_limit_at was not declared should it be
8f4b7d9821715767ac28bbc2d401bbb5f3f9a448	rbd dont look up snapshot id in rbd_dev_mapping_set currently rbd_dev_mapping_set looks up the snapshot id for the snapshot whose name is found in the rbd devices spec structure that function gets called by rbd_dev_device_setup which is called by rbd_add rbd_dev_image_probe if the image probe succeeds the rbd devices spec will already have been updated to include names and ids for all fields therefore theres no need to look up the snapshot id in rbd_dev_mapping_set
86ba41d033cad219de2f809bb40bcdeb7959affc	power suspend convert sysdev_class to a regular subsystem after all sysdev classes are ported to regular driver core entities the sysdev implementation will be entirely removed from the kernel
6ae23224557d797439d02f6ce5d10a82ab544b21	media dvb_frontend fix ioctls failing if frontend too fast that likely fixes this mythtv ticket which btw affects all usb tuners i tested as well pctv452e dib0700 af9015 pctv452e is still possibly broken with mythtv even after this fix it does work with vdr here tho despite i2c errors reduced testcase thanx to devinheitmueller and crope from for helping with this fix
7c397d01e43493dd087f9cd926cd1fcf508a8019	audit make audit_kernel event conform to the specification the audit_kernel event is not following format this causes some information to get lost the event has been reformatted to follow the convention additionally the audit_enabled value was added for troubleshooting purposes the following is an example of the new event pm commit tweaks to make happy
c7702b8c22712a06080e10f1d2dee1a133ec8809	scsi qla2xxx get mutex lock before checking optrom_state there is a race condition with qla2xxx optrom functions where one thread might modify optrom buffer optrom_state while other thread is still reading from it in couple of crashes it was found that we had successfully passed the following if check where we confirm optrom_state to be qla_sreading but by the time we acquired mutex lock to proceed with memory_read_from_buffer function some other had already modified that option rom buffer and optrom_state from qla_sreading to qla_swaiting then we got and crashed the system if qla_sreading return __number__ rval memory_read_from_bufferbuf count with current optrom function we get following crash due to a race condition __float__ bug unable to handle kernel null pointer dereference at null __float__ ip __address__ __float__ call trace __float__ __address__ __float__ __address__ qla2xxx __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ below patch modifies qla2x00_sysfs_read_optrom qla2x00_sysfs_write_optrom functions to get the mutex_lock before checking to avoid similar crashes the patch was applied and tested and same crashes were no longer observed again
5d3c2f7d34616072900b0dafbaf58496d1d9bbf6	wireless iwlwifi remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
8cfd56d4790423499d03f09f8584e0c6de494ec7	smaller _parse_integer set overflow bit upon encountering it instead of postponing to the end of the conversion somehow gcc unwedges itself and generates better code _parse_integer __number__ __number__ inspired by patch from zhaoxiu zeng link
77b75f4d8cf105b599beef38724f8171e557919d	unix use wq_has_sleeper in unix_dgram_recvmsg the current unix_dgram_recvmsg does a wake up for every received datagram this seems wasteful as only sock_dgram client sockets in an association with a server socket will ever wait because of the associated condition the patch below changes the function such that the wake up only happens if wq_has_sleeper indicates that someone actually wants to be notified testing with sock_seqpacket and sock_dgram socket seems to confirm that this is an improvment
093300f44452a909e6bd02524c98b57fd6101eb8	staging bcm outsourced chunk of code into function this patch outsources a chunk of code into an own function it also refactors the variable names which are used within this function the function name may be not appropriate
a9c9d9aca4e7cf75d09faa098785ed991db41c65	zorro use kobj_to_dev use kobj_to_dev instead of open-coding it
5a24d69c2cd3522e5ed6f8bd7a1e956138149dcd	arm avic do not depend on mxc_internal_irqs this becomes meaningless in subsequent patches
148c2d80d548a111d48b3c37a794ca5e0eb703c5	i40e add warning for npar partitions with link speed less than npar enabled partitions should warn the user when detected link speed is less than change-id i7728bb8ce279bf0f4f755d78d7071074a4eb5f69
dc97a1a9477f969e34b38ca9d9cd231cb93ebea2	genetlink a genl_bind to an out-of-range multicast group should not warn users can request to bind to arbitrary multicast groups so warning when the requested group number is out of range is not appropriate and with the warning removed and the err variable properly given an initial value we can remove found altogether
0d77ef8b43d6a9124f37b2f098b6d65573db0de3	staging comedi quatech_daqp_cs ai async command requires a pacer the ai assumes that either the convert_src is trig_timer or the scan_begin_src is trig_timer and always programs the pacer clock with the appropriate trigger argument add a step check to the to ensure that at least one of the triggers is trig_timer
605a410325535e0d9dd3c539ac144fc52e0bda21	media soc_camera fix vidioc_s_crop ioctl sometimes vidioc_s_crop ioctl doesnt work soc-camera driver reports soc-camera-pdrv s_crop denied getting current crop failed the vidioc_g_crop documentation states that the type field needs to be set to the respective buffer type when querying so the check in of the subdevices returns if the type is not set properly here the uninitialized local variable current_crop is passed to the and this leads to the observed error initialize the type field of the local current_crop before get_crop call
47856204146ba6fd0f198dbb23c4ed7ad1c3fd99	crypto marvell dont hardcode block size in mv_cesa_ahash_cache_req dont use __number__ as is as max block size in mv_cesa_ahash_cache_req use cesa_max_hash_block_size instead this is better for readability
e1d83ee673eff5407255ba9e884312219f6832d7	net mark functions as static in mark functions as static in because they are not used outside this file this eliminates the following warning in warning no previous prototype for warning no previous prototype for warning no previous prototype for
54d27b3119e2eecbb3dfbf821db90fab25f6c523	perf callchain pass parent_samples to __callchain__fprintf_graph pass hist entrys period to graph callchain print function this info is needed by later patch to determine whether it can omit percentage of top-level node or not no functional change intended link
c0b363891816ea60d95a7dfcfc72f9955a7f1d32	asoc wm8804 constify struct regmap_config and snd_soc_codec_driver the regmap_config struct may be const because it is not modified by the driver and regmap_init accepts pointer to const make struct snd_soc_codec_driver const as well snd_soc_register_codec accepts pointer to const
8932878339f02f822ef613068c50127f7be87122	forcedeth add messages to indicate using msi or msi-x this adds a few kernel messages to indicate whether pcie interrupts are signaled with msi or msi-x
98130646770db42cd14c44ba0d7f2d0eb8078820	ixgbe fix skb truesize underestimation ixgbe allocates half a page per skb fragment we must account increments on not the actual frag length
43858f57bc02388a6420321c021397591199cf91	remove an unneeded null check uci is an element of the ucode_cpu_info array it cant be null link link
ef87c5d6a11af45c31910728e46642e77aa8db61	net pktgen deletion of an unnecessary check before the function call proc_remove the proc_remove function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
1b2354dbcc7b232b50f26dfd47fd4c529edfc20a	dmaengine pl330 make sure microcode is privileged the pl330 is hard-wired such that instruction fetches on both the manager and channel threads go out onto the bus with the privileged bit set this can become troublesome once there is an iommu or other form of memory protection downstream since those will typically be programmed by the dma mapping subsystem in the expectation of normal unprivileged transactions such as the pl330 channel threads own data accesses as currently configured by this driver to avoid the case of say an iommu blocking an unexpected privileged transaction with a permission fault use the newly-introduced dma_attr_privileged attribute for the mapping of our microcode buffer that way the dma layer can do whatever it needs to do to make things continue to work as expected on more complex systems rm remove now-redundant local variable clarify commit message
ecf896b97de9757fd835034ad849680218babc93	power_supply charger-manager fix dereferencing of err_ptr if power_supply_register fails do not dereference returned err_ptr the pointer was dereferenced to print name of battery which registration failed instead use the name from the power supply description passed to the power_supply_register function
260762c7d8030055a157b6f4ea7d1805a09e59e8	bnx2 update version
800f297e8ef91901b93c280425863684dff2d9c6	asoc arizona add delay after putting fll into freerun when switching between two clock sources using the fll freerun to smooth the transition we should wait after putting the fll into freerun before we proceed in practice we appear to be getting enough delay from the surrounding code but better to make it explicit
51acdfd1fa38a2bf1003255be9f105c19fbc0176	arm smp flush l1 cache in cpu_die flush the l1 cache for the cpu which is going down in cpu_die so that we dont end up with all platforms doing this this ensures that any cache lines we own are pushed out before the cache becomes inaccessible we may end up subsequently creating some dirty cache lines for example with the complete call but this update must become visible to other cpus before __cpu_die can proceed subsequent accesses from the platforms cpu_die function should _not_ matter also place a mb after the complete call to ensure that this is visible to other cpus
462de629942212d90e6c915eca3eaebb45b647a3	pinctrl add new compatible string to gpio controller driver this compatible string should be used for all new iproc based future socs having the same gpio controller hardware
31ada047681834d0d6f04adfb305ff26b52d2823	serial imx constify platform_device_id the platform_device_id is not modified by the driver and core uses it as const
a259d5320537576c0744238f01ca6e75ad776674	ide do not register interrupt if is set on m68k is used to both lock and register the interrupt that the ide host shares with other device drivers registering the ide interrupt handler in results in duplicating the interrupt registered once via lock and also via init_irq and may result in ide accepting interrupts even when another driver has locked the interrupt hardware this opens the whole locking scheme up to races is set on m68k only so other drivers behaviour is not changed
38efb539c13f8f173e381435cdd40463ab5d38de	perf script fix mem leaks and null pointer checks around strdups fix mem leaks and missing null pointer checks after strdup and get_script_path did not free __script_root in case of continue introduce a helper function get_script_root link
1b3bae49fba52f1ec499c36c53bc07761a9f6c4d	md dont impose the md_sb_disks limit on arrays without metadata these arrays created with mdadm dont benefit from a limit the default will be used which is __number__ and is interpreted as dont impose a limit reported-by
41d8cc1ac2fd5c4695ef0c8239ac0f45e1cd72ca	staging comedi adv_pci1710 move check forward simplifies function logic by assuming that n_chan if not removes one level of indentation
627e628f6662550455e57466148d03f354ecdd3b	scsi bnx2fc reset the max receive frame size reset max receive frame size every time before attempting flogi without this the stale mfs value will be used
e944e97afc66e619603390fc5f0c6bc02f961353	net mpls update lfib_nlmsg_size to skip deleted nexthops a recent commit skips nexthops in a route if the device has been deleted update lfib_nlmsg_size accordingly
cb0f1fe9ba47c202a98a9d41ad5c12c0ac7732e9	cgroup move css_set_rwsem locking outside of cgroup_task_migrate instead of repeatedly locking and unlocking css_set_rwsem inside cgroup_task_migrate update cgroup_attach_task to grab it outside of the loop and update cgroup_task_migrate to use put_css_set_locked
f1f2b6e497170a6ab83aeb781688a65c25621836	serial imx remove unneeded oom error message when kzalloc fails the core mm will already complain about it so there is no need to have the error message locally remove the unneeded error message
ffed2b4f7c04da99ec3a8e8f096c90ea9c0f9956	microblaze kill __kmap_atomic this should be the part of this patch highmem kill all __kmap_atomic sha1 a24401bcf4a67c8fe17e649e74eeb09b08b79ef5
5e4fbe4cc05767fe7e1bbc269376e0e48f365327	iwlwifi dvm pad iwl_compressed_ba_resp all the data coming from the fw must have a length that is multiple of __number__ this doesnt change anything to the way we handle the notification
9b1b0162e9aed89e2ac0a9f01157a6046b896337	usb r8a66597-hcd use use the wrapper functions for getting and setting the driver data using platform_device instead of using with so we can directly pass a struct platform_device
4b2d73898fdd75cc841a2a6fc978fdc7b5f5247a	staging comedi ni_mio_common handle_b_interrupt does not need ao_mite_status this function only handles the analog input interrupts the dma was already handled remove the unecessary parameter and fix ni_e_interrupts so that the comedi events are properly handled
540b85ab223f00e9715cee0f7a205f636b5eb4b8	acpica add pcc address space to space id decode function acpi __float__ added pcc space id
6beb8160ea04a7891d5102f86104f75c0db05d15	staging comedi partial refactor of the rtd520 driver to remove forward declarations move the struct comedi_driver module_device_table to the end of the source the attach and detach functions are not moved yet because patch is pretty messy and not reviewable this is more typical of how other drivers are written and removes the need for the forward declarations
791de6771ee96e208ee30bfed48e8f6b25422843	fix adis16300 roll_out register address in the current driver roll_out register address is the same as the pitch_out register address this patch fixes it to use the correct address
29f813859663974296ad436c40253c40a64694a0	staging comedi addi-data fix a couple of lines that are too long there are a couple of cases where a comment being on the same line as a statement is causing the line to be over __number__ characters long this is an easy fix move these comments to the previous line
75c5971614932ca53009cbbdfd6c8f96eab9e46f	arm dma-mapping refrain noisy console message with many iommuable devices console gets noisy tegra30 has a few dozen of iommuable devices
f76a28a69a103b8789d2430a193af558f4c85364	xhci free the correct ring gcc warns about what first looks like a reference to an uninitialized variable in function handle_cmd_completion error ep_ring may be used uninitialized in this function xhci_unmap_td_bounce_bufferxhci ep_ring cur_td note ep_ring was declared here struct xhci_ring its clear to see that the list_empty check means it can never be uninitialized however it still looks wrong when contains more than one entry the ep_ring variable will point to the ring that was retrieved from the last urb and we have to look it up again in the second loop instead which fixes the behavior and gets rid of the warning too
166c050bda80bb5dd627a287b6efcdfb68d172b4	rapidio fix potential null deref in rio_setup_device the goto cleanup path can deference rswitch when it is null
7422ba5343b8c1dbe1a517d0fcc15e7d671ca960	usb gadget epautoconf do not change number of streams we should not change gadget drivers descriptors just because we think its right to do so there are several of reasons which would support this statement but it suffices to say that this was probably never tested because it updates bmattributes without asking the driver if its ok to do so this means that on uasp gadget it would enable stream support even for the command endpoint which must not have stream support enabled in fact this change is fixing the bug introduced by commit a59d6b9 usb gadget add streams support to the gadget framework which was caught when testing uasp gadget with dwc3 driver
737a7c43807b9d01bc01e741b2095c8b4dcc1b13	make use of spi_finalize_current_message rather than calling directly we choose the sane way and call spi_finalize_current_message instead
376cd36dc7b68ec7f7de1428fa055ce706a33bbf	change __number__ to true for bool type variable the variable irq_coalesce is bool type so assign the value true instead of __number__
8d80d7dabe9668965574669afbd31733f7b0fe9b	dcache d_find_alias neednt recheck is_root dcache_disconnected if we get to this point and discover the dentry is not a root dentry or not dcache_disconnected--great we always prefer that anyway
3907e490d358aa82bf7446fc9d340f688c97c6de	parse result data is big endian
661ff5be95903a37e7a61e8157b197689a6f755a	clk ux500 drop owner assignment from platform_drivers a platform_driver does not need to set an owner it will be populated by the driver core
1cdfd72f791918ab4690570d7d93a1f86e171cb8	vlan remove usage of in __vlan_find_dev_deep also since all users call __vlan_find_dev_deep with rcu_read_lock make no possibility to call this with rtnl mutex held only
d83017f94c290c56010e194cdbc45e59894ccae2	nfsd dont thrash the cl_lock while freeing an open stateid when we remove the client_mutex well have a potential race between free_stateid and close the root of the problem is that we are walking the st_locks list dropping the spinlock and then trying to release the persistent reference to the lockstateid in between a free_stateid call can come along and take the lock find the stateid and then try to put the reference that leads to a double put fix this by not releasing the cl_lock in order to release each lock stateid use put_generic_stateid_locked to unhash them and gather them onto a list and free_ol_stateid_reaplist to free any that end up on the list
02f1c12cca45ed684a268563919787f06877bef2	greybus audio report warning in case module is already removed added warning message in find_gb_module this will help to identify invalid mixer modification triggered from above layer
3628137646e2ee25c9e46ba9d2c20b313e4a1a25	asoc raise speyside audio system clock rate to to support advanced system functionality for additional components the actively used clocks will remain the same for current components also factor the rate out to a single while were at it
7d674b3195b854eec26724b8e85c97da79cdcf9d	hpfs switch to note the only reason we can do that without races is that hpfs_lock serializes everything in there anyway its not that hard to get rid of but not as part of this
57a371442112856388c3c2fd4b0867ef3280896a	nfsd4 create_session should update backchannel immediately nfsd4_probe_callback kicks off some work that will eventually run nfsd4_process_cb_update and update the session flags in theory we could process a following sequence call before that update happens resulting in flags that dont accurately represent for example the lack of a backchannel
e70c67713cdabf55e05db7f1c4fc38085da333a5	mmc sdio use kref from tty_port after commit tty move tty buffers to tty_port the tty buffers are not freed in some drivers this is because tty_port_destructor is not called whenever a tty_port is freed this was an assumption i counted with but was unfortunately untrue so fix the drivers to fulfil this assumption here it is enough to switch to refcounting in tty_port
b2876b7773f3dbd3989d6e1dbeb2cbe879d84fbd	ipvs pass ipvs not net to __ip_vs_get_service_entries
3d2ae2dc9e58abd9a92e686231b17476a3ace2ce	video cg3 remove redundant dev_set_drvdata driver core sets driver data to null upon failure or remove
8680b4d1933fbe3349d51a4e1fd4513b12abffed	extcon usb-gpio dont miss event during we must check for changes during resume irrespective of whether our device wakeup is enabled or not without this we seem to be missing events after system
e0301d0d28a2e55da5b68338d6b9f933620da63b	staging ozwpan use kmalloc_array over kmalloc with multiply cleanup warnings
9cb65bc3b1114004e2ccee5939031325c7bf16e8	make apply_to_page_range more robust arm and arm64 used to trigger this bug_on this has now been fixed but a warn_on here is sufficient to catch future buggy callers
06f9cc12caa862f5bc86ebdb4f77568a4bef0167	nfsd4 dont create unnecessary mask acl any setattr of the acl attribute even if it sets just the basic acl exactly as it was returned from a file with only mode bits creates a mask entry and it is only the mask not group entry that is changed by subsequent modifications of the mode bits so for example its surprising that is left without read or write permissions after a chmod __number__ touch test chmod __number__ test nfs4_getfacl test nfs4_getfacl test nfs4_setfacl test chmod __number__ test nfs4_getfacl test so lets stop creating the unnecessary mask acl a mask will still be created on non-trivial acls acls with actual named user and group aces so the odd posix-acl behavior of chmod modifying only the mask will still be left in that case but thats consistent with local behavior
302c5608e9213c9c440b512628cb6f1626f61054	rtc rx8025 round up to nearest minute for a minute accuracy alarm the alarm for rx8025 only has a minute accuracy so round up to nearest minute when setting alarm without doing this rtctest blocks one day after setting alarm to __number__ seconds later pcf8563 and hym8563 also have similar handling
a20df3fe4636aaede5d0e78408812e30a7b15baf	staging iio ad2s1200 use dev_err instead of pr_err dev_err is preferred over pr_err
9219b2a08c8a1ca9935b85ec4ab119bb55b0cb15	bluetooth fix bacpy in it should be the dst in the copy not src introduced this bug
e5dfbf9a7904b3e21e665bed923eda49ced732d4	adjust the schedule queue port in reset-to-init too its legal for drivers to provide the qp port through the qpc schedule-queue field on the reset-to-init qp state change add adjusting of the schedule queue port in the sriov wrapper for that operation too
06bc659cefefcb9614b766c48d78dc4158ca79e7	staging comedi rtd520 remove rtdaboutcounter macro this macro uses the devpriv macro which relies on a local variable having a specific name plus its just a wrapper around a simple writel remove the macro
6a8df3a9e8179cfcc7bbced9ed89d222e7ac5c82	staging comedi das1800 use cmdf_priority replace use of trig_rt command flag with the equivalent flag cmdf_priority the numeric value is unchanged
92f6d63bf1366a9dae18965cdb4a950b5ece3a64	asoc remove unused extern declarations for sh4_hac_dai and sh7760_soc_platform both sh4_hac_dai and sh7760_soc_platform are changed to static by multi-component patch and they are not used in now
718aa5486eb6a8a310299a8f516505930d27511e	staging r8188eu fix sparse warning in sparse reports the following check warning symbol rtw_free_pwrctrl_priv was not declared should it be that routine is not used and has been deleted
6da9c2335e5f7124521a701e2a883b46e3d6a215	crypto ixp4xx use crypto_aead_maxauthsize this patch uses the helper crypto_aead_maxauthsize instead of directly dereferencing aead_alg
8055a89cfa533f70bea5970727a50e220bb7d18e	openvswitch pass datapath into userspace queue functions allows removing the net and dp_ifindex argument and simplify the code
66db383439b51b1aa920f3579da644fb5fdb2b7c	acpi ec fix a code coverity issue when qr_ec transactions are failed when the qr_ec transaction fails the ec_flags_query_pending flag prevents the event handling work queue from being scheduled again though there shouldnt be failed qr_ec transactions and this gap was efficiently used for catching and learning the sci_evt clearing timing compliance issues we need to fix this as we are not fully compatible with all to handle sci_evt clearing timing correctly fixing this gives the ec driver the chances to recover from a state machine failure so this patch fixes this issue when nr_pending_queries drops to __number__ it clears ec_flags_query_pending at the proper position for different modes in order to ensure that the sci_evt handling can proceed in order to be clearer for future ec_event_clearing modes all checks in this patch are written in the inclusive style not the exclusive style
9a60571ecf918162553592ef8c4b4450155394a0	arm exynos fix warning initialization from incompatible pointer type fix the wrong function prototype
f61018b1fe00238407724ea7a502003c3f71d9a0	disable power management for i915 driver in vm with intel gvt-g gpu power management is controlled by host driver so there is no need to provide virtualized gpu pm support in the future it might be useful to gather vm input for freq boost but now lets disable it simply v2 take chris comments do not special case this to
ad46047bd1988d61bc53ea354b77ef40f8a674a5	usb gadget multi fix error return code in rndis_do_config fix to return a negative error code from the error handling case instead of __number__ as returned elsewhere in this function introduced by commit usb gadget multi use function framework for acm
f3c78f8515dd4cb9e26040ebb54cf589d21137ee	update dca bios workarounds to use taint_firmware_workaround this patch is meant to be a follow-up for a patch originally submitted under the title ioat do not enable dca if tag map is invalid it was brought to my attention that the preferred approach for bios workarounds is to set the taint flag for taint_firmware_workaround for systems that require bios workarounds this change makes it so that the dca workarounds for broken bioses will now use warn_taint_once1 taint_firmware_workaround instead of just printing a message via dev_err
f4c1a311d8dc55c90c39e9cf7b003254a769574d	alsa hda only sync bclk to the display clock for haswell broadwell only intel haswell and broadwell have a separate hd-a controller pci device __number__ for display audio which needs to get hd-a link bclk from the variable display core clock through vendor specific registers em4 em5 other platforms baytrail braswell and skylake dont have this feature so this patch checks the pci device id of the controller in haswell_set_bclk and only sync bclk for hsw and bdw
dce4ec2e452fddb7542b5fc15d0e6b8531f6d5eb	acpi video run _bcl before deciding registering backlight the asus k53sms acpi table queries _osiwindows __number__ in the video output devices _bcl and _bcm control method instead of the usual _ini functions of the _sb or pci host bridge pci0 devices this made our video module thought this is a pre-win8 system when deciding if we should register a backlight interface for it and the end result is that a non-working acpi_video interface is registered and user is unable to control backlight from gui solve this problem by evaluating _bcl control method before doing the decision note that for some thinkpad systems the _bcl is also required to be evaluated for the hotkey event to be generated no matter if we will register an acpi video backlight interface for it or not since the thinkpad_acpi module will do this anyway we didnt add such a thing in the video module previously but now with this change here the thinkpad_acpi module is no more necessary for those systems regarding backlight functionality link
6be4b0da4ecf1472cb4a064c752214dcb2ba4be2	arm imx mach-imx6ul fix allmodconfig build we should call phy_register_fixup_for_uid only when config_phylib is built-in otherwise we get the following link error when building allmodconfig in function imx6ul_init_machine undefined reference to phy_register_fixup_for_uid this is the same approach done in and
768dc16397fb18c9de209cbcb84d890b8279faa7	arm omap2 fix am33xx hwmod infos for uart2 the uart2 hwmod structure is pointing to the edma channels of uart1 which doesnt look right this patch fixes this by making the uart2 hwmod structure to a new structure that lists the edma channels to be used by the uart2
768be59f30f2ee8958ba3718101162c694efab12	cfg80211 fix indentation checkpatch pointed out an issue fix it
58612c608f41a24c58ce082986da3e30ce2fff37	fix small coding style issues delete some unneeded blank lines and add few ones to make happy
31ca192139a152fcc550b9ebfb0e2d2d6247585e	alsa line6 remove superfluous disconnect call in suspend handler calling line6_pcm_disconnect at suspend callback is superfluous and rather confusing lets get rid of it
efde6b4d4e668f16bc91e9a462e1ec3c99d41136	nfsd remove unused values in nfs4_setlease
50b238b186d4ac77da07a0fa0261467f9431581b	staging sm7xxfb dead code removal this patch removes dead code related to baseaddressinvram it fixes comment on ram control bits too tested with sm712
32d0e4a33773ad68c582999a5b945cc47bb02809	intel_scu_ipc read resources from pci configuration read the resources from pci bar0 instead of using hardcoded values
da5ee074ce8e07b9a91596de3576b59990c0c8c6	input gpio_keys_polled switch to using gpio_request_one this saves us a few lines of code
96c0a4d4902c3d5f56bde95d3e2d96689ca64b6d	acpi dock rework and simplify find_dock_devices since acpi_walk_namespace calls find_dock_devices during tree pre-order visit the latter doesnt need to add devices whose parents have _ejd pointing to the docking station to the list of that stations dependent devices because those parents are going to be added to that list anyway and the removal of a parent will take care of the removal of its children in those cases for this reason rework find_dock_devices to only call add_dock_dependent_device for devices whose _ejd point directy to the docking station represented by its context argument and simplify it slightly
a33e93dba23b7f03297d1eb5ab91feaa88cccd97	implement some semblance of vblank event handling atomic_flush seems to be the right place right after we commit the plane updates again use the fullproof version since the pipe might be off
d2d393099de21eda91c5ec6a05d60e5dee4d5175	signal oom_kill_task use send_sig_forced instead of force_sig change oom_kill_task to use do_send_sig_infosend_sig_forced instead of force_sigsigkill with the recent changes we do not need force_ to kill the clone_newpid tasks and this is more correct force_sig can race with the exiting thread even if oom_kill_task checks null while do_send_sig_infogroup true kille the whole process
719a11cdbf57b7bdd6c87ded00fd7cb36a76a6a3	vxlan dont set s_addr in vxlan_create_sock in the case of af_inet s_addr was set to inaddr_any __number__ which which both symmetric with the af_inet6 case where s_addr is not set and unnecessary as udp_conf is zeroed out earlier in the same function i suspect this change does not have any run-time effect due to compiler optimisations but it does make the code a little easier on eyes
5aa8ae57c560afb1a58c42db0d98fd327b89a274	staging unisys fix camelcased global majordev rename the camelcase global majordev major_dev update references to use the corrected name
b22862e5197ea6471f37710bd3a853a4802c6bf4	usb remove err usage err was a very old usb-specific macro that i thought had gone away this patch removes it from being used in the driver and uses dev_err instead
4461c84b52b4a952c657505ef7e4e06b016783df	media v4l vsp1 prevent multiple streamon race commencing pipeline early with multiple inputs through the bru it is feasible for the streams to race each other at stream-on multiple vidioc_streamon calls racing each other could have process n-1 skipping over the pipeline setup section and then start the pipeline early if videobuf2 has already enqueued buffers to the driver for process n but not called the operation yet in the case of the video pipelines this can present two serious issues __number__ a null-dereference if the is committed at the same time as the vsp1_video_setup_pipeline is processing __number__ a hardware hang where a display list is committed without having called vsp1_video_setup_pipeline first repair this issue by ensuring that only the stream which configures the pipeline is able to start it
d4c2fa605a2339d0e7ecef85dfd46ec82b0cce8c	staging comedi addi-data remove unused defines in due to the on-going cleanup of the addi-data drivers there are a number of unused defines in remove the cruft
f10487658a0e5fd793ee5ba7ad645c060e4afbcd	add missing kfree most of the error handling code in this function frees the buffers kcmd_addr kvb_addr and kbox_addr allocated at the beginning of this function these two branches are changed to do the same
0b8dba15e909990e275631fa57255e74bbc766fc	hp-wireless reuse module_acpi_driver there is a macro to register and unregister modules in simple cases lets use it and clean up the driver
9b556248ecb059095e000f77c4b84899feb50098	ntfs correct two spelling errors dealocate to deallocate in from masanari iida gmail.com
2611015c7511106719bae904cac459383c55ffef	mixer add scaling to mixer_graph_buffer while the vp video processor supports arbitrary scaling of its input the mixer just supports a simple line doubling scaling expose this functionality and exit early when an unsupported scaling configuration is encountered this was tested with modetests drm plane test from the libdrm test suite on an odroid-x2 exynos4412 v2 put if- and return-statement on different lines
87a4c819a545e41eacab0de1e250173963dacbf8	greybus svc make sure to deactivate all interfaces on disconnect make sure to deactivate all interfaces when the svc is going away this is needed to eventually be able to do controlled teardown of the unipro network
14f806a00a183c6a95d74eee29dabbe0c20ba1c4	bnx2x vf clean statistics during statistics initialization of a vf we need to clean its statistics
037e79aa958d325cfb3c733496af64199bba6b49	arm perf krait stop using singleton pmu currently the functions use the global cpu_pmu variable while all the other pmu functions derive this from the event argument this patch brings the krait functions into line with the rest of the pmu backends by deriving the address of the pmu from the event argument
0a93dc1c18fd86f936bcb44f72dc044c0ea826a8	media dvb-core dont break long lines due to the checkpatch warnings several strings were broken into multiple lines this is not considered a good practice anymore as it makes harder to grep for strings at the source code so join those continuation lines
207cda93f0446c2da5461a37252c7468ddc1c2bc	spi dw fix crash on setup stage the commit spi ensure that cs line is in non-active state after spi_setup introduces an unconditional call of spi_set_cs before the dw_spi_set_cs relies on that fact that is already called but it doesnt now this patch fixes the crash by adding an additional check to dw_spi_set_cs
2124469efa6079e6c325165fb1926159356b15c3	aoe get rid of cached bv variable in bufinit less error prone if we just kill it its only used once anyway
bf18c7118cf83ad4b9aa476354b4a06bcb9d0c4f	bluetooth vhci free driver_data on file release this removes the hci-destruct callback and instead frees the private driver data in the vhci_release file release function there is no reason to keep private driver data available if the driver has already shut down after vhci_release is called our module can be unloaded the only reason it is kept alive is the hci-core having a module-ref on us because of our destruct callback however this callback only frees that is we wait for the hdev-device to get destroyed to free our internal driver-data in fact the hci-core does never touch so it doesnt care if it is null therefore we simply free it when unloading the driver another important fact is that the hdev core does not call any callbacks other than the destruct-cb after hci_unregister_dev has been called so there is no function of our module that will be called nor does the hci-core touch hence no other code can touch after our cleanup so the destruct callback is definitely unnecessary here
12a8541d5c82d17d42424d46ec36929cfef06a10	bnx2x delay during kdump load in a kdump environment interfaces might be re-loaded without a proper unload sequence in the previous running kernel bnx2x management fw and driver maintains a pulse that notifies the fw that the driver is still up and running driver load on the kdump kernel should be performed only after the pulse has been out-of-sync long enough for the management fw to identify that the driver has crashed on which point it will perform some necessary cleanup of the hw in todays distros kdump loading is quite fast sometimes too fast for our fw to get out-of-sync this patch delays the bnx2xs probe during kdump to allow a proper re-load on the kdump kernel
7653ebd5f6a4cd1976cb82e8ef94ebbe3ff001f3	can usb esd_usb2 add support for this patch extends the esd_usb2 driver to support the tiny interface
5cab4d84780573afbf5077ae9c3f919b4f305f20	input silead use devm_gpiod_get the silead code is using devm_foo for everything and does not free any resources except that it is using gpiod_get instead of devm_gpiod_get but is not freeing the gpio_desc change this to use devm_gpiod_get so that the gpio will be properly released
d87f064f5874ba60814c6ccac67104761be5b26c	md never update metadata when array is read-only normally we dont even try to update the metadata if the array is read-only however future patches will increase the number of things that can happen on a read-only array so it is safest to explicitly disable this every time that is set to __number__ either md_update_sb will be called again at least if md_change_devs is set or the is scheduled which will also run md_update_sb if needed so this is safe if the array ever become read-write the metadata will be updated
cdb83947ab78dac2477b3d27416fbd1cc480cead	hsi nokia-modem setup default value for pm parameter the module documents that __number__ is the default but it actually isnt this updates the module to use as default
0805909f59e02036a4e2660159f27dbf8b6084ac	perf hists fix histc_mem_dcacheline width setting set correct width for unresolved mem_dcacheline addr link
c928ed55171b3aa5e14a9474ffe60f31590b89ff	check the return value of mlx5_command_exec mlx5_cmd_exec might fail need to check return value
8fe9739bc3ed616fb8cf935fb5099051493c2424	dmaengine tegra-apb update driver to use gfp_nowait the tegra20-apb-dma driver currently uses the flag gfp_atomic when allocating memory for structures used in conjunction with the dma descriptors it is preferred that dmaengine drivers use gfp_nowait instead and so the emergency memory pool will not be used by these drivers
2c5f4f8422e8cf3dd15638226e964f2e13132267	xen-netback proper printf format for ptrdiff_t is t this fixes in function warning format expects argument of type but argument __number__ has type
7b3d9b06d8b6407fe25e00e627b48ec0d4a2a076	ndisc fill in icmpv6 checksum and ipv6 header in ndisc_send_skb
97c3ec63089fdcd2abf66619b913900909841dc0	genksyms fix metag symbol prefix on crc symbols meta uses symbol prefixes so add metag to the list of architectures to set the mod_prefix to _ for this fixes symbols to add the extra underscore to match _crc_symbol macro in and so that modpost finds them
bde251a9a813bfbb8f300abef265ecb7028c428f	regulator ti-abb skip optional parameter for ldo-address on platforms like omap4460 ldo override is never used even though efuse determines the abb bias mode to operate at abb voltage is preconfigured in internal efuse registers without the need for ldo override for bias voltage so skip optional parameter if property is not present
7d9370607d28afd454775c623d5447603473a3c3	keep as zero for init optimization keep as zero for init optimization this is important for init optimization that is implemented in processor if a bit corresponding to an xstate in xstate_bv is __number__ it means the xstate is in init status and will not be read from memory to the processor during instruction this largely impacts context switch performance link
6cacd115a8aafdc3f0f47c30af9d3a55a18074db	cpufreq intel_pstate downgrade print level for _ppc downgrade pr_info to pr_debug for the _ppc limits will be enforced message in server systems with many cores this message is annoying rjw changelog
5f73c718554a70d27ddcd1f0a62b9731cc35eebd	staging comedi rtd520 remove rtddacfifoput macro this macro uses the devpriv macro which relies on a local variable having a specific name plus its just a wrapper around a simple writew remove the macro
6116c2030fff91950f68b7fffb5959c91a05aaf6	rds fix fmr pool dirty_count in rds_ib_flush_mr_pool dirty_count accounts the clean ones which is wrong this can lead to a negative dirty count value lets fix it
b3bba9a1a8dfcd338eb7d099dcd53daacb698f8b	asoc pcm fix dpcm for aux_devs when we instantiate an aux_dev we use a fake rtd as part of the process which doesnt have a dai_link associated with it fix the dpcm startup code to cope with this
1bc4f06c24a0fccd2ff9d81ca4b2ee4d3acb7fbb	dmaengine stm32-dma remove unused in stm32_dma_chan_irq variable is initialized but never used which leads to warning with in function warning variable set but not used u32 status scr sfcr so remove it
aa89762c54800208d5afdcd8e6bf124818f17fe0	ocfs2 return einval if the given range to discard is less than block size for fitrim ioctl2 we should not keep silence if the given range length ls less than a block size as there is no data blocks would be discareded hence it should return einval instead this issue can be verified via which is used for fitrim argument handling tests
db4e5376d058af8924fafd0520a0942d92538d0e	iio light fix improper return value in function cm3232_reg_init it returns __number__ even if the last call to i2c_smbus_write_byte_data returns a negative value indicates error as a result the return value may be inconsistent with the execution status and the caller of cm3232_reg_init will not be able to detect the error this patch fixes the bug bugzilla
e8c61ecc1b1658f887e74a5be2cb9f9b79baa325	mptbase fixup error handling paths in mpt_attach mpt_attach was not checking for the failure to create fw_event_q also iounmap was not being called in all error cases after ioremap had been called by mpt_mapresources
29f6ca6916e29fc46f1418885374d9ed50430687	scsi sd unlock zone in case of error in sd_setup_write_same_cmnd scsi_io_init may fail leaving a zone of a zoned block device locked fix this by properly unlocking the write same request target zone if scsi_io_init fails
619d0d76c1ee943f171c7d4fc021ec7602388579	restore after promoting it to __gfp_highmem we promote to __gfp_highmem to forcibly scan highmem if there are too many buffer_heads pinning highmem see cc715d99e5 mm vmscan forcibly scan highmem if there are too many buffer_heads pinning highmem this patch restores to its caller original value after finishing the scan job to avoid the impact on other invocations from its upper caller such as vmpressure_prio shrink_slab
4f8f316be6bace82139e321e11674949ce446454	staging rts5208 replace a bit shift by a use of bit this patch replaces bit shifting on __number__ with the bitx macro this was done with coccinelle constant c c
db744aaa279fa1d2a06dd6b95f9599acf3557885	factor out pci-msi part that might be reused for acpi firmware agnostic code lands in common functions which do necessary domain initialization based on unique domain handler dt specific code goes to dt specific init call
4bd5bf8c85e6bca5be9e7c4b3d7ad1942ae323f3	dont allocate for now that kthreads do not use fpu until they get executed doesnt need to allocate link
ac0e94b63e65f9c6d2f3c49107118e2228236db4	initialize status to ensure garbage is not returned on small size although very unlikey if size is too small or zero then we end up with status not being set and returning garbage instead initializing status to efi_invalid_parameter to indicate that size is invalid in the calls to setup_uga32 and setup_uga64
a29fd614a6af57610b1963e3445f1758c3806187	use strreplace this eliminates a little and avoids repeating the strchr call when we meet a which will happen at least once
a2655e4a8edb66d21b0967940172e83a51d30ef3	usb gadget fix warnings warning ptr_err_or_zero can be used use ptr_err_or_zero rather than ptr_err generated by
0e97cd4e4632e385b3bf7edcf0c803de0487212a	net hns fix port unavailable after hnae_reserve_buffer_map fail when hnae_reserve_buffer_map fail it will break cycle and some buffer description has no available memory therefore the port will be unavailable
45ec16908e84e00d847e9063231fb3a75e6366bc	mm use for in the paranoid case of sysctl mask the kernel virtual addresses in too
9e7d953bbf746cf704238965a716e0afcfe0f5f4	usb f81232 cleanup non-used define we remove non-used define in this patch to avoid wrong usage
789f38ca70e0b2848472aaf5f278aa3deabd4a4e	i40evf remove needless min_t on we already set pairs to the value of this value is limited by and num_online_cpus this means that pairs by definition is already smaller than so we dont even need to bother with this check lets just remove it and update the comment
be824167e33a8b747423c90f72479deb03255d54	nfsv4 leases are renewed in sequence_done when we have sessions ensure that the calls to renew_lease in open_done etc only apply to session-less versions of
ca22e79f5667faf7f6ed238e04075aeff936bbab	watchdog hpwdt hp rebranding this patch is for the rebranding changes for the corporate split at hp there are no functional changes with this patch
7edf1a4f27f44588d69cbde955651990090eb25d	asoc wm8958 use correct format string in dev_err call to print a value of type size_t one should use not
44b5250b97a0e5c3a257430ea28b10cf73899bd4	hid wacom simplify wacom_update_name a little bit of cleanup work for wacom_update_name to make it easier on the eyes creates a temporary name variable on which well perform our edits once the name is in its final form it will be copied with appropriate suffix to and
45af55006c2c8f49bddc6296224e70d752a1372c	natsemi add checks for dma mapping errors refill_rx and start_tx do not check if mapping dma memory succeed the patch adds the checks and failure handling found by linux driver verification project
8e82fa8fdcd1271d45bf6a5195801c706e190d69	nfsd prettify flag definitions
afc0255c9a5ecede2f235f4d117c2913059aa3c3	enable clock stretch feature on vega10 correctly calculate cksvidoffset
466fd24b681c734640ebefb1e611df0a5f10d011	net stmmac update the module description of the dwmac-meson driver the dwmac-meson glue driver supports meson6 and meson8 socs newer socs are supported by the dwmac-meson8b driver
29a99df17bb755bac716177295de7b4b86cb1467	usb misc cytherm dont print on enomem all kmalloc-based functions print enough information on failures
ae4fa5f4502bfa7e7f31fc99a1da41189422642d	pci xgene allow config access to root port even when link is down previously when a root ports link was down we didnt allow config access to the root port which meant that if the root port led to an empty slot lspci didnt even show the root port allow config access to root port even when link is down bhelgaas changelog fold in unused var fix
250c23fc78252844fb35c2a054babbe78de96553	staging dont use return in void function return statements are superfluous in void functions and checkpatch complains about them too remove offending return
92f268eefe38c62aaf9ee9cea5e05f2abf9d3d60	sparc32 leon align ccall_info to prevent unaligned traps on crosscall it is being filled in using std in leon_cross_call
0265e1ae64ebf1bb55a563599d11fb7376478ae1	asoc omap rx51 add some error messages add more error messages making it easier to identify problems
6bb691ac089c39bb0aa73bdcc21ffd8c846e4ba5	nvdimm do not show pfn_seed for non pmem regions this simple change hides pfn_seed attribute for non pmem regions because they dont support pfn anyway
5020e285856cb406224e6f977fd893a006077806	mm oom give __gfp_nofail allocations access to memory reserves __gfp_nofail is a big hammer used to ensure that the allocation request can never fail this is a strong requirement and as such it also deserves a special treatment when the system is oom the primary problem here is that the allocation request might have come with some locks held and the oom victim might be blocked on the same locks this is basically an oom deadlock situation this patch tries to reduce the risk of such a deadlocks by giving __gfp_nofail allocations a special treatment and let them dive into memory reserves after oom killer invocation this should help them to make a progress and release resources they are holding the oom victim should compensate for the reserves consumption
d297b0204321303306d9f4b099e83f05bfeff1c9	use drm_crtc_handle_vblank remove legacy usage of drm_handle_vblank link
54891d7404267ac7a89a464752feba6a851d18fd	host ohci-da8xx remove duplicate check on resource sanity check on resource happening with devm_ioremap_resource
9a592a953880fd6981955e69c1476ce541d9bd16	kvm remove the unused declare remove it since it is not used anymore
de9e5aeb4f40e72fa3bb087d378c9bd4ecf65c7f	nfc llcp fix usage of llcp_add_tlv in functions using llcp_add_tlv a skb pointer could be set to null and then reuse afterward with this patch the skb pointer returned by llcp_add_tlv is ignored since it can only be the passed skb pointer or null when the passed tlv is null there is also no need to check for the tlv pointer as this is done by llcp_add_tlv
fdfcab17a26ab2179c9d233f8a1b63e93cff9a4a	clocksource em_sti convert to add calls to clk_prepare and unprepare so that emma mobile ev2 can migrate to the common clock framework
1019a359d3dc4b64d0e1e5a5efcb725d5e83994d	fix stale yield state when we fail to start the deadline timer in update_curr_dl we forget to clear resulting in wrecked time keeping since the natural place to clear both and is in replenish_dl_entity both are after all waiting for that event make it so luckily since implement cancel_dl_timer to use in switched_from_dl the task_on_rq_queued condition in dl_task_timer must be true and can therefore call enqueue_task_dl unconditionally link
1a33ac00c5ebc4b2e2efb5bc0252c6ba7dc8ff0f	media media i2c tvp514x reported mbus format should be media_bus_fmt_uyvy8_2x8 the advertised v4l2 pixel format and media bus code dont match the current media bud code advertised is media_bus_fmt_yuyv8_2x8 which does not reflect what the encoder actually outputs this encoder generate media_bus_fmt_uyvy8_2x8 so advertise as such
ac59853c06993a442e8060bc19040b2ca3025aec	rcupdate replace smp_read_barrier_depends with lockless_dereference recently lockless_dereference was added which can be used in place of hard-coding smp_read_barrier_depends the following patch makes the change
6c3dbd2d722a6010010ad99a6890a56178385bb8	remove redundant err variable usage cosmetic change do not use the an err variable just to assign and return it
65c77fd9e8a1c8c3da0bbbea6b7efa3d6ef265f8	blkcg stop iteration early if root_rl is the only request list __blk_queue_next_rl finds next request list based on blkg_list while skipping root_blkg in the list otoh root_rl is special as it may exist even without root_blkg though the later part of the function handles such a case correctly exiting early is good for readability of the code
211b316813023ab6a82926d90522c12069baebc1	make obd_uuid_equals return bool this is only part of the original lustre tree commit main part of the original commit changes server code and is unneeded at client side lustre-change intel-bug-id
c3049c8f25bc1f43c7b948a4dbaaae84b0483136	ixbge protect ixgbe_down with __ixgbe_down bit the ixgbe_down function can now prevent multiple executions by doing test_and_set_bit on __ixgbe_down this did not work before introduction of the __ixgbe_removing bit because of overloading of __ixgbe_down also add smp_mb__before_clear_bit call before clearing the __ixgbe_down bit
9402bdcacdfedf7219a17e4d93300058a8e2aa4c	ext4 crypto remove duplicated encryption mode definitions this patch removes duplicated encryption modes which were already in they were duplicated from commit and commit f542fb
9d2effea12a3a7139daf04a2be97f18d3e6913a3	usb chipidea otg_fsm delete the duplicated reset controller operation at host_stop it will call usb_remove_hcd and reset controller later
a1edf9cf6d1efed2981fcf6e4caa704fbb1bd093	target cleanup transport_kunmap_data_sg this code isnt broken per se but its scary to look at it looks like in the case were doing both a kunmap and a vunmap whats saving us is that t_data_vmap in this case is __number__ so vunmap doesnt do anything return after kunmap so the handling of the three cases does not overlap
4e4a4d75700da67c1209c151d5f11a309c3b8367	tracing update cond flag when enabling or disabling a trigger when a trigger is enabled the cond flag should be set beforehand otherwise a trigger thats expecting to process a trace record one with post_trigger set could be invoked without one likewise a triggers cond flag should be reset after its disabled not before link
4c5bb2e42e6f12c02e6c8db9883ffa7602c68c19	mmc mxs-mmc fix merge issue causing build error the following error appeared due to a merge problem the patches mmc mxs-mmc fix deadlock caused by recursion loop mmc spi pull out parts shared between mmc and spi came in through separate branches and cause this build error when combined in function mxs_mmc_enable_sdio_irq error struct mxs_mmc_host has no member named base error struct mxs_mmc_host has no member named devid make3 error __number__ this patch corrects the issue
b21a3bf4418899bcb74cbef2e4d3bb976a6f1157	check for null pointers in error handling smatch error from arm build hdmi_probe error potential null dereference added check for that it is not null
f65d539c6fb4de92df4d3c8a49b9ac3fd8d17f18	r8169 use pci define for max_read_request_size replace a magic number with a pci symbol
9c2c438ceeee5d22aeaea4162a96c0f35f62a7ff	staging ipu-v3 ipu-common indicate succesful probe indication of succesful probe is more useful than stating that the driver is about to be probed
05ccaa2b24d402bb16949239b5525ce7236c2e74	be2net fixup log msgs for async events log the event type for unknown async events
e7b26d12cd44cff6ad25db7896ed4c2e1f1848ae	gpu drm amd amdgpu amdgpu_i2c dont print error when adding adapter fails the core will do this for us now
21feb4eb64e21f8dc91136b91ee886b978ce6421	kvm nvmx set segment infomation of l1 when l2 exits when l2 exits to l1 segment infomations of l1 are not set correctly according to intel sdm host segment and descriptor table registers segment right of l1 should be set to some designed value when l2 exits to l1 this patch fixes this
7387332558f050ace07334e945d2077af3c2ed96	staging comedi adv_pci1710 tidy up analog input subdev_flags remove the sdf_common flag the analog reference is not programmable and the default aref aref_ground sdf_ground provides adequate information about the reference
5947f4bc4253df3a18a540af096463530c5f8737	bluetooth rename update_ad into update_adv_data since there is update_scan_rsp_data it is also better to use the clear name update_adv_data instead of update_ad
14136e368f909ced74f97cf04199d7288933ad41	intel_th use real device index in the node names most of the intel_th core supports multiple co-existing th devices except for output device nodes where intel_th device id is hardcoded to be zero fix this by fetching the actual intel_th device id from the parent devices drvdata
519300cfe18ee8dcf0b1e7a38564b61b70e4ee86	mtd fsmc newly erased page read algorithm implemented a newly erased page contains ff in data as well as spare area while reading an erased page the read out ecc from spare area does not match the ecc generated by fsmc ecc hardware accelerator this is because ecc of data ff ff is not ff ff this leads to errors when file system erases and reads back the pages to ensure consistency this patch adds a software workaround to ensure that the ecc check is not performed for erased pages this problem is solved by checking the number of bits in __number__ byte data __number__ byte ecc which are __number__ if these number of bits are less than __number__ the page is considered erased and correction algorithm is not tried on that page
af1bd36c06b5fad33baa7ee16820226efbd96cd9	hwmon core deprecate hwmon_device_register inform the user that hwmon_device_register is deprecated and suggest conversion to the newest api also remove hwmon_device_register from the kernel api documentation note that hwmon_device_register is not marked as __deprecated since doing so might result in build errors
1647138df66c695eb16f4a6bce7f088f817ab26d	spi orion remove unused pointer in orion_spi_write_read remove unused devdata pointer orion_spi in function orion_spi_write_read detected by coverity cid __number__
a5570fe5c2ca012f92666eb790973827554e19df	revert ratelimit dp aux timeout messages this reverts commit ratelimit dp aux timeout messages as although it successfully squelches the debug messages when it does so it generates a warning instead ci lights up orange with all the warnings in its current incarnation drm_debug_ratelimited is not usable for us and we need to first teach not to warn when used for debug messages
3dc1597b6b0a8d17fc56d93b5e9cf859fe681727	crypto amcc fix module autoload for of platform driver this platform driver has a of device id table but the of module alias information is not created so module autoloading wont work
ac830fe1c3d811db2bef1835b6e0c693bc3b237e	constify some watermark data hsw_pipe_wm_parameters and hsw_wm_maximums typically are read only make them const
b00e2fa1ab1ff4c4ada4324866516c21c7ce5057	asoc switch over to use snd_soc_register_component on txx9aclc
05073caeedd1ea6bfc5b1ebd051f2a6694e4b26b	use rb_entry to make the code clearer use rb_entry instead of container_of to deal with rbtree
71e68e3db8008d89d4eb25483ea68d752015e9d8	correct receive packet handler assignment prevent processing receive packet in case when opcode is accepted by qp but handler for this type of packet is not defined
63fb3a280061c5a1d9190015e5a074213f9d23c0	usb ns_to_us should round up host controller drivers use the ns_to_us macro to convert transaction times which are computed in nanoseconds to microseconds for scheduling periodic scheduling requires worst-case estimates but the macro does its conversion using round-to-nearest this patch changes it to use round-up giving a correct worst-case value
d4298a3a8c92a18d375e55feecc60e4eefeb45e3	ath10k mac remove unreachable negative return check wait_event_timeout introduced in commit ath10k mac80211 driver for qualcomm atheros cqa98xx devices never returns __number__ so the only failure condition to be checked is timeout further the return type is long not int an appropriately named variable is added and the assignments fixed up
5dd070d21e2cb34b4162d564d73cca3591f94389	word size accordance with spi controller as protocol driver ifx spi driver initiate to setup spi master with default spi word size as __number__ however spi master may not adopt this default value due to spi controllers capability it might choose an available value by itself and set it to in order to keep align with controller ifx driver should make use of this value during spi transfer but the default one
79766915d91f0dc20ae44484ec0febb0281caa2a	use hw values for deep color im not really sure how these should be calculated for deep color the hw generated values seem to work
7c2a04a933d51b45af7660bd1790339eb3c33308	nfc reset poll mod list when stopping pn533 poll
18e5a45db30e0e338cdd663eda05a8288cc14fa5	watchdog make the kthreads numa affine watchdog kthreads can use kthread_create_on_node to numa affine their stack and task_struct link
8f88dc41927f6a9bbb03d5d0496d04ba3775dc8d	mptfusion dont change queue type in this function shouldnt change the queue type just the depth
f39768744fd6cd45291c957bd4bf2f68f073ed73	net stmmac always enable mac rx queues the mac rx queues always need to be enabled in order to receive network packets remove the condition that this only needs to be done for multi- queue configurations
d206563ad8f6fb41943366cf22f1aabc19d2b1a7	ixgbe remove cs4227 diagnostic code testing has now shown that the diagnostic code used with the cs4227 is no longer needed so remove it
eeeabba024191c810b83592578cfc6183c4059fa	tty initialize more in ifx_spi_complete more is not initialized it is set only if the status is clear and only if the header is parsed ok if any of those is not true more can be used uninitialized in that function later
aa851193bdf140c85b660c2a070e53316ad2a4d3	regulator max8998 remove wrong callback settings using the same ops for both and callbacks is actively broken this patch removes and callback setting
a850ced42916a9bf25f4595c744156e6b8b8f5c0	scsi libfc do not send abts when resetting exchanges when all exchanges are reset the upper layers have already logged out of the remote port so the exchanges can be reset without sending any abts
fbff08706d12fcdb160604c4ba790df6707c32cb	autofs4 translate pids to the right namespace for the daemon the pid and the tgid of the process triggering the mount are sent to the daemon currently the global pid values are sent ones valid in the initial pid namespace but this is wrong if the autofs daemon itself is not running in the initial pid namespace so send the pid values that are valid in the namespace of the autofs daemon the namespace to use is taken from the oz_pgrp pid pointer which was set at mount time to the mounting process pid namespace if the pid translation fails the triggering process is in an unrelated pid namespace then the automount fails with enoent
6f6005a52b79c2b2e3d58d8ab63791c378ebf82c	expose hdmi connectors on port c on byt ryan noticed that on his board hdmi was wired up to port c but not exposed by the kernel which had only expected dp on that port fix that up by enumerating both ports if possible danvet fix up the whitespace fail tsk
5b947f1ba959d4b19068f687ecd39900d1eea1aa	btrfs dont traverse the ordered operation list repeatedly btrfs_run_ordered_operations neednt traverse the ordered operation list repeatedly it is because the transaction commiter will invoke it again when there is no other writer in this transaction it can ensure that no one can add new objects into the ordered operation list
f32bfb9a8ca083f8d148ea90ae5ba66f4831836e	sh_eth use dma barriers commit sh_eth ensure proper ordering of descriptor active bit did the right thing but used too heavy barriers while there were already lighter dma barriers exactly for this
a4570140b3f80d0dfc71fdcad00b9768db0b8b04	staging octeon-usb delete redudant prefetches cvmx_usb_pipe fits into a cache-line so additional prefetches are not really helping anything
60e27886fd615adc81e810bec23f4b929ab81d0e	staging dgnc fix long lines in pci device table this patch fixes coding style of pci device table declaration
fce7c3eac7d4ca77ada5bf8332f867219fbb5068	allow to use internal ref in two channel mode while it is not recommended to use the internal reference in two channel mode in order to obtain optimal performance it is still possible to use it while we are at it also get rid of the duplicate tx_cmd_buf entries there are only two unique entries one for channel __number__ and one for channel __number__
0fe30da2cb43782ee62d30c00a273d6934e5370e	pm opp fix warning in of_free_opp_table not having opp defined for a device is not a crime we should not splat warning in this case also it seems that we are ready to accept invalid dev find_device_opp will return err_ptr-einval then so lets not crash in dev_name in such case
96acf9d65e70e0eb2716e3e46c45f4acb8256f1a	orangefs nothing should remain in request list and in hash otherwise some thread is running in that is about to be freed
596d696a5d0e066f2ed4bd6b0e40dedd52513c7c	usb dwc2 gadget add vbus_draw support this callback informs the driver about the total amount of current it is allowed to draw share this information with the phy so that current limits can be set for charging for example
8cf3af32902d14f6a0fbc4ad9a3025d9e7d4701b	spi octeon use transfer speed unconditionally spi core validates the transfer speed and defaults to in case the transfer speed is not set
107f3198fd2c5902b9cc54c86a0c86f815c173e2	clk composite support this commit adds support to the composite clock it will use the callback from the rate component if available and fall back on the mux component otherwise this allows composite clocks to enjoy the benefits of automatic clock reparenting
cccd147a57e47527ce9c27fcd5f0a1c5669d6870	ext4 optimize ext4_writepage for attempted delalloc writes in cases where the file system block size is the same as the page size and ext4_writepage is asked to write out a page which is either has the unwritten bit set in the extent tree or which does not yet have a block assigned due to delayed allocation we can bail out early and unlocking the page earlier and avoiding a round trip through ext4_bio_write_page with the attendant calls to set_page_writeback and redirty_page_for_writeback
0690999e609a04507dec3a2a372b2c805d071c6a	mips ip28 broken values for caused complete breakage of ip28 builds only set special phy_offset and take everything else from generic patchwork cherry picked from commit
1007f59dce53a22cba164f854d7bdc171c85dc79	net skb_defer_rx_timestamp should check for phydev before setting up classify this change makes it so that the call skb_defer_rx_timestamp will first check for a phydev before going in and manipulating the and values by doing this we can avoid unnecessary work on network devices that dont support phydev as a result we reduce the total instruction count needed to process this on most devices
94e692071a51594c5117055676fef3ecbab21b30	pinctrl at91 use gpiolib api to mark a gpio used as an irq when an irq is started on a gpio line mark this gpio as irq in the gpiolib so we can keep track of the usage centrally
f6fc57756bd8e89687b165280a9bdee290a7850a	iwlwifi mvm bt coex correctly enable and treat rssi events rssi events were enabled on interfaces using interfaces on were taken into account while determining the ack cts kill mask fix that the last rssi notified to bt coex was reset every bt coex notification since we get a lot of these notifications from the firmware we reset the rssi all the time which means that the bt_rssi_event is called all the time fix that by puting the rssi we pull upon bt coex notification into
145b9006a0ae753582902170ec1da49f89501845	dm space map disk fix sm_disk_count_is_more_than_one dm_tm_shadow_block is the only caller of dm_sm_count_is_more_than_one which only ever operates on a metadata space-map so in practice sm_disk_count_is_more_than_one isnt actually used which explains why this bug never amounted to anything but fix sm_disk_count_is_more_than_one to properly set and return __number__
c294ea31aa785afe2144fc933fd59106506c1c53	staging unisys visorbus change return values this patch changes the vague return values to since it would be the most appropriate given that this error would only occur in an unexpected bad offset field resulting in a bad address
0b6e81b91070bdbe0defb9101384ebb26835e401	clear out struct before create qp command output structs are expected by firmware to be cleared when a command is called clear the out struct instead of dout which is used only later
f23b73526b82ca2ef333362e704a51d817c1ffc1	nfc trf7970a make gpio labels more readable make the labels for the two gpio enable lines more user friendly by prefixing them with the driver name
7f05b24536f068c0a5072929fb6c0fb2099d273c	media replace memcpy with struct assignment this kind of memcpy is error-prone its replacement with a struct assignment is prefered because its type-safe and much easier to read found by coccinelle hand patched and reviewed tested by compilation only a simplified version of the semantic match that finds this problem is as follows identifier struct_name struct struct_name to struct struct_name from expression e e from
53e88754a28c15ac9feb9ca786174c9546098dcd	input wistron_btns mark the medion md96500 keymap as tested dmi medionpc wim __number__ bios r01-a0o wistron_btns bios signature found at entry point input wistron laptop buttons as
3dd4849c257af317cd33bcecf7d17b75dabf7540	scsi qla4xxx fix memory corruption issue in qla4xxx_get_ep_fwdb in qla4xxx_get_ep_fwdb dst_addr is of type struct sockaddr we are copying sizeofstruct sockaddr_in6 bytes to dst_addr which is __number__ bytes larger this will cause memory corruption so we change dst_addr to struct sockaddr_storage which is of __number__ byte large enough to hold sizeofstruct sockaddr_in6
c72eeabd0ca8291e6e8d9ec3bb93c70125445a5d	hwmon adc128d818 preserve operation mode preserve chip operation mode if no mode is specified via devicetree this enables operation when chip configuration is done by
249a456930cd2df29d085fb738b0e8f4bc1680cf	usb dwc3 take lock while modifying flags dwc3_gadget_ep_set_wedge and dwc3_gadget_set_selfpowered were modifying without taking the lock since those modifications are non-atomic that could cause other flags to be corrupted fix them both to take the lock
bde43c6c9f4f360ae549a0ed9f10a3e62e363aca	allow interruption of allocation sleep again commit thp reduce khugepaged freezing latency fixed khugepaged to do not block a system suspend but the result is that it could not get interrupted before the given timeout because the condition for the wait event is false this patch puts back the original approach but it uses freezable_schedule_timeout_interruptible instead of schedule_timeout_interruptible it does the right thing i am pretty sure that the freezable variant was not used in the original fix only because it was not available at that time the regression has been there for ages it was not critical it just did the allocation throttling a little bit more aggressively i found this problem when converting the kthread to kthread worker api and trying to understand the code this bug is thought to have minimal userspace-visible impact somebody could set a high alloc_sleep value by mistake and then try to fix it back but khugepaged would keep sleeping until the high value expires
374d4dd3ef1a3ebac33a7df5f8f2e7b5fbd7ec05	remove legacy __cpuinit section that crept in we removed __cpuinit support leaving no-op stubs quite some time ago however this one crept back in as of commit a7a2b3118b410fb3cd3a8363b1 arm rockchip add smp bringup code since we want to clobber the stubs soon get this removed now
bfd0ed576dbf9cc71af7dbe42841fc9246524961	usb gadget udc net2280 do not rely on driver argument future patches will remove the extra driver argument to in order to do that we must make sure that our udc does not rely on it first
000092b0b4793caf831f6016fa69d25abba31e51	bluetooth bnep use constant for ethertype the dot1q ethertype number is embedded in the code although it is already defined in included headers
f0886a66295ccd9c81eb0cceb596e5fbc19dc2ac	input w90p910_keypad pass correct pointer to free_irq free_irq expects the same pointer that was passed to request_irq otherwise the irq is not freed the issue was found using the following coccinelle script type t t devid devid type t devid position p devid position p
e18ac62fa4b3f16234bab0d5a6627c57dbae9e7e	acpi video add hp elitebook revolve __number__ to the blacklist on hp elitebook revolve __number__ the acpi backlight device doesnt work as expected for example when resuming from system sleep it seems to lose backlight settings forcing intel driver fixes the problem so add this machine the acpi video detect blacklist
adfaa207ca4140fe6a09550549308248e651e2b9	staging comedi das16 use comedi_legacy_detach use the new comedi_legacy_detach helper in the to release the first region requested by this driver an additional region is requested for some of the boards this driver supports save the iobase for that region in the private data so that the knows it needs to be released
2b5c0d4fd246a3ec0ab79c6518860c673c4515ef	omapfb remove use of extended edid block it seems that using the second edid block causes more problems than is of any help the first mode in the extended block will get fb_mode_is_first set which will override the first mode from the first edid block thus making the default videomode selection not to work properly this patch removes the use of the extended edid block for now
c3ec0ff6425b86655aa34b5c6cb0f7b6d559c6b2	mwifiex do not wait on semaphore during card removal host hang is observed if card is removed before firmware download gets completed in this case firmware will be failed to download and adapter structure gets freed in other thread mwifiex_remove_card waits on semaphore until the firmware download fails this wait is not necessary and may result in invalid adapter access this patch uses down_trylock to return immediately so that hang issue wont occur
83a1e53f392075e291a90746241dce45c6f9429a	smack ignore private inode for file functions the access to fd from anon_inode is always failed because there is no set xattr operations so this patch fixes to ignore private inode including anon_inode for file functions it was only ignored for smack_file_receive to share dma-buf fd but dma-buf has other functions like ioctl and mmap reference
ceeddb4e69b2010b0f4f88c9e06dc83d80b49db6	video udlfb use null instead of __number__ new_back is a pointer use null instead of __number__
8ef9b0b9e1c02879c9a41246437a23f513e4378b	nfs move nfs_pgarray_set to open code since commit nfs create a common pgio_alloc and pgio_release function nfs_pgarray_set has only a single caller lets open code it
89eb6d0677a6daf134015bc7bd5ec1432911eed2	mac802154 llsec fix return value check in llsec_key_alloc in case of error the functions crypto_alloc_aead and crypto_alloc_blkcipher returns err_ptr and never returns null the null test in the return value check should be replaced with is_err
859644f0fa2141b5f7db0e3744999ec3bb5719d3	md raid10 add prerequisite to run underneath dm-raid in case md runs underneath the dm-raid target the mddev does not have a request queue or gendisk thus avoid accesses to it this patch adds two missing conditionals to the raid10 personality
ee42b3aa3791263a6cca36856b306cd1ae897ebf	mfd wm8994 add __devinit and __devexit annotations for probe and remove fixes warnings and needed for correctness
1f4e2706525d46eeb678759f8a626619e5461143	staging ste_rmi4 simplify null tests replace direct comparisons to null x null with for consistency coccinelle semantic patch used identifier func expression x statement z x if x null null x z
e975eef07cbca53691f504318609bb95c7e5f1ac	drm forbid legacy map functions for driver_modeset like in commit author peter antoine intel.com date tue jun __number__ __number__ drm turn off legacy context functions we need to again make an exception for nouveau but everyone else really doesnt need this dave airlie dug out again why we need this the problem is the legacy dri1 open function the nouveau ddx called and the problematic code is actually in the x server itself it was only fixed in commit b1a630b48210d6a3c44994fce1b73273000ace5c author dave airlie redhat.com date wed nov __number__ __number__ nouveau drop dri1 device open interface
44f71cef92eb65bc4382ef3fb04a8e1437bda2d7	remove null test before kfree fix checkpatch warning warning kfreenull is safe this check is probably not required
5326a4ee982703ddba14a9821fe5cb10d122e1b0	bluetooth force from tty if fails if rfcomm_dlc_open fails set tty into error state which returns from reads and writes
4f8c0602ea75a48c3fd3e9ccd7b54b34ce68e71f	wusb delete double assignment delete successive assignments to the same location a simplified version of the semantic match that finds this problem is as follows expression i i
58829aa67da95d03bcca7605d2556361a1785a08	store the forced dpm level so the selected forced level shows up properly in sysfs
e9b3bd379c283577e102529bfb22484238be7c91	drop redundant declarations both intel_pmu_enable_bts and intel_pmu_disable_bts are in header file no need to have them declared again in the driver link
163f53a2611c98a9f8e25cbda30ce8ce268b92de	vlv fix gunit hw state corruption during s4 suspend during s4 freeze we dont call intel_suspend_complete which would save the gunit hw state but during s4 events we call intel_resume_prepare which restores it thus ending up in a corrupted hw state fix this by calling intel_suspend_complete from the corresponding freeze_late event handler the issue was introduced in commit author sagar kamble intel.com date wed aug __number__ __number__
ee5f7d6462c56ba083d5d80aa0d69914068a59ae	add workaround for apm x-gene gicv2m erratum apm x-gene gicv2m implementation has an erratum where the msi data needs to be the offset from the spi_start in order to trigger the correct msi interrupt this is different from the standard gicv2m implementation where the msi data is the absolute value within the range from spi_start to spi_start num_spis of each v2m frame this patch reads msi_iidr register present in all gicv2m implementations to identify x-gene gicv2m implementation and apply workaround to change the data portion of msi vector
96f3eda67fcf2598e9d2794398e0e7ab35138ea6	fix static checker warning in lbr enable commit deb27519bf1f fix lbr callstack issue caused by freeze_lbrs_on_pmi leads to the following smatch complaint warn variable dereferenced before check see line __number__ fix the warning link
da2612af00d8216ba365866f9d52f04ea2ad7773	pps clients drop owner assignment from platform_drivers a platform_driver does not need to set an owner it will be populated by the driver core
cd572182bd3d82e270d273b241f29d40b4213111	staging android fix brace coding style warning in this is a patch to the file that rectifies a brace warning that was found with the tool
2d15118750fd69a50cf286d3fc275546fa0b5857	g2d fix null pointer dereference this patch fixes a null pointer dereference issue incurred by calling g2d_remove when exynos_drm_platform_probe is failed cmdlist_pool of g2d is allocated when g2d sub driver is probed so if exynos_drm_platform_probe is failed the g2d sub driver is not probed and the cmdlist_pool is still null
835cb7d2bb09fc40d7614575557d03eb3a3cc520	at86rf230 add missing module_device_table
ae6d54fd695d7e1bd7b0bdaf457074ae4b5ad7bb	pinctrl qcom spmi-mpp skip pullup on ult type mpps the ult type of mpps dont have a pullup skip configuring the pullup on these types of pins
5adeb17c936d2dca155e4c93e2c6ea70419a6033	tipc remove obsolete manipulation of message re-route count field eliminates code that increments and validates the re-route count field of payload messages since the elimination of multi-cluster support means that it is no longer necessary for tipc to forward incoming messages to another node the obsolete code was incorrect anyway since it incorrectly incremented the re-route count field of messages that originated on the node that forwarded the message
66cb6957d338383157d4fdafef7c85e488e9e535	media em28xx-audio add debug info for the volume control
0d79f8b93187c771b6971acfaba67f4e2f1e0710	perf stat add as default target boris asked for default option in case we monitor only uncore events while implementing that i thought it might be actually useful to make it overall default running perf stat will now collect system wide data committer note testing it perf stat performance counter stats for system wide __float__ cpu-clock msec __float__ cpus utilized context-switches __float__ __number__ cpu-migrations __float__ page-faults __float__ cycles __float__ ghz instructions __float__ insn per cycle branches __float__ branch-misses of all branches __float__ seconds time elapsed link
9060dd2c5036b12132f9b97e3486ca6422d5bdfc	ext4 fix mmp use after free during unmount in ext4_put_super we call brelse on the buffer head containing the ext4 superblock but then try to use it when we stop the mmp thread because when the thread shuts down it does write_mmp_block ext4_mmp_csum_set ext4_has_metadata_csum which reaches into which lives in the superblock buffer s_sbh which we just released fix this by moving the brelse down to a point where we are no longer using it
5a308f40bfe27fcfd1db3970afe18b635f23c182	netem refine early skb orphaning netem does an early orphaning of skbs doing so breaks tcp small queue or any mechanism relying on socket sk_wmem_alloc feedback ideally we should perform this orphaning after the rate module and before the delay module to mimic what happens on a real link skb orphaning is indeed normally done at tx completion before the transit on the link qdisc device tx completion links hops xmit skb orphaning propagation rate limiting delay drops reorders if netem is used without delay feature drops reorders rate limiting then we should avoid early skb orphaning to keep pressure on sockets as long as packets are still in qdisc queue ideally netem should be refactored to implement delay module as the last stage current algorithm merges the two phases rate limiting delay so its not correct
ba06e38c24b655a9f0f2d92c7ec1c2a9101216f4	staging vt6656 struct vnt_private remove dead variable bbarkerpreamblemd
a25eb114d50d6e60ef586f2466c874581c31594c	kvm nvmx set success rflags when emulate in nested virt set rflags after successfully emulateing in vmx
d5de1987853a7778bb048a9e52b3486eb9aceb17	macvtap destroy minor_idr on module_exit destroy minor_idr on module_exit reclaiming the allocated memory this was detected by the following semantic patch written by luis rodriguez defines_module_init declarer name module_init module_exit declarer name define_idr identifier init module_initinit defines_module_exit identifier exit module_exitexit declares_idr depends on defines_module_init defines_module_exit identifier idr define_idridr on_exit_calls_destroy depends on declares_idr defines_module_exit identifier exitvoid missing_module_idr_destroy depends on declares_idr defines_module_exit identifier exitvoid
b89f3b9460417758d5189caddab8a052d2dd19f4	staging vt6656 clean up s_vgetfreecontext camel case clean up pdevice priv pcontext context
06e57b6c1e6cfabdaf6fb95207dcefe03c20b06d	regulator anatop-regulator remove unneeded memset sreg is allocated via devm_kzalloc so there is no need to explicitly zero out rdesc via memset
3266789f9d08b27275bae5ab1dcd27d1bbf15e79	btrfs dont set and clear delalloc for o_direct writes we do this to get the space accounting but this is just needless churn on the io_tree so just drop delalloc and just drop the reserved data space when we have a successfull allocation thanks
b7446cacfb433f5e89ff94afecbc349e404aee21	tcm_loop remove sas vestigies tcm_loop is able to emulate several protocols so remove last vestigies of the sas protocol
dcfc3a6740d372ebe203dae2c5852ff45f9ef793	tools synchronize commit bpf fix bpf_skb_in_cgroup helper naming renames bpf_func_skb_in_cgroup to bpf_skb_under_cgroup triggering this warning while building perf warning differs from kernel update the copy to ack that no changes needed as bpf_func_skb_in_cgroup isnt used so far link
cf97b8ff22a0d8b81dead6baff551642c9ead8e7	net sxgbe remove duplicate sxgbe_core_l34_addctl_reg define the sxgbe_core_l34_addctl_reg define is cut and pasted twice so we can delete the second instance
a04848c75bc02858ba98a7af63637728d033d3e8	mmc core switch to ida_simple_ functions in ida code in can be significantly simplified by switching to the ida_simple_ functions
19e307bc894edd8174ea83ee0ef102291a8bbc8d	fix address space warning in fixes the following warning warning incorrect type in assignment different address spaces expected void noderef got void
cd3776638003b3362d9d7d1f27bcb80c276e2c28	properly handle offloading of source udp port for ip tunnels we can offload the matching on source udp port of ip tunnels for decapsulation we can not offload setting source udp port for tunnels as part of encapsulation fix both the code that deals with matching offload decap and the code that deal with encap offload to align with that
133ac40ac26a6cba957ad5765892f0531ba6ccee	r8169 add eri functions add the eri functions which would be used by the new chips
e71aa28312b208a14cd87fa61e941ac8c85072f4	perf kvm fix sample_type manipulation manipulating the sample_type of an evsel requires the use of perf_evsel__set_sample_bit and perf_evsel__reset_sample_bit link
635e664a6b4d4b9c12f507045d156ea419b62dff	usbip vhci_hcd at unlink return if vhci_rx took the urb in a situation where the urb is about to be returned or was never there we should return as per usb_hcd_check_unlink_urb this is exactly the situation when the urb is picked up by vhci_rx before we access priv return rather than __number__ when this happens
83ccc4670477e7722d4654ca44b4b7004fcaada9	arm omap3 clock fix boot breakage in legacy mode the new usage of determine_rate and set_rate_and_parent calls for omap dplls assumes the dplls must have two parents defined even if it is the same clock legacy clock data did not fullfill this requirement and caused a boot crash fixed by adding the missing parent information to the dpll clocks
7b0a17f5f68a22b960a335dbfe7c1fd93a57506f	staging lustre llite check request null in ll_migrate check if the request is null before retrieve reply body from the request intel-bug-id reviewed-on
03078633a6eb86fdb6ea2f40e6352de4b1181bbf	drop qib_tune_pcie_caps and qib_tune_pcie_coalesce return values the callers of qib_tune_pcie_caps and qib_tune_pcie_coalesce dont check the return values so this patch drops the return values altogether
93ba73fed31d0ec96489fedaeef1a1c402f9c8e4	crypto qat fix constants table dma copy const_tab array into dma-able memory accesible by qat hw
cdc3d93257e162dd12906a6e0207436c2d5c6873	i40e ptp avoid aggregate return warnings aggregate return warnings are when struct types are returned and must be copied to the lvalue with a struct copy by the compiler this fixes warnings of type aggregate-return from gcc with change-id i896b1bf514544bf0faeb458869d79914b9f1b168
7f105d311869d80895c169ba90ebebded93b3867	remove warning about invalid irq for hot-added pcie ports for hot-added pcie ports on x86 platforms we always warned about an invalid irq pci __number__ device has invalid irq check vendor bios this was because we check before actually allocating the irq for the device which happens in this path pcie_port_device_register pci_enable_device pci_enable_device_flags do_pci_enable_device pcibios_enable_device on x86 pcibios_enable_irq this warning message isnt generated for pcie ports present at boot time because x86 arch code has called acpi_pci_irq_enable in pci_acpi_init for each pci device for safety bhelgaas changelog
67d35e70af9cabb663c827e03bc5c1e89b43db72	scsi libfc fix variable name in fc_set_wwpn the parameter name should be wwpn instead of wwnn
67c6b2ef2662b17cc2174f2bdc22a7cb818a8376	arm integrator move syscon remap for ap pciv3 the syscon remapping was done in the function rather than which is wrong is called before and the former also use the syscon base and cause a crash since it was not yet remapped
ede9c8e09192e8a073915ae2d7be56409bb69ddb	ath10k fix handling of wierd msdu chaining cases apparently firmware can sometimes report a sequence with the first rx descriptor saying its not the last msdu in that case msdu_chaining value could be overwritten saying its not a chained msdu this in turn led to skb_push panic as the frame could be treated as an a-msdu instead of a chained msdu
eabfdda93477f6ee5e153f560560e9cb1c617fd7	net switchdev change ageing_time type to clock_t the switchdev value for the switchdev_attr_id_bridge_ageing_time attribute is a clock_t and requires to use helpers such as clock_t_to_jiffies to convert to milliseconds change ageing_time type from u32 to clock_t to make it explicit
b1814a1def0564a2a1d3be7fa5bf7243ff899a28	dont add invalid voltage if atomctrl_get_voltage_evv_on_sclk_ai returns non zero fail in the expansion of the pp_assert_with_code macro the continue will actually do nothing so invalid voltage will be added to ppbable
ff34ed6d7889bb83b77dbc9216cd549f40b1bc8c	iio light vcnl4000 add missing locking
fc92805a8e25e5e2b0ba7c413cc15d9f05962ee8	fix dev_opp initial value dev_opp initial value shoule be err_ptr is_err is used to check error
d76ea24ac4c92e7e0700e047fcbf716c4de2b107	fix clock configuration selection we are currently using an inferior or equal operator for comparing the transfer frequency with the clock frequency table because of this we always end up selecting as a frequency due to the inequality transfer hz __number__ mhz being always true fix this by reversing the inequality which is how the comparison should be done
ba413ab2ccc49e6aa1ebc3523a75635b5e4a0494	avoid debug oops when reading a long symlink reading a symlink longer than the given buffer a p9_debug use would try to print the link name not nul-terminated using a format use instead and replace the with functionally equivalent
324e786ee39c70ffbdc280c34b7d2b6da5c87879	bluetooth fix nohz local_softirq_pending jukka reported about the following warning nohz local_softirq_pending __number__ i remember this warning and we had a similar issue when using workqueues and calling netif_rx see commit mac802154 fix nohz local_softirq_pending __number__ warning this warning occurs when calling netif_rx inside the wrong context non softirq context the net core api offers netif_rx_ni to call netif_rx inside the correct softirq context
01a4110d2b86b05918debf39c50867cbb9598491	ubi fix oops in error path this patch fixes an oops in the error path of ubi_attach_mtd_dev if anything after uif_init fails we get an oops in cancel_pending the reason is that uif_close drops the last reference count for and whole struct ubi_device is freed and then tries to access the ubi pointer and problems begin note in ubi_detach_mtd_dev function we get a device reference to work-around this issue do the same in the error path of ubi_attach_mtd_dev
164f3ef301bff9741a00ff7015f9d51f1b864201	crypto omap-aes add support for multiple cores some socs like contain multiple aes crypto accelerator cores adapt the driver to support this the driver picks the last used device from a list of aes devices forward ported to __float__ kernel
d383877db60bcc7fd02d1051a90e078d731dfb59	drivers hv vmbus get rid of an unsused variable the version variable while it is initialized is not used get rid of it
6ffd65154e23a4cf5d2da400e0fa7142a4474b98	usb gadget mv_u3d add check for dma mapping error mv_u3d_req_to_trb does not check for dma mapping errors found by linux driver verification project
8460c00f6e2fb8e05421a277fee62fe09803f7a7	netlink dont drop packet but consume it when we need to clone skb we dont drop a packet call consume_skb to not confuse dropwatch
62a041a4f58f32989460e37cb4f9aed5183f357f	cpufreq-dt defer probing if opp table is not ready cpufreq-dt driver supports mode when opp table is provided by platform code and not device tree however on certain platforms code that fills opp table may run after cpufreq driver tries to initialize so lets report if we do not find any entires in opp table for the cpu
4bceffbc26fab2444742db59c6f8124c29e41369	perf report postpone setting up browser after parsing options if setup_browser called earlier than option parsing the actual error message can be discarded during the terminal reset so move it after setup_sorting checks whether the sort keys are valid link
3f59007e8efc29bb6cce08329bf010bcd9b19101	arm shmobile sh73a0 add pin control device to device tree add a pfc node to the sh73a0 device tree and remove manual pinmux initialization from the corresponding board files
03de874aa76ac0adcf6f56ebf3de623d09a5dde3	fix without lbr this fixes a side effect of kans earlier patch to probe the lbrs at boot time normally when the lbrs are disabled is disabled too so for example doesnt work however this is not needed with pebsv2 and later haswell because it does not need lbrs to correct the ip-off-by-one so add an extra check for pebsv2 that also allows link
b21249c90e7ad8fce2234df98555c80c5f828c4f	add the plane4 related interrupt definitions
13ac3f5593cf0964cdb239864829e57cc6981dac	fix add_cea_modes style issues a few styles issues have crept in here fix them before touching this code again v2 constify arguments that can be ville v3 constify but better ville
f27c9298fd717e1f7e63e314a7a85a3a7e77139d	exportfs fix quadratic behavior in filehandle lookup suppose were given the filehandle for a directory whose closest ancestor in the dcache is its nth ancestor the main loop in reconnect_path searches for an is_root ancestor of target_dir reconnects that ancestor to its parent then recommences the search for an is_root ancestor from target_dir this behavior is quadratic in n and theres really no need to restart the search from target_dir each time once a directory has been looked up it wont become is_root again so instead of starting from target_dir each time we can continue where we left off this simplifies the code and improves performance on very deep directory heirachies i cant think of any reason anyone should need heirarchies a hundred or more deep but the performance improvement may be valuable if only to limit damage in case of abuse
6f546216e9f9e95d6783547ce6113eb13e2daa54	btrfs bulk delete checksum items in the same leaf very often we have the checksums for an extent spread in multiple items in the checksums tree and currently the algorithm to delete them starts by looking for them one by one and then deleting them one by one which is not optimal since each deletion involves shifting all the other items in the leaf and when the leaf reaches some low threshold to move items off the leaf into its left and right neighbor leafs also after each item deletion we release our search path and start a new search for other checksums items so optimize this by deleting in bulk all the items in the same leaf that contain checksums for the extent being freed
1523c310b3ed964b71a8db16f70c3bc21cc0642e	add min freq control to debugfs this makes for easier benchmarking and testing one can set a fixed frequency by setting min and max to the same value v2 fix whitespace comment eugeni
193177de4ff8b7b8a654b198611ba774c345f15c	alsa add two codecs alias name for dell add alc3235 alc3263
cc8e8342930129aa2c9b629e1653e4681f0896ea	ceph fix mds cluster availability check we should apply the check after getting the initial mdsmap link
eef24afb28561a5a9f4be8f8da97735b7e6a826f	irq fix check for already initialized irq_domain in irq_domain_add the sanity check in irq_domain_add tests null or null this prevents adding an irq_domain to a irq descriptor when irq_data exists which true when the irq descriptor exists this went unnoticed so far as the simple domain code did not enter this code path because is always __number__ for the simple domains split the check for irq_data null out and have a separate warning for it tglx made the check for irq_data null separate link
f6f80340308cdcb84db45d3abf95f23d5b66051d	reduce amount of messages for specific errors whenever a request has been aborted internally by the driver there is no sense data to be had and printing lots of messages stalls the system so better to print out a short one-liner
75d5d8156500cd3833d66806889372e294af514d	dm use bvec_iter for dm_bio_record this patch doesnt itself have any functional changes but immutable biovecs are going to add a bi_bvec_done member to bi_iter which will need to be saved too here
6052f7fbce857e327218a9d8a040e210ea7cc718	macsec fix sa initialization the async flag prevents initialization on some physical machines
0c1a98c81413e00a6c379d898e06a09350d31926	btrfs fix the file extent gap when doing direct io when we write some data to the place that is beyond the end of the file in direct mode a data hole will be created and btrfs should insert a file extent item that point to this hole into the fs tree but unfortunately btrfs forgets doing it the following is a simple way to reproduce it mount touch dd umount btrfsck root __number__ inode __number__ errors __number__
80b2502cea34a965a6b3390691854e753945ca5f	usb gadget introduce is_selfpowered for usb_gadget whether the gadget is selfpowerwed or not can be determined by composite core so we can use a common entry to indicate if the self-powered is supported by gadget and the related private variable at individual udc driver can be deleted
175fa9a7a87af9e46329f80e8fb10968e9bb0ed4	remove unused function declerations rtl8188eu_recv_hdl and rtl8188e_query_rx_phy_status doesnt used
d576c7558616e3c096fca1f21531e1e50d2f27ca	do not return a error in remove function in the linux device driver model the remove callback is not allowed to fail and the device will be removed regardless of the return value of the remove callback so if we abort in the remove function and do not free all resources we will create a resource leak also all kinds of undefined behaviour are expected to happen since the iio device is still there while its parent is already gone the error which the driver tries to handle in the remove function is non-critical so we can just ignore it and continue to free all resources and remove the iio device
3702ce6ed71cd60451ab278088863456dcb0dd99	xfs verify agi blocks as they are read from disk add an agi block verify callback function and pass it into the buffer read functions remove the now redundant verification code that is currently in use
aff5c3557cf72fcad913d8b4b44b055a4e034bb5	net sun4i-emac remove redundant platform_set_drvdata commit device-core ensure drvdata null when no driver is bound removes the need to set driver data field to null
1cd3f2d2c99892209c4751155ae56ff18b1b253e	serial bfin_uart dont switch baud rate untill the transfer buffer is empty set_termios may be invoked before the former data transfer is completed block until the tranfer is done
1c99e299ba62f72b24e8ec2f4436f574d7433f11	remove deprecated create_singlethread_workqueue the workqueue ib_nl queues work items and it has been identity converted wq_mem_reclaim has been set to ensure forward progress under memory pressure
195ca3b122c02cf21ce64f211d9474600da80e80	ath9k reduce listen time period when we have downlink traffic alone and the station is going thru bgscan the client is out of operating channel for around which is too long the mac80211 decides when to switch back to oper channel based on tx queue bad latency and listen time as the station does not have tx traffic the bgscan can easily affect downlink throughput by reducing the listen time it helps the associated ap to retain the downstream rate
ae82a8d06fee573def55b63868b1ea109461a531	nfsd41 check the size of request check in sequence that the request doesnt exceed maxreq_sz for the given session
71b540adffd9832e025dd9401178a8ef8c814e50	dont escalate non-existing frozen pe commit escalate error on non-existing pe escalates the frozen state on non-existing pe to fenced phb it was to improve kdump reliability after that commit reset phb in kdump kernel was introduced to issue complete reset on all phbs to increase the reliability of kdump kernel commit becomes unuseful and it would be reverted
47c565ea8d65d74f8030f59898682b461438a169	staging sm750fb add identifier to function definition argument added pinit_param as the identifier to function definition argument struct initchip_param and this patch fixes the checkpatch issue
b991f9b77c029135f6e0d1d5d16869ebf755c4c0	usb musb dsps add to wrapper rx_mode and tx_mode need to be read at suspend time and restored on resume for dsps platforms so add it to the wrapper struct first and initialize the values
14141a9352d007434ff61df1e16a2bcaf3119307	gpio simplify gpiochip_export for some reason gpiochip_export would invalidate all the descriptors of a chip if exporting it to sysfs failed this does not appear as necessary remove that part of the code while we are at it add a note about the non-safety of temporarily releasing a spinlock in the middle of the loop that protects its iterator and explain why this is done
e6707218f77bc850f41720dc70d3d4a0dce9ef4a	when resume failed return error to avoid system hang continuing if the gpu fails to resume will end in pain
632c928a6a77fe96cda34a9978e1f6019ffc38f4	sctp move the percpu sockets counter out of sctp_proc_init the percpu sctp socket counter has nothing at all to do with the sctp proc files and having it in the wrong initialization is confusing and makes network namespace support a pain
4a1b09b79b07cf70c72a091e8fe0660f68541f30	asoc fsi bugfix correct dma area fsi driver is using dma_sync_single_xxx but the dma area was not correct this patch fix it up
b59278548e2383976f7db5fd3389f9116a6f240d	emev2 gpiolib enable support for of emev2 is now a dt platform however the gpio driver cannot be used from a dt file since it does not fill out the of_node field in its gpio_chip structure
4a62361f825325bd6dd228d3c05e254d40f74e47	media v4l omap4iss translate to translating to is invalid the correct ioctl return value is
86d3798af0e687f40036cd12bfba8d6386188b03	bypass psp for vf bypass psp block for vf device
1a71476e4f2693ed93523c80ff1e2d4a8634717c	bpf tools fix syscall argument coverity flagged this under cid __number__ as a sizeof mismatch it turns out that the argument attr passed to syscall should have been a pointer to attr in the first place reported-by coverity cid __number__ link
b592443d9045f0880eb4d8cc9125075744db4b9e	pci add debug print out for add_size for use in debugging resource reallocation
949aa64ff90d9a9b3aae13bb5a8247614adf4600	tty fold pty pair handling into tty_flush_works perform work flush for both ends of a pty pair within tty_flush_works rather than calling twice
4be01a2935fa3d745e023011cef3dd70e88f15f9	input twl6040-vibra pass the irqf_oneshot flag since commit genirq reject bogus threaded irq requests threaded irqs without a primary handler need to be requested with irqf_oneshot otherwise the request will fail so pass the irqf_oneshot flag in this case the semantic patch that makes this change is available in
968a47836c7f9dc6a3987f846bb7e095d30b86ec	lp8788-charger use consumer device name on setting iio channels to get the adc value for the battery voltage and temperature lp8788 adc driver is used lp8788 charger driver is the consumer of lp8788 adc driver thus specific adc driver name is required on getting the channel using iio_channel_get
755b82aa2fdb62a61990f6c132df150abd9e9206	bluetooth access hidp session addresses through l2cap channel the l2cap socket structure does not contain the address information anymore they need to be accessed through the l2cap channel
e6fcfb57c6f7cac1dc44cbb4e0cda5d6eef64fe0	usb dwc2 gadget add dma descriptor status quadlet fields add device mode dma transfer descriptor status quadlet field notations
f354169e0f7dcd1b2c82cf1f98f6d976e85f74c3	hwmon pwm-fan update the duty cycle inorder to control the pwm-fan pwm_config must be called with a duty cycle of __number__ prior to calling pwm_disable to ensure that the pwm signal is set to low
6485dec577e8be36bae2c21484cee8b905fe81a3	input ad7879-i2c remove redundant module_alias module_device_table will setup the module alias for us thus adding module_alias for an entry already in module_device_table is redundant
c7258d8637be2ac1e4cbf276ac5145da456303d0	qeth fix rx checksum offload handling ethtool is used to change some device driver features such as hardware checksum offloading the qeth device driver callback function to turn rx hardware check sum handling never changes the hardware configuration the netif_f_rxcsum bit is cleared when the feature bitset type netdev_features_t64bit is assigned to __number__ a bit variable this patch fixes the netif_f_rxcsum handling also there is no need to manipulate the devices features bit set as this is done by the caller when no error occurs
4248f7f121b755b272a3c77a1a5601faa6004350	mips ralink copy the commandline from the devicetree this is a regression caused by commit afb46f7996e91aeb36e07bc92cf96e8045bec00e author rob herring kernel.org date wed apr __number__ __number__ mips ralink convert to use unflatten_and_copy_device_tree make the of init code reuse the cmdline defined inside the dts patchwork
455a9a60b6d4afb293b0e63ec75cc8e82912a767	watchdog wdt_pci fix build error if define software_reboot to fix following build error when software_reboot is defined cc m in function wdtpci_interrupt error too many arguments to function emergency_restart emergency_restartnull in file included from note declared here extern void emergency_restartvoid
a981b29f027ace1b27fb4a96cef6cbfee49dbdd7	arm at91 pit use consistent exit path in probe the current probe code is whenever it fails to retrieve a resource either panicing silently returning or returning and displaying an error make the code consistent by always panicing whenever it fails to grab any resource
111b62e48139767a42fc87b422f39b5909c27ac6	staging comedi adl_pci6208 add whitespace to the subdev init add whitespace to the subdev initialization and remove the unnecessary comments to improve readability
0c0becd0269240cd832b7aac16fb9b48d067520e	hwrng atmel use devm_clk_get use devm_clk_get to make cleanup paths simpler
a17164e54bf0e3c2cbc72c35b9f67c2873a122dd	remove obsolete this patch replaces usages of obsolete simple_strtoul with kstrtoint in xfs_args and suffix_strtoul
5635fd0ccf4ce90a9ecf8fa48f5f031f5f73e6f5	move dereference after null check we dereferenced and before checking for null
12b134df4e42ea1ac141388e563346777f8a1605	split out reading of hsw watermark latency values move parsing of mch_sskpd to a separate function well add other platforms there later note chris spotted an empty struct initializer and wondered whether that is hiding a compilier warning ville explained that it should have been part of the patch that extends this function to which dont have all levels hsw has ive figured its ok to keep it here with a small note danvet add note about the ominous struct initializer
0aec7ac997b784dfc83125cd120d2bd5d3851eb6	mtd nand remove in vain memset in nand_onfi_get_features as all four bytes are written in any case the memset is in vain
2fca9ca0d6fb172ab4c01f506fc864f2881b6f80	media smiapp split off sub-device registration into two remove the loop in sub-device registration and create each sub-device explicitly instead
ef319c6e095676e0247fd24ef8ff7f085c19744f	omapdss hdmi fix returned hdmi pixel clock hdmi_get_pixel_clock returns the pixel clock in hz but the pck is stored as khz this means the return value has to be multiplied by __number__ not by __number__ as the code did
e44bf6b7a50e331a1a97c23d726e39726b914dc8	validate buffer enqueue requests as for now there is no validation of incoming buffer enqueue request as far as the gem buffers are being concerned this might lead to some undesired cases when the driver tries to operate on invalid buffers wiht no valid gem object handle add some basic checks to rule out those potential issues mszyprow rebased onto and adapted to recent ipp changes
a48e1258b43fcd00ba0c273cd75c27003191e05e	staging comedi das16 use helpers use the new helpers in the step __number__ tests of das16_cmd_test
69163089384b93946133fa1b5153791797b8db44	staging comedi adv_pci1723 sample types are unsigned sample values in comedi are generally represented as unsigned values change the element type of the ao_data member of struct pci1723_private from short to unsigned short for consistency
260bbce403e2ac601b422fd926f48b9924051f92	nbd restructure sock_shutdown this patch restructures sock_shutdown to avoid having the main code path in an if block
7f3c6e6b905018d07228fe0f43f0ef1359e7196d	ibmvnic set real number of rx queues along with __number__ tx queues __number__ rx queues are allocated at the beginning of device probe however only the real number of tx queues is set configure the real number of rx queues as well
6f2c9bd85eee30fd77e6c65c097769ad0d6d7352	net gianfar fix reference counting for phy_node the line before the changed if condition is of_parse_phandlenp phy-handle __number__ if this call succeeds must not be overwritten in the if block otherwise the reference to the node returned by of_parse_phandle is lost so add a check that the if block isnt executed in this case furthermore in the fixed phy case no reference is aquired for phy_node resulting in an of_node_put without holding a reference to fix that get a reference on the mac dt node
c60fb074c0baef6b0ca259dafe2371a24f3f8c1f	sn remove sn_pci_window_fixup currently pcibios_bus_to_resource and pcibios_resource_to_bus functions use pci_host_bridge_window in pci_host_bridge to translate bus side cpu side addresses pci_window in pci_controller under ia64 is no used again so its no need to use sn_pci_window_fixup to setup pci_window again remove it
e7d87687cbe9d94b2d3799dd31681b87adee84be	staging iio gyro remove on function name to conform to similar iio drivers remove from function pointers to conform to the style preferred in iio note that this is fine in staging drivers but would create too much churn to do outside of staging unless otherwise working on a driver done using the following semantic patch identifier f identifier f
95ad7ff3890320c2b881cc6e3d1d00a77ae1a8f5	media filter noop ch_range events if modify_range is called but no range is changed do not send the ch_range event
71f9f08103cb02f3d5bfad91cb570dcd2d8ed0cb	input lpc32xx_ts check for clk_prepare_enable error clk_prepare_enable may fail so we better check its return value and propagate it in the case of error
e91cbb42531626cd4fd0673ca01daf53e338d8f9	memcg swap mem_cgroup_move_swap_account never needs fixup the need_fixup arg to mem_cgroup_move_swap_account is always false so just remove it
398c33aaa4edb05339fed3720847ea6a06987ff1	nfsd convert nfs4_alloc_stid to use idr_alloc_cyclic
95ea90db019561450826ac32d8341f5735c78eee	n_tty only process packet mode data in raw mode packet mode can only be set for a pty master and a pty master is always in raw mode since its termios cannot be changed
1d55b768c6f5c6a0461a31ae33c0b2bdb686562d	usb remove err usage err was a very old usb-specific macro that i thought had gone away this patch removes it from being used in the driver and uses dev_err instead
19118eb8dc3cd6bb1b1fdf0e4ad62070c6683158	asoc omap-dmic correct functional clock name we should really use fck when asking for the functional clock and not dmic_fck this way we can ensure that multiple dmic modules can exist in the system
dc9d8887408ac3dfd907b826c5dfdfe953c21a0f	remove use of regmap_irq_get_virq using platform_get_irq_byname to retrieve the irq number returns the virq number rather than the local irq number for the device passing that value then into regmap_irq_get_virq causes a failure because the function is expecting the local irq number __number__ __number__ __number__ __number__ etc this patch removes use of regmap_irq_get_virq to prevent this failure from happening
27f17580fd2c7514c8f5cce22ab903c6f3ddf458	sched delete is_same_group outside config_fair_group_sched since is_same_group is only used in the group scheduling code there is no need to define it outside config_fair_group_sched link
9cdf838b3a25b3cf939c7d71c3d10823d7bbab6c	staging dgnc dgnc_tty remove a prohibited space remove a prohibited space before a closed parenthesis of if statement to meet kernel coding style
fd9980c761d4ea15a51ce2aaf5dd9dddc299519e	serial omap remove omap_uart_sysc_reset and omap_uart_fifo_clr omap_uart_sysc_reset and omap_uart_fifo_clr are unused remove them
4a8bb7f54860a3241b177bdeb06bb880151a23dc	ps3-vuart dont use prepare_work prepare_delayed_work are being phased out they have few users and a nasty surprise in terms of reentrancy guarantee as workqueue considers work items to be different if they dont have the same work function ps3_vuart wasnt overriding the work item with multiple work functions but was using null for init_work and then single prepare_work to set the work function we can simply invoke init_work with the work function and remove the prepare_work usage it would probably be best to route this with other related updates through the workqueue tree geoff tested on ps3 decr-1400
a2e5a3e2f8cc48cc9ed10a919ae582ab0222da80	fix spelling mistake exeeds exceeds trivial fix to spelling mistake in drm_error error message
8c62b4e118cfa7a3c906c01d4ba2c78a5bd97531	mtd ofpart dont complain about missing partitions node too loudly the ofpart partition parser might be run on dt-enabled systems that dont have any ofpart partition subnodes at all since ofpart is in the default parser list so dont complain loudly on every boot example using with no intent to use ofpart status okay compatible reg i see this warning __float__ m25p80 gd25q32 __number__ kbytes __float__ partitions subnode not found on __number__ trying to parse direct subnodes as partitions
91a32269e31282405db405b9ec9ce1a30568e4b0	nfc define secure element connectivity and transaction events the se_connectivity event is for an se to request connection to a modem the se_transaction one is sent when an application running on a specific se wants to notify the host cpu about the end of a transaction those events respectively map to the evt_connectivity and the evt_transaction hci events
40189b0c6551359a9268c8d6f730914b28623817	fix missing newline add a missing newline at the end of a drm_info message
49a4fc20df7fced31ffe4038b32b86a0438d1c27	iwlwifi dont modify the timer if we dont tx in fragmentation we dont update the write pointer of the hw immediately so we shouldnt modify the timer in that case
5c6b3e7725384f02418d80e7dc32b1a690497004	dma imx-dma used uninitialized is used for dev_warn before it was set
ebacfd1ece3bfa46296fc92c6f996cb5f7fc75e6	adjust for prototype change this commit fixes the following warning warning initialization from incompatible pointer type enabled by default warning near initialization for enabled by defaula
c81c9c3e0fd5170e7bede7d06202062338644e93	staging most consolidate code the function drci_rd_reg always delivers little endian representation of the dci register the value returned by this function must always be carefully converted from __le16 to u16 type this patch moves all those conversions to the function itself
ef45eae6e9f6af297c0cd0bfb98c85f3f51e96be	simplify the fifo assignment by using macros the omap mailbox ip has two different type of interrupt configuration registers between socs and socs simplify the current interrupt configuration by using a single macro that translates the two variants
5cf6fa784a979dce59a5c1b7085e59ee130369e8	ath9k_htc add device id for sony uwa-br100 for more details please take a look at
947df02d255a6a81a3832e831c5ca02078cfd529	libnvdimm pmem clean up resource print request the leading in front of is redundant also we can just use to simplify the print statement the request parameters can be directly taken from the resource as well
469738e675524b6aa029ecd46bdda3f878b12eff	xen-blkfront plug device number leak in xlblk_init error path though after a failed xenbus_register_frontend all may be lost
29cdecabe22fbf5806ec64d12954b795ba248b77	arm dss-common dont use reset_gpio from omap4_panda_dvi_device gpio reset info is passed to the tfp410 panel driver via the panels platform data struct tfp410_platform_data the tfp driver doesnt use the reset_gpio field in the omap4_panda_dvi_device struct remove this field
83d4ca8148fd9092715fd8ef75b30bbfd67fd2a9	mm page_alloc move __gfp_hardwall modifications out of the fastpath __gfp_hardwall only has meaning in the context of cpusets but the fast path always applies the flag on the first attempt move the manipulations into the cpuset paths where they will be masked by a static branch in the common case with the other micro-optimisations in this series combined the impact on a page allocator microbenchmark is decstat-v1r20 micro-v1r20 min alloc-odr0-1 __float__ __float__ min alloc-odr0-2 __float__ __float__ min alloc-odr0-4 __float__ __float__ min alloc-odr0-8 __float__ __float__ min alloc-odr0-16 __float__ __float__ min alloc-odr0-32 __float__ __float__ min alloc-odr0-64 __float__ __float__ min alloc-odr0-128 __float__ __float__ min alloc-odr0-256 __float__ __float__ min alloc-odr0-512 __float__ __float__ min alloc-odr0-1024 __float__ __float__ min alloc-odr0-2048 __float__ __float__ min alloc-odr0-4096 __float__ __float__ min alloc-odr0-8192 __float__ __float__ min alloc-odr0-16384 __float__ __float__
164167794c1f9f34264e3d9281385728b0d22018	tipc fix bug in broadcast retransmit code in commit tipc use generic skb list apis to manage link transmission queue we replace all list traversal loops with the macros skb_queue_walk or skb_queue_walk_safe while the previous loops were based on the assumption that the list was null-terminated the standard macros stop when the iterator reaches the list head which is non-null in the function bclink_retransmit_pkt this macro replacement has lead to a bug when we receive a bcast state_msg we unconditionally call the function bclink_retransmit_pkt whether there really is anything to retransmit or not assuming that the sequence number comparisons will lead to the correct behavior however if the transmission queue is empty or if there are no eligible buffers in the transmission queue we will by mistake pass the list head pointer to the function tipc_link_retransmit since the list head is not a valid sk_buff this leads to a crash in this commit we fix this by only calling tipc_link_retransmit if we actually found eligible buffers in the transmission queue
39198ec98751477313f30569b935503b216f85d0	net lpc_eth remove irq nr_irqs check from probe if the driver is used on an arm platform with sparse_irq defined semantics of nr_irqs is different minimal value of virtual irqs and by default it is set to __number__ see this value may be less than the actual number of virtual irqs which may break the driver initialization the check removal allows to use the driver on such a platform and if irq controller driver works correctly the check is not needed on legacy platforms fixes a runtime problem lpc-eth __number__ error getting resources lpc_eth lpc-eth not found
9bc30b3a7951a2568817a8c8024e6bdc469e305e	fix locking bug on error path this was reported by dan carpenter when we error with an imx __number__ we dont release the lock and the sensor would then hang
78bb2abe09d6bd15eeee7250f2fa0cb76432a8a2	of do not use in front of
88481b6b33d6cb5edb57e5794abae4daeabd08c5	perf tools remove warnings on jit samples for srcline sort key when using the srcline sort key with perf report i see many lines of warning related to jit samples like below addr2line no such file since its not a elf binary and doesnt provide such information just use the raw ip address link
1848a057a29f74d2a0517c5123a281002739ba31	mtd nand gpmi get correct free oob space change the way to calculate pagesize to get correct free oob space for legacy_set_geometry function
0a29b3dafbb2fc46421cc2950523814c7c6c8bfb	net bcmgenet fix compile warning bcmgenet_wol_resume is only used in bcmgenet_resume which is only defined when config_pm_sleep is enabled this leads to the following compile warning when building with warning defined but not used since bcmgenet_resume is the only user of bcmgenet_wol_resume fix this by directly inlining the function there
c21fbff16b5d43d608966a2963fb248bebce257f	kvm rename __kvm_io_bus_sort_cmp to kvm_io_bus_cmp this is the type-safe comparison function so the double-underscore is not related
05d694ea0daa2e442191a2128aaec78635823f08	powerpc add length setting to set_dawr currently we set the length field in the dawr to __number__ which defaults it to one double word which is the same as the dabr change this so that we can set it to longer values as supported by the dawr
aec9e12953e777f62acdab069656ebd9bcb6c9ba	fix error handling paths in fbdev driver set up error handling in mgag200_fbdev_init and mgag200fb_create such that they release the things they allocate rather than relying on someone calling mga_fbdev_destroy based on a patch by sudip mukherjee link
6eb4e2b41b264f57ee02d16ee61683952945484d	selinux fix error code in policydb_init if hashtab_create returns a null pointer then we should return but instead the current code returns success
103cdd1d59e1ab6abccb049093239cc8e6295816	gianfar ethernet vanishes after restoring from hibernation if a gianfar ethernet device is down prior to hibernating a system it will no longer be present upon system restore for example ifconfig eth0 down echo disk a restore from ifconfig eth0 up siocsifflags no such device this happens because the restore function bails out early upon finding devices that were not up at hibernation in doing so it never gets to the netif_device_attach call at the end of the restore function adding the netif_device_attach as done here also makes the gfar_restore code consistent with what is done in the gfar_resume code
5cac2f4d1c5f3eb3d981fab85d926d19f7b6b889	input evdev use ktime_mono_to_real convert the monotonic timestamp with ktime_mono_to_real in evdev_events in evdev_queue_syn_dropped we can call either ktime_get or ktime_get_real depending on the clkid no point in having two calls for clock_realtime
396178370b9dc20275811dcc3b607c5af70689ba	alsa fireworks small leak on error path there was a typo here so we return directly instead of freeing hwinfo
ace120dcf23b3bbba00d797a898481997381052f	thermal fix lockup of cpu_down commit f1a18a105 thermal cpu package temperature thermal had code that did a get_online_cpus run a loop and then do a put_online_cpus the problem is that the loop had an error exit that would skip the put_online_cpus part in the error exit part of the function it also did a get_online_cpus run a loop and then put_online_cpus the only way to get to the error exit part is with get_online_cpus already performed if this error condition is hit the system will be prevented from taking cpus offline the process taking the cpu offline will lock up hard removing the get_online_cpus removes the lockup as the hotplug cpu refcount is back to zero this was bisected with ktest
e366f45d36275b80a5615c68123c88a3de75cc22	rtl8xxxu switch to use new rtl8xxxu_init_queue_reserved_page routine this changes the pub-queue value written to req_rqpn however the old code used a hard coded minimum value assuming there would always be an active lo-queue even when no usb ep was found for it
afbac60b0c535189a76855a04d85492cf2d992e1	input omap-keypad clear interrupts on open according to trm the recommended way for keyboard controller initialization is clear the interrupt-status register then set up certain keyboard events for generating an interrupt request and set up expected source of wake-up event that generates a wake-up request
6d33a9a658f73e15ab41ddcfe36f4b774207ef1d	ath10k fix tx status clearing too much of tx info was being cleared this caused issues in some setups with tx frame status reporting this should fix some cases of stations not being able to associate to ath10k ap
b80c043327ea4faac62a329a1d35f16c47a5128e	drbd the minor_count module parameter is only a hint nowadays the max of minor_count is __number__ in drbdadm count the number of minors instead of finding the highest minor number no longer us the magic in the init script
491c04eb86c768f61678fe7169ff13ce57dadef9	asoc wm8988 replace direct snd_soc_codec dapm field access the dapm field of the snd_soc_codec struct is eventually going to be removed in preparation for this replace all manual access to with snd_soc_codec_get_bias_level
e3f879bf1ea3e03f433d292b0114807785f0754b	unreachable code in nvme_abort_req removing unreachable code from nvme_abort_req as nvme_submit_cmd has no failure status to return
f5e38b9284e13e28c1ef00e508238f279cf0ac3a	lib crc32 constify crc32 lookup table commit sections fix const sections for crc32 table removed the compile-time generated crc32 tables from the ro sections because it conflicts with the definition of __cacheline_aligned which puts all such aligned data into section optimized for wasting less space and can cause alignment issues when used in combination with const with some gcc versions like due to a gcc bug __number__ given that most gcc versions should have the fix by now we can just use ____cacheline_aligned which only aligns the data but doesnt move it into specific sections as opposed to __cacheline_aligned in case of gcc versions having the mentioned bug the alignment attribute will have no effect but the data will still be made ro after patch tables are in ro nm grep __number__ t arch_local_irq_enable __number__ r crc32ctable_le __number__ t crc32_exit __number__ t test_buf __number__ r crc32table_be __number__ r crc32table_le __number__ a __crc_crc32_be __number__
0ff18e3734c248fa516b4be942b1196832ee936c	kobject show debug info on delayed kobject release useful for locating buggy drivers on kernel oops it may add dozens of new lines to boot dmesg debug_kobject_release is hopefully only enabled in debug kernels like maybe the fedora rawhide one or at developers so being a bit more verbose is likely ok
4951cc9083147015338f61a187e072daf02dfd4e	virtio_balloon dont crash if virtqueue is broken a bad implementation of virtio might cause us to mark the virtqueue broken well dev_err in that case and the device is useless but lets not bug
9eb3a75276892b01026489096c670a30bcc66252	add support for power wells this defines the registers used by different power wells
7d84f66f22cb511b7cb7602b2a9dab20c8906da7	leds convert s3c24xx led driver to gpiolib api the calls are obsolete and have been scheduled for removal since several kernel releases remove them and use common gpiolib api instead this patch also adds call for api corectness it is a prerequisite for removal of the s3c24xx soc specific header tested on micro2440-sdk
e9c03d18c4291c4351d6b9f74bd1278a761015a2	iwlwifi increase scan timeout when the first interface is active then scanning on it or the second interface can take a little longer than i observed around bump the timeout to to avoid aborting a scan that is still running just taking more time
c11592fea04901920236859898f5bc82b6c1a2f1	use pcie_get_readrq and pcie_set_readrq to simplify code use pcie_get_readrq and pcie_set_readrq functions to simplify code
c73428230d98d1352bcc69cd8306c292a85e1e42	support device fw version string and remove sysfs entry in favor of the common code
06ed5512a26347f7b570295c68d48f0369bdb754	print machine type on facility mismatch if we have a facility mismatch the kernel only emits a warning that the processor is not recent enough and stops operating this doesnt give us a lot of an idea of what actually went wrong as a first step print the machine type in addition
dda444d52496aa8ddc501561bca580f1374a96a9	cfg80211 disable csa for all drivers the channel switch announcement code has some major locking problems which can cause a deadlock in worst case a series of fixes has been proposed but these are non-trivial and need to be tested first therefore disable csa completely for __float__
451d43ad44b00bd6d518254086378464ffef96ef	media media coda fix sizeimage setting in try_fmt vidioc_try_fmt would incorrectly return bytesperline height instead of width height __number__ __number__
37f07655522042399db7a4b54aee830bdb52ce2c	x86 kill tif_debug because it is not used
385384a82cb4d9d1725330fde293877c36c1dba2	wrap the protected active rcu dereference in a helper as we do the lockdep protected rcu lookup in a couple of places refactor that code to a common helper i915_gem_active_raw
be33465e58ab3a3300c5182844d45c67e73b15e0	asoc dwc remove unnecessary debug messages and tests the devm_xxx allocation functions print a message on failure so additional messages are not required
4501980aae221ed8120dee3491f799ecd75187ad	convert to pr_foo it fixes some wordwrappings and adds some consistency
dbee7169742e81e42bcef0bbc6c42b20d4f665f0	mips smp kill redundant call of generic_smp_call_function_single_interrupt since commit smp make smp_call_function_many use logic similar to smp_call_function_single generic_smp_call_function_single_interrupt is an alias of generic_smp_call_function_interrupt so kill the redundant call patchwork
805166783893651e3352ee9e68ad5d0b68a769f1	mips bcm63xx make crc fields integers all crc32 fields are __number__ bit integers so define them as such to prevent unnecessary casts if we want to use them
c23600a688dc71f4312f83cb0f23a736e1578a5e	i2c add flags field to omap i2c platform data omap i2c driver can access the configuration flags through its platform data
9603cded0e2cef003a822985d84b5daff1c7232f	alsa cmipci remove a stray space character
82b22ac8f651aebbf0149cbbbd5808f07753b09c	btrfs check cap_dac_read_search for btrfs_ioc_ino_paths cap_dac_read_search overrides read and search permission check on file and directory it seems fit for btrfs_ioc_ino_paths
9e8cda3ba84e1b85ff11b5d31ac80a753e7f9547	ipv6 convert use of typedef ctl_table to struct ctl_table this typedef is unnecessary and should just be removed
3abfce77f7229116fa56aedfe3b79ce5ccde3d72	writing proper check for reading of pipe status reg
d42fd29769f52c056032bbf1b9b2d1d914fd145a	media media rc nuvoton-cir fix interrupt handling only handle an interrupt if at least one combination of event bit and related interrupt bit is set previously it was just checked that at least one event bit and at least one interrupt bit are set this fixes issues like the following which was caused by interrupt sharing an interrupt intended for nvt_cir_isr was handled by nvt_cir_wake_isr first and because status bit cir_wake_irsts_ir_pending was set the wake fifo was accidently cleared this patch also fixes the bug that nvt_cir_wake_isr returned irq_handled even if it detected that the shared interrupt was meant for another handler
2c54c86a674979e2bd9dc3663d329ee56368a218	hid hid-input simplify conditional expression there are too many bangs in this conditional therefore remove them while still maintaining the same logic
7aa189c8f57f2141b8655c2a13c7486d0844d490	quieten warning the isnt mandatory so we shouldnt print a high priority error message when missing one example where we see this is qemu reduce it to pr_debug
63a1a3d820c619a4dab1781cc16c110a284efded	perf hists browser fix off-by-two bug on the first column the commit perf hists separate overhead and baseline columns makes the overhead column no more the first one so it resulted in the mis-aligned column in the normal non-diff output link
d7f7633557503bd231347d8896b9a6fb08f84e00	force relocations via cpu if we run out of idle aperture if we run out of enough aperture space to fit the entire object we fallback to trying to insert a single page however if that also fails we currently fail to userspace with an unexpected enospc enospc means to userspace that their batch could not be fitted within the gtt prior to commit e8cb909ac3ab fallback to single page gtt mmappings for relocations the approach is to fallback to using the slow cpu relocation path in case of iomapping failure and that is the behaviour we need to restore bugzilla
627c89b4d7c0a916b7702e23ded6e063dcb14ad5	gpio omap fix missing raw locks conversion fix below build warning cc in function omap_gpio_irq_type warning passing argument __number__ of spin_unlock_irqrestore from incompatible pointer type enabled by default note expected struct spinlock_t but argument is of type struct raw_spinlock_t
3c3da12d3174891f61f0f2c672da095562f19b92	bfa fix for crash when bfa_itnim is null fix a very corner case when the port gets disconnected and the bfa and fcs layers clean up references to the it nexus during this window if a task management command is issued by the scsi-ml and ends up referencing a null itnim it could lead to a crash
5649ce429e81b77919c0029a02edf44df3be7797	iwlwifi use kmemdup instead of
bfcba2d0352f7916e98a1cec54c1c2473da6f4d6	ext4 remove an unnecessary check for null before iput the iput function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
34e684fa04fadd513e028fa48123f357deac77e8	asoc fsl use correct format string for dma_addr_t we get a warning for the imx-pcm-fiq driver when config_lpae is enabled on arm because dma_addr_t is then in function snd_imx_pcm_mmap warning format expects argument of type unsigned int but argument __number__ has type dma_addr_t long long unsigned this changes the printk to use the correct format string for printing a dma_addr_t
21c561bda17a67afe923866cf88653637abf6e7a	x86 use unflatten_and_copy_device_tree use the common unflatten_and_copy_device_tree to copy the built-in fdt out of init section
e844e6d5b33907f2a12b1aa33ee63f65b452506c	staging rtl8188eu remove function with empty defination
5fa836a9d85975c5f0f1219669523c1f0ac64349	dp link training optimization this patch adds dp link training optimization by reusing the previously trained values v2 rebase v3 rebase v4 when hpd long pulse is received the flag is cleared that indicates if dp link training is required or not based on sivakumars comment
11550dc0a00b793236e8dedcf1f489f4627ddf7e	reuse crashkernel parameter for fadump memory reservation fadump supports specifying memory to reserve for fadumps crash kernel with fadump_reserve_mem kernel parameter this parameter currently supports passing a fixed memory size like only this patch aims to add support for other syntaxes like range-based memory size which allows using the same parameter to boot the kernel with different system ram sizes as crashkernel parameter already supports the above mentioned syntaxes this patch deprecates fadump_reserve_mem parameter and reuses crashkernel parameter instead to specify memory for fadumps crash kernel memory reservation as well if any offset is provided in crashkernel parameter it will be ignored in case of fadump as fadump reserves memory at end of ram advantages using crashkernel parameter instead of fadump_reserve_mem parameter are one less kernel parameter overall code reuse and support for multiple syntaxes to specify memory link
b627488c19451439de9ec8a7bf2fa1649110fc1b	usb remove dbg tracing calls dbg was used a lot a long time ago to trace code flow now that we have ftrace this isnt needed at all so remove these calls
4abb6ad9eae0aebfcec4f188a408447cc4ea1cb4	gfs2 inline __gfs2_glock_schedule_for_reclaim since function gfs2_glock_schedule_for_reclaim is only two significant lines we can eliminate it simplifying the code and making it more readable
6bf79cdddd50e90cbba7471623c129dadf9c873b	vmxnet3 use netdev_rss_key_fill helper use of well known rss key increases attack surface switch to a random one using generic helper so that all ports share a common key
8c763c9b1072c91aac90e5bc0a2ac2220a6980d7	balance irq refcount on failure if create_crtc fails in vop bind ensure the irq refcount is zeroed back out before exiting
15ac0778a65322c8c39eb2a6636218554d348690	ath6kl remove false check from ath6kl_rx dan found a check from ath6kl_rx which doesnt make any sense at all __number__ if status htc_hdr_length is a pointer this pointer math is always going to be false should it be testing htc_hdr_length or i dont know what the check really was supposed to do but i think dans guess is right fix it accordingly
2bb5e840e873f8778a41801141771f54f547fa65	uprobes introduce free_ret_instance we can simplify uprobe_free_utask and handle_uretprobe_chain if we add a simple helper which does and returns the return_instance link
d976f7626627117c211137cd2aaf8c1656e6627d	clocksource scx200_hrt use instead of printk switch from printk to using added commit msg tweaked subject
293f6c08c72a0a0482f099082946ce691b360871	staging rtl8188eu remove unused function convertto_db
ac6ae347a50bfb4667438272c0d48f4fd41154db	show render p state thresholds in sysfs this is useful for userspace utilities which wish to use the previous interface specifically for micromanaging the steps by setting min max
aa4b8c725884b15c1d1467d382162e151b13a612	staging comedi fix printk issue in this is a patch to the file that fixes up a printk warning found by the tool converted printks to
b016322293c7e3b7efb1835603d149c03d00b0df	ab8500-charger add support for autopower on ab8505 and ab9540 accessing autopower register fails on the ab8505 and ab9540 as the fallback software control register has moved
4b1af4792a2aa686483fc9bb2155f7269fa6399c	cfg80211 use lockdep to assert lock is held instead of annotating with a comment add a lockdep annotation which also serves as documentation
aa62c2091129af81a172350b718eb35d5448cebc	arm64 compat clear the it state independent of the arm or thumb-2 mode the arm architecture reference specifies that the it state bits in the psr must be all zeros in arm mode or behavior is unspecified if an arm function is registered as a signal handler and that signal is delivered inside a block of instructions following an it instruction some of the instructions at the beginning of the signal handler may be skipped if the it state bits of the program status register are not cleared by the kernel
008342ebfda46239ccecb6d4059d511ce5b125c1	staging comedi adv_pci_dio cleanup pci-17546 interrupt registers for aesthetics replace these defines with a macro refactor the switch in pci_dio_reset to use common code
998bd66a9dd9e260ad850bb0a9f303e2dd5aa87a	set for the always-on well the always-on well is the same as runtime pm so we should just enable it for any power domain throw out the usless foo_always_on_domains defines and just use power_domain_mask
d6755bd4fb411035ec7cf0dc6dfa1bc448e35d62	rsi avoid format string leak to thread name since the rsi_create_kthread interface does not include any format string arguments make sure that the resulting thread name can never accidentally process the name as a format string
b6c09b3c7b54743cbc58af8c27bbae8299c4f8cc	alsa make snd_hda_gen_path_power_filter always applicable add the check of power_save_node flag at the beginning of the function so that it skips the rest if the flag isnt set in this way we can call this function safely no matter whether the widget power-saving is really used or not
bf09b6ae588f7567bcf31d9eff313d4d9fdc664e	pci mvebu increment nports only for registered ports the number of ports is probed by counting the number of available child nodes later on the registration of a port can fail and cause a mismatch between the counter and registered ports this patch modifies the counting strategy to make represent the number of registered ports instead of the number of available childs
1808bc67b1f00a54b3b5a23c51c361fd618796eb	staging bcm shortened prototype for getnexttargetbufferlocation
f2e48a89053dea259d7f96cf0fd1cfc7c4b34d80	ia64 err-inject fix cpu hotplug callback registration subsystems that want to register cpu hotplug callbacks as well as perform initialization for the cpus that are already online often do it as shown below get_online_cpus for_each_online_cpucpu init_cpucpu put_online_cpus this is wrong since it is prone to abba deadlocks involving the cpu_add_remove_lock and the when running concurrently with cpu hotplug operations instead the correct and race-free way of performing the callback registration is cpu_notifier_register_begin for_each_online_cpucpu init_cpucpu note the use of the double underscored version of the api cpu_notifier_register_done fix the error injection code in ia64 by using this latter form of callback registration
6e96c1b5e54889cd11ce29723a5c38ba284c1d91	gpio omap rework omap_x_irq_shutdown to touch only irqs specific registers the gpio chip and gpio irq chip functionality are essentially orthogonal so gpio irq chip implementation shouldnt touch gpio specific registers and vise versa hence rework omap_gpio_irq_shutdown and try to touch only irqs specific registers dont configure gpio as input it actually should be already configured as input dont clear debounce configuration if gpio is still used as gpio we need to take in to account here commit c9c55d921115 fix off-mode bug clear debounce settings on also remove omap_reset_gpio function as it is not used any more
33a80fc2eb43afbc25f04cc1d5ed899da213c21f	media v4l2 add private controls base for si476x add a base to be used for allocation of all the si476x specific controls in the corresponding driver
bb07df8ae18b42a8c5aea715fae82938b467ff9d	media pvrusb2 correctly handling failed thread run since kthread_run returns if failed it needs to be checked whether it is error not whether it is null
cd7131994c25102739e6098eea253a0d425d6b4f	net mvneta make mvneta_txq_done return void the function return parameter is not used in mvneta_tx_done_gbe where the function is called this patch makes the function return void
e8143ccb6b501f78bb95d9c5ee100d18423008cf	ppc e500_tlb memset clears nothing put the parameters the right way around addresses
5c1390c9ffdaeb9f7e544cea3a1699a341cad1fb	audit obsolete audit_context check is removed in audit_filter_rules pm patch applied by hand due to html mangling rewrote subject line
7256a5d2da56f2ea8ad49e8dbe9e2984f0899b42	powerpc fix personality handling in ppc64_personality directly comparing against per_linux32 doesnt work in cases when any of the personality flags stored in the top three bytes are used directly forcefully setting personality to per_linux32 or per_linux discards any flags stored in the top three bytes use personality macro to compare only per_mask bytes and make sure that we are setting only the bits that should be set instead of overwriting the whole value
27d7be1801a4824ecccbc735593101d72c038f13	avoid using spin_unlock_wait a the acquire in spin_lock applies to the read not to the store at least for powerpc this forces to add a smp_mb into the fast path b the memory barrier provided by spin_unlock_wait is right now arch dependent therefore use instead of spin_unlock_wait advantage faster single op semop calls observed on x86 the other solution would be arch dependencies in disadvantage slower complex op semop calls if and only if there are no sleeping operations the next patch adds hysteresis this further reduces the probability that the slow path is used link
36fba62cce8184ea6a0cecfa43f07f712716a6f8	asoc soc-pcm do not hw_free be if its still used do not free be hw if its still used by other fe during dpcm runtime shutdown otherwise the be runtime state will be state_hw_free and wont be updated to state_close when shutdown ends because be dai shutdown function wont close pcm when detecting be is still under use with state_hw_free be cant be triggered start again this corner case can easily appear when one be is used by two fe without this patch asoc dpcm fix race between updates and triggerea9d0d771fcd32cd56070819749477d511ec9117 one fe tries to shutdown but its raced against xrun on another fe it improves the be dai hw_free logic
8bd864b81a7472a19eb6ed536e028a10e7d71239	dont pass sdvo_reg to intel_sdvo_select_ddc_bus and intel_sdvo_select_i2c_bus have no used for the passed in reg so just drop it
62079d8a431287a4da81db64e002c71f0e06ca83	kvm pmu add proper support for fixed counter __number__ currently pmu emulation emulates fixed counter __number__ as bus cycles architectural counter but since commit perf has pseudo encoding for it use it
7bf3d92cdd61e2d47fc5ae403ee5bc598c757f29	asoc sdp4430 configure mcpdm offset cancellation based on the values from twl6040 codec hsotrim we can configure the mcpdm offset cancellation
1ad87e72b54cf3b698c002f0a31ac34d6b407f0b	i915 fix sdvo potentially turning off randomly some poulsbo cards seem to incorrectly report sdvo_cmd_status_target_not_specified instead of sdvo_cmd_status_pending which causes the display to be turned off this could also happen to i915
e5685730e2c620f97bc12380e9370e857e5bd7a7	perf record use ring buffer consume method to look like other tools all builtins that consume events from perfs ring buffer now end up calling perf_evlist__mmap_consume which will allow unmapping the ring buffer when all the fds gets closed and all events in the buffer consumed this is in preparation for the patchkit that will notice pollhup on perf events file descriptors link
7be50e93fbc281967589a04be5b1125539b0d0e2	nvme fix nvmeq waitqueue entry initialization we need to update the nvme queues wait_queue_t entry during each initialization since the nvme_thread may be ended and restarted when the device is reset if a device reset occurs during a large amount of buffered io it would take a lot longer to complete the outstanding requests due to the __number__ second polling instead of waking up as completions occur
799d904bf84c23531cf85c1a505aaed0e264babe	use bit macros use bit macros rather than shifts
21c784b93b0a19af4ae7bcce0d22120ba91970cf	mips sead3 make static in sead3-ehci what can be made static
efee5a0c62d827c0eca7044c2d14dd3324b325aa	gpu ion fix lockdep issue in ion_page_pool currently the mutex is held while kmalloc is called under a low memory condition this might trigger the shrinker which also takes this mutex refactor so the mutex is not held during allocation jstultz modified patch to apply to staging directory
5101b4d1877396d9b1ce5a6a6e91bb302289bf89	staging comedi __number__ remove subdevice pointer math convert the comedi_subdevice access from pointer math to array access
a9341ae24169e5d55aefdfeeefb17eab96b8e655	mips c-r4k split r4k_flush_kernel_vmap_range split the operation of r4k_flush_kernel_vmap_range into separate smp callbacks for the indexed cache flush and hit cache flush cases since the logic to determine which to use can be determined by the initiating cpu prior to doing any smp calls this will help when we change r4k_on_each_cpu to distinguish indexed and hit cache ops in a later patch preventing globalized hit cache ops being performed redundantly on multiple cpus patchwork
35eeafe3bf90d969756c5ef0f996c052ef35959d	asoc codec duplicated callback function goes to component on spdif_receiver codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
f9365d07dd5cb3c76b454b4c7827b2f6339cace2	extcon arizona remove duplicate rate configuration
f962fe32f2f85769cd835ddcecbff8c1d34cf561	bluetooth move hci_recv_frame and hci_recv_diag prototypes the protoypes for hci_recv_frame and hci_recv_diag are in the wrong location in the header file move them close to all the other hci_dev related exported functions
9dd5e53d9d2f933039eb2d5e4052afa249f638ba	extcon arizona retry hpdet identification for high impedance sometimes we can trigger measurements early if contacts are shorted during a slow insertion as well as debouncing add further robustness by retrying if we get a high impedance measurement for headphones as this can indicate that the headphones were not yet connected
3da43104d3187184d7417569cb3360511229f761	arc adjust cpuinfo for non-continuous cpu ids num_possible_cpus returns how many cpus may be present on system however we want the highest possible cpu number this may be differ in a sparsed possible cpus map such map achived by of for plat-eznps for example if we have possible cpus mask then num_possible_cpus is equal __number__ while nr_cpu_ids is equal __number__ only for value __number__ c_start will provide correct cpuinfo at procfs
0626baaacfe36bcbc2c65ea7d210752ed29c9293	staging wilc1000 rename variable gu32flushedjoinreqsize this patch renames variable gu32flushedjoinreqsize to join_req_size to avoid camelcase naming convention
7e04e21afa82ef024416f5413b5bdb66e0505bcd	fix express lane queue creation the older sli4 adapters only supported the __number__ byte wqe entry size the new adapter fw support both __number__ and __number__ byte wqe entry sizies the express lane wq was not being created with the __number__ byte wqe sizes when it was supported not having the right wqe size created for the express lane work queue caused the the firmware to overwrite the lun indentifier in the fcp header this patch correctly creates the express lane work queue with the supported size
b67a4376d53e1ae6eaef05389cfd0e6e5b7097db	extract forcewake ack timeout its used all over the place and we want to be able to play around with the value apparently note that it doesnt touch other timeouts of the same value like gtfifo and thread c0 wait danvet fixup conflict with vlv forcewake patches
be9ba9ff93cc3e44dc46da9ed25655780069411a	powerpc drop gpl from of_node_to_nid export to match other arches the generic implementation of of_node_to_nid is export_symbol added in commit of numa add numa of binding the powerpc implementation added in commit patch powerpc allow devices to register with numa topology is export_symbol_gpl this creates an inconsistency for of_node_to_nid callers across architectures update the powerpc implementation to be exported consistently with the generic implementation
9430066a15d6f55a3d008a6f99bb462480870207	tpm adjust return value of tpm_read_log
3c75354d043ad546148d6992e40033ecaefc5ea5	drivers hv vmbus add a helper function to set a channels pending send size this will be used by the coming driver
d19af2afe70c11c17552e3290560037a8812f467	i40e dont store user requested mode until weve validated it this patch prevents the siocghwtstamp ioctl from possibly returning bad data by not permanently storing the setting into the private structure until after weve finished validating that we can support it change-id ib59f9b4f73f451d5a2e76fb8efa5d4271b218433
20d7e3ca1be76a13fb4ea22246bb9d0c4c365809	media ati_remote check the checksum an input report is __number__ bytes long but there are only __number__ bits of actual payload the __number__ bytes are data0 data1 data2 data3 a checksum byte data2 the raw scancode plus toggle bit in msbit data3 channel __number__ the low __number__ bits must be zero ignore reports with a bad checksum
0f67a03ff6ada162ad7518d9092f72d830d3a887	media media tvp5150 support g_mbus_fmt callback
42ad8f6721720513f3569a67b157fcff068aa92d	phy ulpi_phy add const qualifier to ops the ops is never changed in ulpi_phy_create so make it const
80e9e5cd265af43cc51948125317c40f0988013b	iwlwifi mvm rs fix a potential null deref found by klocwork analysis mvm could be null which may cause a null dereference in a theoretical call flow rs_fill_lq_cmdmvm null rs_build_rates_table rs_fill_rates_for_column ucode_rate_from_rs_rate no real reason for passing null to rs_fill_lq_cmd so fix that
95263c9556796d7c22d901066ceb3787e11dbce5	staging slicoss logical continuations should be on the previous line move logical or operator to previous line to comply with the standard kernel coding style
71c65f7c90a176877ad1aa87b752217db61148a8	crypto caam fix typo in dma_mapping_error dma_mapping_error checks for an incorrect dma address
6a84c305f03425bab09ffedb71be942ebc22454d	alsa simplify alc_auto_is_dac_reachable use the helper function snd_hda_get_conn_index instead of open codes this also improves the detection of some routes to dac on alc260 although the difference doesnt influence on the end results of the mapping
35a5121b588f88686cab289b29eff3ce011f55a3	kvm delete prototype for non-existent function complete_pio complete_pio ceased to exist in commit kvm x86 emulator move string pio emulation into but the prototype remained remove its prototype
133e366bbee53c76596df5da4bf6b32d0d9cb364	greybus interface clean up and rename init-status helper clean up and rename the interface-init-status helper
69e2d1e6c0af0dd7f18cfd434b008844568641a9	scsi libcxgbi fix incorrect ddp resource cleanup before calling task_release_itt task data is memset to zero because of which ddp context information is lost resulting in incorrect ddp resource cleanup to fix this call task_release_itt before memset
40bdc5360d0919b537e27d7c3feb78fd784c31f5	pkt_sched sch_qfq remove unused member of struct qfq_sched the member u32 num_active_agg of struct qfq_sched has been unused since its introduction in pkt_sched qfq plus fair-queueing service at drr cost and afaict there is no active plan to use it this removes the member
43519e60ef8020e7b4f99d20b6663fab50af21dc	ethernet amd move amd111e_remove_one after probe this patch moves the remove functionalities after the probe so that we can see the registered and released resources properly every driver follows the same concept
5389023421b8f719fe4f1e6abd3f0bd0e571866e	netfilter nat remove rcu_read_lock in __nf_nat_decode_session __nf_nat_decode_session is called from nf_nat_decode_session as decodefn before calling decodefn it already set rcu_read_lock so rcu_read_lock in __nf_nat_decode_session can be removed
eb47cb2eb22dfacac9689708f5bd3cb0e975e290	perf probe fix get_real_path to free allocated memory in error path fix get_real_path to free allocated memory when comp_dir is used for complementing path and getting an error link
7053fdac76451efe5f16c9e0974dc17fcf29f6d6	remove pointless irq re-entrant safe code the current code assumes the interrupt function is re-entrant that is not correct an interrupt handler is never invoked concurrently the interrupt line is masked on all processors remove the chewing flags in the code
c99cc71efdaecf2e32608fba474bb0fd096b49ea	arm shmobile ap4evb switch to using pm-rmobile api this patch switches ap4evb platform to use pm-rmobile base common api
b824b930682308ce453b73b0e3ba9686e1f3a93a	arm64 print a fault message when attempting to write ro memory if a page is marked read only we should print out that fact instead of printing out that there was a page fault right now we get a cryptic error message that something went wrong with an unhandled fault but we dont evaluate the esr to figure out that it was a permission fault instead of seeing unable to handle kernel paging request at virtual address __address__ pgd __address__ __address__ __number__ __number__ __number__ internal error oops __number__ preempt smp well see unable to handle kernel write to read-only memory at virtual address __address__ pgd __address__ __address__ __number__ __number__ __number__ internal error oops __number__ preempt smp we also add a userspace address check into is_permission_fault so that the function doesnt return true for ttbr0 pan faults when it shouldnt
34a6c70f099ef33e04e7436ee962293beead7b90	check the power domains in intel_lvds_get_hw_state just like we do for the other encoders this should fix some warns when running pm_rpm on snb testcase bugzilla
4c95aa5d8fc34be18fcab01b1c6251c8c2b61520	i40e disable msi-x interrupts if we cannot reserve enough vectors if we fail on allocating enough msi-x interrupts we should disable them since they were previously enabled in this point of code not disabling them can lead to warn_on being triggered and subsequent failure in enabling msi as a fallback the below message was shown without this patch while we played with interrupt allocation in i40e driver __float__ sysfs cannot create duplicate filename __float__ cut here __float__ warning cpu __number__ pid __number__ at also we noticed that without this patch if we modprobe the module without enough msi-x interrupts triggering the above warning unload the module and re-load it again we got a crash on the system
8a15b81741879fa89601b03c0e50b0d780d65bc0	cpuset fix non static symbol warning fixes the following sparse warning warning symbol cpuset_fork was not declared should it be
bd126e5e58bd5e6561e39c1364d57497cf7e118e	remove unused p9_fid struct pointer get rid of the useless variable
e477ce075d205f9eee3e28795eae7a0efd1e54f6	regulator arizona-micsupp support bypass
864663300b2f1b237f042db5952162af851351bf	staging comedi rtd520 remove rtdtriggerpolarity macro this macro uses the devpriv macro which relies on a local variable having a specific name its also not used remove it
f6f4e86a1a3be1c4ecbafe7828764736daf4cf63	at86rf230 generate random perm extended address this patch adds support for a random generated perm extended address for the at86rf230 driver
f1837e4ad502d6b15be864ace04b681e5b0fd49e	mfd pm8921 implement irq_get_irqchip_state implement to make it possible for pmic block drivers to access the irq real time status bits the status bits are used for various kinds of input signals gpio
0e9a126e95748e8283488818d98ae5bcb7b84515	omapdss fix build when debug_fs or dss_debug_support disabled if config_debug_fs or config_omap2_dss_debug_support is disabled the build fails error static declaration of dss_debugfs_create_file follows non-static declaration note previous declaration of dss_debugfs_create_file was here this patch fixes the dummy dss_debugfs_create_file so that the driver builds
8fe392b8fdb93ced86e1661bff91af95ee234cf9	media usbvision replace memcpy with struct assignment this kind of memcpy is error-prone its replacement with a struct assignment is prefered because its type-safe and much easier to read found by coccinelle hand patched and reviewed tested by compilation only a simplified version of the semantic match that finds this problem is as follows identifier struct_name struct struct_name to struct struct_name from expression e e from
cc5bcbbdbf29914e1ab679548c7da68ea46829cf	staging wlan-ng remove redundant statements in this patch removes redundant goto or break statements in as found by
415d04d08fec74b226c92c1fb54ad117c9c6bac4	unicore32 if theres no handler we need to restore sigmask syscall or no syscall
9a8f3f4490922dd62556a8004aa06bc3f1054894	staging several bug fixes convert bogus is_err_or_null to is_err fix error check return value of ipu_crtc_init
14d32f1794fd559e12f27e8b5c57053073bd75aa	i2c rcar cosmetic remove superfluous parenthesis a recent patch added even more superfluous parenthesis to those which already were there remove them again
8a16469b74af0fb584686e5e18d2cf3570424e4b	drop useless assignment in sun4i_layers_init the assignment found in the main loop in sun4i_layers_init struct sun4i_layer layersi is useless as it gets overwritten by the next line layer sun4i_layer_init_onedrm plane drop the assignment
4161824f18ff4f56f46595a4016c7315dd0d24f1	fully initialize uprobe_trace_consumer before uprobe_register probe_event_enable does uprobe_register and only after that sets and this can race with uprobe_dispatcher which can miss these assignments or see them out of order nothing really bad can happen but this doesnt look and this does not allow to use we are going to add it is called by uprobe_register and it needs change this code to initialize everything before uprobe_register and reset if it fails we cant race with event_disable the caller holds event_mutex and if we could the code would be wrong anyway in fact i think uprobe_trace_consumer should die it buys nothing but complicates the code we can simply add uprobe_consumer into trace_uprobe
c4c205f3cd17b567b8e20098522416eac2e73960	mac80211 assign seqnums for group qos frames according to paragraph __number__ qos data frames with a group address in the address __number__ field have sequence numbers allocated from the same counter as non-qos data and management frames without this flag some drivers may not assign sequence numbers and in rare cases frames might get dropped set the control flag accordingly
bae6746ff356478e1a2706072edbfb514072e0ff	sunrpc enforce an upper limit on the number of cached credentials in some cases where the credentials are not often reused we may want to limit their total number just in order to make the negative lookups in the hash table more manageable
8a54aa92850058fd60f07fa2621cab94bf53b5f0	use drm_atomic_helper_shutdown use drm_atomic_helper_shutdown to ensure that all crtcs are disabled when unloading the driver
bb9c3398efd109e48932af46c3e1fed10adddc17	arm clk separate dt and non-dt init procedure this patch separates dt and non-dt clock initialization procedure so we can avoid a lot of unneeded clk_register_clkdev for dt case
d5e8fdc8c10bdff9b8af9cc8b25607ae71e26d3b	extract i want to add more code to the post_enable function
2bb3135166abcd59979cfcdd3696ba840b6b9d45	arm gic fix gic cpumask initialization punit agrawal reports i was trying to boot on realview eb using realview-smp_defconfig as a starting point but the kernel failed to progress past the log below config attached pawel suggested i try reverting arm gic use a private mapping for cpu target interfaces that youve authored with this commit reverted the kernel boots i am not quite sure why the commit breaks but pawel ccd might be able to shed light on that some early gic implementations return zero for the first distributor cpu routing register this means we cant rely on that telling us which cpu interface were connected to we know that these platforms implement ppis for irqs but we shouldnt assume that these will always be populated so instead scan for a non-zero cpu routing register in the first __number__ irqs and use that as our cpu mask
6ecffe16911dc79b079b6fb4491fd157c62d4371	hwmon emc6w201 convert to use devm_ functions convert to use devm_ functions to reduce code size and simplify the code
24bc69da32a93edac91b4dfb7806a7fb9c24c625	pci clean up capability this doesnt change any existing symbols but it puts them in logical order and uses explicit masks instead of shifts like the rest of the file it also adds new symbols for pci_msix_table_bir pci_msix_table_offset pci_msix_pba_bir and pci_msix_pba_offset to replace the mis-named pci_msix_flags_birmask the bar index fields are part of the table and pba registers not the flags register
2688eba9d5ba2a35ac8e5efa2e228f105f0a379f	mac80211 replace rcu_dereference with rcu_access_pointer the rcu_dereference calls are used directly in conditions since their return values are never dereferenced it is recommended to use rcu_access_pointer instead of rcu_dereference therefore this patch makes the replacements the following coccinelle semantic patch was used if rcu_dereference rcu_access_pointer while rcu_dereference rcu_access_pointer
1bdb2d4ee05f2fdad4d8a82d7e0ce8d6d91ec4ac	arm split off core mapping logic from create_mapping in order to be able to reuse the core mapping logic of create_mapping for mapping the uefi runtime services into a private set of page tables split it off from create_mapping into a separate function __create_mapping which we will wire up in a subsequent patch
94091c6b9498116abe3035137d8c3e707528efd0	sh clkfwk fixup unsed variable warning this patch solves above warning warning unused variable val
9413d968f24371bede2c82ec7bb8d040eede8417	add multidomain support for procfs we create a procfs directory for every pci bus previously the directory name was just the bus number so using the same bus number in different domains caused a kernel crash when we tried to create a duplicate directory make pci_proc_domain return the domain number so procfs directories for buses in domain __number__ are named with just the bus number and directories for buses in other domains include both the domain number and the bus number bhelgaas changelog
cb92205bad2e4dd630b884142dd707b72504c200	bluetooth fix mgmt_ev_new_long_term_key event this patch fixes how mgmt_ev_new_long_term_key event is build right now val vield is filled with only __number__ byte instead of whole value this bug was introduced in commit bluetooth fix exposing full value of shortened ltks before that patch if you paired with device using bluetoothd using simple pairing and then restarted bluetoothd you would be able to re-connect but device would fail to establish encryption and would terminate connection after this patch connecting after bluetoothd restart works fine
6357b75a5c356a9d8f91c614ab72ac5264a5932c	disable uvd and vce clockgating on fiji doesnt work properly yet
1deee8d76724b478240f1bba5affe017e4f9bfa3	drm extract add_hdmi_mode out of do_hdmi_vsdb_modes so we respect a nice design of having similar functions at the same level in this case do_hdmi_vsdb_modes add_hdmi_mandatory_stereo_modes add_hdmi_mode
ad5b0f7685dbfc4730987cd16af3c5ebe8133f10	raid5 guarantee enough stripes to avoid reshape hang if there arent enough stripes reshape will hang we have a check for this in new reshape but miss it for reshape resume hence we could see hang in reshape resume this patch forces enough stripes existed if reshape resumes
5d68da3b8ee6eb2257aa4b8d885581782278ae93	btrfs dont write any data into a readonly device when scrub we should not write data into a readonly device especially seed device when doing scrub skip those devices
2cf69930f03af63731678de79cb1dbe3547a5938	usb qcserial consolidate usb_set_interface calls no need to replicate the same code all over the place
b264a70eef880aff31652a10ffee9c03e949b69b	mfd mc13xxx dont require lock for simple register since the conversion to regmap there has been no need for device level locking for as regmap provides locking so remove the locks
0eb3fba8c68275f0122f65f7316efaaf86448016	backlight adp5520 fix error handling in adp5520_bl_probe if adp5520_bl_setup fails sysfs group left unremoved by the way fix overcomplicated assignement of error code found by linux driver verification project
a7c22bda52e24094c7bc96afcd897ddad2b28bc0	net macb fix missing unlock on error in macb_start_xmit fix missing unlock before return from function macb_start_xmit in the error handling case checksum offloading
605f143320b637846674299c323b1893c93d8494	combine gen8_row_chicken and are related to the same register so combine them
1f8754d4daea5f257370a52a30fcb22798c54516	asoc rsnd dont call free_irq on parent ssi if ssi uses shared pin some ssi will be used as parent ssi then normal ssis remove and parent ssis remove these are same ssi will be called when unbind or remove timing in this case free_irq will be called twice this patch solve this issue
9999370faed945be2913cd34aa24e84317a0ceda	net ip raw_diag use jump for exiting from nested loop i managed to miss that sk_for_each is called under for cycle so need to use goto here to return matching socket
8fe61203687a67eb1db338a4b7198a8037ca96c8	usb phy nop remove redundant platform_set_drvdata commit device-core ensure drvdata null when no driver is bound removes the need to set driver data field to null
f4e0628ba37aa4bf2989f912c1f63e3ad1a46704	dmaengine edma kill the tasklets upon exit drivers should ensure that tasklets are killed so that they cant be executed after driver remove is executed so ensure they are killed this driver used vchan tasklets so those need to be killed
2dfd178dc05164d6d730f4b3649accc1ee1ee585	do not disable cxsr when crtc is disabled its safe to assume cxsr is already disabled when the crtc is off this prevents an unclaimed register warning when the required power wells are not enabled __float__ cut here __float__ warning cpu __number__ pid __number__ at i915 __float__ unclaimed register detected before reading register __float__ modules linked in i915 intel_powerclamp __float__ cpu __number__ pid __number__ comm kms_pipe_crc_ba tainted g u w __float__ hardware name dn2820fyk bios __float__ __address__ __address__ __address__ __address__ __float__ __address__ __address__ __number__ __number__ __float__ __number__ __address__ __number__ __address__ __float__ call trace __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ i915 __float__ __address__ i915 __float__ __address__ i915 __float__ __address__ i915 __float__ __address__ i915 __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ end trace testcase bugzilla
d6b1023a83e85943d1f2fa3baafbb4d5cfee7179	net dsa mv88e6xxx convert flag bits to unsigned long long we are soon going to run out of flag bits on systems convert to unsigned long long
6e77fe8c1100bfb3c6f5b2558d4556519b837b65	crypto serpent-sse2 remove dead code from we cannot reach the line after return err remove it
611e2267b68fc061aea86345b3a8b87151395187	fix time calc in expired cmd processing reversed arguments meant that we were doing nothing for cmds whose deadline had passed
3874d6a8b61966a77aa743b4160ba96bf3081ce5	bnxt_en improve bnxt_vf_update_mac allow the vf to setup its own mac address if the pf has not administratively set it for the vf to do that we should always store the mac address from the firmware there are __number__ cases __number__ the mac address is valid this mac address is assigned by the pf and it needs to override the current vf mac address __number__ the mac address is zero the vf will use a random mac address by default by storing this __number__ mac address in the vf structure it will allow the vf user to change the mac address later using ndo_set_mac_address when it sees that the stored mac address is __number__ v2 expanded descriptions and added more comments
db4094bca7a5746bc8e36db0557e8732963e88f0	net sched ignore tx_queue_len when assigning default qdisc since alloc_netdev_mqs sets iff_no_queue for drivers not initializing tx_queue_len it is safe to assume that if tx_queue_len is zero flags always contains iff_no_queue
0cacb46ace1f433f0ab02af10686f6dc50b5d268	media fix mceusb endpoint type change the endpoint handling of the mceusb driver to respect the endpoint type reported by device rather than treating all endpoints as type interrupt which breaks devices using bulk endpoints when connected to a xhci controller accordingly change the function calls to initialize an endpoints transfer pipe and urb handlers to use the correct function based on the endpoint type
cc94ea31150f83d1f70ad854c920dd6b739c1628	mips loongson fix the write-combine cca value setting all processors support _cache_uncached_accelerated not only loongson-3a patchwork
f8fb952fd409a4c854a66473c11d35b4e5e9c2eb	msm_serial fix sparse warnings warning symbol msm_set_mctrl was not declared should it be warning incorrect type in argument __number__ different address spaces expected void volatile noderef got unsigned int warning incorrect type in argument __number__ different address spaces expected void volatile noderef got unsigned int warning incorrect type in assignment different address spaces expected unsigned int got void noderef mark the ioremapped memory as __iomem and use writel instead of iowrite because were not dealing with pci devices also mark msm_set_mctrl static because it isnt used outside this file
df1d1fb09aed7aae0f94a5ba1a39d0477dee6f1d	alsa parse digital input path this was the last forgotten path now its parsed via the same path parser
d29afe91af5995306d940b3dfee2419e0bb24a51	brcmfmac fix handling firmware results for wowl netdetect for wowl netdetect the event data changed for newer chips this was recently fixed for scheduled scan but same change is needed for wowl netdetect removing now pointles operation from both result handlers
48193012873e341f08de48304e32d0499b96c60b	ceph dont grabs open file reference for aborted request
a71a65b1d68c145a914cdc05d6f85372a58e71df	staging comedi usbduxfast remove intf from the private data the usb_interface pointer is already saved in the comedi_device by the comedi core remove the pointer from the private data and use comedi_to_usb_interface to get the usb_interface when needed
79254c60db6a5cbb72a9cb5eb1c3c50d6cdf755a	staging sm750fb use pll_ctrl_power defines for crt_pll_ctrl use pll_ctrl_power definitions for crt_pll_ctrl register access
142c69c6eaab26587264881bb71546e30aafdcee	bluetooth hidp add support for no_init_reports quirk during setup the host initializes all hid reports some devices do not support this if this quirk is set we skip the initialization see also usbhid_init_reports for this quirk
d2dee86cece9deee33923ee71be918f0452c8ebe	extract intel_init_fbc because i plan to expand it a little bit
fb453db9bfbe23e71c654392e40a30a7bc9958cd	staging vt6656 rxtx s_vfilltxkey fix pdwiv base type use base type __le32 and endian correct changed values correct endian conversions to cpu_to_le32
602b5be4f14cabd5b751c340919958549475ab62	silence some printks since we use multiple regions the messages are somewhat annoying we do print total mapped memory already so no need to print the information for each region in the library routines
3b00b008888a851499bc039e70d12002af00ec9c	firewire core log error in case of failed bus manager lock if the lock access to the bus manager register fails also log the actual error that caused it to fail
e6e367b26ec1881cf44e68346a40a9b7b3352055	usb serial remove debug module parameter now that the dbg macro is no longer being used in the driver the debug module parameter doesnt do anything at all so remove it so as to not confuse people
5def90196b52d0bbec4f662448e25f2a4c06ddbc	alsa x86 use snd_pcm_stop_xrun for connection disconnection paths this seems more friendly to user-space as its notified at least as an error instead of forcibly moving the pcm state to setup out of sudden moreover snd_pcm_stop needs an extra pcm spinlock i forgot while snd_pcm_stop_xrun takes the spinlock by itself
dc0565ce6e34be06730312e79b226b7408a543c8	xfrm slightly optimise xfrm_input check with xfrm_state_acq only when state is not xfrm_stat_valid not everytime
e448e2d14905d3d45c07fcac5b6d652283ba55b0	power supply pcf50633-charger compress return logic into one line simplify return logic to avoid unnecessary variable assignments these issues were detected using coccinelle and the following semantic patch local idexpression ret expression e e ret
025ffe88ee605acb03dba0d920908dff5ec15dd0	spi pxa2xx shift clk_div in one place this patch refactors ssp_get_clk_div and pxa2xx_ssp_get_clk_div to align clk_div calculations ssp_get_clk_div and quark_x1000_set_clk_regvals will return plain clk_div and it will be shifted to proper position in pxa2xx_ssp_get_clk_div
05ac539b4fb4f7d7d0f3123c5bb81a4b34aa5327	lp8788-charger fix a parent device in _probe the lp8788-charger is a platform driver of lp8788-mfd the platform device is allocated when mfd_add_devices is called in lp8788-mfd on the other hand is the i2c client device therefore this platform_device is a proper parent device in case of resource managed mem alloc and device kernel message
ebf0235b4c21802b10cdce6efb1296baaac2a786	staging rtl8723au remove more unused
71500b272064410a3417ab764aec20572564d68d	staging comedi usbdux tidy up usbdux_free_usb_buffers for aesthetics pass the comedi_device pointer to this function instead of the private data pointer the usb_kill_urb calls are not needed all the urbs were unlinked before this function was called
473c13179c5828f7123a4d9fe449d8bd79fae254	bluetooth replace strict_strtol with kstrtol the usage of strict_strtol is not preferred because strict_strtol is obsolete thus kstrtol should be used
c90e5d20fc1bfefdeb99d5ec2cb0fb28f26d208d	program a calculated value as deep sleep clock this replaces programming of a hardcoded value
1166f3fe6a86798e4fcd24cefb6b06da3fd0420f	arm64 add pte_hyp_xn page table flag el2 page tables can be configured to deny code from being executed which is done by setting bit __number__ in the page descriptor it is the same bit as pte_uxn but the user reference felt odd in the hypervisor code
5cedf721a7cdb54e9222133516c916210d836470	list_lru fix broken lru_retry behaviour the lru_retry code assumes that the list traversal status after we have dropped and regained the list lock unfortunately this is not a valid assumption and that can lead to racing traversals isolating objects that the other traversal expects to be the next item on the list this is causing problems with the inode cache shrinker isolation with races resulting in an inode on a dispose list being isolated because a racing traversal still thinks it is on the lru the inode is then never reclaimed and that causes hangs if a subsequent lookup on that inode occurs fix it by always restarting the list walk on a lru_retry return from the isolate callback avoid the possibility of livelocks the current code was trying to avoid by always decrementing the nr_to_walk counter on retries so that even if we keep hitting the same item on the list well eventually stop trying to walk and exit out of the situation causing the problem
b1f5037f1b33a15fa2ad5c9c41837477465af063	qlcnic fix link speed and duplex display for adapter o set link speed and duplex to unknown when link is not up
2461daacb3e2ecca5edea2fa637a1b0922e86515	bluetooth fix bad locking balance
63cbb0747622d923665294519e9a24bc9c654c19	always load the display palette before enabling the pipe loading the palette after the planes are enabled can risk showing incorrect colors already load the palette before even the pipe is enabled just follow the same order for gen2-4 and vlv according to bspec the requirements for palette access are display core clock and display pll running in certain platforms just the core clock may be enough but we definitely should have both running when this gets called during the modeset v2 amend the commit message with some display clock info
af49a63e101eb62376cc1d6bd25b97eb8c691d54	radix-tree change naming conventions in radix_tree_shrink use the more standard node and child instead of to_free and slot
41993cd54fdc5c774cc4881e18a21e3e4a2544cd	greybus loopback fix double error count make sure not count errors during asynchronous tests twice first in the timeout handler then again in the completion handler to avoid obviously broken error stats such as loopback_test __number__ transfer __number__ __number__ __number__ test transfer path gb_loopback0 size __number__ iterations __number__ errors __number__ async enabled requests per-sec ap-throughput ap-latency usec __number__ apbridge-latency usec __number__ gpbridge-latency usec __number__ where we supposedly have more errors than iterations operations initiated
7b20f7b353445bb16eaf6474397fcd221a5dee88	staging rtl8723au remove redundant casting in casting value returned by kcmzalloc is useless
ccb5c001b3035ca470fe21424e439530ba838510	cifs ensure we revalidate the inode after readdir if cifsacl is enabled otherwise ls will simply show the ownership of the files as the default this may make ls performance on large directories super-suck in some cases but thats the cost of cifsacl one possibility to make it suck less would be to somehow proactively dispatch the acl requests asynchronously from readdir codepath but thats non-trivial to implement
8e9bc36df56d6fa1db78032533c0e167f8a0bdcf	extcon use capital letter for the name of external connectors this patch uses the capital letter for the name of external connectors to improve the readability instead of small letter
2484f40780b97df1b5eb09e78ce4efaa78b21875	nvme add shutdown timeout as module parameter the current implementation hard-codes the shutdown timeout to __number__ seconds some devices take longer than this to complete a normal shutdown changing the shutdown timeout to a module parameter with a default timeout of __number__ seconds
299f5e27ac5fac42f5be38a1cdf004b4e8217cbf	qla2xxx isp27xx add tests for incomplete template
aac9fe9b4697868009e752562e743cc7984809bc	hwmon ltc4261 set to __number__ if error if there is an error it is better to set to __number__ so the next call to ltc4261_update_device will always be executed
43e28f092b2fa4ebc46bdc210134a80610815785	bail if we attempt to allocate pages for a purged object move the existing checking inside bind_to_gtt to the more appropriate layer in order to prevent recreation of the pages after they have been explicitly truncated
7f33bbca14de25f24660441af5087440dd0d2fca	fpga zynq add support for encrypted bitstreams add support for encrypted bitstreams for this to work the system must be booted in secure mode in order for on-the-fly decryption to work the pcap clock rate needs to be lowered via the pcap_rate_en bit
f9bcca405624c7f4a0cf4a1b78f8b3a312ca4dab	hid usbhid remove duplicated code well no use to keep twice the same code
dc1a272ec4405d70676b40cfde8f2ebdc77ee018	brcmfmac disable runtime pm for usb currently runtime pm is enabled for usb but it is not properly supported by driver this patch disables the runtime pm support completely for usb as it currently can result in problems on some systems
7fb1cab4ac8ef7a1fed5c19593cd5b4be1b1a9b3	pnp replace strnicmp with strncasecmp the kernel used to contain two functions for length-delimited case-insensitive string comparison strnicmp with correct semantics and a slightly buggy strncasecmp the latter is the posix name so strnicmp was renamed to strncasecmp and strnicmp made into a wrapper for the new strncasecmp to avoid breaking existing users to allow the compat wrapper strnicmp to be removed at some point in the future and to avoid the extra indirection cost do
699fa216808fff47efc9743f92f1b8a9f9bf5321	mm fix handling pte-mapped thps in page_idle_clear_pte_refs for pte-mapped thp page_check_address_transhuge is not adequate it cannot find all relevant ptes only the first lets switch it to page_vma_mapped_walk i dont think its subject for its not fatal link
b5644d0554f37016763f615bd65cd68af96aa509	restore cursor and sprite state when forcing a config restore v2 needed for vt switchless resume v2 cursor state is now handled correctly in crtc_enable daniel
951b833ee88c2b6df4346414dc9d88a96076ff2d	arm ux500 delete uart static map delete the static maps for the ux500 uarts and rely on debug_ll_io_init to do the trick commit f87b95dd2e4a8832b1d6034f15a5324db42608a0 arm ux500 move debugmacro to debug includes defined the necessary addruart macro two years ago
03a0dc546be3fa6091214bd2c05d678d3e8d67df	hid wacom report strip2 values in abs_ry commit c7f0522 accidentally used abs_rx for reporting both strip1 and strip2 when the latter should actually be reported through abs_ry
64dbee31050d5b93b5fcda25508e4d3c69f6589c	serial core remove extra locking in uart_write uart_start only claims the to call __uart_start which does the actual processing eliminate the extra in uart_write call __uart_start directly with already held
ec9353dca9a02b429f31ac58ec7b55ee61757441	fold set_cursor into show_cursor port of radeon commit
5f6af6a75ef3fed8eb220217ecd7d1c7ef8571d9	asoc samsung add missing to end of pr_err messages trival fix some pr_err messages are missing a so add it
89c59cca48f04ede7e63944418af1794a8e31da6	mark gic_init_physaddr static we get __number__ warning when building kernel with warning no previous prototype for gic_init_physaddr in fact this function is only used in the file in which it is declared and dont need a declaration but can be made static so this patch marks this function with static
3c02d1bb32347d0674714ee170772d771d513469	bnxt_en fix ethtool reporting to report flow control settings accurately regardless of autoneg setting we should use before this patch the reported settings were only correct when autoneg was on
61c3393f9374ae56108db0f6b60d3bd56780fe80	staging comedi pcl816 use cfc_handle_events use the comedi_fc helper function to automatically call the subdevice function when needed and call comedi_event update the kconfig so that comedi_pcl816 selects comedi_fc
ad52184b705c1048aa01225eccde119ef5c93000	selinuxfs dont open-code d_genocide
19f57298f03825e36aefc866d8472b43780538d4	fix the rdma completion handlers avoid that the following kernel crash is triggered when processing an rdma completion bug unable to handle kernel paging request at __number__ ip __address__ call trace __address__ __address__ __address__ ib_srpt __address__ ib_core __address__ ib_core __address__ __address__ __address__ __address__
e0d9243048fd18da695b8d3fe331176eac60866e	dont return nfs4err_delay unnecessarily in cb_layoutrecall if the client is promising to return the layout asap then there is no need to return delay and have the server retry instead default to the normal procedure described in rfc5661
a1b81dd3ff2c622d0f4e3954bf9b5dd47a0f13a0	regulator fix wm831x dcdc dvs vsel bootstrapping read our initial vsel from the correct register
12897dc37648ac48b2aa2b3bb2d7df69625b6de5	media af9033 sleep on attach this reduces power consumption
f5ee2b18e44d8752ea6e6fba978a873ed5f562bd	ath9k add macros for qca9531
57cf9d4512c86a4a1b58857ca22b18bffbfd6812	asoc soc-core use gfp_kernel flag for kmalloc in snd_soc_cnew gfp_atomic is not needed here use gfp_kernel instead
2505dc9fad44491ac4ce06290f358c030abe6be3	kvm vmx move vmx_nmi_allowed after vmx_set_nmi_mask vmx_set_nmi_mask will soon be used by vmx_nmi_allowed no functional changes
46c87852e99cf8ce97e207b11cde19085837e39c	arm dma-mapping modify condition check while freeing pages warning at trying to vfree nonexistent vm area modules linked in from from from from from from from from from from from from from from from from from this patch modifies the condition while freeing to match the condition used while allocation this fixes the above warning which arises when array size is equal to page_size where allocation is done using kzalloc but free is done using vfree
7f7a4138c66e857cc5bbf6e248a47379765349b5	perf trace change syscall summary duration order switch duration order to minimum average maximum for the command line option because its more natural to read link
107a077d19341b4d47ae06f0bd24883b94e64628	ahci qoriq adjust sata parameter the default values for port phy2cfg register and port phy3cfg register are better no need to overwrite them
dcee9bfe8904518266c95d44a4f435a5f1fa59a1	asoc simple-card use defined dev on probe current asoc_simple_card_probe already has dev definition but some place doesnt use it lets fix this issue
b442c46f1b10f5e91025e36824362839ea3f3331	media davinci-vpif-capture use kcalloc in vpif_probe a multiplication for the size determination of a memory allocation indicated that an array data structure should be processed thus use the corresponding function kcalloc this issue was detected by using the coccinelle software replace the specification of a data type by a pointer dereference to make the corresponding size determination a bit safer according to the linux coding style convention
b28ace12661fbcfd90959c1e84ff5a85113a82a1	fix incorrect type of local variables the max and entry variables are unsigned according to the dt-bindings fix following __number__ sparse issues warning incorrect type in argument __number__ different signedness expected unsigned int usertype got int warning incorrect type in argument __number__ different signedness expected unsigned int usertype got int warning incorrect type in argument __number__ different signedness expected unsigned int usertype got int link
ed4b197ddd4d7aa6623e7777ea326c67c3a6b8ed	acpi ec free saved_ec on error exit path smatch detected two memory leaks on saved_ec acpi_ec_ecdt_probe warn possible memory leak of saved_ec acpi_ec_ecdt_probe warn possible memory leak of saved_ec free saved_ec on these two error exit paths to stop the memory leak note that saved_ec maybe null but kfree on null is allowed
ba6b17d68c8e3aa8d55d0474299cb931965c5ea5	zram fix umount-reset_store-mount race condition ganesh mahendran was the first one who proposed to use to avoid race condition cpu0 cpu1 umount is true reset_store __number__ mount zram_make_request zram_reset_device however his solution required some considerable amount of code movement which we can avoid apart from using in reset_store this patch also simplifies zram_reset_device zram_reset_device has a bool parameter reset_capacity which tells it whether disk capacity and itself disk should be reset there are two zram_reset_device callers zram_exit passes reset_store passes so we can move reset_capacity-sensitive work out of zram_reset_device and perform it unconditionally in reset_store this also lets us drop reset_capacity parameter from zram_reset_device and pass zram pointer only
8497825753253a0c72729d8f8cced6c7ed341589	cleanup_plane_fb also drop reference to current state wait_req there are two paths into intel_cleanup_plane_fb the normal completion path and the failure path in the failure case intel_cleanup_plane_fb is called before drm_atomic_helper_swap_state so any wait_req reference made in intel_prepare_plane_fb will be in in the normal completion path drm_atomic_helper_swap_state has already been called so the plane state holding the just-used wait_req will not be in rather it will be in the state associated with the plane itself clearing this reference ensures that the wait_req will be freed as soon as it the related mode setting operation is complete rather than waiting for some future mode setting operation to eventually dereference it the existing dereference of is still required as that will hold the wait_req when the mode setting operation fails
3a4562a02856ceca516bb61945aec3a83b8826db	add id for avoton soc enable intel powerclamp driver on processor c2000 product family for microservers avoton avoton socs for micro-servers has package c-states which can be used for idle injection
abe7a4097dd0141d21d02e4bd949b377a0a75120	usb gadget zero put function instances on unbind if function instances are not put on gadgets unbind their implementation modules refcount is nonzero and it is impossible to unload them
f6f2efa35f6b76034e5a31a075218feaa10f1812	input spear_keyboard rename bit definitions to reflect register rename bit definition macros to reflect keyboard registers clearly thus being more readable
06ea5e035b4e66cc77790457a89fc7e368060c4b	increment numa_migrate_seq when task runs in correct location when a task is already running on its preferred node increment numa_migrate_seq to indicate that the task is settled if migration is temporarily disabled and memory should migrate towards it only increment migrate_seq if migration temporarily disabled link
fe5c3561e6f0ac7c9546209f01351113c1b77ec8	vxlan add necessary locking on device removal the socket management is now done in workqueue outside of rtnl and protected by there were two possible bugs first the vxlan device was removed from the vni hash table per socket without holding lock and there was a race when device is created and the workqueue could run after deletion
09fa5296a40d01e014b4851def20b975feb98fd5	userfaultfd non-cooperative wake userfaults after uffdio_unregister userfaults may still happen after the userfaultfd monitor thread received a uffd_event_madvdontneed until uffdio_unregister is run wake any pending userfault within uffdio_unregister protected by the mmap_sem for writing so they will not be reported to userland leading to uffdio_copy returning as the range was already unregistered and they will not hang permanently either link
74f24257eec528495ac1761512954a3348febd82	blackfin mach-common ints-priority remove unused function remove the function bfin_sec_resume that is not used anywhere this was partially found by using a static code analysis program called cppcheck
8cc7212a036118fcb5cfbbdb013c5032677bbd23	idr remove unused prototype of idr_free there is no such function remove the redundant prototype
942a91ed3ffff0267944ed3161ae292d0960fd44	perf trace use strerror_r instead of strerror use strerror_r instead of strerror in error message for thead-safety link
d687767a910df17026df46b4eb54af49f310a9e7	clk ti dra7 constify clk_hw_omap_ops structure the clk_hw_omap_ops structures are never modified so declare this one as const like the others done with the help of coccinelle
bb3d1a3b24b61d8dd87e2d8c127a92ec8dd5d0d4	deal with server reboots during delegation expiration recovery ensure that if the server reboots while were testing and recovering from revoked delegations we exit to allow the state manager to handle matters
857dc4e0598e2a95b1cbb8d17c8538b34cc9a2f3	f2fs write ssa pages under memory pressure under memory pressure we dont need to skip ssa page writes
2ac015e293bbe3858533009612eac58842daf325	thp call pmdp_invalidate with correct virtual address sebastian ott and gerald schaefer reported random crashes on s390 it was bisected to my thp refcounting patchset the problem is that pmdp_invalidated called with wrong virtual address it got offset up by hpage_pmd_size by loop over ptes the solution is to introduce new variable to be used in loop and dont touch haddr reported-and-tested-by sebastian ott
d5c2b14cb2b9b6a099e22f39ae2196a8403994e9	lp8788-charger fix a parent device in kernel messages use platform_device in kernel messages rather than i2c client device node lp8788_update_charger_params needs additional argument pdev then remove unnecessary lp8788 private data in lp8788_irq_register
a534dc529853c69e94994aa47c1d80a03ce2c11d	ipvlan fix use after free of skb ipvlan_handle_frame is a rx_handler and when it returns a value other than rx_handler_consumed here net_rx_drop aka rx_handler_another __netif_receive_skb_core expects that the skb still exists and will process it further but we just freed it
1315c7c7bbea6e0aba49a867400e7b8ccb6a5d16	target remove unused target_core_config_root define
956b65e1a7a6f10e630ee7f2f2f9de3aab001527	perf hists introduce function for hist_entry the code being used when decaying and deleting entries from a hists instance was the same provide a function to avoid code dup link
1e8f86d9cbe9431dcda36fdd85a9f342d639dca5	ath10k remove send completion validation in diag ce diag window access is serialized it has to be by design so theres no way to get a different send completion so theres no need for post completion validation
3da82065f1e59fd280742cd792cbf2fb2052958f	check return from add_pcc_socket if request_irq fails it passes the error to the caller the caller now checks it and jumps to the common error path on failure link
37a8484aef09638b9eead7070cb0ee27adb74ceb	nfs return errors directly in _nfs4_opendata_reclaim_to_nfs4_state there is no need for a goto just to return an error code without any cleanup returning the error directly helps to clean up the code
523b74b16bcbba34c662da5df7fa111ae4c1d0e6	evm reset evm status when file attributes change the evm verification status is cached in and if it was successful never re-verified again when ima passes the iint to evm_verifyxattr when file attributes or extended attributes change we may wish to re-verify evm integrity as well for example after setting a digital signature we may need to re-verify the signature and update the that there is an evm signature this patch enables that by resetting evm_status to integrity_uknown state changes in v2 flag setting moved to evm layer
70f5a294ad2eec3f896dafb83075cb8f04d65e92	input imx6ul_tsc add mask when set reg_adc_cfg add mask of each function bits of reg_adc_cfg and clear these function bits first otherwise use operation may get the wrong setting which depends on the original value of reg_adc_cfg
5d0d813d34cded724450f1149e9402bc6fbc3270	staging comedi remove cfc_inc_scan_progress this inline function is no longer used remove it
2c186e05a5c6dc8fcfb1e8bf6901ad1598c40db6	powerpc add printk levels to setup_system output
22e1dd69fec2f0e887103f6b0dc8e310f649c1c1	staging lustre lustre ptlrpc replacing strncat with strlcat to avoid overwrite size changed from using strncat with strlcat to avoid overwrite the max size take the opportunity to change a snprint to strlcpy
f31c7c7a0e4cedeee3cac9dbcb0a202008b86b54	arm exynos constify local exynos_pmu_data structure the exynos5420 instance of exynos_pmu_data structure is not modified and can be made const
6c8da24b903851656dc565e8d2336b72a35efe14	remove unneeded initializations to null iaddr_array is unconditionally initialized to null in befs_find_brun_dblindirect link
2b11885921a48767b6ace27c481beba3b42371ce	nfsd remove some dead code in nfsd_create_locked we changed this around in f135af1041f nfsd reorganize nfsd_create so dchild cant be an error pointer any more also dchild cant be null here and dput would already handle this even if it was
639900380062ecd78ee8b265ea23929c565469b4	input atmel_mxt_ts warn if sysfs could not be created if sysfs entry creation fails the driver is still usable so dont just abort probe just warn and continue
8fa9524d6b5519b6e1d549cb37bbbd10587e3eae	call dev_consume_skb_any instead of dev_kfree_skb replace dev_kfree_skb with dev_consume_skb_any in el3_start_xmit as it can be called in hard irq and other contexts dev_consume_skb_any is used as on this simple hardware the skb is consumed directly by the start_xmit function
73516ace940a7c3f374f3e34c3c03cd3886be62f	fix shadow warnings four functions declared variables twice resulting in shadow warnings this patch renames internal variables and adds blank line after declarations
ff078d8fc644722f7b163d79e8a03b00b9dc2385	tracing use seq_buf_used in seq_buf_to_user instead of len commit tracing use trace_seq_used and seq_buf_used instead of len changed the tracing code to use trace_seq_used and seq_buf_used instead of using the seq_buf len directly to avoid overflow issues but missed a spot in seq_buf_to_user that makes use of cleaned up the code a bit as well per suggestion of steve rostedt link
ea23b453103e7495ef0a90c86b92f27e17092bfa	ibmasmfs make register_filesystem the last failure exit
e307f3ac1294a399cd55ff4d25ae039bb6f53f16	be2iscsi fix the pci request region reserving reserve device pci and memory resources
22d89cc86c35d510f305a5e2bb651627487d26e9	staging rtl8712 invert comparison to reduce indentation check the condition __number__ first to be able to return immediately in case of error and then continue with the rest of the function without one extra indentation level this was found using the following coccinelle script expression statement s e s else return expression statement s identifier l e s else rc goto l
f0f879ba533ed29ca277c95d529fce703113271e	cpufreq s3c24xx remove useless checks these arent required at all remove them
d6b6c2ca6a2fbbb39051ec1d2763a947e3283683	asoc simplify format_register_str without stack usages instead of allocating two string buffers on stack and copying them back manipulate directly the target string buffer this simplifies the code well
36c269cecf05d643ddeff3a0f515e7fde5609a77	bluetooth remove dead code variable controller is assigned a value that is never used identified by cppcheck tool
b071a0bc0fdc03c4a97020ffcb5d529a02b3b564	asoc codec duplicated callback function goes to component on wm98357a codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
073b795efb5c3ed8ddfea4042d5d0d3f8e4409e8	media sh-veu initialize timestamp_flags and copy timestamp info this field wasnt set causing warn_ons from the vb2 core
64aa17ca5a4e428fcb6d0806823a99a18c548506	perf annotate browser dont change the asm line color when toggling source gets confusing remains to be chosen an appropriate different color for source code this effectively reverts perf annotate print asm code as blue when source code is displayed link
2ca73dc786c4ffb9c618e7b868d69d9faf5a755d	rtl8xxxu do not mess with afe_xtal_ctrl on to match the vendor driver do not mess with afe_xtal_ctrl on
0903353a149ea25fa1cd7e05ccb6ae4a30c09966	ext2 add __init macro to init_inodecache init_inodecache is only called by __init init_ext2_fs
f2254d293790a030ccf12ff4bb0d77b679be3f4d	remove warsdisablecoarsepowergating for early bxt no need to cater for old a revisions
faa2ad09c01c48012fe4c117d3256e354e0f9238	edac_mc edac_mc_free cannot assume mem_ctl_info is registered in sysfs fix potential null pointer dereference in edac_unregister_sysfs on system boot introduced in since commit edac rewrite the sysfs code to use struct device edac_mc_alloc no longer initializes embedded kobjects in struct mem_ctl_info therefore edac_mc_free can no longer simply decrement a kobject reference count to free the allocated memory unless the memory controller driver module had also called edac_mc_add_mc now edac_mc_free will check if the newly embedded struct device has been registered with sysfs before using either the standard device release functions or freeing the data structures itself with logic pulled out of the error path of edac_mc_alloc the bug this patch resolves for me bug unable to handle kernel null pointer dereference at null eip is at process modprobe pid __number__ call trace edac_core edac_core e7xxx_edac e7xxx_edac
2f1c4fef103ef914e266588af263fb42b502b347	convert some printk calls to pr_devel some debugging printk calls shouldve been converted to pr_devel calls do that now
435a13d839abe8c8b9ebe1be635d1ab8f7352f56	bluetooth remove redundant irk lookup when processing passive scanning results we need the resolved identity address both in check_pending_le_conn as well as later in process_adv_report since process_adv_report calls check_pending_le_conn we can simply resolve the irk earlier in the function and thereby eliminate a second lookup
001154eb242b5a6667b74e5cf20873fb75f1b9d3	bnxt_en call firmware to approve the random vf mac address after generating the random mac address for vf call the firmware to approve it this step serves __number__ purposes some hypervisor esx wants to approve the mac address the call will setup the proper forwarding database in the internal switch we need to unlock the hwrm_cmd_lock mutex before calling bnxt_approve_mac we can do that because we are at the end of the function and all the previous firmware response data has been copied
e87d9f295a7f3e9e7aae7a64f8fa9b45ceb1bf1c	video uvesafb deletion of an unnecessary check before the function call uvesafb_free the uvesafb_free function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
46a5905e1cd4a9d9d238ec7beece49ce49e2ad85	asoc sgtl5000 defer the probe if clock is not found its not always the case that clock is already available when sgtl5000 get probed at the first time the clock is provided by cpu dai which may be probed after sgtl5000 so lets defer the probe when devm_clk_get call fails and give it chance to try later it fixes the regression on imx28 since commit asoc sgtl5000 let the codec acquire its clock __float__ sgtl5000 failed to get mclock __float__ sgtl5000 probe of failed with error __float__ mxs-sgtl5000 asoc codec null not registered __float__ mxs-sgtl5000 snd_soc_register_card failed __float__ platform driver mxs-sgtl5000 requests probe deferral
fc80f21a11156dd01c5ef14153e6f9e1291ccb82	mtd nand denali remove debug lines of __file__ __line__ __func__ such debug lines might be useful when debugging the driver first but should be deleted from the upstream code
a97cea2a5cfb1e66716226ea258251317acd8ffe	clk at91 system dont try to free_irq when there is no irq in the error path of at91_clk_register_system is freed unconditionally but it may not exist or be request at all
8247bcb998f2824f89da2eb5ec21f3e7d4fa66a5	staging unisys visorbus remove unnecessary dev_set_drvdata unnecessary dev_set_drvdata has been removed since the driver core clears the driver data to null after device release or on probe failure there is no need to manually clear the device driver data to null the coccinelle semantic patch used to make this change is as follows struct device dev_set_drvdatadev null
0a62f6869f2768687af2c94d97f3b2fcf5b73367	perf probe cleanup find_perf_probe_point_from_map to reduce redundancy in find_perf_probe_point_from_map the ret variable is initialized with but overwritten by the return code of kernel_get_symbol_address_by_name and after that it is re-initialized with again setting twice looks a bit redundant this avoids the overwriting and just returns if some error happens to simplify the code link
3415d8b851307c75a1e8aa16030db9172306df78	perf timechart fix wrong svg height if we call perf timechart with __number__ arguments it means we dont want any tasks related data it works but space for tasks data is reserved in the generated svg remove this unused empty space via passing __number__ as count to the open_svg link
2a24d1f4bd7995de133c857bfdc77ac82c842300	libceph use void for untyped data in osd ops two of the fields defining osd operations are defined using char while the data they represent are really untyped not character strings change them to have type void
c113464d4351591de8791c0cadfc165836e5a725	ipv6 remove superfluous null pointer check in ipv6_local_rxpmtu the pointer to mtu_info is taken from the common buffer of the skb thus it cant be a null pointer this patch removes this check on mtu_info
f291f7deeeef84bd113ff3c309862a888e8f181b	cw1200 fix incorrect endianness annotation in a header field note that the driver doesnt directly use this field but it should be correctly defined in any case
65c7733bcf8c7d2660f6f4d0fef06aa636a69efe	arm ux500 stop informing the regulator subsystem that we have full constraints the regulator_has_full_constraints call is not required if we are booting with device tree as its assumed in this case
d211c6e82435dfa4ae9f4d80bb2ee75930bde5d4	generic-adc-battery fix checking if none of the channels are supported if none of the channels are supported index is __number__ also ensure to return error code instead of __number__ in goto second_mem_fail path
80a6f7c79b7822726a096ce9e01cc00a1eacc2c4	pm qos fix writing auto to pm_qos_latency_tolerance_us if it was already auto then writing auto again would incorrectly fail
a0376db0f234a8053100bddf26c073be79546b2b	ipv6 optimize ipv6_change_dsfield do not convert endian back and forth if the caller uses contant mask argument and most callers do we can omit runtime endian conversion here
9830ba6c9ad0165f4aa1025bcfc8e75d76083907	ath9k ath9k_hw_loadnf use reg_rmw
0b9a29add43273e64ef45472e08d38116fee1d82	arm use _rcuidle tracepoint to allow use from idle testing on arm encountered the following pair of lockdep-rcu splats info suspicious rcu usage not tainted suspicious rcu_dereference_check usage other info that might help us debug this rcu used illegally from idle cpu rcu_scheduler_active __number__ debug_locks __number__ rcu used illegally from extended quiescent state no locks held by stack backtrace cpu __number__ pid __number__ comm not tainted hardware name generic omap3-gp flattened device tree unwind_backtrace from show_stack from dump_stack from pwrdm_set_next_pwrst from omap3_enter_idle_bm from cpuidle_enter_state from cpu_startup_entry from unwind_backtrace from show_stack from dump_stack from _pwrdm_state_switch from _pwrdm_post_transition_cb from pwrdm_for_each from pwrdm_post_transition from omap_sram_idle from omap3_enter_idle_bm from cpuidle_enter_state from cpu_startup_entry from these are caused by event tracing from the idle loop and they were exposed by commit rcu remove superfluous versions of rcu_read_lock_sched_held which suppressed some false negatives the current commit therefore adds the _rcuidle suffix to make rcu aware of this implicit use of rcu by event tracing thus preventing both splats
016f97b11b3c7fe834260150d0f9cb36d06b2eb8	be2net fix endian issue in rx filter command use cpu_to_le32 for mcast_num field in rx filter command as this field is of type u32
7a0e42f168337d4af8fe230c1043cb04786c04c2	s390 asm offsets fix coding style because of readability reasons we ignore the __number__ character line limit in asm offsets just one line per define nothing else
c399acfb85974a3ebc0dec0e7fb7b60cb1aeac7b	scsi hisi_sas modify some values of itct table set smp connection timeout and continue awt timer clear itct table when dev gone
f70a456a8829411fe9a18ca1ffcefbb1e960e715	staging brcm80211 remove macro definition drv_module_name the macro definition drv_module_name has exactly the same value as kbuild_modname so using that instead now
6d2398743f674028ec2b535730557e6bf387f700	staging vt6655 fix memory leak in wpa_ioctl fix a memory leak in the wpa_ioctl error handling path so that param is also freed correctly in case of an unsupported ioctl detected by coverity cid __number__
59826d9becf76d949d09173e2c41e4049f4ca763	i40e dont allow reduction of channels below active fd rules if a driver is unable to maintain all current user supplied settings from ethtool or other sources it is not ok for a user request to succeed and silently trample over previous configuration to that end if you change the number of channels it must not be allowed to reduce the number of channels queues below the current flow director filter rules targets in this case return when a request to reduce the number of channels would do so in addition log a warning to the kernel buffer explaining why we failed and report the rules which prevent us from lowering the number of channels change-id if41464d63d7aab11cedf09e4f3aa1a69e21ffd88
c9b9638f617871aa83c197eed8f068294c843b69	asoc rsnd fixup print debug message after read debug meesage for rsnd_mod_read should be prints after read
d9fdb4ed00036514146497fd48b906f0e12b68f7	net hns fix code style about hns driver this patch fixes code sytle of hns driver to make it simple
920df8d7facde29e4124cae95ebb8de1661e17e5	usb iowarrior refactor endpoint retrieval use the new endpoint helpers to lookup the required interrupt-in endpoint iowarror56 devices also requires an interrupt-out endpoint which is looked up in a second call note that the descriptors are searched in reverse order to avoid any regressions
d82f94013a9897e02a93400e4c16efe82b530eaa	pinctrl sunxi fix masking when setting irq type
55edcbb2db3a41c1520425b84c620286f4e5e394	arm imx add axi address filter support for mmdc profiling add support for an extra config parameter for perf commands axi_id which will be written in the mmdcs madpcr1 register to filter memory usage profiling see reference manual chapter __float__ mmdc profiling for axi id usage
b573b0e65616c1ae5c5dd2c14fd62d3ded3d5466	greybus camera clean up when ap link power mode configuration failed restore the module link power mode to the previous state in that case
a3b41b7a3183b1f6a133e2c29502eae515f915e0	staging android logger module_exit implementation this patch creates the module_exit for the android logger so that it can be loaded and unloaded as a module the android logger is already declared as a tristate in the kconfig but the module_exit function was missing device_initcall works also with modprobe since module_initx __initcallx __initcallfn device_initcallfn tested against f4a75d2eb7b1e2206094b901be09adb31ba63681 linux
84e2365d7dcc3e6414be613d7fefa9f28d66859b	media coda rename prescan_failed to hold and stop stream after timeout rename the per-context prescan_failed variable to hold as this is what the flag does it temporarily keeps the coda from running until new data is fed into the bitstream buffer or stop_streaming is called on the input side a prescan failure on is one possible reason to enter this state another one is a picture run timeout on
f15a8e9a14196bad904d040e7b587bdf76ad35ed	delete an unnecessary check before drm_fbdev_cma_hotplug_event the drm_fbdev_cma_hotplug_event function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software link
df414b33bb1eb3a0ae52ccd4ecfec9323a4f89dc	lightnvm add is_cached entry to struct ppa_addr a target requires a method to identify ppas that are either cached in memory or on disk this can efficiently be maintained within the ppa the target host-side translation table can then lookup a ppa and know from the ppa if it is cached or on disk in the case it is cached it is the responsibility of the target to maintain this cache
b4e7f2c9450968303d24b48fec9da8abebcc0036	nfsd register a shrinker for drc cache entries since we dynamically allocate them now allow the system to call us up to release them if it gets low on memory since these entries arent replaceable only free ones that are expired or that are over the cap the the seeks value is set to __number__ however to indicate that freeing the these entries is low-cost
a63bafd8e3a48263983e046ba34607d1ceb1743b	media s5p-fimc fix variable type in fimc_device_run in fimc_device_run variable ret is accepting signed integer values but currently it is defined as u32 this patch will modify the type of ret variable to int
36173112354a4f5993d464f95b04d41e1eec10a0	greybus connection unbind protocol at exit unbind protocol at connection exit rather than when the connection is destroyed now a protocol is only bound while a connection is enabled
cd0fa970b5e49c8249b1f5520c7764dec2ac9310	staging comedi me_daq cleanup the range tables fix the whitespace
f203c3b33f0891da98ae3dcf829851c48473ed60	zbud avoid accessing last unused freelist for now there are nchunks of __number__ freelists in zbud_pool the last unbuddied63 freelist linked with all zbud pages which have free chunks of __number__ calculating according to context of num_free_chunks our max chunk number of unbuddied zbud page is __number__ so none of zbud pages will be in last freelist but still we will try to find an unbuddied zbud page in the last unused freelist it is unneeded this patch redefines nchunks to __number__ as free chunk number in one zbud page hence we can decrease size of zpool and avoid accessing the last unused freelist whenever failing to allocate zbud from freelist in zbud_alloc
198b8611315f793a8f674c3ca3324028e19634aa	leds use devm_kzalloc in file devm_kzalloc makes cleanup simpler
dc12e909490dcad210ee52bc1b0776c95dcc9edf	qstr constify instances in procfs
05476e6469740fd961bc3a3665cf2ff52548e41b	media usb airspy airspy dont print error when allocating urb fails kmalloc will print enough information in case of failure
bc384c77e3bb3df2b396f4fb246b452571896c5e	glk uses the same gms values as skl so dont forget to reserve its stolen memory bits link
aaaab4223ebad2470d56d5db2e71c5395d9609b3	mfd use devm_regmap_init_i2c devm_regmap_init_i2c is device managed and makes cleanup simpler
527b863f6ad4f4f1707cbc2237df9d83d0c848c1	drm bridge dw-hdmi remove encoder field from struct dw_hdmi the field isnt needed remove it link
5d24b7de41ab53b3f309629fa73e285a8f9645e2	staging comedi pcl816 convert printk messages in pcl816_attach convert the printk messages in this function to mesages remove the ones that are just added noise
87bc359b9822a73f264f24f3c1b3e4e7e5ed7d72	speed up __iowrite64_copy by using pci store block insn benefit from pci store block instruction by writing up to __number__ bytes with a single instruction to mmio space depending on the workload this can result in a huge performance increase due to the reduced number of instructions the ordering guarantees of single stores vs one store block are identical
ed48205fb4054bab68fe47648ba4b7ceb67fcc17	clk sunxi-ng mux fix determine_rate for mux clocks with pre-dividers the determine_rate helper used ccu_mux_helper_adjust_parent_for_prediv to adjust the parent_rate to account for pre-dividers but then passed the pristine parent clock rate from clk_hw_get_rate to the round callback thereby ignoring the pre-divider adjustment in addition it was saving the adjusted parent rate back into struct clk_rate_request this patch fixes this by saving the pristine parent clock rate and adding a copy that is adjusted and passed to the round callback the pristine copy if it is the best solution would be saved back to struct clk_rate_request
828e66c0edf97bcb79b59b1ddd803a50629b3937	i2c omap fix bus recovery setup at least on the am335x enabling omap_i2c_systest_st_en is not enough to allow direct access to the scl and sda pins in addition to st_en we need to set the tmode to loop back io mode select also as the reset values of scl_o and sda_o are __number__ which means drive low level we need to set them to __number__ which means high-impedance to avoid unwanted changes on the pins as a precaution reset all these bits to their default values after recovery is complete
7c0c3b1a8a175437991ccc898ed66ec5e4a96208	tuntap forbid calling tunsetiff when detached michael points out that even after stefans fix the tunsetiff is still allowed to create a new tap device this because we only check but the were introduced fix this by failing early in tun_set_iff if the file is detached after this fix theres no need to do the check again in tun_set_iff so this patch removes it
af504e5d39de35dc3de5f42c357fe1b519fea33f	arm omap i2c fix omap_register_i2c_bus return value on success commit omap i2c split device registration and convert to omap_device makes omap2_i2c_add_bus return a pointer to an omap_device instead on success instead of __number__ this breaks the omap_register_i2c_bus abi and results in the igep0020 board code detecting an i2c bus registration error when there is none fix the problem by using ptr_ret instead of ptr_err in omap2_i2c_add_bus
00fef2b26a354ab9c1316f15677cb36966c91240	crypto caam remove unused may_sleep in dbg_dump_sg
d3c8a0b2becf1015f502bf4b0f50fe18e0ed8a93	correctly test devm_ioremap return in case of error the function devm_ioremap_nocache returns null not err_ptr the is_err test in the return value check should be replaced with null test
937a3706880c9bd3ff106cba296ce7bf751951f2	staging comedi pcl816 tidy up the analog input for aesthetics move this function out of the async command support code for safety the int request end-of-conversion flag should be cleared before doing each conversion and after the final data sample is read this driver does that but its a bit awkward with the initial clear being outside the for loop that reads the samples refactor the function a bit so its more like the pcl818 driver and we can use common code to clear the flag for a timeout and after the last sample do a bit of other tidying up during the move
a8669f60321c8cb08af76438727b6460d1b591b6	asoc max98095 cleanup manual bias level transitions since the asoc core now takes care of setting the bias level to snd_soc_bias_off when removing the codec there is no need to do it manually anymore either the manual transition to snd_soc_bias_standby at the end of codec probe can also be removed as the core will automatically do this after the codec has been probed
45efcb2d32d35f6509543e477568842d8467035d	fix module_device_table this fixes building the sirfsorc-uart driver as a loadable module which uses an incorrect module_device_table by changing the reference to the correct symbol
7cfae24953fa79c69f1bf4edbf44546648de55ba	staging vt6655 device_main replace null comparison with replace null comparison to resolve checkpatch issue x null
fcbf6a087a7e4d3f03d28333678a1010810a53c3	bio modify __bio_add_page to accept pages that dont start a new segment the original behaviour is to refuse to add a new page if the maximum number of segments has been reached regardless of the fact the page we are going to add can be merged into the last segment or not unfortunately when the system runs under heavy memory fragmentation conditions a driver may try to add multiple pages to the last segment the original code wont accept them and ebusy will be reported to userspace this patch modifies the function so it refuses to add a page only in case the latter starts a new segment and the maximum number of segments has already been reached the bug can be easily reproduced with the st driver __number__ set config_scsi_mpt2sas_max_sge or config_scsi_mpt3sas_max_sge to __number__ __number__ modprobe st __number__ dd error writing device or resource busy
8ccb154c0e9b316999f518dd5fd0a4d2db3089af	fs mark function as static in mark function as static in because it is not used outside this file this also eliminates the following warning in warning no previous prototype for
486416798aa8ec2035492b2770104ba5d2a7da6d	staging wilc1000 rename drvhandler in wilc_wlan_cfg_commit function this patch rename drvhandler to drv_handler that is third argument of wilc_wlan_cfg_commit function to avoid camelcase
61fdb4acc8411bf50589bc67431ad12e21e7678a	target fail unmap when this patch adds a check within sbc_parse_cdb to fail a unmap op if the backend device has emulate_tpu disabled
c22b0ff572e4b3723a3c552e74a4ba2497606040	iwlwifi mvm freeze the non-shared queues when a station goes to sleep when a station goes to sleep we cant transmit any frame to it this means that until that station will wake up a queue that is dedicated to this station wont progress at all take this into account when monitoring stuck queues and dont account for the time the station was asleep this allows to mask false positives where the queues are stuck not because of a bug but because of the station being asleep
0a6b9b04dbe81d781720e077aea147805af0ee87	media fsl-viu drop format names the names of the pixelformats is set by the core so there no longer is any need for drivers to fill it in
bd84f4ae9986ac9acd278566ccb39c60bc961abb	usb dwc2 add extra delay when forcing dr_mode fixes an issue found on rockchip rk3036 and rk3188 soc platforms for some reason the existing msleep25 is not enough after the force mode the following patch was reported to fix the issue this does increase the probe delay again slightly but not up to the level it was before the original series of patches that this fixes it does not cause any other issues when tested on synopsys haps and altera socfpga platforms need to revisit this series next release to see if we can address these issues without having an unconditional delay
d14e71103bf61ed6c3de542f1752b6ce039b773d	mlx5 fix error flow in add_keys if mlx5_core_create_mkey fails decrease the pending counter to undo the previous increment
12598695c26ff8fccea92bd36ee3617a6da9b0d0	i2c mv64xxx use bit macro for register value definitions
9f0b4cbdee09e635906611ed8dcc5c51116cbd75	iwlegacy use correct structure type name in sizeof correct typo in the name of the type given to sizeof because it is the size of a pointer that is wanted the typo has no impact on compilation or execution this problem was found using coccinelle the semantic patch used can be found in message __number__ of this patch series
6c24499f40d96bf07a85b709fb1bee5cea611a1d	tracing fix small merge bug during the __float__ merge a conflict happened and the resolution was almost but not quite correct an if statement was reversed duh that was just silly of me linus
98a13e487a3bdac8508e4dcb98d63385fabe6767	mlx4_core fix location of counter index in qp context struct fix the address handle portion of the qp context structure to have the correct bit location for the counter index field
7a2a7a371145e83ad60482313e8cd7501994df3a	arm shmobile ape6evm add dma support to mmcif add dma support for mmcif on ape6evm using the shdma dmaengine driver
8d5d8a5fd7f9337b2eff689df14ff3ae617f3ae6	rds rdma start rdma listening after init this prevents rds from handling incoming rdma packets before rds completes initializing its components
13b3d72705817cdcf003226dd9f22f3ecee64ba4	recover from sync lost error flood by resetting the lcdc recover from sync lost error flood by resetting the lcdc instead of turning off the sync_lost error irq when lcdc starves on limited memory bandwidth it may sometimes result an error situation when the picture may have shifted couple of pixels to right and sync_lost interrupt is generated on every frame lcdc main reset recovers from this situation and causes a brief blanking on the screen
f40ac2ae1b506484dd9261a24bbf3e86b2206ff8	zram prevent data loss in error cases of function zram_bvec_write in function zram_bvec_write previous data at the index is already freed by function zram_free_page when failed to compress or zs_malloc there is no way to restore old data therefore free previous data when its about to update also no need to check whether table is not empty outside of function zram_free_page because the function properly checks inside
a3250c92aa83e199624133e692a92ecc1d3e7466	arm time make use of arm_get_current_stackframe make use of the arm_get_current_stackframe api so that the frame pointer is correctly referenced in thumb2 mode
8b44f00f8c952ab6eb658090383571b2ec7d253f	fix signed wrap around when decrementing index i change predecrement compare to post decrement compare to avoid an unsigned integer wrap-around comparisomn when decrementing in the while loop for example if the debugfs_create_file fails when i is zero the current situation will predecrement i in the while loop wrapping i to the maximum signed integer and cause multiple out of bounds reads on as the loop interates to zero also as borislav petkov suggested return rather than on the error condition link
32aeab17457c13e6a448ba0f6f3c03d6705e5592	check crtcs dpms mode at setcrtc when fb changing is requested crtcs dpms mode should be on if not on return so that the hardware cant be accessed if user requesed dpms off and next setcrtc with an another fb then the hardware can be accessed with dpms off to write overlay data onto some registers so this patch will prevent from accessing the hardware with dpms off
484bb6c969523aa547d854bb57104339ee4aa800	fix handling mipi_dsi_pixel_format_to_bpp result the function can return negative value so it should be assigned to signed variable the problem has been detected using patch
7a9331c0c0fcd57ae3966946188e1416fe415351	staging vt6655 rfbsetpower remove unused variable bypwrdbm bypwrdbm is set but never used
b8071ad893841aba967b7c54e712179864cdf5c3	remove needless bracketization
2e321806b681b1920b6dfa7d81bbe3d312fe1d19	revert vfs remove unnecessary d_unhashed check from __d_lookup_rcu this reverts commit it turns out the d_unhashed check isnt unnecessary after all while its true that unhashing will increment the sequence numbers that does not necessarily invalidate the rcu lookup because it might have seen the dentry pointer before it got unhashed but by the time it loaded the sequence number it could have seen the sequence number after it got unhashed end result we might look up an unhashed dentry that is about to be freed with the sequence number never indicating anything bad about it so checking that the dentry is still hashed reading the sequence number is indeed the proper fix and was never unnecessary
db3a1a43fbb3c0e2f993ce5e7305641075eeb1d6	serial txx9 remove duplicate txx9_sifcr_tdil_mask define the txx9_sifcr_tdil_mask define is cut and pasted twice so we can delete the second instance
aa8c65a4fdc881b32c012c45f985617659aef1a9	scsi aic94xx add a missing call to kfree most error branches following the call to kzalloc contain a call to kfree this patch add these calls where they are missing and set the relevant pointers to null this issue was found with hector
abfc7692f19f141ad57fd4a69b61c7596bdb4c39	staging ced1401 fix ced_state_of_1401 rename camel case arguments and locals in function ced_state_of_1401
a76f73dcd036d53616058aaeaf6986f57061dfa0	silence compiler for missing prototype warning no previous prototype for bool intel_dp_get_alpm_statusstruct intel_dp
9c46ffcd521474056629aea580a092559f721b32	arm omap2 timer always call clocksource_of_init when dt if booting with dt lets make sure to always call clocksource_of_init as this will make it easier to move timer code to in the future
ac8a494894e0e7add2fd0919d1929c21d8cf03e1	fix section mismatch errors in tegra30 pinmux tegra30_pinmux_init is called from the pinmuxs probe function and hence should be __devinit not __init
4e0b0036210daea5ec34c00bafd98e9457e93bcb	media stv0900 fix bad indenting stv0900_search_srate_fine warn inconsistent indenting stv0900_algo warn inconsistent indenting
f8c4b0e73b636fe06e8283f29905c2e60ed66fa1	usb musb omap2430 fix omap_musb_mailbox glue check again commit usb musb omap2430 fix the readiness check in omap_musb_mailbox made the check incorrect as we will lose the status during the normal built-in probe order twl4030_usb is probed after musb omap2430 but before musb core is ready as a result if you boot with usb cable on and load g_ether the connection does not work as the code thinks the cable is off and the phy gets powered down immediately this is a major regression in so the proper check should be exit if _glue is null but if its initialized we memorize the status and then check if the musb core is ready
b92084ba545b73933ca179d46fe11801f7f9d349	mips octeon configure minimum pko packet sizes on cn68xx cn68xx has common minimum packet size filters that need to be configured for the traffic to work just set them to a default value patchwork
b5f0902dcdb5e6f8f1eb8dd083ae56dc8245ab53	use dev_get_platdata use the wrapper function for retrieving the platform data instead of accessing directly this is a cosmetic change to make the code simpler and enhance the readability
32bf1deae15b67839a2f0cb233254125be73fc78	xfs keep sb_bad_features2 the same a sb_features2 whenever we update sb_features2 we need to update sb_bad_features2 so that they remain identical on disk this prevents future mounts or userspace utilities from getting confused over which features the filesystem supports
44f751cee1b4baef9e3b49c6bd954f8b12b097a6	hwmon da9055 fix chan_muxda9055_adc_adcin3 setting set chan_muxda9055_adc_adcin3 da9055_adc_mux_adcin3
9f1d341415b9d84fcf0cb04f409bd61fac5e2f14	arm xen export hypervisor_multicall to modules arm xen implement multicall hypercall support forgot to do this
1a35d9df80c0e45afd764f0214e41f27a8a2fce7	adjust inconsistent is_err and ptr_err change the call to ptr_err to access the value just tested by is_err the semantic match that finds this problem is as follows expression if is_erre ptr_erre if ptr_erre is_erre ptr_erre1
005718c08be33e28ab89e820256bcf1fad4a370a	mfd sec-core fix sparse null pointer warning fixes the following sparse warning warning using plain integer as null pointer
3ee2eb6da20db1edad31070da38996e8e0f8adfa	perf annotate support jump instruction with target as second operand architectures like powerpc have jump instructions that includes a target address as a second operand for example bne __number__ add support for such instruction in perf annotate objdump __number__ ld __number__ cmpdi __number__ bne __number__ __number__ ld __number__ std __number__ ld corresponding perf annotate before patch ld cmpdi v bne __address__ ld std __number__ ld after patch ld cmpdi v bne __number__ ld std __number__ ld link
4d928b176a7e9c59a54a3d48fa16f9421dea0ad8	staging comedi cb_pcimdda remove dio_chans from the private data the cards supported by this driver always have __number__ compatible device remove the dio_chans variable from the private data and always initialize the __number__ subdevice
4dc3c0712720ca70b0563b4b64cf14175a96ef8c	add delay during cbus reset without delay cbus sometimes was not reset properly link
92947789815f9ec808ad3de177af99a5d02ef6b2	clk wm831x get rid of the implementation of remove function the remove function implemented for platform drivers remove callback just return __number__ as part of its implementation remove this apis and do not pass the valid for platform driver
6fa283b07e708913aa5fb38a3a20ba7adc05ba56	tune down gt register while gt waking disabled message weve had this since forever ands randomly reporting issues and as such causing of ci noise mika is working on proper debug infrastructure for this and on fixing this properly meanwhile make ci more useful for everyone else bugzilla link
6241bf6a59a41c7ca742c043416b6d57109c6b5d	mips ath79 make ath79_ddr_ctrl_init compatible for newer socs ar913x ar724x and ar933x are the only socs where the ath79_ddr_wb_flush_base starts at all newer socs use invert the logic to make the code compatible with ar95xx patchwork
4514108c5b8088ab4a72ba27eb093882d76619cf	staging acknowledge break condition clear the break flag from the isr register doing that we avoid to read the same condition for the next character received
a50188dae3089dcd15a6ae793528c157680891f1	acpi video enhance the quirk detect logic of _bqc currently we decide if the _bqc is using index by first setting the level to maximum and then check if _bqc returned maximum if not we say it is using index this is not true for some buggy systems where the _bqc method will always return a constant __number__ or __number__ for the two broken system and thus break the current logic so this patch tries to enhance the quirk detect logic for _bqc we do this by picking a test_level it can be the maximum level or the mininum one based on some condition and we dont make the assumption that if _bqc returned a value that is not what we just set it must be using an index instead we will compare the value returned from _bqc and if it doesnt match see if the returned value is an index and if still no clear the capability of _bqc references references
4a68ab100f24eca34c5d79b937df4dbd0cbc0b4a	wil6210 let ip stack re-check hw csum errors fix for tcp iperf from windows to linux stall after about hardware reports false errors in some situations microsoft ip stack in violation of rfc __number__ set tcp checksum that should be as __address__ hardware report rx csum error if hw csum absolutely trusted this frame can be never received as re-transmitted one will have same csum problem in addition it mess up block ack reorder buffer as if packet dropped it is not score boarded there
8b570dc9f7b634e853866ce40097c0342ac5bb81	sctp only drop the reference on the datamsg after sending a msg if the chunks are enqueued successfully but sctp_cmd_interpreter return err to sctp_sendmsg mainly because of no mem the chunks will get re-queued but we are dropping the reference and freeing them the fix is to just drop the reference on the datamsg just as it had succeeded as if the chunks werent queued this is enough to get them freed if they were queued they will get freed when they finally get out or discarded marcelo ricardo leitner
c40a4518166b6c500c844579ec7069d4a0419f30	acpi-cpufreq do not load on k8 de3ed81d746d cpufreq change link order of x86 cpufreq modules changed cpufreq drivers link order so that powernow-k8 gets loaded first due to earlier k8s having bios bugs however now that acpi-cpufreq supports both amd and intel cpus with hw p-states we want to load it first so that cases where acpi-cpufreq and powernow-k8 are both built-in and powernow-k8 initializing first can be addressed so make sure that even if acpi-cpufreq gets loaded first it errors out on k8s and powernow-k8 can be loaded then successfully references
caf6d12d036ea78e8f54c40fa99320416b040c71	staging comedi icp_multi remove valid member from private data this member is set at the end of the driver attach and is only used to verify that icp_multi_reset can be called in the the only requirement for icp_multi_reset to work is that the is valid remove the valid member from the private data and use to see if the reset can be done
3b10d0095a1e2d6ce11f6537e04806ff8aba9cdd	prevent kernel execution of user space isa __number__ defines new encoded access authority that allows instruction access prevention in privileged mode and allows normal access to problem state this patch just enables iamr instruction authority mask register enabling amr would require more work ive tested this with a buggy driver and a simple payload the payload is specific to the build ive tested mpe also tested with lkdtm echo exec_userspace lkdtm performing direct entry exec_userspace lkdtm attempting ok execution at __number__ lkdtm attempting bad execution at __number__ unable to handle kernel paging request for instruction fetch faulting instruction address __number__ oops kernel access of bad area sig __number__ nip __number__ lr __number__ ctr __number__ regs __number__ trap __number__ not tainted msr __number__ cr __number__ xer __number__ call trace unreliable
89abb5ad10ae8ac3405e635ac80815f781c8b8e9	drop while calculating broadcast we dont need broadcast to be set to zero or one but to zero or non-zero and so the extra operation to convert it to zero or one can be skipped also change type of broadcast to unsigned int type of link
c1df932c0574c13ab3ce72e969c9647ff3aaad68	mac80211 fix off-channel mgmt-tx uninitialized variable usage in the last change here i neglected to update the cookie in one code path when a mgmt-tx has no real cookie sent to userspace as it doesnt wait for a response but is off-channel the original code used the skb pointer as the cookie and always assigned the cookie to the tx skb in ieee80211_start_roc_work but my change turned this around and made the code rely on a valid cookie being passed in unfortunately the off-channel no-wait tx path wasnt assigning one at all resulting in an uninitialized stack value being used this wasnt handed back to userspace as a cookie since in the no-wait case there isnt a cookie but it was tested for non-zero to distinguish between mgmt-tx and off-channel fix this by assigning a dummy non-zero cookie unconditionally and get rid of a misleading comment and some dead code while at it ill clean up the ack skb handling separately later
b408809487e0b80fdd7869f92b5ca3be55923e9d	media lirc_dev fix error return value if ioctl is called it cannot be a case of invalid system call number enosys that is a enotty case which means that the device doesnt support that specific ioctl command so replace enosys with enotty
04216da393e1f6653cc99a58f2fa48d0dde417c0	wl12xx ap-mode prevent tx to stations dont pollute the queues with tx directed to invalid stations this can happen during recovery
337bb336b95bd7884fa3a194eafbdf52a0216b2e	alsa atmel_abdac clk_round_rate can return a zero upon error treat both negative and zero return values from clk_round_rate as errors this is needed since subsequent patches will convert clk_round_rates return value to be an unsigned type rather than a signed type since some clock sources can generate rates higher than hz eventually when calling clk_round_rate only a return value of zero will be considered a error all other values will be considered valid rates the comparison against values less than __number__ is kept to preserve the correct behavior in the meantime
7614f023502475c0532a9024c0b1ea42ea61c225	staging rtl8188eu rework function odm_updatetxant_88e rename camelcase function name and local variables remove unnecessary debugging messages
8b1645685acf3c7e0b93611fb4b328ef45c47e92	mm thp dont hold mmap_sem in khugepaged when allocating thp when allocating huge page for collapsing khugepaged currently holds mmap_sem for reading on the mm where collapsing occurs afterwards the read lock is dropped before write lock is taken on the same mmap_sem holding mmap_sem during whole huge page allocation is therefore useless the vma needs to be rechecked after taking the write lock anyway furthemore huge page allocation might involve a rather long sync compaction and thus block any mmap_sem writers and affect workloads that perform frequent munmap or mprotect oterations this patch simply releases the read lock before allocating a huge page it also deletes an outdated comment that assumed vma must be stable as it was using alloc_hugepage_vma this is no longer true since commit mm thp khugepaged add policy for finding target node
c3099a5294f2c7266234e8ea35cbffc20a41aa9a	pm domains add a detach callback to the struct dev_pm_domain the intent of this callback is to simplify detachment of devices from their pm domains further patches will show the benefit
c367982ad9b927ec1b1fd66a462b72950fe5370b	iio dac ad5064 use apis apis are device managed and make code simpler
1ae4ec1415a98328b693db588f30d02bb3ca73aa	spi spi-txx9 add missing clock unprepare calls for ccf while the custom minimal txx9 clock implementation doesnt need or use clock unprepare calls they are dummies if they are mandatory when using the common clock framework hence add them to prepare for the advent of ccf
85f7f220fbcabec5ce76b8dcb065d200989f6a48	backlight lp8788 remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure since commit device-core ensure drvdata null when no driver is bound thus it is not needed to manually clear the device driver data to null
f622b517563b0d3be6c41e932124e0b717149ad8	fix irq pointer dereference in int handler irq in vmurs int handler can be an error pointer dont dereference this pointer in that case
9783de20967a59d7627772bf77fc8066c47bef79	drm resetting rotation property reset rotation property to __number__ v2 resetting after disabling the plane
ec39ef83eb9b22cc732329e85fc4ec03e76d9dda	i2c-s3c2410 add hdmiphy quirk for s3c2440 this patch adds support for s3c2440 i2c bus controller dedicated hdmiphy device on exynos4 platform some quirks are introduced due to differences between hdmiphy and other i2c controllers on exynos4 these differences are no gpios hdmiphy is inside the soc and the controller is connected internally due to unknown reason probably hw bug in hdmiphy the controller a transfer fails to finish the controller hangs after sending the last byte the workaround for this bug is resetting the controller after each transfer
5e352519519623a0b62587c606280e534d0cf1d9	kvm nsvm propagate the npf exitinfo to the guest this is similar to what the ept code does with the exit qualification this allows the guest to see a valid value for bits
ea0504f554c8f989eab58549300d15582d36f039	fix packet type detection for ipv6 in order for the checksum offloads to work correctly we need to set the packet type bit in the tx context buffer
767f30210bee1bb74ab042e237c2a21e77874070	tile avoid overflow in ns2cycles in commit sched x86 avoid unnecessary overflow in sched_clock and in recent patch clocksource avoid unnecessary overflow in cyclecounter_cyc2ns the mult-shift approach is replaced by __number__ steps to avoid storing a large intermediate value that could overflow has a similar pattern in cycles2ns and this copies the same pattern in this function
5ec16a8500d339b0e7a0cc76b785d18daad354d4	use clientid management rpc_clnt for secinfo as per rfc __number__ and rfc __number__ security considerations commit nfs use krb5i to establish nfsv4 state whenever possible uses the nfs_client cl_rpcclient for all clientid management operations
e09f56f3f09638a0f0120be81352378ed1727431	iio dac max5821 fix module autoload for of platform driver this platform driver has a of device id table but the of module alias information is not created so module autoloading wont work
3190fbee0176a40a8dd13200862d39f956692f63	media em28xx only change i2c bus inside em28xx-i2c theres currently a bug on em28xx-i2c that makes it write the wrong values to register __number__ that controlls the i2c bus speed and bus fix it to change only the i2c bus flag
977f1a0a3f8185136eb78a65b579def69862c635	dm raid use mddev rather than
4cd9e8377f6f18ffabad2cf0967855432db3dbce	wil6210 fix secondary connect when sta receiving connect when already connected it should return error
6df17a6577ee1f4dc5d36a1520f8f3bfb38852c8	trivial clean up code
f2c22605c5a12c605a7164585c96f0835e9e591c	simplify xgi_getrateptrcrt2 since the smaller lcdrefreshindex is contained identically in lcdarefreshindex we can simply use lcdarefreshindex and skip the since lcdarefreshindex is only used readonly and contains only small unsigned values we also change its declaration to const u8 in order to prevent an out-of-bounds access i changed the mask from to and added a dummy value
eb55fab997c0bf1b1ddf0a7199da0ceb18432b96	asoc intel select rt5672 asrc clock source on cherrytrail and braswell on cherrytrail and braswell the i2s bclk is which cannot be supported by rt5672 in slave mode and can cause noise this patch selects codec asrc clock source to track i2s1 clock so that codec asrc can be enabled to suppress the noise
8cc311167c22f9365304b2b20225df2d881c8843	pm opp fix off-by-one bug in dev_pm_opp_get_max_volt_latency loop reading array at given index before checking if index is valid results in illegal memory access the bug was detected using kasan framework
4dab0e5fe8ceaaf267003b5d7aa0c31c1092bee0	media em28xx fix em28xx-rc load the logic that checks if a device has remote control is wrong due to that the em28xx rc module is not loaded by default fix the logic in order to make it work properly
7f0ae647b29ba80d5a1127804ba478e3de8a6b4c	bluetooth fix hci command sending when powering on le-only adapters this patch makes sure that we dont send commands for le-only adapters when they get powered on doing this would just cause command errors
1ee8f65b5689504b98dacb6641fc8b2cc5618ad4	tty serial imx remove the use of mxc_internal_irqs as the part of the effort to enable spare_irq for imx platform the macro mxc_internal_irqs will be removed the imx serial driver has a references to it for a decision on flags of request_irq call based on rtsirq is beyond mxc_internal_irqs however the searching on imx platform code tells that rtsirq will never be beyond mxc_internal_irqs that said the check consequently the reference to mxc_internal_irqs are not needed so remove them
7491e5b48eefd426c8059388470c268d7508ef50	vidi remove unused varables this patch removes unnsed varables in vidi_disable function
0d2f6bb4b2c3fae1683ca604400a9c90a7399963	staging lustre lustre libcfs fix sparse warnings export_symbol this fixes warning export_symbolfoo should immediately follow its
330fa7f3140481463eb4956c38b9a44dfeee52b9	hisi_sas add slot_index_alloc_quirk_v2_hw add v2 hw custom function slot_index_alloc_quirk_v2_hw sas devices should have iptt bit0 equal to __number__
cef5ecf96b28dc91c4e9f398a336c578fb9e1a0c	net_sched act_gact make tcfg_pval non zero first step for gact rcu operation instead of testing if tcfg_pval is zero or not just make it __number__ no change in behavior but slightly faster code the barriers while not strictly needed at this stage are added for upcoming spinlock removal
62a02c98ce03bb214009509a4802b7b63f59621c	net fec dont clear ipv6 header checksum field when ip accelerator enable the commit net fec enable ip header hardware checksum enable hw ip header checksum for ipv4 and ipv6 which causes ipv6 cannot work the issue is reported by russell king for fec ip header checksum function insert ip header checksum this iins bit is written by the user if set ip accelerator calculates the ip header checksum and overwrites the iins corresponding header field with the calculated value the checksum field must be cleared by user otherwise the checksum always is so the previous patch clear ip header checksum field regardless of ip frame type in fact ip hw detect the packet as ipv6 type even if the iins bit is set the ip accelerator is not triggered to calculates ipv6 header checksum because ipv6 frame format dont have checksum so this results in the ipv6 frame being corrupted the patch just add software detect the current packet type if it is ipv6 frame it dont clear ip header checksum field
109228389a943edd7e5c6ae94a7fda119691baec	partial revert of kthread ensure locality of task_struct allocations after discussions with tejun we dont want to spread the use of cpu_to_mem and thus knowledge of topology details into callers but would rather ensure the callees correctly handle memoryless nodes with the previous patches topology add support for node_to_mem_node to determine the fallback node and slub fallback to node_to_mem_node node if allocating on memoryless node adding and using node_to_mem_node we can safely undo part of the change to the kthread logic from
80571a9ea4ca9b6fee7ef0c13d3f31e774e0533b	netfilter ipset fix hash resizing with comments the destroy function must take into account that resizing doesnt create new extensions so those cannot be destroyed at resize
ba7736696341ad4253125055c0c85aa9f42959a0	iscsi-target fix iscsit_allocate_se_cmd_for_tmr failure path bugs this patch fixes two bugs in allocation failure handling in iscsit_allocate_se_cmd_for_tmr this first reported by danc is a free-after call to transport_free_se_cmd this patch drops the transport_free_se_cmd call all together as iscsit_release_cmd will release existing allocations as expected the second is a bug where iscsi_cmd_t was being leaked on a allocation failure so make this jump to iscsit_release_cmd as well
2e3a5ef28f8182c439a5a276ff4c0883c02787f4	arm mach-shmobile armadillo800eva add sdhi1 support we can switch by sdhi1 is con8 on
7df0b278385df3c8d0606c620e6ab1e9eea3d9cd	genirq fix type inconsistency the return type of kstat_irqs_usr is unsigned int and kstat_irqs also returns unsigned int so sum should be unsigned int here as well link
29bce2f3997a8dc5195b7a7724362d1e55df7bb2	btrfs unlock extent and pages on error in cow_file_range when i converted the bug_on for the free_space_cache_inode in cow_file_range i made it so we just return an error instead of unlocking all of our various stuff this is a mistake and causes us to hang when we run into this this patch fixes this problem thanks
cf302bfdf3039853fce812ae1ffd0ac24f5b468f	document pt_buffer_reset_markers the comments in the driver dont make it absolutely clear as to what exactly is the calling order and other possible constraints of buffer management functions document constraints and calling order for the buffer configuration functions while at it replace a redundant check in pt_buffer_reset_markers with an explanation why it is not needed link
43e43c9ea60a7a1831ec823773e924d2dadefd44	dm mpath fix infinite recursion in ioctl when no paths and in multipath_prepare_ioctl pgpath is a path selected from available paths is true if we cannot send a request immediately to paths either because there is no available path the path group needs activation pg_init pg_init is not started pg_init is still running is true if the device is configured to queue if there are no available paths if the handler should return however in the course of refactoring the condition check has broken and returns success in that case since bdev points to the dm device itself dm_blk_ioctl calls __blk_dev_driver_ioctl for itself and recurses until crash you could reproduce the problem like this dmsetup create mp __number__ __number__ multipath __number__ __number__ __number__ __number__ sg_inq __float__ bug unable to handle kernel paging request at __address__ __float__ pgd pud __number__ __float__ thread overran stack or stack corrupted __float__ oops __number__ smp fix the condition check with some clarifications
887656f0b7da0fdbb22740907c53cbc4aefee0ef	remove dead code v2 in an if block for running __number__ running cannot be non-zero v2 agd remove unused variable
9a628224a61bbcd2b50b3ec96e661fbbb49b619a	ip_tunnel add dont fragment flag this flag will be used by ovs tunneling
d5be0d73ab8655e785ae49e4f19bf031a938b336	arm remove unneeded cast
1f5b77f51a221f5eb10af08da9067fba360dc52f	kvm svm cleanup error statements use __func__ instead of the function name in svm_hardware_enable since those things tend to get out of sync this also slims down printk line length in conjunction with using pr_err no functionality change
fbafd397fb63c787f302f1ca6db281a87cdb0ca9	drivers staging vme convert to octal notation for permission bits ran fixed warning symbolic permissions are not preferred consider using octal permissions __number__
18c0025b692a293e3e4aecb34264563c0a442448	xen resolve section mismatch warnings in xen-acpi-processor the following resolves a section mismatch warning below in xen-acpi-processor introduced by xen re-upload processor pm data to hypervisor after s3 resume v2 warning warning section mismatch in reference from the function xen_upload_processor_pm_data to the function the function xen_upload_processor_pm_data references the function __init read_acpi_id this is often because xen_upload_processor_pm_data lacks a __init annotation or the annotation of read_acpi_id is wrong
8b9534406456313beb7bf9051150b50c63049ab7	kvm x86 do not go through vcpu in __get_kvmclock_ns going through the first vcpu is wrong if you follow a kvm_set_clock with a kvm_get_clock immediately after without letting the vcpu run and call kvm_guest_time_update to fix this compute the kvmclock value ourselves using the master clock tsc nsec pair as the base and the host cpu frequency as the scale
31e660685ddf6ca3686519b966f289f0f83f7780	arm tegra pcie __number__ null changes warning using plain integer as null pointer
7ea653efa98d8144345227576fc084ed7a356cf8	arm mark vpu and ipu axi transfers as cacheable increase ipu priority this is needed so that the ipu framebuffer scanout cannot be starved by vpu or gpu activity some boards like the sabrelite and sabresd seem to set this in the dcd already but the documented register reset values do not contain the necessary settings
079dc9fe7770ea990c7f6f2094deb9bd8f172095	staging comedi pcl812 introduce pcl812_ai_clear_eoc introduce a helper function to clear the end-of-conversion flag this flag is set when an analog input conversion is finished and the hardware generates an interrupt request writing any value to the register resets the flag and re-enables the interrupt remove a redundant call in pcl812_ai_cancel
424ffc943dbac747818b7e4698cdc50be91e4c25	tile pci use pci express capability accessors use pci express capability access functions to simplify tile pcie code
f4c04b8fef4f6bec720e244d857a08ed35d59070	staging rtl8192u fixed tabstop coding style warning replace a mix of tabs and spaces indentation by tabs only fixed checkpatch warning statements should start on a tabstop in rtl8192u module
3c9b803b87b5ecb4f15b24886f7f97116cc4e1d8	net usb asix88179_178a use new api the ethtool api is deprecated we move this driver to new api as i dont have the hardware id be very pleased if someone may test this patch
be955b2984822e2a66176bccb3e0dbaf9cd569b6	rtnetlink add babel protocol recognition babel uses rt_proto __number__ add to userspace visible header file
9d0109be482cf75d731f2d8ea86ce2471b98a429	pm devfreq fix the checkpatch warnings this patch just fixes the checkpatch warnings
f15e05186c3244e9195378a0a568283a8ccc60b0	fix incorrect page size in init_memory_mapping printks with non-pae kernels we have __number__ page sizes available at most and enabling pae replaces that size with a one which systems use too but when booting a non-pae kernel in one of our early-boot printouts we say init_memory_mapping mem __address__ mem __address__ page init_memory_mapping mem __address__ mem __address__ page init_memory_mapping mem __address__ mem __address__ page mem __address__ page init_memory_mapping mem __number__ mem __number__ page which is obviously wrong there is no page available this is probably because of a badly-named variable in the map_range code pg_level_2m instead of renaming all the pg_level_2ms this patch just fixes the printout init_memory_mapping mem __address__ mem __address__ page init_memory_mapping mem __address__ mem __address__ page init_memory_mapping mem __address__ mem __address__ page mem __address__ page init_memory_mapping mem __number__ mem __number__ page brk pgtable link
92594a51120ebc6c2f556204fc73568c8f7cb0f4	bluetooth l2cap fix auto-allocating le psm values the le dynamic psm range is different from and doesnt have requirements relating to parity so separate checks are needed
2d8bd23a057234ce8e540a3a08f4e67abcc551a8	drop ttm two ended allocation amdgpu_bo_create calls amdgpu_ttm_placement_from_domain before ttm_bo_init is called amdgpu_ttm_placement_from_domain uses the ttm bo size to determine when to select top down allocation but since the ttm bo is not initialized yet the check is always false it only took affect when buffers were validated later it also seemed to regress suspend and resume on some systems possibly due to it not taking affect in amdgpu_bo_create amdgpu_bo_create and amdgpu_ttm_placement_from_domain need to be reworked substantially for this to be optimally effective re-enable it at that point ported from radeon commit a239118a24b3bf9089751068e431dfb63dc4168b
a88d2dc672192247a6f42c82d558db9bf9258bed	mtd move functions up move the get_device and put_device functions up within struct mtd_info to make them be close to other functions
8b2888c756450ffece7a37e0f3ee49353015e5dd	use free_highmem_page to free highmem pages into buddy system use helper function free_highmem_page to free highmem pages into the buddy system also fix a bug that totalhigh_pages should be increased when freeing a highmem page into the buddy system
7888839e258ee114ca2faabbf741c5001ff668ad	omapdss hdmi make panel return dssdev register errors do not assume blindly that the dss driver was registered successfully
8b8ff3a6a6e2325662e3af174f54b47487d3ed75	iio mma8452 coding style fixes fix checkpatch issues like space before tabs too long lines or alignment
74bcc2499291d38b6253f9dbd6af33a195222208	arm64 efi only attempt efi map setup if booting via efi booting a kernel with config_efi enabled on a non-efi system caused an oops with the current uefi support code add the required test to prevent this
a173dc447d2980bb7cb9618a6b59cf135ea01e80	usb gadget uvc fix up uvcg_v4l2_get_unmapped_area typo patch usb gadget uvc rename functions to avoid conflicts with host uvc renamed a lot of symbols but missed one references that was inside of an error uvcg_v4l2_get_unmapped_area undeclared here not in a function uvcg_v4l2_get_unmapped_area warning uvc_v4l2_get_unmapped_area defined but not used static unsigned long uvc_v4l2_get_unmapped_areastruct file this renames the reference according the changed function name
41b7602ed17a6bbb3b3d33087c39ef5c3a5589c7	microblaze fix access_ok macro there is the problem with bit or because for some combination is addr size equal to seq for standard kernel setting kernel starts at __number__ is seq for user space and everything below this limit is fine but even address is fine because it is below kernel space
0a464dfdf8dec7410bd6bc8af9086098ee712a04	mfd arizona fix typo in arizona_irq_map the type of the data for the main arizona irq chip should be struct arizona not struct regmap_irq_chip_data the bug is harmless but should probably be corrected anyway
fab44ef1adcc585440c07c90539e2b9e2cded4bf	spi imx reorder hw operations enable order to avoid possible rx data loss the overflow may happen due to rescheduling for another task interrupt if we enable spi hw before starting rx dma so rx dma enabled first to make sure data would be read out from fifo asap tx dma enabled next to start filling tx fifo with new data and finaly spi hw enabled to start actual data transfer the risk rise in case of heavy system load and high spi clock
0f5c113c5adb56c1352c05155dd4a711b68a839b	atl1c remove open-coded skb_cow_head
549381e19cc7874bb15f0e4760c1004d4fe28d8a	mm bootmem remove redundant offset check when finally freeing bootmem when bootmem releases an unaligned bits_per_long pages chunk of memory to the page allocator it checks the bitmap if there are still unreserved pages in the chunk set bits but also if the offset in the chunk indicates bits_per_long loop iterations already but since the consulted bitmap is only a one-word-excerpt of the full per-node bitmap there can not be more than bits_per_long bits set in it the additional offset check is unnecessary
207e21a9732a27f58843ccae1c9644f3a1636b66	clocksource sh_mtu2 hardcode mtu2 clock event rating to __number__ all boards use clock event ratings of __number__ for the mtu2 hardcode it in the driver
03dadf96aa48acbd2501f21d1c1b5740b93b7c72	iwlwifi remove unused argument from iwl_init_hw_rates the function never uses the priv argument as it only fills in the passed data so remove the argument
c41b33c58d11f32e95d06f634ddba0cbf39fc7c6	usb gadget g_ffs fix counting of missing_functions returning non-zero value from ready callback makes ffs instance return error from writing strings and enter ffs_closing state this means that this this function is not truly ready and close callback will not be called this commit fix ffs_ready_callback to undo all side effects of this function in case of error
a8190a59e7440a7e3f7c0889d72a13e157988b3c	powerpc add spr number definitions
dc89f797abdbfc58dfb28af944f80f0299a8fafa	allocate archdata with kzalloc the archdata attached_list field isnt initialized leading to random crashes when accessed use kzalloc to allocate the whole structure and make sure all fields get initialized properly
0bc69973066d62f70ce60bd6762b5cb75a699159	block fix integrity verification commit bf36f9cfa6d3d caused a regression by effectively reverting nics fix from that ensures we traverse the full bio_vec list upon completion
803200e24abf0f9ec18631290d26b2185477f3a6	uprobes dont assume that is u8max_uinsn_bytes arch_uprobe should be opaque as much as possible to the generic code but currently it assumes that must be u8 of the known size remove this unnecessary dependency we can use and and sizeof with the same effect
feb897e1f48918bf5cd60a075a6641ed41ace988	zbud fix compile warnings due to usage of debugfs_create_size_t warning passing argument __number__ of from incompatible pointer type note expected but argument is of type unsigned int which is we end up using unsigned or unsigned long instead of ssize_t so lets fix this up and use the proper type
b7ecfe7126d23b1329dc5e63db3caa5eecb322eb	usb mtu3 remove redundant dev_err call in get_ssusb_rscs there is a error message within devm_ioremap_resource already so remove the dev_err call to avoid redundant error message
0f6187dbe542d71ace8ba0908954b0f4f8a30a1e	md-cluster fix error return code in join fix to return error code from the lockres_init error handling case instead of __number__ as done elsewhere in this function
36fb7435b6ac4d288a2d4deea8934f9456ab46b6	net mvpp2 release reference to txq_cpu entry after unmapping the mvpp2_txq_bufs_free function is called upon tx completion to dma unmap tx buffers and free the corresponding skbs it gets the references to the skb to free and the dma buffer to unmap from a per-cpu txq_pcpu data structure however the code currently increments the pointer to the next entry before doing the dma unmap and freeing the skb it does not cause any visible problem because for a given skb the tx completion is guaranteed to take place on the cpu where the tx was started however it is much more logical to increment the pointer to the next entry once the current entry has been completely
624463079e0af455a2d70d2a59b9e2f6b5827aea	batman-adv check batadv_orig_hash_add_if return code if this call fails some of the orig_nodes spaces may have been resized for the increased number of interface and some may not if we would just continue with the larger number of interfaces this would lead to access to not allocated memory later we better check the return code and dont add the interface if no memory is available otoh keeping some of the orig_nodes with too much memory allocated should hurt no one except for a few too many bytes allocated
a70b9641e6a90d6821e4354a2c2fede74015db29	ipvs ip_vs_sh fix build kfree_rcu requires rcu_head __number__ which can get violated with a sufficiently high config_ip_vs_sh_tab_bits
7a950ea81de6cbf96e721599bfacdb409908cd00	ath6kl make sure to delete rx aggregation timer in aggr_reset_state the timer which is used to flush rx aggregation frames needs to be disabled when resetting the aggregation state this is found in code review
7eb76d457fd758d396bc2e65cb0ace5aae614149	userfaultfd non-cooperative fix fork memleak we have a memleak in the ctx if the uffd of the parent is closed before the fork event is read nothing frees the new context link
98ac2fc274e07a22bea43682cf8998f47ffea9d0	add option to skip dma sync as a part of map and unmap this change allows us to pass dma_attr_skip_cpu_sync which allows us to avoid invoking cache line invalidation if the driver will just handle it via a sync_for_cpu or sync_for_device call link
73f36b3e251888ef224a3c90d3c408e02a1eb957	mtd use mtd_device_parse_register replace custom invocations of parse_mtd_partitions and mtd_device_register with common mtd_device_parse_register call this would bring standard handling of all errors fallback to default partitions etc
f5bc7384dc4e9bf3bcf976ef0c1ac9704fa1ad43	spi spi-mxs remove mxs_spi_enable and mxs_spi_disable these functions consist of nothing but one single writel call and are only called once and the names really arent accurate or clear since they dont enable or disble spi rather they set the bit that controls the state of cs at the end of transfer it easier to follow the code to just set this bit with a writel along with all the other bits being set in the same function
4b0ea93f250afc6c1128e201b0a8a115ae613e47	gpu drm mgag200 handle error from pci_iomap here pci_iomap can fail handle this case and return link
42f7f3c4811b3149253ecf2e133832c969884466	add module_alias add module alias for sony acx565akm lcd panel this makes it probe on nokia n900 when panel driver is built as a module
5f7fb6f1e514e0ed47aee97752d6ae10491b4841	input twl6040-vibra ignore return value of schedule_work returning ret is wrong and checking for an error as well user space may call multiple times until the work is really scheduled also ignores the return value
ff015030c939f0bec68fa9b8898da3aaa7fe55ea	rcu rcu_save_dyntick code no longer ever dead before rcu had unified idle the rcu_save_dyntick leg of the switch statement in force_quiescent_state was dead code for kernel builds with unified idle the code is never dead this commit therefore removes the if statement designed to make gcc aware of when the code was and was not dead
375d8886bc76871f012a337b4d6d753970d9fb36	staging sep correct misspelled remap_page_range remap_pfn_range
8111e4ecf9373f6d76504416b0e76b18372f3598	usb serial metro-usb remove unneeded cast and function call we should use kzalloc instead of kmalloc and memset and remove an unneeded void cast as well
13447cdc76a8c0a57c9b3395d896b01feb82f34b	asoc s6105-ipcam automatically disconnect non-connected pins all codec input and output widgets are either in the dapm routing table or manually marked as non-connected this means the card is fully routed and we can let the core take care of disconnecting non-connected pins
2dfc0247f0ff755296ab72ab3ddb8309fb35c660	ath9k use reg_rmw and rmw buffer in ath9k_hw_4k_set_gain it is possible to reduce time needed for this function by rplacing reg_write with reg_rmw plus dummy __number__ and putt all commands in same buffer
a246b97358bcb888fe3d994d120751c3622c3239	pch_phub report error writing mac back to user
5ee20bc792467d7d612157e0a9962765aa943b08	alsa usb-audio change internal pcm order new pcms will now be added to the end of the chips pcm list instead of to the front this changes the way streams are combined so that the first capture stream will now be merged with the first playback stream instead of the last this fixes a problem with asus u7 cards with one playback stream and cards without capture streams should be unaffected by this change exception added for m-audio audiophile usb tm since it seems to have a fix to swap capture stream numbering in alsa-lib
13e9b9972fa0f34059e737ae215a26e43966b46f	tipc make tipc_buf_append more robust as per comment from david miller we try to make the buffer reassembly function more resilient to user errors than it is today we check that the parameter always is set since this is mandatory input we ensure that always is set to null before linking in the buffer instead of relying of the caller to have done this we ensure that the tail pointer in the head buffers control block is initialized to null when the first fragment arrives
85c71240a3e6c151038d9ed3fa88fc0fb80043fb	iphc cleanup use of lowpan_push_hc_data this patch uses the lowpan_push_hc_data functions in several places where we can use it the lowpan_push_hc_data was introduced in some previous patches
330eaaf947abe81b020ed23e9b46d1e620e55457	arm mxs add crystalfontz cfa-10036 dts
f7aeb6fb1a3d6b09623b169518314bc7869fffec	mac80211 make mgmt_tx accept a null channel cfg80211 passes a null channel to mgmt_tx if the frame has to be sent on the one currently in use by the device make the implementation of mgmt_tx correctly handle this case fail if offchan is required fix rcu locking
b73f96fcb49ec90c2f837719893e7b25fcdf08d8	net dst_cache_per_cpu_dst_set can be static
f51d4a10ac39ecf06b25e7a79121b06f7ed59928	r8169 fix nic may not work after changing mac address when there is no ac power nic may not work after changing mac address please refer to following link this issue is caused by runtime power management when there is no ac power if we put nic down ifconfig down the driver will be in runtime suspend state and hardware will be put into d3 state during this time driver cannot access hardware regisers so if you set new mac address during this time it will not be set to hardware after resume nic will keep using the old mac address and the network will not work normally in this patch i add detecting runtime pm status when setting mac address if driver is in runtime suspend state it will skip setting mac address keep the new mac address and set the new mac address during runtime resume
7d9dfa1dd7f42bfb043c6090e22d0d77ff34b255	f2fs avoid garbage lenghs in dentries this patch fixes to eliminate garbage name lengths in dentries in order to provide correct answers of readdir for example if a valid dentry consists of bitmap __number__ __number__ __number__ __number__ len __number__ __number__ x __number__ readdir can start with second bit_pos having len __number__ or it can start with third bit_pos having garbage in both of cases we should avoid to try filling dentries so this patch not only removes any garbage length but also avoid entering zero length case in readdir
d47510e295c0f82699192a61d715351cf00f65de	kvm obey read-only mappings in iommu weve been ignoring read-only mappings and programming everything into the iommu as read-write fix this to only include the write access flag when read-only is not set
0588ea3467e8773ddc98dfccb67b646ead2abd31	staging comedi s626 pointers should be cleared with null not __number__ is a void null should be used to clear it not __number__ this quiets a sparse warning about warning using plain integer as null pointer
3b11292381aa5c57ceb6e089797afdd2e4066085	input alps print small buffers via
e14ee40bece891b5edccdd514112999ec423a448	can at91_can dont copy data to rxed rtr frames
e899b1119f1428f2b04dd7e9dba94864c33dd30b	netfilter bridge fix module autoload in compat case we expected __number__ if module doesnt exist which is no longer the case netfilter x_tables return for non-existant
475f498bcedb15634ca041b4eea2c58622558e03	greybus audio rename widget_type to jack_attrubute this fields actually populates jack attribute thus renamed to reflect the real purpose
0e1133157986340e80a1c65ebf3bd20b74eb8075	remove the warn which is not useful it was useful during development but now on a production system we can get this if the user forgot to upload the firmware drm radeon irq initialized drm gart num cpu pages __number__ num gpu pages __number__ drm radeon ib pool ready drm loading sumo microcode r600_cp failed to load firmware atl1c __number__ version failed to load firmware radeon __number__ disabling gpu acceleration __number__ radeon __number__ __address__ unpin not necessary cut here warning at ttm hardware name system product name modules linked in e1000e atl1c ahci libahci libata scsi_mod fbcon tileblit font ttm bitblit softcursor drm_kms_helper wmi xen_blkfront xen_netfront fb_sys_fops sysimgblt sysfillrect syscopyarea xenfs xen_privcmd pid __number__ comm modprobe not tainted call trace __address__ __address__ __address__ ttm __address__ radeon __address__ ttm __address__ ttm __address__ ttm __address__ ttm __address__ radeon __address__ radeon __address__ radeon __address__ radeon __address__ radeon the big warn has nothing to do with the culprit which is that the firmware was not loaded so lets remove the warn from the ttm dma code
c7a4fb53de365d5e9264e3fa5bdb9c0a52b6f9a0	input goodix do not explicitly set evbits in input device input_mt_init_slots will do that for us
36128d204b81c099b5779771127a5546eac549c9	sparc implement and wire up modalias_show for vio
f9416e281e53bea6f8e39c21f50fd79c029ba24a	nfsd drop unused stp arg to alloc_init_deleg
841f97bffc11daaef9eb28d201be25b1509db97d	scsi qla2xxx dont free pool that wasnt allocated in the original code if dma_pool_alloc fails then we call dma_pool_free it causes an error possibly a null dereference
a76e3cc32d872acd5104278d21d2084da07c16a8	use xen_page_to_gfn rather than pfn_to_gfn all the caller of have a struct page in hand and call pfn_to_gfn for the only benefits of these __number__ functions rather than passing the pfn in parameter pass directly the page and use directly xen_page_to_gfn
d9f89b88f5102ce235b75a5907838e3c7ed84b97	kvm x86 fix cr3 reserved bits check in long mode regression of pae is set in long mode but that does not mean we have valid pdptrs
1c8c9c5216295711c79d0e512dc8b3d5f1bfc35d	btrfs make check_extent_to_block take btrfs_inode
50e66c7ed8a1cd7e933628f9f5cf2617394adf5a	drivers thermal add check when unregistering cpu cooling this patch avoids null pointer accesses while unregistering cpu cooling devices in case a null pointer is received
e3fe44c75913076b06ca0d0b79c21ce326ce3ef8	i40e fix possible memory leak in i40e_dbg_dump_desc i didnt notice that return in the code fix it by adding a goto out instead to free the memory new smatch warnings i40e_dbg_dump_desc warn possible memory leak of ring
c160692e8665880c844bebdee219ed9cdcb2346b	nfp remove unnecessary static there is no reason for those local variables to be static
0d58864bf3472f8390e0c0a33bd875c7eec868bd	mmc esdhc-imx fix card interrupt loss on freescale esdhc apply a workaround for the imx esdhc controller to avoid missing card interrupts this makes sdio work
3e67c459d0ac945ac09639d85de299e65317aefe	mptfusion use memdup_user let memdup_user handle the kmalloc copy_from_user and error checking kfree code spotted by the following smatch false positive warning mptctl_getiocinfo warn possible info leak karg
f3bb7b298120df8a9b7354e4f6d07e3185c15db7	usb gadget function uac2 prevent double ep disable without this check f_uac2 would try to disable the same endpoint twice fix that
5f223b9533d5524d8d2d2d2f56b78441c1a18b97	staging rtl8188eu remove unused macro
10cff29af6ae12725d4cb338abb5768e139b808a	nfc pn533 add pn533_abort_cmd procedure pn533_abort_cmd aborts last command sent to the controller and cancels already requested urb as acr122u does not support any mechanism as ack for standard pn533 which aborts last command this cannot be issued for this device otherwise acr122u will behave in an unstable way
ae5d843826d147f81a8d5def8d630caae7ab8011	mtd nand nuc900_nand show parent device in sysfs fix a bug where parent device symlinks arent shown in sysfs while at it make use of the default owner value set by mtdcore
9e7e2b0a6a005941a6854cdabae19c3d9e069dbe	genirq remove unused functions these two functions are not used anywhere in the kernel source tree so remove them link
19c69dafad673f342b8eb9dbc6a1ac9fa38b4f9f	arm s3c64xx fix __initdata section mismatch smdk6410_b_pwr_5v_data is marked as __initdata but referenced from a structure that is not warning section mismatch in reference from the variable smdk6410_b_pwr_5v_data to the unknown reference this removes the annotation to avoid an invalid pointer access when the regulator driver accesses this variable
aeeaa8d46aa38c9cc5fac23feb9b1f91bdbf5dd3	efivarfs return a consistent error when efivarfs_get_inode fails instead of returning if efivarfs_get_inode fails we should be returning since running out of memory is the only reason it can fail furthermore thats the error value used everywhere else in this file its also less likely to confuse users that hit this error case
3cf38833c7fc72b4f4757fc5d0b4cd43ac192e55	mmc sdhci-of-esdhc support commands with busy response expecting tc the ip versions older than __float__ didnt support commands with busy response which expect the tc bit set but after the esdhc ip has supported it
d54051f1cc2af6d12c2478911921d32476319621	edac mpc85xx use these new helpers simplify implementing multi-driver modules and properly handle failure to register one driver by unregistering all previously registered drivers link
ca4c55ad89edb54b1eb04fe2d4c6915c9f8d69b9	usb dwc2 gadget pick smallest acceptable fifo current algorithm picks the first fifo which is equal to or greater than the required size this can result in bigger fifos assigned to endpoints with smaller maxps change the algorithm to pick the smallest fifo which is greater than or equal to the required size moreover only use signed variables when required
d6394b5900298385fd6fab299c445fb1b0b7a182	ocfs2 fix null pointer dereference in ocfs2_dir_foreach_blk_id fix a null pointer deference while removing an empty directory which was introduced by commit readdir convert ocfs2 bug unable to handle kernel null pointer dereference at null ip null pgd pud pmd __number__ oops __number__ smp cpu __number__ pid __number__ comm rmdir tainted g o rip __number__ null call trace ocfs2 ocfs2 ocfs2 code bad rip value rip null rsp __address__ cr2 __number__ fix pointer math
d223b37c9f44273c0cca5138118d6c75e5110bfa	staging most hdm-usb remove redundant spinlocks this patch removes the spinlocks when accessing the usb_anchor list because the struct usb_anchor is using its own lock
7512ad16b532eee288a85a55a41ebf7d0eb8080d	add ring callbacks for ib and dma frame size
bb34c0da646530425d9ae0e6e6229e641469da4c	hwmon adt7462 use error value returned from find_trange_value find_trange_value returns in case of errors only to have it ignored and replaced with make it return and use it
d53442e94db0f214989287aa7cd3806cffd1d0b3	clk tegra override bits for tegra114 pllm define override bits for tegra114 pllm
52a79403cb4dd9b5993691733a07e5cb42e3446b	staging comedi addi_apci_3120 rename this_board variables for aesthetics rename the this_board variables to board that name is more commonly used for the boardinfo pointer in comedi drivers
6ab676e96422f33a873006096f928feeded7ce3b	dynamic_debug combine parse_args callbacks together refactor ddebug_dyndbg_boot_param_cb and ddebug_dyndbg_module_param_cb into a common helper function and call it from both the handling of is unneeded by the latter but harmless the __number__ callers differ only by pr_info and the return code they pass to the helper for when an unknown param is handled i could slightly reduce dmesg clutter by putting the vpr_info in the common helper after the return on_err but that loses __func__ context is overly silent on module_cb unknown param errors and the clutter is only when anyway
f3b1e4db825aeef5337501c88c15894ac33f732e	staging comedi drivers gsc_hpdi remove use of deprecated pci api replace occurences with the coccinelle semantic patch that was used to make some of these changes is as follows idexpression id position p id id idexpression id position when pci_get_drvdata id when pci_enable_device id id id on idexpression id expression direction position id dma_supported gfp_kernel id dma_alloc_coherent gfp_kernel gsc_hpdi_auto_attach does not affect interrupt status but contains a call to comedi_alloc_devpriv which calls kzalloc with gfp_kernel flag thus there seems to be no danger that dma_alloc_coherent can be called with interrupts turned off and gfp_kernel can be used
3e48b1baa042a4d5e92f373fc945a4aa0081178b	mtd nand gpmi fix compile error caused by pinctrl call fix following compile error caused by commit mtd nand gpmi adopt pinctrl support cc in function error undeclared first use in this function
30c5c649bcfef51156f9543dee4e4688d48f3a9d	usb misc reformatted pointer variables in reformatted pointer variables in
cf97ee19629363d5847a4af135cf415f76d7388c	return directly after a failed kfree_table_init in tilcdc_convert_slave_node return directly after a memory allocation failed in this function at the beginning
dfcf36d90489a403d8d833f0f73d84a8d68b5570	media revert media ivtv avoid going past array this patch broke ivtv logic as reported at this reverts commit
ce7a10b0ff3db63a43d2d7885aa0f43dc8c96419	arm amba tegra-ahb detect and correct bogus base address amba tegra-ahb detect and correct bogus base address from a hardware soc integration point of view the starting address of this ip block in the existing tegra soc dt files is off by __number__ bytes from the actual base address since we attempt to make old dt files forward-compatible with newer kernels we cannot fix the ip block base address in old dt data this patch works around the problem by detecting the four byte base address offset in the driver code and correcting it if its detected in general ip block base addresses almost always have a null low byte future soc dt data for tegra ahb should use the correct tegra ahb base address in cases where there is no dt data backward compatibility requirement this patch is a revision of the patch originally titled amba tegra-ahb use correct base address for future chip support this revision implements changes requested by russell king
16925c92dbd97524655525b6816625e1f0063d12	add virtual connector and encoder macros for virtual display feature add virtual connector and encoder macros
f2ba7fae044b578b068b40723dc3303b590abb78	bluetooth remove hlen variable hlen has a fixed size of l2cap_hdr_size use this instead
c0317998c340203204ee7622d75a59f41ac13bc6	tuntap initialize vlan_features the vlan_features was zero which prevents vlan gso packets to be transmitted to userspace this is suboptimal so enable this by initialize vlan_features for tuntap netperf shows better performance of guest receiving since vlan tso works for tuntap before netperf migrated tcp stream test from port __number__ af_inet to port __number__ af_inet demo recv send send socket socket message elapsed size size size time throughput bytes bytes bytes secs __number__ __number__ __number__ __float__ __float__ after netperf migrated tcp stream test from port __number__ af_inet to port __number__ af_inet demo recv send send socket socket message elapsed size size size time throughput bytes bytes bytes secs __number__ __number__ __number__ __float__ __float__
8234d51a280290a23e9c21d5f1a5988d984cbdc9	staging comedi das16 cleanup usage this legacy driver does no additional probing so the will already be properly initialized by the comedi core before calling the function remove the unnecessary initialization of and use it when requesting the resources instead of the open-coded strings
947fdaadf05480e567d3cd58d456240655063d03	do not attempt to re-enable an unconnected primary plane due to user fudging for instance using with we can attempt to reset an inconsistent crtc that is marked as active but has no assigned fb it would be wise to fix this earlier but the long term plan is to have primary and secondary planes associated with a crtc in which being null will be expected so for a quick short term fix with pretensions of grandeur just check for a null fb during gpu reset and ignore the plane restoration this fixes a potential hard hang a panic in the panic handler following a gpu hang danvet add a corresponding fixme comment
e91e52e42814b130c20d17bc1e2adf813c50db11	n_tty fix stuck throttled driver as noted in the following comment fixme there is a tiny race here if the receive room check runs before the other work executes and empties the buffer upping the receiving room and unthrottling we then throttle and get stuck this has been observed and traced down by vincent we need to address this when we sort out out the rx path locking use new safe functions to re-evaluate conditions if interrupted by the complement flow control function
796c1efd6fa0ed696d550b68f4410ab1a1749d01	timecounter provide a helper function to shift the time some ptp hardware clock drivers use a struct timecounter to represent their clock to adjust the time by a given offset these drivers all perform a two step of their timecounter however it is better and simpler just to adjust the offset in one step this patch introduces a little routine to help drivers implement the adjtime method
67cc7e26a5c46508ee00b9fe169aad833b798025	pci remove add_to_failed_list only one user just use add_to_list instead
ca3671a83389eea1458929d22c66a69e955bfb07	amd kill misleading message about enablement of io access to pci ecs commit x86 use pci method for enabling amd extended config space before msr method added a message when io access to pci ecs was enabled via access to the nb_cfg pci register this can lead to a bogus message like __float__ extended config space enabled on __number__ nodes which is misleading because io ecs access is subsequently enabled for amd cpus that support this by modifying the corresponding nb_cfg msr furthermore its not extended config space that is enabled by this register setting its the io access that is enabled for extended configruation space imho the ambiguous message needs to be cancelled
cebed3b1d7eaee7fb79e2c510a0da4296db043c8	staging sw_sync add debug support add debugfs support hooks jstultz add commit message
e53289c0c5e5a24e29e571eba7af05c845c10890	mm reinstante dropped pmd_trans_splitting check the check for a pmd being in the process of being split was dropped by mistake by commit d10e63f29488 mm numa create basic numa page hinting infrastructure put it back
bb201b94cc251584bb69ed9e1f002d886f66fd4b	staging comedi addi_apci_3120 absorb apci3120_interrupt_handle_eos absorb this simple function into apci3120_interrupt
074726402b82f14ca377da0b4a4767674c3d1ff8	pwm omap-dmtimer potential null dereference on error omap is null so we cant dereference it
98d9ae841ad620045d653fb05764e4a899f42dbd	netfilter nf_conntrack fix event flooding in gre protocol tracker gre connections cause ctnetlink event flood because the assured event is set for every packet received
7dd80eb925a5aac4ebe8b1abec20802e91f60c2e	staging bcm return instead of when memory not acquired in this patch changes the return statement on two conditions where memory could not be acquired it returns instead of
56c978f1da1f630ef18aa668a9748c6c23ab819b	net remove ll_allocated_space net remove ll_allocated_space the macro ll_allocated_space was ill-conceived it applies the alignment to the sum of needed_headroom and needed_tailroom as the amount that is then reserved for head room is needed_headroom with alignment this means that the tail room left may be too small now that all uses of ll_allocated_space have been removed this patch finally removes the macro itself
9dac6232e2ee2bc85dc71f464f19f047afc9422c	enic free all rq buffs when allocation fails when allocation of all rqs fail we do not free previously allocated buffers before returning error this causes memory leak this patch fixes this by calling vnic_rq_clean which frees all the rq buffers
72f4ba1e32a1e5da31dcf14ea4b8985ae88a8bdb	target remove duplicate task completions in transport_emulate_control_cdb this patch removes a duplicate set of transport_complete_task calls in target_emulate_unmap and target_emulate_write_same as the completion call is already done within transport_emulate_control_cdb this patch also adds a check in transport_emulate_control_cdb for the existing scf_emulate_cdb_async flag currently used by synchronize_cache in order to handle immediate processing
c44fccb5f7b071d36cac3962799ba5a571429c28	clk replace pr_warn with pr_err for fatal cases these three cases let clk_register fail they should be considered as error messages
5727dc6bf5b70dd278e58e26137e2df729b9c107	net can ti_hecc remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure since commit device-core ensure drvdata null when no driver is bound thus it is not needed to manually clear the device driver data to null
346b0d4a0818fa76bfe0dbe67c6c7ad3e19845e1	staging ft1000 remove curly braces for single statement blocks this patch removes curly braces for single statement blocks using following coccinelle script expression e1 if e1 if e1 return
44ec3b75a68e071fbc4f30387a02f93ba1a3b358	staging wilc1000 rename queuecount of mac_xmit function this patch rename queuecount variable of mac_xmit function to queue_count to avoid camelcase naming convention
3e7068da1194543fb4841072838b967e576adc55	pata_of_platform utilize common ata_platform_remove_one
93625d52e7a74492416f77fed945ba34e0ae0c18	cpufreq mt8173 remove redundant regulator_get_voltage call remove redundant regulator_get_voltage call to get vsram value since it will be obtained later at the beginning of voltage tracking loop
20afdeb812da4097447eb324f34be11a10b11542	irqchip atmel-aic5 add sama5d4 support add sama5d4 support to irq-atmel-aic5 link
cdc84dda1e0214960df14aaee6708993b40e28f0	qlcnic free irq for mailbox interrupts
7f593881089084640bffeb93c9cc49077afcec81	two memleak reports by kmemleak_not_leak
595cb754983d4387cb25b3dcf08f5129663d634e	use vmalloc for order-10 allocation as vhost scsi device struct is large if the device is created on a busy system kzalloc might fail so this patch does a fallback to vzalloc as vmalloc adds overhead on data-path add __gfp_repeat to kzalloc flags to do this fallback only when really needed
a232c8a12a0fe55a2e671d24626c98a21b57a332	brcm80211 smac macros removed the macros were used to assure that the correct core was accessed in the isr but register access is now done giving the explicit core so no need to change interrupt state
669bb3962bd7f781879222eeb7263d527551dd5e	bluetooth fix permission of enable_le param with __number__ it is impossible to change the param changing it to __number__
378474e4b23183002f1791b294a4440b6b7df36a	perf symbols check for valid dso before creating map dso__new can return null hence verify dso before creating a new map link
cc60ab0a8b5b62ea6b5cc1c6397adb5b4bd41271	drivers net davinci_mdio restore mdio clk divider in mdio resume during suspend resume cycle all the register data is lost so mdio clock divier value gets reset this patch restores the clock divider value
2cc86b826070cf312d7b0571e383c56d31a1fe5c	always prefer cpu relocations with llc a follow-on to the update of the llc coherency logic is that we can rely on the llc being coherent with the cs for rewriting batchbuffers irrespective of their cache domain this should have no effect currently as all the batch buffers are expected to be i915_cache_llc and so using the cpu relocation path anyway
5df3c35183d7963fb259eda2dbd096825861d740	usb correction to c67x00 td data length mask td data length is __number__ bits correct td_portlenmask_dl reference cypress semiconductor bios users manual __float__ page
fa7c865ad999d6ca340bca471fab7f3a3e6ae011	arm mxs fix compile error caused by prom_update_property change the commit of improve prom_update_property function changed prom_update_property interface and causes the compile error below cc in function error too many arguments to function note declared here update the caller update_fec_mac_prop to fix the error
ff9174d57a8239c5a21d2a0c7e00dddd54953f6c	asoc fsl_ssi no need call of_device_is_available the comment and the call to of_device_is_available are not really needed it is the expected behaviour to probe only the ssi nodes that are enabled in the device tree
c50f2af8e1a33e95e4d3b7af9db05ed9096c6072	usb serial remove unused serial_priv variable qt2_open and qt2_close both set a serial_priv variable but never used it remove the variable from the functions
a5dee37d390f3713f06e286a33b262f0fdb2b0ff	btrfs deal with being null i need to add infrastructure to allocate dummy extent buffers for running sanity tests and to do this i need to not have to worry about having an address_mapping for an io_tree so just fix up the places where we assume that all io_trees have a non-null thanks
eafca851639038a7863910e7fac869f5c8bdfb9d	cpufreq imx6q fix error handling code according to the previous error handling code it is likely that goto out_free_opp is expected here in order to avoid a memory leak in error handling path
721b79d12fef7f13c0ac2cabb7cce39976769fcf	staging vt6656 fix potential leak in vt6656_hostap_ioctl commit staging vt6656 dont leak param in vt6656_hostap_ioctl when returning cleaned up direct returns in the ioctl switch statement that leaked already allocated memory fix the same issue for viawget_hostapd_scan_req and viawget_hostapd_mlme that are not supported by this driver detected by coverity cid __number__
238293b14d9b1f5689e2aa68710000b0f25aa612	kvm s390 correctly handle injection of pgm irqs and per events per events can always co-exist with other program interrupts for now we always overwrite all program interrupt parameters when injecting any type of program interrupt lets handle that correctly by only overwriting the relevant portion of the program interrupt parameters therefore we can now inject per events and ordinary program interrupts concurrently resulting in no loss of program interrupts this will especially by helpful when manually detecting per events later as both types might be triggered during one sie exit
aa1b0e59d3096f4602afeb114a3b3be505889a26	cursor fixes it seems we need to update all cursor registers from vblank this appears to be the cause of intermittent underflows when disabling cursor
3df8d40ba3fea72c35ab092c091b19a599df1e81	target do not pass the queue object to transport_remove_cmd_from_queue we always operated on the same queue so move finding it into the function just like we do for all other helpers operating on it
c100bb2270588b614f7e6ae39a579a1aeb21bf03	qlcnic update version to
d49f70915c07c1a313e459d23fad61ddbeeb1bae	ivybridge is the odd one when it comes to pipe scalers between ivb hsw and vlv only ivybridge has sprites with scaling capabilities also make max_downscale coherent with that v2 rebase on top of the recent sprite scaling fixes
666e68e0dde826ae146b980099f1719f74fa968c	improve device probing for zcrypt adapter cards improve device probing process for zcrypt adapters to transmit service request during registration process
06960a1b5d55d77d799050d2f62970d36d34a606	mmc sdhci-spear dont call in is mandatory for platforms using common clock framework because for spear we dont do anything in calls just call them once in
886a451bd2491de3551c2aea2a2f155f159716c8	msm_serial use relative resources for iomem device tree iomem resources are only accessible by index and not by name the msm_serial devices always have either __number__ or __number__ iomem resources that are always in the same order convert the platform_get_resource_byname into just platform_get_resource to facilitate device tree conversion change-id i4fd0f1037e07f2725a2a25c7b07dea2ca9397db7
704b3f4c11e0b1265a41472b6b25dd9e3d205674	media stk-webcam delete an unnecessary check before the function call vfree the vfree function performs also input parameter validation thus the test around the call is not needed this issue was detected by using the coccinelle software
cbdcf7f78900625de35173961b9b95cde22bce45	mm oom_reaper do not use siglock in try_oom_reaper oleg has noted that siglock usage in try_oom_reaper is both pointless and dangerous signal_group_exit can be checked lockless the problem is that sighand becomes null in __exit_signal so we can crash link
863bdbc91803b42cf7628e34f41dbd142d8de645	wl1251 fix mixed up args for join the join arguments are mixed up passing beacon_interval instead of channel and channel instead of beacon_interval fix them
ba7ea1d8f45383cb88858057e9bf60cd8cf3b898	ext4 merge ext4_xattr_list into ext4_listxattr theres no difference between ext4_xattr_list and ext4_listxattr so merge them together and just have ext4_listxattr some years ago they took different arguments but thats no longer the case
1af2ddd8b3fab054c908d24e00cb41f6b2b7d719	media cx23885 fix format colorspace compliance error fix v4l2-compliance failure relating to formatting
0d3f3c9a48d758454b0f57ca3eccd9ea3f6a4724	asoc sti set iec958 channel status sampling freq previously the iec958 channels status sampling freq was set only if not already set it means that it is not updated for next pcm sessions with this patch we ensure the iec958 channels status sampling freq is set to the runtime rate for each pcm session
90997af7e9dc47cb12afd4170ee0d3541fb09400	ieee802154 register packet layer while open this patch moves the open count handling while doing open of a lowpan interface we need the packet handler register at first when one lowpan interface is up there exists a small case when all lowpan interfaces are down and the __number__ packet layer is still registered to reduce some overhead we will register the packet layer when the first lowpan interface comes up and unregister when the last interface will become down
74ba9e11f02a4ce0c7708dc77d1756b93065e440	perf header use on write_event_desc number of events evsels in a evlist is kept on nr_entries field so that we dont need to recalculate it link
255e9fd4b10005fe95d4c1862d6428f7a857deb9	ssb driver_mipscore add a const qualifier be a bit stricter and add few more const qualifiers
8c2e41f7ae1234c192ef497472ad306227c77c03	simplify segment_base use actual pointer types for pointers instead of unsigned long and replace hardcoded constants with the appropriate self-documenting macros the function is still a bit messy but this seems a lot better than before to me this is mostly borrowed from a patch by thomas garnier
83eb64c85b80959549c114365016276f318afeb2	drm drop spinlock around faulting copy_to_user in commit cdd1cf799bd24ac0a4184549601ae302267301c5 author chris wilson chris-wilson.co.uk date thu dec __number__ __number__ __number__ drm make drm_read more robust against multithreaded races i fixed the races by serialising the use of the event by extending the however as thomas pointed out the copy_to_user may fault even the __copy_to_user_inatomic variant used here and calling into the driver backend with the spinlock held is bad news therefore we have to drop the spinlock before the copy but that exposes us to the old race whereby a second reader could see an out-of-order event as the first reader may claim the first request but fail to copy it back to userspace and so on returning it to the event list it will be behind the current event being copied by the second reader link
27e0fbefa5ddebdd681d2be9824302d14494c5ff	i2c omap dont save a value only needed for read-clearing
aa5e24e5f8a83b19b1b19964f35562c7a42636e2	add new gfx8 register definitions for edc edc is a ras feature for on chip memory
369e5a888179f31dcd7cc8e02d695e6481a66075	netconsole make all dynamic netconsoles share a mutex currently each dynamic netconsole_target uses its own separate mutex to synchronize the configuration operations this patch replaces the per-netconsole_target mutexes with a single mutex dynamic_netconsole_mutex the reduced granularity doesnt hurt anything the code is minutely simpler and thisd allow adding operations which should be synchronized across all dynamic netconsoles
c388eee21ad20929f440d6fae94c995791c5818b	clk tegra pllp_out2 divider is int only the pllp_out2 should be integer only the fractional bit should always be __number__
5260e291ff116ff1db14166a778fcab3f5932bc8	staging hv storvsc cleanup error handling in storvsc_channel_init use standard linux error codes
fbdf093d62de4974cd30f170cf76aa14e26b13e4	resolve infinite loop issue on non multi-platform this patch resovles the infinite loop issue incurred when exyno drm driver is enabled but all kms drivers are disabled on exynos board by returning only in case that there is kms device registered
a51e80d002b63bbdaff3229f3ebf4fbb53c75c33	convert to use irq_set_chained_handler_and_data chained irq handlers usually set up handler data as well we now have a function to set both under replace the two calls with one link
6157dbbfbf9d8e4a2b6d4e5ee35e864ab9ee8414	return upon incorrect in ipc_obtain_object_check we return when a bogus sequence number is detected via ipc_checkid while the ipc manpages state the following return codes for such errors eidrm points to a removed identifier einval invalid value or unaligned etc eidrm should only be returned upon a rmid call check and thus return einval for wrong seq this difference in semantics has also caused real bugs ie
393e5e24165d0bef60489ecd0baef085e9af2e5a	arm mmc mmci fix pio read for small sdio packets corrects a bug in mmci host driver which silently causes small reads __number__ bytes as only used in sdio from pl-18x to fail
ccc5c9ca6aac08218b1ba52afd07a1a9864c8c5d	pktcdvd switch to bio_kmalloc this is prep work for killing bi_destructor previously pktcdvd had its own pkt_bio_alloc which was basically duplication bio_kmalloc necessitating its own bi_destructor implementation v5 un-reorder some functions to make the patch easier to review
ff4cf0e5ce952488074aa7f47734af1794f55fbc	net dsa bcm_sf2 cleanup bcm_sf2_cfp_rule_get a little this patch doesnt affect how the code works my static checker complains that the mask and shift doesnt make sense because __address__ __number__ goes beyond the end of __number__ bits it should be __address__ instead but the existing code wont cause runtime bugs also the casting here is not needed and not consistent with the rest of the code
a07b67194307cc344953ce23c28d840609acac1f	be2iscsi bump the driver version bump the driver version
4883993841638963fbae2f334899f29309466152	rt2x00 pass blockack and blackackreq frames to mac80211 in monitor mode previously blockacks were always dropped by the rt2800 hardware while blockackreqs were always accepted however both are only useful on monitor interfaces at the moment and both are control frames so pass them up when mac80211 sets fif_control
d6af1a31cc72fbd558c7eddbc36f61bf09d1cf6a	vti add pmtu handling to vti_xmit we currently rely on the pmtu discovery of xfrm however if a packet is locally sent the pmtu mechanism of xfrm tries to do local socket notification what might not work for applications like ping that dont check for this so add pmtu handling to vti_xmit to report mtu changes immediately
fd8205e883cd3a7ca4ca86baecf44be3114bafcf	iser-target remove redundant assignment to local variable no need to keep a local ib_dev as a device pointer
acb069c04166bb65c681ef266956a178afdf04be	staging comedi mf6x4 use comedi_timeout use comedi_timeout to wait for the analog input end-of-conversion
7552d72a5c34a8d55037ce0c1a8cd8c3a7e86341	staging r8188eu fix sparse warnings regarding static functions this fixes the following sparse warnings warning symbol rtw_cmd_filter was not declared should it be warning symbol dynamic_chk_wk_hdl was not declared should it be
09ce0c0c8a99651cace20958278476ee3f31678c	usb xhci fix build warning in function warning may be used uninitialized in this function
25dff94ff9df40d4d663bb6ea3193a7758cc50e5	fix a small underflow in get_capi_ctr_by_nr and get_capi_appl_by_nr the parameter comes from the current code can underflow to one space before the start of the array the sanity check isnt needed in __get_capi_appl_by_nr but i changed it to match the others
bef772eb06051f49e84c3168f189b65074f19c3d	fixing error flow in case of query_fw failure the order of operations was wrong on the teardown flow
c3015313aea0f765dbe743f95087a5994db082f2	mwl8k adding support to access bbp registers adding ap firmware command to access bbp regs this will be used for retrieving different counters needed for acs
9eeb7304f3ae300c3a0dda6ff84cc7c3c8053fa0	rename n value getter to emphasize its for hdmi well be getting a function and a table for dp parameters soon enough so rename the function and table for hdmi no functional changes
b958a67c6bbe0a886bebc618aac7a059cdbab418	mmc tmio add regulator support currently the tmio mmc driver derives the ocr mask from the platform data and uses a platform callback to turn card power on and off this patch adds regulator support to the driver
ce2728aaa82bbebae7d20345324af3f0f49eeb20	ceph avoid accessing when mounting a subpath accessing causes failuire if the client has caps that restrict path
00c611def8748a0a1cf1d31842e49b42dfdb3de1	revert acpi __float__ aml improve module level execution by moving the execution to per-table basis revert commit acpi __float__ aml improve module level execution by moving the execution to per-table basis that enabled the execution of module-level aml after loading each table rather than after all aml tables have been loaded but overlooked locking issues resulting from that change
f13b1689d753f333459878ac27cb12d414502a09	vxlan do not exit on error in vxlan_stop we need to clean up vxlan despite vxlan_igmp_leave fails this fixes the following kernel warning warning cpu __number__ pid __number__ at odebug free active active state __number__ object type timer_list hint cpu __number__ pid __number__ comm not tainted hardware name bochs bochs bios bochs workqueue netns cleanup_net __number__ __address__ __address__ __number__ __address__ __address__ __address__ __number__ __address__ __address__ __address__ __address__ call trace __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ for the long-term we should handle event from the lower device of a tunnel device
2eac58d5026e4ec8b17ff8b62877fea9e1d2f1b3	arm amba make use of irqs warn make the core warn about the use of no_irq
99c79eceb152e2ac7f8a81ff55d4a810f730ec7b	lan78xx fix error handling in lan78xx_link_reset in function warning comparison is always false due to limited range of data type warning comparison is always false due to limited range of data type assigning return values that can be negative error codes to u16 variables makes them positive ignoring the errors hence use int instead drop the unlikelys unlikely considered harmful and propagate the actual error values instead of overriding them to while were at it
3524be4b21ef911ff37f7d401b743cfb4e30cf98	asoc rt5645 extend delay time for headphone pop noise headphone needs enough delay time before unmuting for avoiding pop sound we extend the delay time to make sure headphone doesnt pop
b5e7a955a3515bf6b568050533fa9b1b72460a95	arm kvm fix vgic-disabled build the vgic code can be disabled in kconfig and there are dummy implementations of most of the provided api functions for the disabled case however the newly introduced functions are lacking those dummies resulting in this build error in function kvm_arch_destroy_vm error implicit declaration of function kvm_vgic_destroy kvm_vgic_destroykvm in function kvm_arch_vcpu_free error implicit declaration of function kvm_vgic_vcpu_destroy kvm_vgic_vcpu_destroyvcpu this adds two inline helpers to get it to build again in this configuration
5d2031f2395728c765cf2bd7c1ebb6d51c4fe076	bcma convert to pm_ops and avoid doing the unnecessary pci operations the pci layer will do them for us
cf5d2af6839deb2e7765648ce139dc9677db0c18	staging comedi icp_multi correct insn_bits returned data for do for some unfathomable reason the comedi insn_bits handler for the digital output subdevice icp_multi_insn_bits_do writes the digital output register and reads back the unrelated digital input register read back the current state of the outputs held in instead
31bd86d9834fc1fb5bd00247358754bebabf0639	gpio xlp use resource management for irqs use the resource managed variant of irq_alloc_descs and remove the code manually freeing allocated interrupt descriptors
32a59234ae96161b2c91f39801f81c471933d78b	get rid of f_dentry
38715df206d52817ac8ac032f35ee76955bdc15d	migrate to new set-state interface migrate tile driver to the new set-state interface provided by clockevents core the earlier set-mode interface is marked obsolete now this also enables us to implement callbacks for new states of clockevent devices for example oneshot_stopped
a437d2744b0a4e5f405f6b9be284eb9e0a2d7741	make a copy of skbs delivered to since lowpan_process_data modifies the skb by calling skb_pull we need our own copy so that it doesnt affect the data received by other protcols in this case af_ieee802154
e57a2fea8787dffcbdff3f7f0567a1e8555dd93a	i40e keep service tasks out of reset process make sure the service tasks dont try to meddle with the device while a reset is in progress odd things can happen such as funky stats values change-id i6929cb9d6d96839c9279362ca7c0e3fe6c8fcc66
7e0f096b8d3ffcf04955c239e80993ec451c9a1a	drbd remove drbd_accept and use kernel_accept instead
b41dfdb18e2ad1320ffea58fb7c3c8915e772660	staging wilc1000 define a new local variable in wilc_scan struct scan_info is defined as a new local variable in wilc_scan function it makes some assignment short as well as improve more readability
8f8a34026ec5fcf0eeabbe2535bd90dec5da64e0	staging vchiq_arm add module_description this patch adds the missing module description for the driver
e58c295c041d17aa4298c1c8f618752f05d5c6ee	alsa pcm add tstamp_type and proto to sw_params compat layer i forgot to add the new fields in sw_params to compat layer
4fde58bb43512fc283ea76e90d20198da177fb69	staging rtl8192u ieee80211 replace init_timer by setup_timer this patch replaces init_timer and the __number__ step initialization of function and data by setup_timer to make the code more concise the issue was discovered using the following coccinelle script expression ds e1 e2 e1 e2 e1 e2 e2 e1
8678b8181dacb1804325f70e63a176873ce9784f	mmc sdhci add irq wake up support dont disable sd host irq during suspend if it is wake up source enable wakeup event during suspend
5da964e0fae05fd96a97a0fcc6bc53dad655f61d	arm mvebu make the snoop disabling optional in mvebu_v7_pmsu_idle_prepare on some mvebu v7 socs the ones using a cortex-a9 core and not a pj4b core the snoop disabling feature does not exist as the hardware coherency is handled in a different way therefore in preparation to the introduction of the cpuidle support for those socs this commit modifies the mvebu_v7_psmu_idle_prepare function to take several flags which allow to decide whether snooping should be disabled and whether we should use the deep idle mode or not link
506ee557b75d4e77f4876ca4189cb855397d617b	omap nokia770 remove custom implementation of ads7846_get_pendown_state the default implementation matches exactly our custom one so we can switch to using the default one as a bonus the driver will take care of setting gpio line for us
2bff6a508eb2ba8b341c20db3099e050e5496e3d	split upstream bus device lookup
d558950efcfb005771151cb843ac906355ad5ef4	print mac via printk format specifier print via printk extended format specifier instead of custom code
52d0aa7980cfee85c831b2969e659055395386d4	iscsi-target disable immediate unsolicited data with iser protection this patch explicitly disables immediate unsolicited data for iser connections during login in iscsi_login_zero_tsih_s2 when protection has been enabled for the session by the underlying hardware this is currently required because protection signature memory regions mrs expect t10 pi to occur on rdma reads rdma writes transfers and not on a immediate data payload associated with iscsi_op_scsi_cmd or unsolicited data-out associated with a iscsi_op_scsi_data_out v2 changes add target_prot_dout_insert check sagi add pr_debug noisemaker sagi add goto to avoid early return from mrdsl check nab
efa64c0978a1fb3de8bca6f931b9858c3e371f1f	keys ceph use key preparsing make use of key preparsing in ceph so that quota size determination can take place prior to keyring locking when a key is being added
342b59caa66240b670285d519fdfe2c44289b516	lpfc fix device discovery failures during switch reboot test when the switch is rebooted the lpfc driver fails to log into the fabric and unexpected timeout message is seen fix do not issue regvfi if the flogi was internally aborted
66067ad73c384a1780421e48a72a69b393359aa7	double fence slot we introduced vmid fence so one hw submission could produce two fences
ee91a15972cc70efa4d17b4bbdb61ff314528110	convert hsw_compute_linetime_wm to use in-flight state when watermark calculation was moved up to the atomic check phase the code was updated to calculate based on in-flight atomic state rather than already-committed state however the hsw_compute_linetime_wm didnt get updated and continued to pull values out of the currently-committed crtc state on platforms that call this function only this will cause problems when we go to enable the crtc since well pull the current mode off rather than the mode were calculating for and wind up with a divide by zero error this was an oversight in commit commit a28170f3389f4e42db95e595b0d86384a79de696 author matt roper intel.com date thu sep __number__ __number__ calculate ilk-style watermarks during atomic check v3 link
f7d11b33d4e8cedf19367c09b891bbc705163976	ubi fix fastmaps update_vol usually fastmap is free to consider every peb in one of the pools as newer than the existing peb since pebs in a pool are by definition newer than everything else but update_vol missed the case that a pool can contain more than one candidate
b2e19a934a36b2b4affcde9c170c0f01afabe50a	perf evlist fix for double free in stat fix for double free bug in due to dangling thread_map pointer in perf_evlist struct code path excercised when perf stat switch is used but not set and is followed by another switch example perf stat link
abd2541f3900f058fffdd89dac125b5fd48a0037	staging comedi me_daq tidy up ai register defines tidy up this register usage by defining some macros to set the channel and gain bits add a define for the bit that enables differential mode writing to this offset puts data in the ai chanlist fifo reading from it gets data from the ai data fifo for aesthetics use the same define to read and write the registers
bdf6345b3262d0ddbc6405fbc0fedd2941bec08e	tda998x add the active aspect in hdmi avi frame the picture aspect setting was zero which is reserved a setting of same as picture makes more sense
d985d15151c0e9d3add8050da77d8f507f6cc7f5	net ipv4 fix sparse error in fib_good_nh fixes following sparse errors warning incorrect type in argument __number__ different base types expected unsigned int unsigned usertype key got restricted __be32 const usertype nh_gw
49dfc304ba241b315068023962004542c5118103	slab use the lock on alien_cache instead of the lock on array_cache now we have separate alien_cache structure so itd be better to hold the lock on alien_cache while manipulating alien_cache after that we dont need the lock on array_cache so remove it
13c9062122a8d05e0881ca8bd9037d2e57e56860	tty amiserial remove irq_ports they used to work as a storage for info pointer used in isrs they are not really needed just pass the pointer through request_irq to the handlers it was set to null and tested in the isrs but we do not need the tests as we disable all the interrupts at the same places where null sets were
231e6faf027ae5e86539bb5a3cdb2b22a96dae8c	use new drm_fb_helper functions use the newly created wrapper drm_fb_helper functions instead of calling core fbdev functions directly they also simplify the fb_info creation v3 update error handling for new drm_fb_helper funcs check using is_err instead of checking for null v2 no changes
c29bceb3967398cf2ac8bf8edf9634fdb722df7d	fix execve behavior apparmor for add support for apparmor to explicitly fail requested domain transitions if no_new_privs is set and the task is not unconfined transitions from unconfined are still allowed because this always results in a reduction of privileges v18 new acked-by new description
2c81a10ae6c6aaef68f8b92b4fc8037d1dfe0d9e	asoc max98090 add values for user pclk __float__ mhz this patch adds the clock divisor and multiplier ni mi values for audio sampling frequencies __number__ and __number__ hz and pclk __float__ mhz this is useful for the odroid boards when the codec works in master mode and its mclk clock is fed from the i2s cdclk output edited the commit description
1f054f52ee7c4f62b4ea352e95943f032d19cc15	arm exynos add support for secondary cpu bring-up on exynos4412 exynos4412 uses different information register for each core this patch adjusts the bring-up code to take that into account
cd76d10b78ab21a7adc4562e016213dd4891b6e5	pci use pci_class_serial_usb instead of bare number be6646bfbaec pci prevent xhci driver from claiming amd nolan usb3 drd device added a quirk to override the pci class code of the amd nolan device use pci_class_serial_usb instead of a bare number to improve greppability also add a log message about what were doing no functional change except the new message
2a29190c040c0b11e39197c67abf6f87e0a61f9a	perf tools remove unnecessary callchain cursor state restore on unmatch if a new callchain branch doesnt match a single entry of the node that it is given against comparison in append_chain then the cursor is expected to be at the same position as it was before the comparison loop as such there is no need to restore the cursor position on exit in case of non matching branches link
9bb2f334b9b5f2eb6030b7988b7f2302c3115bbb	rbd create pool_id device attribute add an entry under named pool_id that provides the id for the pool the rbd image is assocatied with this is in addition to the pool name already provided rename the poolid field in struct rbd_device to be pool_id update the documentation to reflect the addition of this new entry
cbe128e348e5994516304f94865ff90c40c1c5ae	cgroup get rid of populate for memcg the last man standing justifying the need for populate is the sock memcg initialization functions now that we are able to pass a struct mem_cgroup instead of a struct cgroup to the socket initialization there is nothing that stops us from initializing everything in create
4e5af27e2a3a393558936b82fece1942ec49f534	mtd nand pasemi return error code of nand_scan on error the nand_scan returns an appropriate error value when it fails use it instead of the fixed error code
e9dbca8d732e20b8d31a3094a8669c014e7ee262	nfs release per-net clients lock before calling pipefs dentries creation v3 __number__ lookup for client is performed from the beginning of the list on each pipefs event handling operation lockdep is sad otherwise because inode mutex is taken on pipefs dentry creation which can be called on mount notification where this per-net client lock is taken on clients list walk
7c9950768fb4a0a3fbd3a866ae94734c5078fd0c	media stv0367 just return __number__ instead of using a var instead of allocating a var to store __number__ and just return it change the code to return __number__ directly
82162b5ae3d152fd7d887b36213f5b6785fe1294	perf hists browser fix a small callchain display bug the currently when perf tui report shows callchain the first level chains have bogus sign even though only the last one has children since they are on a single line of the chain toggling intermediate entries has no effect fix it to show sign at the last entry only note that non-first level callchain entries dont have this problem before children self command shared object symbols swapper k cpuidle_wrap_enter cpuidle_wrap_enter cpuidle_enter_tk cpuidle_idle_call cpu_idle after children self command shared object symbols swapper k cpuidle_wrap_enter cpuidle_wrap_enter cpuidle_enter_tk cpuidle_idle_call cpu_idle link
9f4137fa2cf20bd1ffb1fcb2711c3c347cc86fea	cris time cleanup of persistent clock stuff remove update_persistent_clock as it does nothing now remove read_persistent_clock let it fall back to the weak version
a0ea787b027b79cf2e01c6758e5246db06520158	check schedule_timeout_interruptible return value in v9fs_file_do_lock we need to check return value of schedule_timeout_interruptible and exit the loop when it returns nonzero otherwise the loop is not really interruptible and after the signal the loop is no longer throttled by p9_lock_timeout
05d9e1bba43b3b9e722ca06fc45b79d93374be18	rtlwifi rtl8192ee fix smatch warning smatch lists the following check rtl92ee_rx_query_desc warn inconsistent indenting
9f8196cc05caa9aba19f38f29c5f9a12722986c4	virtio_pci remove the call to vp_free_vectors in vp_request_msix_vectors vp_request_msix_vectors is only called by vp_try_to_find_vqs which already calls vp_free_vectors through vp_del_vqs in the failure case
76130ccabcc39f0716691113f739f28a3088e253	f2fs fix the location of tracepoint we need to get a trace before submit_bio since its bi_sector is remapped during the submit_bio
abee4c8414a621795bc7d4302061209a0b5d04c1	ath9k clean up and enhance ani debugfs file unify scnprintf calls and include the current immunity level
a1c1baf00e5c08dda9c0ee25658bf0ce301102ae	hwmon f75375s let f75375_update_device treat pwmx as a measured value treat pwmx as a measured value not as a mostly static limit value so that it is updated more frequently from the device register
8b4af8a8e3e6ad82e0d32d1665d9a755c05c4c12	fix powertune table upload exclude avfs related fields when update powertune table to hw the driver shouldnt set them directly
1c16519fc2d63d0f58a7c54a47404e3de2c20396	staging comedi amplc_pc263 cleanup find pci device code for aesthetic reasons rename the function and pass the comedi_devconfig struct instead of pre-parsing out the information use for_each_pci_dev instead of open-coding the loop using pci_get_device consolidate the dev_err messages when a pci device is not found
e1432d30cb245f562d495043a58476e7c3b4358e	fix device table entry fix module device table entry without this there will be a build failure while trying to build qspi as a module
c0901581ad077004145c9ee80e843fba71c100b8	btrfs avoid repair bug from btree_read_extent_buffer_pages from btree_read_extent_buffer_pages currently repair_io_failure can be called with mirror_num being zero when submit_one_bio returned an error before this used to cause a in repair_io_failure and indeed this is not a case that needs the repair code to rewrite disk blocks this commit prevents calling repair_io_failure in this case and thus avoids the bug_on and malfunction
1975a54b56aceefb5b3e4ea92b04dd7d298bf01f	pxa168_eth support the get_ts_info ethtool method
3a281f946640542a7a7372f436e101ee1fbc4c97	omfs set error return when d_make_root fails a static checker found the following issue in the error path for omfs_fill_super omfs_fill_super warn missing error code d_make_root failed ret __number__ fix by returning in this case
0635287a308d38bad334fe91ea5a69b597e0a583	spi revert remove wrappers this reverts commit since it breaks the build due to differing implementations of iowrite and ioread
175f8d6746aa4b1dac5ccf576bcbc5488ff21a36	mlx4 corretly check failed allocation when allocation fails mlx4_alloc_cmd_mailbox returns since there is no case that mlx4_alloc_cmd_mailbox returns null it needs to be checked by is_err not is_err_or_null
6cc4af56066d8e9c62584cf61c6ce50fd0ab139a	f2fs code cleanup and simplify in func this patch simplifies list operations in find_gc_inode and add_gc_inode just simple code cleanup jaegeuk kim add description
39304fad8f31b2114492e9a09fe0bd1ac7eb1834	clocksource tegra remove deprecated irqf_disabled this patch removes the use of the irqf_disabled flag its a noop since and it will be removed one day dlezcano slightly changed the changelog
63511f6d5ba0c20850448991be297751ddb6798c	bluetooth fix potential null dereference in smp channel setup when the allocation of the l2cap channel for the security manager fails then the smp variable might be null in that case do not try to free the non-existing crypto contexts
0fffa5df4cf3e22be4f40f6698ab9e49f3ffd6fa	add conditional branch filter cond to perf record adding perf record support for new branch stack filter criteria perf_sample_branch_cond link
4165fe9a9287aa9c8e7e4152c21ee179d49d129e	brcmfmac fix nvram processing the nvram file can hold a combination in which the value may have spaces ie __number__ fe ff the parsing functionality did not deal with this so it gives an error message __float__ brcmfmac brcmf_nvram_handle_key warning expected skip invalid key entry because is being considerd as pair and it expects sign after __number__ for next pair this entry can be completely ignored as firmware does not need it
76ff0e64d42fac59fb756536342a3d3f3e4e8833	ti-st free skb on firmware download if during validation of the firmware download the data doesnt match what is expected out of the chip this calls for a firmware download failure and a retry free the skb which collects response during such scenarios
60e66d874a3b18862dae3c15e6281240b678bc8f	staging bcm refactored line lengths
f03eec87720d3427443b64f2d1b237b85d5c68b4	greybus move id-field before bundle-field in cport descriptor note that this also makes sure the id-field is naturally aligned in case we ever were to remove the __packed attribute
c0adae9e51ab88293d6cc729c46fdb4365bf77f5	arm exynos add support for exynos4415 soc this patch adds support for exynos4415 soc exynos4415 is based on the risc processor for smartphone exynos4415 has cortex a9 quad-cores and has a target speed of and provides memory bandwidth
3786dc454fa4c10b129acc0535705f1c5a64fc72	qla2xxx fix regression introduced by target configfs changes this patch fixes following regression targetcli errno __number__ permission denied
314a8203b6de2df164399996ece1412ae8f6270d	regulator max77686 use module_platform_driver instead subsys initcall the drivers init and exit function dont do anything besides registering and unregistering the platform driver so the module_platform_driver macro could just be used instead of having separate functions currently the macro is not being used because the driver is initialized at subsys init call level but this isnt necessary since consumer devices are defined in the dt as dependencies so theres no need for init calls order
51bbd276015661a28b69450e104632bc2b633311	drm remove unused variables in drm_fb_helper_hotplug_event
9e17df37d710f8998e9cb10a548304fe33d4a5c2	tty mxser improve error handling in mxser_probe and mxser_module_init __number__ currently mxser_probe and mxser_module_init ignore errors that can happen in tty_port_register_device __number__ mxser_module_init does not deallocate resources allocated in mxser_get_isa_conf if mxser_initbrd failed the patch adds proper error handling in all the cases also it moves free_irq from mxser_release_isa_res to mxser_board_remove since it makes mxser_release_isa_res a counterpart for mxser_get_isa_conf while free_irq is relevant to both isa and pci boards found by linux driver verification project
123b69ab8020bc035b6d940417fbcc7aa27fd2b1	dw_dmac dont wait for fifo_empty endlessly in dwc_chan_pause when we pause the channel after transfer is completed we might stuck in the dwc_chan_pause because the fifo_empty flag will never be asserted to avoid the endless loop we introduce a timeout here the proper solution is to somehow get the residue in fifo and avoid busyloop when transfer is done but this task is not simple and fast unfortunately we cant use cpu_relax in conjunction with jiffies checker due to we have interrupts disabled by spin_lock_irqsave and there is a big chance that no interrupts will come to update the the worst case is ahb write fifo size hclk __float__ us where ahb write __number__ cycles hclk __number__ mhz burst size __number__ byte fifo size __number__ bytes the proposed timeout might be considered as a big one though we enter to that state only when we have the transfer already completed
ebf4063e869d959daf75efb4ef1c7bc80dcd4800	vxlan move cleanup to uninit put destruction of per-cpu statistics removal in ndo_uninit since it is created by ndo_init this also avoids any problems that might be cause by destructor being called after module removed
46e21bbadb2f4770199f2343f311f8833e5bf495	drbd neg_ack does not imply a barrier-ack dont drop a request from the transfer log just because it was neg_acked we need it around to be able to verify p_barrier_acks against the transver log
c7ead11d0b498984169871fd03c57441862ec3f3	silence a debug message triggered by newer userspace
1ce6311b99fe809530e8e2181bb73855f85041d1	arm-cci get the status of a counter add helper routines to check if the counter is enabled or not
a81edbdeb68bbecb3ee2888da7a83662ae69c9f3	regulator virtual convert to use apis
c95789ecd5a979fd718ae09763df3fa50dd97a91	media cx25821 do not expose broken video output streams the cx25821 driver has support for one audio output channel and two video output channels this is implemented in a very ugly and very evil way through a custom ioctl that passes the filename of a file containing the video data which is then read by the driver itself using vfs there are a number of problems with this __number__ its very ugly and very evil i cant say that often enough __number__ v4l2 supports video output so why not use __number__ its very buggy closing the filehandle through which you passed the ioctl will oops the kernel __number__ its a nasty security leak since this allows you to load any file in the system as a video or audio source so in theory you can output to audio or video out and record decode it on another device because of all these issues we no longer register those output video nodes
a5c954eff652359aeecb4d822e8e8cef86abcb9b	staging lustre include fix one off errors in during inspection of another patch dan carpenter noticed some one off errors in fix the condition test for obif_max_oid
e5abba4c6aa7f094d32c0115193516697da60df8	lpfc correct loss of rscns during array testing
af690ce9d7c09877460e818e28a48a84b0f75258	staging iio hmc5843 add all available models to device tree id table
d075a88e515278b3e2d5ec39e80e6fd3c6e48841	cpufreq staticize cpufreq_cpu_get_raw cpufreq_cpu_get_raw isnt used by any external users staticize it
50862ce711b3e9cf8511df7a356892e128b037d3	slab remove slub sysfs interface files early for empty memcg caches with kmem cgroup support enabled kmem_caches can be created and destroyed frequently and a great number of near empty kmem_caches can accumulate if there are a lot of transient cgroups and the system is not under memory pressure when memory reclaim starts under such conditions it can lead to consecutive deactivation and destruction of many kmem_caches easily hundreds of thousands on moderately large systems exposing scalability issues in the current slab management code this is one of the patches to address the issue each cache has a number of sysfs interface files under on a system with a lot of memory and transient memcgs the number of interface files which have to be removed once memory reclaim kicks in can reach millions link
47ad3428a1086af425447f763705e06b16ae905d	remove useless kfree remove useless kfree and clean up code related to the removal the semantic patch that finds this problem is as follows position expression x if null return position expression e iterator i statement s if null when s when e e1 when e e1 when e e1 when when when when e-- when return depends on unchanged position any position expression x when true null on position expression x
5ae0566a0fffa09a77ac5996e3854fe91cd87167	fix bug in matching pci devices with descriptors commit update device scope caches when pci hotplug happens introduces a bug which fails to match pci devices with dmar device scope entries if pci path array in the entry has more than one level for example it fails to handle __number__ __number__ device scope entry type __number__ __number__ __number__ entry length __number__ __number__ reserved __number__ __number__ __number__ enumeration id __number__ __number__ __number__ pci bus number __number__ __number__ __number__ pci path __number__ __number__ pci path and cause dma failure on hp dl980 as reason __number__ present bit in context entry is clear dmar drhd handling fault status reg __number__ dmar read request device fault addr
714b07be3bbf94d2dc9838723d63fc827fdbef12	usb refactor hub remote wake handling refactor the code to check for a remote wakeup on a port into its own function keep the behavior the same and set connect_change in hub_events if the device disconnected on resume cleanup references to to use a common variable
142388194191a3edc9ba01cfcfd8b691e0971fb2	btrfs do not background blkdev_put at the end of if the device exclusive open is not actually closed then there might be a race with another program in the userland who is trying to open the device in exclusive mode and it may fail for eg unmount fsck btrfs dev del fsck so here background blkdev_put is not a choice
0837d8780c766bffe1fc5a5da54fb2620923a6d0	asoc sunxi remove useless comments and variable the comment is misleading on how we should support external power amps and the variable is not used and generates a warning
8480ac567959eecdc694cf4f9c02d6fa687384b6	asoc hdmi-codec remove hdmi device unregister while unregistering the hdmi-codec the hdmi device list must be cleaned up it avoid kernel page fault when registering again the hdmi-codec
a65c2fcd00518b7339d72e08e6b2b4261fbcc22a	set gac_eco_bits register on according to bspec gac_eco_bits register exists on gen7 platforms as well configure it accordingly
b59d5c5b57b6ddef538aacef597a3278a7ab09c4	staging wilc1000 rename ieslen of struct connect_attr this patch renames ieslen of struct connect_attr to ies_len to avoid camelcase naming convention
492c4a0df11573e141a2decc6012b3bddd14a11e	arm csr clock fix indentation
5b86c5cf7536e383b301bf3322087b4bd4f6547b	i40e fix ethtool offline test if the system administrator is requesting an offline diagnostic test using ethtool then we should you know actually take the device offline before doing the testing change-id i6afa1cbfcc821c9ab6e6f47ed4d8dc2d8dd20e82
cf655d953422c846558a320ac9b3c8e659b68275	block loop introduce lo_discard and lo_req_flush no behaviour change just move the handling for req_discard and req_flush in these two functions
e5adb6cddb17f8e76be404f23a2e0db102ee1bd1	asoc ad1980 cleanup printk usage use instead of this is common practice and makes it easy to find out which device generated the message while we are at it also align the error messages with the other drivers also remove the info message that is printed when the driver is probed this is just noise in bootlog
b315fedf01ac717f1c2a5eaa6959335b6baf7150	kill ironlake_fdi_freq check ironlake_fdi_compute_config already checks that we have enough fdi bandwidth and it doesnt just use a hardcoded value but takes into account factors such as the actual fdi frequency shared fdi lanes etc
50997470ef95fd8ae0ef6acab3b2e1d886ae2445	xfs reinitialise recycled vfs inode correctly we are going to keep certain on-disk information in the vfs inode rather than in a separate xfs specific stucture so we have to be careful of the vfs code clearing that information when we re-initialise reclaimable cached inodes during lookup if we dont do this then we lose critical information from the inode and that results in corruption being detected
6c16dedfd4c49c6a7f410f171c6da3116834a23d	clocksource mct extend mct to support __number__ local interrupts for exynos5420 exynos5420 is octa-core soc from samsung hence extend exynos-mct clocksource driver to support __number__ local interrupts also extend dts entries for __number__ interrupts
b61fa7bce4acdae51e5b76c358237d1ad5dfdbc5	greybus svc use macro for init and exit protocol change to gb_gpbridge_protocol_driver for making the consitent with other drivers
540436c80e5918dd5ed838449e108b1726fc4d68	netfilter nft_exthdr call ipv6_find_hdr with explicitly initialized offset in nfts nft_exthdr_eval routine we process ipv6 extension header through invoking ipv6_find_hdr but we call it with an uninitialized offset variable that contains some stack value in ipv6_find_hdr we then test if the value of offset __number__ and call skb_header_pointer on that offset in order to map struct ipv6hdr into it fix it up by initializing offset to __number__ as it was probably intended to be
4c0c596adfca795af12e8e61625fd95b50e8f8f3	media zoran fix spelling mistake in dprintk message trivial fix to spelling mistake unnsupported to unsupported in debug message
997f5b6444f4608692ec807fb802fd9767c80e76	audit remove audit_setup_context as it isnt used audit contexts have __number__ states disabled which doesnt collect anything build which collects info but might not emit it and record which collects and emits there is a state setup which isnt used get rid of it
ee27aa901805dfc9c3a5eb5f0948eba9ab481ba1	media coda fix build error by making reset control optional make reset control optional for the patch media coda add reset control support introduced a build failure if config_reset_controller is disabled error implicit declaration of function devm_reset_control_get since not all socs containing coda vpus do have a system reset controller use devm_reset_control_get_optional to make it optional
96e4be06cbfcb8c9c2da7c77bacce0e56b581c0b	call synchronize_irq before freeing eq buffer after destroying the eq the object responsible for generating interrupts call synchronize_irq to ensure that any handler routines running on other cpu cores finish execution only then free the eq buffer this patch solves a very rare case when we get panic on driver unload the same thing is done when we destroy a cq which is one of the sources generating interrupts in the case of cq we want to avoid completion handlers on a cq that was destroyed in the case we do the same to avoid receiving asynchronous events after the eq has been destroyed and its buffers freed
71aeebff2c1153037fb900e17e1accb0f7812f36	tile-srom allow the driver to be built as a module the code was already configured that way but the kconfig file didnt support requesting it a buglet caused a null pointer deref when unloading the module but this commit also corrects that issue
54be068d19ccdad6864dd8a24c20885af26f851c	hwmon adt7410 use i2c_addrs helper macro use the i2c_addrs macro to initialize the i2c devices address_list doing so saves a few lines of boilerplate code
1f555cfa29e8f787d675e8390f88ce517a37271a	ext4 serialize truncate with owerwrite dio workers jan kara have spotted interesting issue there are potential data corruption issue with direct io overwrites racing with truncate like dio write truncate_task __number__ truncate data blocks allocate them to other inode bad stuff happens because dio is still in flight in order to serialize with truncate dio worker should grab extra i_dio_count reference before drop i_mutex
913827ee9aa6bc4731c3f954581fab067c448b89	staging lustre fid checkpatch cleanup align arguments to parenthesis whitespace changes only git diff shows no difference
dac562fc5ff4956d779029d2ae379e34c791f011	annotate hardware config module parameters in when the kernel is running in secure boot mode we lock down the kernel to prevent userspace from modifying the running kernel image whilst this includes prohibiting access to things like it must also prevent access by means of configuring driver modules in such a way as to cause a device to access or modify the kernel image to this end annotate statements that refer to hardware configuration and indicate for future reference what type of parameter they specify the parameter parser in the core sees this information and can skip such parameters with an error message if the kernel is locked down the module initialisation then runs as normal but just sees whatever the default values for those parameters is note that we do still need to do the module initialisation because some drivers have viable defaults set in case parameters arent specified and some drivers support automatic configuration pnp or pci in addition to manually coded parameters this patch annotates drivers in
1d017b6b36675574ec8a6f7dbcd3fd3bec2dc03f	mfd arizona add missing cleanup on remove wed forgotten to disable or the regulators practically speaking this code is unlikely to ever be run
ab2cfbb2bddb7c7bc4394e52e91044d5ff645cb4	macvlan fdb replace support add support for iproute2 command bridge fdb replace the rtnletlink call back function ndo_fdb_add will be called with the nlm_f_replace flag set simply return resubmitted because net-next was closed last week
5ade6683e916df6a00a9747ccc40191fff83a064	dmaengine qcom_hidma convert callback to helper function this is in preperation of moving to a callback that provides results to the callback for the transaction the conversion will maintain current behavior and the driver must convert to new callback mechanism at a later time in order to receive results
a59e6d815226b70780427648e359da9bbee07171	r8152 correct the rx early size the rx early size should be agg_buf_sz packet size __number__
a3818c6d5718c40e661846c0f6504a7f3f67918a	arm dra7 hwmod set dss submodule parent hwmods set dss core hwmod as the parent for all the dss submodules this ensures that the parent hwmods are enabled before any dss submodules are accessed
eeba1f8b6ab103c42c25751620fb8625bcff4c10	asoc wm8962 log the selected sysclk ratio
e25001d8be225b09a9a660f121892961bb58a09a	omapdss hdmi add hdmi_init_regulator separate regulator init code into its own function for clarity
7b748dc0ed95cfee7962c5359299e4f305989769	rsi sending qos null packet via the mgmt queue send the qos null packet via mgmt queue
8351c7aad45c15647903f70e30a5884258d25b95	arm s3c64xx raise the frequency of the second i2c bus on cragganmore the s3c i2c driver defaults to a rather low ask for for a bit of a speed boost
cdf434eef11dc3a9e820de8fd6a6a397da490cd9	staging comedi comedi_parport tidy up parport_insn_c rename this function to better describe its use use comedi_dio_update_state to handle the boilerplate code to update the subdevice
05a25c8e2c593914c18faf91dfb5ee471b79ce58	use already defined macros for is_reachable define for the same reason as commit ese macros which are already defined it is better to use macros is_builtin and is_module for defining is_reachable
3c4b9d09729cb04070edb167c813884507f4e433	staging lustre llite speedup in assume dchild argument is fully initialized in and callbacks so additional lookup for elc is not needed intel-bug-id xyratex-bug-id mrp-1027 reviewed-on
817c5ac2dc41f6371bbc343bdf236c8993d53c28	staging comedi adv_pci1723 remove subdevice len_chanlist initialization the subdevice len_chanlist is only used by subdevices that support async commands remove the unnecessary initializations in this driver
31aafb45f4e1c34e4aba37c150ae4e74880b46ed	make vma_shareable return bool this makes vma_shareable return bool now due to this particular function only ever returning either one or zero as its return value
2a4fe14bc8da0af53076fa90ac34738c7b55fc3b	fix usage of __raw io fix the use of __raw io accessors when the are better this should fix issues if the kernel is running as big endian jac reformat subject line fix commit message typo link
06f491ef4b659fa6f6850f31d05a4a03db0d9d96	iwlagn remove code duplication code duplication was needed during the move not needed any more
81003bc924bac0a99bfdc2869f5dff5a87aa4a3d	phy dp83867 make rgmii parameters optional if you compile without of_mdio support in an rgmii configuration we fail to configure the dp83867 phy today by writing garbage into its configuration registers on the other hand if you do compile with of_mdio and the phy gets loaded via device tree you have to have the properties set in the device tree otherwise we fail to load the driver and dont even attach the generic phy driver to the interface anymore to make things slightly more consistent make the rgmii configuration properties optional and allow a user to omit them in their device tree
2ead66b5472542d82f31c3b6418b23ace3dac87d	sn use normal resource instead of pci_window pci_window in pci_controller will not be used again use normal resource instead of pci_window in sn_legacy_pci_window_fixup this patch is to prepare to remove pci_window in ia64
dc9f1a8d790ee766c47eca163261225680691e64	mmc sh_mobile_sdhi simplify accessing dt data by using the helper of_device_get_match_data we can skip some checking and make the code simpler
9526b2b6d6b9f183b66cf21c4afa6e79d5a14f44	pnfs-obj remove unused variable from objlayout_get_deviceinfo local variable sb was not being used in objlayout_get_deviceinfo
a35ab937cb27ec8c00b6f13cade93dc10e22b670	bcma jump to out label for invalid func value consistently jump to the out label for error conditions adds missing check for func validity in bcma_extpci_write_config
5dee25d08eac01472904b0ab32ce35edee5c0518	selinux initialize sock security class to default value initialize the security class of sock security structures to the generic socket class this is similar to what is already done in inode_alloc_security for files generally the sclass field will later by set by socket_post_create or sk_clone or sock_graft but for protocol implementations that fail to call any of these for newly accepted sockets we want some sane default that will yield a legitimate avc denied message with non-garbage values for class and permission
8443cc142d81b722740a98f42cd4deae826311d0	fsl_soc sparse fixes warning incorrect type in argument __number__ different base types expected restricted __be32 const usertype got unsigned int const usertype
c1e3209623ccd92f2f391a31ecf3895daa0238f3	v4l2-dev forgot to add vidioc_dv_timings_cap the vidioc_dv_timings_cap ioctl check wasnt added to determine_valid_ioctls this caused this ioctl to always return the cause for this was that for __float__ two patch series were merged one changing v4l2 core ioctl handling and one adding new functionality and some of the new functionality wasnt handled by the new v4l2 core code taking it directly due to vacations linus
0eb9acda36ac41e43afd152a96c2e769200bc264	use get_user_pages_unlocked moving from get_user_pages to get_user_pages_unlocked simplifies the code and takes advantage of vm_fault_retry functionality when faulting in pages link
ce48a91139eaafba2ed0f917e5ca744f20c28c47	staging comedi ni_660x local functions should not be exported the function ni_660x_release_mite_channel is only referenced in this file make it static
a70181049fc7b619ddc10cc1b956e7ee04b5bddd	i2c tegra add protocol_mangling as supported functionality the tegra i2c driver supports the i2c_m_ignore_nak and hence returning i2c_func_protocol_mangling as supported functionality
506c148ee5e1bfb836116353305927ca4c21a23e	asoc intel remove unused function hsw_pcm_free_modules remove the unused function hsw_pcm_free_modules to fix the compling warning warning sw_pcm_free_modules defined but not used static void hsw_pcm_free_modulesstruct hsw_priv_data
c6249ff7521c0211e9daa37f07a4c016a5c4d454	usb serial do not forward usb specific errors in write use usb_translate_errors to map usb-specific errors to errors appropriate for user space enomem enodev and eio in write currently almost all serial drivers simply forward error codes from the stack from usb_submit_urb but these codes often have different meanings in user-space doing the mapping in usb-serial core simplifies driver code and allows for more consistent error reporting
df25cb4645a12b9300d4b14ceaf9071bc0f1cad8	arm omap2 gpmc-onenand replace pr_err with dev_err do this becasue dev_err is preferred over pr_err and because it will match gpmc-nand thus the code shows looks more consistent
3d0ccbaff396920eedeb6a8d0dbb3c95847e937e	iio light lm3533-als use devm_iio_device_alloc using devm_iio_device_alloc makes code simpler
b0d5e15cc4d76efacdfe8d974f50d2afc25123fe	scsi bnx2fc adjust duplicate test delete successive tests to the same location the code tested the result of a previous allocation that itself was already tested it is changed to test the result of the most recent allocation a simplified version of the semantic match that finds this problem is as follows local idexpression y expression when forall return when when when forall return
00581b30ae75ea0813207803e2b1d3f9abc55b9a	regulator wm8994 set enable_time in descriptor
d12067f428c037b4575aaeb2be00847fc214c24a	dm bufio dont take the lock in dm_bufio_shrink_count dm_bufio_shrink_count is called from do_shrink_slab to find out how many freeable objects are there the reported value doesnt have to be precise so we dont need to take the dm-bufio lock
38f1c53df288b56ad4b8421b13fbdb7232e92270	staging tpci200_slot_unmap_space should return __number__ if succeed tpci200_slot_unmap_space should return __number__ if the operation was properly done if not the caller will think that something wrong happened
8668594a96516fad01e3336a6b13072a51ed188b	staging wilc1000 rename u8p2p_vendorspec variable this patch renames u8p2p_vendorspec variable to p2p_vendor_spec to avoid camelcase
355f1a39183467d48f20d90adce3b4aa75c6b260	usb musb da8xx dont print phy error on this suppresses printing the error message failed to get phy in the kernel log when the error is this prevents usless noise in the kernel log
191227d99a281333b50aaf82ab4152fbfa249c19	alsa usb-audio allow clock source validity interrupts minidsp usbstreamer uac2 devices send clock validity changes with the control field set to zero the current interrupt handler ignores all packets if the control field does not match the mixer elements but it really should only do that in case that field is needed to distinguish multiple elements with the same id this patch implements a logic that lets notifications packets pass if the element id is unique for a given device
d9ceb957fd97836c7fb0e403062e68ad2f737021	support relocations all the rest of the code to enable this is in my branch without my branch hitting offsets is impossible the code has always supported but its never actually been run of tested this change doesnt actually fix anything __number__ i am not sure why x wont work yet i do not get hangs or obvious errors there are __number__ fixes grouped together here first is to remove the hardcoded __number__ for the upper dword of the relocation the next fix is to use a value for target_offset the final fix is to not directly apply target_offset to is part of abi and so we cannot change it as it stands is enough to represent everything were interested in representing anyway the main problem is we cannot add greater than values to it directly __number__ almost all of intel-gpu-tools is not yet ready to test relocations there are a few places that expect values for offsets and these all wont work
1521109318466c2e064dcbd732aa64f99a62852f	arm s3c64xx add irq mapping for wm0010 on cragganmore
40149f00fb55263cf10066bafc8470d33b1ddcfc	actually pass the reclaim gfp_t along to shmemfs words cannot describe the embarrassment at creating a new gfp_t relaim to only prevent the oomkiller but allow reclaim and then not use it in the shmem_read_mapping_page_gfp
b44b5f4ae96de87e458ef73fc01e7ec0dbac10c0	ndisc break down __ndisc_send
54cd255808761ecfd0e000eb78eb74dde8cd0c96	dmaengine dma_slave_config add support for slave port window some slave devices uses address window instead of single register for read write of data with the the address window can be specified and the dmaengine driver should use this information to correctly set up the transfer to loop within the provided window
f559cfe37bc7036ba62215d4d2851e9fc56bd936	staging lustre clean up coding style fix preferred use of is adjacent to the data name or function name
468b4bf38950b03ff2ce8316f836d2c33b17a321	iwlwifi remove messages by default theres no reason to print these all the time the messages arent all that interesting leave them as debug_info though just in case
374a69191d12a0525b7ffe1197abc30c4795a230	staging zram fix random data read makes a bug that it uses struct page as zsmallocs handle although its a uncompressed page so that it can access random page return random data or even crashed by get_first_page in zs_map_object
30533ad10b7c3d7c05b757382aee28458167ab75	media btcx-risc use swap in btcx_sort_clips use macro definition thanks to julia lawall for coccinelle scripting support
372675a4a9ac0a0af962d44dadeea69926ce45e0	vxlan unregister on namespace exit fix memory leaks and other badness from vxlan network namespace teardown when network namespace is removed all the vxlan devices should be unregistered not closed
22d5368a0838c00ed0e3ec20e7ff8c6e46ba99ef	quiet sparse noise quiet the following sparse noise warning symbol swap_token_memcg was not declared should it be
479e2b8ca88d6a7d2ed4945a2fbe50b061c713dd	staging rtl8192e rename rtl8192_net_update use naming schema found in other rtlwifi devices rename rtl8192_net_update to _rtl92e_net_update
63a9e016e8b7efddd5c0ceac2cca53540d5b78e1	toshiba-acpi add missing id tos6207 toshiba-acpi was always missing tos6207 id so it did not load automatically on some laptops such as portege r100 but it worked fine if loaded manually commit toshiba_acpi convert to use acpi_driver broke that and the driver does not work even when loaded manually since then add tos6207 id to fix it tested on toshiba portege r100
b11d282dbea27db1788893115dfca8a7856bf205	clk divider fix rate calculation for fractional rates does not calculate the rates consistently at the moment as an example on omap3 we have a clock divider with a source clock of __number__ hz with dividers __number__ __number__ and __number__ the theoretical rates are __number__ __number__ __number__ __number__ __number__ calling clk_round_rate with the rate in the first column will give the rate in the second column __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ note how clk_round_rate returns __number__ for rates from __number__ to __number__ which is mathematically correct but when clk_round_rate is called with __number__ the returned value is surprisingly __number__ this means that the following code works a bit oddly rate clk_round_rateclk __number__ clk_set_rateclk rate as clk_set_rate also does clock rate rounding the result is that the clock is set to the rate of __number__ not __number__ returned by the clk_round_rate this patch changes the to use div_round_up when calculating the rate this gives the following behavior which fixes the inconsistency __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__
7f966d394d6630313e02679de1875f67978f8bdd	prevent false tce leak message when a device dma window includes the address __number__ its reserved in the tce bitmap to avoid returning that address to drivers when the device is removed the bitmap is checked for any mappings not removed by the driver indicating a possible dma mapping leak since the reserved address is not cleared a message is printed warning of such a leak check for the reservation and clear it before checking for any other standing mappings
dca897e28f364724e42f65cf0262fa367512498d	leds verify vendor and change license in mlxcpld driver verify that vendor is mellanox as the first step of initialization if it is not return enodev change module license from gpl v2 to dual
d44ada516277f5d58b9bda2ea0a2c9503b316bbf	thermal cpu_cooling improve line breaking to improve code readiness change the way the lines are broken in this file
40abf9be8f52d440e442206182916e3dcc68f722	libnvdimm increase max envelope size for ioctl nd_ioctl must first read in the fixed sized portion of an ioctl so that it can then determine the size of the variable part prepare for nd_cmd_call calls which have larger fixed portion envelope
2134cb997f2f1b2d960ad8705d67dc8d690ba59c	gpio syscon reuse for keystone __number__ socs on keystone socs arm host can send interrupts to dsp cores using the dsp gpio controller ip each dsp gpio controller provides __number__ irq signals for each dsp core this is one of the component used by the ipc mechanism used on keystone socs keystone __number__ dsp gpio controller has specific features each gpio can be configured only as output pin setting gpio value to __number__ causes irq generation on target dsp core reading pin value returns __number__ if irq was handled or __number__ irq is still pending this patch updates gpio-syscon driver to be reused by keystone __number__ socs because the keystone __number__ dsp gpio controller is controlled through syscon devices and as requested by linus walleij such kind of gpio controllers should be integrated with driver
fa50ad614892c99232ce30710ffa704c485bb679	rename intel_setup_wm_latency to ilk_setup_wm_latency this function is only used on so rename it accordingly
abd3e80545c184f2b472f7527ae8eda34bd59f2d	firmware arm_scpi allow firmware with get_capabilities not implemented on amlogic scpi legacy implementation the get_capabilities command is not supported failover by using version
2a853e1123cbbb43ff74cc47b4ec582ce34df262	fix event disable pebs buffer drain when disabling a pebs event we need to drain the buffer doing so requires a correct mask the current code clears the pebs_active bit before draining the buffer fix that link fixed the sob
5219343f83a033fe5dfcbb0274b5a78e8b2d0fee	mips octeon set proper uart clock in internal device trees following patch to use generic __number__ drivers will need proper clock information so when using the internal device tree populate the clock-frequency property with the correct value patchwork
beb1a10f219ce720c13168203bd5ebe4ce7879e0	regmap the bypass state upon syncing
73a8ca4877e17bece77f103336aa1e05cc3adcf0	media em28xx-cards remove a wrong indent level this code is correct but the indenting is wrong and triggers a static checker warning add curly
03d89412981a7681971bc77edba1669595763030	perf probe use dwarf_getcfi_elf instead of dwarf_getcfi the dwarf_getcfi only checks section for cfi but as most binaries only have itd return null and it makes some variables inaccessible using dwarf_getcfi_elf along with dwarf_getelf allows to show and add probe to more variables link
a45c30ec59342c47604ea074bcf56a43a8cde8aa	hid added missing hid consumer page identifiers adds ca and nary usage type identifiers
6b478c2c38fc2f379e7b4c3ef5e9432d8ca887b9	staging octeon fix quoted string split across lines in fix issues with quoted string split across lines in
4f5359e94bbfbe349fd1ae00516dfe749d53fe22	make lazy flush independent from the tlb_refresh bit we have __number__ strategies to reduce the number of rpcit instructions a hw feature indicated via the tlb_refresh bit allows us to omit rpcit for invalid valid translation-table entry updates with lazy flush we omit rpcit for valid invalid updates until we run out of dma addresses when we have to reuse dma addresses we issue a global tlb flush using only one rpcit instruction currently lazy flushing depends on tlb_refresh since there is no technical reason for this remove this dependency
4195f40685a5f2783b4decece13ed740b61ee038	fix fetching from acpi on certain systems nvbios_extend returns __number__ to indicate extended the array and __number__ to indicate the array is already big enough this is used by the core shadowing code to prevent re-fetching chunks of the image that have already been shadowed the acpi fetching code may possibly need to extend this further due to requiring fetches to happen in chunks under certain circumstances that happen if the total image size is a multiple of the memory allocated to store the shadow will already be big enough causing the acpi codes nvbios_extend call to return __number__ which is misinterpreted as a failure the fix is simple accept __number__ as a successful condition here the core will have already made sure that were not re-fetching data we already have bugzilla v2 ben skeggs dropped hunk which would cause unnecessary re-fetching more descriptive explanation
8d640ad394d71a2467d0e08a3337fdad828786bb	usb gadget ncm make global variable read only there is ndp16_opts and ndp32_opts which are both global and only one member is ever written this patch makes the variable read-only and moves the one member that is ever written into the private struct f_ncm
ae2ffef383fad723690a4c5bad70f7035fd7d71a	recover from stateid-type error on setattr client can receives stateid-type error bad_stateid on setattr when delegation stateid was used when no open state exists in case of application calling truncate on the file client has no state to recover and fails with eio instead upon such error return the bad delegation and then resend the setattr with a zero stateid signed-off olga kornievskaia netapp.com
8a38e9a503cd1500cd93c9685c45f300639f0936	staging comedi me_daq use pci_ioremap_bar use pci_ioremap_bar to ioremap the pci resources that function just takes the pci device and a bar number it also has some additional sanity checks to make sure the bar is actually a memory resource
1413c03893332366e5b4d1e26f942ada25f3e82a	lockdep increase static allocations fuzzing a recent kernel with a large configuration hits the static allocation limits and disables lockdep this patch doubles the limits link
3fc808aaa052dec7b155f3242c6c0eabf0c49127	x86 power define rapl msrs the run time average power limiting interface is currently model specific present on sandy bridge and ivy bridge processors these correspond to documentation in the latest __number__ and ia-32 architectures software developer manual plus some typos in that document corrected
40c499f93fdefa2c496f59d18483b417ea06448b	take render error interrupt out of the mask the handling of the error interrupts isnt wired up at all and it hasnt been ever since ilk happened so dont bother
c3cdad8899c6608a2e928e1ce4fcaaddbf17cc96	staging lustre mdc remove unused mdc_open function from header function mdc_open is declared in header file but it is not used anywhere hence drop the declaration
a132c54cbcb8c239a64370b9cd9468908398bc6e	drivers hv balloon dont wait for ol_waitevent when memhp_auto_online is enabled with the recently introduced in-kernel memory onlining memory_hotplug_default_online these is no point in waiting for pages to come online in the driver and we can get rid of the waiting
fa2b3b0a50949537ac95a521b3546e9a87dc0565	rcu remove rcu_preempt_note_context_switch with the removal of config_tiny_preempt_rcu rcu_preempt_note_context_switch is now an empty function this commit therefore eliminates it by inlining it
d3904754f2a67c503e262f938353cba491525320	helper dont call drm_crtc_helper_set_config go through the interface vtable instead because not everyone might be using the crtc helper code
d6d63d720db3a63dd45142c2ce7978b52e0e684f	drop unnecessary label in eeh_pe_change_owner the label reset in eeh_pe_change_owner is used only for once no need to keep it and just drop it no logical changes introduced
5f09fc688936705b2020ca247df39ee27283668a	fix cmpxchg usage in amd_put_event_constraints now the return value of cmpxchg is used to match an event the change removes the duplicate event comparison and traverses the list until an event was removed this also fixes the following warning warning value computed is not used link
8ca7a82f7b64ad29206daba7bdaf2f8766437243	export mmu_kernel_ssize and mmu_linear_psize export mmu_kernel_ssize and mmu_linear_psize these are needed by the cxl driver which has its own mmu to setup the mmu cxl needs access to these
a005fd746b4a257ff650c4ac9651111a5d580abe	asoc codec duplicated callback function goes to component on pcm1681 codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
4cfabf09dbcbd1ca44567542247925f02f71e656	greybus operation remove unused variable buffer buffer isnt used in this function remove it
bbc62a18b6d90da702d14f0d04f67de1e37ca790	media au0828 fix checks if dvb is initialized is always not null as it is an area at the dev memory so checking if is always true instead of this stupid check what the code wants to do is to know if the dvb was successully registered fix it by checking instead for it should also be sure that this var will be null if the device was not properly initialized
c6fc663e90e56fdcaa3ad62801cfa99f287b8bfc	cifs use for formatting md5 sum passing a gazillion arguments takes a lot of code
44194e3e88fcfe77a2a6e2333847d4f27816259a	bsg remove unnecessary conditional expressions second condition in or always implies first condition is false thus bytes_read in the second is not needed the same goes to bytes_written
f9301ef8d51a43513da4e4c8e41a1e4cb9bb0884	staging comedi rtd520 cleanup the defines fixes all the __number__ char issues with these defines
b19870ee67ad8b552db0e7456a8d1d33f96421c0	use plane_name in gen7_enable_fbc all the other funcs use plane_name make gen7_enable_fbc do the same
6bd00b850635abb0044e06101761533c8beba79c	act_mirred fix a race condition on mirred_list after commit net sched make cls_u32 lockless we began to release tc actions in a rcu callback however mirred action relies on rtnl lock to protect the global mirred_list therefore we could have a race condition between rcu callback and netdevice event which caused a list corruption as reported by vinson instead of relying on rtnl lock introduce a spinlock to protect this list note in non-bind case it is still called with rtnl lock therefore should disable bh too
fb72a0590b770f7da6a02bde6b8a147a3d9f6168	clk properly handle notifier return values notifiers may return the ccf uses an inconsistent mix of checking against notify_stop or notify_bad this inconsistency leaves errors undetected in some cases clk_set_parent calls __clk_speculate_rates which stops when it hits a notifier_bad stop is ignored and passes this value back to the caller clk_set_parent compares this return value against notify_stop only ignoring notify_bad returns use notify_stop_mask to detect a negative notifier return value and document all four return value options
8812872960824681147fad051e6e1406fdfa07f9	net smsc911x synchronize the runtime pm status during system suspend the smsc911c driver puts its device into low power state when entering system suspend although it doesnt update the devices runtime pm status to rpm_suspended which causes problems for a parent device in particular when the runtime pm status of the parent is requested to be updated to rpm_suspended the runtime pm core prevent this because its forbidden to runtime suspend a device which has an active child fix this by updating the runtime pm status of the smsc911x device to rpm_suspended during system suspend in system resume lets reverse that action by runtime resuming the device and thus also the parent
2fb148804fe50639be4c5addb9e28aad0fce1687	asoc fsl imx-pcm-fiq use unsigned int for period fix the following warning when building with option in function snd_hrtimer_callback warning comparison between signed and unsigned integer expressions
6b1968d5b6e223237bca98879f31c5616b3b325f	hid make it possible to force hid-core claim the device introduce hid_ignore_special_drivers module parameter that makes hid-core claim the device even if its listed in hid_have_special_driver this is useful mostly for debugging purposes and specialized initrds where all the hid drivers are not avaiable
ce456e039613b384234de4d1faf0332b513cc1e4	make edid_load return a void always use void for arbitrary memory buffers as this allows to drop casts in assignments
0d0a3cc183c50956fe1d9e37cca520debea93ad5	atmel_serial fix atmel_default_console_device reflect new static uart platform ids introduced by patch
869639f9e7ff5ca337b27469c298dd11c29cf0fa	acpi replace strlenstring with sizeofstring give the number of chars in the string without the as strncmp wants but sizeof is compile-time
3c6396d6309b446fe28c8c6b49fbb4fa22754650	net ti cpmac fix build error due to missed api change commit phy add api for an mdio device to a bus introduces an api to access mii_bus structures but missed to update the ti cpamc driver this results in the following error message in function cpmac_probe error struct mii_bus has no member named phy_map
29e8d7bff2f52dd5464a9fb24ece608bbf8fd5ae	factor out pcibios_setup the pci core provides a generic pcibios_setup routine drop this architecture-specific version in favor of that
eeb810849a20e32aa1b60335e46ea5446ba07e1f	scsi lpfc revise version number to revise lpfc version number to
c5139450c6a8b309e4e6f25a2a5bcaceddf19b47	drop warn_onflags from ppgtt_bind_vma we will call ppgtt_bind_vma with flags __number__ so the warn_onflags is bogus kill it
5226cfc500022104d92813ee218608e80f56ead6	amd-xgbe fix sparse endian warnings change the types of the descriptor entries in the xgbe_ring_desc struct from u32 to __le32 to fix endian warnings issued by sparse
cb76e3560a271ce570dff60869ddba1a08486c92	remove useless drm_fb_get_bpp_depth call the function has no side effect and its returned values are ignored dont call it link
0d3e6fe7cb1b80719dbacfbfb0f668e2971e8a5f	media drxk improve a few debug messages
40437e703feef873441769e74910fd309c1fb404	media media platform exynos-gsc constify platform_device_id the platform_device_id is not modified by the driver and core uses it as const
9b6ca44823a1414a26054fd0b5cd94f31c105ac8	iwlwifi remove unused argument from rs_initialize_lq the function never uses its conf argument so remove it
c4839c87f508bdb2e5d735a064124dd6289a2853	asoc max98095 add an explicit of_match_table create an explicit of_match_table entry for max98095 codec also add a binding documentation for this compatible string
e4a8aad8e070e54e486666cc8bb97d69dc81adfb	mtd mtdswap use since macros mtdswap_ecnt_min and mtdswap_ecnt_max have been defined in use them instead of open-coding
6719429dd61cde1fe30d9644d0aa2369eefc9005	cfg80211 check vendor ie length to avoid overrun cfg80211_find_vendor_ie was checking only that the vendor ie would fit in the remaining ies buffer if a corrupt includes a vendor ie that is too small we could potentially overrun the ies buffer fix this by checking that the vendor ie fits in the reported ie length field and skip it otherwise change build_bug_on to __number__ from __number__
42877236160baaa785cfdcb281a653a012c82a2b	iio at91_adc cocci spatch noderef sizeof when applied to a pointer typed expression gives the size of the pointer found by coccinelle spatch
35260aa6f7fd5c404efb76ffa9b58a0b5d115dec	staging comedi adl_pci8164 store the pci_dev in the comedi_device use the hw_dev pointer in the comedi_device struct to hold the pci_dev instead of carrying it in the private data
d8eb741eb374804e864751c7f3919ae50321d831	mac80211 ibss do not scan if not needed when creating an ibss in some cases mac80211 will scan before creating an ibss even if bssid and frequency have been forced by the user this is not needed and leads only to a delay in the ibss establishment phase immediately create the cell if both bssid and frequency and fixed_freq is set have been specified
0b4bc768dc289731983ba5223555ffabe08eefdd	media v4l add v4l2_sel_tgt_native_size selection target the v4l2_sel_tgt_native_size target is used to denote the size of a sensors pixel array
1e30296a603812fc3592b2a25e0daf3b416d42ce	gma500 oaktrail_hdmi_i2c_access drop unused variable
019dc9ea8d528eb3640bbba604e1e5a2f6994b1f	support to handle break character the imx uart hardware controller can identify break character and the imx_set_termios can accept brkint set by users but current existing imx_rxint cant pass break character and tty_break to the tty layer as other serial drivers do here add code to handle break character and pass it to tty layer to detect error occurrence i use urxd_err to replace urxd_ovrrun urxd_frmerr because any kind of error occurs urxd_err will always be set to __number__ i put the urxd_brk to the first place to check since when break error occurs not only urxd_brk is set to __number__ but also urxd_prerr and urxd_frmerr are all set to __number__ this arrangement can filter out fake parity and frame errors when break error occurs
96183182ad05d1ce31b9048921c12bf4ad621eaf	ibmvnic fix to use list_for_each_safe when delete items since we will remove items off the list using list_del we need to use a safe version of the list_for_each macro aptly named list_for_each_safe
07bf2e11ad0586855f8be5e5775a4f314ce057fe	use of_property_read_bool use of_property_read_bool to check for the existence of a property the semantic patch that makes this change is as follows expression if x true else x false x
805184c451cdb225ffbdf83ba010160d74b3a471	staging media lirc remove pointer to pointer cast on function arguments removes pointer to pointer cast on function arguments issue detected and resolved using the following coccinelle script expression e type t identifier f e
825d105910d549e69748b19f83031b231152ac9d	regulator mc13892 make mc13892_powermisc_rmw lock protected then we can remove around the caller
6fd492fd746d9858a41dc85eef44bd627b809109	iommu fix trace_unmap to report original iova iommu_unmap calls trace_unmap with changed iova and original size trace_unmap should report original iova instead change iommu_unmap to call trace_unmap with original iova
d3d8425a21ed1b14bc896f827ee495e06bff2504	usb chipidea imx avoid eprobe_defer printed as error avoid printing an error if adding the device failes with return value eprobe_deffer this may happen due to missing gpio for the vbus-supply regulator
5dc6422564b3f6ab8f87611ca1ade3adb369770b	usb dwc2 remove debug prints in remove debugging prints to show params
d359992070901bcd774615910d36cec67dbdb1a7	cpufreq opp fix the order of arguments for kcalloc these changes fix the argument to the kcalloc number of elements element size the type of memory to allocate see kmalloc void n size_t size gfp_t flags
50886656a8613d4c56daf438f6a7612d6cd6c321	staging sm7xxfb fix line over __number__ characters in fix issues with line over __number__ characters in
153dccd467b818b1dd3a6801b14e94a7a48ef859	ath9k_hw fix power state for mci program mci related power registers only if mci interrupts are enabled this could help to reduce power consumptions when wlan alone is enabled in bt coex chips
9854a6f929956c9099dcc837157fd344f6f1c227	hid hid-holtekff dont push static constants on stack for there is no need to pass constants via stack the width may be explicitly specified in the format
5c111913347e60c364776824e1ed766dd8958ffa	media media mx1_camera use the default implementation implementation in mx1_camera is identical with the default remove the copy to switch to using the default stab
3c14f8b44fafaa60519440bea1591e495b928327	cgroup move subsys file removal to kill_css with the planned unified hierarchy individual csss will be created and destroyed dynamically across the lifetime of a cgroup to enable such usages css destruction is being decoupled from cgroup destruction this patch moves subsys file removal from cgroup_destroy_locked to kill_css while this changes the order of destruction operations the changes shouldnt be noticeable to cgroup subsystems or userland
86fbca4923f956dae31247e68dc73ffdfd6e5cb0	gfs2 indent with tabs not spaces follow the same style used for the other functions in the same file
a515de660747eb01f3ef80e75bfc51ac63cfc546	cfg80211 reg fix reg_ignore_cell_hint return type the return type should be enum reg_request_treatment for both branches of the
01871e59af5cc1cbf290ad6b4b95cd2f0cec9e8c	mm dax fix livelock allow dax pmd mappings to become writeable prior to this change dax pmd mappings that were made read-only were never able to be made writable again this is because the code in insert_pfn_pmd that calls pmd_mkdirty and pmd_mkwrite would skip these calls if the pmd already existed in the page table instead if we are doing a write always mark the pmd entry as dirty and writeable without this code we can get into a condition where we mark the pmd as read-only and then on a subsequent write fault we get into an infinite loop of pmd faults where we try unsuccessfully to make the pmd writeable
f4d03bd143c628b00f66cc2ec2c013767bdd1518	smp dont use words for atomic accesses yes it should work but its a bad idea not only did arm64 not have the access code theres a separate patch to add it its just not a good atomic type some architectures fundamentally dont do atomic accesses in them alpha and its not like it saves any space here anyway because of structure packing issues we normally should aim for flags to be unsigned int or unsigned long and if space is at a premium use a single byte although that causes problems on alpha again there might be very special cases where a entity is really wanted but this is not one of them
442f4948e5b0b2bc6e77811a5e46fcd13f0870a6	clk exynos4 remove remnants of non-dt support this patch simplifies a bit clock initialization code by removing remnants of non-dt clock initialization such as reg_base and xom values passed in function parameters
c5de7c6f3b3185ebbb9cf81abb94580c7f2ebd5f	fix hdmi transconf bpc value ibx bspec says we must specify in transconf for both and hdmi output do so v2 pass intel_crtc to intel_pipe_has_type
163891d7d42935e7499daa0646a8eb3c44504300	netvsc handle offline mtu and channel change if device is not up then changing mtu or number of channels should not re-enable the device
07b240411f1e7528ed36e09979f40ccf4b844c8c	mmc dw_mmc exynos remove code for wp-gpios the exynos code claimed the write protect with devm_gpio_request but never did anything with it that meant that anyone using a write protect gpio would effectively be write protected all the time the handling for wp-gpios belongs in the main dw_mmc driver and has been moved there
a6609267107ecc5598b79aa353036c1f57e7257e	mmc sh_mmcif re-read the clock frequency every time it is turned on with aggressive clock gating the clock can be disabled during interface inactivity during this time its frequency can be changed by another its user therefore when the interface is activated again and the clock is re-enabled its frequency has to be re-read
1440061be128180a3846480d8b8bd24233edcd2f	ubi block continue creating ubiblocks after an initialization error if one ubi volume is corrupted but another is not it should be possible to initialize that ubiblock from a kernel commandline which includes both of them this patch changes the error handling behavior in initializing ubiblock to ensure that all parameters are attempted even if one fails if there is a failure it is logged on dmesg it also makes error messages more descriptive by including the name of the ubi volume that failed tested formatted ubi volume in a corrupt way and properly and included on the kernel command line at boot i see the following in the console __float__ ubi error ubiblock_create_from_param block cant open volume on ubi5_0 __float__ ubi ubiblock3_0 created from
d8991f51e55fd3c5b8ad055653a5998e53d4ec91	pstore warn on pstore_type_pmsg using deprecated function pmsg now uses ramoops_pstore_write_buf_user instead of print a ratelimited warning if gets accidentally called kees adjusted commit log and added return
f84a97d4804a09240372dc7b195f9d6162152228	tda998x report whether we actually handled the irq rather than always reporting that the interrupt was handled we should report whether we did handle the interrupt arrange to report irq_none for cases where we found nothing to do this allows us to eventually recover from stuck-irq problems rather than causing the kernel to solidly lock up
2471ec5895b2e3eeb55f4386a793123c8a5bf88a	staging rts5139 a couple off by one fixes inside the array we check ms_start_idxseg_no __number__ so on the last round through we end up going past the end of the array also if we dont break out of the loop early then we are beyond the end of the array there as well with this change if we dont find what we are looking for we end on the last element of the array
9a6aa279d3d17af73a029fa40654e92f4e75e8bb	vfio fix crash on rmmod devtmpfs_delete_node calls devnode callback with but vfio still tries to write there the patch fixes this
e61bf1e43b6f8e687ce93e5d0ce85bca7e481600	kill preempt_active its unused kill the definition
5476b2b77dae50c88aa6a85f21abeac38dde590f	watchdog s3c2410_wdt fix the mask bit offset for exynos7 the watchdog mask bit offset listed for exynos7 is incorrect fix this acked-by naveen krishna chatradhi
2535cc7ae02bc1e4dc6b6d3771ba8d18cd824e10	iio chemical vz89x fix warnings warning return of in function vz89x_measurement_is_valid with return type bool return statements in functions returning bool should use instead of generated by
d7b8f890b63f386ca28c820b8ddb7ff1f63cbe3c	mips kvm add dumping of generated entry code dump the generated entry code with pr_debug similar to how it is done in so it can be more easily debugged
0e840ed59ba79670b66bba8c1d50b6f67e72d3fb	nfc trf7970a only fill fifo if there is space handle the case where trf7970a_fill_fifo is called but there is no room in the fifo for more tx data when this happens wait for another interrupt indicating that there is now space and set a timer in case that interrupt never occurs
2fc62e2ac350b8f574e0a09170b350a8f2fa4a02	scsi libsas disable scanning lun __number__ on ata devices currently mvsas and pm8001 have custom implementations to achieve this uplevel it for all libsas drivers as isci encounters problems with atapi devices when scanning past lun0 just do what darrick suggested __number__ and limit the scan for ata devices __number__
37dea8c52cacb4439eb183ad736747bb678d2a5d	fix cache_get_priv_group for intel processors the private pointer provided by the cacheinfo code is used to implement the amd l3 cache-specific attributes using a pointer to the northbridge descriptor it is needed for performing l3-specific operations and for that we need a couple of pci devices and other service information all contained in the northbridge descriptor this results in failure of cacheinfo setup as shown below as cache_get_priv_group returns the uninitialised private attributes which are not valid for intel processors cut here warning cpu __number__ pid __number__ at sysfs bin_attrs not set by subsystem for group modules linked in cpu __number__ pid __number__ comm not tainted hardware name dell inc precision bios a13 call trace dump_stack warn_slowpath_common warn_slowpath_fmt internal_create_group sysfs_create_groups device_add cpu_device_create __kmalloc cache_add_dev cacheinfo_sysfs_init container_dev_init do_one_initcall kernel_init_freeable rest_init kernel_init ret_from_fork rest_init this patch fixes the issue by checking if the l3 cache indices are populated correctly amd-specific before initializing the private attributes
f462376e1a171f285b7bef3afa0d5a3123766128	usb serial remove debug module parameter now that all usb-serial modules are only using dev_dbg the debug module parameter does not do anything at all so remove it to reduce any confusion if someone were to try to use it
e13e895f8430d8c8b7a51478a4abd481bf9b64fb	fix for pmcs not making progress on power7 when we have really small counts left before overflow we can take a pmu irq but the pmc gets wound back to just before the overflow if the kernel is setting the pmc to a value just before the overflow we can get interrupted again without the pmc making any progress ie another buggy overflow in this case we can end up making no forward progress with the pmc interrupt returning us to the same count over and over the below detects when we are making no forward progress ie delta __number__ and then increases the amount left before the overflow this stops us from locking up
e82564475eab196b2e8a11572fff8e268329530e	media s5p-mfc use warn_oncondition directly use warn_oncondition directly instead of wrapping around an if condition
35fb9afbdeef9d5859d9a878d0372907baf119e1	mlx4 vf is not allowed to perform dump stats in multifunction mode dump_stats command is not executed for vfs
13c76aba7846647f86d479293ae0a0adc1ca840a	drbd close race between drbd_set_role and drbd_connect drbd_set_role r_primary does the state change to primary some more housekeeping and possibly generates a new uuid set all of this holding the state_mutex the connection handshake involves sending of various state information including the current data generation uuid set and two connection state changes from c_wf_connection to c_wf_report_params further to a number of different outcomes resync being one of them if the connection handshake happens between the state change to primary and the generation of the new uuids the resync decision based on the old uuid set may be confused depending on circumstances make sure that before we do the handshake any promotion to primary role will either be complete including the housekeeping stuff or can see and serialize with the ongoing handshake based on the state_sent bit which is set when we start the handshake and cleared only when we leave c_wf_report_params again
3e1199dcad004a40b55297a4736ccd1b9b81a952	fs-cache refcount becomes corrupt under vma pressure in rare cases under heavy vma pressure the ref count for a fscache cookie becomes corrupt in this case we decrement ref count even if we fail before incrementing the refcount fs-cache assertion failed __number__ __number__ is false cut here kernel bug at invalid opcode __number__ smp call trace __address__ fscache __address__ ceph __address__ ceph __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ rip __address__ fscache rsp __address__ end trace
f915084edc5aad351d6a4675b0bcdded9a00090d	changes related to the sequence port no for from now on for both dsi ports a c the seq_port value has been set to __number__ seq_port value is parsed from sequence of vbt so for packets that needs to be for dsi single link on port a and port c will now be based on the dvo port from vbt block __number__ instead of seq_port
263e1f9fbb999fb78df5bfed87ddbba1c12ee0f1	usb io_ti query hardware-buffer status in chars_in_buffer query hardware-buffer status in chars_in_buffer should the write fifo be empty this is needed to make the tty layer wait for hardware buffers to drain on close
f646628b9f40cbd1c13a0eb190901c6a78395be6	use vlv_clock in vlv_crtc_clock_get avoid some code duplication
b3695540ba5d8cf032f30533d53786b31af271f5	cxgb4 for t4 dont read the firmware mailbox control register t4 doesnt have the shadow copy of the register which we can read without side effect so dont read mbox control register for t4 adapter
4504badea3a3edd0d114b51a866cd98b4ff626b0	asoc wm8400 remove the set_cache_io entirely from asoc probe as we can set the codec while snd_soc_register_codec so the calling of set_cache_io from codec asoc probe could be removed entirely and then we can set the codec in the device probe instead of codec asoc probe as earily as possible
2aa8eab029b319b2b458b3ba393bbba31961ea96	perf kvm only process events for vcpus of interest minimizing processing overhead for each sample which becomes important for the upcoming live mode when it has to deal with events per second link
a5c277ec5a331171c6508924ce7767e363bf3a05	qla4xxx check the return value of dma_alloc_coherent the qla4xxx_alloc_fw_dump calls dma_alloc_coherent but does not check its return value
bb58da08f01ee12561867fcd4385b82679ae7f6c	reset registers if invalid values are detected hwclock refuses to set if rtc registers contain invalid values check the register values at probe time and initialize them to make hwclock happy
a7a3b8c86f9fb8e8d13fb51a4a8b68166893b9b5	fix a build error
4acaf048b1d27cb6e1b214d370ed993bb2aac664	mwifiex recover from skb allocation failures during rx this patch adds recovery mechanism for sdio rx during skb allocation failures for allocation failures during multiport aggregation we skip and drop rx packets for single port read case we will use preallocated to complete cmd53 read now we terminate sdio operations only upon cmd53 failures
12ecf4b979ec79b72e7aff35b172cada85e128a5	dont set an illegal fence if unfenced if the frontbuffer doesnt have an associated fence it will have a fence reg of if we attempt to or in this register into the fbc control register we end up setting all control bits oops
2cd148f1599a425f0f3ac6753da96a1a1aa3ce76	regmap fix lock used for regcache_cache_only
22d8aa93d7ea169a349fb2f9dee5babc68f6a683	improve hncdsc aen handler this improves aen handler for host network controller driver status change hncdsc the channels lock should be hold when accessing its state do failover when host driver isnt ready configure channel when host driver becomes ready
bbc5367f50d930bbe6ad4750d3250614c7babcc0	mips bcm63xx delete double assignment delete successive assignments to the same location in each case the duplicated assignment is modified to be in line with other nearby code a simplified version of the semantic match that finds this problem is as follows expression i i patchwork
708f04d2abf4e90abee61d9ffb1f165038017ecf	block free in blk_init_allocated_queue error paths commit block fix null pointer crash on dm-mpath flush moved an allocation to blk_init_allocated_queue but neglected to free that allocation on the error paths that follow
ee8f81b0961fa240ddf4d7740ac501606e4ed230	greybus operation use dev_err in gb_operation_sync use the more informative dev_err in gb_operation_sync which includes the connection device name in the error message which in turn encodes the module interface bundle and cport ids add missing braces to conditional-construct branches while at it
b8fa70b51aa76737bdb6b493901ef7376977489c	xen pvticketlocks add xen_nopvspin parameter to disable xen pv ticketlocks link
114a6f8b52163c0232fbcd7f3808ff04dc61a9b5	isdn hisax add missing usb_free_urb add missing usb_free_urb on failure path in st5481_setup_usb found by linux driver verification project
b22b4037a013e9ce77cec79d95fdcdc9bece0955	cxlflash fix to double the delay each time the operator used to double the master context response delay is incorrect and does not result in delay doubling to fix use a left shift instead of the xor operator
adc64ecf8dd941e24456de9b4a02a4152ff7df15	ata sata_dwc_460ex add __iomem to register base pointer the pointer to the mmio register base is missing the __iomem annotation fix this
a2f01a899347fd97cb18094e5a55640cab552818	apple-gmux fix up the patch i incorporated the wrong version of the patch for gmux and so lost david woodhouses fix to leave the backlight level unchanged over this fixes it up to v2
281cbb007612814183d79b1f72d0395303fcfb6f	clk gpio-gate stay silent on eprobe_defer do not output an error message if requesting gpio failes with eprobe_defer
a98e1788b005fbbf3f74f6f2325c743872dc583f	net sb1250-mac add missing module_license as per comment the code has always been gplv2 licensed this fixes the follwoing modpost warning warning modpost missing module_license in
3118dac501bc0317de099db81618d589503351e1	export irq_set_parent the tps65217 driver grew interrupt support which uses irq_set_parent while its not yet clear why this is used in the first place building the driver as a module fails with error undefined the correctness of the driver change is still investigated but for now its less trouble to export irq_set_parent than dealing with the build wreckage tglx rewrote changelog and made the export gpl link
2f83ace37181e445cab83d1d2a3a1dc88a36a814	orangefs put register_chrdev immediately before register_filesystem
8bcf4525c5d43306c5fd07e132bc8650e3491aec	pci mark intel i40e nic intx masking as broken all of the i40e nics lack support for indicating intx is asserted via the interrupt bit in the pci status register the disintx bit in the command register is functional causing these devices to be incorrectly detected as supporting intx masking quirk them to properly indicate no intx masking support device ids copied from
fe9f68449a507e03d41bee4500456bbfa22095d3	eliminate duplication of of_get_named_gpio_flags of_reset_gpio_handle is largely a cut-and-paste copy of of_get_named_gpio_flags there really isnt any reason for the split so this patch deletes the duplicate function
b43baf694fde30dc2db2386c347324d1a013f3d1	mei free me client references on host init fx fixes leak introduced by commit b7d885145538 mei revamp me clients list handling
517f188c6be5bcc71f92c049d91a26539482a6f8	noop forcewake when vgpu activated for a virtualized gpu the host maintains the forcewake state on the real device as we dont control forcewake ourselves we can simply set force_wake_get and force_wake_put to be no-ops by setting the vfuncs we adjust both the manual control of forcewake and around the mmio accessors making our vgpu specific mmio routines redundant and to be removed in the next patch link
e297d7bbf6906389635a803b4887a735d0a117a9	input cap11xx remove wrong and unneeded cap11xx modalias this is a i2c driver so its wrong to use platform prefix for the modalias we have all needed i2c aliases coming form module_device_table so lets remove the wrong and unneeded cap11xx modalias
817a53d9866ab4118e2dd17a9ffe80700eac40ac	mac80211 refactor skb copy to failq in mesh_path_move_to_queue this seems a bit less
9317bb9696566e6759203ffcaa80481b725785b3	signal remove jffs2_garbage_collect_thread does allow_signalsigcont for no reason sigcont will wake a stopped task up even if it is ignored
0b89525dfcb8b90b5992d6de1433aa04b0a04b3a	trivial code style fix
17653a3e098dc20ae1db7459344a81c386625696	acpi pm use acpi_companion instead of acpi_handle the acpi_handle macro evaluates acpi_companion internally to return the handle of the devices acpi companion so it is much more straightforward and efficient to use acpi_companion directly to obtain the devices acpi companion object instead of using acpi_handle and acpi_bus_get_device on the returned handle for the same thing do that in three places in the acpi device pm code
99be230db9879088d291ab832641af539d94a5b4	iio adc max1363 export of device id table as module aliases the i2c core always reports a modalias of the form even if the device was registered via of this means that exporting the of device id table device aliases in the module is not needed but in order to change how the core reports modaliases to user-space its better to export it
3bf15f53c963a43c317e65e1709e9f020c04f024	use helper functions to access fields in struct msi_desc use helper functions to access fields in struct msi_desc so we could easily refine struct msi_desc later link
70855bb5c608e4ac9dde5b669c3cf56914b713a2	clk sunxi allow to specify the divider width from the dividers data the divider width used to be hardcoded some a31 dividers are no longer with the hardcoded width so we need to make it specific to each divider and set it in the dividers data
eba48cd0f05ff7a2f82291feae169c14b61b29af	pci add gpl license for module config pci_ioapic turned into a tristate in commit b95a7bd70046 but no module license is specified this adds the missing module license
eac456c82376f6592b2fb8dd6f76d230bf24476e	staging comedi usbduxsigma cleanup the functions the functions can only be called by the comedi core it the completed successfully that function sets the comedi_device private variable before initializing the callbacks so the sanity checks are unnecessary remove them also rename the this_usbduxsub local variable to devpriv as this is more common in comedi drivers remove the unnecessary comments
3d45c86f92be4cd22b4d2332a5cc280e20efedc6	mmc meson-gx minor improvements in meson_mmc_set_ios val isnt used in the switch clause and afterwards theres an identical statement so remove it in case of an unexpected bus width the error message indicates the intention to set the bus width to __number__ and to go on so remove the return statement this return statement also conflicts with setting to __number__ because nothing would be set actually before returning bus width are chosen as default as the vendor driver does it too
f0e68fc3caf677e834f7bd0f601800e686b56c98	thermal rcar fix missing unlock on error in rcar_thermal_update_temp add the missing unlock before return from function rcar_thermal_update_temp in the error handling case
6a3b15634279aa6740f9b829d25db32024b2ca7c	nfsd4 remove redundant callback probe both nfsd4_init_conn and alloc_init_session are probing the callback channel harmless but pointless also nfsd4_init_conn should probably be probing in the unknown case as well in fact i dont see any harm to just doing it unconditionally when we get a new backchannel connection
2eb1eb02dda368fb224bf5a379d2448c742b71db	pnp acpi use acpi_companion_set during initialization pnpacpi_add_device calls acpi_bind_one on an already registered device which is a mistake but it can initialize the acpi companion field of the struct device to be registered using acpi_companion_set instead so make it do that
0abb60c1c5c32be56e5a67fcc437fcd18e38c2b2	staging unisys visorchannel_write handle partial channel_header writes
2c422257550f123049552b39f7af6e3428a60f43	netfilter nfnl_cthelper fix runtime expectation policy updates we only allow runtime updates of expectation policies for timeout and maximum number of expectations otherwise reject the update
ce03e4137bb22fc560ad7a07cf4138ae2cd59f65	drop unlikely behind bug_on __number__ for cases the bug call is a no-op so we couldnt care less and the change is ok __number__ ppc and mips which have_arch_bug_on do not rely on branch predictions as it seems to be pointless __number__ and thus callers should not be trying to push an optimization in the first place __number__ for config_bug and cases bug_on contains an unlikely compiler flag already hence we can drop unlikely behind bug_on __number__ link
ec7c4d7d52c6465f2640240f30722c29b6c3a5af	staging octeon-usb delete space after cast delete space after cast
ba1eeaac99ce15063d8bc156e03f8b75aa471647	btrfs remove unused variable in __process_changed_new_xattr variable p is not used any more so remove it
6c6cb69b8e974049cca2cc4480052fb9e7df767b	kvm x86 cleanup of cleaning was cleaned in several functions syscall in the x86 emulator now that we clear it before the execution of an instruction in the emulator we can remove the specific cleanup of
d772983d2a392a139c544a97014ed95554b09ad1	staging ozwpan reset port configuration number make sure that we reset port configuration no when pd departs
6b5eab54691956b27669ce726cbd8ef2d8ec1e50	acpi ec fix null pointer dereference in acpi_ec_remove_query_handler use list_for_each_entry_safe for iterating because handler may be freed in the loop bug unable to handle kernel null pointer dereference at __number__ ip __address__ call trace sbshc sbshc
c46985e211fa6d6895104cc4858e85e53e8c7731	dm space map metadata limit errors in sm_metadata_new_block the unable to allocate new metadata block error can be a particularly verbose error if there is a systemic issue with the metadata device
a3c5d8fb7ffa8850f3d2fc01e1dde0709a3954f9	nfc st21nfca synchronize i2c tx and rx path stabilize communication by using a mutex this avoids running a write transaction during a read retry or a read transaction during a write retry
989ffc7bd6b0f5ea3423631981f87fde495a8acb	spi pic32-sqi silence array overflow warning we read one element beyond the end of the array when we access rdesci __number__ so it causes a static checker warning its harmless because we write over it again on the next line but lets just silence the warning
3885c26b773750bf2e7e071a5b0b72f079196d60	megaraid_sas sperc ocr changes this patch fixes online controller resets on sriov-enabled series of avago controllers __number__ remove late detection heartbeat __number__ change in the behavior if the fw found in state
17915d582f9fe74efbd1c755f3ea5a5c2d9b3156	intel_idle pr_debug information need separated when debug kernel the the below information is found intel_idle unaware of model mwait __number__ please contact device input0 no acpi support so this patch separates it
dc9ef58884eadd54c159213a8f3358ff39148a64	usb gadget mv_u3d mv_u3d_start_queue refactoring the patch improves readability of mv_u3d_start_queue by rearranging its code with two semantic modifications assignment zero to if usb_gadget_map_request fails propagation of error code from mv_u3d_req_to_trb instead of hardcoded
5e6e3d3814004a509c9023abfc86ddea6803f8e1	usb musb gadget remove unnecessary initializations udc-core now sets dma-related and parent fields for us we dont need to do it ourselves
6b539d274e49a7f4b53e0adc55d19041e3b7a863	fpga altera_freeze_bridge constify ops the ops are not changing make them const
87ed66c41441589b9718331410ceea7aeb8a740b	update headers add ctl flush bits some upcoming targets have more bits to set in ctl_flush registers example msm8x16 needs to set timing1 bit so that some of the intf1s interface registers get flushed
d8dc10bf6888b586e284bca3e9f1a9da40590874	staging comedi adq12b tidy up adq12b_ai_rinsn for aesthetics rename this function clean up the local variables by reusing val instead of using separate variables for the status use once to trigger the first conversion hi and lo used to read the conversion result for aesthetics change the final return to and remove the comment
42ea78126c3f6c7a51fdf2c970e1d67f0a5faa19	staging comedi gsc_hpdi remove disable_plx_interrupts this helper function is just a simple writel remove it
edcaa49a2a8a6854c54a5f400b803c63e68a459c	media coda no need to check the return value of platform_get_resource when using devm_ioremap_resource we do not need to check the return value of platform_get_resource so just remove it
97d24634daff8b83dae21cfde68553ff4997e558	serial use div_round_closest instead of open coding it
4113014f2d7bef992ed373c30b6b4ba4be6969ea	fix thinko in vblank regression
d9d3e025c0f68a1ec99ee13209d31d2a766ac56f	fix xmit wait calculation total xmit wait needs to sum the xmit wait values of all the vls not just those requested in the query also make the algorithm used for both portstatus and portdatacounters the same
88c54a68584c93ddc5fbb70ffe60b195097b6eb9	tty serial bfin_sport drop before calling tty_flip_buffer_push the current driver triggers a lockdep warning for if tty_flip_buffer_push is called with locked this never shows up on up kernels and comes up only on smp kernels crash looks like this produced with driver from from from from from from from from from from from from from exception stack0xc04cdf70 to __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __address__ from from from bug spinlock lockup suspected on lock cpu __number__ pid __number__ comm not tainted __number__ workqueue events flush_to_ldisc from from from from from from from from from from from from release the port lock before calling tty_flip_buffer_push and reacquire it after the call similar stuff was already done for few other drivers in the past like commit author thomas gleixner linutronix.de date tue may __number__ __number__ arm serial fix amba drivers locking
8b42a746e8703c271df3e7f1f5bf5f8f59773d23	usb phy isp1301-omap fix smatch warnings phy-isp1301-omap produces the following smatch warnings isp1301_set_host warn variable dereferenced before check otg see line __number__ isp1301_set_peripheral warn variable dereferenced before check otg see line __number__ isp1301_start_srp warn variable dereferenced before check otg see line __number__ isp1301_start_hnp warn variable dereferenced before check otg see line __number__ fix by deleting bogus null pointer checks the usb framework will always call us with a valid otg pointer
0c942b007b52cdcde285fa1122688f186bf99464	nfc st21nfca free buffer when a bad frame is detected when a bad frame is detected for a bad crc we were reallocating and loosing the previous frame pointer
09ad44efe722161bbc26317b6c2a43dfd86f023b	cw1200 remove some dead code if the mode is nl80211_iftype_unspecified then we return success at the start of the function so this condition is never true
c1989bec03f7a6b41377efca88aa44b966c318f4	staging omap-thermal update feature bitfield for omap54xx this patch removes from omap54xx the features clk_ctrl counter mode_config because these features are not present in omap54xx
6440752c872e418452a2cbbf5e73d546affe2b28	ixgbe update atr to use recorded tx queues instead of cpu for routing this change is meant to update atr so that it will use the recorded rx queue instead of the cpu in the case of routing this change is meant to help ixgbe default behavior to more closely match that of the kernel
56214749e0b46eeac6795551f187c0f9443918f2	iwlwifi mvm fix reserved txq freeing if a txqs marking as a reserved queue is removed when removing the sta the driver might try to access out of bounds memory make sure the reserved queue is freed only if it is still reserved
3de55ec74aa803d7aa1e581700086d755c2599d2	target fix target_submit_tmr lun lookup failures this patch changes target_submit_tmr lun lookup failures to set response status tmr_lun_does_not_exist and invoke instead of sending check_condition status that can cause problems with linux fcoe clients tested with tcm_fc ports and explict lun_reset lookup failures
4d211093e838ddd049b5cf4f0773aa5ac67f9976	um fix gcov build breakage a exports in duplicate ones b excluding in vdso compile is not enough and also needs to be excluded
0bf0230ea11a48ba004f3f504fc813e264233679	initialize num_scalers for skl and glk too after commit move number of scalers initialization to runtime init scalers are not initialized properly for skl and glk since num_scalers is left as __number__ for those platforms
bed831f9a251968272dae10a83b512c7db256ef0	module jump_label fix module locking as per the module core lockdep annotations in the coming patch __float__ end trace __float__ hardware name intel corporation bios __float__ __address__ __address__ __address__ __number__ __float__ __number__ __address__ __address__ __address__ __float__ __address__ __number__ __address__ __address__ __float__ call trace __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ end trace jump labels is not doing it right fix this
41d98b5da92f8b7bd11885e7c4797197b5f3e2c3	serial imx-serial update rx error counters when dma is used update error counters when dma is used for receiving data do this by using dma transaction error event instead error interrupts to reduce interrupt load
93e29c8530881766837e62088d54ffb733f8bc2a	greybus interface add power_state attribute user space needs the capability of powering on or off an interface for multiple use cases for example userspace may want an interface currently in its s3 boot stage to boot into its s2 loader stage to update the bridge spi flash or the interface is running its s2 loader stage and updated the spi flash with the new s2 loader firmware and wants to boot into the new s2 loader firmware another use case can be android wants to disable not eject a misbehaving module add a power_state sysfs file within the interface directory it can be read to know the current power state of the interface and can be written to power on or power off an interface possible values that can be written or read from it are on and off testing done tested by camera module on evt __float__ johan drop es3-quirk duplication add to power attribute group fix return value drop tags
c94bc815f3c757df402d6f6a3e8d855b9168e6af	arm shmobile rcar-gen2 use icram1 for jump stub on all socs currently the different socs in the r-car gen2 family use different types of on-chip ram for the jump stub r-car h2 uses media ram r-car m2-w uses another type of optional on-chip ram as it doesnt have media ram r-car m2-n uses inter connect ram in magnus damms arm shmobile r8a7793 boot address update as all r-car gen2 socs have __number__ kib of inter connect ram consolidate the code by always using that
fde57764ef8751b9aca11b6f6221ac5555bda699	ath6kl enable usb support now two modules are built and but the usb module isnt fully functional yet as htc layer is missing support and thats why its marked as experimental for now
3b59c344ab6e2d00b0f4ad946024572618c87502	fix bugs of checking if dpm is running on tonga fixes od failures on tonga
5d83790be7c88a5ea99ab32ca196d99cf4d177a4	media exynos-gsc send valid m2m ctx to gsc_m2m_job_finish gsc_m2m_job_finish has to be called with the m2m context for the necessary cleanup while resume but currently gsc_m2m_job_finish always passes m2m context as null this patch preserves the context before making it null for necessary cleanup use gsc_m2m_opened instead gsc_m2m_active in gsc_resume
d7ffef289dd7332a7153e4957db78622b34d2680	convert printk to pr_foo convert all printk to pr_foo except kern_debug see chapter __number__
d2b996ac698aebb28557355857927b8b934bb4f9	revert and fix remove dpms mode tracking from dp this reverts commit we actually need to track dpms state so that on hotplug we dont retrain the link until dpms is disabled however that code had avery small bug it wouldnt set the dpms_mode at mode set time and so link retraining would not actually occur on monitor hotplug until the monitor had gone through a dpms on cycle
7eb4f4553ceaa6c64da83c8a71d5a991c0188655	rcu make rcu_implicit_dynticks_qs locals be correct size when the field in the rcu_dynticks structure changed to an atomic_t its size on systems changed from __number__ bits to __number__ bits the local variables in rcu_implicit_dynticks_qs need to change as well hence this commit
51a3ac5f4dc45120c78fad51096d989914801457	media c8sectpfe fix return of garbage the variable err was never initialized that means we had been checking a garbage value in the for loop moreover if the segment is not outside the firmware file then also we have been returning the garbage initialize it to __number__ so that on success we return the value and no need to check in the for loop also as it is initially __number__ and whenever that value changes we have done a break from the loop
9cd81ce3c2f01fc599b9156b94b868b4f578698c	f2fs disallow switch extent_cache option dynamically swith extent_cache option dynamically when remount may casue consistency issue between extent cache and dnode page fix in this patch to avoid that condition
deb4928ea39c5eeef1c9f4562b5cee71f06a31ad	arm shmobile let r8a7779 rely on scu cpu notifier now when cpu notifiers are used for scu boot vector setup shmobile_smp_scu_boot_secondary is no longer needed
469554a148e86aa761fbbfcbca496be64f38568a	staging speakup align parenthesis make suggested checkpatch modification for check alignment should match open parenthesis
6d51477470728074cea396a0127d73c5590dd441	media em28xx fix ir unregister logic the input stop callback already calls the em28xx_ir_stop method calling it again causes an oops
795f1426b484ddfc136e723a26bfd6a46c8ab085	use drm_modeset_lock_all just a call to drm_helper_resume_force_mode obviously wants full locking for that
a00e8224c19fa5ba3007da00d850865cbefcaabd	staging hv storvsc fix error handling storvsc_host_reset fix error handling storvsc_host_reset i would like to thank long li for reporting this
81e3863636b2f963d32245ce6b23b37404d0cd39	staging rtl8192e remove extraneous log message the driver logs all dhcp transactions and thus spams the logs
a00e3ab64be2e482bd25fe30bdc9bfa6e2b0cf1c	stmmac fix tx normal desc this patch fixs a regression raised when test on chips that use the normal descriptor layout in fact no len bits were set for the tdes1 and no own bit inside the tdes0
eea16da82cccd974b1105001fb247f652b74759c	net usb ax88172x utilize phy_ethtool_nway_reset
6e5fdba9c9d4e2fdb19bf19633cb7b9bb72dccb1	asoc machine set the new fully_routed flag set to request the asoc core calculated unused codec pins and call snd_soc_dapm_nc_pin for them remove the open-coded calls
00da8eddf9eb8d432533c3a83da3a6470a45dfc4	staging bcm move directives for the preprocessor statement to enum value in driver_halt is a driver state that was originally defined as a statement this patch moves it to the ledevents type as an enumerated value for the purpose of removing a compile time warning in function warning case value not in enumerated type
c152833949a07f3cde8fa1e34dec80614085a159	fix misleading error output in machine_check_e500 exception handler is a wrong indication in case of mcsr_bus_wberr so print write instead of read
6d43131c158f42e2138d83495d19c70ed5cc0ffe	sfc fix ipid endianness in tsov2 the value we read from the header is in network byte order whereas takes values in host byte order which it then converts to little-endian as mcdi is little-endian
6aea60b825728fb59e6fa1424174b1e26cb3fc51	rt2x00 rt2x00mmio remove unused defines all users are converted to use the functions so remove the now unused defines the patch contain no functional changes
d26eef8b725da620980ee20f7812f4488a206483	thermal imx add clk for thermal sensors clk is from pll3_usb_otg per hardware design requirement need to make sure pll3_usb_otg is disabled before stop mode is entered otherwise all pfds under it may enter incorrect state this patch disables pll3_usb_otg before suspend and enables it after resume
cbb346f2fc61acf62f97e3dd4da230b12f1cafaf	iwlwifi mvm add missing break in debugfs when writing the disable_power_off value the lprx enable value also gets written unintentionally so fix that by adding the missing break statement
a726ecce75896b2045f1646a2d7e31a5562b25a0	userns convert the sysv filesystem to use where appropriate
c897ff68beec97768c31f9de97de93f77ff2d87e	cgroup dont use idr_remove_all idr_destroy can destroy idr by itself and idr_remove_all is being deprecated drop its usage
5fcbdf7cac23fd07f9de30eab760d3a5864f7330	mips netlogic xlp9xx pic of support support for adding legacy irq domain for xlp9xx the node id of the pic has to be calulated differently for xlp9xx patchwork
c2b703b807e3aba4d2b542c9096c790186a6e71f	fix too big allocation for attribute member current code allocates too much data for tty_groups member of uart_port struct so fix it
4e2bec0c327025671c1ec2101660e8fea29d9d89	clocksource cadence_ttc add support for mode new ttcs support mode older versions support only modes keep mode as default and optional
86a49e2dac3064557d45850a9c63f7cc1e6fe041	dm bufio use bug_on instead of conditional call to bug
4c43755506ececbe903585265aa8408e937620a1	hid multitouch fix touchpad buttons commit hid multitouch use the callback report breaks the buttons of touchpads following the hid multitouch specification the buttons were emmitted through hid-input but as now the events are generated only in hid-multitouch the buttons are not emmitted anymore the input_event call is far much simpler than the hid-input one as many of the different tests do not apply to multitouch touchpads
dc62b56a68d3d6dd1044e1f7d0c8310339cb5b5f	gpio acpi use version of apis the gpio operation region handler should be called where sleep is allowed so we should use the version of apis or we will get a warning message complaining invalid context if the gpio chip has the cansleep flag set
4cae4cd10d058eb4057e20cb72e82fe76ae739af	mac80211 minstrel make prob_ewma u16 instead of u32 saves about __float__ kib memory per station
21cdf8f43b85a9e6c9905dbeb401e4a4d1c8a6c3	staging comedi adv_pci1724 remove num_ao_channels define this define is now only used to set each of the subdevice n_chan for clarity remove the define and open code the values
77c77e3f074f576a39534bb9b10b6f1b4d91a8db	consolidate chained irq handler chained irq handlers usually set up handler data as well we now have a function to set both under replace the two calls with one search and conversion was done with coccinelle
25dfa02ce21981ef08d375be987862f96676d8ab	media rcar_vin copy flags from pdata the platform data is a single word so simply copy it into the devices private data structure than keeping a copy of the pointer this will make changing to device-tree binding easier as it is one allocation instead of two
cfafb62fb4d21648eb706f3028811b611c60d15e	prepare clk before calling enable replace with to avoid common clk framework warnings
081579840b4b2421e37bc67e3b089b7ca64ef040	net dcb add cee notify calls this adds code to trigger cee events when an app change or setall command is made from user space this simplifies user space code significantly by creating a single interface to listen on that works with both firmware and userland agents and if we end up with multiple agents this keeps every thing in sync userland agents firmware agents and kernel notifier consumers for an example agent that listens for these events see cgdcbxd is a daemon used to monitor dcb netlink events and manage the net_prio control group sub-system
cc6328dfe48fbc6ba67a4bb31473aeea429bee26	llc2 remove pointless indirection through llc_stat_state_trans_end
098353038bedf133860c5457488a895bd1de00c1	staging comedi das1800 update the module_description change the module_description to something more usefull than the generic comedi low-level driver
d397fd5886090f9462098432bd9523fd8f3df37b	staging comedi adl_pci9118 remove sanity checks in pci9118_calc_divisors the tim2 parameter to this function is actually the which was validated in the as err the sanity checks in this function are just repeating that validation the min_pacer sanity check is simply not needed remove these unnecessary checks
386b1f273850380a1887044673922843736c6d0a	nl80211 only allow wep keys during connect command this was already documented that way in but the parsing code still accepted other key types change it to really only accept wep keys as documented
8d0b3bf79bfa1dc7d3e2a9dc2b6f2ceea353687f	arm shmobile add r8a7790_register_pfc function break out the r8a7790 pfc platform device creation code to increase readability and follow same style as r8a7791
4d92325125e437e46d9198fe7dc0ebdc792ea5e0	regulator max77620 remove duplicate module alias the same alias is already in
bc61384dcdd82a6faabafecdcd80040625db5e40	rw_verify_area saner calling conventions lift length capping into the few callers that care about it most of them treat all non-negatives as success and ignore the capped value and with good reasons make rw_verify_area return __number__ on success
b833d0df943d70682e288c38c96b8e7bfff4023a	media lirc_imon do not leave imon_probe with mutex held commit af8a819a2513 media lirc_imon simplify error handling code lost so imon_probe exits with the mutex acquired the patch adds back found by linux driver verification project
757d7ace565c06e1302ba7c9244d839455e13881	media r820t avoid potential memcpy buffer overflow in shadow_store the memcpy in shadow_store could exceed buffer limits when r __number__
9487bd6b96a98ee07661a7b5e6f6afce67e2860b	rfkill factor assignments factor all assignments to into a single function rfkill_update_global_state
4b103883473964bbb7b0b6934999b283ee234a8a	pci dont attempt config access to disconnected devices if weve detected the pci device is disconnected there is no need to attempt to access its config space since we know the operation will fail make all the config reads and writes return error immediately when in such a state if a caller requests a config read to a disconnected device return a data value of all this is the same as what hardware is expected to return when accessing a removed device but software can do this faster without relying on hardware
028d455b12719a48b1c4b51ce07a074135726f8f	perf record fix fallback to cpu-clock on ppc perf-record on ppc is not falling back to cpu-clock perf record sleep __number__ error sys_perf_event_open syscall returned with __number__ no such device or address may provide additional information fatal no kernel support the problem is that until behavior changed with commit b0a873e perf on ppc returns enxio when hw_perf_event_init fails with this patch we get the expected behavior perf record sleep __number__ old kernel cannot exclude guest or host samples the cycles event is not supported trying to fall back to cpu-clock-ticks perf record woken up __number__ times to write data perf record captured and wrote __float__ mb samples link
2d7945100b1ade1de73ddc397c17d0c40b278fb4	arm sunxi add the allwinner a31 compatible to the machine definition the allwinner a31 is a quad-cortex-a7 based soc which shares a lot of ips with the previous socs from allwinner like the pio i2c uarts timers watchdog ips but also differs by dropping the wemac ethernet controller and most notably dropping the in-house irq controller in favor of a arm gic one
be2885a569f43fa6c44e2a5e1795583ae9941c27	arm u300 use module_spi_driver to register driver removing some boilerplate by using module_spi_driver instead of calling register and unregister in the otherwise empty functions
fd92f41dc2527722e5fd63f859ff811482f0ce1a	clk mmp make reset_control_ops const the mmp_clk_reset_ops structure is never modified make it const
fad9365bcc2a69ae16adc092e8ac192354980665	asoc omap-pcm free dma buffers in case of error
f93125ae17d1d259b5aba84016db260903822194	metag cachepart fix failure check style checking if unsigned variable thread_cache_size is less than zero source code is if thread_cache_size __number__ pr_emergcant read cache cache_type dcache icache but unsigned int thread_cache_size function get_thread_cache_size returns an error code as unsigned int change get_thread_cache_size to return signed int and its result is stored into signed int variable bugzilla
59ecb1283fde3da7b40803067ee9ef91cd8eadc2	iwlwifi mvm allow schedule scan while connected in the past when schedule scan was started while connected on one of interfaces fw crashes were observed in the newest fw this issue is solved so remove limitaion after examining corresponding tlv flag
3e6c3b0fd5d071ed17bf91586aae35a6cfb8cdb3	fix sge length for misaligned pio copy when trying to align the source pointer and theres a byte carry in an sge copy bytes are borrowed from the next quad-word x to complete the required quad-word copy then the sge length is reduced by the number of borrowed bytes after this if the remaining number of bytes from quad-word x extra bytes is greater than the new sge length the number of extra bytes needs to be updated to the new sge length otherwise when the sge length gets updated again after the extra bytes are read to create the new byte carry it goes negative which then becomes a very large number as the sge length is an unsigned integer this causes sge buffer to be over-read
3c13b680ce210313c6f7ad163435b62979958c09	drbd only wakeup if something changed in update_peer_seq this commit got it wrong drbd make the peer_seq updating code more obvious make it more clear that update_peer_seq is supposed to wake up the seq_wait queue whenever the sequence number changes we dont need to wake up everytime we receive a sequence number that is _different_ from our currently stored newest sequence number but only if we receive a sequence number _newer_ than what we already have when we actually change
c21bb9b1b7de87ee33c8ebf94a155be2aa551849	asoc tlv320aic26 remove noisy print
66714612783525bf3fd389f886822d89d1be2cbf	use apis functions are device managed and make cleanup code simpler
af8ee11209e749c75eabf32b2a4ca631f396acf8	asoc sgtl5000 fix driver probe after reset after a reboot command in linux or after pressing the systems reset button the sgtl5000 driver fails to probe sgtl5000 device with id register __address__ is not a sgtl5000 sgtl5000 asoc failed to probe codec imx-sgtl5000 asoc failed to instantiate card imx-sgtl5000 snd_soc_register_card failed sgtl5000 codec does not have a reset line nor a reset command in software so after a system reset the codec does not contain the default register values from sgtl5000_reg_defaults anymore as these are only valid after a power-on-reset cycle fix this issue by explicitly reading all the reset register values from sgtl5000_reg_defaults and writing them back into sgtl5000 to ensure a sane state
d3b70220292c40d3b499797fd2f33f608fc35edb	perf buildid-cache check relocation when checking for existing kcore perf buildid-cache does not make another copy of kcore if the buildid and modules match an existing copy that does not take into account the possibility that the kernel has been relocated extend the check to check if the reference relocation symbol matches too otherwise do make a copy link
3be7f32878e742cf3c17b435c90e198862457706	svcrdma fix nfs server crash triggered by nfs write now that the nfs server advertises a maximum payload size of for again it crashes in svc_process_common when nfs client sends a nfs write on an mount the server has set up a __number__ element array of struct page pointers in rq_pages for each incoming request the last element of the array is null when an incoming request has been completely received rdma_read_complete attempts to set the starting page of the incoming page vector and the page to use for the reply but the value of page_no has already accounted for thus rq_respages now points past the end of the incoming pages for nfs write operations smaller than the maximum this is harmless but when the nfs write operation is as large as the servers max payload size rq_respages now points at the last entry in rq_pages which is null buglink
3fd319b830247a3fe5f489e622ab404b618e0906	bluetooth refactor hci_cc_le_set_scan_enable this patch does a trivial refactoring in hci_cc_le_set_scan_enable since start and stop discovery command failures are now handled in mgmt layer the status check became empty so we can move it to outside the switch statement
bb1d2da7db7fcb25407618d9078091b575490d89	video riva remove incorrect checks xoffset and yoffset are unsigned and hence cannot be less than __number__
aee84a7e6ed515f0f217317ff261a15db4bff0bb	crypto rearrange handling for hw finished hashes rearrange the last request handling for hardware finished hashes by moving the generation of the fragment operation into this path this results in a simplified sequence to handle this case and allows us to move the software padded case further down into the function add comments describing these parts
48ab5a339de2b1cd006b7783d1555e4711bf77e5	staging most remove audio resolution format check this patch removes the audio format cross-check because the definitions are not compatible
1b4e027e1b1176b70a59665c0de58c04c7a4e210	brcmfmac change debug output for received event see header
8f43123d170ad9a6760e424af5bde7569fdd8c12	xtensa handle pgtable_page_ctor fail
daba96d6f38601552d08d52c15ef3c5660f1275f	mfd syscon fix warnings when printing resource_size_t gets rid of these warnings when compile module for __number__ bit targets cc in function syscon_probe warning format expects argument of type unsigned int but argument __number__ has type resource_size_t warning format expects argument of type unsigned int but argument __number__ has type resource_size_t
8f7f62705efbcffa933897af267210cc216c1302	mfd max14577 make of_device_id array const array of struct of_device_id should be const as expected by both of_match_table field and of_match_device call
e93b07244d6e1d6105df78b6117b00c940006b45	spi core fix spi_register_master error handling in the case spi_master_initialize_queue fails current code calls device_unregister before return error from spi_register_master however all the drivers call spi_master_put in the error path if spi_register_master fails thus we should call device_del rather than device_unregister before return error from spi_register_master this also makes all the spi_register_master error handling consistent because all other error paths of spi_register_master expect drivers to call spi_master_put if spi_register_master fails
c32e9c2f9f7efdac97fc06685ec07b9d07996917	arm clk remove clk_register_clkdev for unused clocks this patch removes clk_register_clkdev for the clocks that do not have any users for non-dt boards and drivers
7a9749be2f7e8791e845fcf59dbf90ee0612b1dc	staging unisys remove pointless init of rc in chipset_device_create the value of rc is set by calling a function so theres no need to initialize it to or anything at all
94c4fd641e1bc438092f0214bb5ec77ea73b13cf	wireless change cfg80211 regulatory domain info as debug messages cfg80211 module prints a lot of messages like below actually printing once is acceptable but sometimes it will print again and again it looks very annoying it is better to change these detail messages to debugging only cfg80211 world regulatory domain updated cfg80211 dfs master region unset cfg80211 start_freq end_freq bandwidth max_antenna_gain max_eirp dfs_cac_time cfg80211 __number__ khz __number__ khz __number__ khz __number__ mbm cfg80211 __number__ khz __number__ khz __number__ khz __number__ mbm cfg80211 __number__ khz __number__ khz __number__ khz __number__ mbm cfg80211 __number__ khz __number__ khz __number__ khz __number__ khz auto __number__ mbm cfg80211 __number__ khz __number__ khz __number__ khz __number__ khz auto __number__ mbm __number__ s cfg80211 __number__ khz __number__ khz __number__ khz __number__ mbm __number__ s cfg80211 __number__ khz __number__ khz __number__ khz __number__ mbm cfg80211 __number__ khz __number__ khz __number__ khz __number__ mbm the changes in this patch is to replace pr_info with pr_debug in function print_rd_rules and print_regdomain_info change some pr_err statements to at least keep the alpha2
b4e26d6c06eb70b0d3892bbd40ce43d4ea345c45	staging android ion fix warning found by fix warning warning braces are not necessary for single statement blocks
401606fd708885d28ce3c14a2a8fe612f8a6b50f	arm pm debug fix the use of api check the return code pointer value from debugfs_create_dir for error or null also added an additional check to prevent the creation of a suspend entry at the debugfs root in case a power domain directory cannot be created
4ffc6356ec690f77f65b7b78e0047a3fe8316371	kvm ppc booke add check_requests helper function we need a central place to check for pending requests in add one that only does the timer check we already do in a different place later this central function can be extended by more checks
919fcd518d438f8ba7518143d76dc834d9d4405c	convert wait_fori915_readreg to intel_wait_for_register by using the out-of-line intel_wait_for_register not only do we can efficiency from using the hybrid wait_for contained within but we avoid code bloat from the numerous inlined loops in total all patches text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__
3edbbb9ec5621478dc3c3b1c66ecb7d177b35c20	alsa hda rename capture sources of cx20549 to match common conventions this includes renaming line in to line also in the mixer settings
534ada5ede3c9236f0bf3c5d77e0d060e66caa4f	create soc devices for more nodes create devices for mbx sram pci and gpio-leds nodes and also move nfc compatible to of_bus_id list for automatic nfc device creation
a35919e174350d3e236ea5f179177396e87b6894	use when netdev is not yet registered to avoid messages like macb unnamed net_device uninitialized cadence caps __number__ macb unnamed net_device uninitialized invalid hw address using random lets use macros
0d454e4a443178863f858cdafac870ceb1989407	udf deletion of unnecessary checks before the function call iput the iput function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
0a44493fb18738c398bd1d53810a592bcd7e114c	staging comedi jr3_pci rename struct transform_t rename this private struct so it has namespace associated with the driver
b492d50bf597b87ab7ea1e738ec837f74b11594e	apparmor fix the audit type table the audit type table is missing a comma so that killed comes out as killedauto
9d03aee125d73908ddbe9c1b96338c9b69e1abc0	crypto echainiv fix iv size in context size calculation this patch fixes a bug in the context size calculation where we were still referring to the old cra_aead
be3a07f71ca3ae300d652a653279321e85b9f3d0	extcon staticise extcon_class its not referenced outside the core file
ed64b3cc11502f50e1401f12e33d021592800bca	e1000 fix skb truesize underestimation e1000 allocates a full page per skb fragment we must account page_size increments on not the actual frag length
7e39b817ee64a8b67282c76f52aaabddc8a5cd26	usb dwc3 correct dwc3_dctl_hird_thres definition the definition of dwc3_dctl_hird_thres macro is completely wrong it will only work for when we want to read the registers contents for that bitfield change the macro so that it can be used to writing to the register and when we need to read we can add extra right shift of __number__ bits
f1e8077f490cff4253b197154bf2affaa0ca08e3	netfilter ipt_clusterip make clusterip_lock per net namespace this lock is used for protecting clusterip_configs of per net namespace it should be per net namespace too
b2b7b56f713ab833413548b119c53bbe2a9a9f8f	asoc sunxi i2s implement set_sysclk in our i2s driver we were previously trying to guess which oversample the user wanted to use by looking at the rate and trying to max it however the cards and especially simple-card with its mclk-fs property will already provide the expected oversample ratio by using the set_sysclk callback we can thus implement it and remove the logic to deal with the runtime guess
edd993fd17281093eba7a1b140d087af1f86db78	remove ddi power domain exclusion skl_display_always_on_power_domains all the ddi power domains are already excluded from skl_display_always_on_power_domains on account of excluding skl_display_powerwell_1_power_domains and skl_display_powerwell_2_power_domains no need to spell them out again link
e9b376671910d105c5e61103111b96209c729529	jfs several bugs in jfs_freeze and jfs_unfreeze the mentioned functions do not pay attention to the error codes returned by the functions updatesuper lmloginit and lmlogshutdown it brings to system crash later when writing to log the patch adds corresponding code to check and return the error codes and to print correct error messages in case of errors found by linux file system verification project
aaae506d545bb9d06f4d8362f670f406f12e4b58	drbd fixed a race condition between detach and start of resync drbd_state_lock is only there to serialize cluster wide state changes testing the local disk state needs to happen while holding the global_state_lock otherwise you might see something like this oct __number__ on kugel drbd0 conn wfsyncuuid connected disk inconsistent failed drbd0 helper command before-resync-target minor-0 exit code __number__ drbd0 conn connected synctarget disk failed inconsistent
87e51b072485f519c6ef077f60f4b837677202cc	crypto caam reintroduce desc_max_used_bytes i incorrectly removed desc_max_used_bytes when enlarging the size of the shared descriptor buffers thus making it four times larger than what is necessary this patch restores the division by four calculation
1e482f75f169861e992eb6b5602dc73a9e0b63a2	by default use low bpp framebuffer on low memory cards framebuffers bpp is not that important but can waste significant part of memory on low-vram cards lower it to on cards and to on cards it can still be overridden by option
a5e99e126bf61772ccb0ebcc235f5599265cb5b9	staging comedi usbduxfast was already validataed remove the unnecessary check of __number__ the already validated this before the was called
8b5279e33f241a074a9c8649bba8f77a2167b798	xfs only writeback and truncate pages for the freed range xfs_free_file_space only affects the range of the file for which space is being freed it currently writes and truncates the page cache from the start offset of the free to eof modify xfs_free_file_space to write back and truncate page cache of just the range being freed
ff5b2fabf53426c15a5f041505687f94d1b2109f	net fec add fallback to random mac address if no valid mac address could be obtained from the hardware fall back to a randomly generated one
e4f0da055e4ff3e6ed2e2ad1f9c2334aeb845755	ehci-msm remove global struct usb_phy variable use struct to hold usb phy instance
4b8a3c08592ae0d530c87e2e1672ed8d9184dc09	media media make media_link more generic to handle interace links by adding an union at media_link we get for free a way to represent links no need to change anything at the code just at the internal header file
e0d44e8ab06885a5bb980f3d6d4cf64ad430d406	devfreq remove module_alias for exynos4 busfreq driver this driver can only be built-in it does not make sense to add modalias for it in addition to being incorrect the platform modalias needs to be prefixed with
43e699cebee2d521d499b6c9abbdcdfa46ac28f7	revert usb musb gadget fix otg active status flag this reverts commit aaro writes with i can no longer connect to n800 omap2 with usb peripheral g_ether according to git bisect this is caused by is the first bad commit so revert this patch as felipe says its unfortunate that tusb6010 is so messed up
eea410ce66b8fe42560fcf2f0eb7f4418c7d508d	staging comedi pcl724 remove dio from boardinfo this data in the boardinfo is not used by the driver remove it
d5feaea364281a7e9b80b4712e790ab908d61711	fix deadlock in unmap_hugepage_range git commit moved the flush_tlb_range within __unmap_hugepage_range inside the which triggered a deadlock in s390 tlb flushing code __tlb_flush_mm_cond also tries to acquire the but that is not needed because all callers already have or so it can be safely removed to fix the deadlock
a087a98e0767cf6c4f2480e6de5441497c9ba5b7	bluetooth btusb fix race when waiting for btusb_downloading the test for btusb_downloading must be after adding to the wait queue and setting the task_interruptible state otherwise the flag may get cleared after we test for it and we end up getting a timeout since schedule_timeout waits for the full duration this patch uses a wait_on_bit_timeout wake_up_bit to perform the task both race-free as well as in a much simpler way since theres no global wait_on_bit_timeout helper yet even though all the building blocks for it are in place this patch creates a temporary local btusb copy of it until the global one has made it to upstream trees
79c14141a487211d1bb7840d3f607766f6115dd2	convert completion path to use copy_to_iter required for any_layout support when the incoming virtio-scsi response header fixed size sense buffer payload may span more than a single iovec entry this changes existing code to save instead of the first single iovec base pointer from
e26f43faa0d79dd06e9e94829696b68b9940c2ee	macvlan do not return error when setting the same mac address the user currently gets an ebusy error when attempting to set the mac address on a macvlan device to the same value this should really be a no-op as nothing changes catch the condition and return early
400d36e68de56135223ace631f4bb067d9ccb44d	iio dac ad5360 use apis apis are device managed and make code simpler
ceac0cf209842e49c277ac301d4ce69b4db8239b	dont spam the bootlog dont spam the bootlog with the devices part id and serial number
f5775e0b6116b7e2425ccf535243b21768566d87	discard ram regions above the maximum reservation during setup discard ram regions that are above the maximum reservation instead of marking them as e820_unusable this allows hotplug memory to be placed at these addresses
c2c20ef43d00b1439631e603f8dcee9a803cd8b3	bnx2 update driver to use new mips firmware and new firmware fixes iscsi problems with some lefthand targets that dont set __address__ for data-in according to spec firmware generates exception warnings for this condition and becomes very slow this is fixed by suppressing these warnings when using default error mask
9dcfe2c75b51f454f39c2de4756e841228865b47	change warn to warn_once linus noticed that the new apis used warn which would turn into a dmesg dos if it triggers frequently on some buggy driver so make sure we only warn once these warnings are never supposed to happen so its typically not a problem to lose subsequent warnings link
c0e656b7a6e1ac03b2921d49211a735893efd544	padata fix wrong usage of rcu_dereference a kernel with enabled lockdep complains about the wrong usage of rcu_dereference under a rcu_read_lock_bh protected region info suspicious rcu usage not tainted suspicious rcu_dereference_check usage other info that might help us debug this rcu_scheduler_active __number__ debug_locks __number__ __number__ lock held by at __address__ fix that by using rcu_dereference_bh instead
1bd0abb0c924a8b28c6466cdd6bb34ea053541dc	set efi_alloc_align to __number__ kb set efi_alloc_align to __number__ kb so that all allocations done by the stub are naturally compatible with a __number__ kb granule kernel
0534af01cca338193abbfdb53650af91e65dbf10	x86 calgary use tce table size by default new kexec-tools wants to pass kdump kernel needed memmap via directly instead of this makes saved_max_pfn not be passed down to kernel to keep kernel and kernel using the same tce table size muli suggest to hard code the size to max we cant get rid of saved_max_pfn this time for backward compatibility with old first kernel and new second kernel however new first kernel and old second kernel can not work unfortunately retain saved_max_pfn so new kernel can work with old kernel from vivek link
e465de1cd5e1759e40f077bac287de60d56ad06c	use boot_cpu_has because its there at the moment initialization path is using to detect pt which is just open coding boot_cpu_has use the latter instead link
c8c4d42a6b46ea9f81816c47ac8d6ae25cf533fc	ipv6 only generate one new serial number per fib mutation
6e264feb6aa24d5369005895be4856debe1aaef4	staging rtl8188eu rework function phy_calculatebitshift rename camelcase variables and function name
c3c186403c6abd32e719f005f0af950155a9e54d	sched fix signedness bug in yield_to in sched bail out of yield_to when source and target runqueue has one task we changed this to store so it needs to be signed link
5871d2d787bc2fc45e43c9f8ecabdd2db37ad666	ath9k discard invalid frames early frames with invalid or zero length can be discarded early there is no need to check the crypto bits
4d09a43839853b9df7549fddd802a6e59b7201c1	staging xgifb add spaces around insert spaces around to fix the checkpatch issue spaces preferred around that
43aaa50f17c38c16cce2a9a3e73909b7937892a3	mmc wmt-sdmmc fix null pointer dereference of_id is dereferenced before null pointer check move it to after the check
628639b1c976a5f02792dc6595a4d199b7b70d85	wil6210 use wmi_disconnect_cmdid upon connect timeout upon connect timeout driver invokes _wil6210_disconnect which iterates over sta array and disconnects each connected sta in practice because the connection is still ongoing and because cid is not yet allocated disconnect is not actually happening this leaves fw in connecting state while driver is in disconnected state to fix this upon connect timeout explicitly send wmi_disconnect_cmdid to fw to make sure it gets disconnected
be9b3174c49109457c490a0ad8976aaeb3df5585	stmmac fix ptp init for gmac4 the gmac version has not extended descriptors that are available on instead of while initializing the ptp module the advanced ptp was enabled in case of extended descriptors this cannot be applied for version where only the hardware capability register has to show if the feature is present patch also adds some extra to better dump the configuration
da4b1caa49cbfac4e5be2c4b080b8d01b04358dd	mtd physmap_of use of helpers for reading strings of core code provides helpers for counting strings and reading them so use them instead of doing this manually this simplifies the code a bit
cb5c94cf3a825a0b64ae84516e7dd5c8a59befe6	f2fs crypto zero next free dnode block now page cache of meta inode is used by garbage collection for encrypted page it may contain random data so we should zero it before issuing discard
eb178d063324d9c30f673db3877b892a48ade21e	cgroup grab cgroup_mutex in drop_parsed_module_refcounts this isnt strictly necessary as all subsystems specified in are guaranteed to be pinned however it does spuriously trigger lockdep warning lets grab cgroup_mutex around it
43d6869037d6fa8f92a7a7e6df3b48147c8a3ef9	s6gmac fix error return code in s6gmac_probe fix to return a negative error code from the error handling case instead of __number__ as returned elsewhere in this function
02afc6a23863367f59a3c792567cf1c9bb9d626c	asoc wm8996 update locking around use of dapm pin api the pin updates in this driver look like they are intended to be done atomically update to do so
91f65facba5add493fffb643acdb258bd9f54eb2	fix amd_iommu_free_device put_device_state_wait doesnt loop on the condition and a spurious wakeup will have it free the device state even though there might still be references out to it fix this by using normal wait primitives
dc888405510dbaf4019cda7a6625f6e0721d113e	staging rtl8192e rename rtl8192_update_beacon use naming schema found in other rtlwifi devices rename rtl8192_update_beacon to _rtl92e_update_beacon
9cd2e62c4952a00543685c6ee21cd2bf69b621e9	fix endian error in smb2 protocol negotiation fix minor endian error in jeffs auth rewrite
d4d7e3ddc76c5ae3b4fbd15cb6f30aa78c28d788	clk core enforce clk_ops consistency has some handsome ascii art outlining which clk_ops are mandatory for a given clock given the capability of the hardware enforce those mandates with sanity checks in __clk_init
8dfdd2a8426b71bf85b400d5226c4c6e0fa21781	power reset syscon-reboot-mode use managed resource api use the managed resource version of reboot_mode_register
d5671a6a24066dbf717ed83c143df7145377756c	greybus battery-gb convert to use gb_operation_sync this converts the battery protocol driver to use gb_operation_sync removing the hand-rolled version of the same function
e270263ec1e14b835890cbc32cf32db8b661bd3b	scsi mpt3sas bump driver version as
6cd6ec55f4940bcddeed65e4eebb6190a64a4eb7	greybus fix a bug in gb_operation_sync the memcpy of request data into the request payload was copying the data into the wrong location fix that
fea844a2b0edd6540d5cde2cd54a8a3c86e9c53f	drivers hv vmbus briefly comment num_sc and next_oc next_oc and num_sc fields of struct vmbus_channel deserve a description move them closer to sc_list as these fields are related to it
e755d9ab387c4c2401dce5b6f435432a829f41cb	btrfs deal with null srv_rsv in the delalloc inode reservation code btrfs_update_inode is sometimes called with a null reservation
cd65a645a4f5e456607067734f9a11385c9dce7b	media s5p-csis enable only data lanes that are actively used enable only mipi csi-2 data lanes at the dphy that are actively used rather than unmasking all unconditionally
45ee2440a33f1c8768cd37a365154343eb5589e3	net qlogic qlge use new api the ethtool api is deprecated we move this driver to new api as i dont have the hardware id be very pleased if someone may test this patch
8d8bb1ad1ef6e799e85de50f696d2443aa3e84cb	asoc wm8904 replace bug with warn bug used in the driver is just to spit the stack trace on buggy points not really needed to stop the whole operation for that purpose itd be more convenient to use warn instead with more error information
102c2595aa193f598c0f4b1bf2037d168c80e551	ocfs2 extend enough credits for freeing one truncate record while replaying truncate records now function ocfs2_replay_truncate_records first modifies tl_used then calls ocfs2_extend_trans to extend transactions for gd and alloc inode used for freeing clusters jbd2_journal_restart may be called and it may happen that tl_used in truncate log is decreased but the clusters are not freed which means these clusters are lost so we should avoid extending transactions in these two operations
9a3c71aa802499e0b1db2788ccc75a56c5f00555	net convert low latency sockets to sched_clock use sched_clock instead of get_cycles we can use sched_clock because we dont care much about accuracy remove the dependency on x86_tsc
bbfbe832ffde9c0a8ae103987fefd109e7ac3949	staging dgap re-factor some more code for lines this patch fixes more char lines as reported by checkpatch
bfca05275a594920ad5111f5a23ec6fadc0d0780	revert do not allow buffers at offset __number__ this reverts commit the patch completely lacks a detailed explanation of what exactly blows up and how so is insufficiently justified as a band-aid otoh the justification as a safety measure against userspace botching up relocations is also fairly weak if we want real project we need to at least make the gab big enough that the gpu doesnt scribble over more important stuff with screens that would be also i think this would be much better in conjunction with a debug switch to disable our use of the scratch page hence revert this
8784ac02437fbe545a52a1be14684b2663208253	modify the default number of kernel receive conexts currently the default number of kernel receive contexts is set to the number of numa nodes on the system plus one for control context however the systems that have a single socket have numa disabled in the bios will have only one receive context by default this patch would ensure that by default there will be at least two kernel receive contexts plus one for control context regardless of the number of numa nodes on the system the user can override the default number of kernel receive contexts with the krcvqs module parameter
5f5a0115635bf678d267cbc72169a718e8724d03	ndisc make ndisc_fill_xxx_option for sk_buff
c774049adbabffca32ca1d4d671e9623dbb4fd3d	staging comedi c6xdigio tidy up c6x_pwmoutput rename the camelcase function for aesthetics pass the comedi_device pointer instead of the as the first parameter
3a8ca1b6bf7069338e266082479f2f632c29afb3	hypfs is never null or negative
08e28893b3886e7f2a2b77adcbdb2bfa91301d3a	staging media lirc use setup_timer this patch introduces the use of function setup_timer instead of structure assignments as it is the preferred way to setup and set the timer this is done using coccinelle and semantic patch used is as follows expression init_timer setup_timer y z y z
721dacbbeb062b99adea9ab6046b6ec04a8ec5fc	drm remove drm_minor_cnt this was originally added by david herrmann for range checks but entirely unused it confused me so lets remove it
db3697295cf4da1356e3ec86761d464d6d013b48	use drm_gem_object_unreference_unlocked since my last struct_mutex crusade someone escaped this already has the advantage that for the common case when someone else holds a ref the unref wont even acquire and im working on code to allow drivers to completely opt-out of any and all usage but that only works if they use the _unlocked variants everywhere v2 drop comment too v3 drop the other comment too
4407319d8fff93308c2afe40e7c2a7dc564ec122	memory atmel-ebi add pm ops add a hook to make sure the ebi dev configs are correctly restored when resuming the platform
00d760b057e0fb1e5fb515071af2cc87d15439f8	staging hv vmbus change cleanup to cleanup in change the jump label cleanup to cleanup
7d18bbee78d39f2a69929f59920205efeee864e2	omapdss fix rgb-to-yuv color conv coefs the color conversion coefficients for rgb to yuv conversion used with writeback dont result in the correct result this patch sets the correct coefficients
9b6a2d72d98ce0846c71055c21c407b7f1e668f1	convert wait_fori915_readreg to intel_wait_for_register by using the out-of-line intel_wait_for_register not only do we can efficiency from using the hybrid wait_for contained within but we avoid code bloat from the numerous inlined loops in total all patches text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__
63757d463ea683b469c1976032054d46cecdef09	mtd nand denali call nand_set_flash_node to set dt node this will allow nand_dt_init to parse dt properties in the nand controller device node
adaba320916d246af56821a1aab81a715091e7e5	tighten up global fault reporting on systems which use a single combined irq line for the smmu context faults may result in us spuriously reporting global faults with zero status registers this patch fixes up the fsr checks in both the context and global fault interrupt handlers so that we only report the fault if the fsr indicates something did indeed go awry
e252675fb722d4a307cc380a06a905f03cf9951c	acpi consistently use should_use_kmap so that acpi_unmaps behavior gets in sync with acpi_maps
f7be82093952ee4a74ffc8c729b2811f908cd9a4	rcu improve grace-period start logic this commit improves grace-period start logic by checking under the lock and by issuing a warning if a grace period is already in progress
9e1355e7d9c0dac39b9bc4e146a49d379f43ba42	make g2d_pm_ops static fixes the following warning warning symbol g2d_pm_ops was not declared should it be
892fdd1aee35803bfa41ccf4df850ddb70f0811c	drbd improve readability of io resuming after freeze due to no data access the previous way of doing the state change was also okay since the state change on the susp flag gets propagated from the mdev to the tconn fortunately all this goes away in
efd0f11d85e16d375dddeb77e8e78f43c67c5b13	ip_vti fix sparse warnings for vti_isvti this patch fixes the following sparse warnings warning restricted __be16 degrades to integer warning incorrect type in assignment different base types expected restricted __be16 addressable assigned usertype i_flags got int warning incorrect type in assignment different base types expected restricted __be16 usertype i_flags got int since vti_isvti is always used with which is __be16 we can __force cast vti_isvti to __be16 in header file
83b325f1b4d00035494bc18a7a131b2197b3c718	x86 microcode intel correct typo in printk user-visible so correct it link
7d63a5f9b25ba6b130da8eb2d32a72b1462d0249	rtlwifi change order in device startup the existing order of steps when starting the pci devices works for devices but fails to initialize the section of the rtl8821ae hardware this patch is needed to fix the regression reported in bug
1387d4b7f05db3d3cf156861f7c942b1031df51b	staging comedi daqboard2000 cleanup range_daqboard2000_ai change the whitespace of the range table to avoid the __number__ char lines and the ugly line breaks convert the range values into the appropriate
7a9d85d5559fff9214a3c41d441c9642805ddad3	media dib8000 fix ucb measure with dvbv5 stats on dib8000 the block error count is a monotonic __number__ bits register with dvbv5 stats we use a __number__ bits counter that it is reset when a new channel is tuned change the ucb counting start from __number__ and to be returned with __number__ bits just like the api requests
301de2cb6a521405cde1a2f9cdc42c5257b5725b	bluetooth fix imtu omtu values the omtu value is determined by the remote peer so theres no point in trying to hard-code it to any value the ipsp specification otoh gives a more reasonable value for the imtu __number__
c36c89096cb9f95fbdb0a6f3d80d4b9a50537ed3	asoc wm0010 fix possible out-of-bounds array read spotted by coverity cid __number__
900f736251c81886f3064c9d489c85eddee921b7	f2fs avoid to flush nat journal entries this patch adds a missing condition which flushes nat journal entries unnecessarily introduced by f2fs add bitmaps for empty or full nat blocks
1d0e834d62c6810385c2f0673cf6bd97a59aae68	staging line6 exchanged strict_strtoul with kstrtou8 in exchanged call to strict_strtoul with kstrtou8 in pod_resolve
7d1d9aea3ee0e3aa285431c0fcfb05be8f6ec5f4	tidy i915_gem_valid_gtt_space we can replace a couple of tests with an assertion that the passed in node is already allocated as matches the existing call convention and by a small bit of refactoring we can bring the line lengths to under
1968a1e9049d20b9b7a2620cb15f481f472f5b46	only touch divider for mode well be using
538dc9045251d3d6b5c0216a5c61c32bd9cedac9	mac80211 make addr const in set_ieee80211_perm_addr make the addr parameter const in set_ieee80211_perm_addr to save clients from having to cast away a const qualifier
263fcd312deffb9bf10f007f958dccfa64a807f5	irqchip gicv3-its fix encoding of collections target redistributor with a monolithic gicv3 redistributors are addressed using a linear number while a distributed implementation uses physical addresses when encoding a target address into a command we strip the lower __number__ bits as redistributors are always aligned this works perfectly well with a distributed implementation but has the silly effect of always encoding target __number__ in the monolithic case unless you have more than cpus of course the obvious fix is to shift the linear target number by __number__ when computing the target address so that we dont loose any precious bit link
8c506608c3b2eac939fa244bcdea5faa31818f95	pm hibernate re-enable nonboot cpus on disable_nonboot_cpus failure when disable_nonboot_cpus fails on some cpu it doesnt bring back all cpus it managed to offline a consequent call to enable_nonboot_cpus is expected in hibernation_platform_enter we dont call enable_nonboot_cpus on error so cpus stay offlined create_image and resume_target_kernel functions handle disable_nonboot_cpus faults correctly hibernation_platform_enter is the only one which is doing it wrong
29c6eaffc8868ef6fa71997d0ea507a02c52712c	ext4 trim unused parameter from convert_initialized_extent the flags parameter is also unused
434a6c9f90f7ab5ade619455df01ef5ebea533ee	initialize mapping_info every time as it turns out mapping_info does need to be initialized every time because pgt_data address could be changed during kernel relocation so it can not be build time assigned without this page tables were not being corrected updated which could cause reboots when a physical address beyond was chosen link
fa0d3fce7ceff0aae62f3e19678713bc5a7f3377	dax remove buffer_size_valid now that ext4 properly sets when we call get_block for a hole rely on that value and remove the buffer_size_valid sanity check
f3c5fe979117908fb642ed130ae2cd78cb005931	fix return value check of debugfs_create_file in case of error the function debugfs_create_file returns null pointer not err_ptr if debugfs is enabled the is_err test in the return value check should be replaced with null test
46bec25da6a41b7308adde746cbcdbbd0bf9b39c	asoc atmel sam9x5_wm8731 fix oops when unload module as the priv is not assigned to it is null so when unload module it will cause null pointer oops assign priv to to fix this issue
f5da7cb24b78f2398c80a3ba25438602a68fc3e4	coresight etb10 fix check for bogus buffer depth we attempt to sanity check the buffer depth reported by the hardware by making sure it is not less than zero however this check will never be true since the buffer depth is stored in an unsigned integer instead change the check to look for the top bit being set which was the intention
28603d13997e2ef47f18589cc9a44553aad49c86	stmmac platform move plat_dat checking earlier original code only plat_dat for the config_of case this patch it earlier and unconditionally to avoid kernel build warnings stmmac_pltfr_probe warn variable dereferenced before check plat_dat v2 fix coding style
96f5ff0e108a497372d86a286e6c264b39c09370	dmaengine edma use the edma_write_slot instead open coded memcpy_toio edma_write_slot is for writing an entire param slot
9ac3e85a5c5c33ac99b6f093e886ecb8849919d2	mailbox pl320 remove __raw io the use of __raw io accesors is not endian safe and should be used sparingly the relaxed variants should be as lightweight and also are endian safe note this has not been run-time tested
554dd692afd5d449168b5007841742db4a2ed17b	free correct pointer in astfb_create error paths in the err_free_vram and err_release_fbi error paths in astfb_create we attempt to free the only jumps to these error paths occur before we assign sysram free sysram instead link
a46b6b2d4d49d3fdb6a2ef47455dc170fbce48b7	gpu ion set the dma_address of the sg list at alloc time this patch sets the dma_address field of the sglist representing an allocation at allocation time this technically breaks the dma api which states that these addresses should be set when a particular device takes ownership of a buffer via the dma_map apis in the case of our systems the only dma address space is physical addresses additionally we can not afford the overhead of calling dma_map_sg from this location as it implies a cache invalidate that is not necessary if the memory was previously mapped cached instead the expectation is that memory being returned from the heaps is ready for dma in that if any cached mappings of that memory exist they have been invalidated jstultz modified patch to apply to staging directory
a50299ae7cc4ba7268749e144e7c16321c25e3b3	btrfs convert from atomic_t to refcount_t refcount_t type and corresponding api should be used instead of atomic_t when the variable is used as a reference counter this allows to avoid accidental refcounter overflows that might lead to use-after-free situations
c4f1b62a4b50a01e8d820717906b674807ef9ca3	nfs ncommit count is being double decremented the decrement is handled by each call to nfs_request_remove_commit_list no need to do it again in nfs_scan_commit
e5bb7425e5bae76c8950089a946edcba3e0540ab	hyperv-fb kick off efifb early remove firmware framebuffer before initializing hyperv-fb needed on gen2 virtual machines letting register_framebuffer handle the switchover results in efifb still being active while hyperv graphics are initialized which in turn can make the linux kernel hang
d7816ab09b4e8c6cbae1ec006558ca7f8c21f4e1	regulator ab8500 fix list_voltage for fixed voltage regulators commit b080c78a4e447e9c212c207f725999d4e32c5f19 regulator ab8500 update voltage handling for fixed voltage regulators removes min_uv settings and sets volt_table for all fixed voltages thus we can not use regulator_list_voltage_linear now use regulator_list_voltage_table instead
d8899bb2be91b3a19ebf82b138232919ffcf833a	powerpc debug control and status registers are
21b9b073924aceb6b8d19c49f61daa86c0340e1a	get rid of name and type arguments of walk_component always can be found in nameidata now
a677f4869576eb177570ffee68598d2202de030f	s390 use generic memory barriers the s390 kernel is smp to we just didnt bother with a non-smp variant for the memory-barriers if the generic header is used wed get the non-smp version for free it will save a small amount of text space for
c3a2da26e6216033456c1d5375cd1d2629d1fd09	fbdev mmp print irq resource using format string resource_size_t cannot be printed using the format string when we it is defined as u64 in function mmphw_probe error format expects argument of type unsigned int but argument __number__ has type resource_size_t long long unsigned res map __func__ error format expects argument of type unsigned int but argument __number__ has type resource_size_t long long unsigned this changes the format string to which is interpreted by the printk implementation to pretty-print a resource structure
4522193698d115761f9e4f340697f86975ac8e69	spi sh-hspi convert to let spi core validate bits_per_word set bits_per_word_mask so spi core will reject transfers that attempt to use an unsupported bits_per_word value
6658ab80fd4ef940fc2366ddb66690a15ea69c18	mac80211 ibss handle cfg80211_chandef_dfs_required error codes error codes returned by cfg80211_chandef_dfs_required are ignored when trying to join an ibss fix this by printing an error and returning
0d2e18985a99bc8ff9ef260a7e10e6fcdc159f2a	swiotlb rate-limit printing when running out of sw-iommu space if the system runs out of sw-iommu space changes are high successive requests will fail too flooding the kernel log this is true especially for streaming dma which is typically used repeatedly outside the drivers initialization routine add rate-limiting to fix this while at it get rid of the open-coded dev_name handling by using the appropriate variant
aa1a6d6d74fff31060e08f6007037e6d807c8130	leds pwm fix for deferred probe in dt booted mode we need to make sure that the error code from devm_of_pwm_get is the one the module returns in case of failure restructure the code to make this possible for dt booted case with this patch the driver can ask for deferred probing when the board is booted with dt fixes for example omap4-sdp boards keyboard backlight led
a761cebfd7cbeaf9a3a0c6960508ca1daaebb67e	arm fix build warning in fix this harmless build warning in function do_alignment warning may be used uninitialized in this function this is caused by the compiler not being able to properly analyse the code to prove that is assigned in every case the case it struggles with is where we assign the handler from the thumb parser do_alignment_t32_to_handler as this starts by zeroing this variable via a pointer move it into the calling function this fixes the warning
1d49c38c4865c596b01b31a52540275c1bb383e7	nvme use a retryable error code on reset a negative status has the do not retry bit set which makes it not retryable use a fake status that can potentially be retried on reset an aborted commands status is overridden by the timeout handler so that it wont be retried which is necessary to keep initialization from getting into a reset loop
de84d89030fa4efa44c02c96c8b4a8176042c4ff	sunrpc always close the old socket before reconnecting it is not safe to call xs_reset_transport from inside xs_udp_setup_socket or xs_tcp_setup_socket since they do not own the correct locks instead do it in xs_connect
8ba4b3b9cc3d95714b31467614205fc26b91fb7c	clk tegra do not print errors for clk_round_rate clk_round_rate can be used by drivers to determine whether or not a frequency is supported by the clock the current tegra clock driver outputs an error message and a stacktrace when the requested rate isnt supported thats fine for clk_set_rate but its confusing when all the driver does is query whether or not a frequency is supported
8e52acf70459020d7e9e9fda25066be4da520943	btrfs retrurn void from clear_state_bit currently it returns a set of bits that were cleared but this return value is not used at all moreover it doesnt seem to be useful because we may clear the bits of a few extent_states but only the cleared bits of last one is returned
b74e7062366af5b372b0f8ee5781c5e713ef67ad	usb core hub dont print on enomem all kmalloc-based functions print enough information on failures
31e60f52224197dc989a82237905dfe643183f7c	nfsd convert num_drc_entries to an atomic_t we can remove the spinlocking around it
246ccea184423ccdec3be1ca3d400cc3c547404d	s390 sparse fix sparse null pointer warnings fix two null pointer warnings in the dasd driver warning using plain integer as null pointer warning using plain integer as null pointer
f492b81777c93b33afe892b424e022022b5bc297	arm shmobile set clock frequency in hz from of nodes shmobile_init_delay looks for of clock-frequency to determine the delay which is set by calling shmobile_setup_delay unfortunately this seems to be incorrect in detail as clock-frequency node values are in hz whereas the frequency argument to shmobile_setup_delay is in mhz provide a variant of shmobile_setup_delay that accepts hz to correct this problem
32c7f202a4801252a0f3578807b75a961f792870	btrfs fix dirtied pages accounting on sub-page writes when doing sequential writes to the same page balance_dirty_pages_ratelimited_nr should be called once instead of __number__ times the latter makes the dirtier tasks be throttled much too heavy fix it with proper de-accounting on clear_page_dirty_for_io
9800935a215ddf278da4860f59b4d29d2f429152	make mixer_check_timing static fixes the following sparse warning warning symbol mixer_check_timing was not declared should it be
3bdd8e6e09cd5e88b3fc8ceddf150976633f43c3	mips malta malta-memory use the phys_offset to build the memory map phys_offset is used to denote the physical start address of the first bank of ram when the malta board is in eva mode the physical start address of ram is shifted to __number__ so its necessary to use this macro in order to make the code eva agnostic
60f116fca162d9488f783f5014779463243ab7a2	reduce number of blocks scanned per bank from fam17h onwards the number of extended mcx_misc register blocks is reduced to __number__ it is an architectural change from what we had on earlier processors although theoritically the total number of extended mcx_misc registers was __number__ in earlier processor families in practice we only had to use the extra registers for mc4 and only __number__ of those were used so this change does not affect older processors tested on fam10h and fam15h systems link
bedffda8cad46bedb6880bb98c23c51c715216c3	coresight etb10 adjust read pointer only when needed the read pointer read_ptr needs to be adjusted only if its value has gone beyond the length of the memory buffer
1522d02e275332080ec27e268edc29c79c6f5e0c	leds trivialremove unnecesary return the ret is got the status returned by the led_classdev_register returning ret if the led_classdev_register fails and returning __number__ if the led_classdev_register success can be done by doing just return ret at the end
be44389964c1855ccffedbfbf5d2a943bb84ad66	virtio_net use helpers these can be converted to
5fec97d0e3d93717f1d6a958a03e579078088861	parisc copy_thread rename arg argument to kthread_arg the arg argument to copy_thread is only ever used when forking a new kernel thread hence rename it to kthread_arg for clarity and consistency with do_fork and other arch-specific implementations of copy_thread
c70a31750679ca10a46dd0cc2d57ed7b54dbe7c2	qlcnic fix initialization of work function work function needs to be initialized before we participate in inter device communication idc
ed0450cef00d2c76bcb8778721df947ba7ff4147	iwlwifi set max firmware version of __number__ to __number__ just like __number__ __number__ will not have firmware releases newer than is still supported in latest firmware releases
425d247680d050fe3ee7e53b9cf0240bf6b4b351	hwmon ntc_thermistor return error code from hwmon_device_register hwmon_device_register never returns a null pointer in case of errors but an error value use it
5c77879ff9ab9e7dd5b4a78666a09af1a8854be9	media v4l2-dev add new vfl_dir_ defines these will be used by to improve ioctl checking ioctls for capture should return when called for an output device
97deb1bc1183f8d91f0ebde1403980e5f9429f6e	staging iio frequency remove explicit comparisons remove comparisons to __number__ or null
327941f8d322685633f74fb43dc3aec86529f5f4	test_bpf indicate whether bpf prog got jited in test suite i think this is useful to verify whether a filter could be jited or not in case of bpf_prog_enable __number__ which otherwise the test suite doesnt tell besides taking a good peek at the performance numbers nicolas schichan reported a bug in the arm jit compiler that rejected and waved the filter to the interpreter although it shouldnt have nevertheless the test passes as expected but such information is not visible its useful for the remaining classic jits but also for implementing remaining opcodes that are not yet present in ebpf jits arm64 waves some of them to the interpreter this minor patch allows to grep through dmesg to find those accordingly but also provides a total summary jited echo __number__ insmod dmesg grep dmesg example on the arm issue with jit rejection __float__ test_bpf add_sub_mul_k __number__ pass __float__ test_bpf div_mod_kx __number__ pass __float__ test_bpf and_or_lsh_k __number__ __number__ pass
ae4ac0dbf1385a2e33a6621235b5bcddae5cba4e	staging comedi pcl726 use comedi_handle_events use comedi_handle_events to automatically the async command for an end-of-acquisition or if an occurs
32517d59ebb3b6eb7a5a5736020072ce7e609e76	enable rb_arb before resetting the vcpu this fixes uvd not responding trying to reset the vcpu messages on earlier asics
a82974c9f4ed07b89715d0695ff41379116fd622	bluetooth dont advertise high speed support without ssp it is not allowed to enable high speed support when secure simple pairing is not available or disabled however the support for high speed gets advertised on a controller that does not even support secure simple pairing since there is no way to enable high speed support on such a controller do not even advertise its support
26c924febc2a840fc232bfb3771df39810f5d362	media dvb initialize all cache values by default initialize the frontend current delivery system with the first one this warrants that a dvbv3 application will be able to tune to it after the removal of filling at the drivers
7dd62c0178ceae1d2bf5d8b88941314ec6eeca0a	toshiba_haps make use of macros this patch makes use of macros simplifying device attributes creation
0b08851fdaa5f9f74357345d7be44ea584665d5f	btrfs optimize reada_for_balance this patch does two things first we no longer explicitly read in the blocks were trying to readahead for things like balance_level we may never actually use the blocks so this just adds uneeded latency and balance_level and split_node will both read in the blocks they care about explicitly so if the blocks need to be waited on it will be done there secondly we no longer drop the path if we do readahead we just set the path blocking before we call reada_for_balance and then were good to go hopefully this will cut down on the number of re-searches thanks
434ba16e86640104faf241eaf34bc4bbea9733a4	serial __number__ of enable for driver functions should work for driver
41603e9783a24c8c7cce548c0819bdc9e46a585b	avoid null deref in the call to dmi_first_match may fail and return null if it does return null then well be dereferencing a null pointer in the rfkill_alloc call where we do kaboom avoid that problem by testing for a null return value from dmi_first_match and bailing out if it fails i was a bit uncertain about what to return in the failure case in the end i settled for as the most logical error to return
c7fac7dc1d5d1f0cee346952628d53422c0bc3b7	adjust the position of data size initial put the initial part close to memory allocate it will make code more clear
2e1d4a065a77d076a679df22a4eddbc7e33cad98	repair broken failure paths current failure paths attempt to free resources which we failed to request and disable resources which we failed to enable ones this leads to kernel this patch does some simple re-ordering to prevent this from happening
fd75a33e0002d2f850c67c775df47c4d479c20c1	mips elf fix loading o32 binaries on kernels commit mips elf set fp mode according to introduced checking of the elf section but did so through the native sized elfhdr and elf_phdr structures regardless whether the elf was actually or this produces wrong results when trying to use a kernel to load o32 elf files change the uses of the generic elf structures to their versions since the code bails out on any cases this is ok until they are implemented patchwork
2454f8d15cf75781a2714e99badbfbc2f5a7dacb	regulator gpio use gpio_is_valid use gpio_is_valid instead of an explicit comparison with __number__
eee2f04b801ebc95da16f91fef029a083ba1a216	packet make packet too small warning match condition the expression in ll_header_truncated tests less than or equal but the warning prints less than update the warning
275bf960ac69744430a6725a4ed7f50d36cf1441	vhost better detection of available buffers this patch tries to do several tweaks on vhost_vq_avail_empty for a better performance check cached avail index first which could avoid userspace memory access using unlikely for the failure of userspace access check instead of cached avail index as the last step this patch is need for batching supports which needs to peek whether or not theres still available buffers in the ring
9ad92bdff7062d9925754607f5a92b4f651fc7d3	hwrng st improve fifo description the original representation of fifo size in the driver coupled with the ambiguity in the documentation meant that it was easy to confuse readers this lead to a false positive bug-find and subsequently time wastage debugging this phantom issue hopefully this patch can prevent future readers from falling into the same trap
5df1ff3a22ebfd2749092227d7d1ea4599488c4e	rt2800 initialize bbp_r108 on proper subroutines create helper function and move initialization to subroutines
a119845f6e98c890831bb5639cdad5ca9b79965f	drivers hv add code to distribute channel interrupt load implement a simple policy for distributing incoming interrupt load we classify channels as a performance critical and b not performance critical all non-performance critical channels will be bound to the boot cpu performance critical channels will be bound to the remaining available cpus on a round-robin basis
c9c9bbd754e5f342977b32a328849cc0d9c15c93	dont leak runtime pm ref on driver load if an error occurs in amdgpu_device_init after has been set its caller amdgpu_driver_load_kms will skip runtime pm initialization and call amdgpu_driver_unload_kms which acquires a runtime pm ref that is leaked balance by releasing a runtime pm ref in the error path of amdgpu_driver_load_kms link
3126b4d12132a5d70df0c7fd4d047ea92d492987	staging lustre fix brace are not necessary for single statement blocks this patch fixed warning braces are not necessary for single statement blocks in
81380739516730124067576c9cc9f2418be5bf36	regmap no need primary handler for nested irq the primary handler will not be called if the interrupt nests into another interrupt thread remove it to avoid confusing
6061789a455b15293422a92c0f3e85f4cd143619	add an implement for check_power_state equal for kv was missed these was implemented for other asics
b5693964eaa2a9bb6a6e1b277c9321b4fc511825	staging android ion fix some format strings c99 says that a precision which is simply with no following digits or should be interpreted as __number__ which means that these format strings actually mean print __number__ spaces however the kernels printf implementation treats this case as if the precision was omitted dont rely on that quirk
30e23b711c7b92dea664e61c3eb4b2cdc4b262e9	fm10k return proper error code when pci_enable_msix_range fails the pci_enable_msix_range function returns a positive value of the number of allocated vectors if it succeeds on failure it returns a negative error code return this code properly so that the error message printed by the driver will show the actual error code instead of being masked by
91cbe4e73197859498fba9920890979296b842e6	rtl8xxxu use correct h2c calls for the uses the same h2c api as the call the correct functions for update_rate_mask and report_connect
797f4277113bff142b6c64a55abaef64d7d67d5c	btrfs use existing align macros in btrfs_allocate the kernel developers have implemented some often-used align macros we should use them instead of the complex code
a7a42849cdc82e42cb5c8404b8a34b1601d51135	ath10k core match wait_for_completion_timeout return type return type of wait_for_completion_timeout is unsigned long not int an appropriately named unsigned long is added and the assignments fixed up
310239e70aab8d958088948449b7e05d6de64b9c	staging comedi me_daq simplify analog output boardinfo the boards supported by this driver either have analog outputs or dont have them add a new boardinfo value has_ao to indicate this the boards that have analog outputs always have __number__ channels remove the unnecessary boardinfo and just open-code the values in the subdevice initialization the boards with analog outputs also share the same output range capabilities rename the comedi_lrange to make it common for all board types
d47bb83b1bb778fb8429dc1f12a137039cee4e14	properly cast ll_getname argument to __user in ll_dir_ioctl this makes sparse happy
f5580d8d6fd07a569e468fca51f435aa5b122fc4	media cec accept two replies for cec_msg_initiate_arc the cec_msg_initiate_arc message is special since it is the only cec message that accepts two possible valid replies cec_msg_report_arc_initiated and cec_msg_report_arc_terminated so if the transmitted message is cec_msg_initiate_arc and the remote side replied with cec_msg_report_arc_initiated or cec_msg_report_arc_terminated then a value of cec_msg_report_arc_initiated or cec_msg_report_arc_terminated will match either reply i thought about either adding a second reply2 field but thats ugly for all other messages that have only one reply and what if in the future a new message is added that can have three another option would be to add a cec_msg flag but really the combination of cec_msg_report_arc_initiated and a reply value of one of the two possible replies already functions as a flag another advantage of this approach is that it is safe to re-use a cec_msg struct no need to zero a flags field or a reply2 field so since this really is an exception in the cec specification i decided to implement it as an exception as well
e294bc91760e11d2f1ebbac1d0a979069edf7adb	mfd lpc_ich fix resource request for mem __number__ the older southbridges supported by the lpc_ich driver do not provide memory-mapped space of the root complex the driver correctly avoids computing the iomem address in this case yet submits a zeroed resource request anyway via mfd_add_devices remove the iomem resource from the resource array submitted to the mfd core for the older southbridges
a16a1647fa6b6783c2e91623e72e86f0c2adac5e	netfilter ctnetlink fix race between delete and timeout expiration kerin millar reported hardlockups while running conntrackd in a busy firewall that system with several processors was acting as backup in a primary-backup setup after several tries i found a race condition between the deletion operation of ctnetlink and timeout expiration this patch fixes this problem
0dda8851a88d6c9d6389f1caf69627154c39aceb	acpica revert parser fix for supername method invocation acpica commit eade8f78f2aa21e8eabc3380a5728db47273bcf1 revert commit ae90fbf562d7 acpica parser fix for supername method invocation support for method invocations as part of super_name will be removed from the acpi specification since no aml interpreter supports it link
59c41d15e63063545b1f91f7ad5411c25f6d046d	asoc n810 automatically disconnect non-connected pins all codec input and output widgets are either in the dapm routing table or manually marked as non-connected this means the card is fully routed and we can let the core take care of disconnecting non-connected pins
a36f04c0447a3d59b9b4faf4ddb3dbe1ea808956	extend the init voodoo to cover crtcs
d63951d7442982ef81df585a9c08c2b5fd49f898	xen-netback return correct ethtool stats use correct pointer arithmetic to get the pointer to each stat
2cf034282205a2115777b7a899f6f12d06943b62	asoc ad1836 use snd_soc_update_bits for read-modify-write use snd_soc_update_bits for read-modify-write register access instead of open-coding it using snd_soc_read and snd_soc_write
a110f93d8b4672c4ad18d911f62b9e861010e83b	spi quad fix the name of dt property spi quad fix the name of dt property in patch the previous property name spi-tx-nbits and spi-rx-nbits looks not human-readable to make it consistent with other devices using property name spi-tx-bus-width and spi-rx-bus-width instead of the previous one specify the number of data wires that spi controller will work in add the specification in
028b242d1b91e95869a084c43ce3497203f84e5c	staging media lirc fix multiple issues with function arguments handles the following issues removing extra parentheses around function arguments removing unnecessary pointer to pointer casts issues detected and resolved using the following coccinelle script expression e type t identifier f e expression e identifier f e expression e identifier f e
cb4cca7103ea29b9296a85fe45966e7d95669ee1	batman-adv remove space before semicolon
1f36aebcc5fa53c5d98f3329186466b5eb76a168	batman-adv dont add temp clients belonging to other backbone nodes the early client detection mechanism must not add clients belonging to other backbone nodes such clients must be reached by directly using the lan instead of the mesh this was introduced by batman-adv detect not yet announced clients
864b52c4aeeba328660574d847190dda76d13519	staging comedi me4000 fixed code style issue fixed error message space prohibited before that
337b600f898583b50b67e0bbff0667db2393d614	remove multiple device id checks remove multiple superfluous device id checks since an id_table is present in the driver probe should never encounter an empty device id entry in case of of style match of_match_device returns an matching entry for paranoia sake check for device id entry once and fail probe if none is found this is much better than checking for it multiple times
2a46eed54a28c1e3de701ca4237ce4f8bebf14c6	wrong page freed on preallocate_pmds failure exit note that pmdsi is simply uninitialized at that granted its very hard to hit you need split page locks kmallocsizeofspinlock_t gfp_kernel failing but the code is obviously bogus introduced by commit x86 add missed calls for preallocated pmds
9d2fe9ae298d6144546e168d4b0067b2340ec246	media davinci-vpbe return an error code only as a constant in vpbe_probe return an error code without storing it in an intermediate variable delete the local variable ret which became unnecessary with this refactoring
732e563373ffc57d38a8a3b6d55f2de865182117	kvm s390 helper for converting real addresses to absolute added a separate helper function that translates guest real addresses to guest absolute addresses by applying the prefix of the guest cpu
889cdff72b85cc553d7820de071887593690b7d2	ipw2200 remove redundant check of rc __number__ the check for rc __number__ is always false so the check is redundant and can be removed detected with coverityscan logically dead code
52a1b4e93518c7625fa9756637e54400637ad7ec	media media rcar-vin allow field to be changed the driver forced whatever field was set by the source subdevice to be used this patch allows the user to change from the default field
096a4cfa5807aa89c78ce12309c0b1c10cf88184	net fix a typo in skb_checksum_validate_zero_check remove trailing underscore
384e483fb9d487bb318acc7098f61d3feffa4d79	staging comedi cb_pcidas fix the ao use for trig_int this driver only supports a of trig_int for ai commands the is trivially validated to be __number__ for trig_int source the is actually the valid trig_num that is passed to the async callback refactor the function so that the is used to check the trig_num instead of the open coded value
7d32cdef535622c0aea39807989f62cdddea207e	usb musb fail with error when no dma controller set fail with error when no dma controller is set
fe65cbdbc97929e4a522716ed279a36783656142	use correct node for handling cache domain eviction it looks like we were incorrectly comparing against itself instead of the target node when evicting for a node on systems where we need guard pages between regions with different cache domains as a consequence we can end up trying to needlessly evict neighbouring nodes even if they have the same cache domain and if they were pinned we would fail the eviction link
f0e2efcfd271733119cfe499f5811968544cbe7b	pstore do not use message compression without lock pstore_compress uses static stream buffer for zlib-deflate which easily crashes when several concurrent threads use one shared state
36377357db00f8660039578ba57a2a19bfc9ad3d	omapdss dispc fix usage of dispc_ovl_set_accu_uv commit omapdss dispc update accumulator configuration for chroma plane adds dispc_ovl_set_accu_uv function that sets the accu but the function only handles yuv and nv12 modes and bugs otherwise the patch also adds a call to the function but unfortunately the place of call was such that the mode could be other than yuv or nv12 thus crashing the driver this patchs moves the call to a slightly later spot at which point only yuv and nv12 modes are handled
9fd3effaa7334f6061f4ad4b57665f375457d0eb	staging comedi pcl818 introduce pcl818_ai_clear_eoc introduce a helper function to clear the end-of-conversion flag this flag is set when an analog input conversion is finished and the hardware generates an interrupt request writing any value to the register resets the flag and re-enables the interrupt remove the clearing of the flag in pcl818_handle_eoc the interrupt function will handle clearing the flag
c9839303d186d6270f570ff3c5f56c2327958086	pin the object whilst faulting it in in order to prevent reaping of the object whilst setting it up to handle the pagefault we need to mark it as pinned this has the nice side-effect of eliminating some special cases from the pagefault handler as well
56d6efc2de5fcf76d3c7b33a7671bc04c53cb0e5	kvm remove smap bit from cr4_reserved_bits this patch removes smap bit from cr4_reserved_bits
e98172462f0b75ed60f3a73aa280fb29cafd450f	avoid a warning there is an old warning about mlx4_sw2hw_eq_wrapper on x86 in function error may be used uninitialized in this function the problem here is that gcc wont track the state of the variable across a spin_unlock moving the assignment out of the lock is safe here and avoids the warning
b444d1dfe296433a93d6b814d924e0ab99ad7e7b	spi fsl-dspi several minor improvements and fixes improve dependencies using compile_test fix a typo drop platform_set_drvdatapdev null in error path of probe make module_license match the header
9d5262ae9b52d5dd96a4c5bd1b683570b84a011e	alsa cs5535audio constify snd_pcm_ops structures check for snd_pcm_ops structures that are only stored in the ops field of a snd_soc_platform_driver structure or passed as the third argument to snd_pcm_set_ops the corresponding field or parameter is declared const so snd_pcm_ops structures that have this property can be declared as const also the semantic patch that makes this change is as follows disable identifier i position p static struct snd_pcm_ops identifier struct snd_soc_platform_driver e position p identifier expression e1 e2 position p snd_pcm_set_opse1 e2 position p identifier struct snd_pcm_ops e on disable identifier static struct snd_pcm_ops i
fb8eb454005ad8a04da16c7867fbdb41d727a46b	regulator act8865 remove unnecessary from struct act8865 now we are using devm_regulator_register so we dont need the array to store return value of devm_regulator_register use a variable is enough for checking return status
bffbe637aafa14cd30e5885eb0f1a59075a19452	asoc omap3pandora use the same name for platform as the cpu_dai now that the platform driver is registered with the cpu_dais device we can use the same name for it
8d95b322ba34b158146bc2fa6172304ef13ac232	rpmsg use proper format-specifier for printing dma_addr_t the dma_addr_t types can be printed properly using the printk format-specifier there is no need to resort to the unsigned long long type-casting to deal with different possible type sizes
e76781e48f969e044d318485274b9574f1ccc3dd	mac80211 dont set mesh peer ht caps if ht disabled blindly setting ht caps on a mesh peers station entry would result in mcs rates being used by the rate control algorithm even if no ht had been configured fix this by checking the channel type before assigning ht capabilites
d566b9aec93e603f59430d32d7996b74a7b5f555	staging lustre o2iblnd put back work queue check previously removed the previous patch removed a check needed until lu-5718 is properly addressed with the check lu-5718 results in an error message and a lost rdma operation without it we have memory corruption and a crash much harder to debug putting the check back in case lu-5718 is not fixed soon intel-bug-id reviewed-on
921372bf5a7c03a05de25a083b852c6b5d9d97a7	rtc at91rm9200 clear rtc alarm status flag prior to suspending as said in the sama5d2 datasheet prior to instructing the device to enter ulp mode __number__ and the internal sources of wake-up must be cleared this patch is to clear the rtc alarm status flag prior to suspending to avoid the erroneous wake-up activity as it is often used as the wake-up source for the ulp mode __number__
dc6525c61f0fc1e41611d91134f56ed2c297feac	mtd fsl-quadspi print the error value when displaying dev_err messages it is useful to print the error value brian fix up can not at the same time
326d875da33b2b72e409868681c76d6863fd191b	staging comedi pcl711 remove i8253_osc_base this static const int variable is only used one place in the code remove it and just open code the value
243fedd5fa4a4a72caae7bde3f0bd0354a256b88	net emaclite remove unnecessary code that interrupts on pong buffers there are no specific interrupts for the pong buffer on both transmit and receive side same interrupt is valid for both buffers so this patch removes this code
ee69c8a9470e373dfdbbe8d53b72001cf10b0923	add __init annotation when platform_driver_probe is used via sysfs is disabled thus annotations can be added to
9aa609e1a3846d3c17087b62579867bab0f488de	drm fb helper should avoid sleeping in panic context there are still some places in the fb helper that need to avoid sleeping in panic context heres an example __float__ bad scheduling from the idle thread __float__ cpu __number__ pid __number__ comm tainted g m e __float__ hardware name intel corporation bios __float__ __address__ __address__ __address__ __number__ __float__ __address__ __address__ __address__ __address__ __float__ __address__ __address__ __address__ __number__ __float__ call trace __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ drm __float__ __address__ drm __float__ __address__ drm __float__ __address__ drm_kms_helper __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ theres __drm_modeset_lock_all which daniel vetter introduced for this purpose we can leverage that without reinventing anything this patch works with the latest kernel
9ba0905f1740f4dbd26c51883511079944e9c97d	crypto algif_skcipher removed unneeded code remover unneeded code
ab59ac0155ebe16d563b68d63ceb2e2d0747180f	ohci-da8xx set module_alias to allow autoloading the davinci usb platform device in uses ohci as the name to allow autoloading of the relevant driver the module needs to set the module_alias
b880ab869c4e1e7cadb040d4ee9b189aebd6cb38	bluetooth the p-256 randomizer is __number__ octets long and not __number__ octets this seems to be a simple typo in the debugfs entry for the remote out-of-band data entries
4168d0d9d304f184f786b1f00750557b8e09453c	dma coh901318 avoid unbalanced locking in case the len is __number__ we must return without trying to unlock the lock that was not locked
77d3595b29e2289cb6f9e4cece5fca1335554d56	omapdss remove dsi videomode from dssdev dsi videomode is no longer needed in the omap_dss_device so remove it
23100dd96a870470c19dcd84a50b6c43c684d912	scsi hpsa when switching out of accel mode await only accel command completions dont wait for commands to complete only for accelerated mode commands
c8abb73fb82b30ee736ada0f1ae50c9b4382713e	bluetooth check for default address of broadcom bcm20702a0 controllers the broadcom bcm20702a0 usb controllers might come with the default address when booting up if this happens then warn about such address being used
8ac456495a33d9466076fea94594181ceefb76d9	media stk1160 stop device and unqueue buffers when start_streaming fails if start_streaming fails out of memory the driver needs to rewind the start procedure this implies possibly stopping the device and clearing the buffer queue
c3b399a4b6703a04ef6eb3efe35ff12163e409e0	rtc class remove unnecessary device_get in rtc_device_unregister technically the address of can never be null so get_device can never fail also caller of rtc_device_unregister supposed to be the owner of the device and thus have a valid reference therefore call to get_device is not needed here
43962dd7ee192299c6e0c6cd7f0a65997308f1f4	rds always free recv frag as we free its ring entry we were still seeing rare occurrences of the which indicates that the recv refill path was finding allocated frags in ring entries that were marked free these were usually followed by oom crashes they only seem to be occurring in the presence of completion errors and connection resets this patch ensures that we free the frag as we mark the ring entry free this should stop the refill path from finding allocated frags in ring entries that were marked free
bf1eb91274157ac521fd6f3712dac8be90bddca7	iio inv_mpu6050 add spi_device_id for inv_mpu6500
d558c5967741e6c551883c58441d29f5440a4ab2	staging comedi gsc_hpdi tidy up freeing of the dma buffers factor the freeing of the dma buffers out of the move the freeing of the buffers so that it occurs after the pci device has been disabled to avoid any race condition
93ceaa303b2946453b925c55dc28a4273520dd18	alsa check correct return value from ioremap_resource
b2cfc90428f1c24ce4920f06b584bd05c62741e6	spi spidev_test fix whitespace
bd6c57dda666868abb222c1fa48e72f81db20e70	btrfs simpilify btrfs_subvol_inherit_props we just need a superblock but we look it up using two different roots depending on the call site lets just use a superblock pointer initialized at the outset this is mostly for coccinelle not to choke on my root push up set
70fa030ffb652ace81dd5bcab01255b49723caec	usb s3c-hsotg avoid txfifo corruption in dma mode writing to txfifo relates only to slave mode and leads to txfifo corruption in dma mode
4dd6a897959aca968c59f0b2bc08c2d855cd553c	check connector status before restoring sdvo this patch fixes a bug introduced by commit date sun apr __number__ __number__ fix hibernation problems on sdvo encoders the bug is triggered when we do a mode set on a sdvo encoder with all connectors in the disconnected state a crtc is considered enabled by drm even though all of its connectors are disconnected work around this by adding a check in our sdvo restore function also remove the unneeded dpms on prepare and commit will take care of that
bbf37ec3a668a983f88b069ec2b7a1781c428eb5	libceph add maybe_move_osd_to_lru and switch to it abstract out __move_osd_to_lru logic from __unregister_request and __unregister_linger_request
5a9f6b238e59bc05afb4cdeaf3672990bf2a5309	bnxt_en enable and disable rx ctag and rx stag vlan acceleration together the hardware can only be set to strip or not strip both the vlan ctag and stag it cannot strip one and not strip the other add logic to bnxt_fix_features to toggle both feature flags when the user is toggling one of them
febd1cc43882733d0030295246cabfe1ded924c2	alsa caiaq fix use of module_supported_devices it looks like module_supported_devices is not implemented yet but still having the entries in the list consistently separated by commas and with balanced parenthesis wont hurt
ed1817036bd6d83829039543c9fe4aa94acc7c39	drm fix a memleak on mutex failure path need to free just allocated ctx allocation if we cannot get our config mutex this one has been flagged by kbuild bot all the way back in august but somehow nobody picked it up in addition there is another failure path that leaks the same ctx reference that is fixed found with smatch
82cce22acd8ec7c75087825f23c053a642e7b672	rtl8xxxu make dma aggregation optional by setting a module parameter let the default to off until we have more data on the right default tuning values
eba843201a8e5824c5e6e539db6cd1a6ba84f145	asoc max98090 remove redundant max98090_handle_pdata max98090_handle_pdata is not doing anything other than printing a message if pdata is not valid this can be removed
dc5943d54092467b7b56ff6adaeb63165f692fa2	mac80211 set rx highest rate in ht_cap set for completeness mostly currently unused in the code
a6d403ac96893cb5c5812c2d75de082795f02e5f	netconsole remove unnecessary from write_msg write_msg grabs target_list_lock and walks target_list invoking netpool_send_udp on each target curiously it protects each iteration with even though it never releases target_list_lock which protects all the members while this doesnt harm anything it doesnt serve any purpose either the items on the list cant go away while target_list_lock is held remove the unnecessary pair
e877b729c649c2850f61f2ae37296ae701f9ad63	usb gadget f_tcm out of bound access in usbg_drop_tpg commit dc8c46a5ae77 usb gadget f_tcm convert to new function interface with backward compatibility introduced a possible out of bounds memory access if tpg is not found in function usbg_drop_tpg tpg_instancestpg_instances is accessed
f46e041a20dd9c3b4fa6f07e3246424aec7f1752	staging vt6655 fix checkpatch warning fix warning for trailing on a separate line remove postfix and prefix from the start and end of block comments
edf3fd4141f17fa81497e7417aba7a45d1a36af9	iio dac ad5686 use apis apis are device managed and make code simpler
dae803e165a11bc88ca8dbc07a11077caf97bbcb	mm alloc_contig_range demote pages busy message from warn to info having test_pages_isolated failure message as a warning confuses users into thinking that it is more serious than it really is in reality if called via cma allocation will be retried so a single test_pages_isolated failure does not prevent allocation from succeeding demote the warning message to an info message and reformat it such that the text failed does not appear and instead a less worrying pfns busy is used this message is trivially reproducible on a x86 machine on kernels configured with config_dma_cma
7303a1475008bee5c3e82a06a282568415690d72	sctp identify chunks that need to be fragmented at ip level previously without gso it was easy to identify it if the chunk didnt fit and there was no data chunk in the packet yet we could fragment at ip level so if there was an auth chunk and we were bundling a big data chunk it would fragment regardless of the size of the auth chunk this also works for the context of pmtu reductions but with gso we cannot distinguish such pmtu events anymore as the packet is allowed to exceed pmtu so we need another check to ensure that the chunk that we are adding actually fits the current pmtu if it doesnt trigger a flush and let it be fragmented at ip level in the next round
14a196807482e6fc74f15fc03176d5c08880588f	net reorganize ip mib values reduce ip latencies by placing hot mib ip fields in a single cache line
ff2bb89335daec6053b5ac778369f7f72b931142	clk sunxi let divs clocks read the base factor clock name from devicetree currently the sunxi clock driver gets the name for the base factor clock of divs clocks from the name field in factors_data this prevents reusing of the factor clock for clocks with same properties but different name this commit makes the divs setup function try to get a name from clock-output-names in the devicetree it also removes the name field where possible and merges the sun4i pll5 and pll6 clocks andre make temporary name allocation dynamic
f8ce20005d1694584448cd544be5fb32416a277c	asoc rockchip fix a misjudgement by return being careless judge the return value of snd_soc_card_jack_new is opposite so it should be fixed
9e224c8ff19e4c4a9c9272171d5a0169d5cb1bef	bus omap_l3_noc switch over to relaxed variants of currently we use __raw_readl and writel in this driver considering there is no specific need for a memory barrier replacing writel with endian-neutral writel_relaxed and replacing __raw_readls with the corresponding endian-neutral readl_relaxed allows us to have a standard set of register operations for the driver while at it simplify address computation using variables for register
189c9b8d925691cc58823ffdc3bf75dc8630ccdf	cpufreq spear clk_round_rate can return a zero upon error treat both negative and zero return values from clk_round_rate as errors this is needed since subsequent patches will convert clk_round_rates return value to be an unsigned type rather than a signed type since some clock sources can generate rates higher than hz eventually when calling clk_round_rate only a return value of zero will be considered a error all other values will be considered valid rates the comparison against values less than __number__ is kept to preserve the correct behavior in the meantime
bea710feff617e3469789dd8f930b284c83a87f5	bluetooth reject an encryption request when the key isnt found now that we have methods to finding keys by its parameters we can reject an encryption request if the key isnt found
a8ea0218625699a5c635655a17b565bab5888ea1	media it913x use to select firmware as recommended by jason at ite the chip version should select firmware however to continue to support it9137 firmware with different configuration the driver will use to select the difference between it9135 and it9137
2b70fe5aba0dd00d81173243c7ab04c66aeb67d8	net sched act_connmark dont zap this action is meant to be passive we should not alter if nfct is present just leave it alone compile tested only
dea120e665712a9be41a6c846e73c6af19e00af7	drop unused eoc_irq
3965ac00204e0ccd89e1e73ead4d2098dc8f7bd1	wireless fix rate mask for scan request the scan request received from cfg80211_connect do not have proper rate mast so the probe request sent on each channel do not have proper the supported rates ie
a1d6de5a9807ae45e5fbd167c8568c0e9fca71f0	staging comedi amplc_dio200 use helpers use the new helpers in the step __number__ tests of dio200_subdev_intr_cmdtest
b3daeaef559d87b974c13a096582c5c70dc11061	move function declarations theyre now in so group them a bit better
0a38fd94c20e6636c22630200a9cece122a89f0e	gpio it87 use gpiochip data pointer this makes the driver use the data pointer added to the gpio_chip to store a pointer to the state container instead of relying on container_of
478375cedcc0ae5b4cadd29ee5f74c3a5cb5d2ad	exceptional on function name in this names are otherwise used as pointers without found using coccinelle identifier f identifier f
679bcea857d72868e3431dde3a0e158bf0ed9119	chop off lower value sparse complains that the cast truncates the high bits but here we really do know what were doing and we need the lower __number__ bits only as the argument so make that explicit link
b66548e2a9baf65ccebeb3750f0ab9ddbef500f6	of increase max_phandle_args arm-smmu driver uses of_parse_phandle_with_args when parsing dt information to determine stream ids for a master device thus the number of stream ids per master device is bound by max_phandle_args to support calxeda ecx-2000 hardware arm-smmu driver requires a slightly higher value for max_phandle_args as this hardware has __number__ stream ids for one master device increasing it to __number__ seems a reasonable choice
b1173e316bf2ff3c11f46247417f0f5789a4ea0c	xen-blkfront remove frame list from blk_shadow we already have the frame pfn of the grant page stored inside struct grant so theres no need to keep an aditional list of mapped frames for a specific request this reduces memory usage in blkfront
2ebf5d0d79087005e1042df2cd0f7594782746d8	mn10300 add missing __iomap markers mn10300s collection lacks __iomem markers fix that
ef66c0ca09595d72f058b11bd7b542b0d95a1350	media add execute flags to write_only controls any control that sets flag_write_only should or it with flag_execute_on_write so we can keep the current meaning of write_only
5b8ffb5565a241c4cfddb15b5a7b2f28ce64dbf7	staging iio cdc prefer using the bit macro this patch replaces bit shifting on __number__ with the bitx macro this was done with coccinelle int g g
0244fd78231db16a9b0e44ac76da6a6208dc5ad4	media cx88 constify mb86a16_config structure declare mb86a16_config structure as const as it is only passed as an argument to the function dvb_attach dvb_attach calls its first argument on the rest of its arguments the first argument of dvb_attach in the changed case is mb86a16_attach and the parameter of this function to which the object reference is passed is of type const so mb86a16_config structures having this property can be made const
2d47fd120d23390fea38c3c7cc5ee05a5b95c49f	sctp only check for ecn if peer is using it currently only read-only checks are performed up to the point on where we check if peer is ecn capable checks which we can avoid otherwise the flag ecn_ce_done is only used to perform this check once per incoming packet and nothing more thus this patch moves the peer check up
49a9a40c1b48d24f0fd9a6b6be8a4038f47d13bf	cpufreq governor name pointer to cpu_dbs_info as cdbs it is called as cdbs at most of the places and cpu_dbs at others lets use cdbs consistently for better readability
c88b5b6a68da1bc4353521bde95246bbc0f85b5e	macb call dev_kfree_skb_any instead of kfree_skb replace kfree_skb with dev_kfree_skb_any in macb_start_xmit that can be called in hard irq and other contexts macb_start_xmit only frees skbs when dropping them so dev_kfree_skb_any is used
4250b5d9a47e8281b964935d5fee6a32d4ccdedb	fix misnamed variable fix misnamed variable to eliminate confusion
f770d78ac159a96071e3c4e4ab97c262e79506d3	halt engines before disabling mc si its better to halt the engines before we disable the mc
e5e97ee956d8c5ed2fc5877d29dee17a6a59de8e	hso fix handling of modem port serial_state notifications the existing serial state notification handling expected older option devices having a hardcoded assumption that the modem port was always usb interface that isnt true for devices from the past few years hso_serial_state_notification is a local cache of a usb communications interface class serial_state notification from the device and the usb cdc specification section __float__ table __number__ class-specific notifications defines windex as the usb interface the event applies to for hso devices this will always be the modem port as the modem port is the only port which is set up to receive them by the driver so instead of always expecting usb interface instead validate the notification with the actual usb interface number of the modem port
3c2bf0bd08123f3497bd3e84bd9088c937b0cb40	staging unisys visorhba fix s-par to boot with option config_vmap_stack set to y the root issue is that we are not allowed to have items on the stack being passed to dma like operations in this case we have a vmcall and an inline completion of scsi command this patch fixes the issue by moving the variables on stack in do_scsi_nolinuxstat to heap memory
6cd33649fa83d97ba7b66f1d871a360e867c5220	pci add pci_configure_device during enumeration some platforms can tell the os how to configure pci devices how to set cache line size error reporting enables etc acpi defines _hpp and _hpx methods for this purpose this configuration was previously done by some of the hotplug drivers using pci_configure_slot but not all hotplug drivers did this and per the spec acpi rev __float__ sec we can also do it for devices not configured by the bios at system boot move this configuration into the pci core by adding pci_configure_device and calling it from pci_device_add so we do this for all devices as we enumerate them this is based on pci_configure_slot which is used by hotplug drivers i omitted pcie_bus_configure_settings because it configures mps and mrrs which requires global knowledge of the fabric and must be done later and configuration of subordinate devices that will happen when we call pci_device_add for those devices because pci_configure_slot was only done by hotplug drivers this initial version of pci_configure_device only configures hot-added devices ignoring anything added during boot
6031a9c5e39121165617951c4dc337fed72c7bd5	mtd nand socrates_nand drop owner assignment owner is automatically set by mtdcore make use of that
acca0c1fb07878e5c9a9318c3de6acbfce78e5bb	staging dgnc space preferred around make suggested checkpatch modification for check spaces preferred around that
1f7e073da5ba4c1b3af8ad0f313e9d3e6447f858	media cx231xx remove v4l2_fl_lock_all_fops add proper locking to the file operations allowing for the removal of the v4l2_fl_lock_all_fops flag
8bd05c98b29fa6889004de13849676f3536f519b	staging comedi ni_at_a2150 usleep_range is preferred over udelay fix the issue check usleep_range is preferred over udelay
3e6b3b95f26e1253cd429cf949b9c41598ba3033	bluetooth small styles clean ups to
2932505abe7c56477315a3d93ffb3c27c5182e9d	btrfs fix use-after-free bug during umount commit be283b2e674a09457d4563729015adb637ce7cc1 btrfs use helper to cleanup tree roots introduced the following bug bug unable to handle kernel null pointer dereference at __number__ ip __address__ btrfs pid __number__ comm btrfs-cache-1 tainted g o innotek gmbh rip __address__ __address__ btrfs process btrfs-cache-1 pid __number__ threadinfo __address__ task __address__ call trace __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ btrfs __address__ __address__ __address__ __address__ rip __address__ btrfs weve freeed commit_root before actually getting to free block groups where caching thread needs valid
98a226ed21949601b270f7ea20abc9f72f7b0be9	alsa hda dont actually write registers for caps overwrites along with the transition to regmap for managing the cached parameter reads the caps overwrite was also moved to regmap cache the cache change itself works but it still tries to write the non-existing verb the hda parameter is read-only wrongly its harmless in most cases but some chips are picky and may result in the codec communication stall this patch avoids it just by adding the missing flag check in reg_write ops
2d9955bedb18a403bde1290607d5c02cd86ae5fe	sfc demote mc scheduler error messages the mc firmware is cooperatively multitasking and its scheduler will send an event when a task yields after running for more than the expected maximum time this can be useful for firmware development but does not usually indicate a serious error and does not help to detect a lockup there is a hardware watchdog that does that change the message and reduce log level accordingly
0ab66e6d28f52677067a905ff2aac3367f8118ee	iwlwifi mvm add wide firmware command support for debug triggers add support for extended command id in triggers handling extended command id header contains group id in addition to command id
fe116788393942eef11d5c0f1cb16b1ef423970d	mwifiex pcie read fromdevice dma-able memory with read_once in mwifiex_delay_for_sleep_cookie were looping and waiting for the pcie endpoint to write a magic value back to memory to signal that it has finished going to sleep were not letting the compiler know that this might change underneath our feet though lets do that for good hygiene im not aware of this fixing any concrete problems i also give no guarantee that this loop is actually correct in any other way but at least this looks like an improvement to me
a05932905695f8c6c06d353ecd52c8e5d607cc77	rbd simplify __rbd_remove_all_snaps this just replaces a while loop with list_for_each_entry_safe in __rbd_remove_all_snaps
939d9f16994166156fa3d6dfece9c46b92e368e0	asoc core fix coccinelle warnings warning assignment of bool to warning assignment of bool to more information about semantic patching is available at
199596ef9184ab2bc0eb43d1af9e0b723ce07840	remove unused msi_enabled_mask no one uses msi_enabled_mask remove the dead code no functional change
350a9b33046ef0d9909f68b87f411f4cf4e286f7	spi clps711x add module_alias to support module auto-loading
52028704126b5597775cc788028385556af1f85c	drivers gpu remove unused function in remove unused function ttm_write_lock_downgrade from this eliminates the following warning in warning no previous prototype for
afe391ad4b05f8f00ca955e165f3b37b480506b7	sh_eth create initial id table we are trying to get away from the current drivers scheme of identifying a soc based on and the platform device id table matching seems to be a good replacement we can use the driver_data field of struct platform_device_id as a pointer to a struct sh_eth_cpu_data start by creating the initial table with drivers name as the only entry without the driver data check the driver data in the probe method and if its not null override from it
13e867f6faaafe4d7fdaa4a894a061d041d0dc88	add an extra check for platforms that do not have huc return silently without producing much noise on platforms that have a huc but the firmware is absent link
43c87f78388443e3bf6c73c05574bfa15b994f0a	net cdc_ncm set correct usbnet use the hard_mtu value for sizing the tx queue and nothing else we will be transmitting buffers of up to tx_max size so thats the proper value to give usbnet the individual datagram size is completely irrelevant here
6c9a8cdad48a04795dbc35ac3370afa3180045ae	avoid lock dropping between rescheduling unlocking is dangerous in this case we combine an early update to the out-of-queue request because we know that it will be inserted into the correct fifo priority-ordered slot when it becomes ready in the future however given sufficient enthusiasm it may become ready as we are continuing to reschedule and so may gazump the fifo if we have since dropped its spinlock the result is that it may be executed too early before its dependencies v2 move all work into the second phase over the topological sort this removes the shortcut on the out-of-rbtree request to ensure that we only adjust its priority after adjusting all of its dependencies testcase link cherry picked from commit a79a524e9260d4ffaff88348615e70fb3d393692
cd46cdedb3238f1f878c42650ec05c6344c7083d	scsi lpfc correct rdp diag portnames nvme merge reverted diag port names to the physical port they should be the vport
39a3d5706527615db2b7d121b64445e79ca1cc1f	drm rcar-du clean up planes in the error paths of when the handler fails clean up planes previoulsy prepared by drm_atomic_helper_prepare_planes with a call to drm_atomic_helper_cleanup_planes
802ac39a55664b15dd162e3444d5be34045abeeb	mmc sdhci-of-arasan fix set_clock when a phy is supported commit mmc sdhci-of-arasan add phy support for sdhci-of-arasan introduce phy support for arasan according to the vendors databook we should make sure the phy is in poweroff status before we configure the clk stuff otherwise it may cause some io sample timing issues from the test and we dont need this extra operation while running in low performance mode since phy doesnt trigger sampling block
e689d6df8257f92abf59e93736632b79c9b2aa66	spi fsl-dspi fix clock rate scale values previous algorithm had an outer loop with the values and an inner loop with and would pick the first value over the required scaling value where the total scale was the two numbers multiplied since the inner loop went up to __number__ it would always pick a value of __number__ for pbr and a much higher than necessary value for br the desired scale factor was being divided by two i believe to compensate for the much higher scale factors the divide by two not specified in the reference manual updated to check all values and find the smallest scale factor possible without going over the desired clock rate
b859203473d5d61260e8447915e22328442deb0b	iser-target remove dead code unmap_list is unused
6450e5091c6dfc12afc164e8225b7677b1b1a422	media msi3101 add debug dump for unknown stream data dump all unknown garbage data maybe we will discover someday if there is something also fix comment in usb frame description
978ffac4189e8bb7e74bce6463e501a7b92555af	net bcmgenet use correct dev_id for free_irq bcmgenet_opens error path call free_irq with a dev_id argument different from the one we used to call request_irq with this will make us trip over the warning in
188bb5e2ce112463428994f91291e5df6fc05521	perf report make max_stack value allow for synthesized callchains perf report has an option to set the maximum stack depth when processing callchains the option defaults to the hard-coded maximum definition perf_max_stack_depth which is __number__ the intention of the option is to allow the user to reduce the processing time by reducing the amount of the callchain that is processed it is also possible when processing instruction traces to synthesize callchains synthesized callchains do not have the kernel size limitation and are whatever size the user requests although validation presently prevents the user requested a value greater that __number__ the default value is __number__ to allow for synthesized callchains make the max_stack value at least the same size as the synthesized callchain size link
a8e415d3eb1bed184d73e22c62cd1f992bd33d63	check for null script pointers in parser allows us to be lazy
b82cf962bc9b13f24df4322e6ba2b781e6a89886	drivers ethernet qlogic fixed a coding style issue throws error message for the current code this patch fixes this coding style issue
c51185b45c43737faca4574d790489a1bd8cfd11	clk ti fapll fix wrong do_div usage do_div is meant to be used with an unsigned dividend
bdb2b933f2622578b8f737ad21504eb83620024a	gem dumb pitch is an output when creating a dumb buffer object using the drm_ioctl_mode_create_dumb ioctl only the width height bpp and flags fields are inputs the caller is not guaranteed to zero out or set handle pitch and size drivers must not treat these values as possible inputs otherwise they may use uninitialized memory during the computation of the framebuffer size the omap driver uses the pitch field passed in by userspace as a minimum and only override it if the driver-computed pitch is larger than what userspace provided to prevent this from causing overallocation fix the minimum pitch to __number__ to enforce the driver-computed pitch
1e2776c3aff1a4c79751b2a7045524fb141c2405	mei fix max number of open handles there was internal confusion in wether bus message clinet __number__ is counted in or not the bitmap me_clients_map that accomodate was initialized it __number__ but later on it the clinet __number__ was reserved thus were able to open only __number__ instead of __number__ clients
9c05babd933e1c4a811867c4d5aa170d788eeaf9	ath9k use one shot read in ath9k_hw_update_mibstats this will reduce some overhead on usb bus
6113af14c82726d5a2993a7ba238df24c990a5ee	add constraint for ivb the ivybridge event can only be measured on counters when ht is off when ht is on you only have counters if you program it on the eight counters for on a ivb laptop running a noploop you see __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ clearly the last __number__ values are bogus link
ff6e75cb20b6423c8947077a377ba318dd1a7554	iwlwifi remove a few dereferences to iwl_priv from the tansport the transport should not dereference the iwl_priv pointer remove a few of those
9c4aef95d2ac1539c71f6637f298da75574776a9	staging comedi ni_pcimio add semicolon to module_comedi_pci_driver add a semi-colon after the macro call module_comedi_pci_driverni_pcimio_driver ni_pcimio_pci_driver it compiles with or without the semicolon but it ought to have it
67492c990300912c717bc95e9f705feb63de2df9	nfsd4 nfsd4_check_resp_size neednt recalculate length were keeping the length updated as we go now so theres no need for the extra calculation here
390e316c606de2f839389698f4531004cfe1bafd	mmc core remove unused mmc_list_to_card macro
5c5f3f0a74740c8f7bca8255741291bb0d2ebe4b	mlx4_core fix xrc qps detection in the resource tracker recognize xrc qps in the sr-iov resource tracker based on transport type the previous check didnt match ib_qpt_xrc_ini and caused an invalid calculation for required mtt pages
90554f2e2d53f80fb6200e277d5a20884531e945	asoc wm_adsp remove duplicate set of
f451e76f896922137f8316cb071ae2cab78091ad	hsi nokia-modem use flags argument of devm_gpiod_get to set direction since gpio add flags argument to functions which appeared in the functions take an additional parameter that allows to specify direction and initial value for output use this to simplify the driver furthermore this is one caller less that stops us making the flags argument to mandatory
0cb52aac4d19510d13410ee4232c0248fabe750e	mwifiex do not set multiport flag for single packet multiport address flag0x1000 should not be set during sdio cmd53 if we have only one packet to
1561880d7b114a65e307d1ac9a0991dc715355b3	perf hists browser left justify column headers looks better and avoids it moving to the end of the screen as the column width changes over time in perf top link
fa4a18e73b21402ed00cfb852d94d169994c5aa3	wil6210 reduce printing convert __number__ often printed messages to dynamic ones
9a8ee983e0b77a8b07d3f20a7627202e5f9a7ba5	implement get_hw_state
a7250db36308424ae040f1b2eeb5bfd0cbee0b0d	usb gadget enlarge maxburst bit width for super speed bulk transfer the max burst size is __number__ so that __number__ bits of maxburst cannot store it
913015c6df9a18ad27365afed6f409c024002aab	thermal rcar change type of ctemp in rcar_thermal_update_temp since the ctemp is used for rcar_thermal_write in rcar_thermal_update_temp the type of ctemp should be u32 instead of int this patch also changes type of the helper variables old and new
b9b06cb6fedab10665a2d527464b45f332d17465	fix missing in verbs drain callback the iowait_sdma_drained callback lacked locking to protect the qp s_flags field this causes the s_flags to be out of sync on multiple cpus potentially corrupting the s_flags
d56ba3205fe2e61264ef41f29cd90a666df032e4	usb gadget ci13xxx_pci add pci ids add pci ids for chipidea udc as found in socs
6c131d0c583cd5ceb2b497ae2dbeeae180d3573d	drop unnecessary usage with transport_generic_free_cmd this patch changes vhost_scsi_free_cmd to call transport_generic_free_cmd with in order to avoid the extra access for the case this is unnecessary because vhost_scsi_free_cmd is only ever called by vhost_scsi_complete_cmd_work after tcm completion handoff and by vhost_scsi_handle_vq exception code before tcm submission handoff so there is never a case where se_cmd is still active from tcms perspective when transport_generic_free_cmd is called
0de709acbc0d0001dc4b0953aebcfb0f030b9b0e	net use device_get_mac_address replace the dt-specific of_get_mac_address function with device_get_mac_address which works on both dt and acpi platforms this change makes it easier to add acpi support
c58b735fc762e891481e92af7124b85cb0a51fce	allocate rings from stolen if we have stolen available make use of it for ringbuffer allocation previously this was restricted to platforms as writing to stolen requires a ggtt mapping but now that we have partial mappable support the mappable aperture isnt quite so precious so we can use it more freely and ringbuffers are a good user for the otherwise wasted stolen
4c243e25739252ce08718f519a2d567fd1d91ff0	prevent bogus intel_update_fbc notifications this pollutes dmesg output even if we do not have fbc for the device so move the drm_debug_kms statement lower v2 just kill the message as suggested by daniel
8402752ecf829f67527072151fa680292a519193	namei simplify the callers of follow_managed now that it gets nameidata no reason to have setting lookup_jumped on mountpoint crossing and calling path_put_conditional on failures done in every caller
196449de0c886e64b48d01bd7ee153656db92884	arm omap4 register the opp table only for __number__ device the __number__ opp table was being registered for all other omap4 variants too like __number__ and __number__ causing issues with cpufreq driver enabled __number__ and __number__ devices have different opps as compared to __number__ and they should be populated seperately as long as that happens let the opp table registeration happen only on __number__ device
5e48a4cd2ee916a98fbc36c944b21a7c935cf4f4	bcma use helper function to set core devs parent a tiny code deduplication thanks to the bcma_bus_get_host_dev
c8e15130e1636f68d5165aa2605b8e9cba0f644c	ext4 simplify calculation of blocks to free on error in ext4_ext_map_blocks if we have successfully allocated the data blocks but then run into trouble inserting the extent into the extent tree most likely due to an enospc condition determine the arguments to ext4_free_blocks in a simpler way which is easier to prove to be correct
baa5567c18d17843815d1d9150424d31f238e363	arm64 kernel numa fix acpi boot cpu numa node mapping commit remove the limitation that cpu0 must bind to node0 removed the numa mapping restriction whereby logical cpu __number__ always corresponds to numa node __number__ removing the restriction was correct in that it does not really exist in practice but the commit only updated the early mapping of logical cpu __number__ to its real numa node for the dt boot path missing the acpi one leading to boot failures on acpi systems owing to missing map for logical cpu __number__ fix the issue by updating the acpi boot path with code that carries out the early mapping also for the boot cpu ie cpu __number__ mirroring what is currently done in the dt boot path
112fe8e290d9b1c8651de6c7d010041f0ff44b6d	usb dwc2 add function to calculate correct fifo sizes the dwc2 ip on the socfpga cannot use the default hw configured fifo sizes the total fifo depth as read from ghwcfg3 reports or __number__ words but the grxfsiz gnptxfsiz and hptxfsiz register defaults to or __number__ words so the driver cannot just use the fifo sizes as read from those registers for platforms that face the same issue this commits sets the rx periodic tx and non-periodic tx fifo size to those that are recommended spec for the dwc2 ip implements method from the synopsys spec for the dwc2
eb10790f180cfb21c3979cc9c4abfe2cc9590ad9	media i2c adv7604 use cec_get_drvdata use helper function to get driver private data from cec adapter
ee5f750f1c9d675028ecedc5439b7171f6647cb8	ntb add missing setup of translation window the perf tool is missing the setup of translation window adding call to setup the translation window for backed memory
ef9f0a83d68cecca241ee5d61b797d598722772e	move bo_reserve out of amdgpu_vm_clear_bo change-id ifbb0c06680494bfa04d0be5e5941d31ae2e5ef28
2f2dafe77df2c78e189a9fa6b1879dffd06ae5a1	serial printk replacement printk replaced with corresponding fixed two broken user-visible strings used by the corresponding printk the null check for and is removed as will check for null while printing printing of and also removed as those are being printed by
81d0c31d11846f282f08ff81219ff6b7230a78b1	gpio pxa use gpiochip data pointer this makes the driver use the data pointer added to the gpio_chip to store a pointer to the state container instead of relying on container_of
3340808cf04faad7b87d6c6e13800825e5552b51	debugobjects fill_pool returns void now there was a return missed in debugobjects remove unused return value from fill_pool it makes gcc complain in function warning with a value in function returning void enabled by default link
202ff1c26c768efeead20b388556eda265dc8352	tg3 fix advertisement handling commit net add ethtool to mii advertisment conversion helpers added a helper function ethtool_adv_to_mii_100bt and tg3_copper_is_advertising_all tg3_phy_autoneg_cfg were modified to use this before that commit ethtool to mii advertisement conversion was done wrt speed but now pause operation is also taken account so in tg3_copper_is_advertising_all below condition becomes true and this makes link up fails if adv_reg advertise_all all_mask return __number__ to fix this add advertise_all bit and operation to cap speed and change default advertisement not including advertised_pause
69611ac810af8e88eeb5ebd851589a0e8cc90860	btrfs fix unzeroed members in fs_devices when creating a fs from seed fs we forgot to zero some members in fs_devices when we create new fs_devices from the one of the seed fs it would cause the problem that we got wrong chunk profile when allocating chunks fix it
831d316b8b80b68dcdd2b3f5ede6d33c2bbf5835	mtd nandsim remove autoincrement code the nand layer always has nand_no_autoincr set so we will never utilize the autoincr code in nandsim we will be removing the nand_no_autoincr option soon and so kill this code as well
6e137ed3f30574f314733d4b7a86ea6523232b14	btrfs fix space accounting for unlink and rename we are way over-reserving for unlink and rename rename is just some random huge number and unlink accounts for tree log operations that dont actually happen during unlink not to mention the tree log doesnt take from the trans block rsv anyway so its completely useless thanks
2587dc65e1b70617a1a369b26eb824ab1af1b9df	ia64 use setup_timer use the timer api function setup_timer instead of structure field assignments to initialize a timer a simplified version of the coccinelle semantic patch that performs this transformation is as follows expression e1 e2 a a when a e2 a
6dbd80a919db24f5a1c66460838bb10ebe188d21	dmaengine dw use dw_dmac autoconfiguration in pci driver instead of hardconding a platform data for dw_dmac lets use its own autoconfiguration feature thus remove hardcoded values
ac34b861979ec5057d686c890b1b8f8661e9b99f	netfilter nf_tables decrement chain use counter when replacing rules thus the chain use counter remains with the same value after the rule replacement
79c9046ec52b5aaa9f055e3d928d676dd37a6f9d	usb dwc3 gadget correct missed isoc when endpoint is busy when missed_isoc is set busy is also set since we are handling missed_isoc as a separate case in third scenario therefore handle only busy but not missed_isoc in second scenario
cac27cff066cf86c6fefe33d99d935e9d0d9c78c	asoc wm5102 enable dvfs support for the dsp
581ab1fe520b05447b4869fb7e3136c3a600abad	unwind conversion to i915_gem_phys_ops on failure the physical object is treated as permanently pinned if we fail to take this initial pin during i915_gem_object_attach_phys we need to revert it back to an ordinary shmemfs object before reporting the failure v2 git-add
e7b1269db01bc8c795c19381b69d7524bb31ef99	drivers staging rtl8188eu core rtw_security fix misspelled word this patch fixes the warning warning halfs may be misspelled perhaps
a71bf90facfdbb7322acd84c1299d68755ba5dfe	mwifiex use is_broadcast_ether_addr instead of memcmp using is_broadcast_ether_addr instead of directly use memcmp to determine if the ethernet address is broadcast address
3872baf6186388b6ed977fcf9620f2a1c0a33235	tun put correct method name in a debug message this patch puts the correct method name tun_do_read in a debug message
01bdab667e3e4cfd72d664e223fcc964bb3564f9	move to the original info_mask is going away in favour of the broken out versions
32fa270c8a3939a9c6cbcf8bc18a0db83a3b40d4	revert bridge fix incorrect variable assignment on error path in br_sysfs_addbr this reverts commit c862cc9b70526a71d07e7bd86d9b61d1c792cead patch lacks a real-name signed-off-by
b83e60c000d6e6fbc602cfbf6788e65f1e2c0c7e	asoc clean up some coding style nits in the bf5xx-i2s-pcm driver
29de2337f9816865c8ac1894fdb16aacefe6c9ed	media s5p-csis change regulator supply names rename the regulator supply names to more meaningful ones its a prerequisite for adding device tree support
bd9c1b60050e2b7ef6507d8eaa5279afc043e06e	pwm mxs set pwm_chip can_sleep flag the calls clk_get_rate which might sleep so we need to set pwm_chip can_sleep flag otherwise we see the following warning when using pwm driven heartbeat led warning cpu __number__ pid __number__ at debug_locks_warn_onin_interrupt modules linked in cpu __number__ pid __number__ comm swapper not tainted unwind_backtrace from show_stack from warn_slowpath_common from warn_slowpath_fmt from mutex_trylock from clk_prepare_lock from clk_get_rate from mxs_pwm_config from pwm_config from __led_pwm_set from led_heartbeat_function from call_timer_fn from run_timer_softirq from __do_softirq from irq_exit from handle_irq from __irq_svc from arch_cpu_idle from cpu_startup_entry from
df6e23ae62d46a524ba3db95a201904a01419bdc	use irq_desc_get_xxx to avoid redundant lookup of irq_desc use irq_desc_get_xxx to avoid redundant lookup of irq_desc while we already have a pointer to corresponding irq_desc link
357630668a638418d542d0e331c90c01a091a3f1	tg3 fix inconsistent locking for tg3_netif_start every caller holds when calling tg3_netif_start except tg3_io_resume fix it so that it is all consistent the subsequent ptp patches add tg3_ptp_resume to tg3_netif_start and the is required
8e0948080670f6330229718b15a6a1a011d441ce	bcache fix typo in bch_bkey_equal_header
d816ab26f6637282feb8a93c9def9925883ba0a7	ath5k annotate reg in ath5k_hw_nic_reset as __iomem
f524ab7c070b39f4c8bd76fede6cacd17057ebc3	drm omapdrm add lock for fb pinning before atomic modesetting omap_framebuffer_pin and omap_framebuffer_unpin were always called with modesetting locks taken with atomic modesetting support this is no longer the case and we need locking to protect the pin_count and the paddr as multiple threads may pin the same fb concurrently this patch adds a mutex to struct omap_framebuffer and uses it in omap_framebuffer_pin and omap_framebuffer_unpin
224786779d04bbcd5f61eaafc86bf8fee350388a	mips init new mmu_context for each possible cpu to avoid memory corruption currently init_new_context only for each online cpu this may cause memory corruption when cpu hotplug and fork happens at the same time to avoid this we make init_new_context cover each possible cpu scenario __number__ is being offline __number__ on do_fork call dup_mm and copy a mm_struct to the child __number__ on dup_mm call init_new_context since is offline and init_new_context only covers the online cpus child has the same asid as its parent on however childs asid should be __number__ __number__ is being online __number__ now if both parent and child run on memory corruption segfault bus error etc will occur patchwork
e036c2006c77c750d0f553e1b484b029e231d7ee	remove intermediate var in hfi1_user_sdma_alloc_queues pass a product for a call of the function vmalloc_user without storing it in an intermediate variable delete the local variable memsize which became unnecessary with this refactoring
8fcff5f13773aa3898df1d13a1615d468079cb15	gpio mvebu-gpio dont initialize the mask_cache due to the smp nature of some of the chips which have per cpu registers the driver does not use the generic irq_gc_mask_set_bit irq_gc_mask_clr_bit functions which only support a single register the driver has its own implementation of these functions which can pick the correct register depending on the cpu being used the functions do however use the value the call to irq_setup_generic_chip was passing irq_gc_init_mask_cache which caused the to be initialized to the contents of some random register this resulted in unexpected interrupts been delivered from random gpio lines
90c604b2246b8135f27bdd5c0cc98fc881ecd12c	staging wilc1000 remove unused defines the macros are not used anywhere in this driver so just delete it
6c3725332de55c0b668fe6c92fa45dcf8bf00fb9	media si2157 print chip version print chip version once using log level into when init is called remove state printing as those are not very useful
762f7cc94bc5c5c8c54f9d0073a07a275b106d89	fbdev sh_mobile_meram dont inline everything let the compiler decide which complex functions to inline and constify constant static arrays
aca15f81fffb71e5df8fd72e76ef5f1a3128bd11	iwlwifi fix endianity issue in debug prints is __le16 need to translate to cpu endianity
9336fe9104120688dc61fdc3d74a123c49ff5ea2	mfd ipaq-micro fix coding style reported by checkpatch this is part of an effort to clean-up the mfd subsystem error space required before the open parenthesis warning unnecessary whitespace before a quoted newline key message ignored no handle warning unnecessary whitespace before a quoted newline touchscreen message ignored no handle warning space prohibited before semicolon ch __number__ total __number__ errors __number__ warnings __number__ lines checked
f631c44bbe1581d18d0aba628b3802d0eacb6373	ipvlan always set broadcast bit in multicast filter earlier tricks of setting broadcast bit only when ipv4 address is added onto interface are not good enough especially when autoconf comes in play setting them on always is performance drag but now that multicast broadcast is not processed in fast-path enabling broadcast will let autoconf work correctly without affecting performance characteristics of the device
1aed28f94ce6c1f6c24bcbbd5fcd749b55f65e9e	arm64 vdso add __init section marker to alloc_vectors_page it is not needed after booting this patch moves the alloc_vectors_page function to the __init section
8e5f5018e80f14119ae54f68cdf1deae43ff9c86	extcon fix typos in extcon-arizona
c04fa5831d4d89dfbc88406f4a46f9846841a560	pc kvm cma fix regression caused by wrong get_order use fc95ca7284bc54953165cba76c3228bd2cdb9591 claims that there is no functional change but this is not true as it calls get_order which takes bytes where it should have called order_base_2 and the kernel stops on vm_bug_on this replaces get_order with order_base_2 round-up version of ilog2
335b9efa7265d56890cc8ed3bafd78c86c33e664	staging rtl8712 add space around add space around operator problem found using check spaces preferred around that
fe5aa34d6eb9c4d34071845f70f3714b41c8a77d	pwm sysfs get return value from pwm_apply_state this patch adds to check the return value from pwm_apply_state used in enable_store the error of enable_store doesnt work if the return value doesnt received
68a57fa93a9f7776ab502db389469dd1ac6a1c66	media omap3isp create links after all subdevs have been bound the omap3isp driver parses the graph endpoints to know how many subdevices needs to be registered async and register notifiers callbacks for to know when these are bound and when the async registrations are completed currently the entities pad are linked with the correct isp input interface when the subdevs are bound but it happens before entitities are registered with the media device so that wont work now that the entity links list is initialized on device registration so instead creating the pad links when the subdevice is bound create them on the complete callback once all the subdevices have been bound but only try to create for the ones that have a bus configuration set during bound
d955e71b506fcef3e9407af7fdecf973a4ffbc72	gma500 mark framebuffer pages write combining we dont want them uncached combining will do nicely and fixes the performance problem with the generic modesetting x server
a8715b97d63718fc5c4daebc465407c259aea265	correct error calldown locking the resource specific wait locking missed correcting the lock for the notify_error_qp calldown the code is fixed to correctly use the iowait lock field to protect the head that is protected by that lock
ac0488ef59a54e42ad744ae1a91fafbcb2566a06	nfp disable fw on reconfiguration errors since we no longer need to keep the fw enabled for to work we can always stop fw after reconfiguration failure this seems to make most fws more resilient to faults at least in error injection scenarios
9854a1b5c46573d06b7b053aa78213b7a22bfacf	replace mlock with driver private lock the iio subsystem is redefining iio_dev mlock to be used by iio core only for protecting device operating mode changes in driver ad7746 wherever mlock was used to protect hardware state changes it has been replaced with a driver private lock
3ba5acf368ae415cd14d026b7cfe29de942b65fc	arm sa11x0 use void __iomem in mmio accessors mmio accessors such as readl and writel want a void __iomem for the address update the bse nanoengine pci driver to pass such pointers instead of unsigned long in preparation to converting arm to use generic and more rigidly typed accessors
c0e7a5000d4da3d64b2eeabfb7e9f327626f6ade	isdn convert obsolete cputime type to nsecs not sure if misdn stats are abi but it displays task cputime in cputime_t raw value regardless of what type cputime_t wraps which could be either jiffies nsecs usecs or whatever random time unit plus it wrongly assumes that cputime_t is long given that this dump is broken anyway lets just display the nanosec value and stick with that link
f91b29f5b8709a3968ce0e155cfeab2bc6f733dd	net stmmac use dev_get_platdata use the wrapper function for retrieving the platform data instead of accessing directly this is a cosmetic change to make the code simpler and enhance the readability
6b20f40679108e3c04e9bdb3d719e364ec29289e	tools iio set callers ci_array pointer to null after free on error callers ci_array is freed and set to null to avoid potential double free if some other user of this code is not sufficiently careful counter is reset to zero for consistency
3cf357dfb40b4a594a704f05b629cb5db97cc7fb	i2c qup disable clks and return instead of just returning error this fixes a error handling scenario where clocks were not being disabled when qup_output_block_size returns a size greater than the size of blk_sizes array so this patch adds a statement to jump to the fail lable to release the clocks
7f340a26f4769a49fb51bfc023ca651dfe16042e	move get_pages to gem_create vgem doesnt have a shrinker or anything like that and drops backing storage only at object_free time theres no use in trying to be clever and allocating backing storage delayed it only causes trouble by requiring locking instead grab pages when we allocate the object right away v2 fix compiling
9789037695018e25902469ea0e540c07580b940f	do not transfer registers in mode_set_nofb do not schedule a transfer of mode settings early modes should get applied on on crtc enable where we also enable the pixel clock
c14a82c781f8df50c4c5215ab92affdc60d72c01	asoc intel skylake fix memory leak if snd_soc_tplg_component_load fails we just printed an error message and returned the error code but we missed releasing the firmware
55c37c0d6c9f447b2d42d0505471e8edcf283d5f	staging cx25821 change indent with spaces to tabs __number__ change indent with spaces to tabs
8ddfe4108e0a160f078adc96827e3809beb4d451	i2c improve error messages in i2c_register_adapter switch to warn if no adapter name is given otherwise we wont know who missed to do that add error message if device registration fails update error message for missing algo to match style of the others
f38c46021aaa0871a96bd922ccbcc9d61c4ae49e	usb opticon remove redundant bulk urb fill the private bulk in urb is set up at open and does not need to be reinitialised at every resubmit
251c617c75f48e03523c43c4ce1dff44bc3ae2bd	rcu make expedited rcu-preempt stall warnings count accurately currently synchronize_sched_expedited_wait simply sets the ndetected variable to the rcu_print_task_exp_stall return value this means that if the last rcu_node structure has no stalled tasks record of any stalled tasks in previous rcu_node structures is lost which can in turn result in failure to dump out the blocking rcu_node structures or could had the test been correct this commit therefore adds the return value of rcu_print_task_exp_stall to ndetected and corrects the later test for ndetected
89e0ec9f5e27a8c5b5954290bef703dc6aac44f3	fix mem leak in atombios
0a8a9ac9ca24536416eea3b94a7d83f31676adc9	i82875p_edac convert driver to use the new edac abi the legacy edac abi is going to be removed port the driver to use and benefit from the new api functionality
cc3750883c161b595be02bf235bd38747a68f0d7	staging comedi mite use pci_ioremap_bar use pci_ioremap_bar to ioremap the pci resources that function just takes the pci device and a bar number it also has some additional sanity checks to make sure the bar is actually a memory resource this also makes sure that the entire pci bar is ioremaped instead of assuming the size of a bar for aesthetic reasons dont set the private data phys_addr vars until after the ioremap is successful
390a1512e6ccda2ec32ea1395814f36cf4d30e48	alsa firewire-lib code cleanup for outgoing packet handling in previous commit this module has no need to reuse parameters of incoming packets for outgoing packets anymore this commit arranges some needless codes for outgoing packet processing
231d1a014aeb8c2288316572f2fe876c5145b91c	media smiapp always initialise the sensor in probe initialise the sensor in probe the reason why it wasnt previously done in case of platform data was that the probe of the driver that provided the clock through the set_xclk callback would need to finish before the probe function of the smiapp driver the set_xclk callback no longer exists
3d9667a9e1e463c107cb47a810ef7e85d9a31e62	i40e add missing braces to i40e_dcb_need_reconfig indentation mismatch spotted with coverity introduced in i40e add dcb and dcbnl support
8383b8c4a9b81ad5fa446a9b4c9bd5ac4b382c2a	staging comedi das16 clarify __number__ timer programming refactor the __number__ timer programming to use the i8254_set_mode and i8254_write helpers instead of i8254_load this allows us to use the defines to clarify the code
2cdf4ed184d4a340b91e362892eb67effe17ef75	pci mvebu report full node name when reporting a dt error if we have a missing required property report the full node name rather than a vague pcie dt node statement this allows the exact node in error to be identified immediately
bef74ba884be09144f13b7132c060c2e5b0ec415	staging comedi das16m1 clarify __number__ timer programming refactor the __number__ timer programming to use the i8254_set_mode and i8254_write helpers instead of i8254_load this allows us to use the defines to clarify the code
1d88f831d20c10b5633cd71117917cd04a0735a8	media tc358743 dont use variable length array for i2c writes warning variable length array is used as the maximum size is __number__ we cant use dynamic var as it would otherwise spend __number__ bytes of the stack at i2c_wr function so allocate a buffer with the allowed maximum size together with the state var
ef3adc187ca6418a376774ebf55d1258d1dc2c31	arm imx6q add gpr6 and gpr7 register definitions for iomuxc gpr masks for ipu axi transaction qos settings
9fe789f88ae5488d8b8af1c4c962e619ed05bb2e	acpi_power_meter drop meter_rw_attrs use common meter_attrs we always register these two together so move meter_rw_attrs into meter_ro_attrs and use the same for both since we no longer have two register_attr paths
4a467a438aaedd0a7f7358875c1c047161dc6dde	staging bcm fix checkpatch error assignment in if condition clean up checkpatch errors and bclassificationsucceed is set to true proper location if protocal is not tcp or udp when it checks protocal bclassificationsucceed must be set to true also the end of do-while0 loop bclassificationsucceed is set to true
9b558950bb652a85861fef28172e134c367dab1a	regulator max1586 convert max1586_v3_ops to set_voltage_sel and map_voltage_linear
13a097bd35a15bbec00479adfb2ef5360e8eabef	fec check the return value from clk_prepare_enable clk_prepare_enable may fail so lets check its return value and propagate it in the case of error
e6fb1fc1085e5b5155bc8f3d3385c48b8bdde95e	rcuperf do not wake up shutdown wait queue if shutdown is false after finishing its tests rcuperf tries to wake up shutdown_wq even if shutdown param is set to false resulting in a wake_up call on an unitialized wait_queue_head_t which leads to bug spinlock bad magic and bug unable to handle kernel null pointer dereference fix by checking shutdown param before waking up the queue
39bf86092b477f56f5cfdbf0a0475aed3731ee32	use logical and in exynos_drm_plane_check_size the current bitwise and should result in the same assembler but this is what the code is actually supposed to do link
a4253fde53fda56c2116a1cf8df9c93ef272eab4	scsi_dh_alua simplify alua_initialize rework alua_check_vpd to use scsi_vpd_get_tpg and move the port group selection into the function too with that we can simplify alua_initialize to just call alua_check_tpgs and alua_check_vpd
3928c64bba20f15d8bb9763158d3edfb982c3425	staging vt6656 dead code remove variables device_set_options
580dccd974cb28a5fdf9b2f90efd8fb930334e3a	staging wlags49_h2 fixes spacing around parentheses this commit cleans up the spacing around parentheses
dfaa200445ad3494a02581db6bf7ddeead948160	convert wait_fori915_readreg to intel_wait_for_register by using the out-of-line intel_wait_for_register not only do we can efficiency from using the hybrid wait_for contained within but we avoid code bloat from the numerous inlined loops in total all patches text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__
27174cff8fcfcb3a60a3e7225cc627f6a4b7f827	hid i2c-hid fix memory corruption due to missing hid declaration hid descriptors contains __number__ bytes of reserved field the previous implementation was overriding the next fields in struct i2c_hid
93a37955bcc0ce1b261d4e9dc280a90e416ca9e1	staging comedi pcl812 remove subdevice pointer math convert the comedi_subdevice access from pointer math to array access
993dc992f2e415adf9ddc69476ebaefda6af1043	greybus gpio add runtime_pm suppourt add runtime pm support for the gpio driver since there is no remote wakeup support the module will not suspend as long as a gpio is requested maybe an optimization could be made to allow suspend if all the requested gpios are in output mode since the bridge should maintain the state of the gpio during suspend testing done using the test board let the gpbrige enter standby and request a gpio
75b00af77ed5b5a3d55549f9e0c33f3969b9330c	mm trivial cleanups in utter trivia in mostly just reducing the linecount slightly most exciting change being get_scan_count calling vmscan_swappiness once instead of twice
c38071c0ca00562f3008726c8f802797ad561fa7	asoc fix warning in wm1250-ev1 driver
c64fb5c7448c1a0cfa163f126df3c112b6ca3e97	filemap remove pos variables in generic_file_read_iter just use ki_pos directly to make everyones life easier
89e4042861772a89fc54ce517255c3a38ba58ac1	bluetooth fix module refcount this patch removes the additional module_put in disconnect_all_peers making a correct module refcount so that the module can be removed after disabling through debugfs
0e8743611a76ced8b0971b6894f982ce89624cc4	ravb add fallback compatibility strings add fallback compatibility strings for r-car gen __number__ __number__ soc families this is in keeping with the fallback scheme being adopted wherever appropriate for drivers for renesas socs
8680451f38a64bd270233b3c0eeb7c45f2b5efe3	mac80211 add encrypt headroom to perr frames mesh perr action frames are robust and thus may be encrypted so add proper to allow this fixes this warning when operating a mesh sta on ath5k warning at mac80211 call trace mac80211 mac80211 mac80211 mac80211 mac80211
e0045ebf3be4a7461a42b7f87c1c094ac7e4db78	spi dw-pci use dev_info instead of printk change raw printk call to dev_info to provide a better message to userspace so it can properly identify the device
ed7a3a9d8f507a18ce80d942d5880fed30de4a38	usb gadget fsl_udc_core should not call gadget drivers it has already been covered by udc core
89cfdb19a88872088a8cf69621e55d41c379f02f	arm dma-mapping use to_dma_iommu_mapping instead of accessing archdata when using the iommu-backed dma ops for a device we store a pointer to the dma_iommu_mapping structure used to keep track of the address space in the field of the struct device rather than access this field directly use the to_dma_iommu_mapping helper in dma-mapping so that we dont really care where the mapping information is held
74ddd8c40d8ac747ec780be3da40b37641a9b396	asoc davinci-mcasp fix bit clock polarity settings ib_nf nb_if and ib_if configured the bc polarity incorrectly the receive polarity was set to the same edge as the tx in these cases
274f5b041d3c9c0974a7dd1f66b67c33bb5b0f42	dont bother with nested make sure that directory is locked shared in dcache_dir_lseek for dcache_readdir its already tru and thats enough to make simple_positive stable
69819f527afba7a909a2aba32521a3bea8e3b60b	asoc rsnd remove unused rsnd_dma_to_ssi macro rsnd_dma_to_ssi is no longer used lets remove it
b8c6cd1d316f3b01ae578d8e29179f6396c0eaa2	net dsa bcm_sf2 do not use indirect reads and writes for contains an eco which disconnected the internal sf2 pseudo-phy which was known to conflict with the external pseudo-phy of bcm53125 switches this motivated the need to utilize the internal sf2 mdio controller via indirect register to control external broadcom switches due to this address conflict both responded at address for the internal pseudo-phy of the sf2 switch got disconnected and as a consequence this prevents the internal sf2 mdio bus controller from reading data reads back everything as __number__ since the mdi line is tied low fix this by making the indirect register reads and writes conditional to on we can utilize the switch_mdio controller backed by mdio-unimac and not the dsa created slave mii bus we utilize of_machine_is_compatible here since this is the only way for use to differentiate between these two chips in a way that does not violate layers or becomes too vendor-specific
06a20d2d2d4187b9bc1a4c2f62e989a97a086a76	fix pll divider for mipi video mode mipi video mode for high res panels requiring dual link need a divider to be programmed as modifying the same in this patch link
20fc5afc32a642104d23efc2d00141fe3d1a2661	staging rtl8192e fix sparse warning for static declarations in this patch fixes the following sparse warnings in warning symbol rtllib_crypto_wep_init was not declared should it be warning symbol rtllib_crypto_wep_exit was not declared should it be
8e92f2acac918d36ef4aa591f55ba0589edf634d	libertas_usb use usb interface as parent device currently udevadm info doesnt mention the usb8xxx or libertas driver anywhere this makes writing udev rules a bit uncomfortable using the usb interface as the parent device corrects the hierarchy
ed9a84262a83ab0260325c2f5eae39e441003d55	drm tda998x protect the page register as the hdmi registers of the tda998x chips are accessed by pages the page register must be protected
9043ae020506808b3d2552eace047d3083688512	re-order the pcu opcodes lets keep that list sorted
e9f0cd94c1697ad6c98422a1953105c8ffc515f3	net w5100 remove unused is_w5200 the is_w5200 function is not used anymore by the commit which adds the w5500 support
953d22e870e2f15963976c77985b263afcceafc9	use sizeof for memset instead of magic value
cf0681ca4cc5c9faa85a2df4c063b926fc09c977	arm l2c add support for overriding prefetch settings firmware on certain boards odroid-u3 can leave incorrect l2c prefetch settings configured in registers leading to crashes if l2c is enabled without overriding them this patch introduces bindings to enable prefetch settings to be specified from dt and necessary support in the driver mszyprow rebased onto added error message when prefetch related dt property has been provided without any value
330fb10df832b0008892964601d9d142c14a906f	alsa mixart remove unused variable err is not used in the function remove it
e10c19a83c223777d5b302c683fdbad9cc57ff53	staging comedi amplc_pci230 tidy up irq request clean up the irq request in the attach of this driver and remove the noise
93e13a360ba331915220f82f6e9543df961ffa1f	kdump fix race in panic when two cpus call panic at the same time there is a possible race condition that can stop kdump the first cpu calls crash_kexec and the second cpu calls smp_send_stop in panic before crash_kexec finished on the first cpu so the second cpu stops the first cpu and therefore kdump fails cpu do kdump cpu already held by cpu stop cpu stop kdump this patch fixes the problem by introducing a spinlock in panic that allows only one cpu to process crash_kexec and the subsequent panic code all other cpus call the weak function panic_smp_self_stop that stops the cpu itself this function can be overloaded by architecture code for example tile can use their lower-power nap instruction for that
0bcc0eab363aa80f79769324bf3f2ab7781840f2	reset trivial add line break at same place for similar apis standardise the way inline functions devm_reset_control_get_shared_by_index devm_reset_control_get_exclusive_by_index are formatted
616503d1d8940049841e5b6f2ab5157f37072ed9	improve locking during cmbe allocation during allocation of extended measurement blocks we check if the device is already active for channel measurement and add the device to a list of devices with active channel measurement the check is done under ccwlock protection and the list modification is guarded by a different lock to guarantee that both states are in sync make sure that both locks are held during the allocation process like its already done for the normal measurement block allocation
4c28e32d6c4da1d2bc92d3062690e770c18493e6	alsa compress_core update calc_avail to use cumulative values the app_pointer is managed locally by the compress core for memory mapped dsps but for dsps that are not memory mapped this would have to be manually updated from within the dsp driver itself which is hardly very idiomatic this patch switches to using the cumulative values to calculate the available buffer space because these are already gracefully passed out of the dsp driver to the compress core and otherwise should be functionally equivalent
51a4731133410a63bcc833068dba4a0e2ec1fcea	staging rts5208 drop void pointer cast void pointers need not be cast to other pointer types semantic patch used expression x void type t identifier f t t t e
68893e0051419ccdc14fd6eafcdecc96533c6cc3	mips correct mips16 break code interpretation correct the interpretation of the immediate mips16 break instruction code embedded in the instruction word across bits rather than as current code implies fixing the interpretation of integer overflow and divide by zero traps patchwork
c0b0ba848697b12b7e7372230e4eadc9f366832f	sparc32 fix sparse warnings in fix following warnings warning symbol arch_cpu_pre_starting was not declared should it be warning symbol arch_cpu_pre_online was not declared should it be warning symbol sparc_start_secondary was not declared should it be add missing static definition this left one warning warning symbol setup_profiling_timer was not declared this is a global symbol that has no declaration in any global header
6ed1485f65f0eb17aa7b649d5abe0b011b92f718	kvm ppc book3s pr dont keep scanning hpteg after we find a match the loop in kvmppc_mmu_book3s_64_xlate that looks up a translation in the guest hashed page table hpt keeps going if it finds an hpte that matches but doesnt allow access this is incorrect it is different from what the hardware does and there should never be more than one matching hpte anyway this fixes it to stop when any matching hpte is found
4ce4780270b69a0f4ce81887c2ef864c04cb7f9f	pm qos rename local variable in dev_pm_qos_add_ancestor_request local variable error in dev_pm_qos_add_ancestor_request need not contain error codes only so rename it to ret
5dbe135a153837ce9367bdfacf7aabfc6fb76f4b	usb gadget epautoconf remove ep and desc configuration from ep_matches as function ep_matches is used to match endpoint with usb descriptor its highly unintuitive that it modifies endpoint and descriptor structures fields this patch moves code configuring ep and desc from ep_matches to usb_ep_autoconfig_ss so now function ep_matches does nothing more than its name suggests
a0c98523d7d71e0276f3cb127bc0c6d4fc85907a	qeth change default standard blkt settings for osa blkt settings or lan idle settings for an osa express card determine when and how often an osa express card tells the operating system about new incoming packets the semantic of these settings has changed starting with osa express3 currently the qeth standard settings apply to osa express2 and older generations of osa express cards while new generations of osa express cards require extra coding of their reasonable default to cover future osa express generations the qeth default standard blkt setting is now the desired setting for osa generations starting with osa express3 while the fixed set of older osa express cards receives its blkt settings explicitly
e95ddb5bda7333f0269347dc48ff214f9c216d5b	spi sh-msiof remove slave_id settings for dmaengine current sh-msiof sets dma_slave_config slave_id field for dmaengine but it is no longer needed lets remove it
3a91053aebb23205caf67927be00c54cef6424b3	mm mark fault_around_bytes __read_mostly fault_around_bytes can only be changed via debugfs lets mark it read-mostly
8a6acd648c1dfdc82f1bbcd15f7777962054c268	leds-pca963x fix device tree parsing a malformed device tree could lead into a segmentation fault if the reg value of a led is bigger than the number of leds a valid device tree could have only information about the last led of the chip fix the device tree parsing to handle those cases
463bf503bdab90bf269ad2a70656fe8536ff4933	staging omap-thermal bandgap fix setting of alert thresholds there was an error in check for the valid temperature in function temp_to_adc_conversion the temperature value was compared with higher limit for less than condition as well resulting in returning corrected the check condition to properly check for lower and higher temperature limits
c73930266d3b060d0ff0832b71caad95ac09b4a6	remove the preliminary_hw_support flag broxton is now part of ci which doesnt indicate any major problems so enable the driver by default
5674a9baba32dfff9585bd50e604a06bc9b1c2b8	mmc core convert from idr to ida for host indexes as ida is more lightweight than idr lets convert to use that instead
bf49be02d6f92b95c2462e5027fc90b98f62e324	of irq ignore disabled interrupt controllers when searching the system for interrupt controllers skip over any that are explicitly disabled this makes interrupt controllers consistent with regular devices which can be marked as do-not-probe via the status disabled dts property
bef05406ac0ea6f468e1e25e9934f3011ea9259b	bnx2x avoid sending multiple statistics queries during traffic when dcb is enabled it is possible for multiple instances of statistics queries to be sent to the chip this may cause the fw to assert this patch prevents the sending of an additional instance of statistics query while the previous query hasnt completed
c42e5715617232563f0cf9f231d86b5133c4487e	slab convert last use of __function__ to __func__ just about all of these have been converted to __func__ so convert the last use
3c17296f28820d2a9fa23e549a1e808a4df5dfc6	clk divider fix overflow in clk_divider_bestdiv commit c686078 clk divider add round to closest divider introduced a helper function to check whether given divisor is the best one instead of direct check however due to int type used instead of unsigned long for passing calculated rates to this function in certain cases an overflow could occur for example when trying to obtain maximum possible clock rate by calling uint_max this patch fixes this issue by changing the type of rate now and best arguments of the function to unsigned long which is the type that should be used for clock rates
92cb13fb21c60b3567c7bb7e55be7c38dc6bda38	net ethernet ti cpsw fix buld break when net_poll_controller commit c03abd84634d net ethernet cpsw dont requests irqs we dont use left one build breakage when net_poll_controller is enabled fix this build break by referring to the correct irqs_table array
134bf30c06f057d6b8d90132e8f8b3cd2be79572	dm cache policy smq fix alloc_bitset check that always evaluates as false static analysis by cppcheck has found a check on alloc_bitset that always evaluates as false and hence never finds an allocation failure warning logical conjunction always evaluates to false expr fix this by removing the incorrect check
d164ea32674ec82e80f480769ffcd2144f901380	mtd concat set the return lengths properly in concat_read_oob both retlen and oobretlen should be updated concat_write_oob previously only improperly updated retlen
e0b2da585f286ffa86cd24c0df1c1440d9dae19f	cpufreq loongson2 use cpufreq_generic_init use generic cpufreq_generic_init routine instead of replicating the same code here this driver wasnt setting transition_latency and so is getting set to __number__ by default lets mark it explicitly by calling the generic routine with transition_latency as __number__
65c21912b5b977f32a12336e87fe32f36105b981	use module_pci_driver to register driver removing some boilerplate by using module_pci_driver instead of calling register and unregister in the otherwise empty functions the name of the pci_driver struct had to be changed in order to prevent a build failure
9ac07501e1918b8d1140adcc360e8d8c7f5a2f7c	svcrdma limit frmr page list lengths to device max svcrdma was incorrectly allocating fastreg mrs and page lists using rpcsvc_maxpages which can exceed the device capabilities so limit the depth to the minimum of rpcsvc_maxpages and
fac87a8ecd02a99474d817b6784b6722736f9f0f	netxen_nic update version to
4bbc84ffd137fe43d68aa633d317b0a96de8a828	sparc use symbolic names for tsb indexing use symbolic names mm_tsb_base and mm_tsb_huge instead of numeric values __number__ and __number__ in __tsb_context_switch code cleanup only no functional change
b41e63cf83affa50a6141eba52be1fbd05f29b21	check for invalid value revision __float__ of the datasheet recommends on page __number__ to only write non-zero values read from otp register into afectrl register
48968a112cdf992d52c949a26c0020943c2268b1	remove unused ufs_super_block_second pointer pointer usb2 to struct ufs_super_block_second acquired via ubh_get_usb_second is never used in function ufs_statfs thus remove it detected by coverity cid __number__
ce078af76faffc5353256ce487dbd85a6f1ad3a4	dmaengine imx-sdma move message level to debug since commit d078cd1b4185 dmaengine imx-sdma add imx6sx platform support we get this message on every boot on mx6q imx-sdma no event needs to be remapped which is not very helpful move the message to debug level instead
9d847950770da7102d4efc02d0939ce28e3a7dd0	f2fs fix to put root inode in error path of fill_super we should put root inode correctly in error path of fill_super otherwise we may encounter a leak case of inode resource
4cefb74ada57c479e4f8b92d28008d35c1527e87	nvmem imx-ocotp fix usage of dev pointers assign the correct dev pointer to struct ocotp_priv during probe this is needed to display messages correctly furthermore harmonize the usage of dev instead of in the probe function
c9a6fd97335e59a113b53390579379c27fe64ed4	warn if we fail to re-pin fb on resume spotted by coverity
e2f6725917ed525f4111c33c31ab53397b70f9d2	avoid division by zero all of the functions in check if is zero and return if so however one of them xfrm_replay_advance_bmp divides by that value in the operator before doing the check which can potentially trigger a divide-by-zero exception some compilers will also assume that the earlier division means the value cannot be zero later and thus will eliminate the subsequent zero check as dead code this patch moves the division to after the check
79d5b4c3cd809c770d4bf9812635647016c56011	kvm x86 emulator allow loading null ss in long mode null ss is valid in long mode allow loading it
9f2f7d4c8dfcf4617af5de6ea381b91deac3db48	ovl initialize
4c17e28af31e40b85445f58a6145110975e111ad	remove unused liblustre_check_services prototype liblustre_check_services is no longer present in the tree
8c3698219119612c239e387e423aa9d90040bc64	alsa es1938 simplify pm callbacks this is a similar cleanup like the commit alsa fm801 pci core handles power state for us since pci_set_power_state pci_save_state and pci_restore_state are already done in the pci core side so we dont need to it doubly also pci_enable_device pci_disable_device and pci_set_master calls in pm callbacks are superfluous nowadays too so get rid of them as well
b74ea102b746a1e5157d6b0c83f486ad3c6235d1	ivb fbc wafbcdisabledpfcclockgating display register bit __number__ must be set to for the entire time that frame buffer compression is enabled v2 rmw to preserve other bits by ville v3 fix from ville sed at rmw v4 too far on sed
39b44cbe86db42e70693787b2ede81c309925d0b	libceph set message data when building osd request all calls of ceph_osdc_start_request are preceded in the case of rbd almost immediately by a call to ceph_osdc_build_request move the build calls at the top of ceph_osdc_start_request out of there and into the ceph_osdc_build_request nothing prevents moving these calls to the top of ceph_osdc_build_request either and were going to want them there in the next patch so put them at the top this and the next patch are related to
9b064f7d0c9ab179b9cb18e144ab65d7ea953443	f2fs remove build_free_nids during checkpoint lets avoid build_free_nids in checkpoint path
bf2b892e661213d4e94e2bff76dd13a23909228b	media si4713 cleanup platform data remove unreferenced members from the platform datas structure
2c2dc89cc5d68ca161d50011cdcbf8aa830b9498	usb dwc3 omap fix a typo on of_device_id no functional changes
0b1c8fc43c1f9fcde2d18182988f05eeaaae509b	cleanup comment and debug printk
156db9f3bb3c210cdf905172f6063c90c4a62c3c	asoc twl6040 only set the bias_level once in twl6040_resume no need to set the bias_level twice to _standby since this is the only state the device could be at suspend time the driver do not support idle_bias_off yet
7fa25314d534b9449d1705722eac412cad5c9042	pwm twl-led add to struct pwm_ops add missing of struct pwm_ops this prevents the module from being removed from underneath its users
f6712238471a8afdbfcea482483fc121281292d8	hv hv_balloon avoid memory leak on alloc_error of memory block if num_ballooned is not __number__ we shouldnt neglect the already-partially-allocated memory blocks
9f6e963f06c19a57a876cb77a9c87f6a56295b13	proc fix overflows in first_tid __number__ path truncates f_pos to int this is wrong even on we could check that f_pos pid_max or even int_max in proc_task_readdir but this patch simply checks the potential overflow in first_tid this check is nop on we do not care if it was negative and the new unsigned value is huge all we need to ensure is that we never wrongly return __number__ remove the nr __number__ check before get_nr_threads nr_threads __number__ is not distinguishable from above
31369c323ba0dc839d8a4e5a5727adc76814959c	rt2800 replace msleep with usleep_range on channel switch msleep1 can sleep much more time then requested this is not good on channel switch which we want to be performed fast to make scan faster replace msleep with usleep_range which has much smaller maximum sleeping time boundary
2231204b5476d644702da662826b93ed21f67f63	crypto dcp directly
bc6caf02cccedd30c9458e26dfdd8118af574ae5	pci use device_remove_file_self instead of device_schedule_callback driver-core now supports synchrnous self-deletion of attributes and the asynchrnous removal mechanism is scheduled for removal use it instead of device_schedule_callback this makes remove behave synchronously
fdb359ee445f83400bad762d54b2964b39d42d10	ixgbe remove redundant check on ret_val the last check on ret_val is redundant since ret_val has not changed since the previous check so remove it as it is extraneous
2b4c36612efac173397756398000921a7771fdda	restrict plane loops to legacy planes in matt ropers primary plane series a set of prep patches like commit af2b653bfb4ef40931b4d101ca842ce0c5da57ef author matt roper intel.com date tue apr __number__ __number__ restrict plane loops to only operate on overlay planes v2 ensured that all exisiting users of the wouldnt change behaviour unfortunately tegra seems to have fallen through the cracks fix it this regression was introduced in commit e13161af80c185ecd8dc4641d0f5df58f9e3e0af author matt roper intel.com date tue apr __number__ __number__ drm add drm_crtc_init_with_planes v2 the result was that weve unrefed the fb for the primary plane twice leading to a use-after free bug this is because the drm core will already set to null and do the unref for us and the crtc disable hook is called by the drm crtc helpers for exactly this case aside now that the fbdev helpers clean up planes theres no longer a need to do this in drivers so this could probably be nuked entirely in linux-next
3e4c8478d4b3bff3ca6fb36f47e9f1c6600ecde9	media go7007 a small improvement to querystd handling
f823981e288f83113bf1129ff2c94e2fd74a28dd	mac80211 flush queues before on we tear down all ba sessions these delba packets are sent on the appropriate tid while is always sent on vo this sometimes ends with the delba being sent after the deauth was already sent fix it by flushing all the pending frames before sending
d7559982701ac500662b2e8e150ff34f7faf0281	net ti cpsw ethernet allow reading phy interface mode from dt allow users to specify the phy interface of the cpsw slaves the new node parameter is called phy_if_mode and is optional the original behaviour of the driver is preserved when not given
4ebefc4443898f5429185ef96d85cfce0fbcc16a	f2fs check completion of foreground gc the foreground gcs are triggered under not enough free sections so we should not skip moving valid blocks in the victim segments
92e4b1bcd6561ff702a57150a00254b8936ea835	acpi ec remove non-standard log emphasis remove unusual pr_info visual emphasis introduced in ad479e7f47ca acpi ec introduce flags to replace blocked flag rjw change pr_info to pr_debug too in those places
8908dd806340513dacfd37b21e047946bca995d1	hid wacom fix wacom_probe error handling are not critical for tablet functioning thus ignore initialisation failures this patch does clean up all the sysfs attribute files in error paths
b47b894c6002d36ac93e4cc82139c7e7157a0f19	staging iio remove quoted string split across lines warnings
34273620d9227b61b82257e56d2d190abb9de2d8	tune down spurious crc interrupt warning we dont really synchronously turn them off from debugfs we try to avoid hitting them too badly by waiting one vblank but apparently the irq handler can still race through that gap since this isnt really all that important for testcases only for debugging crc issues lets tune it down to a debug message bugzilla
0a74c5b3d20d2a8693848b6ae4f1a97624f5b781	check sample types only for sampling events currently we check sample type for events even if its not created as a sampling event that prevents creating ftrace_function event in counting mode make sure we check sample types only for sampling events before sudo perf stat ls performance counter stats for ls __float__ seconds time elapsed after sudo perf stat ls performance counter stats for ls __float__ seconds time elapsed link
70641a0a84e1ae3c6eee3d47ed5a482f85b11e3e	extcon use bit macro for the left-shift operation this patch just uses the bit macro to make the code simple
0688a5ecea61a36ba12d17a18ab9f8712145cfa2	gfs2 stop block extents at the end of bitmaps this patch stops multiple block allocations if a nonzero return code is received from gfs2_rbm_from_block without this patch if enough pressure is put on the file system you get a kernel warning quickly followed by bug unable to handle kernel null pointer dereference at null ip __address__ gfs2 with this patch things run normally
88378837780166d67a11142cd6f76596c0a2d8c3	arm shmobile remove unused r8a7740 auxdata table pass null to of_platform_populate instead of passing an empty list this cleans up the code and reduces the number of lines
a444abfc668405746767eb53f920531b2d40e8af	staging comedi ni_labpc_common tidy up block comments fix the issues warning block comments use a trailing on a separate line
291e1b9459936c7e86951736d432e223b0710225	nfs properly set nfs nfsdbg_facility nfs operations can work outside of pnfs so dprintk output shouldnt be placed under nfsdbg_pnfs
e70b952263445ef3f0e4934d7277145f0fecd709	arm64 kvm treat sysreg accessors returning false as successful instead of considering that a sysreg accessor has failed when returning false lets consider that it is successful after all we wont stand for an incomplete emulation the return value now simply indicates whether we should skip the instruction because it has now been emulated or if we should leave the pc alone if the emulation has injected an exception
d83fcb793b8a17d2ea29e3450295094c12693f80	media gspca_stv06xx disable flip controls for vv6410 sensor disable the hardware vflip and hflip controls for now as we lack a mechanism to adjust the frame offset thus rending a bayerimage not compliant with the announced format
bade699c67d40b785e00738b0593c7ed1dad78fc	mfd twl4030-audio convert to use devm_kzalloc to clean up the module probe and remove functions
6a5d6943fe0e4b1e4c43c3aa1919360f68ae2f9a	xhci use ilog2 rather than __ffs for calculating segment_shift use ilog2 rather than __ffs for calculating segment_shift as ilog2 can be worked out at compile time whereas __ffs must be calculated at runtime
6ac95b57657d1bf5776f29a1697c123f62d5a58a	mac80211 fixup for mesh tsf adjustment latency in toffset setpoint the original patch defined the correction margin but did not apply it
76f5329a3dfe2f95dcc5664db603a2f1b0c9b825	ath10k extend debug code for rx path print sequence number amsdu_more flag and ac when additional debug enabled in rx path this is usefull for debugging purpose
35ae64fe6d08bd2f7c9f9c3c6e49182d5573341b	dell-laptop switch to using use module_device_table use module_devce_table instead of rolling module_alias by hand
a7e8b4b51917e5e14e28af4f49891bd153ffe5cd	irqchip sunxi change compatibles the allwinner a10 compatibles were following a slightly different compatible patterns than the rest of the socs for historical reasons change the compatibles to match the other pattern in the irq controller driver for consistency
8ec1d9be323388550b3eb4390c23217ea0711013	iphc use sizeof in udp uncompression
b146ecd6b5589f4524090cad4b55ee439c6a4925	net __number__ use accessors the operations are not defined by all architectures and are being removed from the interface this patch replaces the usage of these string functions in the __number__ accessors with calls instead
1996d624403483aa8b4192f39584b0d9421ed6a9	adjust watermark register masks we want to be able to use the masks to decode the register contents regardless of the hardware generation so just expand the masks to cover all available bits even if those are reserved on some generations v2 dont extend wm1_lp_sr_mask so far for the
3d085c7413d32bb6895e5b9b5ee6a7d2180159c5	lkdtm do not leak free page on kmalloc failure this frees the allocated page if there is a kmalloc failure
324a7fb02b9e7a226916e3593f756cd85312bae8	asoc mxs-saif use a signed integer for error value and are unsigned so they can not be negative fix the following warning when building with option in function mxs_saif_probe warning comparison of unsigned expression __number__ is always false warning comparison of unsigned expression __number__ is always false warning comparison of unsigned expression __number__ is always false use a signed variable ret to handle the error values
941c22532f40dafa1320adbbc3776e7971bc0764	tg3 update version to __float__
5d7fe4efbf0878e0ef12c8f93e7a16c750494b7e	fix size of cc_supported_table_entries commit add congestion control agent implementation tries to store the value __number__ in a u8 which leads to truncation fix this by making the member big enough this bug was detected by a smatch warning
ecc3993a2ad2a4ce8f1a58a08e9177f21015492d	remove redundant cmd_data_len calculation this code was added before we had protection data length calculation in iser_send_command so we needed to calc the sg data length from the sg itself this is not needed anymore this patch does not change any functionality
5909cf30f380d13bb59e81e4cb17c3714cb94e68	bluetooth remove unnecessary intermediate function resolves a conflict resolution issue in bluetooth fix l2cap coding style the remaining connect and create channel response handler is renamed to better reflect its use for both response types
baf4750d92cdfb63d6535f7166c6189d07407b65	netfilter nft_redir fix sparse warnings sparse incorrect type in assignment different base types expected unsigned int unsigned usertype nla_be32 got restricted __be32 sparse cast to restricted __be32 sparse cast to restricted __be32 sparse cast to restricted __be32 sparse cast to restricted __be32 sparse cast to restricted __be32 sparse cast to restricted __be32 sparse incorrect type in assignment different base types expected unsigned int unsigned usertype nla_be32 got restricted __be32 sparse cast to restricted __be32 sparse cast to restricted __be32 sparse cast to restricted __be32 sparse cast to restricted __be32 sparse cast to restricted __be32 sparse cast to restricted __be32
7e3f5c8881ba45eba1c74344b00558920008e6e6	ixgbe fix bounds checking in ixgbe_setup_tc for __number__ this patch resolves an issue where users were not able to dynamically set number of queues for __number__ via ethtool
f813f1be1f82a09720e94533f46ac79276eb037d	bluetooth fix long_term_keys debugfs output the code was previously iterating the wrong list and whats worse casting entries to a type which they were not and also missing a proper line terminator when printing each entry the code now also prints the ltk type in hex for easier comparison with the kernel-defined values
351dc6477cd35136ce4668401b1b1332a62908a8	avoid loop inside irqfd_update the loopfor inside irqfd_update is unnecessary because any other value for will just trigger in irqfd_wakeup
2f2cc27f50e3d232602d3b7c972071b4a30e5e38	regulator anatop patching to device-tree property reg change reg to anatop-reg-offset due to there is a warning of handling no size field in reg this patch also adds the missing device-tree binding documentation
e937f583ec3a40cccd480b40d8c6d54751781587	mac802154 increase tx_buffer_len increase the buffer length from __number__ to __number__ packets consider that traffic on mac802154 devices will often be and a full-length __number__ octet ipv6 packet will fragment into __number__ fragments because the mtu of ieee is __number__ a queue is really __number__ full-length ipv6 packets with a queue length of __number__ an entire ipv6 packet was unable to get queued at one time causing fragments to be dropped and making reassembly impossible
dbf128cbf9b90f97d74c734d1a768c564958e970	move rb_node to the middle of the test struct avoid making the rb_node the first entry to catch some bugs around null checking the rb_node
85327af61d4cb1700d4c71e8080f7c7df9bccafb	workqueue stronger test in process_one_work when pool_disassociated is cleared the running workers local cpu should be the same as without any exception even during cpu-hotplug this patch changes proposition_a proposition_b proposition_c to proposition_b proposition_c so if the old compound proposition is true the new one must be true too so this wont hide any possible bug which can be hit by old test tj minor description update and dropped the obvious comment
2e2a7817fdb6304f8c95c29dae0c93e2727240f4	use is_device_dma_coherent use is_device_dma_coherent to check whether we need to issue cache maintenance operations rather than checking on the existence of a particular dma_ops function for the device this is correct because coherent devices dont need cache maintenance operations arm_coherent_dma_ops does not set the hooks that we were previously checking for existance
2a9e0662f6779d2074ecaa80ea5753d5f0cf1b93	fix temperature scale and offset the temperature channel uses the internal reference with __float__ the reported temperature is in kevlin so we need to add the kelvin to celcius offset when reporting the offset for the temperature channel
08344492b350870db4499c7b90220030f07a5d4b	media omap3isp cancel all queued buffers when stopping the video stream when stopping a video stream the driver waits for ongoing dma opeations to complete for the currently active buffer but doesnt release the non-active queued buffers this isnt a problem in most cases as the video device is usually closed after the stream is stopped which will release all the buffers however the problem would generate a warning when switching to videobuf2 fix it by cancelling all buffers after dma operations have completed
3f5eb8d5688a5266ab943cf94aebe4c0eea726a3	usb make the usbfs memory limit configurable the global limit on memory used by usbfs isnt suitable for all people its a reasonable default but there are applications especially for superspeed devices that need a lot more this patch as1498 creates a writable module parameter for usbcore to control the global limit the default is still __number__ mb but users can change it at runtime even after usbcore has been loaded as a special case setting the value to __number__ is treated the same as the hard limit of __number__ mb
0bdee30ed351d437cc24bb0ec51dfd02f60273fb	add dp support to intel_ddi_get_encoder_port
eadf9e26fab7f9841adcc36f3559dbce7604fcd5	media add __user to v4l2_ext_control pointers these are not copied to kernel space by video_usercopy so mark them as __user
064f462632c2294f9b7fb51a7697392fedeea12e	mtd brcmnand drop unused subpage_read support afair this driver was never tested with subpage read support and this code is currently unused because we dont set the nand_subpage_read flag it can be resurrected if someone tests it properly
7a00ff445f1337bbd0fbf65d3ae468dfbc7ba53e	bluetooth add mgmt_send_event helper to send to any hci channel currently the mgmt_event function is only capable of sending to hci_channel_control to void having to change all users of it add a new mgmt_send_event function that takes a channel parameter and make the old mgmt_event a wrapper that passes mgmt_channel_control to it
4f066328abec7f67518051e0eba67246ef2bfc07	audit remove pr_info for every network namespace a message about creating the audit socket might be fine at startup but a pr_info for every single network namespace created on a system isnt useful
5a62f3c6de73bd0b4ac40a33674d20f1bfb586d5	mrf24j40 fix security-enabled processing on inbound frames when receiving a security-enabled ieee frame the mrf24j40 triggers a secif interrupt that needs to be handled for rx processing to keep functioning properly this patch enables the secif interrupt and makes the mrf ignores all hardware processing of security-enabled frames that is handled by the ieee802154 stack instead
7f7d8ba3b2140d993887a7db7a83d85c1f8db0e8	usb usb251xb dt add unit suffix to oc-delay and power-on-time rename to oc-delay-us and make it expect a time value furthermore add suffix to power-on-time there changes were suggested by rob herring in
0e1c03017549a9df513622b3f15ff38eb8d35a62	clk clk_set_rate must fail if clk_set_rate_gate is set and clk is enabled this is well documented but isnt implemented clk_set_rate must check if flags have clk_set_rate_gate bit set and is enabled too
134f1f609bdf2f67ae23b7b1b686a3b9d5c67b03	arm rockchip add support holding osc during suspend if we want to wake up system via usb the osc could not be disabled during suspend read the usb phy siddq bit to decide whether to switch to clock-in
c60855cdb976c632b3bf8922eeab8a0e78edfc04	blkpm avoid sleep when holding queue lock in blk_post_runtime_resume an autosuspend request will be initiated for the device since we are holding the queue lock we cant sleep and thus we should use the async version to initiate an autosuspend pm_request_suspend instead of pm_runtime_suspend which might sleep
cf0ab2cd450357bd430c6799aed18a427a8420f6	handle cg in ci dpm code clockgating needs to be disabled around certain parts of dpm setup otherwise the smc gets into a bad state and dpm doesnt work properly
a6f096f3b6effff9edc0f34a20eb0593406cc00a	asoc convert da7210 to table based dapm init
01a551971c0fb1739dbe61f60105323a1f8827ad	only poll dw3_a when init ddi phy for ports b and c according to bspec we need to poll for port_ref_dw3_a grc_done only on ports b and c initialization sequence when copying rcomp from port a so lets follow the spec and only poll for that case and not on every port a initialization v2 also remove the grc_done check from bxt_ddi_phy_is_enabled otherwise it might believe it is disabled and force it to re program
851d7b6b8a954b28f85e62a53cbba472907e21e4	iw_cxgb4 initialize for port mapping the iwcm uses for registration with the iwarp port map daemon but iw_cxgb4 did not initialize this field which causes intermittent registration failures based on the contents of the uninitialized memory
c613c5f686b5493290aeb6a3c4b3b2371a8582cf	mg_disk fix error return code in mg_probe fix to return a negative error code from the error handling case instead of __number__ as returned elsewhere in this function
8b0d2f9ed3d8e92feada7c5d70fa85be46e6f948	net ucode is optional in some cases commit firmware convert driver to request_firmware did a straight conversion of the in-driver ucode to external files this introduced the possibility of the driver failing to enable an interface due to missing ucode there was no evaluation of the importance of the ucode at the time based on comments in earlier versions of this driver and in the source code for the freebsd fxp driver we can assume that the ucode implements the cpu cycle saver feature on supported adapters although generally wanted this is an optional feature the ucode source is not available preventing it from being included in free distributions this creates unnecessary problems for the end users doing a network install based on a free distribution installer requires the user to download and insert the ucode into the installer making the ucode optional when possible improves the user experience and driver usability the ucode for some adapters include a bugfix making it essential we continue to fail for these adapters unless the ucode is available
23fe15fadf708c562140cd99e4dfd400afc5db8a	staging most fix missing static keyword warnings this is a patch to the file it makes several local functions and structures static to prevent global visibility
9d372c9fab34cd8803141871195141995f85c7f7	arm64 add page size to the kernel image header this patch adds the page size to the arm64 kernel image header so that one can infer the pagesize used by the kernel this will be helpful to diagnose failures to boot the kernel with page size not supported by the cpu
db146f06ac0bbea63271b6c78f4341ee46843e10	perf tools rename global variable events in trivial patch that renames global variable events in use a more specific naming to avoid conflicts same for variable event_count link
67e1e2268e598861dc771e3c976daf07db380638	clk si5351 fix clkout rate computation rate was incorrectly computed because we read from wrong divider register
a8f552df807d0c809ec529c8e998a6abbf40f324	asoc codec duplicated callback function goes to component on tas5720 codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
3dae7fec5e884a4e72e5416db0894de66f586201	mm memcontrol remove hierarchy restrictions for swappiness and oom_control per-memcg swappiness and oom killing can currently not be tweaked on a memcg that is part of a hierarchy but not the root of that hierarchy users have complained that they cant configure this when they turned on hierarchy mode in fact with hierarchy mode becoming the default this restriction disables the tunables entirely but there is no good reason for this restriction the settings for swappiness and oom killing are taken from whatever memcg whose limit triggered reclaim and oom invocation regardless of its position in the hierarchy tree allow setting swappiness on any group the knob on the root memcg already reads the global vm swappiness make it writable as well allow disabling the oom killer on any non-root memcg
d2f78e95e42a9130002c76f1a1f76e657a4b4004	dmaengine dw enable clock before access hclk signal is a bus clock so it means we have to have it enabled during access to the dma controller this patch makes sure that we enable clock before access to the device though it currently works on intel hardware
d0d97488dd1e8131ac9d8f7d3487c355f4bf9d72	media uvcvideo use kcalloc instead of kzalloc to allocate array the advantage of kcalloc is that will prevent integer overflows which could result from the multiplication of number of elements and size and it is also a bit nicer to read the semantic patch that makes this change is available in
1004ee619625a3332f7d3d41a522d799d6cce982	net phy update the mdix_ctrl with correct value update the mdix and mdix_ctrl with corresponding ethtool configuration parameters
454ca6040acc441221d1b07c38c6127947a223d0	ia64 check return from device_register in cx_device_register the device_register is declared with must_check causing this in function cx_device_register warning ignoring return value of device_register declared with attribute warn_unused_result check the return value and free resources if it fails
b6c7d7209dc1f128fb5b9e07ee0bb2f808f86bab	iwlwifi mvm remove useless warn_on and rely on cfg80211s combination we advertise one station vif only so this just cant happen remove this useless warn_on
ce0ede2c06202dace68a2f0401ebaafdaa2720d2	media radio-cadet avoid interruptible_sleep_on race interruptible_sleep_on is racy and going away this replaces one use in the radio-cadet driver with a wait_event_interruptible call special care was taken that accesses to the rdsin and rdsout indices are always done with held
86426851c38d3fe84dee34d7daa71d26c174d409	fix sparse tlb_single_page_flush_ceiling warning and make the variable read-mostly a sparse warning is generated about tlb_single_page_flush_ceiling not being declared warning symbol tlb_single_page_flush_ceiling was not declared should it be since it isnt used anywhere outside this file fix the warning by making it static also optimize the use of this variable by adding the __read_mostly directive as suggested by david rientjes link
a72ccfbad7fd6f604d8edd068119edb57e7984e1	alsa x86 dont return an error from chmap ctl at disconnected its not wise to return an error at callback when disconnected which happens at any time the chmap ctl is supposed to fill zero for such a case instead
aaa8a418ec5a2bdb4b0e51bcd7775f81db3a3dd8	mailbox drop owner assignment from platform_drivers a platform_driver does not need to set an owner it will be populated by the driver core
0324e6469ab056bef1ffd7c36833448ab1f3df8d	mtd nand sharpsl use the mtd instance embedded in struct nand_chip struct nand_chip now embeds an mtd device make use of this mtd instance
7fa322c878d70e38675f50e17acdce7fa3f5ac8c	nl80211 check nla_nest_start return value coverity pointed out that we might dereference null later if nla_nest_start returns a failure this isnt really true since wed bomb out before but we should check the return value directly so do that
6be2a3a0769849d234ef830617c5a7235b8f48e8	pinctrl at91 use __maybe_unused to hide pm functions the at91-pio4 pinctrl driver uses set_system_sleep_pm_ops to conditionally set the correct options but they become unused when config_pm is disabled error atmel_pctrl_suspend defined but not used error atmel_pctrl_resume defined but not used this adds __maybe_unused annotations so the compiler knows it can silently drop them instead of warning
3f61cd879c2f112c468e8849949b6fc88c739679	bnx2x fix mem leak in bnx2x_tpa_stop if build_skb fails we allocate memory for new_data with kmalloc if we get the memory we then try to build_skb and if that should fail which it can we do not enter if likelyskb and actually use new_data but instead fall through to the drop label and end up returning from the function without ever assigning newdata to anything or freeing it that leaks the memory allocated to new_data this patch fixes the memory leak by doing a kfreenew_data in the case where build_skb fails or where allocation of new_data itself fails but in taht case its just a harmless kfreenull
171408c21149dd3fd2ed33f19afe2cd558269253	i2c imx add int flag and ien bit operatation codes this add bits operation macro that differ between socs interrupt flags clear operation in i2sr differ between socs write zero to clearw0c int flag on but write one to clearw1c int flag on vybrid i2c module enable operation in i2cr also differ between socs set i2cr_ien bit enable the module on but clear i2cr_ien bit enable the module on vybrid
ede44c908d44b166a5b6bd7caacd105c2ff5a70f	rtc pcf8523 properly handle oscillator stop bit the time and date register of the pcf8223 are undefined after a power reset properly handle the os bit and return when that bit is set it is properly removed when setting the time this solves an issue where the time and date may be valid for rtc_valid_tm but is not the current time
947b38bb110c90e0bc93e7afe9ab6f007b6799a7	media tw68 simplify tw68_buffer_count the code to calculate the maximum number of buffers allowed in __number__ mb is __number__ wrong if page_size __number__ and __number__ unnecessarily complex fix and simplify the code
1296fc02c22cb8bc0cde34fbd1336d1a8d76f1e1	scsi fcoe fix build error i had a typo in a variable name for the previous patch scsi fcoe convert bus code to use bus_group that broke the build this fixes that
e04ca9078ef5d32951a68b1e97aef4b059d68fdc	fas216 update logging messages update logging messages to use dev_printk variants for correct device annotations
26b64256e0c4573f3668ac8329a1266ebb9d6120	dmaengine core skip mask matching when it is not provided to private_candidate if mask is null skip the mask matching against the dma device capabilities
0a381133127af4434301b3d9fb545005f38ad98c	acpica update aml debugger global variables acpica commit f65d0e5b880860a6da0c336b7c48139d1469f5b4 remove unused variables update to use standard convention linux kernel is not affected by this patch link
6e25baab5a0b2af2ebeb1d817ef94b11fc465fbd	extcon fix compile time warning this patch fixes below compilation in function extcon_register_notifier warning idx may be used uninitialized in this function if idx __number__ modify the patch title using the a captical letter for first char
74e8ce34ae300d899cd2346065c6d85253f15701	atm cleaning up uninitialized variables there is a risk that the variable will be used without being initialized this was largely found by using a static code analysis program called cppcheck
d40d00b1c24d4ecf23b24cb8e16027839bb24a59	i40e skip the priority tagging if dcb is not enabled if dcb is not enabled priority tagging is not needed so skip over that section change-id ia3f3fa07945b421259a9ca38329d6d1cbd6c6bcc
36446f4bfe613ad1da00f06081d410d62c07d334	perf tools remove from its defined in header also it was never used in perf tool
7c051267931a9be9c6620cc17b362bc6ee6dedc8	mm fork make dup_mmap wait for mmap_sem for write killable dup_mmap needs to lock currents mm mmap_sem for write if the waiting task gets killed by the oom killer it would block oom_reaper from asynchronous address space reclaim and reduce the chances of timely oom resolving wait for the lock in the killable mode and return with eintr if the task got killed while waiting
21e726c4a3625a1038e97795b7aad97109ba7e19	clear reserved bits in xsave header the reserved bits in the xsave header must be zero according to x86 sdm clear the bits in this patch link
eeef0eda7ac42b19a17cc3de8f826a160f1f102e	asoc switch over to use snd_soc_register_component on davinci mcasp
47fbe53bef3b219a365ebf3eca949d6cd4c5291c	perf session fix crash with invalid cpu list commit added the option to specify a range of cpus of interest but does not catch an invalid cpu list perf script foo segmentation fault core dumped link
b9d8905e4a751e2cdc0fb474856b7183c594dcc6	reiserfs check kstrdup failure check out-of-memory failure of the kstrdup option note that the argument arg may be null in that case kstrup returns null so out of memory condition happened if arg was non-null and kstrdup returned null the patch also changes the call to replace_mount_options if we didnt pass any filesystem-specific options we dont call replace_mount_options thus we dont erase existing reported options note that to properly report options after remount the reiserfs filesystem should implement the show_options method without the show_options method options changed with remount replace existing options
a5b5f3bec2bdc9a61b8f8190a3b3c32c64f19525	media exynos4-is ensure the fimc gate clock is disabled at driver remove the patch fixes following warning __number__ warning cpu __number__ pid __number__ at __number__ modules linked in m5mols s5k5baf s5p_fimc- ipv6 s5p_csis v4l2_mem2mem videobuf2_dma_contig videobuf2_memops exynos4_is_common videobuf2_core last unloaded m5mols __float__ cpu __number__ pid __number__ comm rmmod tainted g w __float__ from __float__ from __number__ from __number__ from __number__ from __number__ from __number__ from s5p_fimc __number__ s5p_fimc from s5p_fimc __number__ s5p_fimc from __number__ from __number__ from __float__ from __float__ from __float__ from __float__ end trace
03f2f93ae00762eb881424df1c688d034fd341ee	account the nr_entries in rblist properly the nr_entries in rblist is never decremented when an element is deleted also use rblist__remove_node to delete a node in rblist__delete this would keep the nr_entries sane link
05dca37303c10c7fa5a58138e6f0c8fb6b5f4e17	staging lustre ldlm removed unecessary space after function name this fixes warning space prohibited between function name and open parenthesis
733f3d1339f91d893584b2afcea18b34148ca125	pci convert downstream port containment driver to use functions use the device resource management devm interfaces so we dont need to explicitly release resources on failure paths or when the driver is removed
dc1d5adab5cc57eb732407d80c9e7ae48891ffca	fbdev sh_mobile_lcdc use display information in info for panning we must not use any information in the passed var besides xoffset yoffset and vmode as otherwise applications might abuse it
f81fe64f3d3bc76c1a8d3edb80b54219a60ff291	bluetooth refactor raw socket filter into more readable code the handling of the raw socket filter is rather obscure code and it gets in the way of future extensions instead of inline filtering in the raw socket packet routine refactor it into its own function
a449e46754616a13e1bee649e37bcdf10d1b794a	asoc fsi re-define fsi_is_play and fsi_stream_is_play this patch re-define fsi_is_play and fsi_stream_is_play function keeps direct value of is_play at this point but it will be removed soon this is just prepare cleanup for dmaengine support
2d09d8f301f53cb92e7ae7183d58a74fc55f85c0	edac amd64 determine edac mc capabilities on fam17h the umcs on fam17h are independent memory controllers so we need to read the capabilities from all umcs and make sure they agree once we determine what capabilities are available we should save them for convenience link simplify f17h_determine_edac_ctl_cap preinit edac_mode in init_csrows
eb7cf95a55a0d737e5f5694e71f65966a1c4e7aa	gpio da9052 convert to use devm_kzalloc api
79a0572736ad4b9cac7be72d4402f9c79db8ebaf	bluetooth call l2cap_le_conn_ready after notifying channels for most cases it makes no difference whether l2cap_le_conn_ready is called before or after calling the channel ready callbacks however for upcoming smp code we need this as the ready callback initializes certain structures that a call to smp_conn_security from l2cap_le_conn_ready depends on therefore move the call to l2cap_le_conn_ready after iterating through and notifying channels
a1b89132dc4f61071bdeaab92ea958e0953380a1	dm crypt use wq_highpri for the io and crypt workqueues running dm-crypt with workqueues at the standard priority results in io competing for cpu time with standard user apps which can lead to pipeline bubbles and seriously degraded performance move to using wq_highpri workqueues to protect against that
36f0efbbe8e21c153dfc2f94c91f89ab06fd64c5	make functions static sparse warnings sparse symbol rio_enum_mport was not declared should it be sparse symbol rio_disc_mport was not declared should it be
c8243ee0488d9bc12995ca7ea02f651db820622e	e1000e call er16flash instead of __er16flash __er16flash is not meant to be called directly
9af37a7d4e195119ecfd570d02d17d4d159da912	gcc fixes for dpm newer versions of gcc seem to wander off into the weeds when dealing with variable sizes arrays in structs rather than indexing the arrays use pointer arithmetic see bugs
09e427f87d345967503bb3c64854e11412c584f5	add alarm_irq_enable support add missed alarm_irq_enable callback for csr sirfsoc rtcs remove unneeded cast
82d8da0d46ae7d3e9089efadb5e8d9841c20a431	revert audit move kaudit thread start from auditd registration to kaudit init this reverts commit conflicts this patch was starting a kthread for all the time since the follow on patches that required it didnt get finished in __float__ time we shouldnt ship this change in __float__
d695c12c57feae371c943e019af920bc8b732dfb	media media s5p-mfc fix invalid memory access from s5p_mfc_release if s5p_mfc_release runs after s5p_mfc_remove the former will access invalid s5p_mfc_dev pointer saved in the s5p_mfc_ctx and runs into kernel paging request errors clear ctx dev pointer in s5p_mfc_remove and change s5p_mfc_release to avoid work that requires odroid kernel unable to handle kernel paging request at virtual address odroid kernel pgd odroid kernel __number__ __number__ odroid kernel internal error oops __number__ preempt smp arm odroid kernel modules linked in cpufreq_userspace cpufreq_powersave cpufreq_conservative s5p_mfc s5p_jpeg v4l2_mem2mem videobuf2_dma_contig videobuf2_memops videobuf2_v4l2 videobuf2_core v4l2_common videodev media odroid kernel hardware name samsung exynos flattened device tree odroid kernel task ti odroid kernel pc is at s5p_mfc odroid kernel lr is at s5p_mfc odroid kernel pc lr psr __number__ odroid kernel s5p_mfc_reset s5p_mfc from s5p_mfc odroid kernel s5p_mfc_deinit_hw s5p_mfc from s5p_mfc odroid kernel s5p_mfc_release s5p_mfc from videodev odroid kernel v4l2_release videodev from odroid kernel __fput from odroid kernel task_work_run from odroid kernel do_work_pending from odroid kernel code
cb72f60c17aea5f0bdd546420ebb16075d965f92	fix compiler warning while doing make below is the warning reported with the gcc gcc gcc __number__ red hat with make in function ds1286_read_alarm warning variable cmd set but not used fixed by removing the variable
a7d0e959fab832d0614d0e144cb01cbb87d36258	allocating too much memory in make_cma_ports the issue here is that there is a cut and paste bug when we allocate we use instead of were bumping up against the __number__ character limit so i introduced a new local pointer ports_group to get around that
035c4c16bea2814890c64c657d177e91cec1f473	netlink undo const marker in netlink_is_kernel we cant do this without propagating the const to nlk_sk too otherwise in function warning passing argument __number__ of discards qualifier from pointer target type enabled by default note expected sock but argument is of type struct sock
cf8c3cff3fcce966c6d31001c09c92778f961eea	iwlwifi mvm make sure d0i3 exit work runs before suspending if we are in d0i3 when entering suspend we leave d0i3 so that mac80211 can call us to remove connections or whatever before going to suspend we do this by calling pm_runtime_resume early in the slave transport flow and reactivating it later when the wiphy suspend flow runs the problem is that we queue a work in order to leave d0i3 if this work hasnt run yet when the wiphy suspend flow is called we have a race and entering d0i3 fails because were still holding the iwl_mvm_ref_exit_work reference to solve this simply flush the d0i3_exit_work at the beginning of the iwl_mvm_suspend function
c46d2916f6c03d3c8a2c38148af2e45cdadaf61f	arm apx4devkit fix fec enabling phy clock ethernet stopped to work after mxs clk framework change
6c5961e240bac9ae28b9bf6d39d48b2428a8fee6	staging comedi addi_common use pci_ioremap_bar use pci_ioremap_bar to ioremap the pci resources that function just takes the pci device and a bar number it also has some additional sanity checks to make sure the bar is actually a memory resource this also makes sure that the entire pci bar is ioremaped instead of assuming the size of the bar
a10817d67f34546401f6733badd427c9decf88e8	staging comedi ni_mio_common tidy up ni_ao_munge use the bytes_per_sample helper instead of sizeofshort to clarify the length calculation use comedi_offset_munge to handle the unsigned to twos complement munge of the data for bipolar ranges tidy up the local variables
c9d761b7c4b658a937a941aea2781f511a0ff3ec	microblaze pci fix typo fault in of_node pointer moving into pci_bus bug introduces in make both ppc32 and ppc64 use sysdata for pci_controller sha1 b5d937de0367d26f65b9af1aef5f2c34c1939be0
aa8f612370edf2fd29ec137f7070b11d98df539b	uas new function to cancel data urbs add uas_unlink_data_urbs function to cancel in-flight data urbs moves existing code into a separate function v2 also drop the locking just call usb_unlink_urb no matter what which is safe because the usb core guarantees the completion callback is called only once
6f7805a8d9dc6fa8af999f8603188157505558d9	hwmon w83627ehf mark const init data with __initconst instead of __initdata as long as there is no other non-const variable marked __initdata in the same compilation unit it doesnt hurt if there were one however compilation would fail with error causes a section type conflict because a section containing const variables is marked read only and so cannot contain non-const variables
030e416b4f7782b22e8985095be0ea641aa20bf8	load mqd to hqd in non-hws mode this patch fixes a bug in dqm where the mqd of a newly created compute queue is not loaded to an hqd slot as a result the cp never reads packets from this queue this bug happens only in non-hws hardware scheduling mode in hws mode the cp is responsible of loading mqds to hqds slots
e0d34ce7d0ca54aa45bc436823863a063f70c31a	implement wadisablesamplerpowerbypass for chv cherryview also needs this wa vsyrjala looks like its for pre-prodution hw only
5afe5bfe243d649aa5118c74317cbcbe85a04cb9	asoc wm0010 dont check if reset gpio is defined when removing we will fail to probe without one
587b24a54984f626337d8a6ce2931994c342ded3	of mdio fix compile warning in of_mdiobus_register_phy commit net phy make of_set_phy_supported work with genphy driver removed the last user of variable max_speed in function of_mdiobus_register_phy leading to compile warning unused variable thus remove it
5dbabace4f8514500c729d3e4fe10b2811a35f15	usb garmin_gps remove bogus disconnect test in bulk callback remove bogus disconnect test for serial device being null in read bulk callback this can never happen as the port read urb is killed and poisoned at close which in turn is guaranteed to be called before the last tty reference is dropped and is cleared
25eeb667599b192ea850a062d69383ee864c06ab	zram fix zram_bvec_read duplicate dump failure message and stat accumulation when zram decompress fails the code unnecessarily dumps failure messages and does stat accumulation in function zram_decompress_page this work is already done in function zram_decompress_page the patch skips the redundant work
6bdaf79623e285242cb977840358dc7d14438475	net wl12xx remove some unnecessary prints those have little value remove those to make the driver less noisy
14bcafeeb4814182e6f0684e12eb5ebf935c9694	staging comedi usbduxfast remove comedidev from the private data now that the comedi_device is passed to the internal functions the back pointer to it is not needed in the private data remove it
506823f6e7a349ba3f26f03f162733af64c300cc	cris intmem fix pointer comparison compile warning the code previously depended on list_head being defined as the first item in struct intmem_allocation in function warning comparison of distinct pointer types lacks a cast if prev warning comparison of distinct pointer types lacks a cast if next
87b8bed2ce9394870a87e4fb2aef6752b2bd837d	serial mxs-auart index is unsigned fix the following warning when building with option in function mxs_auart_tx_chars warning comparison between signed and unsigned integer expressions
3a5c24232463b4978acf8d8668becbf515d30a36	tty simserial properly refcount so that we will not be surprised in the isr anymore
05cc995f4d44c2b14a1f15f3271cc9715cb81099	gpio mmio add support this patch adds support for the gpio found in broadcoms bcm63xx-gpio chips this gpio controller is used in the following broadcom socs bcm6338 bcm6345 it can be used in newer socs without the capability of pin multiplexing
55d594211aa65f9cbd6409056cdd5aa27bec92ec	media mem2mem-deinterlace remove unneeded struct vb2_queue clear on queue_init queue_init is always called by v4l2_m2m_ctx_init which allocates a context struct v4l2_m2m_ctx with kzalloc therefore there is no need to clear vb2_queue structs
349907c262ad5e698c24565658ae489fb69fee53	usb phy msm handle disconnect events put the transceiver in non-driving mode otherwise host may not detect soft-disconnection
bc5290869d0a7f7abbde76ac95a7f7b6f5d7bb7b	perf tools put proper period for for samples without period sample_type we use perf_sample_period sample type only for frequency setup default option the does not need store period because its always the same in case the report code uses __number__ as period fixing it to link
314e4be76e20f1d799ee386380623375b0555372	staging rtl8192e drop cast on void pointer void pointers need not be cast to other pointer types semantic patch used expression x void type t identifier f t t t e
06d2fccd6b551be8c1efb8b37d01c511d2b3e905	suppress non active io error message current clio does not support fadvise suppress the error message reviewed-on intel-bug-id
9280b3a61ce006c803b616a922a635d04ffb040b	staging ks7010 fix checkpatch parenthesis_alignment checkpatch emits warning and check for prototype declarations warning function definition argument void should also have an identifier name check alignment should match open parenthesis also prototype parameters wrap more than is necessary tidy up function prototypes fix __number__ instances
105534054f03e8d91df6b1d63f7209cf797e5d59	media ths8200 remove deprecated video-level dv timings operations the video enum_dv_timings and dv_timings_cap operations are deprecated and unused remove them
35060a228e70c712cb626ef3eabaedc40903eb77	staging vc04_services fix null pointer dereference on pointer service currently if pservice is null then service is set to null and immediately afterwards service is dereferenced causing a null pointer dereference fix this by bailing out early of the function with a null return detected by coverityscan explicit null dereferenced
add6f74b9baf6676c4465b99967c972c464e59cc	bus omap_l3_noc un-obfuscate l3_targ address computation just simplify derefencing that is equivalent
16d186b1f9aebfc4baec419b89e61cf8e6ff5d40	move to the original info_mask is going away in favour of the broken out versions
ce6f2e3669547ad18ea67761aa9cc32cb4407bf2	rtl8xxxu add reg_ofdm0_rx_d_sync_path definitions
41533fe5b4f92adb3c40f263b889dc6addff550e	bluetooth remove unneeded extra in valid flags check
5dd2c4bded8776ee93c8f38b739fea531095067f	x86 use generic early mem copy the early_ioremap library now has a generic copy_from_early_mem function use the generic copy function for x86 relocate_initrd remove max_map_chunk define per yinghai lu
758ff235b3f50f0cb391ba3c5e10793305c42f45	mlx4 fix kcalloc parameters swapped the first parameter should be number of elements and the second parameter should be element size
47e4df94d129cbca84de252ff63c4ded08a513e7	mac80211 fix channel switch for chanctx-based drivers the new_ctx pointer is set only for non-chanctx drivers this yielded a crash for chanctx-based drivers during channel switch finalization bug unable to handle kernel null pointer dereference at __number__ ip mac80211 use an adequate chanctx pointer to fix this
8af59467412b4b61850d3ccb3737c09ecc6dc100	bluetooth add missing quirk_no_reset test to hci_dev_do_close we should only perform a reset in hci_dev_do_close if the hci_quirk_no_reset flag is set since in such a case a reset will not be performed when initializing the device
a66cd0b691c730ed751dbf66ffbd0edf18241790	media winbond-cir do not rename input name media winbond remove space from driver name inadvertently renamed the input device name
e1cc3db020c7ef864b7aa02d5e193a110f8f3450	assert that we never create a vma for the aliasing_ppgtt the aliasing_ppgtt is just a container for the hw context that mirrors the global gtt it should never be used directly so assert if we make the mistake of trying to allocate a vma for it
cef9e99e1e7514ec228ee8a4d667ec3c88007830	explicitly wait for bo idle before memcpy buffer move
0e995816f4fb69cef602b7fe82da68ced6be3b41	dont busy retry the inode on failed grab_super_passive this fixes a soft lockup on conditions a the flusher is working on a work by __bdi_start_writeback while b someone else calls or sync_inodes_sb which grab and enqueue a new work for the flusher to execute the s_umount grabbed by b will fail the grab_super_passive in a then if the inode is requeued wb_writeback will busy retry on it as a result wb_writeback loops for ever without releasing which further blocks other tasks fix the busy loop by redirtying the inode this may undesirably delay the writeback of the inode however most likely it will be picked up soon by the queued work by sync_inodes_sb or even writeback_inodes_wb bug url
59ea52dc461ebb05b78545064604d92faf8bb16f	net trans_rdma remove unused function this patch gets rid of the following warning warning defined but not used static int rdma_cancelledstruct p9_client struct p9_req_t the rdma_cancelled function is not called anywhere in the kernel
2a285299446cccbaf9ba47403e8f2ce578cd1ad1	spi dw-mid convert to use dmaengine wrappers instead of direct dereference to dmaengine callbacks we are going to use dmaengine wrappers
10dc42b5b262f3bb2e4532759e4e1147ebf6a22f	blackfin annotate clear_user to parameter with __user the to parameter of clear_user is supposed to take a userspace pointer so annotate it with __user this fixes the following and similar sparse warnings warning incorrect type in argument __number__ different address spaces expected void noderef got void warning incorrect type in argument __number__ different address spaces expected void got void noderef
c9d442038ef729549e1fd14ff1d61d0d3a7f0560	ieee802154 cc2520 check for return values in cc2520_filter neither ram nor register write return values have been checked here checking both now assign ret with __number__ as all other assignments are inside if blocks and might not happen before we return ret cid __number__
7f02d1601cf05ce79fde78cb9b9bc2e375f87126	qlcnic bump up the version to
bedd4dba75dc583fd3c458f6af2d53c60912a3cb	improve assert_panel_unlocked fix assert_panel_unlocked for and improve it a bit for non-lvds also dont pretend it works for ddi theres still work to do to get this right for edp on pch platforms but this is a start v2 warn_onhas_ddi
44963d649da63ce8ed8f41b8a267c745ca1ec0b0	usb gadget f_fs check for allocation failure return if kmalloc fails
e13ac47bec20797fa9262cffcae9cf0e3aa1b9b2	spi use stable dev_name for acpi enumerated spi slaves current spi based device naming scheme may not be stable enough to be used in name based matching for instance within alsa soc subsystem this can be problem in pc kind of platforms if there are changes in spi bus configuration amount of busses or probe order this patch addresses the problem by using the acpi device name with spi- prefix for acpi enumerated spi slave for them device name becomes
11d9e460ccb93742bfdc6ec2369a154eb2126e5a	staging wilc1000 remove unused hif_drv in host_int_get_assoc_res_info this patch removes unused hif_drv in host_int_get_assoc_res_info there is no need to check null and print debug log
f705a2dddd206b31ff7731b3adc69a2433ca6d00	staging rtl8192u ieee802111 drop useless initialization removed initialisation of a varible if it is immediately reassigned changes were made using coccinelle identifier i position p i type t constant c expression e identifier i position p t i c i e
0506eb01f70bd4d7e999c11488a6a892e01c42e2	iucv prevent information leak in iucv_message initialize storage for the future iucv header that will be included in the transmitted packet some of the header fields are unused with hipersockets transport and will contain data left from some other functions
83551c0159e9101b39b2d727ca1be0fd76daaf73	input synaptics update olpc xo exclusion we have determined that the jumpiness previously seen when using the synaptics kernel mouse driver on olpc xo was due to not using the synaptics x11 userspace driver the xf86-input-evdev driver was interpreting finger near pad signals as movements newer versions of xf86-input-evdev fix this issue additionally the synaptics kernel driver is now usable on this platform but only when run in relative mode update the comment and refine the check to allow the synaptics driver to run on olpc xo in relative mode we will continue investigating the ec issue as time becomes available
25fdf2435139542759df2eeb59e4998923c13403	tty signal sighup before hanging up ldisc an exiting session leader can hang if a foreground process is blocking for line discipline eg in n_tty_read this happens because the blocking reader is holding an ldisc reference indicating the line discipline is in-use which prevents __tty_hangup from recycling the line discipline although waiters are woken before attempting to gain exclusive access for changing the ldisc the blocking reader in this case will not exit the loop since it has not yet received sighup because it has not been sent instead perform signalling first then recycle the line discipline info task blocked for more than __number__ seconds echo __number__ disables this message init d __number__ __number__ __number__ __number__ __number__ __address__ __number__ __number__ __address__ __address__ __address__ __number__ __number__ __address__ __address__ __number__ __number__ call trace __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __number__ lock held by at __address__
b6a32f023fcc9cbd1602f78a467fd8d41bbc9457	fix pebs threshold initialization latest pebs rework change could skip initialization of the for single event pebs threshold events make sure the pebs threshold gets always initialized link
ff41aaa3b6c181a713078d8ad96da4ba822de436	usb musb tusb6010 fix error path in tusb_probe on platform_device_add failure the tusb6010 glue layer forgets to call platform_device_put probably due to a
810bf11033637a2069952afb9c37f3afd3bbfe41	tipc use kmemdup instead of kmalloc and memcpy replace calls to kmalloc followed by a memcpy with a direct call to kmemdup the coccinelle semantic patch used to make this change is as follows expression statement s to to if s memcpyto from size
778889d8412e36e666b1e4ce108373613c84b428	block apply blk_partition_remap to req_op_zone_reset if a zbc device is partitioned and operations are performed on the partition the zone information is rebased to the partition however the zone reset is not mapped from the partition to device as are other operations this causes the api report zones reset zone to be unbalanced in this regard checking for the zone reset op code explicitly will balance the api
a3ba7c989d7c80b34401c58269c5903a1da8412a	amd-xgbe enable interrupts for all management counters as the management counters reach a threshold they will generate an interrupt so the value can be saved and the counter reset the current code does not enable this interrupt on all counters this can result in inaccurate statistics update the code to enable all the counters to generate an interrupt when its threshold is exceeded
025b431b0ed3d4d3363427661c53ed8b60487a44	usb dwc3 omap add dwc3_omap_extcon_register function move the extcon related code to its own function improve code readability decrease the dwc3_probe size
9ae7e9e38acfae8d651fbe73844ca837d03499ee	gpio pl061 remove confusing naming drop the gpio suffix after the pl061 irq_chip name this is only confusing an irqchip name should be a single short simple string that looks nice in drop the nameing of each individual irq to pl061 i think this naming function is for naming the irq line not for boilerplating them all with the name of the parent controller which is already known from the field of the irq_chip
933cbb1c6c617a6ae167538c2fa503efc9c4a832	perf top fix option behavior the option controls how many lines to be printed on stdio output but it doesnt work as it should be if option is specified print that many lines regardless of current window size if not automatically adjust number of lines printed to fit into the window size link
0454159fa91b91c0baa63ded5ce425a8519a9613	clk samsung convert to clk_hw based provider apis were removing struct clk from the clk provider api so switch this code to using the clk_hw based provider apis
d479c911789e14a19b86ca09b0b634f1449c8c6b	usb ehci-fsl return valid error in ehci_fsl_setup_phy ehci_fsl_setup_phy is supposed to return an int but had a void return value in the case of controller_ver being invalid introduced by commit fix bug of cpu hang when missing usb phy clock which missed one return
d6b0d2f243fef6cb87f5338bf06c2330175f106f	tty serial fsl_lpuart support add support
62fcd58943654b0474f8d97309185dca1addd5a7	return from void function this patch removes the return statement at the end of a void function as it is not was found by
56b27d4dd3eccff618be2f8417aef86f59a2c0d4	media convert remaining use of pr_warning to pr_warn to enable eventual removal of pr_warning this makes pr_warn use consistent for prior to this patch there was __number__ use of pr_warning and __number__ uses of pr_warn in
b89d607b590397c04b63d94a9e2fca9649917955	arm fix warnings about atomic64_read fix in function connbytes_mt warning passing argument __number__ of atomic64_read discards qualifiers from pointer target type by adding the missing const
a4fa90d24b4bb7d171fbcb2ceffd0315a6e29050	clk rockchip fix up rk3368 timer-ids the timer-ids are wrong compared to the manual probably due a simple copy-paste mistake from the otherwise very similar rk3288 and there are even more timers in the system than the ones wrongly listed here timer-ids were unused both in clock-driver as well as devicetree till now so fixing them wont break anything
33b07b8be7f0e1e8e4184e3473d71f174e4b0641	perf use static variant of perf_event_overflow in no need to have an additional function layer link
d230a11abc97e118365b12a472ff758d867c4bac	drivers net cpsw-common add support for reading mac address for dra7 and am437x platforms adding support for reading mac address using syscon driver for dra7 and am437x platforms
13cf988562b0c7f06e0016bea2b5304358397702	mei prevent queuing new flow control credit the mei fw can receive only one flow control for read currently the driver only checks if a flow control credit was already sent and read is pending in the rd_pending queue but it also has to check if flow control credit already queued in the write control queue to prevent sending more than one flow control credits
c8aeb7dfe6e815906c3d9c23ce17a00e8d01b3d5	arm imx drop cpuidle_flag_time_valid from cpuidle-imx6sx as the result of commit b82b6cca4880 cpuidle invert cpuidle_flag_time_valid logic the flag gets removed and hence we see the compile error below cc error undeclared here not in a function since the behavior of the original flag has been the default we can simply drop the flag now
bdf7c9dc10912dbad3a5052ee824546535e0b4c1	staging comedi daqboard2000 use the pci_resource_len use pci_resource_len when doing the ioremap instead of assuming the resource size
19055b8fa730d8ec84743efcf0a379e8005e6c74	pinctrl pinctrl-pxa3xx remove empty pinmux disable function
2e34c2ac16ee6574743c73caa3d796e307f028a6	clk tegra make sor_safe the parent of dpaux and dpaux1 it turns out that sor_safe rather than pll_p is the parent of the dpaux and dpaux1 clocks
fec81a3c81f664fcb218d32265ff49666451f987	stop programming registers with default values there is no point in rewriting default values as the ip is reset anyway
4a7795d35e252f38298980530e01e21867f8f856	vfs fix reference leak in d_prune_aliases in d_prune_alias just lock the parent and call __dentry_kill the old dget d_drop dput has been replaced with lock_parent __dentry_kill unfortunately dput does more than just killing dentry it also drops the reference to parent new variant leaks that reference and needs dputparent after killing the child off
f87a7e5bf50d83d9dca0e87d10eac7226e0ac61d	staging comedi cb_das16_cs cleanup dio subdevice initialization the digital subdevice is always initialized due to the if __number__ simplify the attach by removing the test
d04c02f8aa96d82e4cbe783f85a820aae820e746	fix handling of instruction emulation on probe re-entry commit emulate instructions on kprobe handler re-entry enabled emulating instructions on kprobe re-entry rather than single-stepping always however we didnt update the single stepping code to only be run if the emulation fails also we missed re-enabling preemption if the instruction emulation was successful fix those issues
1b1089561ce596a4032ba1039365090304db1cfd	misdn fix races between misdn_del_timer and timer callback mark the victim with negative if misdn_del_timer finds it on the list have timer callback move ones so marked to
1e8efb42cf32982d68c1ceab3e3dc15a05157632	i40e fix erroneous warn_on the driver was issuing a warn_on during ring size changes because the code was cloning the rx_ring struct but not zeroing out the pointers before allocating new memory zero out the pointers in the cloned copy before allocating new memory for them in this case the code was correctly avoiding memory leaks but still triggering the warning change-id i186dd493948e9b7254ab0593d4aad8b68808918d
1208bb274ba547012579d5b68c693e0b36682b74	perf sched map apply cpu color when theres an activity applying cpu color always doesnt help readability imho instead it might be better to applying the color when theres an activity on those cpus link
29dfe2dc0e8f85c5656d13bb4c78a5ffca54c452	kobject export kobj_sysfs_ops struct kobj_attribute implements the baseline attribute functionality that can be used all over the place we should export the ops associated with it
e4839d39b401e783bab57388341d82500662d5b7	staging wilc1000 rename au8macaddr of struct del_sta this patch renames au8macaddr of struct del_sta to mac_addr to avoid camelcase naming convention
06181de14ff09b274b699ee2dd39fe5e37efb419	staging comedi rearrange comedi_write code rearrange the code in comedi_write to reduce the amount of indentation the code never reiterates the while loop once count has become non-zero so we can check that in the while condition to save an indentation level note that nbytes has been checked to be non-zero before entering the loop so we can remove that check move the code that makes the subdevice become non-busy outside the while loop using a new flag variable become_nonbusy to decide whether it needs to be done this simplifies the wait queue handling so there is a single place where the task is removed from the wait queue and we can remove the on_wait_queue flag variable
8eee694c3e667e6f0856d9c8525208058f9d42bf	bnx2x fix unload previous driver flow when flr-capable the existing previous driver unload flow is flawed causing the probe of functions reaching the uncommon fork in flr-capable devices to fail this patch resolves this as well as fixing the flow for hypervisors which disable flr capabilities from functions as they pass them as pda to vms as we cannot base the flow on the pci configuration space
6ad709482e151068b7197f4572edeeae5eeaff93	asoc spdif_transceiver add output pin widget codecs without any outputs now remain powered down which means any paths to these codecs also remain powered down add an always-enabled output pin widget to the spdif transceiver codec this enables dapm to correctly identify that the spdif transceiver is in use when playback is enabled which will then allow dapm to power up any links from the cpu dai to the transceiver
b72e74d1f140eb32865540f9e26e9fe0fcf983b9	perf evlist amend mmap ref counting for the aux area mmap reference counting of the mmap buffer does not work correctly when there is an aux area mmap also in snapshot mode it is not easy to know if the aux area mmap buffer contains usefull information equally the evlist does not know if the recording is in sanpshot mode anyway consequently for now just assume the aux area mmap always has data which will just cause the mmap buffer to remain mmapped for the duration of the recording link
f13ac41f5165c0ac0441f9d42f7d6f6f9ee7c075	bnx2x remove unnecessary dma_sync
348e5153bcf6c6a0a735eeb6f65e1aba8ffe2780	spi rspi add support for specifying add support for specifying the spi clock phase and polarity based on the sdk reference code
315f9a2fe237c81535695005592eb7c586f3181e	staging rtl8723au hal_initpgdata avoid unnecessary typecasts
790d849bf811a8ab5d4cd2cce0f6fda92f6aebf2	cpufreq pcc-cpufreq update default value of cpuinfo_transition_latency the cpufreq documentation specifies the time it takes on this cpu to switch between two frequencies in nanoseconds if appropriate else specify cpufreq_eternal currently pcc-cpufreq does not expose the value and sets it to zero i changed the pcc-cpufreq driver and its documentation to conform to the default value specified in
f66ce0daaefded02d84070a859176a2aa4d8e1a3	arm remove unused variable perf_stat_reg the variable perf_stat_reg in ve_spc_set_performance is assigned a value but that is never used so lets remove the variable perf_stat_reg
0036e74686344f1051afc3107740140abfd03616	mmc debugfs correct wrong voltage value correct the wrong voltage value shown in debugfs for
cf55902b9c306ed259eb57ff111a0c152620f4a6	staging android ion fix error handling in ion_query_heaps if the copy_to_user fails we should unlock and return directly without updating cnt also the return value should be instead of the number of bytes remaining
ce976fdb247dc05901c59f9e36c9104293a23119	staging comedi usbduxfast tidy up usbduxfast_ai_cancel remove the unnecessary comments and dev_err noise
b5217bf4692218d202d3d2cd772864fa1e10be4d	dw-hdmi adapt to bridge api change commit make bridge registration independent of drm flow introduced some api modifications make the necessary changes so that we can avoid the build breakage in function dw_hdmi_bridge_destroy error implicit declaration of function drm_bridge_cleanup at top level error unknown field destroy specified in initializer in function dw_hdmi_register error implicit declaration of function drm_bridge_init
9225b23057aeba13957e8033f69a554dc246a80e	net ipv6 eliminate parameter int addrlen in function fib6_add_1 the int addrlen in fib6_add_1 is rebundant as we can get it from parameter struct in6_addr once we modified its type and also fix some coding style issues in fib6_add_1
ee692cfad6520f7cc60b766a3c013f9e6eba6e38	staging winbond usb_free_urbnull is safe usb_free_urbnull is safe so the check was removed
46a35b0d4d26090aedc0e72ac701d0f5304e29a0	asoc cs42l56 replace direct snd_soc_codec dapm field access the dapm field of the snd_soc_codec struct is eventually going to be removed in preparation for this replace all manual access to with snd_soc_codec_get_bias_level and replace all other manual access to with snd_soc_codec_get_dapm
2867af2dcf4093d5617172c030ff449e5d5c5935	atmel_serial use the fractional divider when possible the fractional baud rate generator is available when using the asynchronous mode of atmel usart controllers it makes it possible to use higher baudrates in exchange for a less precise clock with a variable duty cycle the existing code restricts its use to the normal mode of the usart controller following the recommendation from the datasheet for the first chip embedding this type of controller this recommendation has been removed from the documentation for the newer chips after verification all revisions of this controller should be able to use the fractional baud rate generator with the different asynchronous modes removing the condition on atmel_us_usmode makes it possible to get correct baudrates at high speed in more cases this was tested with a board using an atmel sama5d2 chip and a ti wl1831 combo chip at __number__ mbauds with hardware flow control enabled
9719acce37803d179fc94884c8d50b883fc8186e	serial use upstat_autorts for rts handling commit serial omap_8250 fix rts handling fixed rts pin control when in autorts mode new support added in serial core rework hw-assisted flow control support enables a much simpler approach rather than masking out autorts whenever writing the efr register use the mode to determine if autorts should be enabled when raising rts in omap8250_set_mctrl
eab34eabe420cb9693b5195341d3e6fb090f8df6	media media vivid use vb2_start_streaming_called helper this patch adds support for using vb2_start_streaming_called for vivid driver
4b06a81f1daee668fbd6de85557bfb36dd36078f	userns silence silly gcc warning on builds gcc says warning this decimal constant is unsigned only in iso c90 enabled by default warning this decimal constant is unsigned only in iso c90 enabled by default silence gcc by changing the constant __number__ to
b1a86e15dc0304366f50ba1720834bc419c801b1	x86 pat remove the dependency on vm_pgoff in pfn vma routines pfn argument for track_pfn_vma_new can be used for reserving the attribute for the pfn range no need to depend on vm_pgoff similarly untrack_pfn_vma can depend on the pfn argument if it is non-zero or can use follow_phys to get the starting value of the pfn range also the non zero size argument can be used instead of recomputing it from vma this cleanup also prepares the ground for the pfn vma routines to take over the ownership of setting pat specific vm_flag in the vma clear pfn to paddr conversion
80909e04de4dbbe76a220ccd5f9b32d8d5a8c22c	bluetooth use the ertm transmit state machine from timeout handlers different states have different actions for retransmit and monitor timeouts so remove the logic for those actions from the timer handlers
3eb1c005c616f110ccec25540712ce7232d5d4bf	conditionally carve out ggtt pde it only works that way on gen6 and gen7 lets not assume genn will be the same
dc881f294eb957bded69b5e7f2f72831e2d00ac4	staging comedi fix sparse warning in do_devconfig_ioctl for the comedi_devconfig ioctl the user application may embed a pointer to firmware data within a designated element or two elements for pointers of the options array in the struct comedi_devconfig do_devconfig_ioctl calls comedi_aux_data to extract the pointer value it needs to be treated as a __user pointer so the firmware data can be copied into kernel memory so cast the result of comedi_aux_data to avoid a sparse warning this is not ideal but comedi_aux_data is called elsewhere in a wholly kernel memory context so we cant just change its return type to include the __user tag
320572813ded2cc17581b22cdc5dc775aaf83f53	mfd twl4030-power fix some defines for sw_events we have these bits partially defined in two different places so lets fix them up and add defines for the missing bits these bits are the same for p1_sw_events p2_sw_events and p3_sw_events
16d13b59b5b85ebc91de6c889716fa6e7766237f	configfs sanitize configfs_create
ccd63c20fe834a3f98f46f0447e5f106c4ffa2a4	netfilter nf_conntrack uses pr_fmt for logging uses pr_fmt macro for debugging messages of nf_conntrack module
ecc335fc970bb9249c6954cc958f24cec51f52d2	arm omap4 wakeupgen fix the typo in auxcoreboot register save the wakeupgen context-save code reads auxcoreboot0 register instead of auxcoreboot1 register contents while saving auxcoreboot1 fix the same
7ba630f54ca6404351cebea03fbd3c95760b9b02	nfsd constify reply_cache_stats_operations structure reply_cache_stats_operations of type struct file_operations is never modified so declare it as const done with the help of coccinelle
db749359059f3049fc5c66950e5ca85f67d7c1b0	media cx25840 fix return logic when media entity init fails theres no need to free state as it was allocated via devm_kzalloc also lets return the error code instead of something else
c5ad48f3117c4aae379b536f3270fc1efae945c0	arm mach-shmobile ag5evm sdhi requires waiting for idle the sdhi block on the ag5evm requires waiting for idle before writing to some registers
3a3908c8b09d5ec19d543836d4f38d240ae27fe8	nfs fix a compile warning when config_nfs_v4 gcc reports in function warning may be used uninitialized in this function list_for_each_entry_safefreq t wb_list note was declared here struct nfs_commit_info cinfo
4743f83990614af6adb09ea7aa3c37b78c4031ab	ext4 fix warn_on_once in ext4_commit_super if there are racing calls to ext4_commit_super its possible for another writeback of the superblock to result in the buffer being marked with an error after we check if the buffer is marked as having a write error and the buffer up-to-date flag is set again if that happens mark_buffer_dirty can end up throwing a warn_on_once fix this by moving this check to write before we call write_buffer_dirty and keeping the buffer locked during this whole sequence
86b4c14de34d19ec3fc4662761feed9918491658	ubifs replace kzalloc by kcalloc kcalloc manages overflow
60f00153d93e0bea872f1a9f5b01423247649083	clean up nfs4_recall_slot move the test for nfs4_has_session out of the nfs4_state_manager
a43e94a38b91e30f36e8c9ef91bf7bd93061a3a1	hid sony correct sixaxis battery reporting the battery_charging and cable_state flags were backwards on the sixaxis the low bit of report byte __number__ is __number__ when charging and __number__ when not bit __number__ of byte __number__ is __number__ when a usb cable is connected and __number__ when not
cca1fe1aedefede896b3ff2cc1a2493fa0d0035c	ath9k_hw optimize rx descriptor processing for ar9003 no need to process rxdone and ds_info status again in case valid rx status is given
dc833def42e7f2425f69d83a53bee054e80caea5	remove pointless weve already set sk to and dereferenced it so if its null we would have crashed already moreover if it was null we would have crashed anyway when jumping to out and trying to unlock the sock furthermore if we had assigned a different value to sk we would have been calling lock_sock and release_sock on different sockets my conclusion is that these two lines are complete nonsense and only serve to confuse the reader
e57edf6b6dba975eceede20b4b13699d4e88cd78	tipc prevent dropped connections due to rcvbuf overflow when large buffers are sent over connected tipc sockets it is likely that the sk_backlog will be filled up on the receiver side but the tipc flow control mechanism is happily unaware of this since that is based on message count the sender will receive a tipc_err_overload message when this occurs and drop its side of the connection leaving it stale on the receiver end by increasing the sk_rcvbuf to a worst case value we avoid the overload caused by a full backlog queue and the flow control will work properly this worst case value is the max tipc message size times the flow control window multiplied by two because a sender will transmit up to double the window size before a port is marked congested we multiply this by __number__ to account for the sk_buff and other overheads
c0044bc2c62dc3267f2a555ed8342181516008a5	silent the message for gpu scheduler creation
b15aac110a45c52d7f47ab8ee2d68f98044cfe6c	mm memcontrol remove double kmem page_counter init the kmem page_counters limit is initialized to page_counter_max inside mem_cgroup_css_online there is no need to repeat this from memcg_propagate_kmem
aa4d9b53f0d71ff805bbd1e30fcba9d1827a7dd8	media vidioc_enum_freq_bands fix when vidioc_enum_freq_bands is called for a driver that doesnt supply an enum_freq_bands op then it will fall back to reporting a single freq band based on information from g_tuner or g_modulator due to a bug this is an infinite list since the index field wasnt tested this patch fixes this and returns if index __number__
6507e6ebebd2d5f7e17c6f2e32524270edd2a922	protect acpi_pci_roots list with mutex use mutex to protect acpi_pci_roots list against pci host bridge hotplug operations bhelgaas acpi_handle
6c37e1f957be5f67b520e004e196b0e6a9ec2950	fix space preferred around that messages this fixes all space preferred around that messages from
40e1ebe97d58b141332e895facf9e69b8b430ae1	f2fs replace the debugfs_root with f2fs_debugfs_root this minor change for the naming conventions of debugfs_root to avoid any possible conflicts to the other filesystem jaegeuk kim change the patch name
395059fb9269d97198ae3c94a798851e43062da6	net dsa mv88e6xxx rename atu mac accessors rename the functions to more explicit functions which also respect the single underscore convention used in the file meaning smi lock must be held in the meantime define their mac address parameters as an array of eth_alen bytes instead of a char pointer
0265b6cbfe77f0064989852a2b52d6572957525c	arm mxs remove the static mapping is used nowhere now hence can be removed completely
35de3b1aa16842214e0cd7c6036daf4619294314	powerpc implement save_stack_trace_regs to enable kprobe stack tracing it has come to my attention that kprobe event stack tracing does not work on powerpc you can see with the following cd echo stacktrace trace_options echo p kfree kprobe_events echo __number__ will print the following warning save_stack_trace_regs not implemented yet although save_stack_trace which normal event stack traces use is implemented save_stack_trace_regs which kprobe events use is not this is a cheap attempt to implement that function note this may have issues if a task tries to get a stack trace from another task with its regs because it just passes in current to save_context_stack but this does solve the issue with stack tracing kprobe events
15cfd52895751e8f36b48b8ad33f1d68b59611e2	netfilter connlimit factor hlist search into new function simplifies followup patch that introduces separate locks for each of the hash slots
c7b7c609493da428bd5af19d522b14a912b8ea3e	qcom-scm fix endianess issue in __qcom_scm_is_call_available
284f39afeaa4ab1409b8f43b29cdea3007960ee3	mm memcg push handling out to page cache charge function only page cache charges can happen without an mm context so push this special case out of the inner core and into the cache charge function an ancient comment explains that the mm can also be null in case the task is currently being migrated but that is not actually true with the current case so just remove it
c89c7e94bb7d89b39471c79034e3ba1b25d817f5	asoc fsl_spdif fix integer overflow when calculating divisors the calculation code does u64 u32 u32 __number__ the __number__ bits are of no help here as the type is casted only after the multiplication and therefore the result may overflow possibly causing inoptimal or wrong clock setup in an unfortunate case the maximum result value of the first substraction is currently __number__ fix the code to cast before multiplication
7a66800e035bb6a64c2d0f8cb315edabbef819b9	remove high level from want_panel_vdd is a bool so it cant cope with interleaving calls from multiple threads if we want to make that possible wed need to convert want_panel_vdd into a proper ref count but an easier fix is to remove the high level vdd calls from code paths and just rely on the delayed vdd off to avoid needless vdd ping pong after this change only the encoder paths use the high level functions which is fine since both the on and off low level edp vdd calls from intel_dp_aux_ch happen without dropping pps_mutex in between and so want_panel_vdd cant change in between
ec02ac2b7e1ad04ab2486fe9b2fbfc3ad5178f7c	input atmel_mxt_ts derive phys from i2c client adapter this allows userspace to more easily distinguish which bus a particular atmel_mxt_ts device is attached to the resulting phys will be something like
30badc9543490f41497c42f004db02f1e8a29341	gfs2 deletion of unnecessary checks before two function calls the functions iput and put_pid test whether their argument is null and then return immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
293b6a4c875c3b49853bff7de99954f49f59aa75	vmstat use raw_cpu_ops to avoid false positives on preemption checks vm counters are allowed to be racy use raw_cpu_ops to avoid the local_irq_disable overhead and to avoid preemption checks which will be added to the __this_cpu operations add comment again
3d45eb8949efdcafc59769dd584fdf9f94bb6e53	remove shadowed local variable i from i915_interrupt_info just a stray local variable begone
4787c368a9bca39e173d702389ee2eaf0520abc1	add in smp_trace_reschedule_interrupt reschedule vector tracepoints may be called in cpu idle state this causes lockdep check warning below the tracepoint requires rcu but for accuracy it also requires irq_enter tracepoints record the irq context thus the tracepoint interrupt handler should be calling irq_enter and not rcu_irq_enter irq_enter calls rcu_irq_enter so add to smp_trace_reschedule_interrupt with common processing functions smp_entering_irq and exiting_irq exiting_irq calls just irq_exit in because these can be shared among reschedule call_function and call_function_single vectors __float__ testing event reschedule_exit __float__ __float__ __float__ info suspicious rcu usage __float__ __number__ not tainted __float__ __float__ suspicious rcu_dereference_check usage __float__ __float__ other info that might help us debug this __float__ __float__ __float__ rcu used illegally from idle cpu __float__ rcu_scheduler_active __number__ debug_locks __number__ __float__ rcu used illegally from extended quiescent state __float__ no locks held by __float__ __float__ stack backtrace link
b3511d0530c7a2b4fa64d1f5218c5f073ae7b543	tools lib traceevent fix freeing arg on process_dynamic_array the paremeter should not be freed inside of process_xxx because itd be freed from the caller of process_arg we can free it only after it was reused for local usage link
dca0119c3ab69fea2429ec2db7e3686614bd1439	usb dwc3 gadget simplify skipping of link trbs make the skipping of the link trbs built-in to the increment operation this simplifies the code wherever we increment the trb index and ensures that we never end up pointing to a link trb
be02f259fda66bcfc60ecd78a819e1ce28c8bfb9	staging rtl8723au use correct pipe type for usb interrupts use a correct pipe type when filling un interrupt urbs this should finally take care of the warn messages on the console when usb urbs are submitted
e901aa159dac9988c9961c31c01730effe8f5c22	usb dwc3 gadget fix endpoint renaming we were exitting the function before actually renaming anything while at that also always leave control endpoint un-renamed
f152fd5fffa78910c467b17f12d0aa060aa408a6	cifs implement cifs_relock_file that reacquires byte-range locks when a file is reopened
129784abc982ccac43322c2f175f3ca735c2ca73	kconfig switch to long long for sanity instead of using long for kconfig hex and range values which may change in size depending on the host architecture use long long this will allow values greater than int_max on hosts when cross compiling
fec668d36d10f30310ced672df65ec5abf0c0032	ethernet replace pci_pool_alloc by pci_pool_zalloc in alloc_cmd_box pci_pool_alloc followed by memset will be replaced by pci_pool_zalloc
7be859f74ce232361c39d92d29da207ce6ee72bb	regulator palmas correct dt parsing fix the dt parsing to agree with the bindings document some small changes to the value names and also fix the handling of boolean values they were previously using prop now just use of_property_read_bool calls
1d5c65edd930ff05ef036bbade87275e4b5b7b90	wait for power cycle delay after turning off dsi panel power the power cycle delay starts _after_ turning off the panel power do the msleep after frobbing the pmic panel power gpio also toss in a fixme about optimizing away needless waits
ebb36d19a0f71b246df9a15590e3b34256b0f1d8	print the gpu offset as well in gem_info to easily find which memory is used
51a716349946362dee27aa48b1987870cb69636b	crypto cesa directly the checking for the type of algorithm implementation is pretty strange here use regular flags to check for the type instead
5d764912a0ee6db83e962c1501b5b9e58ba14e15	asoc da7213 default to __number__ bclks per wclk to support all formats previously code defaulted to __number__ bclks per wclk which meant __number__ and __number__ bit dai formats would not work properly this patch fixes the issue by defaulting to __number__ bclks per wclk
09065c5f0f1ff4bfb309975e182b746989a869c5	serial fix clearing divisor latch access bit at this point value is always a byte then this code is clearing bit __number__ which is already clear i meant to clear bit __number__
b58a2d31f946f09f507f8a9a59a3356e375c6782	firmware qcom scm mask apq8064 core clk dependency this patch masks the core clk requirement for the apq8064 until the other peripherals correctly describe their clock dependencies or the bus driver is put in place to handle the rpm dependencies this bit will remain masked
43cd99cb178ce3d0a1fb6faa898b30be6dcbc8b5	uas drop inflight list weve the same info doubled in both the inflight list and the cmnd array drop the list
801ab33596f3e2a70a3b3599618d966736299014	fix sparse endian warnings this patch is a tidy up of warnings from the autobuilder sparse cast to restricted __le16 sparse cast to restricted __le16 sparse incorrect type in assignment different base types expected unsigned short unsigned usertype buf got restricted __le16 usertype
c6c20372bbb2f70d2757eed0a8d6860884bae11f	strip cp prefix from codepage in display option parsing code expects an unsigned integer for the codepage option but prefixes and stores this option with cp before passing to load_nls this makes the displayed option in an invalid one strip the prefix when printing so that the displayed option is valid for reuse
6c76a07a711165a31332aa619215f961b115071d	hhf qdisc fix jiffies-time conversion this is to be compatible with the use of get_time default time unit in us in iproute2 patch for hhf as requested by stephen
a1ff7d64c5361c15bac653708a679de13506d283	mtd bcm47xxpart only register partitions if the trx header was filled sometimes the trx offsets are __number__ in that case there is no partition and we should not try to add one brian rewrapped
585628255a8c359d3db81818a23acfc6f22ff6d8	staging csr remove panic at locking the mutex when down_interruptible fail means a signal occur or any other failure we are panicing and it seems that we should not panic instead we would have done a spinlock but currently removing the panic call
9a466cd1dd0da76deef9641dbe64a59194e5ee41	abstract out sink detection code mhl1 and mhl3 have different initialization paths to make both protocols happy sink detection is put into continuation after link mode enablement link
c00cb1b7748aa0e6d2efeb8f4486d788ae61765e	mtd pmc551 remove unnecessary oom messages the site-specific oom messages are unnecessary because they duplicate the mm subsystem generic oom message
ced9017a4fc7ecf35a9c0c0bd8e46d14876b9fd1	use module_pci_driver to register driver removing some boilerplate by using module_pci_driver instead of calling register and unregister in the otherwise empty functions
58c744da9dcc82a4b55a18e05149ae0e32624d11	enable the shadow batch buffer shadow batch buffer is used to shadow the privileged batch buffer which is submitted by vgpus workload this patch is used to unmark this functionality
2f5374d8cf05d8b71f593633bf20972102f591c6	asoc convert wm8711 to table based control init
86bfbc15660a61bb7b3df73db11939eec3393008	alsa sparc amd7930 fix module autoload for of platform driver this platform driver has a of device id table but the of module alias information is not created so module autoloading wont work
18952f20fadef0a5e099f5c4cac34b97644ccc35	clocksource bcm2835 switch to sched_clock_register the __number__ bit sched_clock interface now supports __number__ bits upgrade to the __number__ bit function to allow us to remove the __number__ bit registration interface
f09e3f4fe42caad0c0f59c1489d2b3f512c070b5	remove declaration of unused hw_nmi_is_cpu_stuck commit x86 cleanup cruft removed unused code in the file because of the redesign of the hardlockup watchdog but left declaration of hw_nmi_is_cpu_stuck in so remvoe it link
0142eae3ae15b9b9f0ae2a8e68e3c8dc347a2394	mm kmemcheck skip object if slab allocation failed in the slab allocator kmemcheck_slab_alloc is guarded against being called in case the object is null in slub allocator this null pointer invocation can happen which seems like an oversight move the null pointer check into kmemcheck code kmemcheck_slab_alloc so the check gets moved out of the fastpath when not compiled with config_kmemcheck this is a step towards sharing post_alloc_hook between slub and slab because slab_post_alloc_hook does not perform this check before calling kmemcheck_slab_alloc
dfe076c106f63cf6bcd375c56db9c8c89a088dab	ext4 get rid of code duplication
033853325fe3bdc70819a8b97915bd3bca41d3af	respect servers max size in create_session currently client doesnt respect max sizes server returns in create_session nfs4_session_set_rwsize gets called and are __number__ so they never get set to the sizes returned by the server
2305c54ffc389f1e73f2b1122a4c75bb0e8e6601	smsc75xx dont call usbnet_resume if usbnet_suspend fails if usbnet_suspend returns an error we dont want to call usbnet_resume to clean up but instead just return the error if usbnet_suspend succeed and we have a problem further on the desired behaviour is still to call usbnet_resume to clean up before returning
5cae05cc9f126ae4a0f79798cff9ca3a77bb7006	staging rtl8187se remove an unnecessary line continuation this patch fixed the following checkpatch warning warning avoid unnecessary line continuations
68c7a1c4733c075246556ebd634d4508bdc87e7e	rndis_wlan remove set_channel cfg80211 hook since rndis_wlan only supports managed and ibss modes it doesnt need a set_channel call the callback might be called but it wont matter as nothing can use the channel
c150a502716476b3d3e0035e0e1f86b016980f01	i40e better error messages for nvm update issues add more detail to the nvm update error messages so folks have a better chance at diagnosing issues without having to resort to heroic measures to reproduce an issue change-id i270d1a9c903baceaef0bebcc55d29108ac08b0bd
a6e02554c1036f8c62080ecf4702703427c651a4	bailearly is an int module_param dan carpenter points out that its an int not a bool if bailearly __number__ if bailearly __number__ if bailearly __number__ if bailearly __number__ if bailearly __number__ if bailearly __number__ bailearly __number__ bailearly __number__ __number__ if bailearly __number__ if bailearly __number__ if bailearly __number__
0fbd44ab772890cf5dcda87311575e99d2c000c1	asoc pxa magician convert to table based dapm and control setup use table based setup to register the controls and dapm widgets and routes this on one hand makes the code a bit shorter and cleaner and on the other hand the board level dapm elements get registered in the cards dapm context rather than in the codecs dapm context
569309b42fc67a8b42f57adb68764bd10bcf2178	mips oprofile backtrace dont fail on leaf functions continue the backtrace if we cannot find sp adjustment and ra save in that case just assume the current ra this allows us to get samples of frequent callers of glibc memset patchwork
030270ba1aa2072d2967c11129c67d9de9aa762b	alsa maestro3 enable docking support for dell latitude enable i2s docking for dell latitude this allows the audio output on ii to work and probably also the audio inputs on ii the volume cant be adjusted none of the mixer controls currently supported affects the i2s output they belong to the codec responsible for the laptop internal connectors speakers
78698d66a1a7747b02e73e427d503c1426b8cd32	usb host ehci-dbg fix up closing parenthesis this patch puts the closing parenthesis at the statement end removing unnecessary new line
f6127704320f70993a68abf6d17c89df461580a7	staging iio isl29028 prefix functions
3de8fbac6a8ac40f373e9bdb6b7ce7528070079a	staging wilc1000 remove unused hif_drv in host_int_get_ipaddress this patch removes unused hif_drv in host_int_get_ipaddress there is no need to check null and print debug log
6d385c0aa31de99da391fda0fc43462e2df20863	use helpers
37e310edf3f6090eb118b7fcafd00221c290ac6b	media test if videobuf_dvb_get_frontend return null based on commit e66131cee501ee720b7b58a4b87073b8fbaaaba6 not testing videobuf_dvb_get_frontend output may cause oops if it return null this patch fixes this issue the semantic patch that found this issue identifier statement s s2 i when if s if s2
01c2965f0723a25209d5cf4cac630ed0f6d0edf4	mm dmapool sysfs file outside of the pool lock lock cat followed by removal the device leads to info possible circular locking dependency detected not tainted is trying to acquire lock at task is already holding lock at lock already depends on the new lock existing dependency chain in reverse order is the problem is the lock order of pools_lock and kernfs_mutex in dma_pool_destroy vs show_pools call path this patch breaks out the creation of the sysfs file outside of the pools_lock mutex the newly added pools_reg_lock ensures that there is no race of create vs destroy code path in terms whether or not the sysfs file has to be deleted and was it deleted before we try to create a new one and what to do if device_create_file failed
764f612c6c3c231b9c12cfae7c328ccc9c453258	blk-merge dont compute bi_phys_segments from bi_vcnt for cloned bio it isnt correct to figure out from if the bio is cloned
e13d8f383985b7ab8c859c1fa327e9b3d201894e	sr ensure pm-runtime callbacks can be invoked with irqs disabled smartreflex should be disabled while entering low power mode due to a smartreflex values are not defined for retention voltage further b with smartreflex enabled if cpu enters lower c-states fsm will try to bump the voltage to current opps voltage for which it has entered c-state hence smartreflex needs to be disabled for mpu core and iva voltage domains in idle path before enabling auto retention voltage achievement on the device however since the current pm_runtime setup for smartreflex devices are setup to allow callbacks to be invoked with interrupts enabled calling smartreflex from other contexts such as idle paths where preemption is disabled causes warnings such as the following indicating of a potential race __float__ from __float__ from __float__ from __float__ from __float__ from __float__ from __float__ from instead we use pm_runtime_irq_safe to tell the pm core that callbacks can be invoked in interrupt disabled contexts
eac5ad8861639754a3976bfa1581a73e772624c6	vop dont reject empty modesets so that when drm_ioctl_mode_setcrtc is called without a fb nor mode the crtc gets disabled link
a86ff3cf47b3ba868214bfb8d2181409913ccbbe	ath9k add initvals required for cus217
905b57972149f205aa73b0a3b6935b0e5470ab24	arm mm fix ecc mem policy printk ecc policy can be applied to the whole system when this bit is implemented by soc vendor imp bit __number__ in l1 page table entry format when this bit is not implemented by soc vendor it doesnt mean that system has no other way how to do ecc this patch ensures to show this message only when ecc is requested via cmd line and runs on appropriate arm core
6670070742991c69e02dde38c611a6c31ce8f30b	pci keystone remove unnecessary oom message the site-specific oom messages are unnecessary because they duplicate the mm subsystem generic oom message this patch fixes the following checkpatch warning warning possible unnecessary out of memory message
4aa575a91e637ab1c5e89c91bb59e91e518cb5f6	staging most simplify expression this patch replaces the ternary with a way simpler subtraction
d22ca7de770e2a683eac000ba4db5a95e2f4c969	btrfs make free_fs_info call unconditional and dont bother with it after btrfs_fill_super failure unlike will be called even if we have not got non-null
345566bd724e13448c10f1489dbc18290af01931	x25 use proc_remove_subtree and dont bother with while we are at it procfs fops do not need it
fbab62c5cd57a6acd9ed80903532c86897d2d560	irqdomain use irq_get_trigger_type to get irq flags use irq_get_trigger_type to get the irq trigger type flags instead calling irqd_get_trigger_typeirq_desc_get_irq_datavirq link
3789c85206dd4efed58c83d1c29e865f22514410	spi sh-msiof constify platform_device_id the platform_device_id is not modified by the driver and core uses it as const
c06f308aa3318c60d5d6dd41a6244ce2177a7f45	mfd twl6040 fix insert space after error this is part of an effort to clean-up the mfd subsystem error space required after that __number__ error space required before that __number__ total __number__ errors __number__ warnings __number__ lines checked
e5a89998d4c43cd36397e1d9e061bfdab0bcd094	media media usb dvb-usb-v2 cleaning up uninitialized variables there is a risk that the variable will be used without being initialized this was largely found by using a static code analysis program called cppcheck
9ca86b204b3c874e6ada28309f607e3aa74d60a9	use irq_set_handler_locked use irq_set_handler_locked as it avoids a redundant lookup of the irq descriptor search and replacement was done with coccinelle struct irq_data expression e1 e1 e1
b5f3d7af286a28e2fcc92debaba40844cb32bfb4	asoc rcar off by one in rsnd_scu_set_route if id array_sizeroutes then we read one space beyond the end of the routes array
57007121228347515187049a9c65f7cbeb923dd1	cfg80211 fix checking nl80211_send_station return value the return value from nl80211_send_station is the length of the skb or a negative error so abort sending the message only when the return value was negative this fixes the ibss_rsn wpa_supplicant test case
eb004603c857f3e3bfcda437b6c68fd258c54960	sctp fix spelling mistake atempt attempt trivial fix to spelling mistake in warn_once message
b5ffc9bc38a4766d586c3aca6830ed2bd6952e5b	introduce i915_gem_object_finish_gtt like its siblings finish_gpu this function clears the object from the gtt domain forcing it to be trigger a domain invalidation should we ever need to use via the gtt again note that the most important side-effect of finishing the gtt domain aside from clearing the tracking domains is that it imposes an memory barrier so that all accesses are complete before it returns which is important if you intend to be modifying translation tables shortly afterwards the second most important side-effect is that it tears down the gtt mappings forcing a page-fault and invalidation on next user access to the object
ba1a68bf1308a71a07d2462f4c38c242e08f92ba	samples bpf relax test_maps check hash map is unordered so get_next_key iterator shouldnt rely on particular order of elements so relax this test
a3081893cab48df3facff8144d9506610213241a	serial xuartps do not enable parity error interrupt the patch makes changes not to enable parity error interrupt with the current implementation each parity error results in two distinct interrupts almost always the first one is normal parity error interrupt with no data in the fifo and the second one is a proper rx interrupt with the received data in the fifo by disabling parity error interrupt we still ensure handling of parity errors as for the rx fifo interrupt the parity error still shows up in the interrupt status register considering the fact that the by default inpck and ignpar are not set this is the optimal implementation for parity error handling cherry picked from commit bf9f610b445e2c9ed33c41e1e0e30b43be4e1f97 with manual conflict resolution
b049aadca3f2535bea245cb0bba1393d9a60c7a4	reuse eth_mac_addr use eth_mac_addr for remove typhoon_set_mac_address since it do currently the same as eth_mac_addr additional advantage eth_mac_addr already checks if the given address is valid
49356ae94c8238eb3945244f4e5a0a263eafba24	arm at91 convert timer to clock_event_device move at91s timer functions from struct sys_timer at91sam926x_timer into struct clock_event_device pit_clkevt this will allow the sys_timer fields to be removed and eventually lead to a complete removal of struct sys_timer
577c8c886823ea81fae92ff54ae4225a3f1f6c75	move pnv_pci_ioda_setup_opal_tce_kill around pnv_pci_ioda_setup_opal_tce_kill called by pnv_ioda_setup_dma to remap the tce kill regiter whats done in pnv_ioda_setup_dma will be covered in pcibios_setup_bridge which is invoked on each pci bridge it means we will possibly remap the tce kill register for multiple times and its unnecessary this moves pnv_pci_ioda_setup_opal_tce_kill to where the phb is initialized pnv_pci_init_ioda_phb to avoid above issue
df7841604394c57289072d15fcd90a2585b701a6	net eth davinci_cpdma mark a local variable static only used locally found by sparse
d63f7e8ca560dc9a76a15c323cb9cba14b25f430	rt2x00 rt2800lib add bbp post initialization for rt3593 based on the ralink driver reference rt3593_postbbpinitialization in
57e33781ce5aaab86b4db7799f3505988b5226e2	asoc samsung add null check in res could be null from one of the operations above line __number__ thus check res for null before releasing the region to avoid null pointer dereference
bd50f8924c684f84416fb58c11eb24619b041f25	fix ilog2 compile failure im getting compile failures building this driver which i narrowed down to the ilog2 call in error undefined make1 __modpost error __number__ make modules error __number__ the use of is confusing the compiler and resulting in the __builtin_constant_p in ilog2 going insane i tried making it take the u32 pgsize as an argument and the expansion of in the caller but that failed as well with this patch in place the driver compiles on my gcc here
cfe0467c4e1390ba9386389e722d1d409201a5dc	powerpc switch to generic compat rt_sigpending
2306509605d3cb45b8480089af2d282600650e9e	spi dw-spi single register read to clear irqs instead of clearing the rxu rxo and txo irqs individually with __number__ register reads a single read of the icr register will do the same thing
13dab904d5575c494d54643079f690b2a698ac14	media media omap3isp video drop setting of vb2 buffer state to vb2_buf_state_active there isnt a need to assign the state of vb2_buffer to active as this is already done by the core
aa2fb8862522690ffd7cfc42a3643d4b08ee4b46	usb musb use shared irq in the da8xx usb and cppi __float__ are sharing the same interrupt line update the driver to request a shared irq
08e3681ab8deddb3770cf8beef599b68c3530e5a	reform ib-core sa_query use raw management helpers to reform ib-core sa_query
223757016837d5bc8546c5683e13fbafe6cb374d	block_dev remove dax leftovers dax support for block devices was removed in commits block disable block device dax by default and block remove blk_dev_dax config option but we still kept a call to dax_do_io and some uneeded i_flags manipulations introduced in commit bbab37 block add support for dax to block devices remove those leftovers
dfd1582d1e4d117f46df720679d595f984ef902a	ipv4 loopback device ignore value changes after device is upped when lo is brought up new ifa is created then devconf and neigh values bitfield should be set so later changes of default values would not affect lo values note that the same behaviour is in ipv6 also note that this is likely not an issue in many distros for example fedora __number__ because userspace sets address to lo manually before bringing it up
61fc39204bc0db0070267fe0f7920c38b0af87ef	ath9k_htc wmi match wait_for_completion_timeout return type return type of wait_for_completion_timeout is unsigned long not int as time_left is exclusively used for wait_for_completion_timeout here its type is simply changed to unsigned long api conformance testing for completions with coccinelle spatches are being used to locate api usage inconsistencies int return assigned to unsigned long patch was compile tested with x86_64_defconfig patch is against localversion-next is
346e7099c299eae085efd9b4aeda813d69bc364b	bluetooth remove pointless inline function the inline function for controller amp discover response info is rather useless just include the code into the function that builds the whole response
8067042ad9543b410b7dc355ec312c2b61979eec	watchdog orion use the reference clock on armada __number__ soc the __number__ mhz reference clock has better stability so its use is prefered over the core clock change the armada __number__ clock initialization to use this reference clock to ensure the driver is compatible with an old devicetree also provide a fallback path which will silently return to the previous behavior while here add the clock specification to the binding documentation
3ad7b1477ef9b01988ac052b02be9cd410c95157	net axienet fix return value check in axienet_probe in case of error the function of_parse_phandle returns null pointer not err_ptr the is_err test in the return value check should be replaced with null test
a84511f7fbeb37e26aacb9c72f5a21ffc24e909e	ideapad let camera_power node invisiable if no camera
9fb444f22f09cfad3798e3610f7dc62f8a385ee8	arm shmobile armadillo add pwm backlight power supply commit pwm-backlight add power supply support added a mandatory power supply for the pwm backlight add a fixed regulator to board code with a consumer supply entry for the backlight device cherry picked from commit ad11cb9a5cf96346f1240995c672cdbb5501785c
9512925a2cc2b1cd0206bb93bad200a69716f998	qede correctly map aggregation replacement pages driver allocates replacement buffers before-hand to make sure whenever an aggregation begins there would be a replacement for the rx buffers as we cant release the buffer until aggregation is terminated and driver logic assumes the rx rings are always full for every other rx page thats being allocated regular the page is being completely mapped while for the replacement buffers only the first portion of the page is being mapped this means that a once replacement buffer replenishes the regular rx ring assuming theres more than a single packet on page wed post unmapped memory toward hw assuming mapping is actually done in granularity smaller than page b unmaps are being done for the entire page which is incorrect
0feb1ed5c51acd5cea3d65221e8693c3c4bb4c8d	staging vchiq_arm handle error case of get_user_pages its possible that get_user_pages could fail so evaluate its return code and handle this error case properly this issue has been found by cppcheck
51ea1c7dbd4c5151b7f5777cabc505d43d2c42cb	iwlwifi mvm fix wrong offset while reading from nvm as part of thermal throttling some data is being read from nvm the offset is in words but was addressed as in octets fixed
1abd601864f42a5d10e6fa0b66582591b4497b94	add eeh_dev to the cache during boot commit f8f7d63fd96ead101415a1302035137a866f8998 trace eeh device from cache broke eeh on pseries for devices that were present during boot and have not been eeh_check_failure will get the eeh_dev from the cache and will get null eeh_addr_cache_build adds the addresses to the cache but eeh_dev for the giving pci_device is not set yet just reordering the call to eeh_addr_cache_insert_dev works fine the ordering is similar to the one in eeh_add_device_late
3d535eddf2b7fc93126aaf4e36c05fe751fb8c4b	remove unecessary null check in gem_free the never gets called with a null pointer the check is redundant also checking after the upcast allows compilers to elide it anyway spotted by coverity
c5bac2e75270b10ff5a5675bebad4df2106506f1	media mt20xx use to do small hexa dumps since commit merge branch printk-cleanups continuation lines require kern_cont instead lets just use to print the buffer
c458e45045da96b4d3506ba2acab02af8c98c8c2	use of_mm_gpiochip_remove use the newly created of_mm_gpiochip_remove function for cleaning up of_mm_gpiochip_add
4caab3ba593a6999070ecd5ba96ea7791444db29	mtd cmx270_nand remove unnecessary oom messages the site-specific oom messages are unnecessary because they duplicate the mm subsystem generic oom message
c2996948ac36a9082f27b9ad94dac4c821a9c33d	pci simplify mps test for downstream port pcie hotplug bridges are always either root ports or downstream ports no other device type can have a pcie link leading downstream to a slot root ports dont have an upstream bridge so is true if and only if dev is a downstream port that means we can simplify this by looking at the type of dev itself without looking upstream at all no functional change
c3c6c9c810e100ab92c782e855f9ab9991065f4e	fix call to mlx5_core_qp_modify pass __number__ in the sqd_event parameter
6e1ee5d2e9e411892b5d84e3ea93e3fc88ac786c	mac80211 remove vlais usage from mac80211 replaced the use of a variable length array in struct vlais with a c99 compliant equivalent this is the original vlais struct struct struct aead_request req u8 privcrypto_aead_reqsizetfm aead_req this patch instead allocates the appropriate amount of memory using a char array the new code can be compiled with both gcc and clang small style cleanups
966fab00b0e19e0db3cb11d81bda5d0940176d5e	arm kexec advertise location of bootable ram advertise the location of bootable ram to kexec-tools kexec needs to know where it can place the kernel in ram and so be executable when the system needs to jump into it advertise these areas in with a system ram boot alias tag link
ffe300107d931c5cde5383db420b90e856db84ed	media stv090x add an extra protetion against buffer overflow as pointed by smatch stv090x_optimize_carloop error buffer overflow car_loop_apsk_low __number__ __number__ stv090x_optimize_carloop error buffer overflow car_loop_apsk_low __number__ __number__ stv090x_optimize_carloop error buffer overflow car_loop_apsk_low __number__ __number__ stv090x_optimize_carloop error buffer overflow car_loop_apsk_low __number__ __number__ stv090x_optimize_carloop error buffer overflow car_loop_apsk_low __number__ __number__ the situation of a buffer overflow wont happen in practice with the current values of car_loop table yet the entire logic that checks for those registration values is too complex so better to add an explicit check just in case someone changes the car_loop tables causing a buffer overflow by mistake this also helps to remove several smatch warnings with is good
30b39f0488eb114b3523de7a6579ef8ff2c40a6e	remove exynos_plane_dpms call with no effect exynos_plane_dpmsdrm_mode_dpms_on calls the win_enables callback from the underlying layer however neither one of these layers implement win_enable fimd mixer and vidi thus the call to exynos_plane_dpms is pointless
2e54b9b1b0ace6997aa4f9811af0811b2d8160f2	make local symbol layoutreturn_ops static fixes the following sparse warning warning symbol layoutreturn_ops was not declared should it be
a6976cdfe69756436ed8c22b7a03e47a7efe36fb	mtd ifc nand utilize oob_required parameter dont read oob if the caller doesnt require it
f3f99d37e668f080d167cf11f3b2e986df2d315d	ata fix ering sysfs time printing the sysfs file for the libata error handling has multiple issues in the way it prints time stamps it prints a nanosecond value using a format string which drops some leading zeroes it converts a jiffes value to a timespec using jiffies_to_timespec which takes a long argument so the result is wrong after a jiffies overflow __number__ days we try to avoid using timespec because that generally overflows in __number__ although this particular usage is ok this replaces the jiffies_to_timespec call with an open-coded implementation that gets it right
f468980171fa6293917a8b59bfec71c6616e06c9	educate users in dmesg about reporting gpu hangs untangling me-too reports that actually arent is really messy and we need to make sure the blame is put where it should be right from the start v2 improve the wording from bens suggestions danvet frob the message as suggested by paulo on irc
f17331eb4bbb1db8a05ac1c63d39f4d5adec8835	staging rtl8188eu core remove null test before vfree vfree frees the virtually continuous block of memory beginning at addr if addr is null no operation is performed so null test is not needed before vfree
00b1edf16960695d820607845797b14e6ed1a26c	ath6kl fix tcp corruption commit ath6kl fix system freeze under heavy data load aligns the skb data without checking if the skb is cloned because of this ath6kl can corrupt the local tcp stack information that can result in tcp retransmission failing and tcp connections stalling to avoid the corruption we need to copy the skb now the alignment in ath6kl_htc_tx_buf_align doesnt corrupt tcp packets anymore and is not even used for the cloned skbs that got copied since the alignment of the data is handled at the copy time
d991938a807a63c58c9c0fa6cd05cd2490aa6993	hid hid-lg4ff add support for new version of dfgt wheel it has been reported that there is a new version different usb rev of the logitech dfgt in the wild this patch allows the kernel to recognise this wheel and send it the command to enter native mode
d558c4733759e077cf449246983a5d1fe97fc434	spi slink-tegra20 move runtime pm calls to transfer_one_message the prepare_transfer_hardware is called in atomic context and calling synchronous runtime pm calls can create scheduling deadlock therefore in place of calling runtime pm calls from message transfer calling this in transfer_one_message
fbe2ddcdcca9c15558533cb75e5161152338b548	thermal ti-soc-thermal cleaning up wrong address is checked wrong address is checked after memory allocation
b26f72042e433642787e51fb3f40dbdd9969f6e1	cpufreq revert cpufreq dont use cpu removed during cpufreq_driver_unregister this reverts commit cpufreq dont use cpu removed during cpufreq_driver_unregister with the addition of the following commit this is not required any more commit b9ba2725343ae57add3f324dfa5074167f48de96 author viresh kumar linaro.org date mon jan __number__ __number__ __number__ cpufreq simplify __cpufreq_remove_dev rjw subject and changelog
685d632804b89ea25d3339afad162c48646ada5c	ieee802154 ensure of sending __number__ packets this patch changes the __number__ mtu to __number__ others stack have only a __number__ byte array for uncompressed packets this avoid that these stacks have an overflow sending __number__ uncompressed packets isnt also rfc complaint
45240340568a799fa140645af2a45600dfe68694	fix adis16220 channel offsets and scales most of the channel offsets and scales in the adis16220 are incorrect temperature scale is off by a factor of __number__ voltage scale is off by a factor of __number__ acceleration seems to have a typo __number__ since it should be instead of __number__ temperature offset is completely wrong this patch fixes these issues
67ad4e08dcc772153fda90cc747cfc9e03ab44f6	do not return a error in remove function in the linux device driver model the remove callback is not allowed to fail and the device will be removed regardless of the return value of the remove callback so if we abort in the remove function and do not free all resources we will create a resource leak also all kinds of undefined behaviour are expected to happen since the iio device is still there while its parent is already gone the errors which the driver tries to handle in the remove function are non-critical so we can just ignore them and continue to free all resources and remove the iio device
c5cf4606b6659e711258b6e567415ab83a3b646c	staging comedi s626 remove mc_disable macro this macro relies on a local variable having a specific name replace it with a new helper function s626_mc_disable
96651a0732d148f7e4a59cec6aa174049866cd0e	clocksource sun4i factor out some timer code the set_next_event and set_mode callbacks share a lot of common code we can easily factor to avoid duplication and mistakes
e260e404ba45422e816eb3af01687870097745ac	use offset_in_page macro use offset_in_page macro instead of addr
4112eb1899c0e711b2ab1491f51215359cf94d74	perf evlist default to syswide target when no maps set if all a tool wants is to do system wide event monitoring there is no more the need to setup thread_map and cpu_map objects just call perf_evlist__open and it will do create one fd per cpu monitoring all threads link
1651d0a9be0009460c5fdc822505749f295c5ba9	revert n_tty unthrottle tty when flushing read buffer this reverts commit this was fixed by a previous patch already
d32386086b4a250bd71125f8d760cfffada0e422	net sa11x0-ir set netdevs parent struct device add the missing set_netdev_dev call to set the parent device correctly for this network interface
1aeb9c651c06282e84c33eb838d1069582879af8	bluetooth fix notifying mgmt power off before flushing connection list this patch moves the mgmt_powered notification earlier in the hci_dev_do_close function this way the correct not powered error gets passed to any pending mgmt commands without the patch the pending commands would instead get a misleading disconnected response when powering down the adapter
894a2556e7691f87ee4b04e4a4b04a1814c572fa	tcm_usb_gadget fix enabled attribute failure fix up tcm_usbg_tpg_store_enable return value to propagate usbg_attach failure up to user-space if no hdc is found
3b4331d9a4f2d99603c38bfcac79943b7c6c5439	perf stat report unsupported events properly commit perf stat use read_counter in read_counter_aggr broke the perf stat output for unsupported counters perf stat __number__ sleep __number__ warning event is not supported by the kernel performance counter stats for system wide __number__ __float__ seconds time elapsed where it used to be perf stat __number__ sleep __number__ warning event is not supported by the kernel performance counter stats for system wide __float__ seconds time elapsed this patch fixes the issues by checking if the counter is supported before reading and logging the counter value link
326d07cb30fed2387efccd4bf3bd8e4f28719e9e	kvm x86 minor size optimization some fields can be constified made static to reduce code and data size numbers for a __number__ bit build text data bss dec hex filename before __number__ __number__ __number__ __number__ d67 after __number__ __number__ __number__ __number__ d3f
f7978a0c581a8a840a28306f8da43e06e7fef3bf	allow the user to pass a context to any ring with full-ppgtt we want the user to have full control over their memory layout with a separate instance per context forcing them to use a shared memory layout for not only duplicates the amount of work we have to do but also defeats the memory segregation on offer
97f39af4b315d7c65504c8e033e3cf8527dd65cb	soc ti knav_qmss_queue export api calls for use by user driver currently only few of the api calls are exported this creates problem when the modules are built as modules and another user module such as netcp_core try to use these api calls and they are also built as module this patch export these apis to address the issue this is needed to support allmodconfig for arm
8bbf9f440f196ee08cc5ab1c19e62b1c5a736ff0	drivers hv vmbus terminate vmbus version negotiation on timeout commit terminated vmbus version negotiation incorrectly we need to terminate the version negotiation only if the current negotiation were to timeout
977f857ca566a1e68045fcbb7cfc9c4acb077cf0	pci move mutex locking out of pci_dev_reset function the intent of git commit pci introduce __pci_reset_function_locked to be used when holding device_lock was to have a non-locking function that would call pci_dev_reset function but it fell short of that by just probing and not actually reseting the device to make that work we need a way to move the lock around device_lock to not be in pci_dev_reset as the caller of __pci_reset_function_locked already holds said lock we do this by renaming pci_dev_reset to __pci_dev_reset and bubbling said mutex out of __pci_dev_reset to pci_dev_reset a wrapper around __pci_dev_reset the __pci_reset_function_locked can now call __pci_dev_reset without having to worry about the dead-lock
036594112c58421bb7b01444620188fde21962a6	staging unisys include remove unused function spar_check_channel_server removed unused function spar_check_channel_server from
8a76e5383fb5f58868fdd3a2fe1f4b95988f10a8	media mx2_camera fix mbus format handling do not use mx2_camera_swap16 and mx2_camera_pack_dir_msb flags the driver must negotiate with the attached sensor whether the mbus format is uyuv or yuyv and set csicr1 configuration accordingly this is needed for the video function on to perform properly since an earlier version of this patch has been proven wrong and has been reverted and a commit depending on it media visstrim_m10 remove use of mx2_camera_swap16 is in the mainline move a macro definition to a more logical place applying directly because mauro is on vacation linus
b194218dba531b9c36080d29d10fdf9ef96a15bf	staging comedi addi_apci_16xx add defines for the pci device ids the pci device ids supported by this driver are used multiple places in the code to improve maintainability create for them
87790601cc603ea657fa667dd329fb21f318dfa9	staging comedi dyna_pci10xx remove unused bars from the private data all of the pci device base address registers are saved in the private data but only bar2 and bar3 are used by the driver remove the others
22a767269a767b3ee91e4aaea353ac6bec6a912d	rcu move tiny_rcu quiescent state out of extended quiescent state tiny_rcus rcu_idle_enter_common invokes rcu_sched_qs in order to inform the rcu core of the quiescent state implied by idle entry of course idle is also an extended quiescent state so that the call to rcu_sched_qs speeds up rcus invoking of any callbacks that might be queued this speed-up is important when entering into dyntick-idle mode if there are no further scheduling-clock interrupts the callbacks might never be invoked which could result in a system hang however processing callbacks does event tracing which in turn implies rcu read-side critical sections which are illegal in extended quiescent states this patch therefore moves the call to rcu_sched_qs so that it precedes the point at which we inform lockdep that rcu has entered an extended quiescent state
d8a816fc6f6a1d262798dc43d6791c3e93d2d2b5	usb gadget composite add reset api at usb_gadget_driver add reset api at usb_gadget_driver it calls disconnect handler currently but may do different things in future
69d588392b057c0cedb1ba58d7973b77a65997ec	regulator core print error value when constraints are not applied with commit regulator core fix the init of dt defined fixed regulators we ensure that regulator must be capable of providing its current voltage when constraints are used however adding the return value in the print is a little more informative to explain the nature of the failure involved so instead of providing message such as smps9 failed to get the current voltage having error value added to the message such as smps9 failed to get the current voltage-22 is a little more informative for debugging the error
a334bc7df010b5d427b6f37bc9db34759e372a2e	remove gfx8 registers that vary between asics those register mask definitions are different in polaris compare to former gfx __number__ gpus so remove them from misusing
d46e0a8bdb6ef581167bb85129febc007e53d205	media gp8psk make local symbol gp8psk_fe_ops static fixes the following sparse warning warning symbol gp8psk_fe_ops was not declared should it be
62343997e475b8c33fef0d8549eef49f6855ae0a	alsa remove superfluous input amp init the amps will be initialized via activate_path thus its superfluous to set in alc_auto_init_analog_input
db9355c296eb71271bb3807ad4a9d43f6b3c35d3	xfs print useful caller information in xfs_error_report xfs_error_report used to just print the hex address of the caller will give us something more human-readable
bc24fbe9df6623500ad1fab92e71265d4cb7fa2a	clean up wave gfx8 helper de-numberify indirect register access for gfx v8
907cd2485b828deea069b100b6852ea0e54829da	staging lustre llite use around long macro this patch fixes the following error macros with complex values should be enclosed in parentheses
c01d568e7f835ed429145670e8876fddff2f99ba	media v4l atmel-isi defer clock unpreparation to time the pclk and mck clocks are prepared and unprepared at probe and remove time clock unpreparation isnt needed before the clocks and the operation happen in non-atomic context we can thus defer unpreparation to time
e9f1af393477bd4a60e23531b579b325cf1918da	dont store current shared dpll in the new pipe_config now that shared dplls configuration is staged theres no need to track the current ones in the new pipe_config since those are released before making the new pipe_config effective
95bb9414657bbf92e38b72440913a693c27e373c	staging comedi pcl711 remove pcl711_size this define is only used in the comedi_request_region call it doesnt really add any clarity to the code so remove it and just open code the value
db10e201172f48dad29d81ee1fec96384f0eab35	iio at91 fix adc_clk overflow the adc_clk variable is currently defined using a unsigned integer which will overflow under some very valid range of operations such overflow will occur if for example the parent clock is set to a frequency and the adc startup time is larger than to fix this introduce an intermediate variable holding the clock rate in khz
24e3e5ae1e4c2a3a32f5b1f96b4e3fd721806acd	input wacom fix physical size calculation for bamboo this calculation determines the physical dimensions of the tablet used later on in calculate_touch_res to obtain the touch sensor resolution instead of dividing the logical size by the resolution the current code performs a multiplication this doesnt pose a problem for the bamboo since the resolution and scale factor happen to be identical but will produce an incorrect result for other cases
962539a068a5a9b9ab2729f4f3ae88ef85fecf4f	staging fbtft use use family of macros where we have a reference of a device
72ee734a6716aac5aaf336da70a811e308d2a84e	i2c mxs correctly setup speed for non devicetree commit cd4f2d4 i2c mxs set i2c timing registers for mxs-i2c only covered the case for devicetree and made platform_data based boards bail out with correctly support the latter one too
35225eb7a5589407299033bfa7e1ac723b17e2b5	mac80211 remove ieee80211_tx_info from rate_control_apply_mask signature remove unnecessary ieee80211_tx_info pointer from rate_control_apply_mask signature rate_control_apply_mask will be used to define a ratemask in rate_control_set_rates for station rate table
2668b0b16cb555abe1b35a1c3cdeb482799fb7cb	brcmfmac initialize escan function pointer during scheduled scan for scheduled scan results the driver does a escan to obtain bss details from the firmware however the escan uses a dynamically determined function this needs to be set appropriately when handling scheduled scan results to avoid null pointer access
f882cb7684cf54d4f5d3e25443a80a039e1b4bd7	tipc initialize peer session field of newly created link endpoint initializes the peer session number field of a newly created link endpoint to an invalid value this eliminates the remote possibility that it will accidentally match the session number used by the peer the first time the link is activated and cause the link to ignore a valid reset message
e150c4ccbe7246c27b5208599fe9f6677c93b5fe	tty msm_serial remove unneeded console set it doesnt make sense to set console to uart_port in at that time the console is set by uart_add_one_port already the call chain looked like uart_add_one_port once uart_configure_port register_console co second time
0e50e92669357e4702fcd6a85e2f0d6e92295664	mfd axp20x constify axp20x_acpi_match and rid unused warning warning defined but not used
bad7192b842c83e580747ca57104dd51fe08c223	perf fix perf_event_ioc_period to force-reset the period vince weaver reports that on all architectures apart from arm perf_event_ioc_period doesnt actually update the period until the next event fires this is counter-intuitive behaviour and is better dealt with in the core code this patch ensures that the period is forcefully reset when dealing with such a request in the core code a subsequent patch removes the equivalent hack from the arm back-end link
b721fe2a3a92b896ba1b41e338471dfef672052a	hwmon ina2xx use div_round_closest to avoid rounding errors use div_round_closest when dealing with the calibration values to make the calculations less error prone
854c94a7854a4fabdd7db451cf1774e6dcba6bab	remove a superflous semi-colon this macro doesnt need a semi-colon
0639ba6759857ca3e8d29669e1234ef34b52a29e	staging unisys fix placement of logical ops in several if statement lines had the logical operators in the wrong place so fix these by moving the operator to the end of the previous line
fa7b4ca50f03b6e71665ccef66ca000311353fc8	usb musb dsps rename ti81xx_driver_data to am33xx_driver_data the ti81xx platform is not fully supported right now this patch renames the date structure to a am33xx prefix which is actually used
d5dc0ad928fb9e972001e552597fd0b794863f34	fix error number for failed kthread fix the return value while failing to create the kswapd kernel thread also the error message is prioritized as kern_err
99fdc6b9bd022ab5fb0f2e45f11a5a53697221fb	remove unnecessary pci_bus_find_capability declaration pci_bus_find_capability is declared in remove the pci_bus_find_capability declaration from
8027197220e02d5cebbbfdff36c2827661fbc692	kprobes x86 prohibit probing on since the kprobes uses do_debug for single stepping functions called from do_debug before notify_die must not be probed and also native_load_idt is called from paranoid_exit when returning int3 this also must not be probed link
d0e9ed58f46b5aa101f90834a87c4464814e1721	staging speakup remove unnecessary space this patch fixes the warning error space prohibited before that msg_first_index and removes the unnecessary space
22ccb2a146f92b81cc5731db8c1ee2316cca3576	gma500 medfield fix possible null pointer dereference the use of pointer sender should be after the null check
5f2144d9b2ea297aa75f0f952be96af7f02360f1	ath10k create ath10k_core_init_features its easier to manage firmware version differences when we configure them in one place rename ath10k_core_init_max_sta_count to ath10k_core_init_firmware_features and start moving most of the firmware version features handling to that function
2ecdb23b8c545fbee95caad0f2e45082787563ee	check the algorithm ids obtained from parsing an certificate check that the algorithm ids obtained from the parse by oid lookup corresponds to algorithms that are available to us
93893862fb7ba704ec5a6872a294c9cc2b0d4ca3	path_init dont bother with checking may_exec for lookup_root well hit that check in link_path_walk anyway
c90929020986d12577570139ed6b787367823ade	omapdss apply remove unnecessary call to mg_clear_shadow_dirty when doing a manual update in dss_mgr_start_update we clear the shadow dirty flags although there isnt any harm in clearing them the need to clear them out here should never arrive when applying configurations for a manual update manager we never do any register writes calls to dss_mgr_write_regs and dss_mgr_write_regs_extra never happen while applying we do all these writes only when we call dss_mgr_start_update hence there is never a time when the shadow registers are dirty remove the call to mg_clear_shadow_dirty
2968da0b2c7297a29d49c7084d6865c2cf627093	usb musb ux500 attempt to find channels by name before using pdata if we can ever get to a state where we can solely search for dma channels by name this will almost completely alleviate the requirement to pass copious amounts of information though platform data here we take the first step towards this the next step will be to enable device tree complete with mapping
cb64ca54076243b1d88b0a8430504d0a4cf3a5fa	spi qup convert ot let spi core handle checking transfer speed set then spi core will handle checking transfer speed so we can remove the same checking in this driver also remove checking in spi_qup_setup the checking is done by spi core
982785c6b05a82c01e90687b7e25ee87c8970b2e	mm thp fix leaking mapped pte in __collapse_huge_page_swapin currently khugepaged does not permit swapin if there are enough young pages in a thp the problem is when a thp does not have enough young pages khugepaged leaks mapped ptes this patch prohibits leaking mapped ptes link
498767e336d0a0a3521ae9426177d82453555ab3	staging wilc1000 remove wilc_osw_interface_ver define this patch removes wilc_osw_interface_ver define that is not used anywhere
53696b8d212f4a0f0e5dcdb3df64558dcdf03d1a	blk-throttle add latency target support one hard problem adding limit is to detect idle cgroup if one cgroup doesnt dispatch enough io against its low limit we must have a mechanism to determine if other cgroups dispatch more io we added the think time detection mechanism before but it doesnt work for all workloads here we add a latency based approach we already have mechanism to calculate latency threshold for each io size for every io dispatched from a cgorup we compare its latency against its threshold and record the info if most io latency is below threshold in the code i use the cgroup could be treated idle and other cgroups can dispatch more io currently this latency target check is only for ssd as we cant calcualte the latency target for hard disk and this is only for cgroup leaf node so far
d5b6dcc45950bc727f6a02d0ee68c99d0b6052ea	use devm_ioremap_resource replace the devm_request_mem_region and devm_ioremap_nocache calls with devm_ioremap_resource
fac3368310765ade6bbdf07c9acdb04210e8b5b0	kvm pmu fix raw event check if eventsel has edge inv or cmask set we should create raw counter for it but the check is done on a wrong variable fix it
5ee77ef27e4fb1cdc2b4f17c362e8a0c9245dc89	regulator act8865 remove redundant error message kzalloc prints its own oom message upon failure
13f2483cd5e3df425cfa492cc62cf8fada5d01b9	ds2781_battery use ds2781_param_eeprom_size and ds2781_user_eeprom_size since we have defined ds2781_param_eeprom_size and ds2781_user_eeprom_size use them to simplify the code
afb3690c3cbd0bd82b267934b419c0643e2b938a	gpio bcm-kona add missing to struct gpio_chip add missing of struct gpio_chip this prevents the module from being removed from underneath its users
332f51d7db13ffb7fcbe2407ed5b3667bc3750a7	gfs2 initialize atime of i_new inodes fix for commit initialize atime of i_new inodes to __number__ so that the timestamps read from disk will always be more recent than the initial timestamp and the atime in the i_new inode will be set correctly
8903b9eb19e0e2ca5ec0fc257cb0e5d9e94c75f4	bnx2x use pci_wait_for_pending_transaction instead of for loop new routine has been added to avoid duplication of code to wait for pending pci transactions to complete this makes use of that routine
ac110f4954252b7bbe66268c78c8ece7ac2569b9	crypto algif fix warn unsigned used is never less than zero change type from unsigned long to int to fix an issue reported by kbuild robot skcipher_recvmsg_async warn unsigned used is never less than zero
af5e6171437c9d62d84459b24877c94c23782676	proc pass fd by value in code pass fd directly not via pointer one less memory read
a1191146c9a6ebc0e15ef50788bd392339510c0d	staging unisys use local variable we are getting dev_t as an argument in the function so use the local variable instead of the global variable majordev this global variable will be removed in one of the next patch of the series
8545e6031a719675da9f3d21f1c8ce143dac7fe5	usb gadget functionfs make module init exit __init __exit make module init exit __init __exit
81151cfb6bfe69f1c5a52b795eb005226a322c9e	asoc hdmi-codec add eld control alsa doesnt know about all the different compressed audio formats so there is no interface to let userspace enumerate the formats that are supported by the connected sink exporting the raw eld bytes to userspace allows an application to select the appropriate audio format depending on the current capabilities of the connected hdmi sink device usually userspace then just pretends to alsa that the data is in one of the raw pcm audio formats and relies on the iec controls to tell the sink how to interpret the data
6bb096c92671cad4a8cfcb8bf2a5309a9033faee	media af9033 implement dvbv5 post-viterbi ber implement following dtv api commands dtv_stat_post_error_bit_count dtv_stat_post_total_bit_count these will provide post-viterbi bit error rate reporting
84aeed5310d7ea589ee703636d45bb56de0adb7f	media adv7842 increase wait time wait after main reset the data-sheet doesnt specify the wait after i2c-controlled reset so using same value as after pin-controlled reset
c1ec2c12a3f238a7a7a0397bfd164b596316968a	staging wilc1000 cfgconnectresult use netdev private wilc use netdev private data member wilc instead of global variable g_linux_wlan
9a3031dc3e7a5edfeb52ae8951f8bcd927351854	check return code of the callback the return code from callback was not checked during binding cooling device to thermal zone device
2755734390c18ca33d9755c9caa2685567563c19	fix after recover it is no longer true that we discard all in-flight submits on recover these days we only discard the first one that hung after the first re-submitted batch completes it would overwrite the fence with a correct value but there would be a window of time which showed all re-submitted batches as already complete
a25cdc0dd87d308b508ebea436cb43ee49d54a0e	net mediatek remove incorrect dma_mask assignment device drivers should not mess with the dma mask directly but instead call dma_set_mask etc if needed in case of the mtk_eth_soc driver the mask already gets set correctly when the device is created and setting it again is against the documented api this removes the incorrect setting
bb079c82e4274e32ae7592096d7e70bf4fa571ab	batman-adv prefix send local static functions with batadv_ all non-static symbols of batman-adv were prefixed with batadv_ to avoid collisions with other symbols of the kernel other symbols of batman-adv should use the same prefix to keep the naming scheme consistent
19ba900bd28422e8a986e3fc2c5dda0a2054315a	pinctrl lpc18xx use devm_pinctrl_register for pinctrl registration use devm_pinctrl_register for pin control registration
e58d429209105e698e9d0357481d62b37fe9a7dd	x86 reboot fix typo in nmi reboot path it was brought to my attention that my x86 change to use nmi in the reboot path broke intel nehalem and westmere boxes when using kexec i realized i had mistyped the if statement in commit and stuck the in the wrong spot putting it in the right spot fixes kexec again doh link
4d27de149ba17eb7643b6665ad3513d00d65b6c2	revert add missing spin_lock_init revert the commit to initialize spinlock in the more preferable way and make it static to avoid sparse warning
e018e7570c8b0f9f5a4bb0e1eff9b1e7f768f49b	nbd remove fixme that was already fixed the mentioned problem is not present anymore
86c1a219c256a471535e360efc31611e1ae73a92	pinctrl spmi-gpio be sure to clamp return value as we want gpio_chip calls to be able to return negative error codes and propagate to drivers we need to go over all drivers and make sure their return values are clamped to we do this by using the ret design pattern
54a47a83421a3b7ee0e0fab7f65d04179bdf59b6	pci imx6 move phy reset into imx6_pcie_establish_link this adds the phy reset into a common error path of imx6_pcie_establish_link deduplicating some of the debug prints also reduce the severity of the no-link message in the one place where it is expected to be hit when no peripheral is attached
2b7a905dd0d24d14a1099653ba63b7113a82fc54	fsl-diu-fb remove unusued mem_alloc_threshold if there was ever any code that used mem_alloc_threshold it was removed a long time ago
0d10ee2e6deb5c8409ae65b970846344897d5e4e	btrfs dont call writepages from within write_full_page when doing a writepage we call writepages to try and write out any other dirty pages in the area this could cause problems where we commit a transaction and then have somebody else dirtying metadata in the area as we could end up writing out a lot more than we care about which could cause latency on anybody who is waiting for the transaction to completely finish committing thanks
8d4288fb99076063a1a17ad92eb8b2ccef9eafd9	extcon palmas use simple_dev_pm_ops macro use simple_dev_pm_ops macro in order to make the code simpler
2fbe4abe944868aafdde233557ac85379b60ce46	perf evlist validate that mmap_pages is not too big amend perf_evlist__parse_mmap_pages to check that the mmap_pages entered via the option is not too big link
b982ff0e9a52553db246f7e171c03e7e0efedbe5	dont set slpm to __number__ for non-wakeup pins setting gpios slpm value to __number__ wakeup_disable is seen to cause increased power consumption in so remove the code which disables slpm based on the wakeup settings and only ensure it is on as needed
a8c558f6a3eedfb9bfd7d9d82f9d00f2f807ce7c	alsa dice fix locking avoid a lock inversion between and
2606ecbc4880b8641b5e455c80f4bd72c223ce86	bluetooth fix expected key count debug logs the debug logs for reporting a discrepancy between the expected amount of keys and the actually received amount of keys got these value mixed up this patch fixes the issue
678eb9bb8114c47a7b89fd1288ff5dc760c53c1c	mtd bcm63xxpart make sure cfe and nvram partitions are at least the cfe boot loader on bcm63xx platforms assumes itself and the nvram partition to be __number__ kib or erase block sized if larger ensure this assumption is also met when creating the partitions to prevent accidential erasure of cfe or nvram
a02689fecdbc36503b1496a5d36707bb4559db63	kvm s390 small fixes for the pfmf handler this patch includes two small fixes for the pfmf handler first the start address for pfmf has to be masked according to the current addressing mode which is now done with kvm_s390_logical_to_effective second the protection exceptions have a lower priority than the specification exceptions so the check for low-address protection has to be moved after the last spot where we inject a specification exception
be20aa00c67102aaa54599518c086a2338b19f4c	nfsd dont hold ls_mutex across a layout recall we do need to serialize layout stateid morphing operations but we currently hold the ls_mutex across a layout recall which is pretty ugly its also unnecessary once weve bumped the seqid and copied it we dont need to serialize the rest of the cb_layoutrecall vs anything else just drop the mutex once the copy is done this was causing a workqueue leaked lock or atomic warning and an occasional deadlock theres more work to be done here but this fixes the immediate regression
48177cd83792d25a5bab7f887acc47c2c314810e	usb gadget g_serial split the three possible functions into three bind functions this patch factors out the three possible functions into three possible bind functions which are passed as an argument to usb_add_config this will ease the step by step converting of the individual functions to the new function registration method
03b5d924b926dd994b16f30f7a13bfb71ee0f478	mmc omap_hsmmc add ddr support add dual data rate support for omap_hsmmc
80e9fc9af4cbab97508f5853a5c5ab6ca9ef14bd	ramster fix compile warnings due to usage of debugfs_create_size_t we get tons of note expected but argument is of type int warnings this fixes it
2d071c643f1cd15a24172de4b5b7ae2adb93abbb	bpf trace make ctx access checks more robust make sure that ctx cannot potentially be accessed oob by asserting explicitly that ctx access size into pt_regs for bpf_prog_type_kprobe programs must be within limits in case some archs have pt_regs not being a multiple of __number__ then bpf_dw access could cause such access bpf_prog_type_kprobe progs dont have a ctx conversion function since theres no extra mapping needed kprobe_prog_is_valid_access didnt enforce sizeoflong as the only allowed access size since llvm can generate non access to regs from time to time for bpf_prog_type_tracepoint we dont have a ctx conversion either so add a build_bug_on check to make sure that bpf_dw access will not be a similar issue in future ctx works on event buffer as opposed to pt_regs there
27b05e4d202427a8a8b03487e70f256f586e7ad8	use ptr_ret rather than ptr_err the semantic patch that makes this change is available in more information about semantic patching is available at
1cf370c61179e01313457363b21f0859be0d8cb7	use mempool_create_slab_pool mempools created for slab caches should use mempool_create_slab_pool
b13379758f17e66d60f1f288bf917762c54ebd2f	revert usb serial fix hang when opening port this reverts commit eba0e3c3a0ba7b96f01cbe997680f6a4401a0bfc when merged together usb-linus and usb-next this fix isnt needed and causes a build error revert the commit to solve the build issue
de682941eef3e5f6d1b653a6c214bc8a288f17c1	bnx2x fix undi driver unload commit bnx2x add support for multi-function undi contains a bug which prevent the emptying of the devices rx buffers before reset as a result on new boards it is likely hw will reach some fatal assertion once its interfaces load after undi was previously loaded
42d720d1731a9d7035c2812437c35e271ec4dd78	arm kexec make in machine_kexec with the introduction of kees cooks patch to make the kernel read-only the existing method by which kexec works got broken since it directly pokes some values in the template code which resides in the section the current patch changes the way those values are inserted so that poking section occurs only in machine_kexec when we are about to nuke the old kernel and are beyond the point of return this allows to use set_kernel_text_rw to directly patch the values in the section i had already sent a patch which achieved this but it was significantly more complicated so this is a approach kees collapsed kexec_boot_atags kees for bisectability moved set_kernel_text_rw to rodata patch
0473b177c3dd5abdb2a7b54eec1921283928a17b	clk ux500 remove bml8580 clock there is no mention of the prcmu_bml8580clk in any of the design specifications for the chips supported in mainline in fact where it is incorrectly used in the u8540 clock definition driver it would have the side effect of using the incorrect clock management address prcm_bml8580clk_mgt instead of the correct value
9a5bc726d559221a3394bb8ef97d0abc1ee94d00	sysctl fix int unsigned long assignments in int_min case the following if val __number__ unsigned long-val is incorrect because the compiler is free to assume to be positive and use a sign-extend instruction for extending the bit pattern this is a problem if val int_min echo cat cast to unsigned long before negation that way we first sign-extend and then negate an unsigned which is well defined with this cat
f10c0a71e6efc7c8cbc3bfcfd0ecf822607f0b3d	asoc tlv320aic32x4 cleanup manual bias level transitions set the codec drivers suspend_bias_off flag rather than manually going to snd_soc_bias_off in suspend and snd_soc_bias_standby in resume this makes the code a bit shorter and cleaner since the asoc core now takes care of setting the bias level to snd_soc_bias_off when removing the codec there is no need to do it manually anymore either the manual transition to snd_soc_bias_standby at the end of codec probe can also be removed as the core will automatically do this after the codec has been probed
7fa0cf462daa6f6121b332b87833d7f5bdb515c0	dmaengine add device_terminate_all callback split out the terminate_all command from device_control to a dma_device callback in order to preserve backward capability still rely on device_control if no such callback has been implemented eventually this will allow to create a generic dma_slave_caps callback
b324f6392eda4124f25017bd4633c167301ad9e3	eata_pio missing break statement this missing break statement bug predates git its a very minor thing it means that we print a instead of a z in dmesg
084011615c1c885232e8d1fb5cc3f85c9d880d14	asoc fsl pcm030-audio-fabric use snd_soc_register_card convert pcm030-audio-fabric to use the new snd_soc_register_card api instead of the older method of registering a separate platform device create the dai_link to the mpc5200_psc_ac97 platform using the device tree convert the pcm030-audio-fabric driver to a platform-driver and add a remove function
cf1acab7d75652a372ee5b9c996689d518914e83	print ib_srp prefix once pr_debug already prints prefix pfx avoid that pfx is printed twice if the debug statement in srp_add_target is enabled
2900d56ffb3bd23646db0d2562b6483329632e8a	acpica hardware fix a resource leak issue in acpi_hw_build_pci_list acpica commit e4f0b73c107680841d7dd01cc04ec108df6580bd there is code in acpi_hw_build_pci_list destructing returned object return_list_head before touching it while the allocated new object list_head is not tracked correctly to be destructed on the error case which is detected as unsecure code by the coverity tool this patch fixes this issue by always intializing the returned object in acpi_hw_build_pci_list so that the caller of acpi_hw_build_pci_list neednt initialize it and always using the returned object to track the new allocated objects lv zheng link link
49ca9118e6ecca63c78de924801b8b9fe4af44ff	xfs fix computation of inode btree maxlevels commit introduced a function to compute the maximum height of the inode btree back in __number__ back then apparently the freespace and inode btrees shared the same geometry however it has long since been the case that the inode and freespace btrees have different record and key sizes therefore we must use m_inobt_mnr if we want a correct yes this bug has been around for __number__ years and ten months yes i was in middle school when this bug was committed __number__
323fd785e396f4252b014665df8a831d91c2f117	fix downgrade race a link downgrade can race with link up avoid the race in two ways first by having the downgrade application logic take the link state mutex for all of its checking second by waiting for the link to move out of the going up state
6f498018279d118cf38945f73da7c9345f7e2e5d	hid sony fix hid mapping for ps3 sixaxis controller commit f04d51404f51 hid driver for buzz controllers introduced an input_mapping callback but set the return value to to all devices except the buzz controllers the result of this is that the sixaxis input device is not populated making it useless
45c78e0219405af1b0f31b06952dfd9bcf7ad1f6	qlcnic update version to just updating the version as many fixes got accumulated over
728384a10b673dbd9819b524852df23142ee2fdd	arm pxa spitz register spitz-audio device register spitz-audio device to be used by asoc driver to bind asoc platform driver currently old soc-audio approach is used which needs to be replaced with proper device
691c6fd2a2d6b6db08b17beec5e42ab0687058c7	f2fs remove unneeded write checkpoint in recover_fsync_data previously recover_fsync_data still to write checkpoint when there is nothing to recover with normal umount image it may reduce mount performance and flash memory lifetime so lets remove it
1eafd31c640d6799c63136246a59d608bed93c74	rcu avoid redundant grace-period kthread wakeups when setting up an in-the-future advanced grace period the code needs to wake up the relevant grace-period kthread which it currently does unconditionally however this results in needless wakeups in the case where the advanced grace period is being set up by the grace-period kthread itself which is a non-uncommon situation this commit therefore checks to see if the running thread is the grace-period kthread and avoids doing the irq_work_queue-mediated wakeup in that case
5c493df25a0d9e0c3bda742250ecfc5953bf4ccd	merge branch of into acpi-resources modified this fixes a build failure after merging the acpi-resources branch with the pci tree caused by bad interactions between that branch and the only commit in also that commit contains a bug which can be fixed by removing one line of code so do that too link link
9832e0e013c5cbbf688c1c2421a0b05e01fe409b	media vivid the overlay api wasnt disabled completely for multiplanar if the vivid driver is loaded in multiplanar mode then the capture overlay functionality should be disabled this wasnt fully done which led to v4l2-compliance errors
b22580948c39d71fb150c1d53148a381011dd109	nilfs2 get rid of nilfs_palloc_group_is_in this unfolds nilfs_palloc_group_is_in helper function into nilfs_palloc_freev function to simplify a range check and an index calculation repeatedy performed in a loop of the function
2e5601f9aca1a83980a031f9385a95062d12e689	net bnx2x convert to timecounter adjtime this patch changes the driver to use the new and improved method for adjusting the offset of a timecounter compile tested only
5d59e18270d4769c9160c282b25c00b6fc004ffb	fix coding style issues fix errors reported by one error is parentheses the other is a whitespace issue
856c634dd204581710157d539a37b7340fb60894	firmware google vpd fix return value check in vpd_platform_init in case of error the function platform_device_register_simple returns err_ptr and never returns null the null test in the return value check should be replaced with is_err
4de24819192eb507525fa24182c86c2073accd12	rtl8xxxu fix incorrect test for auto llt failure the logic for testing auto load failure in rtl8xxxu_auto_llt_table was inverted
b1214e4757b7d5fcea483b927e130361d41430a5	ocfs2 fix possible double free in ocfs2_write_begin_nolock when ocfs2_write_cluster_by_desc failed in ocfs2_write_begin_nolock because of enospc it goes to out_quota freeing data_acmeta_ac then it calls ocfs2_try_to_free_truncate_log to free space if enough space freed it will try to write again unfortunately some error happenes before ocfs2_lock_allocators it goes to out and free data_acmeta_ac again
158de57f905ed97ea0f993feac1c40a40f5c7a04	kvm x86 emulator convert a few freestanding emulations to fastop
21f67c2fd820b615ca7f5b1e87704b605410308e	mmc dw_mmc-socfpga remove redundant of_match_ptr dw_mci_socfpga_match is always compiled in hence of_match_ptr is not necessary
3a9c5560f677690f65038f399f4f598c79b83186	scsi libsas check for gone expanders in smp_execute_task no sense in issuing or retrying commands to an expander that has been removed
c9d13f5fc748a02cb5917a798f065681007342b9	check for failure before setting values theres no point in initializing if the insertion attempt will be failing anyway run the checks before performing the initialization
c11f187bd00704cb135b33b4ee6c6a6b85d24b0c	media stk1160 remove unneeded struct vb2_queue clearing struct vb2_queue is allocated through kzalloc as part of a larger struct theres no need to clear it
9871b27f6705fc6e0ba633b136369a289b2bfb99	tipc fix random link reset problem in the function tipc_sk_rcv the stack variable err is only initialized to tipc_err_no_port for the first iteration over the link input queue if a chain of messages are received from a link failure to lookup the socket for any but the first message will cause the message to bounce back out on a random link we fix this by properly initializing err
77f49a402769f7db022935ef317f1c12c1c06319	dm thin metadata rename init_pmd to __create_persistent_data_objects rename init_pmd to __create_persistent_data_objects in dm-thin-metadata
f737ea50bac2f6a06835a3180bdbeae59dc9d735	staging emxx_udc remove custom printk macro err this patch removes custom printk macro err all the calls to this macro were replaced by de_err and pr_err
a56d092aa94ebcc9452ddaa47423b9a478aa6aa5	staging ion fix error handling in ion_buffer_create this patch fixes error handling case when allocation fails also it removes unreachable code of checking ret variable although it is not updated
4df6e868d475a884d672791c9091150c57094c95	media media mx2_camera remove dead code in mx2_camera_add_device this is a piece of code becoming dead since commit media v4l mx2_camera remove unsupported dma mode make emma mandatory it should have been removed together with the commit remove it now
0d227a8672c83f2153a0eeeb5439e3b7185c3d9c	mpls allow routes on ipgre devices this appears to be necessary and sufficient to provide mpls in gre rfc4023 support this can be used by establishing an ipgre tunnel device and then routing mpls over it the following example will forward mpls frames received with an outermost mpls label __number__ over tun1 a gre tunnel the forwarded packet will have the outermost mpls lse removed and two new lses added with labels __number__ outermost and __number__ next ip link add name tun1 type gre remote local ttl __number__ ip link set up dev tun1 ip addr add dev tun1 ip route sh echo __number__ echo __number__ ip mpls route add __number__ as via inet ip mpls route sh also remove unnecessary braces
f6389ecbc5f3ddc5860aab22bd7f7e1a8aeb3165	nfnetlink use y2038 safe timestamp the __build_packet_message function fills a nfulnl_msg_packet_timestamp structure that uses seconds and is therefore y2038 safe but it uses an intermediate struct timespec which is not this trivially changes the code to use struct timespec64 instead to correct the result on architectures
fc4ca987f7cc0cb7ea8cb8bb673447939a84bb07	qlcnic fix napi budget alteration driver modifies the supplied napi budget in qlcnic_83xx_msix_tx_poll function instead it should use the budget as it is
86dd3612e1e0ffdfafa15021581bb45419d479b9	dp83640 implement programmable pin functions this patch adapts the dp83640 driver to allow reconfiguration of which auxiliary function goes on which pin the functions may be reassigned freely with the one exception of the calibration function
950a5a4fdbfbea90feda70bab3178eafecc64d0b	sky2 convert to skb paged frag api
60b18b9aa4daa616a8b360feb35d1bfe4d606019	remove extra context restores in fix wakeups on level-triggered gpios already restores the fallingdetect and risingdetect contexts in these registers were modified in to include even those configured as level-triggered since only edge-triggered gpios can generate wakeup events therefore the old context restores of the same registers present later in the code is not needed any more remove them
525fae21317658ae556ca850f3004319004641d1	pinctrl at91 fix typo on pull_up
3469a32a1e948c54204b5dd6f7476a7d11349e9e	jbd2 dont hold j_state_lock while calling wake_up the j_state_lock is one of the hottest locks in the jbd2 layer and thus one of its scalability bottlenecks we dont need to be holding the j_state_lock while we are calling so release the lock a little bit earlier
8fa56aed12f1b0a2828da52280e2efbbf1163ad5	dasd fix list_del corruption during format if errors occur during format a kernel panic with a list_del corruption may occur stop error recovery procedure after an erp action was taken
b6785def8368f9a69505797fcbd9f280d91b673e	kvm x86 make emulator_fix_hypercall static no users outside of
3cf0ad02e42a91e85ffe9bd67422dd266531d3ec	usb gadget dummy_hcd dont assign on error case if the stream check fails then we leave assigend but we return with an error code the caller assumes the endpoint is not enabled which is the case but it can not enable it again due to this assigment
aa4ce4493c88dc324911152d1ccd25469366dba3	fix firmware loading interface for gvt-g golden hw state firmware loading interface for gvt-g golden hw state has been broken before this patch fixes gvt-g firmware loading interface a user should apply this patch if he wants to load gvt-g golden hw state from firmware interface
ac63ff50ad37369b838e1416665ff8ca7e9c9b1b	leds convert bd2802 rgb led driver to devm_kzalloc and cleanup error exit path
81570d9caaad46a056580c9af078c5c55e6c764f	use static allocation for filter predicates dont dynamically allocate filter_pred struct use static memory this way we can get rid of the code managing the dynamic filter_pred struct object the create_pred function integrates create_logical_pred function this way the static predicate memory is returned only from one place link
7a2eba12ff071dbc8e84ff4c2208d9f8bbb0046a	media media add alsa media controller function entities add alsa media controller capture playback and mixer function entity defines media_ent_audio_f from __number__
ac01c29e5279fe31632e9118619b365514633235	omap dss2 dispc shorten _dispc_set_color_conv_coef iterate over overlay ids to shorten _dispc_set_color_conv_coef
d7f37692e38798797d415153bc186afb2bbac645	xfs return start block of first bad log record during recovery each log recovery pass walks from the tail block to the head block and processes records appropriately based on the associated log pass type there are various failure conditions that can occur through this sequence such as errors crc errors etc log torn write detection will perform crc verification near the head of the log to detect torn writes and trim torn records from the log appropriately as it is xlog_do_recovery_pass only returns an error code in the event of crc failure which isnt enough information to trim the head of the log update xlog_do_recovery_pass to optionally return the start block of the associated record when an error occurs this patch contains no functional changes
a267a6041fdb690de9570dab20a5f0fa417c8c9f	convert into skb_tail_pointerskb the change set of sk_buff convert to sk_buff_data_t converted from pointer into sk_buff_data_t thus is not always pointer the area pointed by should be accessed via skb_tail_pointer found by inspection compile tested only
920dad0ce3f8893fa41a630435da44b4b719bdcb	iio si7020 add support for hoperf th06 this patch adds support for hoperf th06 humidity and temperature sensor as it uses same register definitions as si7020 th06 datasheet
1fac1686377410169952db63d282490bc0554662	alsa oxygen delete an unnecessary check before the function call snd_pcm_suspend the snd_pcm_suspend function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
86eda90eaa0ed380794d8c0a5c8ab3913cdea8e2	media coda simplify parameter buffer setup code
fa3be9208dcb21ae4185f6122137fe7d5cf29d74	asoc fsl fsl_spdif check for clk_prepare_enable error clk_prepare_enable may fail so we should better check its return value and propagate it in the case of error
a0b0ea491ef59a5374640f59cdde6c53c027de53	mfd max14577 add of_compatible to extcon mfd_cell add of_compatible to the mfd_cell for extcon driver if entry with such compatible is present in the dts the extcon driver will have of_node set this may be useful for extcon consumers and it is documented in bindings documentation
130e6b25a28ff5b2421d6cae5f2bac1f5afdcfb0	clocksource sirf switch to sched_clock_register and use __number__ bits the __number__ bit sched_clock interface now supports __number__ bits upgrade to the __number__ bit function to allow us to remove the __number__ bit registration interface and use all __number__ bits of this timer
7c97c200e2c5aa8b1067bebb99df0a7c2e12ebf3	cifs fix the type of cifs_demultiplex_thread and get rid of a bogus typecast while we are at it its not just that we want a function returning int and not void but cast to pointer to function taking void and returning void would be void and not void
62df3935a7ef842ad0af6025d2fc59d353de2e1d	sbs-battery fix devicetree match table it should be an of module table not i2c
2ac1ea2c4a8c714d8994ce35d0f6f9fec5e8cdc5	regulator twl fix use of integer as pointer the twl6030_fixed_ldo macro passes the twl_fixed_ldo macro an instead of a null changing this to a null fixes the following warnings warning using plain integer as null pointer warning using plain integer as null pointer warning using plain integer as null pointer warning using plain integer as null pointer warning using plain integer as null pointer warning using plain integer as null pointer
aeeca404266c8ed2997905afc342ba9561f49ca7	x86 intel-mid do not re-introduce usage of obsolete __cpuinit the commit nov7 linux-next via intel_mid renamed to adds a __cpuinit we removed this a couple versions ago we now want to remove the compat no-op stubs introducing new users is not what we want to see at this point in time as it will break once the stubs are gone link
b1062298fea59dca23cdbcafaa5bed79c273d88f	clk atlas7 export mux clks so that consumers can get them this patch makes mux clks can be referenced by device drivers
177e15f0c1444cd392374ec7175c4787fd911369	arm64 add the initrd region to the linear mapping explicitly instead of going out of our way to relocate the initrd if it turns out to occupy memory that is not covered by the linear mapping just add the initrd to the linear mapping this puts the burden on the bootloader to pass and options that are mutually consistent note that since the placement of the linear region in the pa space is also dependent on the placement of the kernel image which may reside anywhere in memory we may still end up with a situation where the initrd and the kernel image are simply too far apart to be covered by the linear region since we now leave it up to the bootloader to pass the initrd in memory that is guaranteed to be accessible by the kernel add a mention of this to the arm64 boot protocol specification as well
e42f85f3d410a5457a2db61d883437ac9e32cecc	usb serial use module_usb_serial_driver this converts the driver to use the module_usb_serial_driver call instead of having to have a function saving a lot of duplicated code
02c74fbad9d4a5149756eb35be7300736e4904e9	rbd re-submit read request for flattened clone if a clone image gets flattened while a parent read request is underway the original rbd object request needs to be resubmitted the reason is that by the time we get the response to the parent read request the data read from the parent may be out of date in other words we could see this sequence of events rbd client parent original object enoent issue parent read respond to parent read child image flattened original image header refresh original object written independently here parent read response received add code to rbd_img_parent_read_callback to detect when a clones parent image has disappeared as evidenced by its parent overlap becoming __number__ and re-submit the original read request in that case
c9aadfe7860f83ee17e55fe17398f3fe948a0a84	rbd kill the total_snaps field in an rbd header structure is never any different from the value of num_snaps stored within a snapshot context avoid any confusion by just using the value held within the snapshot context and get rid of the total_snaps field
88bd64628f4f170491b47b90d772a229b0082859	prepare megamod_irq_cascade for irq argument removal the irq argument of most interrupt flow handlers is unused or merily used instead of a local variable the handlers which need the irq argument can retrieve the irq number from the irq descriptor search and update was done with coccinelle and the invaluable help of julia lawall
44923c9cfa1a32c5a4013cb4b4853ddcdcd59142	mips sead3 corrected get_c0_perfcount_int commit e9de688dac65 irqchip mips-gic support local interrupts updated several platforms this is a copy paste error patchwork
ab98fcba962a57cee9fdb97aff2b25248c93cea5	spi rspi remove empty rspi_cleanup if is not needed it can be left unimplemented
9801c60e99ed76c5730fb290c00bfad12a419972	convert call_rcusel_netnode_free to kfree_rcu the rcu callback sel_netnode_free just calls a kfree so we use kfree_rcu instead of the call_rcusel_netnode_free
653df35e6b3c0df875999a9b842327301269f55d	usb dwc3 gadget add a debugging print when initializing endpoints that way we get debugging information when enabling verbose debug of the driver it will be no-op otherwise
35b80733b3d3ab620edc30f286606be775930843	net core add missing check for uid_range in rule_exists without this check it is not possible to create two rules that are identical except for their uid ranges for example ip rule add prio __number__ lookup __number__ ip rule add prio __number__ uidrange lookup __number__ rtnetlink answers file exists ip rule add prio __number__ uidrange lookup __number__ ip rule add prio __number__ uidrange lookup __number__ ip rule add prio __number__ uidrange lookup __number__ rtnetlink answers file exists tested
2eb81a40aa521035ff9c8c8309e482dff523f8c9	iwlwifi dont clear ctl_ampdu on frame status theres no reason to clear the ctl_ampdu flag on transmitted frame status its not used by the driver here and mac80211 only uses it for some rate statistics also remove a stray space in the function
23633314e60796f860d5a0484b722557061cde7c	add missing prefixes some macros and a function were missing the acpi_als_ prefix so add it
54d3f8c63d6940966217b807972778fb17c3fa82	usb set device removable state based on acpi usb data acpi offers two methods that allow us to infer whether or not a usb port is removable the _pld method gives us information on whether the port is user visible or not if thats not present then we can fall back to the _upc method which tells us whether or not a port is connectable
84e902aa05b628b940c4a17ea2c92ec4fbcffc18	media em28xx do not claim vbi support if the device is a camera avoids registering a vbi device and streaming in vbi-mode if the device is a camera
141518b64f611536fb7968d291c794d71879099e	dont grab for in mmap offset ioctl since david herrmanns mmap vma manager rework we dont need to grab any more to prevent races when looking up the mmap offset drop it and instead dont forget to use the unref_unlocked variant since the drm core still cares
7774d46b2037b98d3f7e414bffb1d53082dc139b	net ethernet ixp4xx_eth fix spelling mistake in debug message trivial fix to spelling mistake successed to succeeded in debug message also unwrap multi-line literal string
4014e36018c6bec7c826d3734e1ed68cb360c01d	net fec_mpc52xx_phy use use the wrapper functions for getting and setting the driver data using platform_device instead of using with so we can directly pass a struct platform_device
371a664eea4e2c0d2acc1df082f7e08693506f89	media exynos-gsc support dmabuf export buffer this patch adds the dmabuf export buffer feature to the exynos g-scaler driver
37f10be15076737067a4d4d8f1cf7e9103765a0f	dm raid fix rebuild and catch bogus flags
096797abbd93730c98ce765a6fe0abee3afaa782	ath6kl assign tx packet drop threshold per endpoint on htc pipe layer on the htc mbox layer it will assign each endpoint ac with a different tx-packet-drop threshold so lower priority ac is more likely to drop packets and the cookies become more available to higher priority ac on the htc pipe layer assign the tx packet drop threshold as well it will let ac to drop packets when cookies below the tx packet drop threshold
7b6ce46cb3d096831dea3accacee4717c66abac8	implement single target ipi function for x2apic_cluster tglx split it out from the patch which provides the new callback link
b8c7d915087c97a21fa415fa0e860e59739da202	media rc-main add generic scancode filtering add generic scancode filtering of rc input events and fall back to permitting any rc_filter_normal scancode filter to be set if no s_filter callback exists this allows raw ir decoder events to be filtered and potentially allows hardware decoders to set looser filters and rely on generic code to filter out the corner cases
758929005f06f954b7e1c87a1c9fdb44157b228f	rtc snvs fix an incorrect check of return value function devm_regmap_init_mmio returns an err_ptr on error however in function snvs_rtc_probe its return value is checked against null this patch fixes it by checking the return value with is_err
fe24a0c3a974f15945639edfc19f6b85f672145c	ipvs use is_err_or_nullsvc instead of is_errsvc svc null this minor refactoring does not change the logic of function ip_vs_genl_dump_dests
90c807e4fb19dba5db3ec7b6a86b0038aa574f84	greybus remove greybus_svc_in the function is gone remove it from the header file as well
a160ba06c1bde5e0609f7ac475a9650224337933	rtlwifi rtl8192de rework calls to rate-control routine the code uses macros to determine the parameters that are passed to the rate setting routine a simpler method is implemented
5a364bd399d23fe6244de8f84c46f249b763c723	bluetooth improve ertm sequence number offset calculation instead of using modular division the offset can be calculated using only addition and subtraction the previous calculation did not work as intended and was more difficult to understand involving unsigned integer underflow and a check for a negative value where one was not possible
df6b7499806bffd233e6dd0465901827b0b385b8	mm swap remove unused function prototype this is a code cleanup patch no functionality changes there are __number__ unused function prototype in they are removed link
f5b31e15acd1ab2fd9b9022c29a66f4625fa5658	staging comedi call comedi_release_hardware_device on error if comedi_auto_config fails after allocating the minor device call comedi_release_hardware_device instead of comedi_free_board_minor to free the minor device thats the same call that comedi_auto_unconfig uses and is slightly safer as it checks the minor device number is still tied to the same hardware device
6049bcefada077c5d3aec59f093701df711ad235	mfd twl4030-audio fix argument type for twl4030_audio_disable_resource looks like the conversion to enum was missed for the definition of this function the declaration has been updated
10770bc2d1702e05575db0072e1ebbc06d0b270e	qdisc adjustments for api allowing skb list xmits minor adjustments for merge commit merge branch xmit_list that allows us to work with a list of skbs update code doc to function sch_direct_xmit in handle_dev_cpu_collision use kfree_skb_list in error handling
a307de2aab5bcb96bae3d778b01ff815f027ad88	mfd max77693 remove struct max77693_led_platform_data the flash part of the max77693 device will depend only on of and thus will not use board files since there are no other users of the struct max77693_led_platform_data its existence is unjustified
b5133e7a988b2cf8e1cd2b23231f36aff35ceffc	net davinci_emac fix runtime pm calls for davinci_emac commit net ethernet davinci_emac add pm_runtime support added support for runtime pm but it causes issues on omap3 related devices that actually gate the clocks unhandled fault external abort on non-linefetch emac_dev_getnetstats from dev_get_stats from rtnl_fill_ifinfo from rtmsg_ifinfo from register_netdevice from register_netdev from davinci_emac_probe from lets fix it by moving the pm_runtime_get call earlier and also add it to the emac_dev_getnetstats also note that we want to use pm_runtime_get_sync as we dont want to have deferred_resume happen and lets also check the return value for pm_runtime_get_sync as noted by felipe balbi
9e58523624fc063ce43ad3ef2bf6d603bda50a5e	arm dts r8a7790 add intc-sys clock to device tree link the arm gic to the intc-sys module clock and add it to the always on pm domain so it can be power managed using that clock note that currently the gic-400 driver doesnt support module clocks nor runtime pm so this must be handled as a critical clock
17ee971f03ad2c0786842d3a6b551e842459e2ac	mfd max77686 dont attempt to get i2c_device_id the driver is only used in platforms that have dt support so always the i2c device will be get from the matched of node and never will be from the i2c device id table
a722dcca4da47a480a6042c0c0275695a597b77f	simplify exit path on error in read_interrupt_config a rather over complicated exit path given there is only one exit route and nothing much is done after it
fef1eeb1a787653aa3fa028be1d898609bf69094	rtc imxdi use the security violation interrupt the dryice chipset has a dedicated security violation interrupt that is triggered for security violations if configured to do so according to the publicly available imx258 reference manual irq __number__ is used for this interrupt if an irq number is provided for the security violation interrupt install the same handler that were already using for the normal interrupt is used only in the probe function make it a local variable
f9477c17c2ce59f64462635c3e5d43c98c0ad67f	iwlwifi fix indirect write bug fix a bug in writing to indirect periphery registers although writes seem successful the data is not written to the desired address also fix address mask for hbus_targ_prph_raddr and hbus_targ_prph_waddr registers
9fabc1a26e37f88cb19d5def300970a26604d9a4	arm hwmod fetch main_clk based on hwmod name with the transition to hwmod module clocks all hwmods will have their main clocks named use this info to fetch main_clk and use it if found also if a main_clk is found based on the hwmod name disable the direct prcm modulemode access from hwmod
8faa8da9a621821dfc5945cff415c4d3f904f3ce	greybus remove transfer_flags we didnt use them so drop it also some other checkpatch cleanups while i was in there
b07da9fb527e547e2c6198f5594f523bcc11433c	drop unnecessary null assignment to
1ff99ea65687d921cb71f330491ec4205c00eb9f	clocksource arch_timer pass clock event to set_mode callback there isnt any reason why we dont pass the event here and well need it in the near future for memory mapped arch timers anyway
b8e6a15a1af9b1c203002e7768e60136c4e0e5c6	fix init_stripe inconsistencies raid5 fix init_stripe inconsistencies __number__ remove_hash is not necessary we will only be called right after get_free_stripe there we have already a call to remove_hash __number__ tracing prints out the sector of the freed stripe and not the sector that we want to initialize
06f9c24e55075e50ebc8b249a7853ad31bc1b3d1	regmap cache use kmalloc_array instead of kmalloc this patch fixes warning for regmap cache warning prefer kmalloc_array over kmalloc with multiply
a6834c0b9114c06106efee8e9f2a11fbbb104567	smack verify read access on file open v3 smack believes that many of the operatons that can be performed on an open file descriptor are read operations the fstat and lseek system calls are examples an implication of this is that files shouldnt be open if the task doesnt have read access even if it has write access and the file is being opened write only targeted for
034bd7b5d926816285deb71c41a230b912524f8b	iio fix spelling of detach in static func
0fbe7870d7e97d6fa595652a8f8eaf159e4bb6c9	wire up pipe crc support for bdw the layout of the crc registers is the same as on hsw only the interrupt handling has changed a bit so trivial to wire up yay
9fc18f18a568a944e93de6f6c2148a688623429b	media cx24120 add dvbv5 signal strength stats add new get_stats function called from read_status for collecting dvbv5 stats into the frontend cache only signal strength for now can add others later not currently marked as available future patch will enable
048212d0bc0b1769a4bbecd7ace8c8d237577d1b	kvm mmu add memslot parameter to hva handlers this is needed to push trace_kvm_age_page into kvm_age_rmapp in the following patch
aff747ebbf68c6efc4d091d54058af89b916f82d	alsa hda get rid of amd hdmi exception in hdmi_present_sense since the recent fake eld patches we can remove the check for amd hdmi in hdmi_present_sense and decide the return value from eld_valid value suggested by anssi hannula
e59a41b69a8e116d5ac8c95c4222f5a971f66bbd	target avoid multiple outputs in scsi_dump_inquiry the multiple calls to pr_debug each with one letter results in a new line this patch merges the multiple requests into one call per line so we dont have the multiple line cuts
cb5df31b2d218a0a01952f9551f114b1bc32064c	tidy up si dma code
36259012a4ba34d70d4fe0e8533980919e8b6024	dm9000 remove redundant isr status clear since dm9000_interrupt is already every set bit in dm9000_isr this additional clear in dm9000_rx which is only called by dm9000_interrupt is unnecessary and can be removed
2be586205ca2b812022644cec9830bb156b45990	net axienet removed _of_ prefix in probe and remove functions synchronize names with other drivers
bec87d6e34de459a559fc326aa4e56bee4ba7423	kvm use correct tlbs dirty type in cmpxchg using int type is not suitable for a long object so correct it
dfd7c991f31261fb4fb14adf0479206b178d270d	aha1542 remove aha1542_restart aha1542_restart does nothing except useless printk remove it
b1a397dc1a59cc482e623e780514acb8bb29e3bf	regulator max8952 remove wrong set_suspend_disable callback setting using the same ops for both and callbacks is actively broken this patch removes callback setting
6691ccd0565954f2275fb10cb5e4f0cef4a9ff64	mfd twl-core re-group the twl_mapping table for easier reading group the twl_mapping table in __number__ lines chunks so it is more easier to find the row we are looking for if we need to
50b9ac1813f7f2f13c937a1484c2fe09c4d590ce	arch tile kernel cleaning up uninitialized variables there is a risk that the variable will be used without being initialized this was largely found by using a static code analysis program called cppcheck
313cf4efa40ef739199bd68a76f89f8a5224a541	media mb86a20s fix the per reset logic the logic that resets the device is wrong it should be resetting just the layer that got read also stop is needed before updating the counters
18f93506623aacbb269f47cbda9fe90ffc5acda6	asoc davinci-mcasp remove unused defines these are not used probably leftovers from the past
135114a566c15dfe44fb8ca31e42dd215d627383	staging sw_sync convert to use new value_str debug ops switch from to the new timeline_value_str and pt_value_str ops jstultz add commit message
7fabc0f4c7bd2206c368a79e3ed79b7d36625cfd	bluetooth fix using test_and_clear instead of test_and_set the code for updating the hci_connectable flag was incorrectly using test_and_set_bit instead of test_and_clear_bit when hci_connectable is to be cleared
bbc9c36c31fc5827c22359a8b0ba9dd71b5eecfc	nfsd4 more cleanup more logic thats unnecessary in the __float__ case
1f459262b0e1649a1e5ad12fa4c66eb76c2220ce	usb gadget udc remove pointer dereference after free remove pointer dereference after free addresses-coverity-id __number__
4a3a485b1ed0e109718cc8c9d094fa0f552de9b2	writeback fix memory leak in wb_queue_work when wb_registered flag is not set wb_queue_work skips queuing the work but does not perform the necessary clean up in particular if is true it should free the memory the leak condition can be reprouced by following these steps mount in qemu console device_del sdb umount above will result in a wb_queue_work call on an unregistered wb and thus leak memory
022e52cfe846469363e168b6a0095e7873279811	media v4l sh_mobile_csi2 support the new mbus-config subdev ops extend the driver to also support gs_mbus_config subdevice video operations
d1e87ed7e13988e455491e055a9aebad74eb3aaa	media arm mach-shmobile convert mackerel to mediabus flags prepare the board to switch to the new subdevice media-bus configuration operations
eb8417aa703eff5ff43d0275f19b0a8e591d818d	remove division from the intel_pmu_drain_pebs_nhm hot path only do the division in case we have to print the result out in a warning link
92b98361f119a6919061d067c6584de9ae2de9f4	xprtrdma return an errno from rpcrdma_register_external the send_request method and the chunk registration code expects an errno from the registration function this allows the upper layers to distinguish between a recoverable failure for example temporary memory exhaustion and a hard failure for example a bug in the registration logic
f2c31662762b9e82b9891d6b385b17f9e5ef0ed2	pch_gbe add extra clean tx this adds extra cleaning to the pch_gbe_clean_tx routine to avoid transmit timeouts on some bcm phys that have different timing also update the drv_version to __float__ and show it
590a141863f726216d452f26bdcc59d648fd7cb0	ext4 remove readpage check in ext4_mmap_file there is no kind of file which does not supply a page reading function
3a3f5c7df55a1294c9e6e2d0b8cea604b137438f	bluetooth cmtp fix lost wakeup of session thread fix race condition which can result in missing the wakeup intended to stop the session thread
d3af4396cff3d86a6a37e1cc5fe8d077f62c263e	ath9k remove a redundant call to pcipowersave during ath9k_stop will always call ath_radio_disable which will inturn call ath9k_hw_configpcipowersave so no need to call it explicitly in ath9k_stop
80a2dcd8d05c11d42f4e606d7a5f3eaa2794ab34	dont set vlan in iboe wqes control segment theres no need to set the vlan-related fields in an iboe send wqe control segment the vlan to be used by a ud qp is set in the datagram segment for gsi cm qp all the headers down to and mac are built by the software anyway
9ab875affbe61b2c88685c342461c9a367ab7a3e	bluetooth btusb remove device lock on release recently we changed the way how we release driver-data a driver is now responsible of destroying the data so we no longer need the device lock on deinitialization in btusb driver
145083e624a79d402e3aed366bac9b536811b8c2	scsi qla2xxx use proper message for non owner reset ack timeout
7d95f6cc4ef73572a43d4a0a1907a13ace17a62a	only allocate necessary size for vm bo list no need to always allocate the theoretical maximum here
b9a1fc99588c2861d4dc26d53b0f47b495cc2964	mei me d0i3 exit d0i3 on driver start and enter it on stop a bios may put the device in d0i3 on platform initialization so it consume power even if the driver is not present in turn the driver has to wake up the devices on load in order to perform the initialization sequence and move it back to low power state on driver remove
44cb5e94f96cef72a977fc5fdea8095bc0ae25ba	pci imx6 fix imx6_add_pcie_port section mismatch warning imx6_add_pcie_port is called only from from imx6_pcie_probe which is annotated with __init thus it makes sense to annotate imx6_add_pcie_port with __init to avoid section mismatch warnings bhelgaas changelog
e5b609537616aae7effb6345c78f7a4f00201fd6	pinctrl single constify irq_domain_ops the irq_domain_ops are not modified by the driver and the irqdomain core code accepts pointer to a const data
6f1fed775316d58ba356b2ce62de600ad00f003a	btrfs dont lookup csums for prealloc extents the tree logging stuff was looking up csums to copy over for prealloc extents which is just work we dont need to be doing thanks
4818e856475b309667ee38d4d0f2e3c1b933feef	bna fix soft lock-up during firmware initialization failure bug in the driver initialization causes soft-lockup if firmware initialization timeout is reached polling function bfa_ioc_poll_fwinit incorrectly calls bfa_nw_iocpf_timeout when the timeout is reached the problem is that bfa_nw_iocpf_timeout calls again etc the bfa_ioc_poll_fwinit should directly send timeout event for iocpf and the same should be done if firmware download into hw fails
a7545f2afcfc49fd5341fe51e943064eefe20ea1	bluetooth use hci_pend_le_action_lookup to look up report entries instead of looking through the entire list of entries we can more efficiently use the new hci_pend_le_action_lookup function to look up entries specifically in the pend_le_reports list since the search is now limited to the right list we can also remove an unnecessary check for list_empty before the lookup
5d244f7effafeaa5272ca5daa37d8b7bb17967a8	input synaptics-rmi4 fix debug for sensor clip the debug would only ever output zero for the clip information
fed8c45727abd273fd74b3e78b35be4929121334	dma pl330 use dma_addr_t for describing bus addresses the microcode bus address is currently a u32 which fails to compile when building on a system with bus addresses this patch uses dma_addr_t to represent the address instead
60154a1e0495ffb8343a95cefe1e874634572fa8	batman-adv avoid nullptr dereference in dat after vlan_insert_tag vlan_insert_tag can return null on errors the distributed arp table code therefore has to check the return value of vlan_insert_tag for null before it can safely operate on this pointer
40989cf3c1e3c114d3558ad4d7513344ed612ac2	greybus arche-apb drop unnecessary checks wake_detect_gpio and resetn_gpio are guaranteed to be valid in apb_ctrl_cleanup and irq-handler no need to check for their validity
f8de55b6252b30f9bc1dcb62964f7b49e00983fa	crypto tcrypt use unsigned long for mb ahash cycle counter for the timescales we are working against there is no need to go beyond unsigned long
21fdf0a1c10719f6edbb5961f5b076f5575d4bce	mac802154 rx use netif_receive_skb this patch removes netif_rx_ni call instead we call netif_receive_skb we can do that since commit c5c47e67bcd24638a059b1b5e9ec18c95f8634ca mac802154 rx use tasklet instead workqueue
6d91641613a66681d0b291e6f848107d289f70e8	mmc host mxcmmc simplify a trivial if-return sequence simplify a trivial if-return sequence possibly combine with a preceding function call the semantic patch that makes this change is available in more information about semantic patching is available at
68d5a59e0ceb69fe8e4123666d9398c3c1331d8a	asoc allow userspace control of speyside headphone output in order to facilitate the widest range of use cases especially things like speakerphone allow the headphone output to be enabled and disabled by the application layer
26aab2b14cfef377e8a339348d8c5057bcba30e8	staging rtl8723au rewrite the right hand side of an assignment this patch rewrites the right hand side of an assignment for expressions of the form a a b to be a b where this issue was detected and resolved using the following coccinelle script identifier i expression e i e e identifier i expression e i e e
6173ee2886ca46e00ba3d8f0b4a9a1cd6f8a76ce	only call commit_planes when there are things to commit the atomic helpers set planes_changed on a crtc_state if there is any plane_state bound to that crtc if theres none and there is no pipe update required the crtc has nothing to update so vblank evasion can be skipped
a4d3326c2de46fd7bcc47d1e8786efccfc152f81	kvm vmx fix dpl during entry to protected mode on cpus without support for unrestricted guests dpl cannot be smaller than rpl for data segments during guest entry but this state can occurs if a data segment selector changes while vcpu is in real mode to a value with lowest two bits __number__ fix that by forcing dpl rpl on transition to protected mode this is a regression introduced by c865c43de66dc97
6856d30c6c0038dc0648009853533af3af6c5ba8	usb dwc3 ep0 return early on null requests if our list of requests is empty return early theres really nothing to be done in case our request list is empty anyway because the only situation where we our list is empty is when were transferring zlps
d511b9c3626c83874824b1118f8a2e84ef63a7d3	gpio gpio-da9052 convert to the new da9052 interrupt functions convert to the new da9052 interrupt functions so that we can get rid of irq_base references
b6cb5bab263791d09abe88f24df6c2da53415320	use memblock apis for early memory allocations switch to memblock interfaces for early memory allocator instead of bootmem allocator no functional change in beahvior than what it is in current code from bootmem users points of view archs already converted to no_bootmem now directly use memblock interfaces instead of bootmem wrappers build on top of memblock and the archs which still uses bootmem these new apis just fallback to exiting bootmem apis
1684d3ba488529266ce6f97b88076bd185f4790e	change pptable output format from ascii to binary
474bfe5ff961831b83e08092fd3e093bd3a1418c	staging comedi adv_pci1724 rename ao_ranges_1724 for aesthetics rename the analog output comedi_lrange table so it has namespace associated with the driver
36510adde3d9c073a538e441c38515b7741d1732	enable secboot and gr all the bricks are in place for secure boot to be enabled this in turn makes gr usable so enable them all
af2e7aaed1ccf30e61af3e096ac2c7df2f2d6c2a	replace access_once read_once access_once does not work reliably on non-scalar types for example gcc __float__ and __float__ might remove the volatile tag for such accesses during the sra scalar replacement of aggregates step change the spinlock code to replace access_once with read_once
f14d6892e4a6086d48fa77ac8e59003d3f4f8e16	sb_edac make node id retrieval per model haswell has a different way to retrieve the node id make so this procedure can be reimplemented
5359d112dcb081fd7a5f2de287fa995f6ba0800c	revert mac80211 add pointer for driver use to key this reverts commit f9a060f4b2003eb7350762e60dfc576447e44bad no driver has turned up needing this functionality and ive just implemented the functionality i wanted this for in a different way thus remove it again until somebody shows up with a need for having it
f9fef6181a9590261c296be9e2a19b6aa3c13ba7	phy berlin-sata fix module autoload for of platform driver this platform driver has a of device id table but the of module alias information is not created so module autoloading wont work
fc7e48aad35bf98c84cf21aed5c2f100c5ce009b	fix vmem_add_mem should only then insert a large page if pmd_none is true for the specific entry we might have a leftover from a previous mapping in addition make vmem_remove_ranges page table walk code more complete and fix a couple of potential endless loops which can never happen
e194401cf4d49e7fe2f8ec994130d59e94f09137	clk meson-gxbb add gp0 pll init parameters tha amlogic gxbb soc gp0 pll needs some vendor provided parameters to be initializated in the the gp0 control registers before configuring the rate with the rate table provided parameters gxbb gp0 pll tweaks are also selected to respect the vendor init procedure link
75a2352d0110960aeee1a28ddc09a55f97c99100	dcache close d_move race in d_splice_alias d_splice_alias will d_move an is_root directory dentry into place if one exists this should be safe as long as the dentry remains is_root but i cant see what guarantees that once we drop the i_lock all we hold here is the i_mutex on an unrelated parent directory instead copy the logic of d_materialise_unique
23d54837e4f3a44ad4514d5eae8245c2250217ff	cleanup the tail_vma horror in m_next __number__ kill the first vma null check firstly this is not possible m_next wont be called if or the previous returns null and if it was possible the vma tail_vma check is buggy we should not wrongly return __number__ make this function readable the logic is very simple we should return check vma tail once and return vm_next tail_vma
7f1b5a9966b176e10d6cd322324a82be2379a51b	arm missing checks of return values
ef9feb682dea988f731a2e5a2e8e498aba6a9da7	tools fix mq_open_tests compile warnings fix several compile warnings these are repeats like the ones below gcc mq_open_tests in function warning format expects argument of type but argument __number__ has type in function warning ignoring return value of declared with attribute warn_unused_result seteuid0
cc581c12ac1c1a3340949a60bffd993d8c60d965	isp1760-hcd use fix using the bare numbers to set the whubcharacteristics field of the hub descriptor while the values are in
7927092253da598331542bdedb8fd5612f161f80	sh_eth call sh_eth_tsu_write from sh_eth_chip_reset_giga sh_eth_chip_reset_giga doesnt really need to use direct iowrite32 when writing to the arstr register it can use sh_eth_tsu_write as all other chip_reset methods
629b15b95d5b12a47791147b7559eacbad04d507	asoc wm5100 remove stubs of asoc-level register map code
e69f18f06b97ed29645d020500222bfcec2b42b2	block ensure we only enable integrity metadata for reads and writes wed occasionally attempt to generate protection information for flushes and other requests with a zero payload make sure we only attempt to enable integrity for reads and writes
fc945d6eb70ebf29532b94ae309c0d4c6d609c3c	w1 mxc_w1 enable driver compilation with compile_test this helps increasing build testing coverage to do this functions was be replaced with simple variants
559b1a257ddeac637b8bb3a2c2469aaa2bde5383	iwlwifi use iwl_trans_set_wr_ptrs to init the queues this functions does the job so use it instead of duplicating the code
e9da6b3ca5a6a0df8c8b790d8f1f4b232bed2a6b	media media remove unused element datawidth from struct mt9m111
2a1ff812c40be982e4dd7a44159462fb25bebdf3	perf annotate introduce alternative method of keeping instructions table some arches may want to dynamically populate the table using regular expressions on the instruction names to associate them with a set of functions struct ins_ops so provide a fallback for when the ins__find method fails that fall back will be able to resize the setting appropriately helper functions to associate an ins_ops to an instruction name growing the if needed and resorting it are provided all the arch specific callback needs to do is to decide if the missing instruction should be added to with a ins_ops association link
7e8cc8dce17574e432945fa75882cd401c3ef673	pstore always allocate buffer for decompression currently pstore_mkfile performs a memcpy of the record contents so it can live anywhere however this is needlessly wasteful in preparation of pstore_mkfile keeping the record contents always allocate a buffer for the contents
973109cafc9d11e41be4d64667ff2165bf79d948	alsa jack fix a randconfig build issue building errors reported such as below when reference to here change to enable snd_jack selectively to fix the issue also remove the config snd_hda_input_jack which wont be used anymore
0aa67e75b3d59cfe412bfa54ca23797e6c2e3270	rcutorture add irqs-disabled test for call_rcu mutation testing carried out by iftekhar ahmed of oregon state university showed that rcutorture is failing to test invocations of call_rcu having interrupts disabled this commit therefore adds interrupt disabling around one of the existing invocations of call_rcu and friends
d3373a241bbf034a1ef43e6417e3d0029c8a8145	flush the context object from the cpu caches upon switching the issue is that we stale data in the cpu caches when we come to swap-out the object the cpu may short-circuit the reads from those cacheline and so corrupt the context object secondary leaving the context object as being marked in the cpu write domain whilst on the gpu active list is a bad idea and will throw warnings later note thanks to calling set_to_gtt_domain with write false and not setting any gpu write domain when putting a context object onto the active list when we switch away from it the set_to_gtt_domain call wont block danvet added a note to the commit message and a comment in the code to explain the clever non-blocking trick
fa8296ae62364d80bb82c4c011469ae3e423d509	clocksource dw_apb_timer_of switch to sched_clock_register the __number__ bit sched_clock interface now supports __number__ bits upgrade to the __number__ bit function to allow us to remove the __number__ bit registration interface
c483e02614551e44ced3fe6eedda8e36d3277ccc	af_packet simplify vlan frame check in packet_snd for ethernet frames eth_type_trans already parses the header so one can skip this when checking the frame size
6661039dc906bce5d532477f26c7c965f25e5d02	set feat_percpu flag the arm_global_timer is a per cpu device set the appropriate flag
50af1e9df2194991280463541bc89c55ca45164a	sh dma_debug add debug_dma_mapping_error support add dma-debug interface debug_dma_mapping_error to debug drivers that fail to check dma mapping errors on addresses returned by dma_map_single and dma_map_page interfaces
e4d2fd9eb43d12e9b6a7ab842bf6986b4dd75a1d	arm shmobile r8a7791 add sgx clock to device tree
8d4eb2acb6d430e155a7d81bdbceca1e3394674b	media mtk-vcodec fix default output buffer size when calculate output buffer size in vidioc_try_fmt it will add more size hw need in each plane but in mtk_vcodec_enc_set_default_params it do not add same size in each plane this makes v4l2-compliance test fail this patch fix the issue
2cb389b7e4966151d44c505d49ea31a8d6969372	zero unused wm1 watermarks on the hardware supposedly ignores the wm1 watermarks while the pnd deadline mode is enabled but clear out the register just in case this is what the other os does and it does make register dumps look more consistent when we dont have partial wm1 values lingering in the registers some wm1 watermarks already get zeroed when the actually used dspfw registers get written
37db63a400d3bac467795aa43901065fd8d903b7	btrfs fix max chunk size check in chunk allocator fix a bug where in case we need to adjust stripe_size so that the length of the resulting chunk is less than or equal to max_chunk_size dup chunks turn out to be only half as big as they could be
35cf248f8860b8d2956516d6cdf7e57ff4ed4cbb	implement dm_region call-backs add the get_dm_regions and put_dm_regions callbacks to the iommu_ops of the amd iommu driver
7a0524cfc8f9f585471a31b1282a9ce4a1a7d444	mm memcg remove unneeded checks from newpage_charge all callsites pass in freshly allocated pages and a valid mm as a result all checks pertaining to the pages mapcount or the fallback to init_mm are unneeded
2b7b3ad2fb8f904ae9ba7ca71323bc11c0978d91	cope with reserved buffers on swap list in ttm_bo_swapout v2 replace the while loop with a simple for each loop and only run the delayed destroy cleanup if we can reserve the buffer first no race occurs since lru lock is never dropped any more an empty list and a list full of unreservable buffers both cause to be returned which is identical to the previous situation
869404cb4ff23a8f7af09d8395586630ff56f72f	ipr set coherent dma mask use dma_set_mask_and_coherent to set both the dma and coherent dma mask
3e3d2225aef52112de7ecffd9ce611eac8a9766d	video tcx remove redundant dev_set_drvdata driver core sets driver data to null upon failure or remove
f837a9b5ab05c52a07108c6f09ca66f2e0aee757	cpufreq cpufreq-cpu0 remove device tree parsing for cpu nodes now that the cpu device registration initialises the of_nodeif available appropriately for all the cpus parsing here is redundant this patch removes all dt parsing and uses instead
225112a56942c74f1e114587719fa2bd0d180b3e	fix thermal hysteresis unit conversion thermal hysteresis represents a temperature difference but the original code treats it as a temperature value convert it from tenths of degree kelvin to milli-celsius by deducing __number__ this is not right kelvin and celsius have same degree size from temperature difference view the conversion between tenths of degree kelvin unit and milli-celsius unit is just to multiply __number__
e59a8451be1162d5a10a33e40092f1796cb8fdca	panic if ioremap or domain creation fails current code will only warn and then dereference the null pointer or continue which results in a fatal null pointer dereference later if the initialization fails the machine is unusable so panic right away tglx massaged changelog and picked the irqdomain panic from the next patch link
bb12b8b26e197b21e3f28d5401bfee6f86a8d633	netns ebtable allow unprivileged users to operate ebtables ebt_table is a private resource of netns operating ebtables in one netns will not affect other netns we can allow the creator user of userns and netns to change the ebtables
7c542772cc5ff061ec3d06658f5d36304bcd5395	use kmemdup use kmemdup when some other buffer is immediately copied into allocated region it replaces call to allocation followed by memcpy by a single call to kmemdup
7ba8bd75ddc6b041b5716dbb29e49df3e9cc2928	net pktgen dont abuse in pktgen_thread_worker commit net pktgen kill the wait for kthread_stop code in pktgen_thread_worker removed in particular the final __set_current_statetask_running and i didnt notice the previous set_current_statetask_interruptible this triggers the warning in __might_sleep after return afaics we can simply remove both set_current_states and we could do this a long ago right after ef87979c273a2 pktgen better scheduler friendliness which changed pktgen_thread_worker to use wait_event_interruptible_timeout
42110e91de7f66f6276afdec8040aedbb8c5a6fd	video atmel_lcdfb introduce atmel_lcdfb_power_control to simplify the check on the presence of the callback
355f4fb1405ec29d0fac49b4d41fcd78cbd455d5	kvm nvmx vmclear an active shadow vmcs after last use after a successful vm-entry with the vmcs shadowing vm-execution control set the shadow vmcs referenced by the vmcs link pointer field in the current vmcs becomes active on the logical processor a vmcs that is made active on more than one logical processor may become corrupted therefore before an active vmcs can be migrated to another logical processor the first logical processor must execute a vmclear for the active vmcs vmclear both ensures that all vmcs data are written to memory and makes the vmcs inactive message-id google.com
0980c1e3084572b1d6c35ace5d795cf68b7ae409	tcp use c99 initializers in new_state
25b8a88c10770e8c3f14bf2e222691dc6e79de78	pch_phub use kernels format option to print mac
24a4f8009ee9e259a412d86373e0d2aac3a80333	ubifs be more informative in failure mode when we are testing ubifs recovery it is better to print in which eraseblock we are going to fail currently ubifs prints it only if recovery debugging messages are enabled but this is not very practical so change dbg_rcvry messages to ubifs_warn messages
15ae2c7bdc9a5a46999319b88a465a64d265dc40	fix bad using of page offset in bl_read_pagelist blocklayout uses file offset for the read-back pages offset of first writing its definitely wrong it writes data to bad address of page that cause userspace application segment fault it must be the page base stored in also the pg_offset has no influence with isect and extent length note the offset of the non-first page is always zero ps a test program will segment fault at read as _gnu_source int mainint argc char char buf2049 char null int fd if argc __number__ printfusage argv0 return __number__ filename argv1 fd openfilename o_rdonly o_direct if fd __number__ printfopen fail filename return __number__ lseekfd __number__ seek_set if readfd buf sizeofbuf __number__ sizeofbuf __number__ printfread __number__ bityes data from fail filename out closefd return __number__
11c22da619101a5a4332df718268e6214e3919f3	use the atomic state in intel_update_primary_planes this function was still using the legacy state convert it to atomic while were at it fix the fixme too and disable the primary plane v2 daniel add fixme explaining that update_primary_planes should soon get removed anyway dont call since we cant disable the primary plane with a cs flip noticed by ville
e584da5e3cc0b299d4b86072941cbe6dd9a046a8	mac80211 in adhoc dont update last_rx if sta is not authorized it does not make sense to keep a station alive if it is not authorised at all if is used it could also be the case that something went wrong during the keys exchange and the stations ended up in a not recoverable state by not updating last_rx we are giving the station a chance to be deleted and to start the key exchange once again from scratch
bcf3145fbeb1bd91ad2ca67b1946077530f7bfb1	perf evlist enhance perf_evlist__start_workload when perf tries to start a workload it relies on a pipe which the workload was blocked for reading after closing the pipe on the parent the workload child can start the actual work via exec however if another process was forked after creating a workload this mechanism cannot work since the other process child also inherits the pipe so that closing the pipe in parent cannot unblock the workload fix it by using explicit write call can then closing it for similar reason the pipe fd on parent should be marked as cloexec so that it can be closed after another child execed link
43db2843a4a41cc8cdb6ab696639aeee1f4d5062	perf header make build_cpu_topology skip cpus when build_cpu_topo encounters cpus it fails to find any sysfs entries and returns failure this leads to build_cpu_topology and write_cpu_topology failing as well because header_cpu_topology has not been written read leaves cpu_topology_map null and we get null ptr deref at cmd_test __cmd_test test_and_print run_test test_session_topology check_cpu_topology __number__ session topology start test child forked pid __number__ templ file failed to write feature header_cpu_topology perf segmentation fault obtained __number__ stack frames test child interrupted end session topology failed this patch makes build_cpu_topology skip cpus by checking their presence against cpu_map built from online cpus link
a95f6a007042e76627d9722cb1a81f97c718f74b	switch to fake context on older gens we used to have per file descriptor hang stats for the i915_get_reset_stats_ioctl and for default context banning commit author ben widawsky bwidawsk.net date fri dec __number__ __number__ create a per file_priv default context made having separate hangstats in file_private redundant as i915_hw_context already contained hangstats so commit c482972a086e03e6a6d27e4f7af2d868bf659648 author ben widawsky intel.com date fri dec __number__ __number__ piggy back hangstats off of contexts consolidated the hangstats and enabled further improvements commit author mika kuoppala linux.intel.com date thu jan __number__ __number__ use i915_hw_context to set reset stats tried to reap full benefits of consolidation but fell short as we never switch to the fake private context on gens that dont have hw_contexts so remained null on those fix this by switching to fake context so that when request is submitted to ring proper context gets assigned to it testcase bugzilla
7a03fe6f48f35bbf5f5c3cb46f02e8c90b26b238	clk rockchip reset init state before mmc card initialization mmc host controllers io timing is unpredictable if bootloader execute tuning for hs200 mode it might make kernel failed to initialize mmc card in identification mode the root cause is tuning phase and degree setting for hs200 mode in bootloader arent applicable to that of identification mode in kernel stage anyway we cant force all bootloaders to reset tuning phase and degree setting before into kernel simply reset it in rockchip_clk_register_mmc
be55f1bca7cf1021a1f4417e2d5f48bdc32e0bd2	nfs remove extra dprintks from
169ec523c34212f6e382186bce88f17eba4cad49	ia64 fix trap handling in this case the original author did not provide the related reason string for die_if_kernel so the buf is not initialized the original author wants to generic a sigsegv and return not want to break to fall to die probably irrelevent since we no longer support ia-32 execution
e90bbacd8ce475535d03ccb8ad88c1d55840580a	media media dvb dmx fixed coding style issues of spacing fixed coding style issues of spacing
08bc3d4e67d486a9b2a5065c1c2ebaf13048a465	initialize all fields the c32 structure is allocated on the stack and its idx field is not initialized before copying it to user level this patch takes the value from the result of the ioctl as done for the other fields
a6f2c7fff90a6fe7a31e764a21b65a809fafa765	scsi hisi_sas set dma mask before allocate dma memory the device dma mask was being set after the bulk of the dma allocations in the driver init so potentially dma allocates fail to resolve relocate before allocating the dma memory when initialising the driver
654a6d2f962edb7bf85973cfe93a04e24f56f902	gfs2 reduce struct gfs2_trans in size a couple of int fields were being used as boolean values so we can make them bitfields of one bit and put them in what might otherwise be a hole in the structure with __number__ bit alignment
fce9d33f51bf1d84270238885c2712d48a056e41	mmc sdhci fix error conditions for controller reset add the case of set_block_count command error to the error conditions check for making a controller reset at request handling finish otherwise if the set_block_count command failed with a timeout the controller state was not reset and the next command failed too in the case of data error the controller reset is already done in finish_data function before sending stop command if present so the finish tasklet should make a reset after data error only if no stop command existed in the request also fix the indentation of this condition check to make it more logical
ce4a9cc579381bc70b12ebb91c57da31baf8e3b7	fix update_mmu_cache_pmd call this build error is currently hidden by the fact that the x86 implementation of update_mmu_cache_pmd is a macro that doesnt use its last argument but commit b32967ff101a mm numa add thp migration for the numa working set scanning fault case introduced a call with the wrong third argument in the akpm tree it causes this build error in function migrate_misplaced_transhuge_page_put error incompatible type for argument __number__ of update_mmu_cache_pmd note expected struct pmd_t but argument is of type pmd_t fix it
2e94d5ae5da1d2e798045a53b5e234a42b090908	serial core constify struct uart_port field dont allow modifications of port name its serial cores business only
d5e582971576698ab3e0236359f1ab5b91686047	convert to device_group call-back convert the fsl pamu driver to make use of the new device_group call-back
2f9ba5b2f8420e0e5712080dafc773f7dd47c3df	nvmem core return error for non word aligned access nvmem providers have restrictions on register strides so return error when users attempt to buffers with sizes which are less than word size without this patch the userspace would continue to try as it does not get any error from the nvmem core resulting in a hang or endless loop in userspace
8bfbeed58665dbbf63813017712bd0c8e978379e	sata_rcar correct sata_rcar_sht using ata_bmdma_sht to intialize sata_rcar_sht was suboptimal as the r-car descriptor table transfer counter is __number__ bits wide bit __number__ to bit __number__ so that the dma_boundary field of is just too small as well as the sg_tablesize field of __number__ use ata_base_sht to initialize sata_rcar_sht instead and give proper values to the dma_boundary and sg_tablesize fields explicitly
4857e2b09575be1eb7bb1196011f5b32d2b13bd7	remove braces in sd_read_data fixed below checkpatch warnings braces are not necessary for single statement blocks
3a229b70d6fdd2aebf750997a5ca4e6b8885e7f6	input ad7879-spi remove redundant spi_set_drvdata driver core sets driver data to null upon failure or remove
b96c033cc8fa6484b1771d43e2fcce61e1fa5097	dmaengine omap-dma do not suppress interrupts for memcpy if the client queues up more transfers the driver will not able to move to the next transfer without knowing that the previous descriptor is completed
4627456a77782026ab60c4a16435b089bb444fce	batman-adv adapt the tt component to use the new api functions
eaa567925288a0908cc9265451b01f76e4a05ab5	staging vt6656 remove static declaration vnt_start_interrupt_urb_complete moving vnt_start_interrupt_urb in visibility of vnt_start_interrupt_urb_complete
2e263c824a5dfc3adcadac0ac1aed762605f0538	test kiq before compute rings if kiq isnt working the compute rings wont work either
e087ab74f3dd30105041e1c68db209f235b63042	serial sccnxp disable regulator on error the patch disables the regulator in case of errors if we have it in addition the patch adds support for deferred regulator probe and makes error path are a bit clean
d81b37fcad764c7babd7dd858aeb1b9afd2df5cc	gpio pl061 use gpiochip data pointer this makes the driver use the data pointer added to the gpio_chip to store a pointer to the state container instead of relying on container_of
ceb8ef2e20fe452f55d9fee0e8c8f2dfcec73db5	arm mach-omap2 drop owner assignment from platform_drivers a platform_driver does not need to set an owner it will be populated by the driver core
4beddbe38cb402ff509efa9dc27d3e9e188902cd	ipvs dh scheduler does not need gfp_atomic allocation schedulers are initialized and bound to services only on commands
1a498ec45eeabcb246c3c3f5822ed9ac1b4f70d8	revert mtd switch open_mtd_by_chdev to use of vfs_stat this reverts commit vfs_stat can only be used on user supplied buffers
d8bbf90a6251953df09773dd232fcd6337c88d7a	rt2800 __number__ initalize rf_r27 on older revisions based on nicinitrt5592rfregisters from
bff7993936a1617f7502ddd2a09d37767fc8c929	media mt9v022 driver send valid horizontal_blanking values to mt9v024 soc camera this patch fixes the issue that appears when mt9v024 camera is used with the mt9v022 soc camera driver the minimum total row time is __number__ columns horizontal width horizontal blanking the minimum horizontal blanking is __number__ thus when the window width is set below __number__ horizontal blanking must be increased for the mt9v024 camera the values above are correct and for the mt9v022 camera the correct values are in the existing kernel driver
f84ed59a612d866cde0bd17ad2a52acb524d44c9	constify the address pointer in __get_user_check in __get_user_check we create an intermediate pointer for the user address were about to fetch we currently dont tag this pointer as const make it const as we are simply dereferencing it and its scope is limited to the __get_user_check macro
fb0174723e578f9023f1237143fb81e75f470f60	gianfar use more portable accessors accessors are power arch centric whereas are available in other arches also unlike expect non-volatile address arguments
beb55a0cc15a43be43a646b588fcf83822f0c44f	target remove __transport_execute_tasks for each processing context this patch removes the original usage of __transport_execute_tasks ahead of every transport_get_cmd_from_queue call in transport_processing_thread this helps reduce contention between qla2xxx wq with target_submit_cmd for reads and transport_processing_thread context servicing writes with full payloads for submission it also adds a __transport_execute_tasks to kick the task queue again without a descriptor with existing queue full logic but this may end up not being necessary
ba350fbc53b5798104b3fc245bb3c3461a4ef8dc	wireless add peer-to-peer related definitions the peer-to-peer ie is vendor-specific ie identified by wifi alliance oui and specific p2p oui type the payload of this ie consists of so-called p2p attributes this patch adds definitions for processing these attributes
81e8b88a1431bf1209d882da047c94eb8bcc1f14	staging tidspbridge remove ref counting in the nldr module has a nldr_init and a nldr_exit whose only purpose is to keep a reference counting which is not used at all this patch only removes the reference count variable but not the functions because they are used through an interface there is no functional changes
e53b7d87cc375fbe428551651094fb676764aae3	arm tegra support tegra30 in decompressor uart setup on tegra20 the uart clock runs at whereas on tegra30 it runs at modify arch_decomp_setup to detect tegra20-vs-tegra30 at run- time and program the correct divisor this makes uncompressor messages work correctly on tegra30 this also fixes early printk assuming zimage is used and this setup code runs v2 use chipid register to differentiate between chips rather than a gic register this should be more future-proof volatile is required to prevent the compiler transforming the apb_misc register read into an read of address __number__ higher since the hw only supports bit accesses and will hang on an access
9512349356ddc729db6eb03bc91f20afe0a22625	staging wlan-ng do not print message if kzalloc failed do not print message if kzalloc failed kzalloc has its own messages so no need to add extra one
cf3fe7aca03e14db107d649c5699a48bec054583	ixgbe copybreak sooner to avoid and offset change overhead this change makes it so that if only the first __number__ bytes of a buffer are used we just copy the data out and leave the offset and page count unchanged there are multiple advantages to this first it allows us to reuse the page much more in the case of pages larger than it also allows us to avoid some expensive atomic operations in the form of in perf i have seen cpu utilization for put_page drop from to as a result of this patch when doing small packet routing and packet rates increased by about
9f8466c6e09e62a1d047f2e57d90cd42e46b35c1	arm vt8500 add missing null terminator in dt_compat when i tried booting a stih415 dual core a9 with multi_v7_defconfig it failed to boot the issues seems to be changing by enabling or disabling vt8550 platform having a quick look at dt_compat list it seems to miss a null terminator which means of_flat_dt_match will compat check will cross the boundary of dt_compat and fault at some point which is what was happening in my case without this patch if we try to boot multi_v7_defconfig you might notice that some of the platforms might fault if they fall after vt8500 in machine-desc list other platforms which fall before vt8500 in mdesc list will not fault
e04f4b2debc84ab801ee26f0e4c1c99e3ac2bd04	media dib8000 move dereference after check for null my static checker complains that we dereference state inside the call to fft_to_mode before checking for null the comments say that it is possible for state to be null so i have moved the dereference after the check
51c39814b6b23c0d7b0c47ba9236248576a164ad	serial __number__ compute ttys index from port minor prepare for __number__ split calculate the ttys index directly from the port minor which avoids the global serial8250_reg reference from base port operations
0e1fc793c7e42308dddad103a195dd261c5bf650	staging wlan-ng coding style problem fix warning break is not useful after a goto or return __number__ file return __number__ break
f5e22bb6d91aba04fd252c1067b79c0227599a6a	nfsd drop duplicate checking of seqid in nfsd4_create_session
5b2696c1210721848f74632daf19d36c760923a3	fix alignment should match open parenthesis fixes alignment should match open parenthesis in checkpatch
4777bfdebbddc1f58d9148de5a3e00375d063768	bluetooth use gfp_kernel in hci_add_adv_entry this function is not called in interrupt context anymore so it should use gfp_kernel to allocate memory
44b7a8d33d666268062e0f725d5f14813a63a6ea	mm memcontrol do not uncharge old page in page cache replacement changing of a live page is tricky and fragile in particular the memcg writeback code relies on that mapping being stable and users of mem_cgroup_replace_page not overlapping with dirtyable inodes page cache replacement doesnt have to do that though instead of being clever and transferring the charge from the old page to the new force-charge the new page and leave the old page alone a temporary overcharge wont matter in practice and the old page is going to be freed shortly after this anyway and this is not performance critical
ca825828a5c797d431f6ec6a83c912787ffbb8af	qla2xxx declare an array with file scope static this patch avoids that building with triggers a compiler warning about a missing declaration
405c92f7a5417274419192ad134d6dc71aedaaa4	ipv6 add defensive check for checksum_partial skbs in ip_fragment checksum_partial skbs should never arrive in ip_fragment if we get one of those warn about them once and handle them gracefully by recalculating the checksum see-also commit ipv6 ip6_fragment should check checksum_partial
6f7306622ff4e6b6d59efa77383e0cd9d85f46b0	iwlwifi mvm remove unnecessary check in iwl_mvm_is_d0i3_supported the d0i3_mode element is never set to iwl_d0i3_off so its not necessary to check it in iwl_mvm_is_d0i3_supported
79421b4eaef12f0ce392ed5229aff6401ed4196c	cxgb4vf add support for chelsios t480-cr and t440-lp-cr adapters this patch adds pci device ids for chelsios t480-cr and t440-lp-cr adapters
c61a8b49846ecc11f7959f573b9548f859bc73a5	greybus arche-platform make fw_flashing_seq return error make arche_platform_fw_flashing_seq return error value needed later when we add clock enable support for fw flashing testing done tested on platform
5a5c5fd48e3bcd57572e9a7a4964ed8f38a20b87	bonding arp_ip_count and arp_targets can be wrong when getting arp_ip_targets if we encounter a bad ip arp_ip_count still gets increased and all the targets after the wrong one will not be probed if arp_interval is enabled after that unless a new ip target is added through sysfs because of the zero entry in this case reading arp_ip_target through sysfs will show valid targets even if theres a zero entry example when retrieving the list from arp_ip_target the output would be but there will be a __number__ entry between and if arp_interval is enabled after that will never be checked because of that
b7f5d0114c708d6efd264a2c5e5a31cf292a9cec	kvm ppc initialize linears with zeros rmas and hpt preallocated spaces should be zeroed so we dont accidently leak information from previous vm executions
1550d34e5626a20a2e12c73bdc1e6e217a0ba897	ceph remove redundant test of and silence static analysis warnings
5ebf1f29e20de9b37937f808dc2ac8dd15311450	mips octeon use irq_get_trigger_type to get irq flags use irq_get_trigger_type to get the irq trigger type flags instead calling irqd_get_trigger_typeirq_desc_get_irq_datairq link
f6517cfc84246b2606fd631730846c648ee0d455	f2fs fix a build warning this patch modifies flow a little bit to avoid the following build warnings in function warning may be used uninitialized in this function warning may be used uninitialized in this function
e738d3ebbf70ebadb83f3a4060dc34f422c2fbe7	tracing kill remove it has no users and in fact even the commit ae63b31e4d0e tracing separate out trace events from global variables which added this member did not use it link
4906baf080623b4971bdeeac0a9fec5b8885d3ac	mmc tmio eliminate unused variable mmc warning fix below compile warning cc in function tmio_mmc_suspend warning unused variable mmc in function tmio_mmc_resume warning unused variable mmc
b1ff53e9fd26a11ede97fcad5ff2e9be00b61bf8	net systemport fix dma_unmap_single len dma_unmap_single was called with dma_unmap_lencb dma_len unfortunately we failed to assign this length field in bcm_sysport_rx_refill or bcm_sysport_alloc_rx_bufs using dma_unmap_len_set this causes packet contents corruption because are we not invoking the cache invalidation routines with the proper length fix this by using the full rx buffer size rx_buf_length because the mappings for the rx bufers are created with that size
3079c652141f9d6377417a7e8fd650c9948df65e	caif fix napi poll list corruption the commit d75b1ade567ffab085e8adbbdacf0092d10cd09c net less interrupt masking in napi breaks caif it is now required that if the entire budget is consumed when poll returns the napi poll_list must remain empty however like some other drivers caif tries to do a last-ditch check and if there is more work it will call napi_schedule and then immediately process some of this new work should the entire budget be consumed while processing such new work then we will violate the new caller contract this patch fixes this by not touching any work when we reschedule in caif
31972f6e517d82a4f60de4994908724b7b47e337	input ti_am335x_tsc warn about incorrect spelling in the hopes that people run new kernels on their devices lets add a warning message asking users to have their dts file fixed the goal is that by linux __float__ we will be able to remove support for the bogus version of our touchscreens dts
ed135dd69556c70fb780985c536cc650e7f7b450	asoc codec duplicated callback function goes to component on ab8500-codec codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
b899065640fc0c8b02d762bd5869c0afd3120c64	media davinci-vpfe-capture delete unnecessary braces in vpfe_isr do not use curly brackets at one source code place where a single statement should be sufficient
363ee17f0f405faff74d9aaf93d21d5f41d5102d	add mlock_future_check helper both do_brk and do_mmap_pgoff verify that we are actually capable of locking future pages if the corresponding vm_locked flags are used encapsulate this logic into a single mlock_future_check helper function
30af99db7ab3483f5ce83ccb890533c9378c2ced	staging lustre lmv error not handled for lmv_find_target this issue is found by smatch has been reported as- unchecked usage of potential err_ptr result in lmv_hsm_req_count and lmv_hsm_req_build added err_ptr in both functions and also return value check added intel-bug-id reviewed-on
9e793ab84ed482047f7226595313f0f3a0aa6854	arm64 show unhandled alignment faults report unhandled alignment faults if the show_unhandled_signals variable is set via
13ca56e0537aa148b7e7a6ea38ca6a6a1dc3e197	bluetooth make l2cap_data_channel return void l2cap_data_channel always return __number__ which is not used anywhere make it void function
daf67ce8cffd148308ae15c25fb06c1fc20c88f1	iwlwifi unlock on error path we introduced a lock here in ff1ffb850b iwlwifi fix dynamic loading but we missed an error path which needs an unlock
cb5f523779953d61221885988cecda0a2bc702cc	staging comedi refactor rti802 driver to remove forward declarations move the routines and the associated struct comedi_driver and other variables to the end of the source this is more typical of how other drivers are written and removes the need for the forward declarations
ecd3a7dad982aeba6409ef6d933fd7e372a70127	mmc core silence compiler warning in __mmc_switch
59617e74e20dac9523e34f5461162b19347dacf8	media remove compat control ops they are no longer used in old non-control-framework bridge drivers
2a0343baa4cc0d4e618898f8bdae8136bbb6e1b2	ftrace fix trampoline hash update check on in the loop of ftrace_save_ops_tramp_hash it adds all the recs to the ops hash if the rec has only one callback attached and the ops is connected to the rec it gives a nasty warning and shuts down ftrace if the rec doesnt have a trampoline set for it but this can happen with the following scenario cd echo schedule do_irq set_ftrace_filter mkdir echo schedule echo function_graph current_function echo function echo nop the above would then trigger the following warning and disable ftrace cut here warning cpu __number__ pid __number__ at modules linked in ipt_masquerade sunrpc ip6t_reject nf_conntrack_ipv6 nf_defrag_ip cpu __number__ pid __number__ comm bash not tainted hardware name to be filled by to be filled by be filled by bios __number__ __address__ __address__ __number__ __address__ __address__ __address__ __number__ __address__ __address__ __address__ __number__ call trace __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ end trace cut here link
ce94df9c099d2a828610576f31dddfa552243edc	arm vic use the domain mapping function to assign handlers this removes the internal functions for assigning irq handlers to each interrupt in favor of using the internal map iterator in the irq domain code
3abe742339567ac5d63c520834826aacd9b5d5f6	arm sa1100 collie add top boot mtd partition the cfi mapping is now perfect so we can expose the top block read only there isnt much to read though just the sharpsl_params values
c27799f99f589e76ea84642508a32638091a409a	bluetooth hci_uart use h4_recv_buf helper for protocol instead of using hci_recv_stream_fragment use the local available h4_recv_buf helper function
9735e91e9c29c0d8fe432aef1152e43e50bdb316	x86 realmode use init_level4_pgt to set trampoline_pgd directly with handler way to set early page table level3_ident will go away with native path so just use entries in init_level4_pgt to set them in trampoline_pgd link
8ce9beac4661f576ea0d518b9f086bb52a171a37	drivers net wireless b43 fix possible null ptr dereference on the ternary expression the e variable could be null dereferenced when b43_nphy_get_rf_ctl_over_rev7 function returns null
bef0e549d165b681bb505c9839ce3d3be33822ee	media improve documentation for struct dvb_tuner_ops improve the comments at the header removing kernel-doc tag from where it doesnt belong grouping the legacy tuner functions and improving the text no functional changes
48c4717f30cc1f83d02f045c3b47a2885863bff2	optimize fpu__save so fpu__save does this currently copy_fpregs_to_fpstatefpu if fpregs_deactivatefpu which deactivates the fpu on lazy switching systems unconditionally both usecases of fpu__save use this function to save the fpu state into a fpstate and math error signal handling the unconditional disabling of fpu registers in the lazy switching case is probably a mistaken conversion of old fnsave code that had to disable fpu registers so speed up this code by only disabling fpu registers when absolutely necessary when indicated by the copy_fpregs_to_fpstate return code if fpregs_deactivatefpu
6b62e7578b82c797897f960680cebe3c858780d6	staging comedi das16m1 tidy up clear interrupt register define rename this define and use a consistent comment throughout the code
f2c872e1983cfcc9e46e90bbdbb139d5c8698244	staging comedi addi_apci_3120 remove test for di subdevice the boards supported by this driver all have digital inputs remove the test for it
319450211842ba92d0604af6e4ddf15f445efbcf	btrfs reada bypass adding extent when all zone failed when failed adding all dev_zones for a reada_extent the extent will have no chance to be selected to run and keep in memory for ever we should bypass this extent to avoid above case
8a2fa38fddd33a5a22a430545720f7f81d88e8db	removed optional dummy crtc mode_fixup function this patch set nukes all the dummy crtc mode_fixup implementations made on top of daniel branch link
c73c3d9c49daae8acbac4cd14bcd81626887c0e6	tcp fix truesize accounting in tcp_try_coalesce this patch addresses several issues in the way we were tracking the truesize in tcp_try_coalesce first it was using ksize which prevents us from having a __number__ sized head frag and getting a usable result to resolve that this patch uses the end pointer which is set based off either ksize or the frag_size supplied in build_skb this allows us to compute the original truesize of the entire buffer and remove that value leaving us with just what was added as pages the second issue was the use of if there is a mergeable head frag we should only need to remove the size of an data aligned sk_buff from our current to compute the delta for a buffer with a reused head by using the value of truesize was being artificially reduced which means that head frags could use more memory than buffers using standard allocations
8b9ba7a38c4916e67f43223a7973374e7c44e5cb	use gem page helpers
98c7863c36bdf20c07e38d8bea5261902b52f98d	spi xcomm export i2c module alias information the i2c core always reports the modalias uevent as name regardless if the driver was matched using the i2c id_table or the of_match_table so the driver needs to export the i2c table and this be built into the module or udev wont have the necessary information to auto load the correct module when the device is added
6dacaddd4850cbd6390d4f87548262b5ed79b4a5	vlan kill vlan_hwaccel_receive_skb
a53f4f8e9c8ebe6c9ee3b34c368913aae9876e22	btrfs dont call btrfs_start_transaction on frozen fs to avoid deadlock commit btrfs do commit in sync_fs if there are pending changes will call btrfs_start_transaction in sync_fs to handle some operations needed to be done in next transaction however this can cause deadlock if the filesystem is frozen with the following output __float__ call trace __float__ __address__ __float__ __address__ __float__ __address__ btrfs __float__ __address__ btrfs __float__ __address__ btrfs __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ call trace __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ the reason is like the following holding s_umount vfs sync_fs staff btrfs_sync_fs btrfs_start_transaction sb_start_intwrite waiting thaw_fs to unfreeze vfs thaw_fs staff thaw_fs waiting sync_fs to release s_umount so deadlock happens this can be easily triggered by with inode_cache mount option the fix is to check if the fs is frozen if the fs is frozen just return and waiting for the next transaction enhanced comment changed to sb_freeze_write
4d29994ddb4cc97e19a533834df2e0fdb1c1d8a8	tty remove unused tty
6ab4ae9aadef65e2f7aca44fd963c302dcb5849e	tile enable gro in the tilegx network driver
2430a94d1e719b7b4af2a65b781a4c036eb22e64	clk fix __clk_init_parent for single parent clocks before commit b3d192d5121f clk simplify __clk_init_parent __clk_init_parent called only for multi-parent clocks that commit changed the behavior to call if available even for single-parent clocks and root clocks it turned out a problem because there are some single-parent clocks that implement callback and return non-zero index the socfpga clock is the case the commit broke the socfpga boards to keep the original behavior invoke only when num_parents is greater than __number__
8c7f65943dfb93c2583f935f20ec39e8559d93d3	omap3 beagle dont touch omap_device internals board code should not touch omap_device internals to get the devices use existing apis omap2_get_mpu_device omap2_get_iva_device
5a344dda944b4eea5a95e47a49ae5b53ce4f49b6	re-enable cac control on si now that the fixed point functions are fixed we can re-enable cac support
4a025e26a2979193739f46e391ffc05cf0637d90	clarify error paths in create_stolen_for_preallocated use the standard inversely ordered goto label stack for everything spotted while reviewing place where we might need to to call vma_destroy but failed to do so
a13842dc668b40daef4327294a6d3bdc8bd30276	kvm mtrr introduce var_mtrr_range it gets the range for the specified variable mtrr simplify boolean operations paolo
dfb276f098e0e90319a346bae2f205f2690d6b42	remove unused cp callbacks from radeon_asic
ed011a23c90796c386ae7004ef0823ade6583d21	media davinci-vpfe-capture use kmalloc_array in vpfe_probe a multiplication for the size determination of a memory allocation indicated that an array data structure should be processed thus use the corresponding function kmalloc_array this issue was detected by using the coccinelle software replace the specification of a data type by a pointer dereference to make the corresponding size determination a bit safer according to the linux coding style convention
89f84b9c2057fbfc85796d29d53d5b8e01002315	media em28xx remove obsolete em28xx_urb_timeout it isnt used anymore and uses constants which no longer exist
d07a74a546981a09ba490936645fbf0d1340b96c	dmaengine fix missing cnt in in dmatest hi on the latest tree my compiler has started giving the warning warning the omitted middle operand in will always be suggest explicit middle operand the following patch fixes the missing middle clause with the same fix that nicolas ferre used in the similar clauses there seems to have been a race between him fixing that and the extra clause going in a little later i dont actually know the dmatest nor do i own any hardware to test it on assuming it needs a dma engine but this patch builds the existing code is almost certainly wrong and the fix is the same as the corresponding lines above it wth is legal c
fe3270425f5555bf382178f27327752f3f2c9c4a	greybus minor whitespace cleanups to make happy
d4f5c12cdf43ce70731d5abfb6400bfb1be392d3	tipc ensure network address change doesnt impact name table updates revises routines that add and remove an entry from a nodes name table so that the publication scope lists are updated properly even if the nodes network address is changed in mid-operation the routines now recognize the default node address of as an alias for this node even after a new network address has been assigned
a112eab4d5e78433a7c65b5703ad177cdabc6588	staging comedi replace pr_err with dev_err this patch replace pr_err with dev_err when appropriate device structure is found issue found using the following coccinelle script identifier f s i position p s when i null identifier fld struct s struct device identifier position
8864afaa635be099c5c73a2f0d640a12e58f1d14	gpio dln2 fix build breakage the dln2 driver was initialising a gpiolib private field which is now gone
6e4b4dd539a2cf9e278112cce7475bb85f772aa2	arm davinci remove unused serial_read_reg remove function serial_read_reg that is not used anywhere this was partially found by using a static code analysis program called cppcheck
3fc3895e4fe17ee92ae1d1bb9f04da6069e8c370	twl4030_charger correctly handle from devm_usb_get_phy_by_node now that twl4030_bci_probe can safely return do so when devm_usb_get_phy_by_node returns that error
8be9e32b310cd8c4302991c8ff6692689c7d9d76	dmatest adjust invalid module parameters for number of source buffers dma engine test module has module parameters to set the number of source buffers for xor and pq operations we can set these values larger than the maximum number of sources that the device can support these values are not adjusted and the unsupported number of source buffers are passed to the device but most drivers dont check it so unexpected results will happen this makes an appropriate adjustment for these module parameters before use
b117f4796306a750ec1ffb928acc5f55bdb1fc7b	ack mpa reject frame explicitly ack the mpa reject frame so the peer does not retransmit the frame
c3f463484bdd0acd15abd5f92399041f79592d06	staging rtl8192u fix crash due to pointers being confusing theres no net_device stashed in theres a net_device there to make it clear also change the write of the dev pointer into from a memcpy to an assignment
bd1c1c21741cbd6e894960bcbc8b36f719590064	block req_nomerge is common to the bio and request so move it into the common setion of the request flags
75eb6c372d41d6d140b893873f6687d78c987a44	block pass around flags instead of broken down booleans during request blk_alloc_request and freed_request take different combinations of and when is superset of the latter two make them take only this cleans up the code a bit and will ease updating allocation related flags this patch doesnt introduce any functional difference
9e52cec04fd3b9b686f9256151b47fe61f7c28ef	clk add clk_composite_set_rate_and_parent when changing the clock-rate currently a new parent is set first and a divider adapted thereafter this may result in the clock-rate overflowing its target rate for a short time if the new parent has a higher rate than the old parent while this often doesnt produce negative effects it can affect components in a voltage-scaling environment like the gpu on the rk3399 socs where the voltage than simply is to low for the temporarily to high clock rate for general clock hirarchies this may need more extensive adaptions to the common clock-framework but at least for composite clocks having both parent and rate settings it is easy to create a short-term solution to make sure the clock-rate does not overflow the target
d59f9f4d68ca82985a3b4578caa0485a9cb2b71b	dont enable the plane too early in i9xx_crtc_mode_set this is horrible lore and we should be able to get rid of it now that the handling code actually does the right thing
092a53452bb7a6ca436b2d3859e7b1f1ec45479f	autofs take more care to not update last_used on path walk gui environments seem to be becoming more agressive at scanning filesystems to the point where autofs cannot expire mounts at all this is one key reason the update of the autofs dentry info last_used field is done in the expire system when the dentry is seen to be in use but somewhere along the way instances of the update has crept back into the autofs path walk functions which with the more aggressive file access patterns is preventing expiration changing the update in the path walk functions allows autofs to at least make progress in spite of frequent immediate re-mounts from file accesses link
83d58d53e062aad0f9dfbb68780bfaebf4e8bafe	libertas fix non static symbol warning fixes the following sparse warning warning symbol lbs_set_power_mgmt was not declared should it be
a3c6d686443e912e33cebdf9cd80f94df3ded7b0	drm dont re-poll connector for disconnect drm probe should not repoll a connector if it is already connected and the drm_connector_poll_disconnect flag is not set
505c7de51fe5ebb81fac096cb8cebd7cb45b7955	fbdev sh_mobile_lcdc compute clock pattern using divider denominator the clock divider pattern is computed based on the dot clock register value which stores the divider denumerator however when using a divider ratio the register is programmed with a value that must not be interpreted as a denominator this results in a shift left operation with a value of __number__ which produces undefined behaviour compute the clock pattern using the divider denominator not the dot clock register value
0b5dabedcc9498013d7de2998f0828340657c8a3	media fix regression now finally work again the timings api patches and the core ioctl changes clearly sailed right past each other without realizing that both needed to adapt to the other
55dafe5dc29c1a8e9ac4a14c38f9550ec79524c9	asoc fix double assignment of in struct snd_soc_card in struct snd_soc_card zylonite is assigned this_module twice remove one of them
45b56d572cd8b4f118ed3a006aa33527fd966389	media s5p-tv add missing braces around sizeof in fixes the following checkpatch warning warning sizeof should be file ctx kzallocsizeof gfp_kernel
1d633fd153844c8e954b0b72789279bf588cd025	staging iio fix generic_buffer print2byte drop extra argument move cast
5bc07b1569022b403be2f92777430345dbbe39e4	enable the grf clk before writing grf registers for rk3399 the grf clk should be enabled before writing grf registers otherwise the register value can not be changed link
16eddbe352e78829111315889b697037d09b26a1	media pvrusb2-io use kmalloc_array in pvr2_stream_buffer_count a multiplication for the size determination of a memory allocation indicated that an array data structure should be processed thus use the corresponding function kmalloc_array this issue was detected by using the coccinelle software
2261bb9ff0dc38e1d5f35af08f75ec3b37ba6335	hid multitouch cleanup egalax quirks the previous implementation of egalax protocol was not satisfying as we had to manually set ranges as they were corrupted after reading the report descriptor indeed the report descriptor provided a stylus input interface which override the correct values this patch omits this input thus leaving the correct value untouched and the mt_quirk_egalax_xyz_fixup not required anymore
38ea4e6e4a21fb88104be2a666a7e88176150b00	net ethernet ibm ehea fix for possible null pointer dereference there is otherwise a risk of a possible null pointer dereference was largely found by using a static code analysis program called cppcheck
d940c247adbd44c885777099e3e6c64b7ca2d078	rtl8xxxu add definitions for new generation h2c commands the larger mailboxes also use a different set of mailbox commands this provides a list of the __number__ bit commands
2309fb8ef40e82c4175100c37eb3d9db9e572ca5	cramfs get rid of failure exits are simpler that way
f148d6d7b79adb42a8e7fa95bf6be5b607015f26	tty remove wait_event_interruptible_tty in-tree users of wait_event_interruptible_tty have been removed remove
ae8d1db34ff57b11feceeaaa26940015b14e30fb	f2fs remove unneeded readahead in find_fsync_dnodes in find_fsync_dnodes get_tmp_page will read dnode page synchronously previously ra_meta_page did the same work which is redundant remove it
66a528c1c3d66442e1fbb1e3c512f7557fa0d0c3	revert use dev_dbg instead of pr_debug this reverts commit b6ea5ef80aa7fd6f4b18ff2e4174930e8772e812 turns out to have lots of run-time issues in that the structure is not initialized before it is used in the debugging messages
5e6ecb362bd5950a3d8ce19c32829e4f8c7917d9	btrfs fix double range unlock of hole region when reading page if when reading a page we find a hole and our caller had already locked the range bio flags has the bit extent_bio_parent_locked set we end up unlocking the holes range and then later our caller unlocks it again which might have already been locked by some other task once the first unlock happened currently this can only happen during a call to the extent_same ioctl as its the only caller of __do_readpage that sets the bit extent_bio_parent_locked for bio flags fix this by leaving the unlock exclusively to the caller
bd601cc464e1ddc041d07ba2e4c015cdb9e392ec	xgmac cleanups make local function static make ethtool_ops const compile tested only
8d581fd01c922f9df586074078d70027156cfff8	regulator max8973-regulator use devm_regulator_register simplifies the code
7fc8f5a82b9082fdd738895c103b9f25ea530846	staging lustre lov_obd fixed a brace coding style issue fixed a coding style issue
d4b6af2e0e29278f2353c7c8721ddf2f2446414f	move device disable to workqueue thread moves the disabling of the device and clocks to the same thread in which the device and clocks are enabled this avoids smp issues where the device can be enabled for a transfer by one thread and then disabled by the completion of the previous transfer in another thread
80aa93128653c5f2502053c0d9740b336d975667	disable_shared_pll doesnt work on pre-gen5 looks like commit eddfcbcdc27fbecb33bff098967bbdd7ca75bfa6 author maarten lankhorst linux.intel.com date mon jun __number__ __number__ update less state during modeset introduced the unconditional calling of disable_shared_dpll but didnt fix up pre-gen5 to avoid the bug_on at the top of the function so change the bug_on into a gen check alternately we could move the bug_on until later since we shouldnt have a pll struct here either but this seems clearer to read this fixes a crash on load on my x200s platform
eeeebea6cbe0d85817e2fa8eee8a2f5c9d88a44a	reject panel_type from vbt vbt can only contain __number__ panel entries indexed with the panel_type to play it safe we should reject panel_type so that we dont read past the valid data v2 add debug logging jani
0b0d7b62bed81a76dd2b3f12ba6a33eb144a1df6	update for interlaced struct omap_video_timings was updated a bool interlaced without a matching update in omap_connector this field could have undefined values from the stack which isnt quite ideal update the fxns to convert timings structs and zero-init struct omap_video_timings when it is declared on stack to avoid issues like this in the future
17403f235e94dcccf95b43138b197c4de2ab6816	mmc dw_mmc prepare functions in dw_mmc-pltfm for reuse platform implementations of dw-mshc controller may choose to extend the features of the standard dw-mshc controller such as adding additional clocking options or modifying the bus interface support for such implementation specific extensions can be incorporated into dw_mmc-pltfm but including multiple such platform specific implementations would convolute the existing dw_mmc-pltfm code instead it would be better to create implementation specific platform drivers to support implementation specific features such platforms drivers can reuse the existing infrastructure in dw_mmc-pltfm for resource identification and controller registration and provide support for implementation specific features so allow the infrastructure in dw_mmc-pltfm to be reused by other implementation specific platform drivers
0e24d849c4ea777c59955b241fd3af14a1b84af5	nfsv4 remove bug_on and access_once calls in the idmapper the use of access_once is wrong since the various routines that should be strictly ordered each other and the ensures that only one thread at a time may be in an upcall situation also replace the bug_ons with warn_on_once where appropriate
25e14c1fcce5c66b0d2d5e35fad35d044dc320ae	usb gadget amd5536udc avoid null pointer dereference in udc_pci_probe is null before pdev use pdev instead
5efe11599e78600d4af230c9d1574bc2728428bd	staging comedi used unsigned int instead of unsigned issue in this is a patch to the file that fixes up a warning prefer unsigned int to bare use of unsigned found by the tool
6860b56c4b84bf9dba479c3f881d45a0b09a879c	de-indent submit_create
2cbc21877adf6adc69ca1fbc5fd1edbd7e1e3c59	remove unused field rtc from private structure private field rtc is not used outside probe so there is no reason to keep it
1b925b57e9e13ff9e61e410ced251905a83875c2	sparc dont use module_init in non-modular code the is built for sparc64_pci which is bool and hence this code is either present or absent it will never be modular so using module_init as an alias for __initcall can be somewhat misleading fix this up now so that we can relocate module_init from into in the future if we dont do this wed have to add to obviously non-modular code and that would be a worse thing note that direct use of __initcall is discouraged vs one of the priority categorized subgroups as __initcall gets mapped onto device_initcall our use of device_initcall directly in this change means that the runtime impact is zero it will remain at level __number__ in initcall ordering
b46cce5902def84d35f3b043e89ab764f6c9746e	thermal imx correct flow fixes regression introduced by commit author philipp zabel pengutronix.de date thu aug __number__ __number__ thermal imx implement thermal alarm interrupt handling the commit makes imx thermal sensor always powered up as alarm function is enabled but the suspend callback of imx thermal returns success only if thermal sensor is powered down so it will always returns fail hence break systems suspend this patch disables imx thermal sensor before suspend and re-enable it after resume
aa43c5ff737dac5dcfccd12d23abeefbdf0579c7	net hamradio fix ip over bpq encapsulation since ax25 stop using magic neighbour cache operations any attempt to transmit ip packets over a bpqether device will result in a message like dead loop on virtual device bpq0 fix it urgently fix suggested by eric w biederman
1b2db4cee5433e089533f81fea6721c1b653703c	gma500 panel presence check introduce a panel presence check for cedartrail non netbook devices dont necessarily have a panel attached
271393ba6e2ac384a14e581d34d5d72c5953e3c6	fix __number__ bit wraparound in new ram detection a missing u64 cast causes a wraparound from __number__ mib to __number__ mib and therefore total __number__ mib vram detected if card has __number__ mib per fbp
75e3a0f55bf097dab76c662358bcb7c88928f49d	dm flakey correct ctr alloc failure mesg remove the reference to the linear target from the error message issued when allocation fails in the flakey target
b199ac6c4943aa0db246163bf6b483e2bb53431b	remove debugfs dir recursively on exit simplify exit_mce_inject by using debugfs_remove_recursive and do away with the noodling over the dentry elements link
699f685569434510d944e419f4048c4e3ba8d631	android unconditionally remove callbacks in sync_fence_free using to determine whether or not there are callbacks remaining on the sync_fence is racy since may have been decremented to __number__ on another cpu before fence_check_cb_func has completed by unconditionally calling fence_remove_callback for each fence in the sync_fence we guarantee that each callback has either completed since fence_remove_callback grabs the fence lock or been removed
da88c7f78d842a6938d9adde6af87a2ce262051d	perf stat fix on multi socket systems on systems with more than one socket perf stat would either segfault or stop before outputting all cores the problem was that the output code referenced the id including the socket number in the higher bits which is far beyond any per cpu array mask out the socket number before referencing cpus in abs_printout i also renamed the variable in nsec_printout to be clear what it is even though it doesnt reference cpus link
0d1c744cbdcbf7b57044319f4ecad74ba230b138	net bcm63xx use these new helpers simplify implementing multi-driver modules and properly handle failure to register one driver by unregistering all previously registered drivers
5eca104eee7edfe7155523849750ced539b16e94	perf hists browser pass parent_total to callchain print functions pass parent nodes total period to callchain print functions this info is needed by later patch to determine whether it can omit percent or not correctly no functional change intended link
f3fb3d82379553f5626c1bb13e3a400434260eed	exynos5433_decon fix wrong state in decon_vblank_enable bit_irqs_enabled was never set because of incorrect test in decon_vlank_enable function what resulted in lack of enabling vblank support this patch fixes this issue
345a6cdc250d1519c5d15576965629eab6858257	dm raid fix rs_is_recovering to allow for lvextend
e795491822c4c5bbb2c0d016676f5648d78cacb0	staging unisys visorbus my_device_destroy add error handling add the proper error handling to my_device_destroy so it can be send back up the stack for further error reporting
f15475c397f496c0907be5e95f8556c8f5908d54	hid rmi check for the existence of some optional queries before reading query __number__ the rmi4 spec defines some optional query registers in f11 which appear before query __number__ this patch checks for the existence of some of the lesser used queries to compute the location of query12 and all subsequent query registers
78e100cb237389b816ef59ac40f17d2b9b88a930	media ti-vpe use for dma address in function dump_dtd warning format expects argument of type unsigned int but argument __number__ has type dma_addr_t static struct _ddebug __aligned8 note in expansion of macro define_dynamic_debug_metadata define_dynamic_debug_metadatadescriptor fmt note in expansion of macro dynamic_pr_debug dynamic_pr_debugfmt note in expansion of macro pr_debug pr_debugword2 start_addr
9e14c65c5715b16bcbf5d5c64de2bb8a973a0afa	take the mode_config mutex when handling hpds since we may modify display state
7e2e19210a8bbbcacd31e8ce4a0ea64e3ac37dea	remove dead code the value of the local variable index is never used in reg_mr_callback remove now-unused variable delta too roland
d835a90c81fd13f936a6c5377caac7c61db91081	staging unisys fix camelcase in issue_io_vmcall macros fix the parameter name in issue_io_vmcall and issue_io_extended_vmcall fix camelcase names interfacemethod method
cf1fb0f29d83bcc1d8af912e56f2295397372908	mips kvm emulate rdhwr cpunum register actually provide the vcpu number when emulating the rdhwr cpunum register so that it will match the cpunum field of cp0_ebase register rather than always returning __number__
edf8fa7b66f0e7b74806439581b2b5ae72a8b8d3	rtlwifi btcoex action when when wifi is associating or authenticating set the coex table for wifi to establish link these packets should have higher priority
162809dfc2bfb31eb54dc67733bcdab0f2d1534d	net ethernet cavium octeon octeon_mgmt handle return null error from devm_ioremap here if devm_ioremap will fail it will return null kernel can run into a null-pointer dereference this error check will avoid null pointer dereference
9af5b80765e4c30b8eba8218724459226fa5e81f	kill poison_init_mem use free_reserved_area to poison initmem memory pages and kill poison_init_mem on arm64
4aa69d5667914dd0844d98ad84804b79a4845fa3	f2fs return early when trying to read null nid if get_node_page gets zero nid we can return early without getting a wrong page for example get_dnode_of_data can try to do that
9bf59a611a5eb479f321fae34adc9f948de0a42f	dm mpath remove extra nesting in map function return early for case when no path exists and when the pathgroup isnt ready this eliminates the need for extra nesting for the the common case
ca3c80c2801cee676a95523f7673041537845df5	staging bcm renamed variable readbytes read_bytes
aef89f214e4306153c7913b9854456595153f5d8	bluetooth fix possible null pointer derefence in l2cap code due to ertm reliability l2cap channel needs to be disconnected if adding to srej list failed
9259ee79208a95aa20a9824717a9f22b0a52cccd	rtlwifi rtl8821ae convert driver to use common dm table initialization convert driver to use routine rtl_dm_diginit
3b77894b2c32ed3326c47b550f30684beb64abd3	pm80xx remove unnecessary phy disconnect while link error if the link error happens we dont need to disconnect the phy which will remove the drive instead acknowledging the controller and logging the error will be enough
fe216c7a0ff993cdac885109d8544ba02e6f9127	f2fs fix to return __number__ if err in f2fs_readdir commit f2fs fix to report error in f2fs_readdir causes f2fs_readdir to return when get_lock_data_page returns however the original logic is to continue when get_lock_data_page returns but it forgets to reset err to __number__ this will cause getdents64 incorretly return when lastdirent is null in getdents64 this will lead to a wrong return value for syscall caller
6714ffae751868e237d8f887eca1754d08ee814c	usb misc ldusb dont print on enomem all kmalloc-based functions print enough information on failures
a20667bf7d1f76e20c42812e69b6eb1d471a3d49	enic enic_ethtool fix sparse warning this patch fixes following sparse warning warning symbol enic_intr_coal_set_rx was not declared should it be
b13f4af25c0a36d74a69f7d30e2a28fa941e99b5	media adv7180 free control handler on remove make sure to free the control handler when the device is removed
934714d088f35b81edafdce89397969baf77fb8a	r8169 avoid a useless work scheduling
2f13c5296d81ad9083e04229eb899ea4287e348f	drm rcar-du refactor plane setup rename plane setup functions using more explicit names and use local variables to store intermediate values to increase readability this also prepares for vsp compositor support
99a1b98b32211713d8e544e9737a5fa20b73dce3	staging comedi ke_counter fix ke_counter_insn_write the comedi core expects the functions to write values fix this function to work like the core expects the counters are actually __number__ sign bit the comedi core validates that all the data is in range before calling the fix the subdevice maxdata so that the sign bit can actually be changed
0821c3bc5df805aef1f5989b7a7dacc2491a0e5b	arm pcmcia soc-common socket clocks call clk_prepare_enable during hw_init and clk_disable_unprepare during hw_shutdown to ensure that the clock rates returned by clk_get_rate are correct it is safe to call functions even on null clock so this patch will not break cases when the socket clock is not set
531cda20cd44d5a7a77debaaeaa407d4802d7e05	net calxedaxgmac fix rx dma mapping api size mismatches fix the mismatch in the dma mapping and unmapping sizes for receive the unmap size must be equal to the map size and should not be the actual received frame length the map size should also be adjusted by the net_ip_align size since the buffer size dma_buf_sz includes this offset also add a missing dma_mapping_error check in xgmac_rx_refill
42381572f586d4da57e7d65e0fcb45422be3ba7b	pps additional cleanups in uart_handle_dcd_change an extension of the previous commit there is no semantic change here just fewer lines of source code
d7b135410e1b2f5ad64e56df09d133a23aa9fbcb	alsa remove memory accounting in memalloc helper its almost superfluous and doesnt help much for real uses lets reduce the layer size
ecee988ac848fabbff6c926739a520b1748c4a79	regulator pv88090 fix irq leak use devm_request_threaded_irq to ensure the irq is freed when unload the module
e26d925f42064a800c1226e15dbaa23da1721fb7	staging comedi pcl816 if test should use logical or not bitwise or this quiets a couple sparse warnings about warning dubious warning dubious x also remove the unnecessary parentheses abound the variables
29b93c0e3c3891e3ba6e38a71997bdad8a2aa457	brcmfmac accept events when tdls is used in combination with p2p tdls events are mapped back to primary interface but when p2p is in use then this fails because the check was incorrect by checking bsscfg number which can be different when a p2p device has been created
2af9e74ae6b013a6e30d631246db7825185abac0	staging rtl8712 fix potential leaks in r8712_set_key fix potential leaks in the error paths of r8712_set_key in case the algorithm specific checks fail the function returns without enqueuing or freeing the already allocated command and parameter structs use a centralized exit path and make sure that all memory is freed correctly detected by coverity cid __number__ __number__
902a8a0b50d7d13cf88211d0bde3a7c27fd98fa5	mmc davinci remove incorrect no_irq use platform_get_irq returns an error value on failure not no_irq so the error handling here could never work this changes the code to propagate the error value instead
0fe2f1e929ecabf834f4af2ffd300fe70700f4b3	gfs2 size seq_file buffer more carefully this places a limit on the buffer size for archs with larger page_size
cb2ced73d8c7a38b5f699e267deadf2a2cfe911c	btrfs in scrub repair code optimize the reading of mirrors in case that disk blocks need to be repaired rewritten the current code at first for simplicity reasons reads all alternate mirrors in the first step afterwards selects the best one in a second step this is now changed to read one alternate mirror after the other and to leave the loop early when a perfect mirror is found
ceb7682ee313e353ea34fec80727fe7f986f0be1	cpufreq dbx500 dont initialize part of policy set by core many common initializations of struct policy are moved to core now and hence this driver doesnt need to do it this patch removes such code most recent of those changes is to call in the core after calling
7f4fe17bc2d4fd46598b03bc51281cfa7ef6abf5	show the number of retries for each rate in debugfs
7471bf4e0e7ef6c71e1fc7b2574fb8fb19ffb6ee	clean up dsi pll calculation improve readability no functional changes v2 use more rational types ville
0e23baccaae4f752cfa89cca44e84a439ed8bd13	audit rework audit_tty_set to only grab spin_lock once we can simplify the audit_tty_set code to only grab the spin_lock one time we need to determine if the new values are valid and if so set the new values at the same time we grab the old onces while we are here get rid of res and just use err
d467d31f700f807ff939cab6d622867ee48c80b6	scsi_debug fix compare and write errors kernel build tools pointed out a memory leak so that has been fixed and its error paths strengthened with a goto testing showed compare and write was only working for correcting the length of the lba field fixed that
a4406f165faa222a0d2c5e660473bb6822850a55	arm samsung remove gpio flags in dev-backlight the pwm-backlight driver is moving to use the gpiod interface which has its own mapping mechanism for platform data gpios these mappings carry gpio properties like active low so they dont have to be explicitly handled by gpio consumers because of this change the enable_gpio_flags member of platform_pwm_backlight_data is going away dev-backlight was passing this member but had no user making use of it so it can safely be removed further gpios used by pwm-backlight are expected to be defined using the mechanisms provided by the gpiod api
a8f32817eeb0ada6367d812de5cd2ee91a532a48	usb dwc3 gadget improve ep_queues error reporting we shouldnt return thats used only internally when the core still has transfers in flight on a given endpoint also combine the error reporting so that we dont have to duplicate it
32b01726b944ea21e9c9dacfb34753a8e63ba877	iwlwifi mvm rs increase stay in column timeout remain in the same tx modulation column for a longer time before starting a search cycle for a better modulation this has been shown to give better results also change the name of the timeout define to better match its description
4ececb7d173f17c60c00e704a0e4e51cdf788e04	revert i2c jz4780 prevent potential division by zero this reverts commit ret is not set when bailing out also there is a better place to check for __number__
3a1c2a82204f5376f484d82cb18189afc2145c77	usb remove err usage err was a very old usb-specific macro that i thought had gone away this patch removes it from being used in the driver and uses dev_err instead
bcf4299e6215a475259c3ac329d43e776cfe9c0c	floppy make local variable non-static theres no reason for temparea to be static since its only used for temporary sprintf output its not immediately obvious that the output will always fit in the worst case the output including is exactly __number__ bytes so save a future reader from worrying about that
b8ac0cc78b56e798851f1435bc673761d3fb877e	mpt3sas remove unused fw_event_work elements firmware events are queued up using the fw_event_works struct work not its delayed_work member the initial driver for sas2 controllers had handled firmware reset using the rescan barrier and was later redesigned through mpt2sas resend host reset code cleanup the delayed_work variables are now unused and may provoke config_debug_objects_timers assert_init not available false warnings in _scsih_fw_event_cleanup_queue cleanup fw_event_works unused entries update its kerneldoc and update _scsih_fw_event_cleanup_queue accordingly
3140bae26c9105b4ec8ff4935631f2f09882553d	misc pti do the opposite of in currently probe initializes some parts then some of them are unwound in some in module_exit let us do the opposite of whole in
cb83efcfd26a28b76eef8815a41158c1896fc5ba	simplify alloc_behind_master_bio now that we always always pass an offset of __number__ and a size that matches the bio to alloc_behind_master_bio we can remove the args and simplify the code we could probably remove bio_copy_data_partial too
db8dfee57d37d2cd14a750477babbae52b69a494	cfg80211 avoid intersection when applying self-managed reg the custom-reg handling function can currently only add flags to a given channel this results in stale flags being left applied in some cases a channel was disabled and even the orig_flags were changed to reflect this previously the api was designed for a single invocation before wiphy registration so this didnt matter the previous approach doesnt scale well to self-managed regulatory devices particularly when a more permissive regdom is applied after a restrictive one
3aefe2b4a8003517d6e15112f806fd4069785389	net mv643xx_eth avoid lockdep dump on interface down when the interface is shutdown the mv643xx_eth driver hits the following lockdep dump info inconsistent lock state not tainted inconsistent usage takes at state was registered at irq event stamp __number__ hardirqs last enabled at __number__ hardirqs last disabled at __number__ softirqs last enabled at __number__ softirqs last disabled at __number__ other info that might help us debug this possible unsafe locking scenario cpu0 deadlock __number__ lock held by at stack backtrace from from from from from from from from from from from from from from from from from from from from from from from from from from it seems that txq_reclaim takes the netif tx lock __netif_tx_locknq smp_processor_id in a context outside of softirq context and thus is susceptible to deadlock should an interrupt occur use instead
9db5c62951871c33e4443fe433e234419cf574d2	bluetooth use command status event for set io capability errors in case of failure the set io capability command is suppose to return command status and not command complete
b34ba0c3acd9b723707c5364dba7b5c58a19282e	staging rtl8723au core add consistent spacing around this patch fixes error in file error need consistent spacing around
6752a53e5cc75b6fa7ba040378b588d586551160	check ostid if no obd_connect_fid in lustre_set_wire_obdo if doesnt contain obd_connect_fid use ost_id to check the type of the object instead of using only intel-bug-id lustre-change
3680b1f655993e1be5a2063d00eae92532abc322	mlxsw convert to pci_alloc_irq_vectors trivial conversion as only one vector is supported but at least we lose the useless msix_entry member in the per-device structure
b42a1148de452ab1a3ee15caac2960a063e28f03	input tegra-kbc enable support for the standard wakeup-source property though the tegra-kbc driver continue to support the legacy property to enable keyboard as the wakeup source we need to add support for the new standard property wakeup-source this patch adds support for wakeup-source property in addition to the existing property
d4ee9aa33db94120532601a22566e989efc3e70c	convert call_rcuipc_immediate_free to kfree_rcu the rcu callback ipc_immediate_free just calls a kfree so we use kfree_rcu instead of the call_rcuipc_immediate_free
85109f7ddde4b1842bfb08741a8b461e31ef2c4f	greybus operation fix operation-destroy race make sure to acquire the connection-list lock atomically when releasing the final reference this allows the list to be traversed and references to be acquired while holding the lock without racing with the destructor
7cd015a0a37265e23bbdce7ce8f7e00507abe9ed	enable dither whenever display bpc frame buffer bpc we want to enable dithering on any pipe where the frame buffer has more color resolution than the output device the previous code was incorrectly clamping the frame buffer bpc to the display bpc effectively disabling dithering all of the time as the computed frame buffer bpc would never be larger than the display bpc
4d84b9e4957589730d13d210e9e94bb5f5996ba3	gpio rcar use local variable gpio_chip in gpio_rcar_probe the existing variable gpio_chip already points to the gpiochip instance hence use it everywhere
767cd365b22820df07b962b49ce04b220b98e537	alsa asihpi bug fix pa use before init fixes bug introduced by also declare pa local to block in which it is used
9220ebffda4aa23fe683c9ca6c94fb72d7c131c2	revert serial-uartlite constify this reverts commit the commit introduced two build warnings in function warning assignment discards qualifier from pointer target type warning assignment discards qualifier from pointer target type
b05fd8742f6291b67571ad0fdad4da6b6eb98025	btrfs fix transaction leak during fsync call if btrfs_log_dentry_safe returns an error we set ret to __number__ and fall through with the goal of committing the transaction however in the case where the inode doesnt need a full sync we would call btrfs_wait_ordered_range against the target range for our inode and if it returned an error we would return without commiting or ending the transaction
d49eccb3c1a41b847380279d7f88a88421783f37	pci pciehp rename queue_interrupt_event to pciehp_queue_interrupt_event rename queue_interrupt_event to pciehp_queue_interrupt_event so we can make it extern and call it from pcie_isr no functional change
a4b9d94b3dc8e65951c1819d37f213b3c6815adc	usb dwc3 set gadgets quirk ep_out_align_size dwc3 requires epout to have buffer size aligned to maxpacketsize value this patch sets necessary quirk for it
d30656e59a483af7eb04eccd4b0b00f00daa959e	mmc mvsdio remove redundant use of the mmc core makes use of the functions while requesting the gpios lets rely on that
252babcd52aabe37aaad03685e7d6ad454edb9f9	tracing replace the per_cpu with in the updates to the trace_active per cpu variable can be updated with the functions as it only gets updated on the cpu that the variable is on thanks to paul mckenney for suggesting instead of
359f90982cba0ba8db39b683de05dcb2de64b979	alsa hda_hwdep fix possible buffer overflow if a line in the firmware file is larger than the given buffer size and so the firmware file size size is set to a value larger than the actual buffer size this results in an overflow in the buffer passed
da5f10969d54006a24777a84ed3eaeeb2a21047f	xfs flush the range before zero range conversion xfs currently discards delalloc blocks within the target range of a zero range request unaligned start and end offsets are zeroed through the page cache and the internal aligned blocks are converted to unwritten extents if eof is page aligned and covered by a delayed allocation extent the inode size is not updated until completion if a zero range request discards a delalloc range that covers page aligned eof as such the inode size update never occurs for example rm xfs_io pwrite __number__ zero stat __number__ umount mount stat __number__ update xfs_zero_file_space to flush the range rather than discard delalloc blocks to ensure that inode size updates occur appropriately dchinner note that this is really a workaround to avoid the underlying problems more work is needed and ongoing to fix those issues so this fix is being added as a temporary stop-gap measure
b3dc19cddce37a1aaebc911c8db94e5209a9764d	remove renaming of scanhex and skipbl we have two that rename scanhex and skipbl to xmon_scanhex and xmon_skipbl but no one ever uses those names so the only effect is to rename the actual symbols in the generated code and afacis there is no reason to do that so drop them
a44e7b73118b21176bdf6376c620d778a0ff0ee2	cxgb4 only pass app selector of __number__ or __number__ to firmware this keeps app format passed to firmware the same irrespective of dcbx version in use
9734ad13c2321e8efc1fab4665d40d88e947c560	assert we do not attempt to reuse an allocated node i915_gem_gtt_reserve and i915_gem_gtt_insert can only work on unallocated nodes check that the callers complies
fcb4a57805e04dee04f736c25a5648ec7bebe30f	use bound list for inactive shrink do to the move lists it no longer makes sense to use them for shrinking since shrinking isnt vm specific such a need may also exist but doesnt yet what we can do instead is use the global bound list to find all objects which arent active
9bc63b7ff56f7a1cad5dbf062d1d5dd7a81d7d93	greybus uart fix missing negation on dtr setting the unset the dtr flag is missing
cfaace269d0ce5a4ae26bfe442f1c4df1a9558de	net hns is an array so no need to check if it is null the null check on is redundant since is an array of phy_max_addr ints and hence can never be null remove the redundant check
5550171b2a9f8df26ff483051d060db06376b26d	perf callchain use to set up call chain use the relative address this makes get_srcline work correctly in the end link
9232d2d62a9d1c5005ac11c4f48ddb0fd38a0029	staging unisys fix camelcase controlvm globals fix the camelcase variable names periodic_controlvm_work periodic_controlvm_work periodic_controlvm_workqueue periodic_controlvm_workqueue update all references to use the corrected names
c1ccdddc2e60e73011d0a5e2f06913be84b8bafb	staging rtl8192e use module_pci_driver use module_pci_driver for drivers whose init and exit functions only register and unregister respectively
9b70ae4951746146838b474c3a90722666edf4c1	pci include pci-to-pcie bridges as downstream ports a to pci express bridge sometimes referred to as a reverse bridge is a bridge with conventional pci or pci-x on its primary side and a pci express port on its secondary downstream side that pcie port is a downstream port and could be connected to a slot just like a root port or a switch downstream port make pcie_downstream_port return true for them so we can access the slot registers in the pcie capability
6ec735df78c63c3623c76e75a975390f60ae0640	media ad9389b fix error return code in ad9389b_probe fix to return a negative error code from the error handling case instead of __number__ as done elsewhere in this function
5f45aa166847e362cb0e03ef66bf90d7fb5d38e4	remove unnecessary spaces in remove unnecessary spaces between function names and open parentheses in to meet kernel coding style
53a3e47521a98c67df9f4cf758b289aefad5e6f1	fix line over __number__ characters fix issues with line over __number__ characters in
702e490211b2b7e448ebe1b3a07d97ad2fc07e03	userns fix build of explicitly test for global_root_uid and global_root_gid instead of using __number__ allowing dgrp to compile and work properly when user namespace support is enabled
375b27cf5db963e2bc2a34dc5643d0d7ceca1ee2	ixgbevf prevent possible race condition by checking for message the mailbox interrupt routine might cause a race condition sometimes and cause a message to be missed
ed3cf15271fa150320b46f03d369777b71786298	kvm x86 make functions that have no external callers static this makes the functions kvm_guest_cpu_init and kvm_init_debugfs static now due to having no external callers outside their declarations in the file
8bf371e6adff29758cc3c57c17df4486513081f8	ibmvnic fix missing brackets in init_sub_crq_irqs
2c7c3a7d08b28278112f2aaa0b7cf53140101e2a	mempolicy kill remove in do_set_mempolicy this logic was never correct and it is no longer needed see the previous patch
229ce631574761870a2ac938845fadbd07f35caa	fix double hash race when the lock holder vcpu is racing with the queue head cpu __number__ lock holder cpu1 queue head spin_lock spin_lock pv_kick_node pv_wait_head_or_lock if lp pv_hashlock pn _q_slow_val vcpu_halted vcpu_halted vcpu_hashed _q_slow_val voidpv_hashlock pn in this case lock holder inserts the pv_node of queue head into the hash table and set _q_slow_val unnecessary this patch avoids it by vcpu_hashed state after failing adaptive locking spinning link
310faaa9b2d075b8fd477550c3d85ccddec76f35	kexec fix wrong types of some local variables the types of the following local variables in r in vmcoreinfo_append_str are wrong so fix them
a8c65c137884f3b65815424d100abfba0c3b3b44	add updated smc firmware for si kickers
ce8bb344dffb493fbc80027a28d4f03c029d775e	cdc-wdm add terminating newline debug messages should be properly terminated
52af141b8224e428ee135bbeb508646b40d03fb5	greybus loopback fix broken tabs in of code from one file to another missed inappropriate use of tab after define
6c2afac434f00267c484239ad9210c1a075e7f16	media v4l2-subdev remove obsolete dv_preset ops these ops are no longer used so its time to remove them
0a9099f8836cd5f91f811078b367e0227e0a20f6	bonding change name of sysfs dir for bonding slaves allow user to identify easily what the attributes are related to change the name of the group to bonding_slave to be similar to master which is named bonding
2504be78be28b3ad11a52f7dc0dab2de5e7eaee3	reorder the function prototypes in reorder the function prototypes in a bit to group related functions together no change in functionality
a48e3f9747fd62b385221a892cd4726b82dacd11	asoc rsnd fixup each module counter on __rsnd_mod_call asoc rsnd count each mod counts each modules callback status but counts callback only this patch fixup it otherwise multi-called function will be trouble
7585940325874d395daa0949686671f543aa1ddf	staging vt6656 remove camel case macvwritemultiaddr camel case changes pdevice priv
16cecdf620eb23d2654a265d9b20e089370d7425	add pnfs callbacks for enable pnfs callbacks to allow flex files to work correctly with a nfsv3-enabled data server
dfdc6e12c8a3b1bc0c123abeb3679208b31a19f6	greybus usb use the bundle struct device instead of the connector we are removing struct device from the gb_connection structure in the near future the gb_bundle structures struct device should be used as a replacement this patch moves the usb driver to use the bundle pointer instead of the connection pointer
a0132ac0f275434db32111b8cf7372d991899da3	do not vm_bug_on_page for temporary on-stack pages commit mm dump page when hitting a vm_bug_on using vm_bug_on_page added a bunch of vm_bug_on_page calls but most of the ones in the slub code are for _temporary_ struct pages which are declared on the stack and likely have lots of gunk in them dumping their contents out will just confuse folks looking at bad_page output plus if we try to page_to_pfn on them or soemthing well probably oops anyway turn them back in to vm_bug_ons
3777999dd47ec00ec34a151b1d93c0a2b721e822	mm page_alloc check once if a zone has isolated pageblocks when bulk freeing pages from the per-cpu lists the zone is checked for isolated pageblocks on every release this patch checks it once per drain fix locking radce per vlastimil
20bb6ce9879e19eee7539329eaa2408d12b00306	net pim add a helper to check for ipv4 all pim routers address
920309086652651c7d59791e5b83e2f10112b293	net macb check dma mappings for error with config_dma_api_debug enabled the following warning is printed warning cpu __number__ pid __number__ at macb dma-api device driver failed to check map errordevice __number__ bytes mapped as single modules linked in cpu __number__ pid __number__ comm udhcpc not tainted unwind_backtrace from show_stack from dump_stack from warn_slowpath_common from warn_slowpath_fmt from check_unmap from debug_dma_unmap_page from macb_interrupt from handle_irq_event_percpu from handle_irq_event from handle_fasteoi_irq from generic_handle_irq from handle_irq from gic_handle_irq from exception stack0xed197f60 to __number__ __number__ __number__ __address__ __number__ __number__ __number__ __number__ __address__ __irq_svc from end trace mapped at due to missing checks of the dma mapping add the appropriate checks to fix this
5c825ee202d0891269e29197d5b21f8e2be3498a	i2c omap add rev to omap i2c platform data we need to pass the i2c ip revision from the hwmod class up into the omap i2c driver which does not have direct access to it this adds a member to the platform data the omap i2c driver does use already to hold the i2c ip revision
8c00d5c9d3e7452658dda55024485d52919ebfdd	cxl test the correct mmio space before unmapping before freeing p2n test p2n not p1n
b5bd856a0c2a6331ee3300fb589aeea56eba110b	fix warn on alloc_super fail path on fail path alloc_super calls destroy_super which issues a warning if the sbs s_mounts list is not empty in particular if it has not been initialized that said s_mounts must be initialized in alloc_super before any possible failure but currently it is initialized close to the end of the function leading to a useless warning dumped to log if either percpu_counter_init or list_lru_init fails lets fix this
d2648d4e268cee60c9c917a04c3fbc4e8c3bbc7e	test_bpf add module parameters to filter the tests to run when developping on the interpreter or a particular jit it can be interesting to restrict the tests list to a specific test or a particular range of tests this patch adds the following module parameters to the test_bpf module only the specified named test will be run only the test with the specified id will be run see the output of test_bpf without parameters to get the test id only the tests within ids in the specified id range are run see the output of test_bpf without parameters to get the test ids any invalid range test id or test name will result in being returned and no tests being run
3ffb6a39b751b635a0c50b650064c38b8d371ef2	bnxt_en fix ring arithmetic in bnxt_setup_tc the logic is missing the check on whether the tx and rx rings are sharing completion rings or not
361460355c384634f05ab8e945a6184c78cf9e97	vlv clamp minimum rps frequency to what punit allows as described in the code comment i couldnt set the minimum rps frequency on my byt-m b0 to the minimum allowed as reported by punit fix this by clamping the minimum value to the first one that was accepted on my machine atm this issue doesnt cause any test failures since in we only check the cached version of the current frequency which is the same what has been set in the future well add checks for the actual frequency too and for that to pass this fix is necessary
386cb7cdeeef97e0bf082a8d6bbfc07a2ccce07b	dm cache do not wake_worker in free_migration all methods that queue work call wake_worker as youd expect cell_defer defer_bio quiesce_migration which is called by writeback promote demote_then_promote invalidate discard etc
58e3bdd59742feef680861acec19126e40e4fa8d	ipv4 fib only flush fib aliases belonging to currently flushed table in case the main table is flushed and its trie is shared with the local table then we might be flushing fib aliases belonging to the latter this can lead to fib_entry_del notifications sent with the wrong table id the above doesnt affect current listeners as the table id is ignored during entry deletion but this will change later in the patchset when flushing a particular table skip any aliases belonging to a different one
8e0b60b96ba06d826a2b26e23b1986853a4e5291	blk-mq enable polling support by default now that applications need to explicitly ask for polling we can enable it by default in blk-mq drivers note that this will only have an affect on driver that supply a poll function which currently only includes nvme
98eee2550f7b5e800641e90469f400a8c06fde73	media v4l vsp1 fix hgo and hgt routing register addresses the addresses are incorrect fix them
923faa6a8cc80ceff89214efbccce1497118ceed	staging comedi remove err usage err was a very old usb-specific macro that i thought had gone away this patch removes it from being used in the driver and uses dev_err instead
cb0f7d35e385fc242c76bfe7f1d68c1904c6f965	remove is_err checking of pinctrl_register returns a pointer of struct type struct pinctrl_dev if successfully registered to pinctrl subsystem otherwise returns null and there wont be any pointers which are not dereferencible they are not type of pointer addresses but are kind of error codes rather actual addresses but are a kind of return codes of functions returning integer types return if device registration fails
94fbbbf89492e460979cd10c6384a78a9dbf17ed	stmmac update the doc and version this patch updates the file adding information related to the ptp and supports also the patch updates the driver version to march_2013
118b673e87c55082e8f537a12db7f2629d6f5109	arm shmobile kzm9g register pinctrl mappings for i2c replace the gpio-based i2c pinmux configuration by pinctrl mappings
090f85deb6e88f0edff1a18d610abd857e30c753	rxrpc dont change the epoch it seems the local epoch should only be changed on boot so remove the code that changes it for client connections
64c58f2c48da85223f0db438fe4854bc3ef24353	generalize ring_space to take a ringbuf its simple enough that it doesnt need to know anything about the engine trivial change
310e9e334f60ca8282990a9c56678a4f58bce81f	isp1760-if make module unloads correctly without this patch the prepared disable routines will not be called on module unloading
f7c79f30cb2d3883488e70cafc9e3a7edd4b9fdb	btrfs adjust the write_lock_level as we unlock btrfs_search_slot sometimes needs write locks on high levels of the tree it remembers the highest level that needs a write lock and will use that for all future searches through the tree in a given call but very often well just cow the top level or the level below and we wont really need write locks on the root again after that this patch changes things to adjust the write lock requirement as it unlocks levels
df863de19fc5a7b3a982a8204f9e2e8bb6e2d96d	arm mvebu add armada __number__ support to the system-controller driver the system controller block in the armada __number__ has different register offsets for the system reset and other related functions therefore this commit introduces the new armada-375-system-controller compatible string to identify the armada __number__ variant of the system controller
804e59a8300b6943cad60f5032f954bd9c4e87e2	suppress error message when gpu resets are disabled if we do not have lowlevel support for reseting the gpu or if the user has explicitly disabled reseting the device the failure is expected since it is an expected failure we should be using a lower priority message than perhaps notice in the absence of drm_notice just emit the expected failure as a debug message
935c9e7ff06abf12c45155f75ec2f712d3768095	audit log failed attempts to change audit_pid configuration failed attempts to change the audit_pid configuration are not presently logged one case is an attempt to starve an old auditd by starting up a new auditd when the old one is still alive and active the other case is an attempt to orphan a new auditd when an old auditd shuts down log both as audit_config_change messages with failure result
7778478501938e071d40eeadb5d7d01770ce799f	mtd nandsim add __init attribute add __init attribute on functions that are only called from other __init functions and that are not inlined at least with gcc version on an x86 machine with allyesconfig currently the functions are put in the segment declaring them as __init will cause them to be put in the and to disappear after initialization the result of objdump on the functions before the change is as follows __number__ l f __number__ alloc_device __number__ l f __number__ get_partition_name __number__ l f __number__ init_nandsim and after the change it is as follows __number__ l f __number__ alloc_device __number__ l f __number__ get_partition_name __number__ l f __number__ init_nandsim done with the help of coccinelle the semantic patch checks for local static non-init functions that are called from an __init function and are not called from any other function
1d1ff45871984364056ebfc528ed31ff7f03f970	mmc sdhci-acpi fix initial runtime pm status initial runtime pm status is active
dab3eba7c13cff58dbff767dd02ffb847255ddd3	pinctrl rockchip return a complete config in pinconf_get till now pinconf_get only set the argument value into the config parameter effectively removing the actual config param value as other pinctrl drivers do it might be nicer to keep the config param intact therefore construct a real pinconfig value from param and arg in pinconf_get
cd0cfdd2485e6252b3c69284bf09d06c4d303116	mmc sdhci-s3c check if clk_set_rate succeeds it is possible that we may fail to set the clock rate if we do so then log the failure and dont bother reprogramming the ip
f7c82d5a3c537a4b4d9d0395db4606bf4d3c7a5f	kdb a fix for kdb command table expansion when locally adding in some additional kdb commands i stumbled across an issue with the dynamic expansion of the kdb command table when the number of kdb commands exceeds the size of the statically allocated kdb_base_commands array additional space is allocated in the kdb_register_repeat routine the unused portion of the newly allocated array was not being initialized to zero properly and this would result in segfaults when help was executed or when a search for a non-existing command would traverse the command table beyond the end of valid command entries and then attempt to use the non-zeroed area as actual command entries
18bb399f6de0314aede17fc05fbb42c9b1c1b12d	mfd tps65218 constify struct regmap_config the regmap_config struct may be const because it is not modified by the driver and regmap_init accepts pointer to const
4c495c204f794125db11e74bd61228901b0acaa7	clk tegra124 add pll_m_ud and pll_c_ud clocks these clocks are used as parents for some emc timings
b41b6f1d1cb6a16c737c4699d2815112ec21faa6	mmc queue remove redundant memsets not needed to memset as they are pointers and are assigned to proper values in the next line anyway
d134b00b9acca3fb054d7c88a5f5d562ecbb42d1	loop add to allow distros __number__ pre-allocated loop devices instead of unconditionally creating a fixed number of dead loop devices which need to be investigated by storage handling services even when they are never used we allow distros start with __number__ loop devices and have losetup8 and similar switch to the dynamic interface instead of searching for free devices
f4750a46a0dee58f7a65b438b28a092669b609aa	initialize during wm sanitization v2 is usually only initialized when doing a modeset during our first atomic commit after boot were effectively faking a modeset to sanitize the setup so ensure that this field gets initialized before use v2 dont clobber active_crtcs if our first commit really is a modeset maarten grab connection_mutex when faking a modeset during sanitization maarten link cherry picked from commit
986842dd579aa6a797ed2dee8c35e45ad4c6ec89	staging csr remove function prototypes there are function definitions missing for these prototypes so remove all __number__ function protos
bbee06d067ba37be3ca3554a401aea49df715c16	pnp acpi use u8 instead of int in acpi_resource_extended_irq context acpi_resource_extented_irq variables are all u8 use that type for triggering polarity and shareable this fixes gcc warnings of type conversion to u8 from int may alter its value
4e7f09ad5ea98ae60a435575ae877bd68a5f2d5c	samsung-laptop fix sparse integer as null warning fix the following sparse warning warning using plain integer as null pointer
801cfd6d8a24051a34d3cd4429e1ddc172b5aad6	fix for opaportconfig ledon by not checking for portnum opaportconfig ledon fails with error message due to port number being checked in the attr modifier this change removes the check for the port number in attrmod so the p field is ignored
824527551c6b5dec30e499ffc279f8f4a4711409	bump driver patchlevel for coherent flag
2700bc013572e3c07e3a28e3715f277fd94b678a	pinctrl samsung allow pin value to be initialized using pinfunc this patch extends the range of settings configurable via pinfunc api to cover pin value as well this allows configuration of default values of pins which is useful for pins that are not supposed to be used by any dedicated driver but need certain board-specific setting
f8d651a56ef5c9e26a1cddd4f169f5bf4f8dfa9b	iwlagn fix cmd queue unmap when we stop the device while a command is in flight that uses multiple tbs we can leak the dma buffers for the second and higher tbs fix this by using iwlagn_unmap_tfd as we do when we normally recover the entry
14ac88af156efcefac9ba3cf249ae84f9ff71d37	retain user selected performance level across state changes if the user has forced the state high or low retain that preference even when we switch power states
70e9f4dde00182600989ca57f08d51be12f1523f	clk add newline character after dumping all clocks clk_dump will dump data about all clocks in json format but it misses a newline character at the end of the json string this patch adds that missing newline character
3e544ef9357493422909064de35f3e289d92f1fe	at86rf230 assign wait_for_completion_timeout to appropriately typed var return type of wait_for_completion_timeout is unsigned long not int as rc is used here only for wait_for_completion_timeout the type is simply changed to unsigned long
d6a1b8d9db3a51f72cdd078ffe48ebcc90fcdd24	staging board line over __number__ characters this patch fixes the warning warning line over __number__ characters __number__
a3901538611f8d5180df44f5b61293e70903958f	xhci use usb_ss_max_streams in xhci_check_streams_endpoint the ss_ep_comp bmattributes filed can contain more info then just the streams use usb_ss_max_streams to properly get max streams
3ff105ed9fa7e5f33ac12871d830477d89871cb7	media ttusb-dec fix bad indentation ttusb_dec_init_stb warn inconsistent indenting
56d237d2683bc0ba403148697260dd9499c40949	wait for enough ring space in crtc_prepare
5771a8051d5ebaac0651a957885f55b5f6221a02	tty serial vt8500 unneccessary duplicated clock code removed remove the extra code left over when the serial driver was changed to require a clock there is no fallback to as a clock is now required also remove a second call to of_clk_get which is unnecessary
4c906c279886550d2aaac6facf71d709158e4e3c	bridge reset bridge mtu after deleting an interface on adding an interface br_add_if sets the mtu to the min of all the interfaces do the same thing on removing an interface too in br_del_if
37bc8f7856fc0c851980f01174ca936741511523	staging ozwpan fix error checking while transmitting frame make sure that we return negative value if oz_build_frame returns null
71f3d070a309504cdfef87b9e98836395b75ae0e	input tc3589x-keypad remove unnecessary checks settle_time and debounce_period are u8 and thus can not be greater than tc3589x_max_debounce_settle which is __number__ there also no need to mask out nibbles form and as we validate that they are in correct range
b60dc62f5b078222e895aae21b71da968ae101a8	alsa ice1712 simplify pm callbacks this is a similar cleanup like the commit alsa fm801 pci core handles power state for us since pci_set_power_state pci_save_state and pci_restore_state are already done in the pci core side so we dont need to it doubly also pci_enable_device pci_disable_device and pci_set_master calls in pm callbacks are superfluous nowadays too so get rid of them as well
b4b87a934c30fb91cbdd18ae028acdc361e1cf0f	crypto omap-aes convert to dma_request_slave_channel_compat use the dma_request_slave_channel_compat call instead of the dma_request_channel call to request a dma channel this allows the omap-aes driver use different dma engines
47e956b2a6a4539f948ff2b85dfd259704dc5021	fill the masked_atomic_cap attribute in query device when the user queries for device capabilities fill in the masked_atomic_cap attribute with the real support level of atomic capabilities instead of using a hard coded value
e0c3f92a08f3e0a95024d0d032564fdc1ee96f54	arm dts r8a7792 remove adsp clock simon horman told me that r8a7792 has adsp clock based on an incorrect table in the most recent r-car gen2 manual but when i received that manual i discovered that this is false r8a7792 is the only gen __number__ soc that doesnt have adsp at all accordingly remove the adsp clock from dt for the r8a7792
b0b7dcbdf327bc57018d498e07331b2c96916dc7	add pvr definition for e500mc and e5500
afd483bd0f6808d7a8891349b8a141d7abd0509d	serial __number__ initialize fixed type fields when setting defaults prepare for __number__ split move fixed type initialization into serial8250_set_defaults this enables uart_config array to remain file scope in base port operations after the split nb the call to serial8250_init_fixed_type_port from serial8250_register_ports was added by commit b5d228cc4f85 serial copy uart properties of upf_fixed_type ports provisioned using early_serial_setup specifically to support ports initialized by early_serial_setup since serial8250_set_defaults is called from early_serial_setup fixed type initialization is now already handled there before serial8250_register_ports is called
5b812ea536da6ae88f79b48fbde1df8ad1e32ff2	iio hid-sensor-als add module alias for autoload add a module_device_table in order to let hotplug mechanisms automatically load the driver this makes it also possible to use the usual driver name instead of hid-sensor-2000xx which isnt very descriptive in kernel messages
69253b6108102834c7cac826d4c34a0414b83a3e	cw1200 remove useless return variables this patch remove variables that are initialized with a constant are never updated and are only used as parameter of return return the constant instead of using a variable verified by compilation only the coccinelle script that find and fixes this issue is type t constant c identifier ret t ret c when ret when strict return ret c
48be81830eb72ce95b33075cce9fdfa39443dce6	staging android use devm_kzalloc instead of kzalloc use devm_kzalloc instead of kzalloc in
f8db3c9086cd33ee3efc913ade291694f54a57f2	pci exynos add missing clk_disable_unprepare on error path add the missing clk_disable_unprepare before return from exynos_pcie_probe in the error handling case
499c2bc3cc89dcbbf08aa526cd4a984b92a4d2a8	dmaengine ste_dma40 fetch disabled channels from dt some platforms have channels which are not available for normal use this information is currently passed though platform data in internal bsp kernels once those platforms land theyll need to configure them appropriately so we may as well add the infrastructure
fe46e64c432d355ab1b5245498d9b75f37d71ac3	perf annotate browser dont change selection line when returning from callq when the user navigates to another annotation browser pressing on a callq line on exit return to the originating callq line link
b1f9cd3225ae2e8626fe7503ae7be92240873049	watchdog sp805_wdt remove unnecessary amba_set_drvdata driver core clears the driver data to null after device_release or on probe failure so just remove it from here driver core change device-core ensure drvdata null when no driver is bound sha1
72ccbbe154fc307c98153725822be515fc0326d3	xfs remove experimental tag from sparse inode feature been around for long enough now hasnt caused any regression test failures in the past __number__ months so its time to make it a fully supported feature
76d28e441ee967f49ec36f34664d54118c438ecd	add a const qualifier this prepares becoming const without this change the following warning would occur in function mpc52xx_uart_of_enumerate warning assignment discards const qualifier from pointer target type enabled by default
22e55fcfd6002accfe1e57e59cf429e6700d4ab4	powerpc export dcr_ind_lock to fix build error fix build error caused by missing export error dcr_ind_lock undefined
37508589903f8ab8b9329df0e7647a45d10a2a7c	reduce warni915_gem_valid_gtt_space to a debug-only check i915_gem_valid_gtt_space is used after inserting the vma to double check the list the location should have been chosen to pass all the restrictions
3436c4bdb30de421d46f58c9174669fbcfd40ce0	f2fs put allocate_segment after refresh_sit_entry sit information should be updated before segment allocation since ssr needs latest valid block information current code does not update the old_blkaddr info in sit_entry so adjust the allocate_segment to its proper location commit f2fs handle dirty segments inside refresh_sit_entry puts it into wrong location
c3539731c22bea311c49c4df97887800c91cca83	backlight progear use pr_err instead of printk use pr_err instead of printk to allow dynamic debugging the pr_fmt prefix for pr_ macros is used also fix checkpatch warnings as below warning printk should include kern_ facility level use kbuild_modname per joe
20bf062c6575e162ede00308ca3a5714ca112009	shorten time for tests by just reversing the order memtest is using the test patterns an additional round to zero the memory is not necessary this might save up to a second or even more for setups which are doing tests on every boot link
20bafb3d23d108bc0a896eb8b7c1501f4f649b77	n_tty move buffers into n_tty_data reduce pointer reloading and improve locality-of-reference allocate read_buf and echo_buf within struct n_tty_data
f3462aa952cfc8f4b095103cb9b3d306dd216558	kbuild handle longer symbols in also warn for too long symbols v2 add missing newline use __number__ max joe perches
15e1c960227dc22d976c270fc854dfe363c04bbd	gfs2 eliminate divides this patch removes the divides introduced in the previous patch in favor of shifting so that it will compile properly on machines
34e0184d98bd3a0e19b1d55bfdbd2186bfe5eca4	net xilinx_emaclite use use the wrapper functions for getting and setting the driver data using platform_device instead of using with so we can directly pass a struct platform_device
d994a1c867ed301aaad26f769885d78e599e1daf	mwl8k self entry for ap interface only add and delete self entry in the firmware sta database for ap interface only we do not need such an entry for sta interface
b06bf9a905e1d9ebb7326fa4110cf5eb105c872f	pinctrl spear320 correct pad mux entries for pin entries of rmii and smii are interchanged by mistake fix it
1045d81d301055b162a3d308e1fb81d2b62a1f2a	media m2m-deinterlace fix allocated struct type xt points to a dma_interleaved_template and not a dma_async_tx_descriptor
0a6eab8bd4e0120d49511acbb294797d96ef9e4a	vfs support fs_xflag_cowextsize and of cow extent size hint introduce xflags for the new xfs cow extent size hint and actually plumb the cow extent size hint into the fsxattr structure
938789fea130c451fde618ac43955beae6b90177	input tsc2005 add module_alias this enables autoloading of tsc2005 driver when is compiled as a module
5758960353d179f0541226764a1e47eff01666ff	alsa aoa remove obsolete cleanup for clientdata the i2c core will clear the clientdata pointer automatically we dont have to set the data field to null in remove or if probe failed anymore also remove a unneeded null checking for kfree
69b3e6199a2d01ad2e3102052be08e0ced91f388	pci hotplug cpqphp use the driver reads pci subsystem ids from the pci configuration registers while they are already stored by the pci subsystem in the fields of struct
c4fbb4300abd6f662c7d5049d01f868af9874069	btrfs fix worst case calculator for space usage forever ago i made the worst case calculator say that we could potentially split into __number__ blocks for every level on the way down which isnt right if we split were only going to get two new blocks the one we originally cowed and the new one were going to split thanks
dbd3393c56a8794fe596e7dd20d0efa613b9cf61	ipv4 add defensive check for checksum_partial skbs in ip_fragment checksum_partial skbs should never arrive in ip_fragment if we get one of those warn about them once and handle them gracefully by recalculating the checksum
5f2f3cad8b878b23f17a11dd5af4f4a2cc41c797	sunvnet initialize network_header and transport_header in vnet_rx_one vnet_fullcsum accesses ip_hdr and transport header to compute the checksum for ipv4 packets so these need to be initialized in skb created in vnet_rx_one
fd75cb51f261d77eadd83bcb88f2016f53f4af4a	kvm powerpc allow guest control e attribute in mas2 e bit in mas2 bit indicates whether the page is accessed in little-endian or big-endian byte order there is no reason to stop guest setting e so allow him
a73c2a2f9123605022bedbd2b59ca7e76036f0b3	libiscsi use scsi helper to set information descriptor in case encountered a pi error use scsi_set_sense_information instead of open coding information descriptor format
501e01d7cd08d1fc5d876ca6e8162e19e012ac76	make irq_received bool irq_received is used as a boolean in i965_irq_handler so make it bool this also makes i965_irq_handler closer to i915_irq_handler
dccbc9197d2c3614f2fd6811874e1d982e4415f0	ubifs silence early error messages if ms_silent is set probe-mounting a volume too small for ubifs results in kernel log polution which might irritate users address this by silencing errors which may happen during boot if the rootfs is squashfs and thus rather small stored on a ubi volume
45abfa683bec97427078d5c122c2166fb989a03a	usb musb dsps switch to static id for musb-hdrc platform devices the dsps glue uses platform_devid_auto when creating the musb-hdrc platform devices this causes that the id will change in each system depending on the order of driver probe the order of the usb instances defined in device-tree or the list of enabled devices which use also platform_devid_auto in kernel config this id inconsistency causes trouble in shell scripting or user guide documentation so switch it to static id starting from __number__ to the musb instance with lower mmr offset this scheme is also aligned to the naming in the soc
78c1b8e822a0bcf9655a0da3633137b51e17f068	bluetooth btmrv use specifier instead of print_hex_dump_bytes use standard print specifier and remove print_hex_dump_bytes call makes output more sensible __float__ __number__ __number__ __number__ fe fc __number__ f2 __number__ __number__ __number__ would be changed to __float__ bluetooth hex __number__ __number__ fe fc __number__ f2 __number__ __number__ __number__
f4edce1afd537327012189c1481ad66260b195ff	fsnotify remove a stray unlock we recently shifted this code around so were no longer holding the lock on this path
94f5e0243c48aa01441c987743dc468e2d6eaca2	dm crypt remove unused io_pool and _crypt_io_pool the previous commit dm crypt dont allocate pages for a partial request stopped using the io_pool slab mempool and backing _crypt_io_pool kmem cache
d30c4b7a87e8b19583d5ef1402d9b38f51e30f44	turbostat fit output into __number__ columns on snb-ep reduce columns for package number to __number__ if you can afford more than __number__ packages you can also afford a terminal with more than __number__ also shave a column also off the package c-states
1beba52d46f039a24f31cf5717c239c89a9d4e6f	android binder remove deprecated create_singlethread_workqueue the workqueue is being used to run deferred work for the android binder the binder_deferred_workqueue queues only a single work item and hence does not require ordering also this workqueue is not being used on a memory recliam path hence the singlethreaded workqueue has been replaced with the use of system_wq system workqueues have been able to handle high level of concurrency for a long time now and hence its not required to have a singlethreaded workqueue just to gain concurrency unlike a dedicated per-cpu workqueue created with create_singlethread_workqueue system_wq allows multiple work items to overlap executions even on the same cpu however a per-cpu workqueue doesnt have any cpu locality or global ordering guarantee unless the target cpu is explicitly specified and thus the increase of local concurrency shouldnt make any difference
3ae13faac40011e51234989d938fb70f4f0150d0	kvm x86 pass kvm_get_time_scale arguments in hertz prepare for improving the precision in the next patch
c5fa4ab5ab417d8d7bd658957ce7b7e6ef0cdaf3	cpufreq remove use of __devinit config_hotplug is going away as an option so __devinit is no longer needed
b094c99e8e284cff839400a3b61fda1fa53962fc	perf bench sched-messaging plug memleak explicitly free the thread array pth_tab link
b3208839106476fe31b4bf3e6a2470cae509b2a5	asoc omap-abe-twl6040 add complete dapm routing sdp4430 is a reference platform and as such it has all possible audio routing implemented correct the dapm routing to be complete
fecb0d584ee96fb2ab3c65825029a66a23ee7e31	mei kill not used bar0 length and base variables __number__ mem_base and mem_length are not used so we can delete them __number__ add kdoc for mem_addr member of mei_device
3e71669accfadd670aa745d7bdcabc179360d9cb	staging rtl8723au remove obsolete struct ieee_parm
96afef1d5adee8722549c8c2b788d656ea2ecf21	skip gpio element execution when not supported skip v3 gpio element because the support is not there and skip gpio element on non-vlv because the sideband code is vlv specific v2 the gpio stuff is currently only supported on vlv ville
29fcec60d199e2cc3ac5fccd6f2a470b104d1235	media v4l subdev remove deprecated video-level dv timings operations the video enum_dv_timings and dv_timings_cap operations are deprecated and unused remove them
61a6df54b64913defc64c87a05d5d258a2020fb5	kvm s390 call exit_sie directly on vcpu thinking about it i cant find a real use case where we want to block a vcpu and not kick it out of sie except if we want to do the same in batch for multiple vcpus but thats a micro optimization so lets simply perform the exit_sie calls directly when setting the other magic block bits in the sie otherwise kvm_s390_set_tod_low still has other vcpus running after that call working with a wrong epoch
b56f4d326a5beeead8f4667d0323abd6c111f3de	staging rtl8188eu remove unused function rtl8188eu_ps_func
b69af4373abe1e64274bc5217452fb14affb4ff7	rtc rtc-mv add __init annotation when platform_driver_probe is used via sysfs is disabled thus annotations can be added to
7e597d327eca3d92a759542ff707cba61af3a718	perf report get rid of hist_entry__callchain_fprintf its just a wrapper function to align the start position ofcallchains to comm of each thread if its a first sort key but it doesnt not work with tracepoint events and also with upcoming hierarchy view link
153847586b0aaa9482e42bc7e95b24adb87a1859	tile clarify barrier semantics of atomic_add_return a recent discussion on lkml made it clear that the one-line comment previously in atomic_add_return was not clear enough
7b45f21c2e42f265f6fd469e43857e98e2fdf01c	perf tools replace mkostemp with mkstemp the mkostemp function is only available in glibc this leads to compile error in android since bionic is derived from bsd replacing mkostemp with mkstemp mkstemp is available on both glibc and bionic link
fdcc4beccb52f752799978c4da0dcd0faadbdcd4	bluetooth fix updating smp remote key distribution information when performing pairing using smp the remote may clear any key distribution bits it wants in its pairing response we must therefore update our local variable accordingly otherwise we might get stuck waiting for keys that will never come
3ff1f22c882493dcceb25cbca5b516d8e4271151	sor set minor after debugfs initialization the drm minor is needed to teardown debugfs so it needs to be tracked to prevent a crash on driver removal
29e5eea06bc19114b1df668f85b605914766a899	arm exynos get current parent clock for power domain using a fixed by dts parent for clocks when turning on the power domain may introduce issues in other drivers for example when such driver changes the parent during runtime and expects that he is the only place of such change do not rely on dts providing the fixed parent for such clocks instead before switching domain off grab a current parent of a clock with clk_get_parent
8de0add7231f5747f192c1ed35fd792a866c885b	dont dsparb on because the register does not exist in this patch solves unclaimed register messages on haswell after
cd5d822688f3b32af286a76f7078dfe49c716282	asoc wm8350 move delayed work struct from dapm context to driver state the wm8350 driver is the last driver that still uses the delayed_work field from the snd_soc_dapm_context struct moving this over to the drivers private data struct will allow us to remove the field from the dapm context which will drastically reduce its size
8a86c3aee0cfec09b35159da9d925157f3e4f2cc	i2c cadence check for errata condition involving master receive cadence i2c controller has the following bugs completion indication is not given to the driver at the end of a transfer with hold bit set invalid read transaction are generated on the bus when hw timeout condition occurs with hold bit set as a result of the above if a set of messages to be transferred with repeated start includes any message following a read message completion is never indicated and timeout occurs hence a check is implemented to return for such sequences wsa fixed some whitespaces
7f4b08eeeedd90d97c8c581d048074e0c2643bec	i2c omap remove unneccesary use of pdev a pointer to the struct device associated with the i2c device is already kept in the struct omap_i2c_dev so use omap_i2c_device to find the pointer to struct device
4d15c145a6234d999c0452eec0d275c1fbf0688c	use by default when available dri clients really should be using mocs to get fine grained streaming cache controls with that note i that this patch doesnt improve performance overwhelmingly because if it does it means there is a problem elsewhere in any case the kernel and old userspace should get some benefit from this so lets do it ellc is always a good default and really not using it is the special case for mocs references page __number__
3bdd884371b6fe68bb144aa4661d6a774a5417f1	firmware arm_scpi decrease tx timeout to currently we have tx timeout of while rx timeout of __number__ ms tx state machine is maintained by the mailbox framework and rx by scpi driver it is possible that before msg_submit call tx_preparebecause of other message in the queue and the channel being active wait for completion in scpi_send_message times out and the buffers are freed in that case when tx state machine timer goes off later poll_txdone calls scpi_tx_prepare on that message which adds it to the rx_pending list corrupting link pointers this patch reduces the tx timeout to and increases rx timeout to to avoid the above mentioned issue
03360c5a405999d605ffc7373a7b90f3388db92e	revert mac80211 clear on reconfiguration this reverts commit f785d83a19bca326f79d127a413e35769afc0105 this was provoking warnings from the iwlegacy drivers
382145beb4a4bb057f17d5b411546b6b56fbacd1	greybus hid fix missing input verification of report events add minimal verification of incoming report size before using it to determine what buffer and size to pass on to hid core add comment about protocol needing to be revisited if we are going to be parsing the report data received then those fields have to be defined in the greybus specification at least
38eb6863ed21de9beab792f66cd282c21e0dc10b	zorro rename picasso iv z2 mem to ram for consistency
f57576e73cc4808af3b097b1fdedfa7d0f6378a4	mfd intel_soc_pmic_bxtwc fix a typo in module_device_table fix a typo in module_device_table pmic_acpi_ids should be bxtwc_acpi_ids
f719ae3311f9b609151a0319f0cc2fdb7491d37a	extcon arizona additional settings to improve accuracy of hp detect if the tst_cap_sel bits arent set correctly on there will be a load along side the headphones which will affect the accurary towards the very top of the detection range this patch sets those bits
ff2ca4f0e89245680ef5f835b685fde3720ee83e	staging comedi daqboard2000 rename serial eeprom register macros rename the macros defining values for the serial eeprom control register to avoid camelcase
262329fccad4914dbf4b49634cbe140dfb353c25	asoc cs35l33 remove setting in cs35l33_set_bias_level this is done by asoc core now
b378360e8fa4a2f21960747f194c1c7c1f3ae7f9	use for_each_pipe in intel_display_crc_init we have a nice macro so use it
67e39c5ae7369bad2a1c2d631e5b971be2e1edc1	brcmsmac add debug info message providing phy and radio info for debug purposes it is good to have the phy and radio information available in the log only logged when driver is built when brcmdbg or brcm_tracing kconfig are set
38aecea0ccbb909d635619cba22f1891e589b434	reverse dp link param selection prefer fast over wide again its this time of the year again originally weve frobbed this to fix up some regressions but maybe our dp code improved sufficiently now that we can dare to do again what the spec recommends this reverts commit author jesse barnes virtuousgeek.org date thu jun __number__ __number__ prefer wide slow to fast narrow in dp configs im pretty sure ill regret this patch but otoh i expect we wont make progress here without poking the devil occasionally bugzilla
d1cb620081f51c78cf95224efb593a886875078f	alsa hda jack export required functions from these two functions are being used by the codec-idt and codec-hdmi modules so they need to be exported properly
f2b667b658f998d4bba12ca0204c01f34fdb0321	ensure aux ch is awake while in dp sleep state some lspcon adaptors wont properly wake up in response to an aux request after the adaptor was placed to a dp sink sleep state via writing to dp_set_power based on the dp __float__ specification the sink may place the aux ch into a low-power state while in sleep state but should wake it up in response to an aux request within answering with aux defers while waking it up as opposed to this at least the paradtech ps175 adaptor wont fully wake in response to the first i2c-over-aux access and will occasionally ignore the offset in i2c messages this can result in accessing the ddc register at offset __number__ regardless of the specified offset and the lspcon detection failing to fix this do an initial dummy read from the dpcd area the ps175 will defer this access until its fully woken taking making sure the following i2c-over-aux accesses will work correctly reference
bd8eabfa0ae52c172b75bd6c53f41e5d82a12547	net ethernet seeq drop owner assignment from platform_drivers a platform_driver does not need to set an owner it will be populated by the driver core
9f6fe04326da5036ab0d01553eacabe9b21d47ae	staging sm7xxfb clean smtcfb_fixs id initialization setting up smtcfb_fixs id happens through smtc_alloc_fb_info it adds complexity and unnecesary code
21b4c415e43717b3dbc17ebef66ee2054f8f2e21	cpufreq s3c24xx fix s3c_cpufreq_initclks __init attribute location __init belongs after the return type on functions not before it
f8519155b4d5224e215203bf0e94a8478a8f8945	add support for new iommu performance events this patch adds new iommu performance event based on the information in table __number__ of the amd virtualization technology iommu specification document id __number__ rev __float__ feb __number__ link
d140d6a15b9d88ac89f4a83c944ab67656fa4b50	rtl8192u promote auth_mode to a full __number__ bits currently leap is defined to two locally but the identically named global constant is __number__ in in order for us to switch over to using the global value we need to adjust the local storage which is currently not enough to hold the larger value this is now consistent with the similar struct used in and other drivers
37580559f314bfba0c8bdae002bc5c10088ac457	dmaengine idma64 drop irq enable disable in handler there is no need to disable interrupts in the irq handler the driver guarantess that at one time only one descriptor is active besides the fact that each call to the same channel will be serialized in idma64_chan_irq handler anyway
10cf15e1d1289aa0bf1d26e9f55176b4c7c5c512	sparc hook up memfd_create system call
4afdd680f7c106e1c87b6dd7af9751c282ecb4b0	dm thin reduce number of metadata commits reduce the number of metadata commits by using dm_thin_changed_this_transaction to check if metadata was changed on a per thin device granularity
01f90dd9e01c766371069621810c58c2c7a62021	sd dont use the all_tg_pt bit for reservations these only work if the we use the same initiator id for all path which might not be true if we use different protocols or even just different hbas instead dm-mpath will grow support to register all path manually later in this series
2dc8d9e19b0d891b0d3675b5ac82be9be3875e36	ext4 forbid i_extra_isize not divisible by __number__ i_extra_isize not divisible by __number__ is problematic for several reasons it causes the in-inode xattr space to be misaligned but the xattr header and entries are not declared __packed to express this possibility this may cause poor performance or incorrect code generation on some platforms when validating the xattr entries we can read past the end of the inode if the size available for xattrs is not a multiple of __number__ it allows the nonsensical which doesnt even leave enough room for i_extra_isize itself therefore update ext4_iget to consider i_extra_isize not divisible by __number__ to be an error like the case where i_extra_isize is too large this also matches the rule recently added to e2fsck for determining whether an inode has valid i_extra_isize this patch shouldnt have any noticeable effect on filesystems since the size of ext4_inode has always been a multiple of __number__
7200be7c81cc1a1c54a79348a724c16345c5242f	vfio platform remove needless stack usage request_module already takes format strings so no need to duplicate the effort
dd2b0251573f5d27ae58afee64256b647041382a	msi-wmi avoid repeating constants use uuid defines in module_alias strings to avoid repeating strings
c77d8092c761bc0ee219fd869e6cde876e2b7aa4	mtd use mtd_device_parse_register replace custom invocations of parse_mtd_partitions and mtd_device_register with common mtd_device_parse_register call this would bring standard handling of all errors fallback to default partitions etc
c48a9d74926c83f62b0251eff0a3dde259923856	regmap support some more block operations on cached devices commit regmap support some block operations on cached devices allowed raw read operations without throwing a warning when using caches if all registers are volatile this patch does the same for raw write operations this is for example useful when loading a firmware in a predefined volatile region on a chip where we otherwise want registers to be cached
46348456c1791053dcbe5a9e21825b10a3c8a8fb	block copy a user iovec if it includes gaps for drivers that dont support gaps in the sg lists handed to them we must bounce copy the user buffers and pass a bio that does not include gaps this doesnt matter for any current user but will help to allow iser which cant handle gaps to use the block virtual boundary instead of using driver-local bounce buffering when handling sg_io commands
df7a1fcfc4761e658b60739e2ff4cd148afcae89	scsi smartpqi minor function reformating reformatted pqi_num_elements_free to match the rest of the driver
0561c1794a0df435631474a99c24220b9fc1bbfe	backlight hp680_bl use devm_backlight_device_register use devm_backlight_device_register to make cleanup paths simpler
102165c6d2b8d73a25a1567fcac496addc15aba7	wl18xx add module parameter to disable tcp checksum add a new module parameter to disable tcp checksum offload
2d0747c4b68be8eb8ccfa2c538f2f5dd2ea89094	of properly set the of_populated_bus flag on root node of_platform_populate takes a subset of the device tree and turns it into a set of platform_devices at the same time it sets the of_populated_bus flag in each bus nodes so that of_platform_depopulate can undo the operation at a later time however it doesnt set the flag on the root of the population tree which means that dynamic modifications of the device tree at runtime will not devices correctly fix of_platform_populate to set the of_populated_bus flag on the node it is called with
4f71a2e0a282611e55bacb60b564eaef5d16c27b	serial mctrl_gpio export mctrl_gpio_disable_ms and mctrl_gpio_init to be able to make use of the mctrl-gpio helper from a module these functions must be exported this was forgotten in the commit introducing support interrupt handling for these functions while it was done for mctrl_gpio_enable_ms
0dc1135fdf5e2b2a3dbacd59c66f3e9236894425	pwm jz4740 use devm_clk_get using the managed version of clk_get makes the code a bit shorter and the error paths less complicated
7b11304a3c11a24a8674a47e8fd136182f86b49d	dma mxs-dma report correct residue for cyclic dma use the channels buffer address register to calculate correct residue value for tx_status
a0795cd416d1142117695f932a9690611ae0edbb	mm oom print symbolic gfp_flags in oom warning it would be useful to translate gfp_flags into string representation when printing in case of an oom especially as the flags have been undergoing some changes recently and the script needs a matching source version to be accurate example output invoked oom-killer
98f6d57ced73b723551568262019f1d6c8771f20	xen-netback process guest rx packets in batches instead of only placing one skb on the guest rx ring at a time process a batch of up-to __number__ this improves performance by in some tests re-based
ba464d0c88af59ccd35929eff010747de0fb0dec	backlight adp8860 remove unnecessary oom messages the site-specific oom messages are unnecessary because they duplicate the mm subsystem generic oom message
db5ff4ac97f6602360645414b698a05f91b40542	forcewake register range changes for chv according to updated bspec wells register range changed updating the same to match the spec and avoid extra forcewake for none forcewake range v2 update media forcewake range ville
b08ea27d95bcaee6d9cf4edd64f373006661424a	rcu protect rcu_boost lockless accesses with access_once this commit prevents random compiler optimizations by applying access_once to lockless accesses
e6c71b48c9713c5581e9ac6dcb469db176468120	drop some dead code the mqd is only used on ci and newer
7521ce6eb2d3650a04ac7a1d176607ae9441826a	mwifiex do not process mgmt rx on uninitialized interface this patch fixes a crash which was happening because of rx of management frames on uninitialzed interface now we drop management frames for interfaces where cfg80211 has not registered any management subtype reception or interface has no nl80211 iftype set
6d88064edcfc5e5893371f7c06b9f3078dc1edf6	put runtime pm only when we actually release force_wake when we call gen6_gt_force_wake_put we dont actually put force_wake we just schedule gen6_force_wake_work through mod_delayed_work and that will eventually release force_wake the problem is that we call intel_runtime_pm_put directly at gen6_gt_force_wake_put so most of the times we put our runtime pm reference before the delayed work happens so we may runtime suspend while force_wake is still supposed to be enabled if the graphics autosuspend_delay_ms is too small now the nice thing about the current code is that after it triggers the delayed work function it gets a refcount and it only triggers the delayed work function if refcount is zero this guarantees that when we schedule the funciton it will run before we try to schedule it again which simplifies the problem and allows for the current solution to work properly v2 keep the vlv refcounts balanced jesse
915bf29eb94beabed8bf577bfd62fc0ba9abbf37	alsa hda avoid bdl position workaround when no_period_wakeup is set originally the bogus period at bdl head was introduced as a workaround for the mismatching position update at the period boundary typically seen on dmix however for applications like pulseaudio that dont require period wake ups this workaround is just superfluous thus better to disable it when no_period_wakeup is given in hw_params
de18cd4b71acecbd1278a7bb79340cbf885212aa	crypto lzo use kvfree helper kvfree helper is now available use it instead of open code it
19a1ac505d5f3545ebc5b0a195d65cef4da94bb5	add support for the rtc in the mc34708 pmic
d76cfae9674f325de35ff23ab07ff9c7d809de4a	net fec stop the phy before shutting down the mac when the network interface goes down stop the phy to prevent further link up status changes before taking the mac or netif sections down this prevents further reception of link up events which could potentially call fec_restart since phy_stop takes the mutex which adjust_link runs under we also ensure that adjust_link will not already be processing a link up event we also need to do this when suspending as well we dont want a mis-timed phy state change to restart the mac after we have stopped it for suspend and thus need to restart the phy when resuming
5fdb8c6127c3c594360fb5f2959a724809c0032e	save right errno move up error handling code to preserve the errno coming from ioctl before it may be changed by close
d30d141f9cb7eb9fb3f03af11146dc0d2b393ff2	asoc z2 register jacks at the card level the jacks are card level elements so use snd_soc_card_jack_new instead of snd_soc_jack_new to register them
0bd143fd800055b1db756693289bbebdb93f2a73	bcache fix a bug recovering from unclean shutdown the code to fixup incorrect bucket prios incorrectly did not skip btree node freeing keys
7f17326fc0b69afbda7aed6c4ce8e2328b74203b	cpufreq intel_pstate fix intel_cpufreq_verify_policy the intel_pstate_update_perf_limits called from intel_cpufreq_verify_policy may cause global p-state limits to change which is generally confusing and unnecessary in the passive mode the global limits are only applied to the frequency selected by the scaling governor they are not taken into account by governors when making decisions anyway so making them follow the per-policy limits serves no purpose and may go against user expectations as it generally causes the global attributes in sysfs to change even though they have not been written to in some cases fix that by dropping the intel_pstate_update_perf_limits invocation from intel_cpufreq_verify_policy which also reduces the code size by a few lines this change does not affect the per-cpu limits case because those limits allow any p-state to be set by default in the passive mode and it removes the only piece of code updating them in that mode so the per-policy settings will be the only ones taken into account in that case as expected
db178340433f90e09ada35c174dfb2c84c2c71f4	ath5k do not reschedule tx_complete_work on stop this patch claim to fix warning at which was reported at we use ath_stat_started flag to disallow to perform ath5k_tx_complete_poll_work code hence reschedule when we stop device this flag was defined in ath5k code but it was not used i didnt get feedback if the fix works so patch is compile only tested
c531241dcc010e4457e0eb9401aaeae0a56bf5c6	mfd twl4030-audio get audio mclk via twl-core api instead of pdata twl-core has api to get the boot time configured hfclk rate which has the same rate as the audio mclk
dc285820cc19a666aea45ac74e9737c2afcf8189	staging comedi ni_660x tidy up rename these functions so they have namespace associated with the driver fix the issues warning prefer unsigned int to bare use of unsigned
97a7b2c274d5dbe51170e099c16d49cfd1b467af	f2fs convert inline_data for various fallocate for newly added fallocate types it should convert inline_data before handling block swapping
e79dd09b605f42d85d1a5605ad0fe96b970695e9	orinoco fix checking for default value thresholds uses to indicate that default value should be used since thresholds are unsigned sign checking makes no sense the problem has been detected using proposed semantic patch __number__ __number__
b46ce4d01e1c6052809b13340cc8e62d361f7306	dma cppi41 fix a misspelled function name
b4f359ab065b9c6c132124557d23e90e2e8504be	btrfs remove unnecessary code in btree_get_extent unnecessary lookup_extent_mapping is removed because an error is returned to the caller this patch was made based on the advice from stefan behrens thanks
370004d38abc65bf920ae188be72caa7c7572033	convert wait_fori915_readreg to intel_wait_for_register by using the out-of-line intel_wait_for_register not only do we can efficiency from using the hybrid wait_for contained within but we avoid code bloat from the numerous inlined loops in total all patches text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__
d5e3ed66d6f260b3bb68cb5cf0fe79777e8febf0	slab use slab_post_alloc_hook in slab allocator shared with slub reviewers notice that the order in slab_post_alloc_hook of kmemcheck_slab_alloc and kmemleak_alloc_recursive gets swapped compared to slab allocator also notice memset now occurs before calling kmemcheck_slab_alloc and kmemleak_alloc_recursive i assume this reordering of kmemcheck kmemleak and memset is okay because this is the order they are used by the slub allocator this patch completes the sharing of alloc_hooks between slub and slab
7d4d9ed6ef5219857865dd57d425f9729d0a39ff	convert non-modular to use builtin_platform_driver this file depends on kconfig arch_tegra which is a bool so we use the appropriate registration function which avoids us relying on an implicit inclusion of which we are doing currently while this currently works we really dont want to be including the header in non-modular code which wed be forced to do pending some upcoming code relocation from into so we fix it now by using the non-modular equivalent
6cbac1e4cd0e0110b4be38c201fc055249dfd365	allow mapping the free running counter on prot_exec the current mlx5 code disallows mapping the free running counter of mlx5 based hardwares when prot_exec is set although this behaviour is correct linux does add an implicit vm_exec to the vm_flags if the read_implies_exec bit is set in the process personality this happens for example if the process stack is executable this causes libmlx5 to output a warning and prevents the user from reading the free running clock executing the init segment of the hardware isnt a security risk at least no more than executing a process own stack so we just prevent writes to there user-space
a96389d9add1bc9e32b73ead10cf255f7d598a0d	staging lustre make local functions static makes functions that are not used outside the file in which they are defined static as reported by sparse warning symbol ptlrpc_alloc_rqbd was not declared should it be __number__ warning symbol ptlrpc_free_rqbd was not declared should it be __number__ warning symbol ptlrpc_grow_req_bufs was not declared should it be __number__ warning symbol ptlrpc_svcpt_health_check was not declared should it be
ef9ed4b9c9de59eb3f2215b4773990159af92dc1	remove duplicated mode bits check the spi subsystem already checks the mode bits before calling setup
d556023895c8968fd97ccb08300006b78975a23b	wlcore allow memory access when the fw crashes when the no_recovery flag is used the recovery work will not restart the fw and the state will not be set to on to enable post-mortem analysis allow memory access in the restarting state also since the fw might not be operational dont fail the operations if elp_wakeup fails
9b86421d14b8780c7abe3c6c8d27e617a74d0148	asoc wm9705 remove noisy print on boot theres no content in the announcement
c924d2d2a964715b55b6601be338b3bd05a1ced5	clocksource sh_cmt add memory base to sh_cmt_channel structure the channel memory base is channel-specific add it to the channel structure in preparation for support of multiple channels per device
44cb09c23f8e5838f24ef47d43dd2804b71b3a65	arm warn if bad irq was scheduled if somebody causes an unexpected bad irq this even will be unnoticed in both dmesg and system logs if the bad irq is stuck the device will just hang silently reporting anything compare this to the generic behaviour from which prints a message with critical level so to help everybody include the same message into arm-specific ack_bad_irq
c2466ac3d2bbbf2b274e086d235febcf53395313	use lockless gem bo free callback no anywhere to be seen
127629d74efff202372fbd6097e607fcb2c8a7af	mfd ab8500-debug add adc input channel usb_id in debugfs
8d964478b2d124fcfde8017d02d4d70ae20802f2	sd bad return code of init_sd in init_sd function if kmem_cache_create or mempool_create_slab_pools calls fail the error will not be correclty reported because class_register previously set the value of err to __number__
5459a2ad9da0c93161f31cfda5d39e23b64d50f8	use __drm_atomic_helper_reset_connector for subclassing connector state v2 changes since v1 do not reset if state allocation fails link
ce3eaedfc0df2f115051b19d303e4c7ff1e0aaaa	staging vt6656 correct indentation to use tabs rather than spaces
c767bf2ed3a3844a9d9341366cc388dab7c7ee05	dont use idr_remove_all idr_destroy can destroy idr by itself and idr_remove_all is being deprecated drop its usage
eba51190f3c6ffcb685fc100a4234095b0146150	fix whitespace trivial link
a173f045a870cacd3037cb97681dc3ee8ef9f49e	ixgb remove open-coded skb_cow_head
1a84e7716086be3b90e3b735725d0a14da28a69c	iwlwifi mvm add debug info to schedule scan complete message add more information to schedule scan complete message
54fb66d6fe98c75d5cb0b0487f0e2b00cb412be7	rtlwifi clean rtl_evm_db_to_percentage a bit
5bb20ed863f8573ecd1956f0ebd2c3d36e6e0585	caif add error handling for allocation the allocation of phyinfo wasnt checked and also the allocation wasnt freed on error paths sjur pointed out as well that phy_driver should be freed on the error path too
6924af76c20fc8f1a0923daff389f850c457f00b	staging unisys fix comments this patch simply cleans up all checkpatch comment issues
49404dd09f5dc78c247c6044c60d7be7768a71bc	arm omap4 pm add power domain statistics support
a7c5047d1ce178dd2b1fa577fc8909ad663d56d5	fix setting of vertical timings in the crtc it looks like when i went to add the interlaced bits i just took the existing block and indented it instead of copy and pasting it first without this changing resolution never worked
9df56d9bdeeae16af53487d1d4e8d78cd36948bc	staging rts5208 use msecs_to_jiffies for timeouts this is only an api consolidation and should make things more readable converting milliseconds to jiffies by val hz __number__ is technically not wrong but msecs_to_jiffiesval is the cleaner solution and handles corner cases correctly
301f33fbcf4ced53b3de114846ecece5d6aafeeb	acpi video use after input_unregister_device we cant use input anymore after calling input_unregister_device the call to input_free_device is a double free the normal way to deal with this is to make input_register_device the last function called in the function
b8455c9f6f661fb9bcb791370478d6d15c9bf2b3	asoc cs4271 fix property check the driver had the property check for the wrong way around that happens if you misspell the property in the bindings during tests
a1d26ac0ddc4ea561e17a75dd3b5f9d3c1812f16	extcon check for allocation failure return if the kmalloc fails
2a46ddf77c32da1f4137aeb902bc4e1f50582b69	fix possible invalid memory access caused by free_dmar_iommu static identity and virtual machine domains may be cached in array after corresponding iommus have been removed from so we should check before decreasing in function free_dmar_iommu otherwise it may cause free of inuse domain data structure
9daee73c81d21f9f07f236f106da5d93c40f7a92	udlfb improve debugging printouts with refresh rate it is not very helpful to print a list of the same resolutions without the refresh rate
a3056b1ca5db9103e079f3d8d9e386b3590b9250	mips replace open-coded init_dsp there is already an init_dsp function which checks cpu_has_dsp calls __init_dsp if it does make use of it instead of duplicating the same code patchwork
09b4d1990094dd22c27fb0163534db419458569c	pipe simplify logic in alloc_pipe_info replace an if block that covers most of the code in this function with a goto this makes the code a little simpler to read and also simplifies the next patch fix limit checking in alloc_pipe_info link
bf19647d8f19e89bdf94eef387cfc3825bb48d7f	usb gadget rndis staticize rndis_init and rndis_exit are used only in this file fix the following sparse warnings warning symbol rndis_init was not declared should it be warning symbol rndis_exit was not declared should it be
69a3d4f7b3f976192f8ac1ab760a026c737d0d56	media arm samsung change __s5p_mipi_phy_control function signature replace pdev argument __s5p_mipi_phy_control helper with plain int so mipi-csis hardware instance index can be passed directly making the function usable on platforms instantiated from device tree
61f43e6880dee5983999fe40bf96c1cf43740b4c	ext3 add necessary check in case io error happens as we know io error may happen when the function sb_getblk is necessary check for it the patch also fix a coding style problem
18bf50a374a46aec83652f48006a6fac764c635d	mfd store wm8350 struct in core device driver data this will allow us to move to a more idiomatic mfd model as drivers will be able to get the struct by looking at their parent device
ecce565056db18b6136d9ff9232aa3761aae4e48	staging et131x dont cast a to a struct pointer casting a popinter to a struct pointer is unnecessary dont do it
9f5610e20b322347ce3e55e75a78965717a62412	convert to kstrtou8_from_user this patch replaces the code for getting an number from a userspace buffer by a simple call to kstrou8_from_user this makes it easier to read and less error prone
9e3e4dbf4469ba19971fbd547f1be713604c7f5e	kvm nvmx replace kvm_set_cr0 with vmx_set_cr0 in load_vmcs12_host_state kvm_set_cr0 performs checks on the state transition that may prevent loading l1s cr0 for now we rely on the hardware to catch invalid states loaded by l1 into its vmcs still consistency checks on the host state part of the vmcs on guest entry will have to be improved later on
ea295857fcf740ef7a003b9a3f25b11c236f7f7b	staging unisys visorbus error_store convert ret to err the ret variable was only returning an error so changing it to err to be more consistent across the file reviewed-by reviewed-by tim sell
058502eb38a0f687e5af37209488d03656f87ffe	fb sa1100 make gpio configuration setting safe the sa1100fb driver needs to set the gpio direction and alternate function register according to the panel that were driving weve done this in the driver by read-modify-writing the register which may cause problems with races fix this with a minimal change
21205bf8f77b23484966cb057ceaec860cc400b3	userfaultfd hugetlbfs reserve count on error in __mcopy_atomic_hugetlb if __mcopy_atomic_hugetlb exits with an error put_page will be called if a huge page was allocated and needs to be freed if a reservation was associated with the huge page the pageprivate flag will be set clear pageprivate before calling so that the global reservation count is not incremented link
b2b263f2e7f55a6bd5875a3cb7d0ab4bef433a7c	mtd nandsim staticize local symbols these local symbols are used only in this file fix the following sparse warnings warning symbol do_read_error was not declared should it be warning symbol do_bit_flips was not declared should it be
44dbc78ee43d5df0bbcd7f3ae6a0ba00ed261e95	bnx2x fix bridged gso for chips it was recently found out that gso on was broken due to packets being sent without a valid ip checksum commit bnx2x fix gso for chips partially fixed this issue but failed to set the correct ip checksum when receiving gso packets via bridges as such packets enter bnx2x_tx_split and the fw flags needed to calculate ip checksum were erroneously set in the incorrect buffer descriptor this patch re-enables gso in said scenario for chips
c987ff0d3cb37d7fe1ddaa370811dfd9f73643fa	respect iommu aperture when allocating where a device driver has set a dma mask to indicate the absence of addressing limitations we still need to ensure that we dont allocate iovas beyond the actual input size of the iommu the reported aperture is the most reliable way we have of inferring that input address size so use that to enforce a hard upper limit where available
5b7696499c68a6b84127018d063649597e31627a	netxen_nic remove redundant check if retries is zero at the end of the timeout loop retries will always be zero so the check for zero is redundant so remove it also replace printk with pr_err as recommended by checkpatch
835e4241e714fbd659838618466766b132823da3	usb host xhci-plat enable clk in resume timing this patch enables the clk in resume timing when device_may_wakeup is false otherwise kernel panic happens when r-car resumes the system from suspend-to-ram because the clk is disabled
0f1fb99b62ce226f8d818852f812c5d79071ce58	fix section mismatch section mismatch in reference from the variable fsl_of_pamu_driver to the function the variable fsl_of_pamu_driver references the function __init fsl_pamu_probe if the reference is valid then annotate the variable with or __refdata see or name the variable
1c38d6f22a4b0d5128b5ef2c2930f2c96ff37fe8	staging comedi comedi_fc use comedi_inc_scan_progress since cfc_inc_scan_progress is just an inline function that calls comedi_inc_scan_progress replace calls to the former to the latter in the comedi_fc module this is part of the migration of functionality from the comedi_fc module to the core comedi module
09f308f7b675b692d1c0a451ff02f0fff7846c96	drm have the crtc code only reference master from legacy nodes v2 control- and render nodes are intended to be master-less v2 replace tests for with tests for for readability
e6345c81b4eb20850ae4078ed3a8ff6eae584283	use module_pci_driver macro as the manual of module_pci_driver says that it can be used when the init and exit functions of the module does nothing but the pci_register_driver and pci_unregister_driver use it for the sm7xxfb driver as the driver does nothing in its _init and _exit functions but the register and unregister
8e286f5a2156f71dd304ce9ad1cd6b07231aaae6	i2c omap1 set i2c unit feature implementation flags in platform data most of the omap1 implementation flags are set statically with the exception that omap7xx has its data bus wired up differently
32544f060326bffa60dade49ce4595652df4d3ab	disable logdeferredinmcastat for smca systems disable deferred error logging in additionally for smca systems as this information will retrieved from on those systems simplify drop smca_mcax_en_off define too link
623b51fc8642fd3c795fa9903be3adaa537ad9c5	mmc cd-gpio pass irqf_oneshot to request_threaded_irq fix a boot regression on mackerel boards with sh_mobile_sdhi in existing kernels causing genirq threaded irq requested with and for irq xxx caused by genirq reject bogus threaded irq requests this is backported from guennadis patch mmc extend and rename cd-gpio helpers to handle more slot gpio functions
ab19479aa1b9708110bc90ba5b6c03b013feaa46	serial provide default slave configuration parameters some slave channel parameters will be always the same for example direction for the rx channel will always be dma_dev_to_mem and dma_mem_to_dev for tx channel
2f6bfe116e691eacef1aa41e4986200b20d67a0a	return in fence_wait_next v2 we should signal the caller that we havent waited at all v2 only change fence_wait_next not fence_wait_last
28ed53f2227a98fd5af78dfcea28170eadfc991f	arm l2c imx remove direct write to power control register now that we handle this in core code we dont need platforms enabling the low power modes directly
b86d1bd8d1a0f67f12b62e5ee724514f19dc6bf8	mei drop nfc leftovers from the mei driver we left few function prototypes in the header file after moving nfc logic to bus
52e51f16407b7b34e26affb500a21e250d9fce0b	treat missing secureboot variable as secure boot disabled the newly refactored code that infers the firmwares secure boot state prints the following error when the efi variable secureboot does not exist efi stub error could not determine uefi secure boot status however this variable is only guaranteed to be defined on a system that is secure boot capable to begin with and so it is not an error if it is missing so report secure boot as being disabled in this case without printing any error messages link
facc0a6bd494ce21e31b34fc355ecf702518272b	define indefinite length marker constant define a constant to hold the marker value seen in an indefinite-length element
251afd69e3328653bae4a8ca09700971ca4000c5	fix invalid pav assignment after for a valid pav assignment the dasd driver needs to notice possibly changed configuration data thus the failing of read configuration data should also fail the device restore to prevent invalid pav assignment the failed device may get restored after additional paths get available later on if the restore fails after the device was added to the lcu alias handling it needs to be removed from the alias handling before exiting the restore function
f0e07d7658a81bc185b8ba58f062c16b79ac0e2b	media it913x changed firmware loader for chip version __number__ types on thu at __number__ malcolm priestley wrote __float__ it913x chip chip __float__ it913x dual tuner __float__ dvb-usb found a ite __number__ generic in cold state will try to load a firmware __float__ dvb-usb downloading firmware from file __float__ it913x frm starting firmware download __float__ it913x frm firmware download failed __address__ __float__ it913x chip chip __float__ it913x dev it913x error __float__ usbcore registered new interface driver it913x no frontend is generated anyway looks like the the firmware is not at all compatible with your device have you applied the patch cleanly to the latest these appear to be new version of the __number__ a supplier is sending me one of these devices as a last resort see if the device works with you will have force to use this firmware dvb-usb-it913x here is a modified firmware loader for version __number__ types the firmware must be as in original it9135 dd
c89cadd50b0117477935404e0054a35251cfa654	look for adjusted_mode in the sagv check for interlaced we want to look at the mode that were actually going to set all the other display checks for interlaced flags also look at adjusted_mode
8d0b5e15df78c56bd9ac34cfba80d644a3240511	staging comedi pcl818 define the status register bits define the bits in the status register and remove the magic values writing any value to the status register clears any pending interrupt for aesthetics rename the status register and remove the clrint register
cbed0ca137ef442c545602a09030bbb35d8db013	bluetooth refactor hci_dev_open to a separate hci_dev_do_open function the requirements of an external call to hci_dev_open from are different to that from within in the former case we want to flush any pending work in whereas in the latter we dont since there we are already calling from within the workqueue itself this patch does the necessary refactoring to a separate hci_dev_do_open function analogous to hci_dev_do_close but does not yet introduce the synchronizations relating to the workqueue usage
d606b356cd07ffa3daea6dfcbf50fc2cbf4ba9a3	usb gadget mv_udc_core remove unnecessary initializations udc-core now sets dma-related and parent fields for us we dont need to do it ourselves
60438d9a1ef4176d79739efadee122afe92904b8	close file only if it is open the logic on the test for a valid fd to close is incorrect this was just a mistake and was pointed out by colin ian king link
6602caf149cc7698fc94160803c598ae708d686c	btrfs use gfp_kernel in qgroup relations are from ioctl we hold the high level qgroup lock no deadlocks or recursion from the allocation possible here
622494a3560b13e05c9f2049bfab8e7fb12c67a2	drm adjust setting order patch derived from one from yakir yang yakir yang says for designerware hdmi the following write sequence is recommended __number__ aud_n3 set bit ncts_atomic_write if desired __number__ aud_cts3 set cts_manual and cts value if __number__ aud_cts2 required in cts_manual __number__ aud_cts1 required in cts_manual __number__ aud_n3 bit ncts_atomic_write with same value as in step __number__ __number__ aud_n2 __number__ aud_n1 however avoid the ncts_atomic_write_bit and cts_manual settings in this patch both of which are marked reserved in the imx6 documentation all imx6 code in the wild seems to want cts_manual cleared having requested clarification from fsl it appears that neither of these bits are implemented in their version of the ip
f9f983821691fde4539c18e43634d5f9cfa8c011	staging comedi cb_pcidas use comedi_async scans_done to detect ai eoa remove the private data member count and use the comedi_async scans_done member to detect the analog input end-of-acquisition use the comedi_nsamples_left helper to get the number of samples to actually add to the async buffer
2554c72edb81c97ae5307613dd0aee1ef8dd13ca	fs proc delete inode time initializations in proc_alloc_inode proc uses new_inode_pseudo to allocate a new inode this in turn calls the proc_inode_alloc callback but at this point inode is still not initialized with the super_block pointer which only happens just before alloc_inode returns after the call to inode_init_always also the inode times are initialized again after the call to new_inode_pseudo in proc_inode_alloc the assignemet in proc_alloc_inode is redundant and also doesnt work after the current_time api is changed to take struct instead of struct this bug was reported after current_time was used to assign times in proc_alloc_inode
15807780684646949ba9e8f6f56cc3542b04c1ae	drm mali-dp refactor plane initialisation as we add more features it makes sense to skip all the features not supported by the smart layer together instead of checking each one individually achieve this by refactoring the plane init loop re-factor code after upstream changed rotation property to be per-plane
f73e1ffa27434772f57a9a7daaa508d06c56fddf	usb remove dbg usage dbg is a usb-serial specific macro this patch converts the driver to use dev_dbg instead to tie into the dynamic debug infrastructure
ff92cfe7cbc05c6c62f5b06c7d9090f4c853cd51	acpi video allow forcing native backlight on non win8 machines the native backlight behavior so not registering both the acpi-video and the vendor backlight driver can be useful on some non win8 machines too so change the behavior of the or __number__ kernel cmdline option to be if user has set or __number__ use that no matter if it is a win8 system or not also we will put some known systems into the dmi table to make them either use native backlight interface or not and the use_native_backlight_dmi is used to reflect that
e9dd7ed2a365b021cdbb35b5cad62f6ab6aeb5d2	arm mach-shmobile ap4evb reserve dma memory for the frame buffer ap4evb board needs the same fix as arm mach-shmobile mackerel reserve dma memory for the frame buffer
3beb61dbfcf188399cbc36ce1eeb8b2ba724de38	spi rspi round up division to avoid slave overclocking the calculation of the bit rate divider used a standard c division which rounds down the quotient this may lead to a higher bitrate than requested round up to avoid this on koelsch the spi flash configured for __number__ mhz was driven at __float__ mhz after this patch its driven at a safe __float__ mhz
90973498d4f1fcb054d9221b247bff91b0f30808	staging comedi rtd520 allow attaching without interrupt support interrupts ares only required for the ai subdevice command support allow the driver to attach to the board even if request_irq fails only hook up the command support if the interrupt is available
9e3ea19e35635ecd8373fc04f5dfb072be5f6d2c	replace uninitialized early_event_mask_sccb variable with sccb_early commit consolidate early sclp init calls to sclp_early_detect replaced the sclp_event_mask_early with sclp_set_event_mask the early_event_mask_sccb variable is no longer initialized but is still used in sclp_has_linemode and sclp_has_vt220 replace early_event_mask_sccb with the sccb_early variable in both functions
d0fc0a20b5b7babe0fe1552204bd52505a4f93dd	usb musb core move babble recovery inside babble check there was already a proper place where we were checking for babble interrupts move babble recovery there
e4cb3ff9311e0817e65cda7bc53898348aab7527	rtl8723ae fix build break from mac80211 support rx_flag_mactime_end cc in function error undeclared first use in this function note each undeclared identifier is reported only once for each function it appears in make3 error __number__
dc9e51534b70e5c4a99235e940dc6f0f466fe175	af_packet virtio __float__ stubs this merely fixes sparse warnings without actually adding support for the new apis still working out the best way to enable the new functionality
361c32d39087e7caa99e629c0d7fb00643cb2190	radeon fix vce ib test on big-endian systems this patch makes the vce ib test pass on big-endian systems it converts to little-endian the contents of the vce message
8473e5bb5c45aaa169c62ac6393e0bcd9c3c8002	staging rts5208 parenthesis alignment fix alignment to match open parenthesis
3a3c1115ce55f02e6185338808a4b7959b46e334	hp-wmi remove sparse_keymap_free calls as sparse_keymap_setup now uses a managed memory allocation for the keymap copy it creates the latter is freed automatically remove all calls to sparse_keymap_free
01584892dbf915a3921c5fc2607363e07023ef5c	staging hv mousevsc change the allocation flags to reflect interrupt context change the allocation flags to reflect interrupt context
4b7698cb95638693e3d9a2fc01a2bdbd8710ff81	i40e prevent link flow control settings when pfc is enabled when pfc is enabled we should not proceed with setting the link flow control parameters also always report the link flow settings as off when pfc is enabled change-id ib09ec58afdf0b2e587ac9d8851a5c80ad58206c4
bec4e68e6a45cc502901743fcfacaa9c076dc6d5	ixgbe remember to write ixfi changes after modifying this patch corrects a bug in ixgbe_setup_ixfi_x550em where we were reading and modifying ixgbe_krm_link_ctrl_1 but forgot to write the results back
c58cf4f1082d81c42be89e9c6eeca6466954a70c	drop polled waits from i915_wait_request the only time irq_get should fail is during unload or suspend both of these points should try to quiesce the gpu before disabling interrupts and so the atomic polling should never occur this was recommended by chris wilson as a way of reducing added complexity to the polled wait which i introduced in an rfc patch its only there as a fudge for waiting after irqs after uninstalled during we arent actually meant to hit it so maybe we should just kill the code there and fix the breakage v2 return instead of when irq_get fails
b31e51360e88f8f9831a153cf72d1aced952dffb	reject invalid-pad for context-destroy and ioctls unknown parameters especially structure padding are expected to invoke rejection with v2 similar issue exists for context-create testcase testcase bugzilla bugzilla link
05930b5ec1d3b2a5c76e1959b54cae15587009c7	remove hardcoded clock setting from xgmac_mdio there is no need to set the clock speed in which will be performed unnecessarily for each mdio access init it during probe is enough also the hardcoded clock value is not a proper way for all socs
47d4ab91e4472723f181075c81627374ca86816c	macvlan resolve enoent errors on creation after the commit below attempting to create macvlan devices was resulting in enoent errors ip link add link p3p2 type macvlan rtnetlink answers invalid argument this happens because netdev_upper_dev_link is called before register_netdevice in the macvlan code through a call chain this results in a call to __netdev_adjacent_dev_insert and finally a sysfs_create_link this requires the kobject of the macvlan to be registered which is done in register_netdevice if there is no kobject which is the case here the enoent error is seen on the command line to resolve this move the netdev_upper_dev_link call below the register_netdevice call this aligns with vlan driver flow regression introduced here commit author veaceslav falico redhat.com date wed sep __number__ __number__ net create sysfs symlinks for neighbour devices
7b947d6116d6408afe7ffaa176e634c715cef9b9	staging comedi quatech_daqp_cs remove pr_fmt there are not pr_level uses in this file remove the pr_fmt define
cfbb2b5b91e2f89cbd3a2f90bf807192a227355d	bluetooth add le features to debugfs if available for le capable controllers at the special le features page to the debugfs list with all the other features pages
30263b4052c6bf337641e24b64eaa87fe57adf8d	edac mv64x60_edac fix an error code in probe if edac_mc_add_mc fails then we should preserve the error code but instead the current code returns success link
8e3fba55d379bb67732c878988cf9859bfea2812	greybus loopback add asynchronous backoff a specific request from the firmware people is the ability to back-off from sending more asynchronous operations once a specific number of operations are in-flight this patch adds that ability with a new sysfs parameter outstanding_operations_max which controls the maximum number of operations that can be at any time when outstanding_operations_max contains a non-zero value and asynchronous operations are being used we will back-off until the completion counter is outstanding_operations_max tested in both synchronous and asynchronous mode and with gb_loopback_connection_exit interrupting in-flight operations
54cad2fce71f3ed2995bfc6d17d4ea5c898f20b1	cpufreq imx6q fix handling eprobe_defer from regulator if there are any errors in getting the cpu0 regulators the driver returns in case the regulators are not yet available the devm_regulator_get calls will return so that the driver can be probed later if we return the driver will fail its initialization and will not try to probe again when the regulators become available return the actual error received from regulator_get in probe print a differentiated message in case we need to probe the device later and in case we actually failed also add a message to inform when the driver has been successfully registered
c84a5d16711619621f368e84a179790df3377c87	perf hists remove parent filter check in dso filter function the option sets hist_filter__parent bit and its only set when a hist entry was created dso filters dont change this so no need to have the check in hists__filter_by_dso imho link
c6b7b9f290c0987194b966d5ea1383e10e1a01b1	mips jz4740 remove unnecessary null test before debugfs_remove fix checkpatch warning warning debugfs_removenull is safe this check is probably not required patchwork
2b77a2918c5d7b0b6bc2f8b35ddc299cf9bfe401	drm bridge move hpd detect to connector detect function this change just make a little clean to make code more like drm core expect move hdp detect code from and place them into note gustavo padovan try to remove the controller and phy power on function in bind time at bellow commit do not start enabling dp at bind phase but for now the connector status dont hardcode to connected need to operate dp phy in function so we need to revert parts if gustavo padovans changes add phy poweron function in bind time
4482a44f6a3221cd0076eb6af65672a7e198d8da	smack file receive audit correction eric paris politely points out inside smack_file_receive it seems like you are initting the audit field with lsm_audit_data_task and then use smk_ad_setfield_u_fs_path seems like lsm_audit_data_path would make more sense and depending on how its used fix a he is correct this puts things in order targeted for
c5b5539506f86469dca08310657ca93bbb6c00a5	rcu remove dead code from force_qs_rnp because force_qs_rnp is invoked only from the force-quiescent-state code which runs only in the context of the grace-period kthread a grace period must always be in progress throughout force_qs_rnps execution this commit therefore removes the rcu_gp_in_progress check and the associated dead code
ecdd6bed292fda02a3e3997307ac228edcab0b22	crypto skcipher blkcipher and ablkcipher should it be static fixes the following sparse warnings warning symbol crypto_init_skcipher_ops_blkcipher was not declared should it be warning symbol crypto_init_skcipher_ops_ablkcipher was not declared should it be
25ea9f2bf5f76082da919f2a91ea8d920932c1da	ntb ntb_hw_intel init peer_addr in struct intel_ntb_dev the peer_addr member of intel_ntb_dev is not set therefore when acquiring ntb_peer_db and ntb_peer_spad we only get the offset rather than the actual physical address adding fix to correct that
95a045f63d9868ee189fe24ee61689df5a133d5b	mm memcontrol consolidate memory controller initialization the initialization code for the per-cpu charge stock and the soft limit tree is compact enough to inline it into mem_cgroup_init
2d5d23b96a4a660d0d04455150570c6257d4ce25	i2c uniphier error out if bus speed is zero there is code to divide by bus_speed some lines below to eliminate the possibility of division by zero bail out if clock-frequency is specified as zero
bba7f40a029c1e2966146e3a021b3deaf5639904	lightnvm warn if irqs are disabled in lock laddr add a warning if irqs are disabled when locking a new address in rrpc the typical path to a new request does not disable irqs but this is not guaranteed in the future
64592d0c308620accd5eaff4d8daf02bb1b9a1c7	media az6027 get rid of warning no previous prototype warning no previous prototype for az6027_identify_state warning no previous prototype for az6027_usb_in_op
ba48c0c92704c68065ffb07661e4f99c800aeca2	be2net remove variants fix be_cmd_get_profile_cmd to use be_cmd_notify_wait routine which uses mbox if mccq has not been created doing this reduces code duplication we dont need the variants anymore
238268503f306cdc435eff2181e38c08ce412ed5	bnx2x align define usage to satisfy static checkers static checkers complained that the e1h_func_max define is used incorrectly in bnx2x_pretend_func the complaint was justified although its not a real bug as the first part of the conditional protects us in this case a real bug would happen if a vf tried to use the pretend func but there are no vfs in e1h chips
2124604b09b1f405d438815d797530c43269cc58	convert to encoder crt is the first output which can be cloned hence we cannot yet move the dpms handling over to this requires some more smarts in intel_crtc_dpms first to set the display pipe status depening upon of all connected encoders because that will happen in a separate step dont touch the dpms functions yet v2 be careful about clearing the _disable flags for intermediate dpms modes otherwise we might clobber the crt state when another cloned connector gets enabled
73465f1c08258637dc8c49c2c8d1a1233d9861c7	support sync points created from dma-fences debug output assumes all sync points are built on top of android sync points and when we start creating them from dma-fences will null ptr deref unless taught about this v4 corrected patch ownership
192afe5e16054f43113803d6751f567ef2e467ae	mfd cros ec i2c use consistent function names rename to for consistency
b4cd3d6a77b3f8acfd5b8ae9ea9dc43f831f0df9	rtc rtc-s35390a use functions use functions to make cleanup paths simpler
1354379b13f190ae5da21c26836a16ba56566ab3	mptsas fix checks for dma mapping errors mptsas_smp_handler checks for dma mapping errors by comparison returned address with zero while pci_dma_mapping_error should be used found by linux driver verification project
3feafeed16f92b96b7b67a3e30882c62c859f4bb	net bcmgenet adjust the call to alloc_etherdev_mqs in preparation for supporting multiple rx queues adjust the call to alloc_etherdev_mqs to allow max genet_max_mq_cnt __number__ rx queues the actual number of rx queues in use is correctly adjusted with __number__
2779b7e51497b5d0855dc7d21d793998acd2ad5f	staging comedi usbdux remove impossible if check the comedi core can only call this subdevice function is the private data was successfully allocated during the remove the unnecessary check
4830aec8267e2bf0c05b1d59e03ba32052c7f00e	staging unisys include fix formatting in an effort to create a more uniform coding style within the unisys s-par driver set this patch adjusts the formatting of all directives within this source file to match the following template and thereby eliminate irregular usage of whitespace the amount of whitespace used between the and the is dependent on what is needed to make the surrounding directives as uniform as possible
a373ebcb5a4cc0c7a99141bcf7942653facca330	rtl8180 add isr for rtl8187se rtl8187se has more queues and different isr flags this patch adds a separated isr handler for rtl8187se
dea31f52337c18f19eadfbbccb0c477942dad495	btrfs wait on async pages when shrinking delalloc mitch reported a problem where you could get an enospc error when untarring a kernel git tree onto a file system with this is because compression is a huge pain it will return from without having actually created any ordered extents to get around this we check to see if the async submit counter is up and if it is wait until it drops to __number__ before doing our normal ordered wait dance with this patch i can now untar a kernel git tree onto a file system without getting enospc errors thanks
bd3a518948a9b5fa869d096cd9bc062e0320449f	squashfs remove redundant length initialisation in squashfs_lookup
577c50aade0f34926e4a47f61629739e6da91af6	bpf make helper function protos static they are only used here so theres no reason they should not be static only the vlan protos are used in the test_bpf suite
7fc80964e80bcf93cff0f7ba2aa8095d48f940d6	wilc1000 fixed initialization of global boolean globals are initialized to zero or null by gcc no need to explicitly initialize them
b4c449b1b8030fbc1635b683186c7454018dcb63	rt2800 do not overwrite wpdma_glo_cfg_wp_dma_burst_size we already initlized wpdma_glo_cfg_wp_dma_burst_size to __number__ on rt2800_init_registers for usb devices for pci devices we will use hw default setting which is __number__ so patch does not change behaviour on pci devices
8341544c9d95610f86b560333c7b22dd1096ca4f	usb-musb move to dma_transfer_direction fixup usage of dma direction by introducing dma_transfer_direction this patch moves driver to use new enum
00769dbe3982c76dd68dac1d3f54328fa935bd21	asoc wm8991 dont use range container for tlvs with one entry for tlvs with only a single entry it is not necessary to use a range container use declare_tlv_db_linear directly instead of a combination of tlv_db_range_head and tlv_db_linear_item
0b65e6c7e22c93139b2b4efdd7ba6bd7bfa27fa7	asoc wm8400 dont use range container for tlv with one entry for tlvs with only a single entry it is not necessary to use a range container use declare_tlv_db_scale directly instead of a combination of tlv_db_range_head and tlv_db_scale_item
bb29ea142d0e990b6c54d18860b7f7d4a5a5a337	use dev_ printks in fixed below checkpatch warnings warning prefer netdev_errnetdev then dev_errdev then to printkkern_err warning prefer netdev_infonetdev then dev_infodev then to printkkern_info warning prefer netdev_noticenetdev then dev_noticedev then to printkkern_notice
5efe58c44312a7f8a1f3ec77c2b88f6d22b74880	asoc rt298 remove meanless pr_info this line doesnt include any information so remove it
4809b96ebb301a8e6c9b61665bef70191fedd2dc	asoc rt5645 move settings from probe to reg_default struct the patch moves the private register settings from probe to reg_default struct
3ac18232946aacf0a9807c3143f8449ed4aa68f4	i915 intel_set_mode reduce stack allocation from __number__ bytes to __number__ pointers smatch warning intel_set_mode warn function puts __number__ bytes on stack refactor so that saved_mode and saved_hwmode are dynamically allocated as opposed to being automatic variables __number__ bytes seems like it could run the potential for blowing the kernel stack
e4f35c1339f0cfcf38d3f63dd6fea2b070399263	acpi video mark acpi_video_get_levels inline a recent patch added a stub function for acpi_video_get_levels when config_acpi_video is disabled however this is marked as static and causes a warning about an unused function whereever the header gets included in file included from error acpi_video_get_levels defined but not used this makes the declaration static inline which gets rid of the warning
d4aad7ff04dfd00f2a69356a48054d6be84dda31	cfq-iosched fold cfq_find_alloc_queue into cfq_get_queue cfq_find_alloc_queue checks whether a queue actually needs to be allocated which is unnecessary as its sole caller cfq_get_queue only calls it if so also the oom queue fallback logic is scattered between cfq_get_queue and cfq_find_alloc_queue there really isnt much going on in the latter and things can be made simpler by folding it into cfq_get_queue this patch collapses cfq_find_alloc_queue into cfq_get_queue the change is fairly straight-forward with one exception async_cfqq is now initialized to null and the test in the last if conditional is replaced with async_cfqq test this is because gcc gets confused for some reason and warns that async_cfqq may be used uninitialized otherwise oh well the code isnt necessarily worse this way this patch doesnt cause any functional difference v2 updated to reflect gfp_atomic gpf_nowait
ddd621fbba35178643a39559c9688a373285bbc0	alsa hda display audio call sync_audio_rate callback for display audio call the sync_audio_rate callback function to do the synchronization between gfx driver and audio driver
9fa9379dcb52a9172c0ee520d8afe7a3dc6288b4	net mvneta use default napi weight instead of a custom one this driver has no need for a custom napi weigth use the default one which has the same value
91951f980e521d8f7e92283735b99fb9f4b05d93	dont overrun pcpu_masks array commit use gic_vpes instead of nr_cpus commit clear percpu_masks correctly when mapping both introduce code which accesses gic_vpes entries in the pcpu_masks array however this array has length nr_cpus if nr_cpus is less than gic_vpes ie the kernel supports use of less cpus than are present in the system then we overrun the array clobber some other data generally die pretty promptly most notably this affects uniprocessor kernels running on any multicore or multithreaded malta with a gic ie the vast majority of real malta boards fix this by only accessing up to mingic_vpes nr_cpus entries in the pcpu_masks array preventing the array overrun link
5d65cbfbc81d66b71f853488f53373352f06e44e	rtc rtc-ep93xx use devm_rtc_device_register devm_rtc_device_register is device managed and makes cleanup paths simpler
c7e5a726d5fbf453c49fc8326a6580402643c900	media gspca fix underflow in vidioc_s_parm n is a user controlled integer the code here doesnt handle the case where n is negative and this causes a static checker warning vidioc_s_parm warn no lower bound on n is unsigned so make n unsigned too fixing this
efa3ca414be9b930774b5c1a3190f735596f5115	mfd max77693 map charger device to its own of_node add a of_compatible to the mfd_cell so the mfd child device the charger will have its own of_node set this will be used by the max77693 charger driver in next patches to obtain battery configuration from dts
17f9b896b06d314da890174584278dea8da7e0ce	fix potential memory leak coverity points out that we do not free in one case the pr_backup and sure enough we forgot found by coverity cid __number__
935a521066113e16c15b842852ed681bbbdfbc63	regulator add regulator_force_disable definition for regulator_force_disable was omitted in for case
43e41adc9e8c36545888d78fed2ef8d102a938dc	perf record add ability to sample call branches this patch add a new branch type sampling filter to perf record it is named call and maps to perf_sample_branch_call it samples direct call branches only unlike any_call which includes indirect calls as well perf record call cycles the man page is updated accordingly link
232e8f703b96968cd4116d20597068f15aca3e6e	drm wire up proper acquire ctx for plane functions this is just prep work to get an acquire ctx into every place where we call or v2 keep the hidden acquire_ctx pointers valid while transitioning
edead9b1f9fa1e28e493ccaa831d0ac7aa0de74b	staging iio documentation simplify error handling this also has the nice effect of removing of a temporary variable from stack and fixes the following warning warning missing blank line after declarations
0bdd2b620794f4f8bddac620b774d7fbf879dcbc	staging comedi c6xdigio fixed missing in printk fixed missing in printk statements
99d9996c5c3b47c14c8717c7dd4692a25b83b3f7	input alps report __number__ touches when weve __number__ fingers if we detect more then __number__ fingers report __number__ touches rather then only reporting the upper left corner of the bounding box
70830b4182ddbb6f7f29d632e0c6cc5405a8cd16	mmc sh_mmcif move mmcif_of_match to upside
a2a5b3235d0dce0feaadf4e76727adea1caa6869	e1000e fix checkpatch warning from minmax test warning min should probably be min_tunsigned int __number__
e40e8375c0eb546b66c5e66f5e10b68ec46f7b95	staging comedi __number__ use pointer to instead of accessing the directly as an array use a pointer this method is more common in the comedi subsystem
79940cf8759558d55b597e27353f6521516aa7ac	greybus es1 fix dma-buffer on stack a stack-allocated buffer is not generally dma-able and must not be used for usb control transfers note that the memset and extra buffer byte were redundant as no more than the bytes actually transferred was ever added to the fifo
fdf73c00c8872f6f59730955d54b2cdc963e2485	greybus camera add wrapper for sync operation with flags the greybus operation core synchronous operation call doesnt support operation flags create a new synchronous operation wrapper with flags and modify the capabilities operation implementation to use it the code could be later moved to the greybus core if other drivers have a similar need
90f8b4643023b23061a15229c0c0b8ee747438a8	staging lustre linux-crypto-adler drop wrapper function remove the function __adler32 and replace its calls with the function it wrapped
c420815d12b744ad8cf9312af13af794bad48216	i40e change rx hang message into a warn_once use warn_once in order to highlight the issue but dont display a warning every time the user should be able to see the ethtool counter we created if necessary to see how often it is occurring change-id i40c4ea159819b64a7d33b7f5716749089791533a
6aa07d9e6329c93dfa5f6ff4fce8602f2a33b891	media cx23885 add two additional defines to simplify vbi register bitmap handling
e4aa5288ff07766d101751de9a8420d666c61735	kvm x86 fix constant value of the spec says those controls are at bit position __number__ makes __number__ as value the impact of this mistake is effectively zero as we only use them to ensure that these features are set at position __number__ or previously __number__ in which is and will be always true according to the spec
75836b8daefdde84f8b5dde1be5b67d858139df3	ipw2x00 fix a typo in wiphy struct initilization fix comment as well
b6085a865762236bb84934161273cdac6dd11c2d	x86 kaslr export offset in vmcoreinfo elf notes include kaslr offset in vmcoreinfo elf notes to assist in debugging hpa pushing this for to avoid having a kernel version with kaslr where we cant debug output link
49af54ff0fc7abb6457caed982ddfcfda487e3f7	misc atmel-ssc prepare clock only when request prepare ssc clock only when request ssc channel the clock will be enabled when initialize the ssc
b7f69c555ca430129b6cde81e9f0927531420c5c	kvm minor memory slot optimization if a slot is removed or moved in the guest physical address space we first allocate and install a new slot array with the invalidated entry the old array is then freed we then proceed to allocate yet another slot array to install the permanent replacement re-use the original array when this occurs and avoid the extra
1e4b545cdd93318379c6b1fb0a99536fa3260f53	regulator core return err value for regulator_get if there is no dt binding commit regulator core dont defer probe if theres no dt binding for a supply attempted to differentiate between regulator_get with an actual dt binding for the supply and when there is none to avoid unnecessary deferal however ret value supplied by regulator_dev_lookup is being ignored by regulator_get so exit with the appropriate return value
240ab508aa9fb7a294b0ecb563b19ead000b2463	media patch dont reset the delivery system on dtv_clear as a dvbv3 application may be relying on the delivery system dont reset it at dtv_clear for dvbv5 applications the delivery system should be set anyway
889c9e04f14253e9267bf72aafc298c81468c508	mmc wmt-sdmmc fix settting bm_eightbit_mode bit in wmt_mci_set_ios for mmc_bus_width_8 case current code missed setting bm_eightbit_mode bit also has a small refactor to make the code looks better in readability so the bit settings witch below logic sdmmc_busmode register set eightbit_mode bit for __number__ bit mode set fourbit_mode bit for __number__ bit mode clear both eightbit_mode and fourbit_mode bits for __number__ bit mode sdmmc_extctrl register set ext_eightbit bit for __number__ bit mode clear ext_eightbit bit for bit mode add define for ext_eightbit to avoid using magic number bm_onebit_mask is no longer used thus remove it this patch is untested due to lack of platform with hardware however since the code is there its good to make the code match the document
143d36a33b4d59a56bb8e913a17a105578fd3237	release the correct domain on error the msi_domain variable is null here so it leads to a null dereference it looks like we actually intended to free middle_domain link
b1a7c4f2b1ad0556f12c2a665277ea1320cd76ff	usb gadget lpc32xx delete __init marker for probe the probe function may be probed deferal and called after section has freed
ff3206b2450499203532af2505a7f6f8413e92c0	mtd nand onfi need to be probed in __number__ bits mode nand_cmd_readid want an address that it is not scaled on x16 device it is always nand_cmd_param want __number__ bits data
a116eaf1be4ed4f91cc85d17b2f000f08d85c2d9	set array of const as const some array of const char are not set as const this patch fix that
c58e0377d61e209600def7d4d9ae535ea94bc210	tomoyo remove the second argument of kunmap_atomic
8ba392d151c5875bf8e580634cc6837b2a029207	staging i4l move open brace to previous line fix checkpatch error open brace should be on previous line since only functions should have their opening brace on a new line
fd5c25614012ccad75ef505982af4d6c08d0df83	vme free dma resource allocation structure there is a memory leak in the function vme_dma_free the resource structure allocated in vme_dma_request needs to be freed in vme_dma_free
25a1c96cd22c949b50d6f0269c23e1c5cb55e5a5	allow disabling unmatched stream bypass borrow the disable_bypass parameter from the smmuv3 driver as a handy feature so that unmatched stream ids devices not attached to an iommu domain may be configured to fault rather than introduce unsightly inconsistency or repeat the existing unnecessary use of module_param_named fix that as well in passing
d3675e3a481d3320e214984a10577fe06518c5bf	usb s3c-hsotg do not disconnect gadget when receiving erlysusp intr dwc2 databook indicates if the core sets erlysusp bit an idle state has been detected on the usb for __number__ ms this situation can be occurred when waiting a request from user daemon so we should keep the connection between udc and gadget even though this interrupt is occurred
bb6acb289fbaac0e99eb552abdefc80a2186ef3f	xen-blkback move pending handles list from blkbk to pending_req moving grant ref handles from blkbk to pending_req will allow us to get rid of the shared blkbk structure
814d4f2e153dfb337ee894d1f23863e623add4ab	pinctrl sunxi search the description array by pin id avoid to use expensive string manipulation functions and search by pin id when possible
eb44552b98b414f00762ede69e5a8398bb50766f	mpt3sas issue_reset is uninitialized the issue_reset can be used uninitialized it should be set to false at the start also i cleaned up the types a little by using bool
6bc6204e3b7f4ac235e98e362714213369d6a012	scsi bfa fix possible null pointer dereference in lunmask patch fixes the possible null pointer dereference when we try to add or delete a rpwwn to the lunmask config which is not zoned to this port check if the fcs rport is not null before de-referencing it
25c72c786cb571cfdf39a31f9f64d143d8623a7a	goldfish fix kernel panic when using multiple adb connection when using multiple adb on __number__ bit kernel to transfer data the goldfish pipe interrupt will crash the kernel
0d0fecc5b5bfddb0e67bef985cdeda2eac7ad6d8	fix a memory leak in err path if kmemdup fails we need kfree first then return otherwise there is a memory leak
d4ac0633ad28580df12ed050993fa426d60c6429	tty serial omap remove probe error message this error message is not necessary the driver core code will print all probe error messages it also resolves some error codes to proper error messages for example will only be printed as an info message this patch removes the error message as the core prints the same information
ed425fc46b953876d11e40c1adb24cc42cfd0911	mmc davinci constify platform_device_id the platform_device_id is not modified by the driver and core uses it as const
8e1de26cd5db192b52819f5ee97bab308964f3ab	skd_main use to dump small buffers replace custom approach by specifier to dump small buffers in hex format unfortunately we cant use print_hex_dump_bytes here since tha gap is present though one familiar with the code may change this
e0f82bdf2dd04c08a167b5e9b47d65834ac84ba9	powerpc unexport csum_tcpudp_magic csum_tcpudp_magic is now an inline function so there is nothing to export
ab3680dd18f3dea341e32e5020ef16d54a4fb66f	btrfs qgroup fix possible leak in btrfs_add_qgroup_relation commit btrfs quota automatically update related qgroups or mark inconsistent flags when a qgroup relations introduced the allocation of a temporary ulist in function btrfs_add_qgroup_relation and added the corresponding cleanup to the out path however the allocation was introduced before the level check that directly returns fix the possible leakage of the ulist by moving the allocation after the input validation detected by coverity cid __number__
253c6daa343104c1278facd11cb5ecfc7554fb38	caif use pskb_put instead of reimplementing its functionality also remove the warning for fragmented packets skb_cow_data will linearize the buffer removing all fragments
188726ecb66f022e92ec110ca85c62a937184636	firewire core make address handler length __number__ bits the type of the length field of the fw_address_handler structure was size_t which restricted it to __number__ bits on architectures while making it u32 would match the userspace api all calculations on this field use __number__ bits anyway and the ability to use __number__ gb or larger address ranges is useful in the kernel
7def0f952eccdd0edb3c504f4dab35ee0d3aba1f	lib fix data race in rhashtable_rehash_one rhashtable_rehash_one uses complex logic to update field after init_rht_nulls_head and nulls_marker expansion __number__ base off __number__ this can be compiled along the lines of base off __number__ __number__ which will break concurrent readers nulls value recomputation is not needed here so just remove the complex logic the data race was found with kernelthreadsanitizer ktsan
2f52d07cb75d96fcbb5b9ab72938590fa9ffb19d	improve error handling in rdma_request most importantly do not free the recv context rpl_context after a successful post_recv but do free the send context c after a failed send
d27a71a286190d1e1dbd29002d594a4b1dd0300a	staging rtl8187se should be foo fix checkpatch error error should be foo
a7de9b867be0662e72db69fd40a4f1d2aa80ecc0	hid sony enable gasia third-party ps3 controllers without this my gasia psr gamepad would not send any events now everything works including the leds based on work by andrew haines and antonio ospite
580f010f1bd7ac0e83f77f4b3035e78417d3c2e2	ath9k dump base eeprom header debugfs file location
967628827f404b3063016c138ccc7b06c54350f8	vfio platform reset fix a warning message condition this loop ends with count set to and not zero so the warning message isnt printed when it should be ive fixed this by change the postop to a preop
a77b6ee90dfc3798bdcbdca7a9284d7e8c006af7	ahci_xgene fix the error print invalid resource for apm x-gene soc ahci sata host controller driver this patch fixes the error print invalid resource for the apm x-gene soc ahci sata host controller driver this print was due to the fact that the controller __number__ dont have a mux resource this didnt result in any errors but the print seems like meaningless
2f74f972d4cc7d83408ea0c32d424edcb44887bf	sunrpc prepare nfs for __number__ __number__ the kernel sunrpc code needs to handle seconds since epoch greater than __number__ this means functions that parse time as an int need to handle it as time_t __number__ the kernel changes must be accompanied by userspace changes in nfs-utils
3bb9068278ea524581237abadd41377a14717e7d	loop prevent information leak after failed read if read was not fully successful we have to fail whole bio to prevent information leak of old pages dd losetup __number__ truncate __number__ oops loop offset is now beyond i_size so read will silently fail so bios pages would not be cleared may which result in information leak hexdump
17bc14b767cf0692420c43dbe5310ae98a5a7836	revert sched update_cfs_shares at period edge this reverts commit f269ae0469fc882332bdfb5db15d3c1315fe2a10 it turns out it causes a very noticeable interactivity regression with config_sched_autogroup test-case make of the kernel in a terminal window while scrolling in a browser the autogrouping means that the two end up in separate cgroups and the browser should be smooth as silk despite the high load says paul turner it seems that the update-throttling on the wake-side is reducing the interactive tasks ability to preempt while i suspect the right longer term answer here is force these updates only in the cross-cgroup case this is less trivial for this release i believe the right answer is either going to be a revert or restore the updates on the enqueue-side
fef0ebdb229bedce888b63923e2a1ba4e6c6a84c	ext4 remove duplicate call to ext4_bread in ext4_init_new_dir this fixes a buffer cache leak when creating a directory introduced in commit a774f9c20
e5f1efb9ae71bbb79629d660dc19b51ce7b95439	iio kfifo set update_needed to false only if a buffer was allocated check whether the allocation of a new kfifo buffer failed or not before setting the update_needed flag to false this will make iio_request_update_kfifo try to allocate a new buffer the next time a buffer update is requested
c6ef7fd40eddad38a8825cbd6bb2ce8bdbba88f5	vfio-mdev fix non-standard ioctl return val causing i386 build fail what appears to be a copy and paste error from the line above gets the ioctl a ssize_t return value instead of the traditional int the associated sample code used long which meant it would compile for x86-64 but not i386 with the latter failing as follows cc m error initialization from incompatible pointer type mtty_ioctl note near initialization for cc1 some warnings being treated as errors since in this case vfio is working with struct file_operations as such long struct file unsigned int unsigned long long struct file unsigned int unsigned long so here we just standardize on long vs the normal int that user space typically sees and documents as per man ioctl and similar
60519af3fd0e75a97036075fc657f1ebe87e0f0d	media lirc_dev fix sparse warnings warning incorrect type in argument __number__ different address spaces warning incorrect type in argument __number__ different address spaces warning incorrect type in argument __number__ different address spaces warning incorrect type in argument __number__ different address spaces warning incorrect type in argument __number__ different address spaces warning incorrect type in argument __number__ different address spaces warning cast removes address space of expression warning incorrect type in argument __number__ different address spaces
a6f05b97d1ba87326bd96f3da9fef994830d6994	pm qos set since commit the name of this misc device is not initialized which leads to a funny device named being created and containing an entry with just a number but no name the latter leads to complaints by cryptsetup which caused me to investigate this matter
cb8d68ec16a511f8be7e1028fd8f869ef7c6a1a8	thp change deferred_split_count to return number of thp in queue ive got meaning of wrong it should return number of potentially freeable objects which is not necessary correlate with freeable memory returning __number__ per thp in queue is not reasonable never called with nr_to_scan __number__ in my setup lets return __number__ per thp and correct scan_object accordingly
502c6e0bcd95d45f734548e2fcf8a0de494a9095	f2fs simplify write_orphan_inodes for better readable simplify write_orphan_inodes for better readable because we hold the orphan_inode_mutex so its safe to use list_for_each_entry instead of list_for_each_safe
661fa95ddb9e4c9bf6b3ec575a92dd837ec72ace	brcmfmac fix escan timer causing oops in some rare circumstances the escan protection timer can expire before the setup completed due to long timeouts on ioctl this patch avoids this situation by setting the timer after the setup completed correctly
254f57a92987b6cde6004f58d6b847813dfb9e0e	arm omap5 hwmod add missing ocp2scp hwmod data add this hwmod data to allow usb3 to work in omap5 boards
5277f7a6c2f322f11e8deed48530296d70bc5d5f	ll_temac fix build
604042af7697314fffb16e266fd7d5ad488439cc	spi fsl-espi improve return value handling in fsl_espi_probe the return value of fsl_espi_probe currently struct spi_master is just used for checking whether an error occurred change the return value type to int and simplify the code
5fae054c2b5a7c10475d2e425dfea0c567c1c5dd	goldfish locking bugs in goldfish_pipe_read_write we recently messed up the error handling here we can return with the held or sometimes we unlock twice by mistake
073bf172619612bd4bfaa0f59e694b5d1b2f4c49	i810 delete useless variable delete a variable that is at most only assigned to a constant but never used otherwise a simplified version of the semantic patch that fixes this problem is as follows type t identifier i constant c i when i c
3dcb8043fb3e2a744841da9769230b3ebb56065a	media soc-camera increase the length of clk_name on soc_of_bind since in soc_of_bind it may use the of nodes full name as the clk_name and this full name may be longer than __number__ characters take at91 i2c sensor as an example length is __number__ bytes so this patch increase the clk_name array size to __number__ it seems big enough so far
d8c4386d16160fba617dbe2f65906e20e865519f	can sja1000_platform add module_alias this patch adds a module_alias for the platform bindings so that the module can be loaded automatically by udev
f2ba3ee08eb9af666c6f948ccbb866ae6d3c9107	tools headers sync we use those in in turn used in the perf bench mem benchmarks the changes in the following csets are not relevant for this usecase but lets sync it to silence the diff detector in the tools build system add paging detection link
f89d21b9c310d43ad8513a3fe345b7677ee7ead7	net ethernet ti cpsw extend limits for allow to set number of descs close to possible values in case of minimum limit its equal to number of channels to be able to set at least one desc per channel for maximum limit leave enough descs number for tx channels
75b82e23a4ea20a9e1a48695ff5e01761889dbb3	spi sh-msiof improve transfer error handling add a timeout when waiting for the transfer complete interrupt if sh_msiof_spi_stop fails theres no need to clear ier as the interrupt handler has already done that propagate transfer failures in sh_msiof_transfer_one
ebc9baed42e42f9b51cf61672b7afb72f068d523	tty separate release semantics of ldisc reference have usage semantics equivalent to only callers of tty_ldisc_put are performing the additional operations necessary for proper ldisc teardown and then only after ensuring no outstanding read lock remains thus tty_ldisc_unref should never be the last reference warn if it is conversely tty_ldisc_put should never be destructing if the use count __number__
337832b7919469db17d3ebf60e3875e6915cae75	staging skein fix sparse warnings related to shift operator fix warnings warning shift too big __number__ for type int warning shift too big type int warning too many warnings
1e9879f7a443d9bd06dd40544c1b91766008b880	staging comedi adl_pci9118 tidy up digital output subdevice init for aesthetics add some whitespace to the digital output subdevice init remove the sdf_ground and sdf_common subdev_flags these flags only apply to analog subdevices remove the len_chanlist init this subdevice member is only used with subdevices that support async commands
73b9bcd76d13716cc0e0ab053f8c1ae41f47636e	thermal cpu_cooling fix return value check in cpufreq_cooling_register in case of error the function thermal_cooling_device_register returns err_ptr and never returns null the null test in the return value check should be replaced with is_err
fb568d763f95d356087b447398382b76592ff915	clean up the ebb hash defines a little rather than using perf_event_config_ebb_shift everywhere add an event_ebb_shift like every other event and use that
f0bbc2b55f47f93286bb1b9ddbdb8ffed3572064	asoc sta32x set reg_cache_default to sta32x_regs
c5e6bd2ed3e81df443e4ae11e95ed71ff77bf9e5	perf tests fix software clock events test setting maps the test titled test software clock events have valid period values was setting maps directly make it use the proper function perf_evlist__set_maps especially now that it also propagates the maps link
78b07ac1e4c8acc9daf6b7f7b579300328673640	ibmvnic remove module author mailing address the original author left the project and so far has not responded to emails sent to the listed address
f1d9a530553eed9e598d1597a2a348f01810dd4a	perf use gtktreestore instead of gtkliststore the gtktreestore can save items in a tree-like way this is a preparation for supporting callgraphs in the hist browser link
369712e89404089fa559235bb1ee8fc40d976e6b	reduce duplicate conditions in i9xx_hpd_irq_handler move dp aux irq handling within the same branch instead of duplicating the conditions no functional changes
fc7d76e4c0dc8746f56dcd0a7d9b62ce5e759c04	mfd twl4030-power fix hang on reboot if sleep configuration was loaded earlier looks like we can still hit the issue of wrong load order of twl4030 configuration if we have a sleep configuration loaded and do a warm reset the device can hang while initializing the wakeup12 sequence we do have a warning message about wrong order of twl4030 configuration but in this case it does not help as the sleep configuration was loaded during the previous boot and the state of twl4030 is maintained throughout the warm reset fix the issue by clearing any existing sleep configuration before we load the warm reset configuration
c7d778fa74a88e7b5a09ba498d66bd67a7dc7df0	net arc fix module autoload for of platform driver this platform driver has a of device id table but the of module alias information is not created so module autoloading wont work
27d632d27c4f4f0e9201b38f4ae70bd3050de843	hide rtc_port macro from rtc-cmos rename rtc_port to atari_rtc_port as the rtc-cmos rtc driver uses the presence of this macro to enable support for the second nvram bank which atari doesnt have unable to handle kernel access at virtual address
bb8082f6913889418b69a54e57b4a39d7128a700	ppp build ifname using unit identifier for rtnl based devices userspace programs generally need to know the name of the ppp devices they create both ioctl and rtnl interfaces use the sheme to name them but although the suffix used by the ioctl interface can be known by userspace its the ppp unit identifier returned by the pppiocgunit ioctl the one used by the rtnl is only known by the kernel this patch brings more consistency between ioctl and rtnl based ppp devices by generating device names using the ppp unit identifer as suffix in both cases this way userspace can always infer the name of the devices they create
100a008331072e678ffcf2d903e48c633c2795fe	mwifiex correct tdls link delete failure message priority commit d8d2f19feb16 mwifiex silence tdls link delete failure for nonexistent link lowers the priority of error message when tdls link is already deleted but it had got increased by commit acebe8c10a6e mwifiex change dbg print func to mwifiex_dbg
7cac0a85992229a631d4e01934d2e1c042566189	remove unnecessary new_valid_dev check new_valid_dev always returns __number__ so the check is not needed remove it
4b0ff3dc5e3d86ada66afcaab46a766d326facd4	staging comedi amplc_pci230 replace state member with bitfields the state member of struct pci230_private is used with the atomic bit-op functions and has a couple of bits defined ai_cmd_started and ao_cmd_started spin-locks are used to protect the clearing of these bits and other stuff no special protection is used for setting these bits replace the state member with a couple of new single-bit bitfield members ai_cmd_started and ao_cmd_started to save some space
9abebb8a10ce93db45327bd3a4d06801e6db92f2	nfc delete null dereference the exit label performs which will fail when dev is null and which is not useful when dev is null so just exit the function immediately problem found using
cc72f6e227b8091e0b8297a6be266bedcb20a5aa	mac80211 uninitialized return val in __ieee80211_sta_handle_tspec_ac_params the return value should be initialized to false so that theres a valid return value when there are no sessions that need work to be done on them luckily the side effect of using the uninitialized value is an extra harmless driver call coverity cid __number__ extend commit message
08203f1fac4d2c3cfab43fd157c76127f48bc5b3	pci tegra stop setting pcibios_min_mem pcibios_min_mem only exists on arm so using it in prevents the driver from being used on other arches in __pci_assign_resource we clip the available area based on pcibios_min_mem on arm this is pcibios_min_mem with a default value of __number__ for tegra we discover the space available for pci resource allocation from the device tree and the lowest address that will ever be available is __number__ on tegra124 the tegra windows are always higher than the default pcibios_min_mem so the __pci_assign_resource has no effect so theres no need to adjust pcibios_min_mem here bhelgaas changelog
36283658234201f92fde544328d345517a6ffe4e	btrfs make count_inode_extrefs take btrfs_inode
8875408abd935a77b6e1cb11c21c438aa2e7ec75	sgi-xp nested calls to spin_lock_irqsave the code here has a nested spin_lock_irqsave its not needed since irqs are already disabled and it causes a problem because it means that irqs wont be enabled again at the end the second call to spin_lock_irqsave will overwrite the value of irq_flags and we cant restore the proper settings
e3dc17a53f9649d0a67ec69ec883e781fa9dd920	pci layerscape simplify platform_get_resource_byname failure checking devm_ioremap_resource validates the resource it receives so if we check for devm_ioremap_resource failure we need not check for failure of the preceding platform_get_resource
b8be0bdbd52d35aac30fb2d8c295f9a3000873f2	dsi use proper back-porch for non-sync video mode in video modes without sync pulses the horizontal back-porch needs to include the horizontal sync width
fdcc285b77a115f7207321ce1cf749f0ea6c0b92	staging wilc1000 rename result in handle_set_wfi_drv_handler this patch renames result to ret that is used to get return value from wilc_send_config_pkt some function are used as result others are used as ret it will be changed as ret in all function to match variable name
1730663cb7f368ecc2aea36fd8c533b5b0a91980	f2fs set raw_super default to null to avoid compile warning set raw_super default to null to avoid the possibly used uninitialized warning though we may never hit it in fact
9458f4ba7d355ee2e4a082514c60443697f344ee	do not warn_on in i915_vm_to_ppgtt according to chris use of i915_vm_to_ppgtt is visible in benchmark unless warn_on is removed so lets get rid of it
199ff14100095d52cd1b232cc0f3b12f348b5b07	pci iproc fix pcie reset logic the current reset logic does not always properly reset the device for example in the case when the perst_b signal is already de-asserted in the bootloader the current reset logic fails to trigger a proper assert de-assert reset sequence fix the issue by always triggering the proper reset sequence also explicitly select the desired reset source perst_b and reduce the wait time after the device comes out of reset from __number__ ms to __number__ ms based on recommendation from the asic team
1c7b9d0edf5ada916fd02e66355f79f2089ee095	leds triggers add invert to heartbeat this patch adds possibility to invert heartbeat blinking the inverted led is more time on then off its because it looks better when the heartbeat led is next to other led which is most time on the invert value is exported same way via sysfs in file invert like oneshot i get inspiration from this trigger
25c7ce7f7b511fc02b6eef95595af2cea80e2612	libata cleanup ata_scsi_qc_complete remove an incorrect comment and untangle an if statement in ata_scsi_qc_complete
ba3d0dda6d5facd6fe63a3276825bd2b9fa2990e	net xgene fix backward compatibility fix a bugfix for backward compatibility handling introduced undefined behavior for the case that of_parse_phandle does not return a valid entry as gcc reports in function xgene_enet_phy_connect error phy_dev may be used uninitialized in this function in function xgene_enet_mdio_config error phy_dev may be used uninitialized in this function we can work around this by removing the check for zero np as of_phy_connect will correctly handle a null argument so we fall back into the normal error handling case note that i had previously fixed another bug that resulted in the exact same warning but this is a different problem that was introduced after my original fix
6bd0f16e322b4572fe1e0ff3b0e78c800c2633b4	irqchip omap-intc minor improvement to omap_irq_pending we already hold the number of pending registers in omap_nr_pending lets use that instead
bda9cac1db8ab044e9edbfe5730283016b67d451	nfsd introduce helpers for generic resources init and shutdown nfsd have per-net resources and resources used globally lets move generic resources init and shutdown to separated functions since they are going to be allocated on first nfsd service start and destroyed after last nfsd service shutdown
9314a5813f62e85c8173adf7fd7e088af3b58942	alsa hda set the pin targets after deciding output config since fill_and_eval_dacs may be called repeatedly with different configurations setting pinctls at each time there isnt optimal we can set it better only once after deciding the output configuration in parse_output_paths
98fa5dd883aadbb0020b68d0f9367ba152dfe511	libceph provide data length when preparing message in prepare_message_data the length used to initialize the cursor is taken from the header of the message provided im working toward not using the header data length field to determine length in outbound messages and this is a step in that direction for inbound messages this will be set to be the actual number of bytes that are arriving which may be less than the total size of the data buffer available this resolves
2c07c1d7dadcc0025c56351be8e81d74e4feb5af	be2net dont set pport field when querying pvid in the get_hsw_config cmd the pport field must be set only while querying the switch mode when the pport field is set the interface_id field must be set to the port number otherwise it must be set to
dcdd1339a3cda33f216628142eea78f3d41b47fe	arm lpc32xx remove unused gpios remove spi0_cs mmc_cd and mmc_wp gpios as they moved to devicetree
7654b72417e10e294563496e25211200f9b8b6d3	btrfs fix space checking during fs resize fix out-of-space checking addressing a warning and potential resource leak when resizing the filesystem down while allocating blocks
63ecf0a9b55ada8c59ac10472c4468b46cf2e97a	remove pcmcia platform_device structure the existing pcmcia platform_device structure is not used and is not needed by the pending hx4700 support so lets remove it
efc6da4daf054b982c0a28e9fc3a1eaf6754bece	staging comedi comedi_parport rename parport_intr_insn for aesthetic reasons rename this function
8e1274a34cc68c0f362c1f3bf2bd27cdf3d51719	use dev_info instead of pr_info dev_info is preferred to pr_info
b328daf3b7130098b105c18bdae694ddaad5b6e3	tools add more bitmap functions i need the following functions for the radix tree bitmap_fill bitmap_empty bitmap_full copy the implementations from
0945574750f3040a2309d960a569215598a64672	pktgen simplify error handling in pgctrl_write the out label is just a relict from previous times as pgctrl_write had multiple error paths get rid of it and simply return right away on errors
0de4cc99c66d2a46e92cd201f7939121d9a1bb23	drm only do the cleanup in master_relase for another place gone where modern drivers could have hit to avoid too deeply nesting control flow rework it a bit v2 review from chris remove spurious newline fix like for the case
2d2422aebc037095f77551119f795449d29befed	xfs fix a use after free in xfs_end_io_direct_write there is a window in which the ioend that we call inode_dio_wake on in xfs_end_io_direct_write is already free fix this by storing the inode pointer in a local variable this is a fix for the regression introduced in by fs move inode_dio_done to the end_io handler
3f0aba4fc0ec789634c29a8265b90b8b0d1a4e29	amd64_edac correct erratum __number__ range basically we want to cover all models orochi and later link
c4d860a0d256663937b51468ea13de3c2cd2a09d	alsa bebob loosen up severity of checking continuity for bebob v3 quirk prismsound orpheus behringer ufx1604 and fca610 work with bebob v3 and theyre confirmed to transmit discontinuous packets in the beginning of streaming payload cip headers __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ this sample was got with behringer fca610 and ffado library this commit sets cip_empty_has_wrong_dbc and cip_skip_dbc_zero_check to ignore these discontinuities
2a068daf57424b98b3c9de8da8bbf47ca360a618	ubifs remove unnecessary assignment assigning a value of a variable to itself is not useful
db96bd25868c19d71c25cafefed7d0b00c4be641	clear the page directory using the dma
14d32383965243ea37f00656538d91a2ea3a719f	i8k drop driver version number and info message at startup the driver version number is long since obsolete so drop it also drop the info message at driver startup to reduce boot noise
24808e96792a860f3e83e2eb69c5190261716924	mark i915_hpd_poll_init_work as static local function with forgotten static declaration
cc2db7cb8de67cb172b90b72bf42c784b08959ad	staging rtl8723au use ether_addr_equal and in one case use is_zero_ether_addr
f5ef2372f608df4bb54b4fc7c9e43fb8bbef4795	usb phy msm remove hsusb prefix from regulator names prefix did not bring any useful information currently none of the msm platforms define these regulators so it is safe to rename them
d6a238d25014d0ff918410d73e2a6300bca5d1f1	dynamic_debug drop explicit checks convert if x checks into if x
7f703fae17d53adadaa9e71af174c51f2655e680	staging code style fix space before comma this commit fixes the following errors reported by error space prohibited before that error space prohibited before that error space prohibited before that error space prohibited before that this patch also adds missing spaces before and after sign in two places this file has some other style issues and they will be fixed with latter patches
85ae8926751db5e09b9a12ee44609ee9e74b7aad	rbd defer setting device id hold off setting the device id and formatting the device name in rbd_add until just before its needed
be91748fa6ca6909853c3dc630d65e45084962d7	fix refcount of thp head page in no-injection case hwpoison injection takes a refcount of target page and another refcount of head page of thp if the target page is the tail page of a thp however current code doesnt release the refcount of head page if the thp is not supported to be injected wrt hwpoison filter fix it by reducing the refcount of head page if the target page is the tail page of a thp and it is not supported to be injected
247fd50b5953d2b07832a07bd1d1c3b8e221fe9e	firewire ohci fix double free_irq a pci device can be removed while in its suspended state because the ohci driver freed the irq to suspend free_irq is called twice once from pci_remove and again from pci_suspend which issues the warning below __number__ rather than allocate the irq in the path move the allocation to consequently the irq is not reallocated upon pci_resume and thus is not freed upon pci_suspend __number__ warning reported by mark einon when suspending an msi ms-1727 gt740 laptop on ubuntu warning at hardware name ms-1727 trying to free already-free irq __number__ modules linked in ip6table_filter ip6_tables ebtable_nat ebtables pid __number__ comm tainted p o call trace __address__ __address__ __address__ __address__ __address__ __address__ firewire_ohci __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ acpiphp __address__ acpiphp __address__ acpiphp __address__ acpiphp __address__ __address__ __address__ __address__ acpiphp __address__ __address__ __address__ __address__ __address__ __address__
4683f9f8010523701d87eb56643a85bec947939f	staging comedi me4000 remove me4000_ao_range use range_bipolar10 which is exported by the comedi core instead of creating a local symbol for an identical range
0faf6a3bbae74ca08c2ecc09e5f6d350ad54c1ab	mei wake blocked write on link reset in case of link reset all blocked writes should be interrupted note that currently blocking write is used only through bus layer
9b4021befe59e53454d2fe0a4d22e269f1e843b1	omap4 hwmod data fix l3 interconnect data order and alignement change the position of the ocp_if structure to match the template remove unneeded comma at the end of address space flag field remove user_sdma since this ocp link is only from the l3_main_1 path that is accessible only from the mpu in that case and not the sdma
f46c7011b062726b798fa3326b5b0c2711ead2a0	sctp move rcu_read_lock from __sctp_lookup_association to sctp_lookup_association __sctp_lookup_association is only invoked by sctp_v4_err and sctp_rcv both which run on the rx bh and it has been protected by rcu_read_lock see ip_local_deliver_finish ipv6_rcv so we can move it to sctp_lookup_association only let sctp_lookup_association use rcu_read_lock
91691295527d3fd63f12079222df0fd8048acccb	brcm80211 smac always set channel specified by mac80211 in some situations brcmsmac is choosing a channel internally this makes it difficult at times to know what channel to use for enforcing regulatory constraints so instead always use the channel from the mac80211 configuration
d9dabc1a01656868d53a1d08309ca24d922b1376	nfs file unlock needs to be a metadata synchronisation point file unlock needs to update both data and metadata on the nfs server in order to act as a synchronisation point for other clients
36138c70e69c9272bd7e0be517f1ac7ad0c4f0df	rtc bq32k add of device id table the driver doesnt have a struct of_device_id table but supported devices are registered via device trees this is working on the assumption that a i2c device registered via of will always match a legacy i2c device id and that the modalias reported will always be of the form but this could change in the future so the correct approach is to have an of device id table if the devices are registered via of
ca105f4d9823f916a4718c4bc766fd14842056f2	mtd maps bcm963xx-flash clean up printk usage replace raw printks with their pr_xxx equivalent and unify broken up strings so they become grepable also replace the pfx definition with a pr_fmt
7e0f51cb445be8d3aee80e433ed8da4a33ad0157	add unlikely to __chk_range_not_ok failure paths this should improve code quality a bit it also shrinks the kernel text before text data bss dec filename __number__ __number__ __number__ __number__ vmlinux after text data bss dec filename __number__ __number__ __number__ __number__ vmlinux by __number__ bytes link
3de5e88485b22f30403045bd83d4815ae2207b19	workqueue clear pool_disassociated in rebind_workers a9ab775bcadf workqueue directly restore cpu affinity of workers from cpu_online moved pool locking into rebind_workers but left in workqueue_cpu_up_callback there is nothing necessarily wrong with it but there is no benefit either lets move it into rebind_workers and achieve the following benefits __number__ better readability pool_disassociated is cleared in rebind_workers as expected __number__ we can guarantee that when pool_disassociated is clear the running workers of the pool are on the local cpu tj minor description update
237f259ce293d95efe9ccd2bb36b7df25894eb50	crypto remove the second argument of kunmap_atomic
576e4385ff59f52ca0e9a6a953a55f1f76fc196b	clip bridge windows to fit in upstream windows every pci-pci bridge window should fit inside an upstream bridge window because orphaned address space is unreachable from the primary side of the upstream bridge if we inherit invalid bridge windows that overlap an upstream window from firmware clip them to fit and update the bridge accordingly bhelgaas changelog link
1961b7203ffaebe13fb463ffc5bc5da30bb7f8e3	media adv7842 composite sd-ram test clear timings before setting must clear timings before setting after test to recover
9dbc41d5d371cb10099c8182552f3915920e69b6	squashfs fix corruption check in get_dir_index_using_name patch squashfs sanity check information from disk from dan carpenter adds a missing check for corruption in the size field while reading the directory index from disk it however sets err to this value is not used later and so setting it is completely redundant so remove it errors in reading the index are deliberately non-fatal if we get an error in reading the index we just return the part of the index we have managed to read the index isnt essential just quicker
fca8c0481bc8d751479ca13f454e89a7fdfece03	watchdog xilinx remove field for driver there is no need to init field based on the patch from peter griffin mmc remove field for drivers using module_platform_driver this patch removes the superflous field for drivers which use the module_platform_driver api as this is overriden in platform_driver_register anyway
8414fe11ba2ff2422c4b73bbef3b035a2562c88a	staging fbtft fix buffer overflow vulnerability module copies a user supplied string module parameter into a buffer using strncpy and does not check that the buffer is null terminated replace call to strncpy with call to strlcpy ensuring that the buffer is null terminated
b5ae11463a67a5e468dd67482ab2308994da9b2b	staging comedi drivers fix dma buffers on stack this patch fixes an instance of dma buffer on stackbeing passed to usb_control_msgfor the usb-duxsigma board driver found using smatch
6efaf10f163d9a60d1d4b2a049b194a53537ba1b	avoid queuing work into a destroyed cq kthread worker the memory barrier is not enough to protect queuing works into a destroyed cq kthread just imagine the following situation cpu1 cpu2 rvt_cq_enter worker rvt_cq_exit null smp_wmb kthread_flush_workerworker kfreeworker nothing queued yet nothing flushed and happily stopped and freed if likelyworker true read before cpu2 acted rvt_cq_none kthread_queue_workworker bang worker has been in the meantime this patch solves this by protecting the critical sections by it seems that this lock is not much contended and looks reasonable for this purpose one catch is that rvt_cq_enter might be called from irq context therefore we must always take the lock with irqs disabled to avoid a possible deadlock
9b4231bf995996d6459c57959ead5a1829ff2c57	block fix sg_gset_reserved_size ioctl when max_sectors is huge sg_get_reserved_size and sg_set_reserved_size ioctls access a reserved buffer in bytes as int type the value needs to be capped at the request queues max_sectors but integer overflow is not correctly handled in the calculation when converting max_sectors from sectors to bytes
3790e395b8f4b66fe4e53629f304505c110a2be7	dont use vblank_disable_immediate on incapable driver tegra would not only need a hardware vblank counter that increments at leading edge of vblank but also support for instantaneous high precision vblank timestamp queries ie a proper implementation of without these there can be off-by-one errors during vblank if the scanout is inside vblank at time and additionally clients will never see any useable vblank timestamps when querying via drmwaitvblank ioctl this would negatively affect swap scheduling under x11 and wayland
20b297d620cd1bb94127942bbb3702fb7b1030b2	btrfs tree mod log sanity checks in join_transaction when a fresh transaction begins the tree mod log must be clean users of the tree modification log must ensure they never span across transaction boundaries we reset the sequence to __number__ in this safe situation to make absolutely sure overflow cant happen
f6d725324ab281880a0b736df5812e3a1e807779	perf tools extract common api out of this patch extracts common unwind-libunwind apis out of this part will be used by both local and remote libunwind link
5f98ced1c95e7706af6895f7b7b0d2216f075d59	cpufreq intel_pstate drop redundant wrapper function intel_pstate_hwp_set_policy is a wrapper around intel_pstate_hwp_set but the only value it adds is to check hwp_active before calling the latter and one of its two callers has already checked hwp_active before that happens so in that code path the additional check is redundant and using the wrapper is rather pointless for this reason drop intel_pstate_hwp_set_policy and make its callers invoke intel_pstate_hwp_set directly after checking hwp_active
bc0bb1fd5b0d72fba589b46be05c945171f9d6f3	revert dmaengine dw platform provide platform data for intel since we have a work around to prevent a system hangup we dont need to provide a platform data explicitly anymore this reverts commit
1156e91dd7cc3a579544286d07fd46f0162e3ec6	usb gadget ncm allocate and init otg descriptor by otg capabilities allocate and initialize usb otg descriptor according to gadget otg capabilities add it for each usb configurations if otg capability is not defined keep its original otg descriptor unchanged
bb3338d3474e0329918fda9dae2c52751731eb58	in r5l_do_submit_io submit first in r5l_do_submit_io it is necessary to check before submit this is because endio of current_bio may free the whole io unit and thus change
9dd02e89cb920a727349f8852430fdc92cc729f4	mfd arizona add support for new fratio encoding newer ip has an expanded encoding for the fratio bits as the additional used bits are unused on older ip simply expand the field to the new size
389b9c1bc927c8194a49f5f0c7e069ed0ec79b9e	cgroup keep css_set and task lists in chronological order css task iteration will be updated to not leak cgroup internal locking to iterator users in preparation update css_set and task lists to be in chronological order for tasks as migration path is already using list_splice_tail_init only cgroup_enable_task_cg_lists and cgroup_post_fork need updating for css_sets link_css_set is the only place which needs to be updated
4667730163a6d0afb04cefae9805ca1cdad1df46	drop redundant vblank waits just blows through for naught since the pipe is off
8a93dbc1f4d5c33b444d561a8f4c4ddfc2e7cb74	media media davinci vpbe drop unused member memory from vpbe_layer
4d0f0b988e79db9f9cb4ffbd736a7d6e85611f63	turn off crtcs on driver unload radeon leaks a runtime pm ref if at least one crtc is enabled on unload the ref is taken by radeon_crtc_set_config and held as long as a crtc is in use fix by turning off all crtcs on unload link
47ec4ed2d23ff3a93f9f575295f17bdaf3d2cec9	staging csr fix function declaration warnings sparse is warning about non-ansi function declaration add void to the parameterless function warning non-ansi function declaration of function chiphelper_null i also fixed this checkpatch error error bar should be foo
0eaaacab038ec03c010cd820554cfa6d1a93cd78	optimize pageflip taking the grph update lock is only necessary when updating the the secondary address for single pipe stereo
609a0532a4d713819092a9311ffe89faa6bac617	usb gadget uvc add fix for uvc compliance test suite assertion failure as per uvc compliance test specifications assertion number related to standard vs isochronous video data endpoint descriptor assertions the bits of bmattributes field of standard vs isochronous video data endpoint descriptor should be __number__ binary to indicate that the synchronization type is asynchronous this mandatory requirement has been captured in section of the uvc video class specification version __float__ this patch adds a fix for the same
c10dddc1d5055467f67d50724f5297fe23b69cc2	fix primary plane scaling check the src_w src_h parameters to update_plane include a subpixel offset we need to shift off the subpixel bits before comparing to crtc size when checking for primary plane scaling
e8f31fd312ce37950bff3295d3ec1e8e0380209f	staging comedi fix printk issue in this is a patch to the file that fixes up a printk warning found by the tool converted printks to and
4eea6aa581abfeb2695ebe9f9d4672597e1bdd4b	x86 mm if kernel are not marked as e820_ram complain and fix there could be cases where user supplied memory mappings do not mark the region where the kernel and reside as e820_ram as reported here handle it by complaining and adding the range back into the link
3f40f5b2a22110754ce469f5722bade8aeb241e5	tty flush tty buffers after hardware shutdown the line discipline buffer and the tty buffers must be flushed again after hardware shutdown otherwise a brief window exists between the ldisc flush in tty_port_close_start and the subsequent tty_port_shutdown during which more data could be received into the tty buffers a racing open might then be able to receive data from the previous session
e0b179ee782d80b31ccfe8cbcb1505cb703dfdbc	greybus our workqueue should be ordered svc messages come in in an order so dont mess them up by processing them out of order fix this by making our work queue ordered which should keep everything in line
fd0ef7a0583b9af3efeb7b1f965ea80b5ff70cdf	cpufreq cpufreq ondemand update sampling rate without waiting for next sampling when a new sampling rate is shorter than the current one __number__ sec __number__ ms regardless how short the new one is the current ondemand mechanism wait for the previously set timer to be expired for example if the user has just expressed that the sampling rate should be __number__ ms from now and the previous was __number__ ms the new rate may become effective __number__ ms later which could be not acceptable for the user if the user has intended to speed up sampling because the system is expected to react to cpu load fluctuation quickly from __now__ in order to address this issue we need to cancel the previously set timer schedule_delayed_work and reset the timer if resetting timer is expected to trigger the delayed_work ealier
e83d5f266199dfdfb1761a6d2a406450e80bfac0	staging comedi pcmmio move ao shadow data to device private data there is only one ai subdevice in this driver so there is no reason to hold the last sample written to each channel in the subdevice private data move the data into the device private data this gets some of the data out of the subdevice private data union and removes some of the uses of the ugly subpriv macro
b5fc9c1031407010ea308be15342bd01b848a853	staging comedi pcl816 fix dma bytes calculation the calculation for the total number of bytes in the dma transfer is incorrect fix it
b1255b884914920f4086448ec4930e814e97afde	convert to generic
cea2cc735ae125187a28cd30a000ad62749f948e	mfd htc-i2cpld pass the irqf_oneshot flag since commit genirq reject bogus threaded irq requests threaded irqs without a primary handler need to be requested with irqf_oneshot otherwise the request will fail so pass the irqf_oneshot flag in this case the semantic patch that makes this change is available in
5395103dcc709d87f08edaecb786fc37781f3b22	alsa ctxfi neaten get_daio_rsc move the pointer declarations into the blocks that use them neaten the kfree calls when the _init functions fail trivially reduces object size defconfig x86-64 size text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__
750645f8a6543ff4deb4d98a0052000a31fdd43f	xhci refactor endpoint limit checking move the code to check whether weve reached the host controllers limit on the number of endpoints out of the two conditional statements to remove duplicate code
138998fdd12e7362756e158d00856a2aabd5f0c1	tcp invoke pkts_acked hook on every ack invoking pkts_acked is currently conditioned on flag_acked receiving a cumulative ack of new data or ack with syn flag set remove this condition so that cc may get rtt measurements from all sacks
ae3ae252356377e523ae1163834e088d346410b0	scsi qla4xxx pass correct lun address to firmware in case of lun_reset use function int_to_scsilun in qla4xxx_reset_lun to convert integer value comming from scsi_transport to scsi lun address format
ac74d8d65c83d8061034d0908e1eab6a0c24f923	fix i_dio_wakeup definition i_dio_wakeup is never directly used but fix it up anyway
5bf4a7a7081204eca004e04b0da726513f49142c	staging comedi amplc_pci230 remove subdevice pointer math convert the comedi_subdevice access from pointer math to array access
e04085285b829dc922e78768a9abb390a8caed31	scsi storvsc prefer kcalloc over kzalloc with multiply use kcalloc for allocating an array instead of kzalloc with multiply kcalloc is the preferred api found with checkpatch
ecfdb0ac15ba983ba4ff11709fdf8f178c0b8b87	add msic_thermal platform support this will let the msic driver to create platform device for the thermal driver link
94fe8420bf519acd641ecbd442a0a79c1a024212	ceph define ceph_writepages_osd_request mostly for readability define ceph_writepages_osd_request and use it to allocate the osd request for ceph_writepages_start
b5e2368baeddf401bf3da9e364fc1c96676279cd	ext4 re-enable discard functionality in no-journal mode this is a revert of commit b56ff9d397ce which removed the call to ext4_issue_discard to fix a bug reported because ext4_issue_discard was being called from inside a block group spinlock as it turns out this bug had already been fixed by lukas czerner in commit by the simple expedient of moving when we call ext4_issue_discard outside the spinlock so it should be safe to re-enable this functionality which i tested by putting an bug_onin_atomic just after the restored callsite to ext4_issue_discard addresses-google-bug
0a0e2344a62ce9e7fac6129d6292e59aecfceced	bna use netdev_alloc_skb_ip_align some workloads need some headroom net_skb_pad to avoid expensive reallocations using netdev_alloc_skb_ip_align instead of bare skb_alloc brings the net_ip_align and the net_skb_pad headroom
c9ba6fad426faa8349523cef323f7b4b7d17a1e8	dont dereference fb when disabling primary plane during driver init we may not have a valid framebuffer for the primary plane even though the plane is enabled due to failed bios fb takeover this means we have to avoid dereferencing the fb in when disabling the plane the introduction of the primary plane rotation in commit d91a2cb8e5104233c02bbde539bd4ee455ec12ac author sonika jindal intel.com date fri aug __number__ __number__ add __number__ degree primary plane rotation support caused a regression by trying to look up the pixel format before we can be sure theres a valid fb available this isnt entirely unsurprising since the rotation patches originally predate the change to the primary plane code that calls also when disabling the plane commit fdd508a6419217cce28213f3c9bd27c02a0d4c71 author ville syrjl linux.intel.com date fri aug __number__ __number__ call in v2 warn but dont blow up when trying to enable a plane an fb chris
84cfad02b7d9ee0ec910a40aa96850c337a0d745	greybus loopback add bitmask of connections to include in test feature add which enables the ability to select a bit-mask of connections to run when executing a loopback test set this is a feature add to facilitate testing on the firmware side minus the necessity to recompile firmware to support unicast v multicast v bitmask
412a3df1ce4203ca8887ac986e4fc692301a949b	gma500 drop unused psb_intel_modeset_cleanup
91c6c4bdb241cd27082cfa130675a2cd52cda5a4	ozwpan replace kfree_skb with dev_kfree_skb in this patch replaces the calls to kfree_skb with calls to dev_kfree_skb
6e87fa481f428c3f5436b20c22b8c833c289205c	drivers gpu mark function as static in mark function as static because it is not used outside file this eliminates the following warning in warning no previous prototype for
3176dd5d3b591b22abe28dc0f3aace089f10ebe7	iio core use pr_err instead of printk use of pr_err is preferred to printk
ec513886411e4fc47f98607a1bc79b72899710c4	asoc tlv320aic32x4 change name of probe function the codecs probe function is named aic32x4_probe this is going to conflict with later work to implement spi support and separate out i2s into its own file in line with other drivers in the tree this function is renamed to aic32x4_codec_probe instead
1fb810576f0e92451a5d46774bbd593946ca3526	s390 check for null termination in command line setup the current code in setup_boot_command_line uses a heuristic to detect an ebcdic command line it checks if any of the bytes in the command line has bit one set in that case it is assumed that we have an ebcdic string and the complete command line is converted on s390 there are cases where the boot loader provides a kernel command line that is null terminated but has random data after the null termination in that case setup_boot_command_line might misinterpret an ascii string for an ebcdic string a subsequent string conversion can then damage the ascii string this patch solves the problem by checking for null termination if no ebcdic character has been found until the the null termination has been found we now assume that we have an ascii string
32f6271dbdc351dce96b11c5f3567bae8188004f	is_vm_hugetlb_page can return bool make is_vm_hugetlb_page return bool to improve readability due to this particular function only using either one or zero as its return value
b4a871bce619dc5ca03cc6c78e1c467ceacb8e7e	add missing platform_device_unregister we need to unregister platform device when module exit this commit fixes the issue
6ee3dbf93a895fce7c11d4d79e12beab1beb7860	input atmel_mxt_ts dump each message on just __number__ line helps ensure all bytes for a single message together in the system log
361c3f529332b28408ba7f8e8a4fa3ac23c855ff	ipvs better derivation of ipvs in ip_vs_tunnel_xmit dont use net_ipvsskb_netskb as skb_net is a bad hack instead use and for the net
360fe134e2808fee04b73406424295d18d09ee85	rtc rtc-generic use devm_rtc_device_register devm_rtc_device_register is device managed and makes cleanup paths simpler
41aac14a8dee66a720894e5979c2372c0d5afd34	kvm introduce kvm_pmu_msr_idx_to_pmc this function will be part of the kvm_pmu_ops interface introduce it already
3ad7de6b7d031165e8b2c0775986128de17c5a63	hpsa change devtype to unsigned this member is used in calls to scsi_device_type it should be unsigned since the kernel checks for upper bounds and it should never be negative
29d7b331c73c4f1a8b3f7f4a94abe4eb834be351	adjust duplicate test delete successive tests to the same location this looks like simple code duplication a simplified version of the semantic match that finds this problem is as follows local idexpression y expression when forall return when when when forall return
f9af456a61ecfbef8233c5046a9e347c9b98ba05	lockdep fix incorrect condition to print bug msgs for max_lockdep_chain_hlocks bug messages and stack dump for max_lockdep_chain_hlocks should only be printed once link
310df69c26f93c49bb176e95e4eb42ece58a5fd2	staging panel fix interruptible_sleep_on race interruptible_sleep_on is racy and going away this replaces the one caller in the panel driver with the appropriate wait_event_interruptible variant
02a54dd18f1eb831f4bf02ac763a4e9d805e1ba3	greybus core add defensive connection disable post disconnect bundle drivers disable their connections in the disconnect callback but add a defensive test and warn about buggy drivers nonetheless note that bundle drivers would generally release their state containers in disconnect so a failure stop could potentially lead to use-after-free bugs in any late operation completion callbacks
4026099a3118a1e038c48f3f85203a674938025b	support debug_dma_mapping_error without this patch drivers will get blamed for not calling dma_mapping_error even if they do
4cb24e68a5af427651b3529cd3fe382fb9ba1544	clk mvebu fix valid value range checking for cpu_freq_select cpu_freq_select is used as array subscript thus the valid value range is __number__ array_size __number__
54fb2411dd0b4d7d91e9d77536ac84295607a93b	convert i915_gem_ring_throttle to use requests convert the throttle code to use the request structure rather than extracting a pair from it and using those this is in preparation for __wait_seqno becoming __wait_request for viz-4377
17ae1c650c1ecf8dc8e16d54b0f68a345965f43f	phy fix device reference leaks make sure to drop the reference taken by bus_find_device_by_name before returning from phy_connect and phy_attach note that both function still take a reference to the phy device through phy_attach_direct
d2b2cbce99150fbfd7578e341909a40f1764c95d	fix error handling for plane create failure intel_cursor_plane_create and intel_sprite_plane_create return an error pointer so lets not mistakenly look for a null pointer references
0c27362998a8357f199501aa401e99c51c2eb46e	locks set fl_owner for leases back to this fixes a regression due to commit locks ensure that fl_owner is always initialized properly in flock and lease codepaths i had mistakenly thought that the fl_owner wasnt used in the lease code but i missed the place in __break_lease that does use it the i_have_this_lease check in generic_add_lease uses it while im not sure that check is terribly helpful __number__ reset it back to using in order to ensure that theres no behavior change here __number__ leases are owned by the file description its possible that this is a threaded program and the lease breaker and the task that would handle the signal are different even if they have the same file table so there is the potential for false positives with this check
a29d64a45eed1ee0d4ac90335da79ad1a9a0990d	edac altera add irq flags to disable irq while handling add the irqf_oneshot and irqf_trigger_high flags to disable the irq while executing the irq handler remove the irqf_shared because these are not shared irqs in the domain exposed when flooding irqs link
3536da06db0baa675f32de608c0a4c0f5ef0e9ff	nfc llcp clean local timers and works when removing a device whenever an adapter is removed we must clean all the local structures especially the timers and scheduled work otherwise those asynchronous threads will eventually try to access the freed nfc_dev pointer if an llcp link is up
f00bf2305cabc2313c70575384aee60e8f2a684d	sfc dont update stats on vf when called in atomic context the ifenslave command to set up a bond runs in an atomic context and it queries the stats on the devices that are being enslaved a vf needs to make an mcdi call to update its stats which is not allowed in atomic context the releasing of the stats_lock is moved to the beginning of the vf stats update function so that in_interrupt can be used it must be taken again before returning from this function
f791cec85073298d00f18b8492b79a8b4e9b0580	subject fix build breakage in this was introduced in commit b46413367961c2e8bd827e067a231be982aaeee2 iio fix a leak due to improper use of anon_inode_getfd
62229a1bda8abdc54dabada79798885f4f2da79c	greybus uart remove magic numbers make struct gb_tty variable names consistent use defines for the data format command tidy up naming of gb_tty variables
70fa4a62e913dde2d100e0be2711562742f58bee	sysfs update the name hash for an entry after changing the namespace this is needed to allow renaming network devices that have been moved to another network namespace
2f713b5c7d2a90baba6c88174c81fb9a96bfde21	orangefs count directory pieces correctly a large directory full of differently sized file names triggered this most directories even very large directories with shorter names would be lucky enough to fit in one server response
0cb1f1e44cf5b013dd0991f509e332ac77ce2ddd	media add length checks add sanity checks to fix static checker warning cec_ops_set_osd_string warn setting length __number__ to negative one
bfe130773862bb3a02cdc4d4c2169f7f0210a46b	take reserved vectors into account when spreading irqs the recent addition of reserved vectors at the beginning or the end of the vector space did not take the reserved vectors at the beginning into account for the various loop exit conditions as a consequence the last vectors of the spread area are not included into the spread algorithm and are treated like the reserved vectors at the end of the vector space and get the default affinity mask assigned sum up the affinity vectors and the reserved vectors at the beginning and use the sum as exit condition tglx fixed all conditions instead of only one and massaged changelog link
4c34875059fa025be671108de1b0993cc14c9256	clk rockchip convert to clk_hw based provider apis were removing struct clk from the clk provider api so switch this code to using the clk_hw based provider apis
a790634544f5f98364b0aafe9d7e669810d96360	use pr_cont where appropriate use pr_cont instead of simple printk calls when lines will be continued this fixes the kernel output of various lines printed on a warning before __float__ krnl psw __number__ __number__ __float__ __float__ __float__ after __float__ krnl psw __number__ __number__ __float__
ad53232c1f364a1c4172218856c4e44c527b541e	asoc switch over to use snd_soc_register_component on pxa2xx
300c34c13edf9c4d6d643e2b92860a6d9d0d0498	bump i40e and i40evf versions bump i40e to and i40evf to version change-id ice127eee3a5a5d1b8765d83cff8c30f9f3b1bc32
80ee842825d5f40a21b4257dd98b74f2c92e5f02	greybus audio allocate protocol and class values allocate protocol and class values for the audio device class protocol two values of each type are allocated one for audio management connections and one for audio data connections
b1b03bded1ee8b88ad85055a15d5f62ab6ddde44	use u8 as ownership type in mlx5e_get_cqe cqe ownership indication is as small as a single bit use u8 to speedup the comparison
da6fcf0e3720b94197432510f3d455ed9243773f	mtd ms02-nv remove superfluous name cast is const char
14004f044bef275ac911375a8157e6773da4260a	pata_sis enable mwdma for udma __number__ chipset this ports the timing values over from the old ide driver into the new pata-based one the comment was lying when it stated the old driver was not mwdma capable boot tested on actual hardware using
81c12f6e78c535533e9258bd9476b5d7419d3cce	posting_read ips_ctl before waiting for the vblank make sure we write to ips before we actually wait
db1a4194c84d56a43d17d7f99f04feef311e7a32	staging greybus remove unnecessary braces for single statement block this patch fixes the following warning warning braces are not necessary for single statement blocks
f6281dbe4a92fe7d6758853d8db5f53a67bc9709	arm s3c64xx clear dma flags on channel request this patch clears the dma flags when a dma channel is requested this is necessary because otherwise the channel may inherit incompatible settings from its last usage
a856b195d129059c71981b6d069085d611ad8d38	arm dts r8a7794 add iic clocks add iic clocks to r8a7794 device tree based on similar work for the r8a7790 by wolfram sang
71b3ee7e65ffb48135d875d9c36e3183b9ecffeb	perf test fix false test_ok result for perf test hist commit perf test fix hist testcases when kptr_restrict is on solves a double free problem when perf test hist calling setup_fake_machine however the result is still incorrect for example test filtering hist entries __number__ test filtering hist entries start test child forked pid __number__ cannot create kernel maps test child finished with __number__ end test filtering hist entries ok in this case the body of this test is not get executed at all but the result is ok actually in setup_fake_machine theres no need to create real kernel maps what we want are the fake maps this patch removes the machine__create_kernel_maps in setup_fake_machine so it wont be affected by kptr_restrict setting test result cat __number__ test hist __number__ test matching and linking multiple hists start test child forked pid __number__ test child finished with __number__ end test matching and linking multiple hists ok snip link
af13b4922b057b4ebc7e2315a6f666ecb65890e4	btrfs fix error labels in init_btrfs_fs btrfs_interface_init rarely fails but we could leak the prelim_ref slab
c6b8e9180de76624d0a01148d6edd0107edebed1	iser-target get rid of redundant max_accept not sure what it was used for but there is no real need for it now as i see it go ahead and get rid of it
4c6dacbd383c0cdd84826cb0663b6bd81eaf21fb	staging comedi refactor pcl730 driver to remove forward declarations move the routines and the associated struct comedi_driver and other variables to the end of the source this is more typical of how other drivers are written and removes the need for the forward declarations
92a4873d532d579070ddd304bae3fe13e8810493	hwmon g760a use permission-specific device_attr variants use device_attr_ro for read only attributes and device_attr_rw for attributes this simplifies the source code improves readbility and reduces the chance of inconsistencies the conversion was done automatically using coccinelle it was validated by compiling both the old and the new source code and comparing its text data and bss size groeck updated description
4d6609c47373ce85ed887ae471b34fb188f9c2b8	qla2xxx fix sparse warnings in
428d9988557f0f26047af304cf1f3d130b06ed4d	usb serial export usb_serial_generic_chars_in_buffer export generic chars_in_buffer implementation so it can be used in subdrivers in combination with checks of any hardware buffers
193725ba3f99ea1d2d8870769be231bf2c3be74a	staging comedi s626 cleanup else not useful fix the warning warning else is not generally useful after a break or return
30d915c2ecbb60d222f49e8f249d04e208d11ebc	iwlwifi mvm set the correct amsdu enum values the amsdu enum values are off by __number__ bit fix it
cc7e96232763ff33418b088b436a564441347b15	drm bridge dw-hdmi merge __hdmi_phy_i2c_write and hdmi_phy_i2c_write the latter is just an int wrapper around the former void function that unconditionally returns __number__ as the return value is never checked merge the two functions into one link
cd77b2ebf97dbe54ab250e4358a3f50d96053f26	tg3 update version to __float__
d2e2b26bb5606763593b341476a9f5baf95ccad6	remove dummy implementation the callback is optional therefore a dummy implementation is not needed
b97055bcf17551196a498e624b544c3e9c804ef0	serial stm32 mark symbols static where possible we get __number__ warnings when building kernel with warning no previous prototype for stm32_pending_rx warning no previous prototype for stm32_get_char in fact these two functions are only used in the file in which they are declared and dont need a declaration but can be made static so this patch marks these functions with static
140f190bc3a3b6f200548d204befd998eadd63fd	x86 remove some noise from boot log when starting cpus printing the start_ip for every secondary cpu is very noisy on a large system and doesnt add any value drop this message console log before booting node __number__ processors smpboot cpu __number__ start_ip __number__ smpboot cpu __number__ start_ip __number__ smpboot cpu __number__ start_ip __number__ smpboot cpu __number__ start_ip __number__ smpboot cpu __number__ start_ip __number__ brought up __number__ cpus console log after booting node __number__ processors ok booting node __number__ processors ok booting node __number__ processors ok booting node __number__ processors brought up __number__ cpus link
95134d435c765ca3a2b11d245c7520450ff16e30	staging vt6656 add missing identifier names fix multiple warnings function definition argument should also have an identifier name
5b0093f3a4acc7f393f102e7e064f70efc3375b9	mips smp-cps dont bug if a cpu fails to start if there is no online cpu within a core which could receive the ipi to start another vp in that core a bug is triggered instead print a warning and gracefully handle the failure such that the system remains usable albeit without the requested secondary cpu patchwork
2fa1d4fce599809e6bd7d95756709a5faef30710	s390 disassembler mark exception causing instructions if an exception happens the psw either points to the instruction that caused the exception or to the instruction that follows the exception causing instruction depending on the exception type since the inkernel disassembler adds a in front of the disassembly many people assume incorrectly that the instruction that is pointed to must be the cause of the exception to make people aware that this is not necessarily the case add a different character in front of the disassembled instruction that precedes the current instructions the output now looks like this krnl psw __number__ __number__ krnl gprs __number__ __number__ __number__ __number__ __number__ __number__ __number__ __address__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ krnl code __number__ lgr __number__ brc __number__ brc __number__ tmll __number__ eb8ff0580024 stmg __number__ brc __number__ lgr __number__ aghi
07f2af7bfd247857b1bf16ae7f479b5b6f4ef305	ovl honor flag ms_silent at mount this patch hides error about missing lowerdir if ms_silent is set we use mountnull overlay ms_silent null for testing support of overlayfs syscall returns if its not supported otherwise kernel automatically loads module and returns because lowerdir is missing
4be6a290b87af9136b482d5c22574f070ffdbdb8	implement domain_attr_geometry attribute implement the attribute for the msm iommu driver
29f0d4884645fbd366ac85918f222605f8441917	spi spi-mxs remove unused bits_per_word variable the bits_per_word variable is not used after commit spi convert drivers to use bits_per_word_mask
a54a40dae67e4ee04df4dc36e7b89639131dd8e3	wil6210 increase timeout for the echo command sometimes it takes for the firmware more than to react on echo command after reset increase timeout from __number__ to
7d2b55f80d62b6b4b72d9ef4318a2a49df3e2830	tcp make is_dupack a parameter to tcp_fastretrans_alert allow callers to decide whether an ack is a duplicate ack this is a prerequisite to allowing fastretrans_alert to be called from new contexts such as the no_queue and old_ack code paths from which we have extra info that tells us whether an ack is a dupack
1531a208ed861e4bd287444f9466ffcf98383de2	media v4l vsp1 register pipe with output wpf the drm object does not register the pipe with the wpf object this is used internally throughout the driver as a means of accessing the pipe as such this breaks operations which require access to the pipe from wpf interrupts register the pipe inside the wpf object after it has been declared as the output
09c231cb8bfdc35e7d896850d34440b8553b084f	tmpfs distribute interleave better across nodes when tmpfs has the interleave memory policy it always starts allocating for each file from node __number__ at offset __number__ when there are many small files the lower nodes fill up disproportionately this patch spreads out node usage by starting files at nodes other than __number__ by using the inode number to bias the starting node for interleave
04aa4438c01938df30ffe26f72cef0cbd0a34f6e	mfd twl4030-irq fix style warnings relating to pr_warn and sizeof this is part of an effort to clean-up the mfd subsystem warning prefer to pr_warningtwl4030 i2c error reading pih ret warning sizeof buf should be sizeofbuf memsetbuf sizeof buf warning sizeof should be agent kzallocsizeof gfp_kernel
c8ce82b9b9c40d66709cce588f6281dd47cc3922	devfreq exynos dont use opp structures outside of rcu locks the opp structures are abused to the best here without understanding how the opp core and rcu locks work in short the opp pointer saved struct exynos_bus can become invalid under your nose as the opp core may free it fix various abuses around opp structures and calls
697f609358685f20a798e0af2dc869b8c40bda32	rename iort_node_map_rid to make it generic iort_node_map_rid was designed to take an input id that is not necessarily a pci requester id and map it to an output id eg an smmu streamid or an its deviceid according to the mappings provided by an iort node mapping entries this means that the iort_node_map_rid input id is not always a pci requester id as its name parameters and local variables suggest which is misleading apply the substitution to the iort_node_map_rid mapping function and its users to make sure its intended usage is clearer
4cf99c93d24f9cdd338ab23cd671e949ee6ca1bd	wil6210 modify confusing printout when wmi event received when driver not ready to accept it the printed error message is misleading and hints that hw is stuck modify the error message to make it clearer
645a387ecbdb4aa78c8451a66416340616134537	x86 vdso fix size of get_unmapped_area the size of the reserved memory for a __number__ bit vdso must be the size of the __number__ bit vdso in pages hpet page vvar page one page is not enough for this silly copy and paste bug was right in previous patch link
7db36b1c3ca0904c1673f2ccab4099b25637e49f	pm avs rockchip-io add io selectors and supplies for rk3328 this adds the necessary data for handling io voltage domains on the rk3328 as interesting tidbit the rk3328 only contains one iodomain area in the regular general register files grf
702b63ca328496d5577b6edb40d44fa6a6db8aa0	tile thp remove infrastructure for handling splitting pmds with new refcounting we dont need to mark pmds splitting lets drop code to handle this
c02b73c943d723511abecde7909d0818638d1bc2	clk ti dflt remove redundant unlikely commit clk ti dflt fix enable_reg validity check fixed a validation check by using an is_err macro within the existing unlikely expression but is_err macro already has an unlikely inside it so get rid of the redundant unlikely macro from the validation check
452349c3235252aaccaf30cc75402827d43b72d4	net axienet use eth_hw_addr_random use eth_hw_addr_random to set a random mac address in order to make sure will be properly set to net_addr_random
7c23baa90db1115fbd2b1aca5e07fae091c8dc28	staging most hdm-usb do specific synchronization at configuration time this patch puts the synchronization procedure trigger for asynchronous channels into the function hdm_configure_channel likewise it removes triggering of hardware specific synchronization for other channel types from the probe function as it is not required
6a5e7fde3a04ef5134702753f77e9b8aa6aab789	media af9013 use for boolean vars instead of using __number__ or __number__ for boolean use the defines
83a69f5adb81b3432fb1e58485639c391cc65f17	staging comedi dt9812 cleanup analog in subdevice for aesthetic reasons rename the function to help with grepping and rename some of the local vars dt9812_analog_in can fail make sure to check for any failure and return the errno the comedi core expects the functions to return either an errno or the number of samples read change the final return to to make this clearer
1bc40cb1ccbc7e33622a1fd2a8a37f311e64d4fc	rtc rx6110 remove owner assignment is already set by the spi core
45d5fd14d22304c9a40d5aae75ec610f5d1cbb53	btrfs dont use an async starter for most of our workers we only need an async starter if we cant make a gfp_nofs allocation in our current path this is the case for the endio stuff since it happens in irq context but things like the caching thread workers and the delalloc flushers we can easily make this allocation and start threads right away also change the worker count for the caching thread pool traditionally we limited this to __number__ since we took read locks while caching but nowadays we do this lockless so theres no reason to limit the number of caching threads thanks
0ac07ce022c8e0e1680e7576b97465a49ba7bbf0	staging rtl8712 fix unnecessary parentheses this commit fixes the following checkpatch warnings __number__ warning unnecessary parentheses maybe should be __number__ warning unnecessary parentheses maybe should be
744966d6dc7d9945d8b9cc511d98a0ec5aeee9ed	staging iio introduce the use of devm_ioremap_resource this patch introduces the use of devm_ioremap_resource it does away with call to request_mem_region and the error checking on platform_get_resource also the calls to free the allocated resources like release_mem_region and iounmap are done away with the ret variable in the probe function is also eliminated also a bug is fixed as the goto in the error handling of request_mem_region should not have called release_mem_region which releases a resource that has not been allocated
ed13febf8fac1a08f939f97378574937a7d2f121	acpi hotplug pci rework acpiphp_handle_to_bridge using the hotplug context objects introduced previously rework the acpi-based pci hotplug acpiphp core code to get to acpiphp_bridge objects associated with hotplug bridges from those context objects rather than from the global list of hotplug bridges
fc0bfacd045a17e385b4272dfe2387ba3a6d8745	hp-wireless remove unneeded in hpwl_init acpi_bus_register_driver already returns an appropriate value __number__ on success and some negative value on error to be used in __init functions so the is redundant in hpwl_init thus remove it and directly return the value
72919f340245bbc9b81da35844134db2d675912a	spi tegra slink do prepare dma transfer with dma_ctrl_ack flag this reverts commit faa98f7ea6c720beec8a800c9ac6975f760467e2 which was applied in error due to discussion ending up in the wrong thread
16a8ef2751801346f1f76a18685b2beb63cd170f	tracing deletion of an unnecessary check before iput the iput function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software link
c7d442f46c1bb18e48204f41c3d838c475eb5130	arm avoid tracers in soft_restart use of tracers in local_irq_disable is causes abort loops when called with irqs disabled using a temporary stack replace local_irq_disable with raw_local_irq_disable instead to avoid tracers
f40f917a87daf13c7b494910c0af4c686b0a65eb	removed optional dummy crtc mode_fixup function this patch set nukes all the dummy crtc mode_fixup implementations made on top of daniel branch link
c913df3f3d6f7f5e5ed845e2786b0fc98a41482f	pm80xx avoid a panic if msix interrupts are disabled if msix interrupts are disabled via the kernel command line the pm8001 driver will kernel panic because it does not detect that msi interrupts are disabled and will soldier on and attempt to configure msi interrupts anyways this leads to a kernel panic most likely because a required data structure is not available down the line using the pci_msi_enabled function in order to detect if msi interrupts are enabled before configuring them resolves this issue and avoids a kernel panic when the module is loaded additionally the irq_vector structure must be initialized when legacy interrupts are being used otherwise legacy interrupts will simply not function and result in another panic
8900df7add8a4c197f0f9d7e8dc0d41847ba5eeb	arm mach-shmobile bonito add smsc9221 support
899a179dbf5878fd01c0bd3b0e884ec526916afb	media s5p-tv use devm_gpio_request in devm_gpio_request is a device managed function and will make error handling and cleanup a bit simpler
b3944c8f676de2e7ccd78151ae6a0518a9c44df6	media em28xx rename em28xx_hint_sensor to em28xx_detect_sensor now that the board hints and the sensor have been separated em28xx_detect_sensor is the better name for this function
dfe15ac1c6ad301b092ed295f0cfdb16cfaf5cfa	md wakeup thread upon rdev_dec_pending after each call to rdev_dec_pending we should wakeup the md thread if the device is found to be faulty otherwise well incur heavy delays on failing devices
81e33b51ed69d2b2eaf3fbeb043144b9d9ec7629	serial xuartps cleanup the clock enable the core handles the clocking now remove the clock disable in suspend in resume we enable the clocks and disable after register write
2a130f1aa54c2fb35abfc4d66e0239c80d054210	ubi fastmap fix peb array type the peb array is an array of __be32 so lets fix the scan_pool prototype accordingly
63d1d656a5232f2f189b217b50542eadcf9d74ae	cpufreq intel_pstate account for io wait time in cases where we have many ios the global load becomes low and the load algorithm will decrease the requested p-state because of that the ios overheads will increase and impact the io performances to improve io bound work we can count the io-wait time as busy time in calculating cpu busy this change uses get_cpu_iowait_time_us to obtain the io wait time value and converts time into number of cycles spent waiting on io at the tsc rate at the moment this trick is only used for atom
ee51f4432e375d07c29758e592c8c1ad1a343208	aic94xx get rid of redundant null check before release_firmware call release_firmware checks for null pointers internally so checking before calling the function is redundant
b8dd8654d9162e90c4179698f42e6edfec30dc1d	staging crystalhd improve kzalloc calls in replace sizeoftype by sizeofvariable in
df945360ce07ca592464e44fdd2ce61ee1536e1e	bluetooth make the function sco_conn_del have a return type of void this makes the function sco_conn_del have a return type of void now due to this function always running successfully and thus never needing to signal its caller when a non recoverable internal failure occurs by returning a error code to its respective caller
7e436905780659d6dc12d0581944934bf91a9919	tipc fix a slab object leak when remove tipc module there is a warning to remind us that a slab object is leaked like rmmod tipc __float__ __float__ bug tipc not tainted objects remaining in tipc on kmem_cache_close __float__ __float__ __float__ info slab __address__ __address__ __number__ __float__ info object __address__ __float__ kmem_cache_destroy tipc slab cache still has objects this is because the listening socket of tipc topology server is not closed before tipc proto handler is unregistered with proto_unregister however as the socket is closed in tipc_exit_net which is called by unregister_pernet_subsys during unregistering tipc namespace operation the warning can be eliminated if calling unregister_pernet_subsys is moved before calling proto_unregister
a0e5af3cb89b59aa6c62b1f97c8d553ff3fb51c1	cpufreq governors fix mixup revisited this change was made by commit cpufreq fix mixup in governors before but then it has been reverted inadvertently by commit cpufreq governors remove redundant code the changelog of commit says the function get_cpu_idle_time_jiffy in both the conservative and ondemand governors use jiffies_to_usecs to convert a cputime value to usecs which gives the wrong value on architectures where cputime and jiffies use different units only matters if no_hz is disabled since otherwise get_cpu_idle_time_us should already return a valid value and get_cpu_idle_time_jiffy isnt actually called since now we have only one common get_cpu_idle_time_jiffy used by both governors in question modify it along the lines of commit to restore the correct behavior
b462b06eb6b4b8006fc384ac9e8fe6b3d35b0c05	use af_inet for sin_family field elsewhere the sin_family field holds a value with a name of the form so it seems reasonable to do so here as well also the values of pf_inet and af_inet are the same the semantic patch that makes this change is as follows struct sockaddr_in sip pf_inet af_inet pf_inet af_inet pf_inet af_inet
0b9407c39864b878543c61b719e9ba5a7bfeb0c6	add debug logging to element execution just simple breadcrumbs for now while at it rename the i2c skip function
78ef5f2d2d8c9234d80b4e01e8b736e7241cd5ce	rtc rv8803 extend compatibility with the rx8900 the seiko epsons rtc rx8900 layout register is compatible with the rv8803 so lets add its id in order to reuse the same driver
68a99b187df3f4675f22a4a3f54c9d7645ab6409	gpio gpio-mm-lantiq use of_property_read_u32 instead of parsing manually the shadow content use the much simpler helper of_property_read_u32
54b0264ec8c6e90f0413ad30e2f91c65e7844613	kill the irq as id hack nothing should now need it so take it out
0ccd8ebb0e17ddeb2d56cf644da089adc4aa3bc0	staging ft1000-usb fixed table alignment fixed alignment to __number__ bytes per line
ec57fcd042a9448096705847290d4e4e97fbb7e1	usb phy omap-otg fix missing platform_set_drvdata in omap_otg_probe add missing platform_set_drvdata in omap_otg_probe otherwise calling platform_get_drvdata in remove returns null this is detected by coccinelle semantic patch
b1ab1e44b4fa3df97a25cc9bcc3c99244ad6945b	gfs2 remove extra if in gfs2_log_flush by reordering some of the assignments in gfs2_log_flush it is possible to remove one of the if statements as it can be merged with one higher up the function
cc5ede3efdf1c3777efdf92124e7572c1024a7f0	alsa hda check validity of wp reads when the hd-audio controller is disabled via vga switcheroo but the driver is still accessing it it spews floods of spurious response kernel messages its because wp reads and the driver tries to fill up until this number this patch changes the wp reads to word instead of byte and add the check of the read value if its __address__ the controller is supposed to be disabled so the further action will be skipped
1e226773c7e79051aa8a48258fe6ae61d20332bf	caif-hsi remove wake line modification when flushing fifo raising wake before flushing fifo and lowering it after caused a spike on ac wake that were sometimes detected and acted upon by the modem fixed this by remove wake line modification when flushing fifo
0c58ee0bfa28ad06dbc2b6305b1b950f7c392cdf	alx add module parameter to enable msi-x support msi-x support is default disabled in the alx driver in order to test msi-x interrupts for regressions add a module parameter to the driver
3956a1a0d1e072c321fcf1b1136e35a22be12af5	arm omap omap_device fix up resource names when booted with devicetree when booted with some resource will have their name set to null this can cause later kernel crash since this is not expected by the platform code when we boot without dt the devices are created with platform_device_add which itself fixes up the missing resource names if null the of core also fixes up the resource names when taking the information from dt data in __of_address_to_resource name name when we boot omap with devicetree of will create the devices based on the dt data so the resource names are guarantied to be not null since we have the tag we remove the of created resources from the device and re-create them based on hwmod data if the hwmod data does not specify a name for a resource it will be null this can cause kernel crash if the driver uses platform_get_resource_byname to get any resource
bda9893c50fb56253d3c206c14e3f933e5f68b3c	storage replace magic number with define in usb_stor_euscsi_init usb_stor_euscsi_init calls usb_stor_control_msg with timeout argument __number__ usb_ctrl_set_timeout is defined to be __number__ in so would it make sense to use that patch below if it would
2a19f7765bd90a56f3916a603e25b57b3b087480	wil6210 increase cmd buffer size to avoid sscanf buffer overflow cppcheck detected a buffer overflow error width __number__ given in format string no __number__ is larger than destination buffer cmd8 use to prevent overflowing it for the current sscanf we require cmd to be __number__ chars long so increase it by __number__ byte to prevent the sscan overflow rather than reduce the specifier to as cppcheck recommends
496c8a0bbb726c2608b3b1318d231ab04a9a2ec3	arm allow nand transfer mode to be specified in dt omap devices support various nand transfer modes currently all device-tree definitions will use the default prefetch polled mode so this patch enables the transfer mode to be specified in the device-tree
e4309b5dd529b69e904224470813dd1e92b03c69	staging rtl8188eu fixed warnings fixed a few of the coding style issues reported by
5bf59bd5e9a5b262110df8c1ea5ad8820d7d524a	regulator pwm prints error number along with detail prints the error number along with error message when any error occurs this help on getting the reason of failure quickly from log without any code instrument
4898b61e40d62ca1652af40935dbbb5d2e5fd93d	asoc ak4613 use snd_soc_update_bits to avoid reserve bit on ctrl
0564679bb6e750dc6d441f6d67e95c0590fa3f80	iwlwifi mvm use ksize to memset scan_command use ksize to get scan command size instead of calculating it to avoid nasty bugs
2bd3c3cb352b66f40965c974765d605e34d779d9	pixel_size cpp use drm_format_plane_cpp to get pixel_size in the sprite code
c67587a74847a27965ca1c6a4362c3b39e9943e1	dont add to page cache upon failure reading directory pages may fail on mds in this case client should not cache a non-up-to-date directory page because it will cause a later read on the same page fail intel-bug-id reviewed-on
c9b6869dbb3c6edb24e3cc76d3655067cfa7b802	mips idle make call of function pointer readable
aa80581da1448e9fe5ef3d1e56a82bbb21912ee1	dont init the fsl error int until after mpic init besides other potential problems if mpic_no_reset is not set the error interrupt will be masked after it is requested
00addd1a2de8d83dc3a5d6bb926911268ec716c9	cris locking fix the return value of arch_read_trylock arch_write_trylock should return ret instead of always return __number__ dpatch engine is used to auto generate this patch
69f64b2b77012e5e1d9ae25135e85aa7f469c397	i40e reset vfs after pf reset reset all of the vfs after a pf reset so that they are in a known state and the vf driver can detect the reset and reinit itself change-id i93c5b3a0f8b1371d0da078f92de948b9d3a6413f
9f79fb4825cd336ba9efbb0d9468f2ef3fd3cbf6	fix decode_free_stateid the operation status is decoded in decode_op_hdr stop the print_overflow message that is always hit without this patch nfs decode_free_stateid prematurely hit end of receive buffer remaining buffer length is __number__ words
630106342e459904f7be8bf25a2493908dabe40b	asoc remove unneeded from wm8753 driver name
cd69a09eb2851b3320a8526781916f5a2a1660a2	bfa do not call pci_enable_msix after it failed once function pci_enable_msix should not be called in case it threw a negative errno from a previous call
42189d854f174e7b29e0fdb4da9984ba63126a92	usb clamp binterval to allowed range binterval must be within the range __number__ __number__ when running at speed and within the range __number__ __number__ when running at speed in order to catch drivers passing a too large binterval on speed scenarios thus overflowing lets clamp the argument to the allowed ranges
86f8ef2c4802ac9dbe0c8c1c12670bd915a13013	fix usb_gigaset write_cmd result race in usb_gigaset function gigaset_write_cmd the length field of the command buffer structure could be cleared by the transmit tasklet before it was used for the functions return value fix by copying to a local variable before scheduling the tasklet
3695c46c7fa88f9f846510ffb44006de2edfb8b3	staging vt6656 rxtx s_vfilltxkey use vnt_usb_send_context use struct vnt_usb_send_context to get mac header and priv pointers
90f7da3fb5c9988d2ce9e87a35446f8bc9aa5997	dspfw registers need an offset on vlv
fd102b125e174edbea34e6e7a2d371bc7901c53d	scsi use blk_rq_payload_bytes without that well pass a wrong payload size in which can lead to hangs with drivers that need the total transfer size
92d4fc1a1f56a12fa09c92d8c89873509a8012c9	watchdog orion introduce a soc-specific rstout mapping separate the rstout register mapping for the different compatible strings supported by the driver this allows to use devm_ioremap on soc variants that share the rstout register and devm_ioremap_resource which requests the mmio region on socs that have a dedicated rstout register
8139b8d5358e873d90db1ccb54ed0b2c0611febc	staging bcm removed unused variable this patch removes the process_done variable from both format_eth_hdr_to_stack and read_bulk_callback where it is declared as it is not used anywhere it is set in the format_eth_hdr_to_stack function but afterwards not used
4fc4118cdb29ab946b8a586fc766ebb6ae1e1c90	wil6210 more rx descriptor accessor functions helpers to fetch various fields from the rx descriptor
c2542d2a867c22540c8ad64883288eabb891568d	regulator tps65217 remove unused driver_data from of_match table we dont ever reference the driver_data we supply so remove it
c909e5ba6b1d79edfa809150da36a2c0c9cb095e	media adv7842 fix behavior make this pass the v4l2-compliance test
dd75619853e4a28776130c78365aab8982abe6e1	extract intel_encoder_has_connectors we have an open coded loop which tries to see if the encoder has any connectors linked to it lets extract that to a helper similar to intel_crtc_has_encoders
0cc0d851ccf1746466822c1b7ce02c980406d57f	i40iw fix incorrect check for error in i40iw_ieq_handle_partial the check for is incorrect
4999e9621a58fa03fe18aa2ea55838bd2e755190	regmap fix possible sleep-in-atomic in regmap_bulk_write regmap deploys the spinlock for the protection when set up in fast_io mode this may lead to sleep-in-atomic by memory allocation with gfp_kernel in regmap_bulk_write this patch fixes it by moving the allocation out of the lock fix excessively large locked region broonie
7b87463edf3e2c16d72eeea3d1cf3c12bb5487c6	asoc rt5677 add of device id table the driver doesnt have a struct of_device_id table but supported devices are registered via device trees this is working on the assumption that a i2c device registered via of will always match a legacy i2c device id and that the modalias reported will always be of the form but this could change in the future so the correct approach is to have an of device id table if the devices are registered via of before this patch modinfo grep alias alias alias alias after this patch modinfo grep alias alias alias alias alias alias
70762abb9f89d97603a04cc3438988ca0cf886eb	i2c use stable dev_name for acpi enumerated i2c slaves current i2c adapter id client address x-00yy based device naming scheme is not always stable enough to be used in name based matching for instance within alsa soc subsystem this is problematic in pc kind of platforms where i2c adapter numbers can change due variable amount of bus controllers probe order add-on cards or just because of bios settings this patch addresses the problem by using the acpi device name with i2c- prefix for acpi enumerated i2c slaves for them device name x-00yz becomes after this patch
673abc4411ef9391b949aa43cc77fe42d6a8571d	staging tidspbridge remove use of __devinit config_hotplug is going away as an option so __devinit is no longer needed
b5a8fe439ab343631d905a51438db3de54ba94df	asoc core ensure snd_soc_bytes writes are from dma safe memory with some buses the transfers may dmaed especially for larger blocks
5d2043fbe4ddc6cc16ba71b49c2c13f4cb2fe932	clk composite pass mux_hw into determine_rate the composite clocks implementation can call the underyling callback corresponding to rate_hw or the underlying callback corresponding to mux_hw in both cases we pass in rate_hw which is wrong fixed by passing mux_hw into the correct callback
ab0d805c7b9089f9a9b291f33ab95301d6604868	uprobes turn copy_opcode into copy_from_page no functional changes rename copy_opcode into copy_from_page and add the new int len argument to make it more more generic for the new users
da9cc8de22aa6bd6ed51c406432d599ab520a6e3	clear the vgpu reset logic releasing shadow ppgtt pages is not enough when vgpu reset the guest page table tracking data should has same life-cycle with all the shadow ppgtt pages otherwise there is no chance to re-shadow the ppgtt pages without free the guest page table tracking data this patch clear the ppgtt reset logic and make the vgpu reset in working order v2 refactor some logic to avoid code duplicated v3 remove useless macro and add comments from christophe v4 keep reset logic in reset function
f9e5abcfc5b299a988cf8f9d0ad11e03da14806b	xfs use xfs_icluster_size_fsb in xfs_imap use xfs_icluster_size_fsb in xfs_imap
0185f6c9637211757256aef3f519202dcc54b231	staging ks7010 fix checkpatch multiple_assignments checkpatch emits check multiple assignments should be avoided move multiple line assignment to individual lines
5c77dc40c9fe957220b30c1334d8959be554e1d8	media use dev_ or pr_ printks in fixed below checkpatch warnings warning prefer netdev_infonetdev then dev_infodev then to printkkern_info warning prefer netdev_errnetdev then dev_errdev then to printkkern_err and add pr_fmt
c4c8d5796ce54e96885e227931986996b343a1d0	acenic convert to skb paged frag api
a103a75ad978592cf71b6d42c05849aacc76c2da	crypto n2 use these new helpers simplify implementing multi-driver modules and properly handle failure to register one driver by unregistering all previously registered drivers
800744bf31df54b0cd4d1104ccfa426d3f578f0e	thermal update thermal zone device after setting emul_temp this patch is to update thermal zone device after setting emul_temp in order to make governor work according to input temperature immediately
6539799599f50e9ce36da784ee0f545540a9732c	media tea575x-tuner mark vidioc_s_hw_freq_seek as an invalid ioctl the tea575x-tuner framework can support the vidioc_s_hw_freq_seek for only some of the tea575x-based boards mark this ioctl as invalid if the board doesnt support it this fixes an issue with s_hw_freq_seek in combination with priority handling since the priority check is done first it could return even though calling the s_hw_freq_seek ioctl would return it should always return enotty in such a case
2404271050e9cda4243876c9e3e8ff51e1fc1c09	staging comedi comedi_parport use helpers use the new helpers in the step __number__ tests of parport_intr_cmdtest
70591a4101a4e5c1b89dc98a706406368a23c8ec	refactor vlv_display_irq_reset pull the vlv display irq reset code to a new functions the aim is to share the code with chv
696324803396e6cc3f4b849d48fc3d4a9c20b289	staging rtl8723au decryptor use int to store error codes
f808e4ad05704d4ba0082fbb27640294c6fa4eae	rndis_wlan fix mix up with beacon_period in struct ndis_80211_conf is __le32 instead of __le16 so le32_to_cpu must be used instead of le16_to_cpu also correct beacon_interval variables used for passing this value forward from u16 to u32 and rename those variables beacon_period this is to avoid confusion because beacon_interval is defined as __le16 at other structure struct ndis_80211_fixed_ies
1af1275d8426bf0b57230ea68b2452016d51939d	staging rtl8187se make rtl8180_rates static fixes the following sparse warning warning symbol rtl8180_rates was not declared should it be
cf92549f1c95e0b1fd980828c35416dc2e548d2b	qla2xxx remove redundant null check before release_firmware call release_firmware checks for null pointers internally so checking before calling it is redundant
d09959e7529451a1c302197fb1396ed5b835f6d3	serial sh-sci fix length of scatterlist this patch fixes an issue that the length of scatterlist should be set using sg_dma_len otherwise a dmaengine driver cannot work correctly if
6ad560b4546af6943820f780610e544aaae218c0	mips compat implement is_compat_task by testing for address space so far is_compat_task was testing for registers if o32 support was enabled and if o32 support was disabled but n32 enabled it was testing for address space so if both o32 and n32 were enabled a n32 task was not considered a compat task whops this still leaves potential cases where o32 and n32 need different treatment unsolved but thats another commit
c2d9a4293ced88d7dad7c35c893a31f49f8b64f5	netfilter nft_log fix possible memory leak if log expr init fail suppose that we specify the nfta_log_prefix then nfta_log_level and nfta_log_group are specified together or nf_logger_find_get call returns fail expr init fail memory leak will happen
afc3cba5395a9f46de7cd50ba0e54a70b1d7b2b1	usb wusbcore fix string formatting warnings on builds this patch fixes compile warnings on builds that were introduced by the recent isoc changes
a3c97192fbc2fec6afa82a292c65adfd5cbde9b0	staging ozwpan remove useless return variables this patch remove variables that are initialized with a constant are never updated and are only used as parameter of return return the constant instead of using a variable verified by compilation only the coccinelle script that find and fixes this issue is type t constant c identifier ret t ret c when ret return ret return c
504f3c6d73650d2afeabb86e29bfeb465f2b15df	arm omap gpmc-nand drop __init annotation gpmc_nand_init will be called from another drivers probe function so the easiest way to prevent section mismatches is to drop the annotation here
85a50fb0d35f2a05f879d1a4e02123b56748530a	remove callback all the hard work was already done only thing left to do is remove the empty callback and a now rather misleading comment ive spotted while reading through code
644c7e48cb59cfc6988ddc7bf3d3b1ba5fe7fa9d	netfilter nf_conntrack_tcp fix stack out of bounds when parsing tcp options baozeng ding reported a kasan stack out of bounds issue it uncovered that the tcp option parsing routines in netfilter tcp connection tracking could read one byte out of the buffer of the tcp options therefore in the patch we check that the available data length is large enough to parse both tcp option code and size
4ef8c1c93f848e360754f10eb2e7134c872b6597	cfg80211 size various nl80211 messages correctly ilan reported that sometimes nl80211 messages werent working if the frames being transported got very large which was really a problem for userspace-to-kernel messages but prompted me to look at the code upon review i found various places where variable-length data is transported in an nl80211 message but the message isnt allocated taking that into account this shouldnt cause any problems since the frames arent really that long apart in one place where two possibly very long frames might not fit fix all the places that i found that get variable length data from the driver and put it into a message to take the length of the variable data into account the __number__ there is just a safe constant for the remaining message overhead its usually around __number__ for most messages
8f6a459a9daa6ce76d7c192f2cb3047fffb45ec8	mfd handle tps65910 clear-mask correctly the function is not actually cleaing the bitmask
4068487ce3dba22bdc7bf34e7327b474494430b5	greybus camera return the result flags from the configure_streams response and return the response num_streams field through a pointer variable instead of using the return value of the function as both an error code and a positive number of streams it makes the api more consistent
62906710182a7d079a69932a93ebd003caaa7135	ieee802154 remove set of mac address currently the ieee802154 interface operates on wpan interfaces only setting the wpan mac address over interface is complex and maybe we cant never do this this patch removes the set of mac address handling in ieee802154 interface for now
5179f59ecb0db585bd10bdad90594d9db0468015	acpica update to version __number__ version __number__
2f143240cb822c0d23ad591b89fe10e7c1f842f5	kvm vmx reset cpl only on cs register write
3b175621a217a354a0f38172381f8f88fe7a59be	staging xgifb refactor xgi_ajustcrt2rate refactor some conditions to reduce indentation and fix style warnings
9fded99ad7b94eae51d6d12c7016157deeedbb65	ath9k check explicitly for iq calibration in chips like ar955x the initvals contain the information whether iq calibration is to be done in the hw when an agc calibration is triggered check if iq-cal is enabled in the initvals before flagging txiqcal_done as true
68d35c7b3b1aa686e3039eb2626bf5e3ea8dbe81	parport fix freeing freed memory after the reference count becomes __number__ when put_device is called it will execute the release callback where we are freeing all the allocated memory associated with the device so if we just continue on the error path then we are again freeing devname and trying to dereference par_dev which has already been free-ed in the release callback
1061b0d21e16550e7d7893a5deee2e49ea3990ad	canonicalize macro page_aligned definition the macro page_aligned is prone to cause error because it doesnt follow convention to parenthesize parameter within macro body for example unsigned long page_alignedptr __number__ for the left parameter of macro is_aligned unsigned longptr __number__ is desired but the actual one is unsigned longptr __number__ it is fixed by simply canonicalizing macro page_aligned definition link
3b94a891667c30fb4624221497d77fc65d950345	remove sbox support for broadwell server there was a report that on certain broadwell-ep systems writing any bit of the sbox pmu initialization msr would at boot this did not happen on all systems my test systems booted fine considering both de and ep may have such issues this patch removes sbox support for all broadwell platforms for now link
d557894106f71cc23c9d053876d0c367c285950f	iwlwifi remove unneeded goto from iwl_dbgfs_log_event_read make code simpler a bit
16c79a04e262e51c790af4b074963dd592c617f2	smsc75xx enable power saving mode during system suspend this patch instructs the device to enter its lowest power suspend2 state during system suspend this patch also explicitly wakes the device after resume which should address reports of the device not automatically coming back after system suspend patch updated to change bug_on to warn_on_once
5e963a02b31c77f840af97246655443baed6d787	make scaler updates less chatty it looks to me skl_update_scaler will already log interesting debug messages when the state transitions or there is an error in this case it feels we can remove the two unconditional debug messages which happen immediately before calling skl_update_scaler this way we get rid of the sole debug message when switching virtual terminals for example link
5269b67e3d809dcaa4c6763a343423bb1b7b3fe6	btrfs fix missing log when btrfs_inode_needs_full_sync is set if we set btrfs_inode_needs_full_sync we should log all the extent but now we forget to take it into account and set a wrong max key if so we will skip the file extent metadata when doing logging fix it
dedc81ea8468fd29bdd13eb5a362cab96b53d802	rbd drop nothing ever uses the version field maintained in the object request structure any more so get rid of it
e18e33afa4011b0670e5040eda1b8a2d0b995e4e	gpu host1x channel use correct type find_first_zero_bit returns an unsigned long so make the local variable that stores the result the same type for consistency
ce715c772f0124f9d3f6f5cffcb85688c81d2c07	arm kprobes decode thumb branch instructions
cc179008425b419f7a0fcc0c145d6f69750184ff	staging wilc1000 rename u8index of struct join_bss_param this patch renames u8index of struct join_bss_param to idx to avoid camelcase naming convention
c5d7ddf70a8445f711f5ab9ab92bd4f59f993262	introduce nv_device_is_cpu_coherent add a function allowing us to know whether a device is cpu-coherent accesses performed by the cpu on gpu-mapped buffers will be immediately visible on the gpu side and vice-versa for now a device is considered to be coherent if it uses the pci bus on a non-arm architecture
f61e869d519c0c11a8d80a503cfdfb4897df855a	kcov simplify interrupt check in_interrupt semantics are confusing and wrong for most users as it also returns true when bh is disabled thus we open coded a proper check for interrupts in __sanitizer_cov_trace_pc with a lengthy explanatory comment use the new in_task predicate instead link
826f783a0eb15c6860d03af6d88eea3eaea34ff4	staging comedi ni_660x tidy up ni_660x_dio_insn_bits use some local variables to clarify this function this function is a bit different from most comedi drivers add some comments to clarify why the shifts are used
c86bc45d4185cf10d237956f8db5564ac160feb3	media media usb cx231xx cx231xx-audio dont print error when allocating urb fails kmalloc will print enough information in case of failure
0cddeac382a2ac846adef88eac7e254f38046d4b	staging vt6655 add space around add space around operator problem found using check spaces preferred around that
ddb4e767437c75858e9ad556e1a9477c6fffbefb	staging fixed sparse warning by removing unused variable proc_version
b74e7a26311a14f61fbcd516fb475dd79ea9c4b0	asoc rt5616 add static qualifier for file local symbols sparse reports below warnings warning symbol rt5616_aif_dai_ops was not declared should it be warning symbol rt5616_dai was not declared should it be these two symbols are just used inner the file thus its better to add static qualifier this commit adds it
5974150dead6da1db415f04a232f79b922f412a0	nfc trf7970a remove unnecessary fifo reset rssi read it is no longer necessary to reset the fifo and read the rssi levels and oscillator status register so remove that code
9435d09146b3ab31e399e6c6ff2cf225dd0955d8	mwifiex remove needless current_bssid variable this local variable is not used anywhere in function
c238f2343441e3995d2d4e993de42b072d005f4a	keep model defines sorted by model number for better maintenance keep it sorted by numeric model id add new lines to seperate model groups link
4f2fb455a1dcdf3cacf30382460c3706cf7e66d1	dont d_add for create only files this is only part of the original lustre commit splitted to remove d_add for create only files because the dentry is fake and will be released right after use lustre-change intel-bug-id
9e80f375e07c4d823e749ba9791c04958acf7f6b	remove braces in sd_prepare_reset fixed below checkpatch warnings braces are not necessary for any arm of this statement braces are not necessary for single statement blocks
fe9ec8291fcaa74badf0a67e3a82741b3ee40a9e	do_last take fput on error after opening to out make it conditional on file_opened in addition to getting rid of exit_fput thing it simplifies atomic_open cleanup on may_open failure
ca7d593e0ac8cf806aa750815daf12594345f5f6	fix compiler warning fixes this warning in function wf_smu_cpu_fans_tick warning passing argument __number__ of wf_sensor_get from incompatible pointer type note expected struct wf_sensor but argument is of type struct wf_sensor introduced by commit add useful accessors
57f7d509c8f60e66d69ac216a03ef39c5ea1ddb8	iio tmp006 use genmask
8f71c6c3157d12c90d3cf920dd5e94045679fdce	bluetooth dont write static address during power on since we always update the random address before enabling advertising scanning and initiating le connections there is no need to write the random address add power on
beb5ac20b3f90ffabac1eecd3c00205255df0728	netdev pasemi fix return value check in pasemi_mac_phy_init in case of error the function of_phy_connect returns null pointer not err_ptr the is_err test in the return value check should be replaced with null test dpatch engine is used to auto generate this patch
39e07daa46e34c724ad33f903d166a0a62c20900	xfs remove attr fork handling in xfs_bmap_finish_one we never do cow operations for the attr fork so dont pretend we handle them
dd41d514360430c506ce8cc3f5560ad3fb9e4c82	fix rc cannot detect pme message coming pci controller disable pme message report feature that shouldnt have happened fix it and enable pme message report feature
13fd3f9cc3def8b276c7913ae4acbfa2653cb198	i40e clear mac filter count on reset when a vf is reset it gets a new vsi so all of its mac filters go away correctly set the number of filters to __number__ when freeing vf resources this corrects a problem with failure to add filters when the vf driver is reloaded change-id i2acbecf734287b67473bb225293e14b5096acbef
46ffbe20d299bc80a0d4f5c2229c8eaf250a85f3	video fbdev use container_of to resolve cfb_info from fb_info use container_of instead of casting first structure member
0b37d20ca225f57fff9237bc75d11d3995c8fed6	nfs declare nfs_callback_tcp_port in header sparse warning sparse symbol nfs_callback_tcpport was not declared should it be
cece5d58d5568e4a7986e43981d21a80ea189a82	use vlv_dport_to_channel in vlv_signal_levels minor cleanup would be nice to use an enum for channel in the dpio macros so we dont mix up pipes and channels but thats for another patch
c44da62b55bb453052869ab095bcda7aa0bd6bba	alsa hda fix inconsistent monitor_present state until repoll while the previous commit fixed the missing monitor_present flag update it may be still in an inconsistent state while the driver repolls the flag itself is updated but the eld_valid flag and the contents dont follow until the repoll finishes and may be repeated for a few times the basic problem is that is updated in the caller side this should have been updated only in update_eld so the proper fix is to avoid accessing pin_eld but only
2900cd767180e9674947101fea96e318dc9b23eb	gpu ion loop on the handle count when destroying when destroying a handle all kernel mappings to that handle should be destroyed other handles may still have references and valid mappings to the buffer underneath which should not be destroyed loop on the handle reference count not the buffer reference count to get rid of all kernel mappings for the handle jstultz modified patch to apply to staging directory
a106b21a352517b57af1c3581e15b8787ffe4e98	arm dt do not add a zero-sized memory property some bootloaders are broken enough to expose an atag_mem with a null size converting such tag to a memory node leads to an unbootable system skip over zero sized atag_mem to avoid this situation
ff2ad3071f56697920a7154ca301fd45d17d57d2	bnx2x save ram in kdump kernel by using a single queue when running in a kdump kernel make sure to use only a single ethernet queue even if a num_queues option in would specify otherwise this saves memory which tends to be scarce in kdump this saves about __number__ mb in the kdump environment on a setup with in the config file
17b9b3b9e88ac6564689283a08034faf2c048fdb	arm imx6q clk parent di clocks to video pll via di_pre_sel route the video pll to the display interface clocks via the di_pre_sel and di_sel muxes by default
d34b1acb78af41b8b8d5c60972b6555ea19f7564	adjust generation of entropy to produce real __number__ bits the generate_entropy function used a sha256 for compacting together __number__ bits of entropy into __number__ bytes hash however it is questionable if a sha256 can really be used here as potential collisions may reduce the max entropy fitting into a __number__ byte hash value so this batch introduces the use of sha512 instead and the required buffer adjustments for the calling functions further more the working buffer for the generate_entropy function has been widened from one page to two pages so now __number__ stckf invocations are used to gather __number__ bits of entropy this has been done to be on the save side if the jitters of stckf values isnt as good as supposed
4d68e700d6a192a5a8b394b26ac056a1c0fa6ebc	media cx18 remove exclusive open of radio device for some reason the cx18 driver could open the radio device only once remove this limitation
0080b5da392243af673e752b5681e6388ede7da0	initialize the pps hw before its first use the initial dpcd read for edp detection involves using the pps but so far we only initialized the pps registers after the dpcd read the reason this was done so far is to preserve a possible lvds pps hw setup if lvds is detected but edp is not this is not an issue any more after the previous patch so we can move the init earlier now this was caught by ci with the pps sanity checks in place and the initial edp dpcd readout waiting for the panel power cycle timeout without the pps registers being initialized
b465646ef41f2f8a397f42a956d9788e898185d7	mmc sunxi sun4i sun5i do not have sample clocks it turns out that sun4i a10 and sun5i a13 co do not have sample clocks so add a new sun7i-a20-mmc compatible and do not try to use sample clocks on sun4i sun5i since sun4i sun5i do not have sample clocks they cannot reliably do ddr rates so only set mmc_cap_1_8v_ddr when we do have sample clks note this patch leaves the clk_prepare_enable clk_disable_unprepare calls to the sample clks as-is without adding checks for them being null all the clk_foo calls accept a null clk and will return success when called with a null clk
8ef54f27f6f425fa8deedc237d99b9daf41d68d2	pci xgene add support for a prefetchable memory window x-gene pcie controller has registers to support multiple memory ranges add support for a prefetchable memory window bhelgaas changelog
26370228875b823b9a90562619c509461f9b91ae	staging most prevent dma on stack this patch is needed to avoid having dma on the stack
3bc7bcf69bbe763359454b2c40efcba22730e181	selinux initialize structures libsepol pointed out an issue where its possible to have an unitialized jmp and invalid dereference fix this while were here zero allocate all the structures
753c5983ddd38022a680a36f5d66b23b185c9b62	add device tree support update the emma mobile gpio driver to add dt support the patch simply adds a two-cell xlate function and updates the probe code to allow configuration via dt using the ngpios property plus of id in the same style as the code is also adjusted to use postcore_initcall to force early setup
1b5bb662450fd34858613eedc1ba8bf3be560465	staging comedi ni_6527 remove unused defines these defines are not used in the driver remove them
43a340262ad46bb92d82c4ad119d5058bd246a26	dont call on the plain functions do the same thing and more and arent broken on some systems like
4ce107ccd714e54f7076aba585295421d30ad7f7	arm hwmod fix wrong sysc_type1_xxx_mask bit definitions in the sysc_type1_xxx_mask configuration sysc_xxx_shift macro is used which is not defined anywhere in the kernel until now the build was going through successfully since it is not being used anywhere in kernel this bug got introduced by the commit omap3 hwmod support to specify the offset position of various sysconfig register bits
78925b3a791b3ad485fe56d0b8951a5d043b7cae	regulator tps6524x remove redundant spi_set_drvdata driver core sets driver data to null upon failure or remove
fe194f19da971a114b0f65cf8267c1d42f3be87e	ib cxgb3 delay freeing mem untill entirely done with it sure its just the pointer value we use but the coverity checker complains about a use-after-free bug and it really does seem cleaner to delay freeing until we are entirely done with the memory so rearrange the code to move the kfree later untill we are completely done trivial and harmless but nice imho
81b85b6bd91e58bf800cbb3047aa74e61aff7bd9	alsa usb-audio replace void with more specific pointers
f94045ed19821cee923f79953f3f35a2de81f695	iwlwifi mvm reset thermal throttlings smps request upon disassociation the request of smps issued by the thermal throttling code was not reset when we disassociated fix that
4fbd9a4539e4eda1e9588509eb31e9dc38ffd653	use err_cast inlined function instead of __number__ the semantic patch that makes this change is available in more information about semantic patching is available at
6cf0bf0dfba6e1dfea061db2eef48ea2cbff68da	regulator sky81452 remove module version the module version is unlikely to be updated use kernel version should be enough
4d5755b147665912c938504033d958f1115b68ff	epoll optimize setting task running after blocking after waking up a task waiting for an event we explicitly mark it as task_running which is necessary as we do the checks for wakeups as task_interruptible once running and dealing with actually delivering the events were obviously not planning on calling schedule thus we can relax the implied barrier and simply update the state with __set_current_state
810ec78e9a5d7de845598e8816370bcb2ccabf32	usb serial metro-usb fix idproduct for uni-directional mode the right idproduct for metrologic bar code scanner in uni-directional serial emulation mode is also rename idproduct for bi-directional mode to be a bit more informative
d4fa2ab067be4635ea6e53fafd53624ccec5d191	staging vt6656 clean up s_nsbulkinusbiocompleteread clean up white space and camel case camel case changes pdevice priv prcb rcb breallocskb re_alloc_skb
e94610cc1c8f2cc1154c941cbc2d91723f85b60c	ath9k allow tx99 for ar9002 based cards as there is current support for ar9002 tx99 mode just allow to init debugfs and enable tx99
046ca5f7e10c476a6fd762c1561cc07f259f97a8	staging rtl8723au suspect code indent for conditional statements correct a number of indentation-with-spaces-and-tabs issues in rtl8723aus according to warning suspect code indent for conditional statements
ae547354a8ed59f19b57f7e1de9c7816edfc3537	save and restore debounce registers gpio debounce registers need to be saved and restored for proper functioning of driver as part of dynamic context save to remove overhead
2917e7181589f859ac1e00ba1b3decbbfc2549bb	usb dwc3 cache hwparams earlier so they are available when ulpi interface support is added
fa2bbce985ca97943305cdc81d9626e6810ed7f2	x86 copy struct boot_params early we want to support struct boot_params formerly known as the zero-page or real-mode data above the __number__ gib mark we will have handler to set page table for not accessible ram early but want to limit it before x86_64_start_reservations to limit the code change to native path only also we will need the ramdisk info in struct boot_params to access the microcode blob in ramdisk in x86_64_start_kernel so copy struct boot_params early makes it accessing ramdisk info simple link
df2643cfa4ad4f3775838ad0c0815c465f351f92	regulator replace set_voltage with set_voltage_sel to apply delay time for voltage change replace s5m8767_set_voltage with s5m8767_set_voltage_sel
f8b33d8e870758ccff13e5f81fd5050b52a42d35	net_sched dsmark use qdisc_dequeue_peeked this fix is for dsmark similar to commit net_sched prio use qdisc_dequeue_peeked and makes use of qdisc_dequeue_peeked instead of direct dequeue call first time wrr peeks dsmark which will then peek into sfq sfq dequeues an skb and its stored in next time wrr tries to dequeue from dsmark which will call sfq dequeue directly this results skipping the previously peeked skb so changed dsmark dequeue to call qdisc_dequeue_peeked instead to use peeked skb if exists
07187ee13f2b4ba183d4a4832ea153dbb2e030d3	rtc vt8500 use define instead of hardcoded value for status bit fixes the vt8500 driver to use a define value for the isr is-alarm bit
c42705592be2a539f3027b6f3907de8e8f9591a8	nvme mark cmd_ctx_cancelled as being unlikely
bca7bafbe2b75ed31cc6943b81218ea0f8a13686	ath10k drain tx before restarting hw this makes sure no further tx requests are submitted to htt before driver teardown this should prevent invalid dereference on htt tx pool in ath10k_htt_tx in some cases of heavy traffic kvalo remove the warn_on if conf_mutex is held
c84400c89f0f98ae4a73ed89886239b67d1dcd31	unplug bitmap to sync dirty pages to disk this patch is doing two distinct but related things __number__ it adds bitmap_unplug for the main bitmap as bit have been set bitmap_page_dirty is set so bitmap_deamon_work will not write those pages out in its regular scans only bitmap_unplug will if there are no writes to the array bitmap_unplug wont be called so we need to call it explicitly here __number__ bitmap_write_all is a bit of a confusing interface as it doesnt actually write anything the current code for writing bitmap works but this change makes it a bit clearer
94d7ba991fe0dd245babc8f227ad5fabe234303f	acpica update version to __number__ version __number__
6ef818ee3544ec344cb289a81693d10ad480d2e0	arm omap3 omap3evm adapt to ehci-omap changes use usbhs_init_phys to register the phys reset regulator and the nop phy device vaux2 supplies the phys vcc
657254714ad2ba69b73fcb02f0b1db378b1f220e	asoc io remove support for asoc cache in conjunction with regmap since all regmap codecs should be and are using the more advance regmap cache infrastructure remove the code which supports that and just proxy straight through to regmap
79f7dfa549ad5828912a7a126253d47bf6be7684	staging wilc1000 revert staging wilc1000 remove spaces around this reverts commit staging wilc1000 remove spaces around it had applied from a incorrectly commit a1b56a4c5054 staging wilc1000 removes unnecessary log messages
3883cd56b536f4ed3c1abd24bfea798ffb7164e1	staging wlan-ng remove unnecessary parenthesis in this patch removes unnecessary parentheses in different statements of file in order to to comply with the standard kernel coding style
2d8e60e8b0742b7a5cddc806fe38bb81ee876c33	replace numeric parameter like __number__ with macro i find that the developers often just specified the numeric value when calling a macro which is defined with a parameter for access permission as we know these numeric value for access permission have had the corresponding macro and that using macro can improve the robustness and readability of the code thus i suggest replacing the numeric parameter with the macro
ddf7059ce5dfa28e30380524983db94868fa9083	rtc as3722 drop irqf_early_resume flag as3722 rtc irq is nested threaded and wired to the as3722 inerrupt controller so this flag is not required for nested irqs anymore since commit genirq dont suspend nested_thread irqs over system suspend was merged
24c0e6838cb4888366008bd36e0a77a995b18bb7	vxlan simplify if clause in dev_close dan carpenters static checker warned that in vxlan_stop we are checking if vs can be null while later we simply derreference it as after commit vxlan move socket initialization to within rtnl scope vs just cannot be null in vxlan_stop anymore as the interface wont go up if the socket initialization fails so we are good to just remove the check and make it consistent
de6feda884b0079f5f232a41d94da23d198ff230	spi dw eliminate speed variable in there is no point to have a separate variable for speed in while here remove from a condition since it is assigned simultaneously with we can do this safely because a transfer speed cant be higher than max_freq and therefore can be __number__ only when is __number__ and b transfer speed cant be __number__ otherwise we will get division by zero exception
8b2bd7aefa79021b15fa5e79b1676e170370aad2	hwmon via686a use permission-specific device_attr variants use device_attr_ro for read-only attributes this simplifies the source code improves readbility and reduces the chance of inconsistencies the conversion was done automatically using coccinelle it was validated by compiling both the old and the new source code and comparing its text data and bss size groeck updated description
15c6e3aae68d6167cba063387a59968f811c8268	f2fs fix to unlock f2fs_lock at the omitted error case if it occurs an error we should call f2fs_unlock_op
7a9cc1ad213df8a90a0753d522fa53f95e21fc10	arm imx add clocking support code for the imx50 soc add code to support the specific clock tree of the freescale imx50 soc it can use much of the common clocking code
2b9e9f779cb29f25102d4e7f14df557ead58e659	media mt9v032 fix pixel array size the active pixel array size is with __number__ additional black rows at the top fix the driver accordingly
0d4b5c7c0892cb377cc71c388433425f598b902b	mwifiex fix version display problem on big endian platforms its been observed that wrong firmware version ex instead of is displayed on big endian platforms the problem is fixed here
33a2285d96b5e7b9500612ec623bf4313397bb53	scsi scsi_pm set device runtime state before parent suspended there is a race in scsi_bus_resume_common when set devices runtime state to active after parent device may have been suspended so pm_runtime_set_activedev will fail with
98a44504541c6befb28366eb9ec432ba44070dd9	allow vblank to be disabled
44e1312c68e71a25f9f88ada7d124f5bbeaf879e	remove always false comparisons this patch removes some comparisons that always evaluate to false since xoffset and yoffset are defined as __u32 in fb_var_screeninfo in and thus can never be negative
9b562639a1dbef847dfc9daa807bd3e7e02ef24f	dma coh901318 set residue only if dma is in progress when status is dma_success the residue should be zero otherwise its a bug
1e5660999aa7703654ec345caaf06b83415dbdff	arm mcpm factor out logical-to-physical cpu translation this patch factors the logical-to-physical cpu translation out of mcpm_boot_secondary so that it can be reused elsewhere
9482d0d37b46d2bd968d357bbd912cae49caf163	bump version for cik dce tiling fix note when cik dce tiling was fixed
c4730a92766dacc336f6740c5c1e6181334ef316	staging ks7010 unify naming to ks7010 no anymore this is confusing add a comment saying that old versions were probably named
25906730ec01be664534c9439d7cf5a373e8a4e4	alpha reorganize copy_process prepare to saner fork_idle
dc1b4c2b88b976a7882922e55666b20e28477c57	fm10k fix incorrect ipv6 extended header checksum check for and handle ipv6 extended headers so that tx checksum offload can be done also use skb_checksum_help for unexpected cases this was originally discovered in ixgbe
2344ef3c86a7fe41f97bf66c7936001b6132860b	sh_eth fix branch prediction in sh_eth_interrupt iiuc should apply to the whole statements expression not a part of it fix such expression in sh_eth_interrupt
5d0a654974c5cac03ce7c577bcfd6bca0f2b2c5a	xfs free bp in xlog_find_zeroed error path xlog_find_zeroed currently leaks a bp on one error path using the bp_err target resolves this found by coverity
a695c302b49c8bf10b5336585a533d363d6436db	greybus audio added jack_type support in topology struct this patch adds extra field jack_type to gb_audio_topology struct also it defines bit fields to be used by module while defining its jack and jack-button capabilities currently module can populate a single jack and associated buttons in case multiple jacks are supported data routing say duplicating etc should be handled within modules fw it can populate additional mixer controls to do so
c33ec32692e1f2f4650f7bf5bb1108bb346b82a4	f2fs avoid f2fs_balance_fs call during pageout this patch should resolve the following bug info possible irq lock inversion dependency detected not tainted just changed the state of lock at __address__ f2fs but this lock took another reclaim_fs-read-unsafe lock in the past and interrupts could create inverse lock ordering between them other info that might help us debug this chain exists of possible interrupt unsafe locking scenario cpu0 cpu1 local_irq_disable deadlock this bug is due to the f2fs_balance_fs call in f2fs_write_data_page if f2fs_write_data_page is triggered by via kswapd it should not call f2fs_balance_fs which tries to get a mutex grabbed by original syscall flow
bb334e90cc3a2913906665ea966abd7f462b67c2	xhci correct to print the true hsee of usbcmd correct the print of hsee of usbcmd in
92e50d2d42d7cb9fcd816b47b580622032d38293	exofs dont mess with and dont zero anything on short copy just unlock and return __number__ if that has happened on non-uptodate page
7eb7497e555e84d1cedb847416acbc337c874d15	remove unused best_clk variable
88a25a5fa09dff62b5fc1e82fb9c0c6b23971887	rbd use kmalloc_array in rbd_header_from_disk a multiplication for the size determination of a memory allocation indicated that an array data structure should be processed thus use the corresponding function kmalloc_array this issue was detected by using the coccinelle software delete the local variable size which became unnecessary with this refactoring
800ee2247f483b6d05ed47ef3bbc90b56451746c	btrfs fix crash in case reproducer mount mount gives a crash its a call new_pool_size with null as scrub wqs get created only on users demand patch skips not-created-yet workqueues
440379c54b537021d519ccf3f5aab47d48fe07c6	staging rtl8192e rename rtl8192_parse_pci_configuration use naming schema found in other rtlwifi devices rename rtl8192_parse_pci_configuration to _rtl92e_parse_pci_configuration
c7e1eae537652330cec3fbf5f8f50000b2f24269	omapfb remove silly loop in fb2display fb2display has a for loop which always returns at the first iteration replace the loop with a simple if this removes the smatch warning fb2display info loop could be replaced with if statement
f51b4ce6c1759a64d68d314545854dc226ab69a0	f2fs shrink size of struct seg_entry restructure struct seg_entry to eliminate holes in it after that in machine it reduces size from __number__ bytes to __number__ bytes in machine it reduces size from __number__ bytes to __number__ bytes
13c34fe518624e27589827aa49f68f5f38c95f11	initialize iommu domain page size since d16e0faab91 iommu allow selecting page sizes per domain the iommu core demands the page size to be set per domain otherwise any mapping attempts will be dropped make sure to set a valid page size for the etnaviv iommu
9ed66cb502e050650c319633f096a1c14b0470e2	net phy icplus fix checkpath error
133fe8fa614175eb7e59599dbfe357c7bc7da851	mtd nand pxa3xx return error code of nand_scan_ident on error the nand_scan_ident returns an appropriate error value when it fails use it instead of the fixed error code this driver is already doing so for nand_scan_tail
e7984b7bee2fca8f582f5bc2bf1e6c93420a5dd5	perf script add comm filtering option allows collecting events system wide and then pulling out events for a specific task names perf script applies on top of update documentation use comm_list from symbol_conf link
001b7f3ecd164ba748e45f698714b3a574a11438	arm fix compile error when fb_omap2 is not set otherwise we will get error expected before token
4cb55ca1dbd992436a090d05d0e1ab17ea749447	staging tidspbridge use scm functions to set boot address and mode instead of ioremapping scm registers use the correspondent layer to write into them this allows us to get rid of a layer violation since the registers are no longer touched by driver code
2b0f6eae2dd2f7f21dbf93241938a687f6757dea	ocfs2 add missing return value check of ocfs2_get_clusters in ocfs2_attach_refcount_tree and ocfs2_duplicate_extent_list if error occurs when calling ocfs2_get_clusters it will go with unexpected behavior as local variables p_cluster num_clusters and ext_flags are declared without initialization
39c0029e60fe72da96dabfef5b469184d2011fcd	media m88ds3103 use kernel macro to round division div_round_closest does the job and looks better
179949bc04c7157a4b2279f62a842638b61f78f9	asoc simple-card remove when dt f687d900d30a61dda38db2a99239f5284a86a309 asoc simple-card cpu_dai_name creates confusion when dt case removed when dt case since it uses dt phand in soc_bind_dai_link this binding will fail if it has cpu_dai_name asoc simple-card handle many dai links added multi dai link support to simple-card driver then removing cpu_dai_name was cared only single dai but it is needed in all dt cases this patch moves it to asoc_simple_card_dai_link_of so that care about all dais
8e15e762cddf68a401df5c6aa45da3c27712e856	asoc intel skylake use a helper macro to rounding-up calculation in theres a helper macro to round numerical value lets use it
12823178332216daa76512d256dbdacb5ba76ea7	greybus hd fix gb_hd_release tracepoint the recently added gb_hd_release tracepoint was added to the wrong function
61cda87f33be22828c3b52863da1c456ba108d37	arcmsr add code to support hibernation this patch adds code to support system hibernation
9510dc4c62252e96dca44a94948327c76774f25b	btrfs stop leaking btrfs_bios on readahead
ac619f4eba45da10053fc991f8a5d47b3be79fa3	x86 serialize smp bootup cmos accesses on rtc_lock with cpu hotplug there is a theoretical race between other cmos namely rtc accesses and those done in the smp secondary processor bringup path i am unware of the problem having been noticed by anyone in practice but it would very likely be rather spurious and very hard to reproduce so to be on the safe side acquire rtc_lock around those accesses link __number__
61bd405f4edcf7396cc7853e48212342feead06d	virtio_pci_modern fix complaint by sparse warning incorrect type in argument __number__ different base types expected unsigned int noderef usertype got restricted __le32 noderef usertype warning incorrect type in argument __number__ different base types expected unsigned int noderef usertype got restricted __le32 noderef usertype warning incorrect type in argument __number__ different base types expected unsigned int noderef usertype got restricted __le32 noderef warning incorrect type in argument __number__ different base types expected unsigned int noderef usertype got restricted __le32 noderef warning incorrect type in argument __number__ different base types expected unsigned int noderef usertype
aa538aca9fb4a197464f5926c7b5d7050e9144b1	ath10k wake up device before accessing registers commit ath10k disable pci ps for qca988x and qca99x0 partially reverts pci soc powersave support added by commit ath10k enable pci soc powersaving while reverting the change pci wake up function is called after accessing pci registers instead of prior to access the assumption is that chip is woken up before accessing its this change does not fix any known issues this might help to avoid unknown or low power platform specific issues
67b90c67205149173dc0cfdc46039be92fa390b6	i2c omap1 set ip revision in platform data all omap1 are using ip revision __number__ in terms of register layout we set this information in omap1_i2c_add_bus so we dont have to use cpu_is_xxx any more in the omap i2c driver
5b5f252d67afd7bd5b923c664206d60800bf5054	serial exar fix initialization of exar registers for ports __number__ so far pci_xr17v35x_setup always initialized fctr co for port __number__ because it used the address of that port instead of moving the pointer according to the port number fix this and remove the unneeded temporary ioremap by moving default_setup up and reusing the membase it fills into the port structure
e60bc2df9ba5574af87a8d0fa249ceac9fa1d3bd	pinctrl use err_cast instead of this doesnt change semantics just looks nicer
f45dc26deda00d77ae96b11612c353fff7d93e09	gfs2 remove extraneous function gfs2_security_init this patch eliminates function gfs2_security_init in favor of just calling security_inode_init_security directly
45d351031e1326a4d0a988c776f23673f7e1ffd2	staging comedi dmm32at convert a printkkern_err to a convert this printk message to a dev_err message
720ce6e4b1ba83aa1ed526a47d36852ac6a25d7e	usb c67x00 use dev_get_platdata use the wrapper function for retrieving the platform data instead of accessing directly
3084f2f80cc8a1fd66233722d88beac0fe85e26f	rcu go dyntick-idle more quickly if cpu has serviced current grace period the earlier version would attempt to push callbacks through five times before going into dyntick-idle mode if callbacks remained but the cpu had done all that it needed to do for the current rcu grace periods this is wasteful in most cases once the cpu has done all that it needs to for the current rcu grace periods it will make no further progress on the callbacks no matter how many times it loops through the rcu core processing and the idle-entry code this commit therefore goes to dyntick-idle mode whenever the current cpu has done all it can for the current grace period
397d0773a9044c8df1be87e53840ab374932d80c	gpio altera use gpiochip data pointer this makes the driver use the data pointer added to the gpio_chip to store a pointer to the state container instead of relying on container_of
3ebe8344eb8a4214c09424bf8094025c8bf61823	net ks8851 drop eeprom_size structure member after commit ksz8851-snl add ethtool support for eeprom via eeprom_93cx6 this structure member is unused delete it
3c22e2326015e79822837aaa44eaf15249f8af7b	hwmon smm665 fix checkpatch error fix error macros with complex values should be enclosed in parenthesis also updated multi-line comments to follow
6f8528e0bea76850a153a98e47ad60aecf112801	greybus loopback add more clean up when init connection fails it should remove the object from sysfs when loopback connection init error
fb6c6f2529e7c87a99a2f85ae1bb5b3c468482ff	use rather than counting them instead of counting number of gso fragments we can use
e42bb9bfbb43366cd1899c9564d043c41ebd8852	asoc fsi bugfix enable master clock control on dma stream dma stream handler didnt care about master clock this patch fixes it up
2118f4b8dfc666c3e4a9e262beca79636a0852fe	move hash table off stack to fix large frame size the new testcase that checks phandle consistency was using a hash table on the stack which made the frame size much large than it should be fix the problem by moving the hash table into the file scope
952c3aa3fb5538aa5026980cfdedb3d38829b67e	use correct names and type for state indicate the bit number of predefined states make use of these names and change the state type in _resume to u8 to avoid type casting
c2edc021633490b6491de4ec6cbaa369f956bb36	staging comedi adv_pci1724 tidy up the register map for aesthetics convert the enum board_registers into defines and rename them so they have namespace associated with the driver
4480a688b2beaa82ecac269b6e21bf1a26251bf9	serial sh-sci report cts as active for get_mctrl sets hardware up and then let the hw do all flow controls there is no software code nor needs to real cts signal but when turning crtscts on through termios uart_set_termios in checks cts and stops tx if it is inactive at the moment because sci_get_mctrl returns a fixed value but cts the sequence open set crtscts write hit the case and stop working no more outputs this patch makes sci_get_mctrl report cts in addition
a4379fd841cc1af60ef495b8e5598b1f7327ec0c	verify device has config space some devices might not implement config space access remoteproc used not to before __float__ needs config space access so make it fail gracefully if not there
ec6521a20431723ff4fa15fdefb386184075baa2	staging comedi me_daq cleanup me_dio_insn_bits this function only needs to update the output channel state when the mask data0 indicates that the state is changing its also supposed to return the state for all the input and output channels in data1 this function appears to work correctly but its coded quite differently form the other comedi drivers rework the function so it follows the normal form also use a couple local variables for the mmio addresses used to the dio ports
69fee6885f6042d0d3d3773b208a84e7bb161650	char synclink remove warn_on for bad port count tty_port_close_start already validates the port counts and issues a diagnostic if validation fails
385895fef6b5f4723e33d0e58251c45bc708132d	pci pciehp prioritize data-link event over presence detect if slot status indicates changes in both data link layer status and presence detect prioritize the link status change when both events are observed pciehp currently relies on the slot status presence detect state pds to agree with the link status data link layer active status the presence detect state however may be set to __number__ through out-of-band presence detect even if the link is down which creates conflicting events since the link status accurately reflects the reachability of the downstream bus the link status event should take precedence over a presence detect event skip checking the pdc status if we handled a link event in the same handler
050b3b1830386e5c8884804b841d4e83c57cf0de	staging comedi das16m1 use helpers use the new helpers in the step __number__ tests of das16m1_cmd_test
2dad7b2775ea030c898fe4946971edd25af237d1	ixgbevf handle race between close and suspend on shutdown when an interface is part of a namespace it is possible that ixgbevf_close may be called while ixgbevf_suspend is running which ends up in a double free warn a bug in free_msi_irqs to handle this situation we extend the rtnl_lock to protect the call to netif_device_detach and check for to avoid entering close while in suspend also added rtnl locks to ixgbevf_queue_reset_subtask
9e2f7d827912609a71a53d625ee27d29dfbf87e0	dma omap set debug level to debugging messages the channel messages are just informative and not really interesting to users change them to debug level
17d899df4678a19b6715e225e2c2d175151887a7	f2fs fix the wrong stat count of calling gc with a partition which was formated as multi segments in one section we stated incorrectly for count of gc operation for a partition with segs_per_sec __number__ cat gc calls __number__ bg __number__ data segments __number__ __number__ node segments __number__ __number__ gc called count should be __number__ data segs __number__ node segs __number__ __number__ rather than __number__ fix it
9aa3853a6f6652901f7ae42ed6bfd85a11bdc795	arm shmobile bock-w add ether support register ether device from bockw_init passing the platform data to it adding only the rmii pin group to bockw_pinctrl_map although the link signal exists on the board its connected to the led output of the phy thus the link disappears and reappears after each packet wed be better off ignoring such signal and getting the link state from the phy indirectly manually applied
33c89c30afd7b6a309638d8d9b88481118d0a3ec	asoc mfld use devm_snd_soc_register_card devm_snd_soc_register_card makes code simpler
59fb3d58c5284b42d93262a4690291e9c0e78fe6	use irq_set_chip_handler_name_locked __irq_set_chip_handler_name_locked is about to be replaced use irq_set_chip_handler_name_locked instead link
90126375d89ab8e0bde30ff22139b6097d56ed8a	push lruvec pointer into get_scan_count
4cfc3a40f723761a5d374adc618245dca5c895fb	edac sync memory types and names make keeping the sync between the mem_types enum and the actual string names simpler by using designated initializers
69870a847856a1ba81f655a8633fce5f5b614730	return more precise error from xen_remap_domain_range callers of xen_remap_domain_range need to know if the remap failed because frame is currently paged out so they can retry the remap later on return in this case this assumes that the error codes returned by xen are a subset of those used by the kernel it is unclear if this is defined as part of the hypercall abi
00a327c05c31a19ae2e36cdb556ad283a751fc4b	arm omap mcbsp remove unused variables from platform data these variables got unused after mcbsp was converted to use resource structures
e56a316214d0f1e2446fa7a717309f9414564d9d	nfsd4 free_stid can be static
bdb7d964c4fb73078ab21c20e8c7b7bf7e641bb6	f2fs assign segments correctly for direct_io previously we assigned curseg_warm_data for direct_io but if we have two or four logs we do not use that type at all lets fix it
14d405699634d4ce0adfc7b4f52ac7427220a98d	returning free pointer in get_domain_for_dev if we hit this error condition then we want to return a null pointer and not a freed variable
0d17aea5c27d7d748b1d8116d275b2b17dc5cad6	mips kvm use cp0_ebase when appropriate update the kvm entry point to write cp0_ebase as a register when it is wide and to set the wg write gate bit if it exists in order to write bits or on mips32 prior to mips64r6 it was undefined to perform a read or write of a cop0 register since this is dynamically generated code generate the right type of access depending on whether the kernel is and cpu_has_ebase_wg
0e13064d91414bc49e98a916d9a4ded041404868	asoc wm8961 replace the codec field of the snd_soc_widget struct is eventually going to be removed use instead
03c633e73353d3c116cab6164933d69ee2180470	pktgen use ip_send_check to compute checksum
1ba5bf993c6a3142e18e68ea6452b347f9cb5635	xfrm fix crash in xfrm_msg_getsa netlink handler if we hit any of the error conditions inside xfrm_dump_sa then xfrm_state_walk_init never gets called however we still call xfrm_state_walk_done from xfrm_dump_sa_done which will crash because the state walk was never initialized properly we can fix this by setting only after weve processed the first element and checking this before calling xfrm_state_walk_done
a9e0a4f2ca5e97ae2cff0bda72b9645e047c1a3d	cnic re-init after chip reset because bnx2x frees the old and allocates new memory during chip reset
80dea21f95a4672cce545f48dc2ca500b69a2584	iio magnetometer mag3110 claim direct mode during raw writes driver was checking for direct mode but not locking it use helper functions to guarantee the device stays in direct mode during raw writes
70f438c61636a194d7c3fa341fa72353ba0090f6	mtd dont specify default parsing options since cmdline null is now a default for parse_mtd_partitions dont specify this in every driver instead pass null to force parse_mtd_partitions to use default
3518721a8932b2a243f415c374aef020380efc9d	smack user access check bounds some of the bounds checking used on the interface was lost when support for long labels was added no kernel access checks are affected however this is a case where could be used incorrectly and fail to detect the error this patch reintroduces the original checks targeted for
e210101dbbabee7677f63f15796572404e3d54ce	arm realview ensure that we have sufficient irqs available realview eb with a rev b mpcore tile results in lots of warnings at boot because it cant allocate enough irqs fix this by increasing the number of available irqs warning at cannot allocate irq_descs irq96 assuming pre-allocated modules linked in backtrace from __number__ from from from from from from from end trace cut here warning at modules linked in backtrace from __number__ __number__ from from from from from from from from end trace cut here warning at modules linked in backtrace from __number__ __number__ from from from from from from from end trace
656687769487b736674f111b92cef6ba6a31dea6	bluetooth add smp flag for sc and set it when necessary this patch adds a new smp flag for tracking whether secure connections is in use and sets the flag when both remote and local side have elected to use secure connections
d3352154041e28cf8c1c260cca41d8e83d5377d8	tty serial uartlite specify time for sending chars xilinx mdm microblaze debug module also contains uart interface via jtag which is compatible with uartlite driver this interface is really slow thats why timeout is setup to make this time delay not to be cpu speed dependent
362ad5d58e9ae54d15abbe4822e626be907308fe	fs jfs replace current_time_sec by current_time jfs uses nanosecond granularity for filesystem timestamps only this assignment is not using nanosecond granularity use current_time to get the right granularity
0f444c24dd00ba562483d5825f9757e0f933d813	add ring_emit_cntxcntl missing for gfx6
7978a583b1d4413f4e58b145081a4a93d94398f7	dmaengine sirf fix un-exported struct warnings the sirfsoc_dmadata structs are not used outside the driver so remove build warnings by making them static fixes warning symbol sirfsoc_dmadata_a6 was not declared should it be warning symbol sirfsoc_dmadata_a7v1 was not declared should it be warning symbol sirfsoc_dmadata_a7v2 was not declared should it be
853fc892239b4fb1b4d8a80b6d8c3f65061ff5bb	staging comedi rti800 fix rti800_ao_insn_write this board has two independent analog output channels each channel has its own converter each channel can be set to output a unipolar or bipolar signal this selection is handled by a jumper on the board and configured by the user with options5 and __number__ passed during the attach of the board the two channels can also be configured with jumpers to use straight binary or twos complement data the user configures the data type with options6 and __number__ when attaching currently this driver uses the selection option6 for both channels fix the rti800_ao_insn_write function to properly use the configuration specified by the user change the dac01_coding in the private data to a simple bool array dac_2comp add some local vars to hold the registers offsets needed to write to the dac only the last value written to the dac needs to be cached for readback
940a3fcddc76f82ac4e80dfa7bccb236e9bec0a1	be2net use error status when interface is down updating vfs tx-rate and fw-download are not allowed when the interface is down in such cases return to the stack
858274b6a13b4db0e6fb451eea7f8817c42426a7	debugobjects reduce contention on the global pool_lock on a large smp system with many cpus the global pool_lock may become a performance bottleneck as all the cpus that need to allocate or free debug objects have to take the lock that can sometimes cause soft lockups like nmi watchdog bug soft lockup stuck for rip __address__ __address__ call trace __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ to reduce the amount of contention on the pool_lock the actual kmem_cache_free of the debug objects will be delayed if the pool_lock is busy this will temporarily increase the amount of free objects available at the free pool when the system is busy as a result the number of kmem_cache allocation and freeing is reduced to further reduce the lock operations free debug objects in batches of four link
dbc6e0222d79e78925fe20733844a796a4b72cf9	delousing target_core_file a bit set_fskernel_ds getname is probably the weirdest implementation of strdup ive seen especially since they dont to copy it at filp_open never returns null its on failure is never going to be null tyvm match_strdup snprintf kfree is a bloody weird way to spell match_strlcpy pox on cargo-cult
3197ce220c821b869731872251f2e225c37cbbb0	i40e dont allocate zero size shockingly the compiler didnt flag this uninitialized variable this fixes a potential memory corruption condition where arq messages are written to random memory locations change-id iac82f4562d2bf3f42df3f3b2163d9cbed2160135
4e9267f1b42b4f7b66214161b55f1f73365692cd	arm ioremap register bank instead of computing virtual address with at91_va_base_sys use the appropriate ioremap call on the driver memory resource
fa29ae5f221860e22a7346d89ae38a28ed104045	acpi processor_perflib simplify code and stop using cpufreq_start acpi_processor_ppc_notifier can live without using cpufreq_start which is gonna be removed soon as it is only used while setting ignore_ppc to __number__ this can be done with the help of ignore_ppc __number__ check alone the notifier function anyway ignores all events except cpufreq_adjust and dropping cpufreq_start wouldnt harm at all once cpufreq_start event is removed from the cpufreq core acpi_processor_ppc_notifier will get called only for cpufreq_notify or cpufreq_adjust event drop the return statement from the first if block to make sure we dont ignore any such events
9f9df00accb343f61a5782904af10366a18ebb5a	arm vic always use simple ops now that irq_domain_simple_ops are available for non-dt users use them in the vic driver so that we dont get a null dereference in irq_domain_to_irq when registering the domain
07d938822a1a105ae806f9fc263bc0b86d71935a	dm cache metadata remove an extra newline in dmerr and code
cfa2b54eca28103d07e5334aa06b78321fbe1d9a	crypto arc4 fixed coding style issues fixed coding style issues unnecessary spaces parentheses on wrong lines
f9aed311b682ca933ca78821cce3e4f1d69d4f56	net_sched sch_choke defer skb freeing choke_reset and choke_change can use rtnl_qdisc_drop to defer expensive skb freeing after locks are released
ae2cb1ac60758e99cec15e9edd68e0d22bfd310e	perf probe fix to close probe_events file in error fix perf-probe to close probe_events file if it failed to get existing probes name this also fix the return error code to link
76347609ae082a0d4bad223f0b076c51bb006b16	video pm3fb remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
c59e6abba9dd7bc273c3dd389ae9927d1da88f35	asoc wm8971 cleanup manual bias level transitions set the codec drivers suspend_bias_off flag rather than manually going to snd_soc_bias_off in suspend and snd_soc_bias_standby in resume this makes the code a bit shorter and cleaner since the asoc core now takes care of setting the bias level to snd_soc_bias_off when removing the codec there is no need to do it manually anymore either the manual transition to snd_soc_bias_standby at the end of codec probe can also be removed as the core will automatically do this after the codec has been probed
d0ee68b59e6aa33221445dc555efac3736b89026	usb phy mxs add vf610 usb phy support this adds support for the usb phy in vybrid vf610 we assume that the disconnection without vbus is also needed for vybrid tests showed without mxs_phy_need_ip_fix enumeration of devices behind a usb hub fails with errors __float__ usb usb1-port1 cannot reset err __float__ usb usb1-port1 cannot reset err __float__ usb usb1-port1 cannot reset err __float__ usb usb1-port1 cannot reset err __float__ usb usb1-port1 cannot reset err __float__ usb usb1-port1 cannot enable maybe the usb cable is __float__ usb usb1-port1 unable to enumerate usb device hence we also enable the mxs_phy_need_ip_fix flag
391420f7b829e73b26a543e39c40a83f7de6467c	fec use an unique mdio bus name
2743179d955bd7313bb68517d9d0de57b0b873f7	execlists cannot pin a context without the object given that the intel_lr_context_pin cannot succeed without the object we cannot reach intel_lr_context_unpin without first allocating that object so we can remove the redundant test link
893134b084e137b92476ec11ce90790b5f568bb9	staging r8188eu array overflow in rtw_mp_ioctl_hdl max_mp_ioctl_subcode __number__ and mp_ioctl_hdl __number__ elements are no longer in sync it leads to a bogus pointer dereference
94858feccaada3f1810ff50dd21d33b1d4d95d56	staging lustre libcfs remove unnecessary cast on this patch does away with the cast on void as it is unnecessary semantic patch used is as follows expression x e type t identifier f t t void e
0fd64e8213772829788309f269e15bcb28c34195	reduce missing tps3 support errors to debug logging per spec tps3 support is mandatory for downstream devices that support hbr2 weve therefore logged errors on hbr2 without tps3 since commit date thu sep __number__ __number__ ignore link rate in tps3 selection however it seems there are real world devices out there that just arent spec compliant and still work at hbr2 using tps2 so reduce the error message to debug logging bugzilla cherry picked from commit bfcef5d2135ea1200ac1ea44661619ab8785c9f0
a238dcfa84bcd9d5d0ceba3fa66a335f233f8f1b	i2c davinci raw read and write endian fix i2c ip block expect le data but cpu may operate in be mode need to use endian neutral functions to registers instead of __raw_readlw and __raw_writelw functions code need to use readlw_relaxed and writelw_relaxed functions if the first simply register the second will byteswap it if host operates in be mode changes are trivial sed like replacement of __raw_xxx functions with xxx_relaxed variant
3f3aaea29ff7ee2d43b430338427f30ba7f60ff9	move code around to allow for better re-usage we are going to be using the early_alloc_p2m and early_alloc_p2m_middle code in follow up patches which are not related to setting identity pages hence lets move the code out in its own function and rename them as appropiate
f9524e6f5447277e238b419afc3d0712941fa2a5	do the mc_saved_src null check first and only then deref it also shorten some variable names and rename others so as to diminish the ubiquitous presence of the mc_ prefix everywhere and make it a bit more readable use kcalloc so that we dont kfree uninitialized memory on the unwind path as suggested by quentin
440924bbc0e11fb429ccc25f6d9597d5a7a02296	fou call setup_udp_tunnel_sock use helper function to set up udp tunnel related information for a fou socket
44db113212d86a5870c2bfe8fb767fa842d68805	pch_uart delete unused structure member
95829b3a9c0b1d88778b23bc2afdf5a83de066ff	net suppress warnings on dev_alloc_skb noticed an allocation failure in a network driver the other day on a __number__ bit system dma-api debugging out of memory disabling bnx2fc adapter_lookup hba null lldpad page allocation failure pid __number__ comm lldpad not tainted call trace ixgbe ixgbe ixgbe ixgbe ixgbe ixgbe ixgbe ixgbe thought that perhaps the big splat in the logs wasnt really necessecary as all call sites for dev_alloc_skb a check the return code for the function and b either print their own error message or have a recovery path that makes the warning moot fix it by modifying dev_alloc_pages to pass __gfp_nowarn as a gfp flag to suppress the warning applies to the net tree
aa59802dedac98dc95310a456121cec6a9d6b63f	regulator fix return code from regulator_disable_deferred schedule_delayed_work returns a bool indicating if the work was already queued when it succeeds so we need to squash a true down to zero
f26842926d203285517069acff3d2d5eedb39556	staging rtl8187se fix assignment of bool to this patch fixes the following coccinelle warnings warning assignment of bool to warning assignment of bool to
a06e56b2a11b5f7d5354b05988f97118c90580d2	audit log audit_tty_set config changes log transition of config changes when audit_tty_set is called including both enabled and log_passwd values now in the struct
03da0e7ba9e3a1fc700f60913ff6bcb19f7eac2a	parse device tree earlier parsing the device tree may cause probing to be deferred doing this as early as possible prevents any other resources from being requested and enabled therefore reducing the need to cleanup on deferred probe while at the same time not wasting precious cpu cycles determining if probing needs to be deferred or not
98d1bbddc6415cef0bcf0da88e0ff86e08e51737	staging lustre fix space requirement around in the patch fixes the following error in error spaces required around that
3087b905c4050afeb1847fb0fcf89b3e09f6ffee	arm mach-shmobile sdhi0 gpio hotplug for ag5evm implement gpio hotplugging via tmio_mmc_has_cold_cd for ag5evm sdhi0 this is possible now when intca is used for irq triggering on sh73a0 without intca irq support we are left with the gic hardware block that does not support dealing with active low interrupt sources
ff91afc90a736c97f24dec31e642411563906cfb	wl12xx clear on resume we set on every suspend so we need to clear it on every resume we cant rely on setting in suspend as it being called only when wowlan triggers are configured
c5f79f6a0c70a390d07bcea4d7df6219f78e0904	media trivial davinci fix typo in correct spelling thresold to threshold in
860cd64d102d9b6c97830e09c447a9a850ea7641	iommu fix trace_map to report original iova and original size iommu_map calls trace_map with iova and size trace_map should report original iova and original size as opposed to iova and size after they get changed during mapping size is always zero at the end of mapping which is useless to report and iova as it gets incremented it is not as useful as the original iova change iommu_map to call trace_map to report original iova and original size
c1b5371b72644907a9b81a7cd8eabb32f04466d1	clk renesas cpg-mssr always use the renesas driver core uses a mix of and to access the clock registers settle on the generic
cc34eb672eedb5ff248ac3bf9971a76f141fd141	sch_sfq revert dont put new flow at the end of flows this reverts commit d47a0ac7b6 sch_sfq dont put new flow at the end of flows as jesper found out patch sounded great but has bad side effects in stress situation pushing new flows in front of the queue can prevent old flows doing any progress packets can stay in sfq queue for unlimited amount of time its possible to add heuristics to limit this problem but this would add complexity outside of sfq scope a more sensible answer to dave taht concerns who reported the issued i tried to solve in original commit is probably to use a qdisc hierarchy so that high prio packets dont enter a potentially crowded sfq qdisc
c93f5463e35a95c8cad5deb4ad5d32b0eb913abd	staging lustre fix warnings warning null check before freeing functions like kfree debugfs_remove debugfs_remove_recursive or usb_free_urb is not needed maybe consider reorganizing relevant code to avoid passing null values null check before some freeing functions is not needed based on checkpatch warning kfreenull is safe this check is probably not required and by julia lawall generated by
2136683172f49a32b3ed7469f6e5ce20c8f4278b	arm plat-nomadik use div_round_closest use div_round_closest to calculate the cycle counter for the periodic mode instead of relying on homebrew reimplementation
67923f779b8d9d210c5ec98ffb68d9fe5a68df18	asoc rsnd enable src sync even fin fout current src sampling rate converter is supporting sync mode and async mode current cares src if fin fout here sync mode will be used for tweak so it will be used even fin fout this patch enables src sync in such situation
1873c58d4a45bd4d7104ba1482fcd9c3bd094cd1	fix phy identification with multiple slaves on fixed-phy when using more than one slave with ti cpsw and fixed phy the will be always zero but must be unique means a phy hardware id whereas means an unique id so we should use which has the same unique meaning
528948745f6f52f36839b76beeab0632a9f16471	move irq handling out from irq disabled section on vlv no need to actually handle the interrupt while we have interrupt sources disabled move the actual processing to happen after weve restored vlv_ier and master interrupt enable
a50d761f6d5ea360515dd425ef08a54d3b3836ba	asoc alc5623 replace the codec field of the snd_soc_widget struct is eventually going to be removed use instead
085fb6171f0b7d726250026e363c06d3c4d54312	arm lpc32xxx add ul suffix to vmalloc_end to ensure it is properly typed
4eb313a7a939a983c525648227b5fe0a9d41679f	sh_eth fix misreporting of transmit abort due to obviously missing braces transmit abort interrupt may be reported even if it hasnt happened just when transmit descriptor write-back interrupt happens luckily is disabled by the driver via the trimd register and all the interrupt masks so that transmit abort is never actually put the braces where they should be and fix the incoherent comment while at it
99d00a2bd3c4f24ef90960a563f6f190e81e4ed3	avoid compile warning in sclp_pci_report fix the initialization of a local variable to remove this warning all warnings new ones prefixed by in function sclp_pci_report warning missing braces around initializer struct sclp_req req warning near initialization for
39a4d9ca77a31503c6317e49742341d0859d5cb2	stop searching for tasks in newidle balance if there are runnable tasks it was found that when running some workloads such as aim7 on large systems with many cores cpus do not remain idle for long thus tasks can enqueued while doing idle balancing in this patch while traversing the domains in idle balance in addition to checking for pulled_task we add an extra check for for determining if we should stop searching for tasks to pull if there are runnable tasks on this rq then we will stop traversing the domains this reduces the chance that idle balance delays a task from running this patch resulted in approximately a performance improvement when running a java server workload on an __number__ socket machine link
9031a939185b65f1d8eda2c8f7cd30472496dc9a	mfd rtsx_usb make mfd_cell array const mfd_add_devices expects array of struct mfd_cell to be const
fd591341102ba5eb9e517d3889e7566fa45e021e	pci support sizing p2p bridge windows with granularity some bridges support windows with alignment not just the alignment defined by the pci spec for example see the iobl_adr register and the en1k bit in the cnf register in the intel p64h2 this patch adds support for sizing the window in increments based on the requirements of downstream devices bhelgaas changelog comment
cd687a4073d58b5763ed085b942302714f0fa73d	staging gdm72xx remove unnecessary memset of netdev private data the memory for struct net_device private data is allocated using in alloc_netdev_mqs thus there is no need to zero it again in the driver
fabed38fcf456cc5d3e6946fab78855aa65bd40b	bluetooth fix hci_update_random_address error return for no crypto if the aes crypto context is not available we cannot generate new rpas we should therefore cleanly return an error from the function responsible for updating the random address
e21bf3388b960bce8dd2d7bc17331f3b8020fd9f	staging lustre remove extra parentheses around left bit shift operations removes extra parentheses around bitwise left shift operations the cases handled here are when resultant values are assigned to variables the issue was detected and resolved using the following coccinelle script expression e e1 constant c e identifier i constant c type t expression e t i expression e e1 identifier f constant c e1
437b75123ca5ee36897bfcd1272e96109bed3ea1	acpica events reduce source code difference in acpi_install_gpe_handler there is a sanity check in acpica upstream complaining mis-matched interrupt type for originally enabled gpes that are going to be dispatched by ospm handlers this is only a warning message noting developers such conflict between bios and ospm this patch ports this warning message from acpica upstream to reduce source code difference between linux and acpica upstream
6f0f54499f2edf7e25410cdd99e6f030f3485fd1	nvme return real error from nvme_create_queue nvme_setup_io_queues was assuming that a null return from nvme_create_queue was an out-of-memory error thats not necessarily true the adapter might return for example change the calling convention to return an err_ptr on failure instead of null
cbc3b873c8a152fb76a0d4d5697319d9beda3d85	pinctrl sirf fix the pins of sdmmc5 connected with trig sdmmc5 has only __number__ pins cmd clk data which are connected with csr trig rf multi-gnss the hardware connection is like data gps_sgn clk gps_rf_clk cmd gps_mag here we drop redundant pins in sdmmc5 group
1cefa326ff26dddb2c4a7f43802ce0ba5c35a2ba	disable async events before unregister_netdev it does not make sense to allow events while the netdev is unregistered
8b62fa59ed62bf1f42d35360fae8592c6b816a06	perf tools fix report dso_to for data without branch info the branch field sorting code assumes is allocated which is wrong and following perf session ends up with report segfault perf record ls perf report dso_to perf segmentation fault checking that is valid and display string in snprint callback if its not link
9089e3be60b13a1114e8afdc37c605e75cfc4a26	vmci fix to pass correct device identity to free_irq free_irq expects the same device identity that was passed to corresponding request_irq otherwise the irq is not freed
e010a2a04c3179c342e370e93ffb7d13eaf90dc4	staging gdm724x fix misplaced open braces this patch fixes the following issues in error that open brace should be on the previous line
cddcd72bcec3b1dc9cef7f17d724a7fe42d64cc1	nvme disable irqs in nvme_freeze_queues the queue_lock needs to be taken with irqs disabled this is mostly due to the old pre blk-mq usage pattern but weve also picked it up in most of the few places where we use the queue_lock with blk-mq
e6b9a3b225b804a2683bc173c1261a9ce4a561a0	staging lustre llite file remove unneeded null test before free kfree can cope with a null argument so drop null tests the semantic patch that finds this issue is as follows expression ptr if ptr null kfreeptr in the first case llss can never be null at the point of the kfree anyway in the second set of changes the gotos are either eliminated when no freeing is needed hss failure case or rewritten so that there is no call to free on data that has not yet been allocated free_hss goto case there is no goto at which attr is not null so the out label is simply dropped
044cb69c53f286673b6809641f9c0ce929f9f221	powerpc little endian fix for
962ea1c0df6c5a36f4477aa4a10f4acc0f5f56bd	scsi qedi set firmware tcp msl timer value
3288d5cb40c09213e86d67b5cab09de1deb65a5c	spi sun6i update max transfer size reported the spi-sun6i driver have already got the ability to do large transfers however the max transfer size reported is still fifo depth __number__ update the max transfer size reported to the max value possible
b030fb0bb113316cc6f56779388b8572ab0699da	sunrpc use proper network namespace in rpcbind rpcbproc_getaddr procedure pass request socket network namespace to rpc_uaddr2sockaddr instead of hardcoded init_net when decoding address in rpcbproc_getaddr procedure
e5e1b1663f2b3620eed11ac9faf83cd652d6fcd3	staging imx-drm fix line over __number__ characters fix issues with line over __number__ characters in
d93abd15c84bd2598d0b59ab93f72bf3527cf51a	staging sm750fb make internal functions static this patch declares externally unavailable functions static this fixes the following sparse warning symbol hwi2cwaittxdone was not declared should it be warning symbol hwi2cwritedata was not declared should it be warning symbol hwi2creaddata was not declared should it be
ab6380ef01983e977c147cb8bb040f57e4fe2d55	pci sgihp iterate over all devices in slot not functions iterate through devices in a slot by using the upstream bridges list instead of assuming they are functions its possible there are several slots on the same pci_bus so restrict it to only devices matching this slots device number ari which allows functions is a pcie-only feature and this is a pci hotplug driver so we shouldnt find anything other than functions but its better to iterate the same way as other hotplug drivers bhelgaas changelog check pci_slot fix disable_slot
8db21ad469fda194913db2c5b11635bcc21345fc	arm sunxi add the new watchog compatibles to the reboot code now that the watchdog driver has new compatibles we need to support them in the machine reboot code
69191afef3c889992de643af7c318c9a8a1750c0	iwlwifi mvm fix default disabled aggs in sta for the add_sta command when the flag for aggregation disabling is set there is a bitmap indicated what tids are disabling aggregations and what arent currently by default all tids allow for aggregations since the value we begin with is __number__ change this default value to __address__ so all tids dont allow aggregations until explicitly turned on
c945a1d1189428101c357220ee25f6adc906a7de	staging comedi adl_pci9118 store the pci_dev in the comedi_device use the hw_dev pointer in the comedi_device struct to hold the pci_dev instead of carrying it in the private data
b8909783a22b4f169ade830e0aa6dafe313426f1	asoc imx-audmux fix section mismatch audmux_debugfs_init is marked as __init but is called from imx_audmux_probe which is not marked as __init this creates a section mismatch and a potential runtime crash if imx_audmux_probe is called after the section was dropped this patch removes the __init annotation from audmux_debugfs_init which fixes the following warning warning section mismatch in reference from the function imx_audmux_probe to the function
c517202f3cf1cd189259c50d55622d8c7ab16eb2	atm convert to skb paged frag api
32805c350bad16e7d4debe55820d2e79dca89fb6	usb dwc2 gadget fix gadget unregistration in udc_stop function udc_stop should clear pointer unconditionally to let the udc framework to work correctly with both gadgets and gadgets by writing to interface
f049729c05cc5338174d52e2bee6678131da5e08	mips kvm fix preemptable calls there are a couple of places in kvm fault handling code which implicitly use smp_processor_id via kvm_mips_get_kernel_asid and kvm_mips_get_user_asid from preemptable context this is unsafe as a preemption could cause the guest kernel asid to be changed resulting in a host tlb entry being written with the wrong asid fix by disabling preemption around the call and the corresponding kvm_mips_host_tlb_write
9b35db028f7f5c375ab9cef095ea48250d4c15ff	staging comedi dmm32at remove final attach noise and fix return value the success message after an attach is just added noise remove it the normal return value for success is __number__
0f847584a84cfe2bb24d82df516d745db840bb5f	tg3 clean up unnecessary capability find pci core will initialize device capability in pci_msi_init_pci_dev so device driver should use to determine whether the device support instead of using pci_find_capabilitypci_dev access to pcie device config space again will consume more time
954911ebb1cb5c965a127ec9c0fc86c069c71cf9	simplify platform specific code in hsw_write_wm_values no functional change
aa4f853461aab5f526a312bf418091a95626632b	remove unused sp parameter in unwind_dump the sp parameter to unwind_dump is unused remove it link
20d14a5d377a6265c2e89986d052f79dff922217	tg3 move from to move init and deinit of ptp support from functions to funcs to avoid of associated ptp devices during v2 tg3_ptp_init call moved to correct place thx prashant
4ad169300a7350a034b86c543070aed109882a86	vxlan make vxlan_xmit_one void the function vxlan_xmit_one always returns netdev_tx_ok so there is no point in keeping track of return values etc
b9a81b2b739b8e364a32a2aecf357a9d29e7cc18	i40e increase reset delay increase reset delay to ensure all internal caches are properly flushed in worst case scenario change-id i6f059a9e024fbf9ef1debd32497eed21369957fc
ef3be45722317f8c2fb0e861065df0c3830ff9ac	btrfs check unused against how much space we actually want there is a bug that may lead to early enospc in our reservation code weve been checking against num_bytes which may be above and beyond what we want to actually reserve which could give us a false enospc fix this by making sure the unused space is above how much we want to reserve and not how much were trying to flush thanks
3e1f49011973ff3e67014d03cac50593004cee3c	usb serial fix whitespace issues minor whitespace clean ups
c002831a07ddba2a81fe1172c497ec7e673ba720	b43 n-phy use helper for checking ipa
2afc5d49d03ffcd36ef5a50a52709539911ceb00	staging comedi prefer using the bit macro use the bit macro to define the register bits
f74b5e253a062004c1d30177f9889501423e403d	asoc fixup multi-platform module build failure commit asoc support multi-platform introduced some build failures for modules wanting to access the generic soc_ac97_ops for example error soc_ac97_ops undefined to fix export soc_ac97_ops to modules
1010bb1b80edb0713415dfe1f97114d320f58c4f	mm dont set __gfp_write on writes there is not much point in skipping zones during allocation based on the dirty usage which theyll never contribute to and wed like to avoid page reclaim waits when writing to etc
76ee4735781713eed1b9754837715a0b3b231dcd	add __init to init_inodecache init_inodecache is only called by __init init_ufs_fs
36e8fe990153d015d9bb1d36f5bd70ec5b205204	asoc wm_adsp add speaker tx as a firmware option
e0e80a02e5701c8790bd348ab59edb154fbda60b	cpuset use rebuild_sched_domains in cpuset_hotplug_workfn in cpuset_hotplug_workfn partition_sched_domains is called without hotplug lock held which is actually needed stated in the function header of partition_sched_domains this patch tries to use rebuild_sched_domains to solve the above issue and makes the code looks a little simpler
080108c4747c7378c3601b8584237484f977d8a8	alsa follow channel position definitions to alsa-lib mixer there is already a set of channel position definitions in alsa-lib and itd be more practical to keep the same order for the pcm channel map too the value is shifted with __number__ to keep zero for unknown
f3b4e55ded9b3c52831a7d2ab9e511293c99fc11	libceph drop version variable from ceph_monmap_decode its set but not used ceph_feature_monnames feature bit isnt advertised which guarantees a v1 monmap
6d30240e3d68f1da7303801f840132d0821f1767	cfg80211 remove strict validation of akm suites nl80211_attr_akm_suites can be used to configure new akms like ft or the sha-256 akms or ft from in addition vendor specific akms could be used the current validation code for the connect command prevents cfg80211-based drivers from using these mechanisms even if the driver would not actually use this akm value it uses ie from user space mac80211-based drivers allow any akm to be used since this value is not used there remove the unnecessary validation step in cfg80211 to allow drivers to decide what akms are supported in theory we could handle this by advertising supported akms but that would not be very effective unless we enforce all drivers including mac80211 to advertise the set of supported akms this would require additional changes in many places whenever a new akm is introduced even though no actually functionality changes may be required in most drivers
1204c77f9b6ab8ba8cc6cfe00342f5e64a740cdf	make isdigit table lookupless make isdigit into a simple range checking inline function return __number__ c c __number__ this code is __number__ branch not __number__ because any reasonable compiler can optimize this code into so the code while isdigitc remains __number__ branch per iteration however it suddenly doesnt do table lookup priming cacheline nobody cares about link
d60ce62fb5949ea6bf09323462c15d05c9e76200	netfilter nf_tables add set_elem notifications this patch adds set_elems notifications when a set_elem is all listening peers in userspace will receive the corresponding notification
f2e37b9b733c720de917aa7616cce3a1c52225eb	media rtl2832 fix compiler warning the daily build in function rtl2832_read_status warning tmp may be used uninitialized in this function else if tmp __number__ the code is ok its just the compiler that cannot figure out whats going on so just init tmp to __number__
848496e5902833600f7992f4faa82dc1546051ba	wait up to for the pcu to ack the cdclk change request on skl bspec tells us to keep bashing the pcu for up to when trying to inform it about an upcoming change in the cdclk frequency currently we only keep at it for whatever delays gets added by the sandybridge_pcode_read itself lets change the limit to i decided to keep __number__ usec delay per iteration for now even though the spec doesnt really tell us to do that
a8763f33c55b74c26e4532e1893d2dcf6d038abe	i2c imx propagate irq error code in probe smatch rightfully says i2c_imx_probe info why not propagate irq from platform_get_irq instead of
82268083fa78452c1c8be30a82984e470d9678c7	kvm x86 emulation of call may use incorrect stack size on long-mode when far call that changes takes place the stack size is determined by the new mode for instance if we go from mode to mode the stack-size if __number__ kvm uses the old stack size fix it
db0446d0e2a059d3961210664a08dcd8104e448b	staging comedi pcl812 interrupt handlers should not busywait the interrupt is only generated by the hardware at the completion of an conversion because of this the sanity check to make sure that the conversion is complete and data is available is probably unnecessary but it doesnt hurt anything the busywait loop is a different issue interrupt routines should not busywait thats just remove the bustwait and use pcl812_ai_eoc to check for the end-of- conversion
a0f995a561d90636120bce2e89157b537a174c92	mac80211 add status_driver_data array to ieee80211_tx_info drivers might want to have private data in addition to all other fields the current overlaps with some of the non-rate data ampdu_ack_len so it might not be good enough since we already know how much free bytes remained simply use this size to define void array while on it change ack_signal type from int to the more explicit s32 type
a56a8a3c4979b0c968a53ab9cdbf6887e8e6ba1e	staging comedi amplc_dio200 add helpers to get board layout add inline helper function dio200_board_layoutboard to get a pointer to the board layout data for a board add inline helper function dio200_dev_layoutdev to get a pointer to the board layout data for a comedi device this function is currently unused but will be used by a later change
9b6130227495fdaf17f8b3b28db083666b113c84	re-allocate ddb only for changed pipes when a display update triggers a ddb re-allocation we should start by assuming that only the updated pipes need to be re-allocated we have logic later that may add additional pipes if a modeset triggers a change to the global allocation we were erroneously using the _active_ pipes as our starting point rather than the changed pipes this causes us to grab crtc locks that we didnt actually need reducing parallelism given the recent non-blocking atomic changes it also causes legacy pageflips against one crtc to return if theres an outstanding pageflip against a different crtc a situation easily triggered via compositors like weston
66841672161efb9e3be4a1dbd9755020bb1d86b7	blk-mq mark request queue as mq asap currently is used widely to decide if the queue is mq or not so we should set the flag asap so that both block core and drivers can get the correct mq info for example commit dynamic context count moves the hctxs initialization before setting in blk_mq_init_allocated_queue then cause blk_alloc_flush_queue to think the queue is non-mq and dont allocate command size for the per-hctx flush rq this patches should fix the problem reported by sasha
06e34dfb8567585eed11ab39fc2a39192b66500d	remove usage of ret in ft1000_open remove the ret and do a simple return ft1000_submit_rx_urb
eff9662547f358239b98dfc4a8e6905b494e14d6	revert kthread pin the stack via in to_live_kthread function this reverts commit now that struct kthread is kmalloced and not longer on the task stack there is no need anymore to pin the stack link
3611431ce7281a6542d47bd5b2fc2206fed5749f	i2c i2c-imx replace platform_driver_probe to support deferred probing subsystems like pinctrl and gpio rightfully make use of deferred probing at core level now deferred drivers wont be retried if they dont have a function specified in the driver struct fix this driver to have that so the devices it supports wont get lost in a deferred probe
ac8f392678da1d9839fdd10e3d5a0c9400b544fa	media e4000 fix build error all in function e4000_set_params undefined reference to __umoddi3
72675479925f53af051ae8a78bcfafeaa47b3eef	ehci replace with bit-mask operation this patch as1610 replaces multiplication and divison operations in ehci-hcds isochronous scheduling code with a bit-mask operation taking advantage of the fact that isochronous periods are always powers of __number__
16669befb0772eac6a76057b7010ba5b419c0e78	pm wakeirq fix wakeirq setting after wakup re-configuration from sysfs now wakeirq stops working for device if wakeup option for this device will be reconfigured through sysfs like echo disabled echo enabled once above set of commands is executed the devices wakeup_source opject will be recreated and field will contain null as result device_wakeup_arm_wake_irqs will not arm wakeirq for the affected device hece lets try to fix it in the following way check for field when device_wakeup_attach is called and if re-attach wakeirq to the device
5f0049bd69b96537dc7c02755c169fb4ccca3ddf	media v4l2-ctrls fix integer overflow in v4l2_g_ext_ctrls a large from userspace may overflow the allocation size leading to memory corruption v4l2_g_ext_ctrls can be reached from subdev_do_ioctl or __video_do_ioctl use kmalloc_array to avoid the overflow
b07ddcdcb28764d4deb26933d803cb38c370f01b	pinctrl sirf put gpio interrupt pin into input status automatically busses like i2c spi and so on can parse the virq of their subnode automatically by irq_of_parse_and_map for example i2c will do that in of_i2c_register_devices people can put hwirq number attached to a gpio controller in dts and drivers can directly request the parsed virq for example for an i2c client as below compatible interrupt-parent interrupts reg in i2c client probe it will without calling gpio_direction_input so here when we set irq type we also put the pin to input direction
7341d908af307a34098a9da52f49037d815c868f	staging hv vmbus check for events before messages the windows team has informed us that on windows guests on hyper-v they check for events before messages they also recommended that we do the same this patch addresses this
5688d6705532657af0088148b4f4f620844084cf	scsi lpfc remove lpfc_fcp_look_ahead module parameter
43d3fa3a0491168ad769d20d5cbae45492509d43	libnvdimm pmem fix up max_hw_sectors there is no hardware limit to enforce on the size of the that can be passed to an nvdimm block device so set it to uint_max
139d28826b8e2bc7a9232fde0d2f14812914f501	media cx231xx fix the max number of interfaces the max number of interfaces was read from the wrong descriptor
bf55b48371d1ca6ee64152753b359924e3cfcbcd	staging xgifb disable pci device on pci remove function
763b8cd31493f452094fd0eaeedb8cad37c756a2	ath10k add chip_id file to debugfs so thats its possible to query chip id from ath10k anytime
dba83476966b725736f99afb7d80c945c06ba6dc	power supply sbs-charger simplified bool function
aae5d55a24f74d429f32895cf73b9839d0d5e6e1	ll_revalidate_dentry update there are a couple of cases in ll_revalidate_dentry where we are pretty sure the dentry is valid so check for them early and save more expensive checks for later
05a24b9b7fe6ad58315044d11f343cc6e36073af	fix spelling mistake unexepected unexpected trivial fix to spelling mistake in iser_err error message
8c46bb703b28ea481c28bc77f2595b32d5dacea9	iwlwifi first enable rf kill interrupt then check register this can solve a race very unlikely to happen though
83bffc8125de274ea8fae106dffc873738d755b9	staging lustre remove braces for single statement in this patch fixed warning braces are not necessary for single statement blocks found by in
c41d9663252e766e65cc06b82618c11ecf697acb	revert scsi use device_remove_file_self instead of device_schedule_callback this reverts commit de1dee7820c44b1a5765265ed7ca8ee44f2367c1 tejun writes im sorry but can you please revert the whole get_active waiting while a node is deactivated has potential to lead to deadlock and that interface is something fundamentally flawed and that cgroup will have to work with the remove_self like everybody else iow i think the first posting was correct
ba47e3865e8023e79b670793a41508222b5f0322	nvme wait for device to acknowledge shutdown a recent update to the specification makes it clear that the host is expected to wait for the device to acknowledge the enable bit transitioning to __number__ as well as waiting for the device to acknowledge a transition to __number__
2da9e1d6d4ae4cde1ad6d9e365417aabf466c665	staging hv vmbus get rid of vmbus_acpi_exit by inlining the code get rid of vmbus_acpi_exit by inlining the code
6d1b80fd886937ad4d6169ffa78cb0075eebce53	fix operation may be undefined warning gcc complains about an undefined operation warning operation on may be undefined the intended operation was probably to retrieve the pageindex __number__ and let it wrap around if it reaches the num_pages
df4b2233ab387fc508f4206cdf5546570136ebd0	fold ipu_plane_disable into ipu_disable_plane ipu_disable_plane is the only left caller of ipu_plane_disable having those __number__ similar named functions is confusing and superfluous so fold them into __number__
f435ab79928e4d54082e2838c4562a165e37999c	arm hw_breakpoint kill warn_once usage warn_once is a bit ott for some of the simple failure cases encountered in hw_breakpoint so use either pr_warning or pr_warn_once instead
322fe2d1beb7b381640999b48a7fb136e0870bb3	cc2520 update initial transmit power value cc2520 has the default transmit power level on reset this patch update initial value of transmit power with value
a41b816c174409417d91b4ceef0145c9f0bef67c	blk-throttle fix null pointer dereference in throtl_schedule_pending_timer i have encountered a null pointer dereference in throtl_schedule_pending_timer __float__ bug unable to handle kernel null pointer dereference at __number__ __float__ ip __address__ __float__ pgd pud pmd __number__ __float__ oops __number__ smp this is caused by the following case blk_throtl_bio throtl_schedule_next_dispatch sq is top level one without parent throtl_schedule_pending_timer sq_to_tgsq returns null fix it by using sq_to_td instead of which will always return a valid td
6e4862a5bb9d12be87e4ea5d9a60836ebed71d28	jbd2 minimize region locked by j_list_lock in journal_get_create_access its not needed until we start trying to modifying fields in the journal_head which are protected by j_list_lock
aaab4951a688e4c3f43e0ce09855718e9ad5060d	media mxb simplify a line that was too long
2fcdb66364ee467d69228a3d2ea074498c177211	remove duplicated definition remove duplicated definition for resource size in which are already defined in need only one to take effect
a0e17b4e3e09e49d218958fdce09da407573a574	asoc staticise rx51_aux_dev
9c95e01e84e31178b9a83b683a501ed76166c259	incorrect allocation of available_scanmasks longs are not known for being __number__ bits
e94a4062c88e5245fef91ceac86788ae336f755b	asoc sgtl5000 refactor registering internal ldo the code for registering the internal ldo was present twice turn it into a function instead also inform the user if ldo is used now
97b20ef784388753becb41b27876a048e905fe9b	md handle read-only member devices better if an array has any read-only devices when it is started the array itself must be read-only a read-only device cannot be added to an array after it is started setting an array to read-write should not succeed if any member devices are read-only
aa1dd80f80ccf3a47227ab42625e7bbacd5ff272	pinctrl intel unlock on error in intel_config_set_pull we need to unlock before returning on this error path
d98ef50fd99585e43b77b5ac5943e4450031a18e	be2net fixed memory leak
a7a484bfca218f9671a3e3bc98851eab6b628310	at86rf230 fix is_tx while error handling this patch fix the error handling when is_tx is true the error handling tries to get the transceiver into rx_aack_on mode then we need to be sure that is_tx is false
007afa8bd3e9adaa277b6f9451659e0974bde923	staging fbtft move operator for logical continuation move up to the previous line to fix the checkpatch issue logical continuations should be on the previous line
eec99f2079df0f58c346652f03f3c18c6799bd79	mips loongson-3 remove deprecated irqf_disabled this removes the use of the irqf_disabled flag from its a noop since patchwork
ecb11d8c28aa7fe761467873e69a3c5c66b57aed	staging comedi dt282x introduce dt282x_ao_setup_dma introduce a helper function to read the analog output samples from the async buffer and prep the dma use comedi_buf_read_samples to read the analog output samples from the async buffer
9c8f55798a9d716daed4de6d7038a21c3ca6e673	input sentelic silence some underflow warnings i have a static checker that complains when we check for an upper bound but dont have a corresponding check for a lower bound with this code the upper bound check seems not really required so it is not a bug to leave the lower bound check out as well but lets silence the warning by making these variables unsigned
2cee611af8638d80d3abb71f878829a7e998bb44	cosmetic globals cleanup complains about globals being explicitly zeroed out error do not initialise globals to __number__ or null new globals introduced in this patch set have no explicit __number__ initialization clean up the old ones to make it less hairy
7df3a4318d07ba520b4a8eddad29e9ac748b0a19	f2fs optimize the flow of f2fs_map_blocks check right after it changes to avoid excess call to update dnode_of_data
36eaff3364e8cd35552a77ee426a8170f4f5fde9	mm ksm convert write_protect_page to use page_vma_mapped_walk for consistency it worth converting all page_check_address to page_vma_mapped_walk so we could drop the former link
860f085b74e9f0075de8140ed3a1e5b5e3e39aa8	perf fix broken union in struct perf_event_mmap_page the capabilities bits must not be unioned together put them in a separate struct link
3eaa956c5b18b9c955ae5a4e6e6909cae23f38e0	brcmfmac do not proceed if fail to download nvram to dongle nvram contains critical initialization parameter for firmware to run host driver should not proceed if nvram fails to be downloaded to dongle
0f9a7fecf2514cd5cb14be8e9aae3556c403ff1f	asoc fsl imx-mc13783 simplify trivial if-return sequence simplify a trivial if-return sequence possibly combine with a preceding function call the semantic patch that makes this change is available in more information about semantic patching is available at
6cb4f8dd1044849047023b76567231f41eb64c9e	arm sti stih407-family supply defines for clockgen a0 there are __number__ lmi clocks generated by clockgen a0 we wish to control them individually and need to use these indexes to do so
69e28882dc7a4ad80f1a0de1a2e7f346a15b6564	usb musb gadget do not rely on driver argument future patches will remove the extra driver argument to in order to do that we must make sure that our udc does not rely on it first
1edae04ff85fe65a333949de6101578c015a21fa	staging lustre lnet socklnd_proto use list_for_each_entry_safe doubly linked lists which are iterated using list_empty and list_entry macros have been replaced with list_for_each_entry_safe macro this makes the iteration simpler and more readable this patch replaces the while loop containing list_empty and list_entry with list_for_each_entry_safe this was done with coccinelle expression e1 identifier i1 i2 type t iterator name list_for_each_entry_safe t t while __number__ list_for_each_entry_safe i1 tmp i2 t i1 t i2
b19e684393752ec129a36924e6c270daf79676d6	btrfs remove redundant local zero structure remove redundant local zero structure replacing it by the kernels global zero_page
33fe1a49ad23a63a60a816c99bdf6640f2314aea	arm exynos update keypad entries for smdk4x12 keypad entries are updated as per the latest revision of the board
43daa96b166c3cf5ff30dfac0c5efa2620e4beab	usbnet stop rx q on mtu change when mtu is changed unlink_urbs flushes rx q but mean while usbnet_bh can fill up the q at the same time depends on which hcd is down there unlink takes long time then the flush never ends
462098b090897fbcf00088b225eb7a3adc407e98	ata libata-eh remove unnecessary snprintf arithmetic remove an unnecessary arithmetic operation from a call to snprintf because the size parameter of snprintf includes the trailing null space also initialize the buffer on definition instead of a memset call
067893842341e7b7487062367ecfaa46c97505e0	btrfs do not abort transaction in prealloc case during disk balance we prealloc new file extent for file data relocation but we may fail in no available space case and it leads to flipping btrfs into readonly it is not necessary to bail out and abort transaction since we do have several ways to rescue ourselves from enospc case
e9cc5b2bb1c1b121f35d430b0e70a73ce2a7a2e5	staging dgap fix a typo in dgap_gettok the boar should be board
1ae5062a33be13a72d37ec46808490d471b0c1d3	drivers staging comedi comedi_fops fixed a code style issue fixed a code style issue
a0211bb482c346820506c546a6a58b8357999a99	dont try to free a null state consistently with other free functions handle the null case without oopsing
074bb43e9e594bec647ec45cc5bbc8c1ac2306aa	tipc fix a loop style problem in commit tipc delay delete of link when failover is needed we introduced a loop for finding and removing a link pointer in an array the removal is done after we have left the loop giving the impression that one may remove the wrong pointer if no matching element is found this is not really a bug since we know that there will always be a matching element but it looks wrong and causes a smatch warning we fix this loop with this commit
3e5c112f5f3a09e7b5a899ef87ce38de83f99f1a	qlcnic use generic fdb handler when driver options are not enabled allow qlcnic to use the generic fdb handler when the driver options are not enabled untill the driver is fully fixed this allows the use of the fdb interface with qlogic driver but simply puts the driver into promisc mode since the driver currently does not support iff_unicast_flt
1cd1ecb611d8be48df571a46950411ecee1fe3a1	thermal exynos remove non dt based support recently non dt support from exynos platform is removed and hence removing non dt support from the driver also this will help in easy maintainence
815cb21662b914e1e14c256a3d662b1352c8509e	xfs xfs_trans_swapext is not a valid flag for xfs_trans_commit xfs_trans_swapext is a transaction type not a flag for xfs_trans_commit so dont pass it in xfs_swap_extents
076e235856d1fbb026fd13dbf9139efb86a7b496	staging xgifb fix comparison to null warning change comparison to null to a operation found using checkpatch
98090a0ba794a96f0bc6703afe16b60b1baa396b	staging wlan-ng fixed alignment not matching this patch fixes a checkpatch warning by moving arguments to the right and aligning them to their open parenthesis
1568159868f6b6c4ab17aa28ef4d5d4fc02317f1	greybus audio update dai_driver table with appropriate fields currently the stream name for the dai driver is generically set to gb audio playback and gb audio capture this is ok since we use a single interface on apb1 but that could change in the future update the dai driver table entries to properly reflect the interface used
a5dcff628a678b9f4535155662f81c5cda066bc7	remove redundant test from intel_pmu_lbr_add by the time we call must be set and we even already rely on this so remove that test from intel_pmu_lbr_add
c219b7ddb6a3524a61a89438d86e4a8639706308	fix trivial typo in printk message its too much not to much link
b432fc25b5b0311a58772fefe8d07e143600e908	mfd fix potential null pdata dereference user pass platform data to device and platform data may be null add the check for pdata
b10c0b92caf97e0d7f1d76996f73bf07a719aa3e	return if kmalloc fails at ft1000_probe if the kmalloc fails return returning __number__ is not the proper way if any function fails
e1b0144f9997d3d52c46785143699d82dd525f1d	regulator anatop use call instead of open code
f5d39078824fdd16f710e710e58f1cb937ab9553	media siano define srvm_max_pid_filters only once srvm_max_pid_filters was defined in __number__ sms_tx_stats structures
0eca51b18339c94c6b6342e2b80d28cb33aaf342	media media usb cx231xx cx231xx-core dont print error when allocating urb fails kmalloc will print enough information in case of failure
520288218cf233f442aa815496a95622c2672c62	ixgbe ixgbe_atr should access udp_hdrskb only for udp packets commit ixgbe store vxlan port number in network order incorrectly checks for ipproto_udp in ixgbe_atr this check should be for instead
003e6eb71ed3c884d55443cdb95b909374ade7bc	clk rockchip rename rga clock-id on rk3399 the rga clock supplying the working clock on the rk3399 is actually called rga-core in the manual as the clock id has neither been assigned nor released with a full kernel release we can still change the id to the more appropriate naming
638bdc8ce845285e1112f4870aded1638187fc98	dmaengine edma fix build without config_of during the edma rework a build error was introduced for the case that config_of is disabled in function edma_tc_set_pm_state undefined reference to of_find_device_by_node as the edma_tc_set_pm_state function does nothing in case we are running without of this adds an is_enabled check that turns the function into an empty stub then and avoids the link error
84c1befe341d71ed1b878afa28bb637a0b459161	e1000e cleanup remove e1000_get_phy_cfg_done remove the function e1000_get_phy_cfg_done and replace the single call to it with the same function pointer that it would call the function pointer is always set so there is no risk of a null pointer dereference
36e097a8a29761e0e2c951c0390f1057df248a87	pci split out bridge window override of minimum allocation address pci_bus_alloc_resource avoids allocating space below the min supplied by the caller usually pcibios_min_io or pcibios_min_mem this is to protect badly documented motherboard resources but if were allocating space inside an already-configured pci-pci bridge window we ignore min see pci make bus resource start address override minimum io address this patch moves the check to make it more visible and simplify future patches no functional change
361d79500244cc734588534d2756e2495f1549a6	fix reading and writing of event values apply shift last two bits of adc and limit values are zero and should not be reported ad7993 ad7997 compare with read_raw event values are __number__ ad7993 ad7997 or __number__ bit check the range on write
06c4f20d2814b534eb4fb993d0db9259b24372b9	scsi bnx2fc fixed scsi_remove_target soft lockup when rmmod bnx2x the problem has been identified to be a change in the scsi_remove_device path where a call to the pm_runtime_set_memalloc_noio was added when del_gendisk is called in this path note that the new pm routine attempts to cycle through all parent devices from the fc target device to set the memalloc_noio flag because of this new change a dependency was created between the fc target device and the parent netdev device in the destroy path in order to synchronized the destroy paths bnx2fc has been modified to flush all destroy workqueues in the netdev_unregister return path __float__ bug soft lockup stuck for __float__ call trace __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ sd_mod __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ scsi_transport_fc __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__
4127a59e0b3f914ae8d9843d521a07e117db045a	fix uvd return code checking
7a8785f7eea5f1a35f10d2fbdee7df1febb850de	remove the preliminary_hw_support shackles from chv chv should be in a good enough shape now so lets drop the flag
fb93942033dfe7b4b87bba516f9b551da0bac970	remove use of backpointer in __i915_printk as we can just directly use we do not need the backpointer anymore and can also loose the warning about order of __i915_printk and our initialisation which is now always safe
44716ec2f423da1965d444cd349b14b994998299	mfd fix mc13xxx spi regmap this fix the spi regmap configuration the wrong write flag was used also bits_per_word should not be set as the regmap spi implementation uses a transfert granularity
1b227e536662eae4b7beee3037edbecdc577495f	ip6_gre fix mtu setting for ip6gretap when creat an ip6gretap interface with an unreachable route the mtu is about __number__ bytes larger than what was needed if the remote address is reachable ping6 __number__ ping __number__ data bytes __number__ bytes from ms __number__ bytes from ms
f765b2f4fb45a9625bce619c6652b9f48510cef1	staging comedi quatech_daqp_cs tidy up command register bits for aesthetics move the bit defines for this register and use the bit macro to define the bits define a macro for the scanrate bits and use it to remove the camelcase rename the defines to match the register
c8e4df3109646762f21c6e288187ec395fdf67be	pwm twl return proper error if twl6030_pwm_enable fails return proper error instead of __number__ if twl6030_pwm_enable fails
c117554712ce68dfa62f070bdd70b5776d2de52d	net mvpp2 rename a jump label in two functions adjust jump labels according to the linux coding style convention
fdf9e2bcbb7e53759fde6a3f5dd9f63cc0268f40	media s5p-jpeg allow for wider jpeg subsampling scope for exynos4x12 encoder exynos4x12 supports wider scope of subsampling modes than s5pc210 adjust corresponding mask accordingly
814c219a3eeb7d97046544f02b402a82917d024c	staging comedi pcl711 cleanup usage this legacy driver does no additional probing so the will already be properly initialized by the comedi core before calling the function remove the unnecessary initialization of and use it when requesting the resources instead of the open-coded strings
10574059ce0451c6572c85329c772aa15085f8eb	xen-netback napi fix abuse of budget netback seems to be somewhat confused about the napi budget parameter the parameter is supposed to limit the number of skbs processed in each poll but netback has this confused with grant operations this patch fixes that properly limiting the work done in each poll note that this limit makes sure we do not process any more data from the shared ring than we intend to pass back from the poll this is important to prevent tx_queue potentially growing without bound
5e454c67fc594150e6c0da32b388a43d40200759	nbd use correct div_s64 helper the do_div macro now checks its arguments for the correct type and refuses anything other than u64 so we get a warning about nbd_ioctl passing in an loff_t in function __nbd_ioctl error comparison of distinct pointer types lacks a cast this changes the nbd code to use div_s64 instead which takes a signed argument
00d98ebd948b75919f542f53c31e9eb83310fbcf	hwstam is only on gen3
3e38df136e453aa69eb4472108ebce2fb00b1ba6	netfilter nf_tables fix oob access bug kasan slab-out-of-bounds in at addr __address__ read of size __number__ by task when weve destroyed last valid expr nft_expr_next returns an invalid expr we must not dereference it unless it passes nft_expr_last check
adae0fe0ea87e8fb1a72dde304937c60759b495f	sunrpc register pipefs file system after pernet sybsystem pipefs superblock creation routine relays on sunrpc pernet data presense which is created on register_pernet_subsys call in sunrpc module init function registering of pipefs filesystem prior to registering of per-net subsystem leads to races mount of pipefs can dereference uninitialized data
e7852a4b3a4fb6f6c18fdaff934580aa8521599a	add missing condition for committing planes on crtc the i915 driver checks for color management properties changes as part of a plane update therefore a color management update must imply a plane update otherwise we never update the transformation matrixes and luts v2 add comment about moving the commit of color management registers to an async worker v3 commit color management register right after vblank v4 move back color management commit condition together with planes commit v5 trigger color management commit through the planes commit daniel v6 make plane change update more readable references link
f71d148f1adf82edef467d41a2a3be22b36811f0	sata_dwc_460ex remove redundant dev_set_drvdata driver core sets it to null upon probe failure or release
8ddbf94fd5b536b3adf5ffa631c5951718e7301d	usb gadget m66592-udc add ep capabilities support convert endpoint configuration to new capabilities model
c2b40111a2ec4b3821f5bf42a127bc3d6929ddd5	media tw686x be explicit about the possible dma_mode options users wont know what to put in this module option if it isnt described
7f8b96570291def5104cec6f68bae09bd55b691a	gpio aspeed fix return value check in aspeed_gpio_probe in case of error the function devm_ioremap_resource returns err_ptr and never returns null the null test in the return value check should be replaced with is_err
9654fbe9cda227bb1881f20cc69a7f477a4537f9	regulator max8973 remove unused field from struct max8973_chip the struct regulator_dev of struct max8973_chip isnt used anywhere in the driver so it can be removed safely
6dc01181eac16192dc4a5d1b310b78e2e97c003c	cgroup remove unused variables in cgroup_destroy_locked
5e44f8c374dc4f8eadf61cd18b2c0d46bc87c1b7	ext4 hole-punch use truncate_pagecache_range when truncating a file we unmap pages from userspace first as thats usually more efficient than relying page by page on the fallback in truncate_inode_page particularly if the file is mapped many times do the same when punching a hole __float__ added truncate_pagecache_range to do the unmap and trunc so use it in ext4_ext_punch_hole instead of calling truncate_inode_pages_range directly
1ec990c0020496ad32bf35726f7c033d09c2fce7	regulator dbx500-prcmu remove operating_point from struct dbx500_regulator_info operating_point is not used since the initial commit of db8500-prcmu driver remove it
7d6c2113505eb88a09949ed671d51c8c01cf7bb6	fs mark function as static in mark function as static in because it is not used outside this file this eliminates the following warning in warning no previous prototype for
c4dd7471de03f0e4278265e08af2923243496db0	ieee802154 change wpan-phy name to phy currently the wpan_phy under is named as this patch will change the name to phy this will introduce the same naming convention like wireless note wpan-tools users will not type anymore just a simple is enough
267151cdfd17c9dd3923c8ed75ef03725cbdd539	batman-adv reuse tt_len to calculate tt buffer length
0184c2fff11705d0041c61356c57eac2e033c686	reattach comment complete type specification in the recent patch bc3d674 allow userspace to request no-error-capture upon the final version moved the flags and the associated around so they were adjacent unfortunately they ended up between a comment and the thing hw_id to which the comment applies so this patch reshuffles the comment and subject back together also as were touching hw_id lets change it from just unsigned to a fully-specified unsigned int because some code checking tools including checkpatch object to plain unsigned link cherry picked from commit
dc644a073769dd8949a75691eb4a5bdeb70a7d51	mm add three more cond_resched in swapoff add a cond_resched in the unuse_pmd_range loop so as to call it even when pmd none or trans_huge like zap_pmd_range does and in the unuse_mm loop since that might skip over many vmas shmem_unuse and radix_tree_locate_item look good enough already those were the obvious places but in fact the stalls came from find_next_to_unuse which sometimes scans through many unused entries apply scan_swap_maps latency_limit of __number__ there too and only go off to test frontswap_map when a used entry is found link
05713ba9055f1a209d50e480626f36c401bda3ad	crypto dont export static symbol the semantic patch that fixes this problem is as follows type t identifier f static t f identifier declarer name export_symbol_gpl
bd3c7b9ef7ff26d541393e6c3e985b1c72c277c3	dont test unsigned int for negativity bugzilla
c677f7601fa672b4835d0ae3422a761e5e2ab27a	media drx-j remove the unused tuner_i2c_write_read function this function is not static also it is not used anywhere so drop it
2b46be68a1b67f40df4f288b90e79181c387eda6	staging dgnc cleanup dgnc_finalize_board_init trivial cleanups transform a printk to a dev_err call fix __number__ lines over __number__ characters
017189b51e0eecd58cf4f65f6f16d59dae6c1368	cpufreq at32ap dont initialize part of policy set by core many common initializations of struct policy are moved to core now and hence this driver doesnt need to do it this patch removes such code most recent of those changes is to call in the core after calling
7a67b4b7e04b30345584c1b76a80db628530bf21	kvm vgic relax vgic_can_sample_irq for edge irqs we only set the irq_queued flag for level interrupts meaning that irq is a good enough predicate for all interrupts this will allow us to inject edge hw interrupts for which the state is not allowed
6f979eb3fcfb4c3f42f230d174db4bbad0080710	drivers net cpsw fix broken loop condition in switch mode drivers net cpsw fix buggy loop condition accidentally fixed a loop comparison in too many places while fixing a real bug it was correct to fix the dual_emac mode section since there i is used as an index into which is a __number__ based array however the other two changes which are only used in switch mode are wrong since there i is actually the ale port number and port __number__ is the host port while port __number__ and up are the slave ports putting the loop condition back in the switch mode section fixes it a comment has been added to point out the intent clearly to avoid future confusion also a comment is fixed that said the opposite of what was actually happening
dd41e0c4e35abc5a5679762ab108a6fcd9a0ead9	asoc simple-card add cpu_dai and codec_dai names null check the name of cpu dai maybe omitted and then strlen will lead kernel panic
5a68e9b57b1c1984dae8a9625bbf1a505d166035	usb gadget configfs keep a function if it is not successfully added if usb_add_function fails then the currently processed function is already not in the list in struct config_usb_cfg and neither is it in the list in struct usb_configuration at the err_purge_funcs label the purge_config_funcs is called which iterates over all configurations and in each configuration it iterates over all _successfully_ added functions and moves them back from the list in struct usb_configuration to the list in struct config_usb_cfg but the function which has just failed adding and caused the unwind process is not taken care of and is effectively lost this patch modifies the configfs_composite_bind function so that if the usb_add_function fails then the currently processed function is returned to the list in struct config_usb_cfg it would be tempting to delay the list_del in question after usb_add_function invocation but a struct list_head cannot be stored in more than one list at the same time so the list_del must be called before usb_add_function hence the solution is to list_add after usb_add_function in case of error
a204d90c91208d9b63ba309a1c44f582751e58c9	asoc rsnd add rsnd_scu_init and separate current has rsnd_scu_start and operation of are implemented in this function this patch adds new rsnd_scu_init and separates rsnd_scu_start since rsnd_mod_ops has callbacks
4c52b1da538800a30f030eeb697366c23daf2ef3	bna fix error handling several functions can return negative value in case of error so their return type should be fixed as well as type of variables to which this value is assigned the problem has been detected using proposed semantic patch __number__ __number__
ae8bb9b10124ff266c35507b347b31f34c0fe05d	mark transfer buffers as __be32 fixes the following warnings from sparse warning incorrect type in assignment different base types expected unsigned int unsigned usertype d32 got restricted __be32 usertype warning incorrect type in assignment different base types expected unsigned int unsigned usertype d32 got restricted __be32 usertype warning incorrect type in assignment different base types expected unsigned int unsigned usertype d32 got restricted __be32 usertype warning cast to restricted __be32 warning cast to restricted __be32 warning cast to restricted __be32 warning cast to restricted __be32 warning cast to restricted __be32 warning cast to restricted __be32
1f6236bfd7c38d5f9f7648fae7215e65274b9e63	genirq add irq_get_trigger_type to get irq flags drivers that want to get the trigger type flags for a given interrupt have to call irq_get_irq_datairq to get the struct irq_data and then irqd_get_trigger_typeirq_data to obtain the irq flags this is not only error prone but also unnecessary exposes the struct irq_data to callers its better to have an irq_get_trigger_type function to obtain the flags for an irq link
74fb3ab9330ee4dd1a3ddf19cd0f3ef1202376d9	mtd use mtd_device_parse_register replace custom invocations of parse_mtd_partitions and mtd_device_register with common mtd_device_parse_register call this would bring standard handling of all errors fallback to default partitions etc
248d828514bf7016d13f11b7b82f26b6949718c5	staging fbtft remove extra parentheses around function arguments removes extra parentheses around function arguments issue detected and resolved using the following coccinelle script expression e identifier f e
0567e1ec43c60e449673bb391edd05e5e49398be	staging csr data_tx remove extra space in printk this saves us __number__ byte
6c3773defb993275e749c9f876b826af5f7605f3	staging panel use designated initializers fix warning missing initializer by using designated struct initializers
be0c00800345f32274f195569c784fe3e02ffcbc	scsi lpfc fixed potential mis-interpretation of read_topology reserved fields
25e057fdde3b33c0d18605ed27b59336a3441925	media ddbridge do not free_irq if request_irq failed my static checker detected that free_irq is called even after request_irq failed in ddb_probe in this case the kernel may try to free although the irq is not assigned this event rarely occurs but always introduces a warning if it happens goto fail1 always results in disabling enabled msi and releasing a requested irq it seems like the former handling is necessary so i added a conditional branch before the free_irq stat __number__ means request_irq succeeds
1a114a66466ba914a41df438e806fc10e7d9fb3b	sunrpc optimize net_ns dereferencing in rpcbind registering calls static rpcbind registering functions can be parametrized by network namespace pointer calculated only once instead of using init_net pointer or taking it from current when virtualization will be comleted in many places
44fbbb3dc687c9709a6f2236197316e5c79ab1eb	x86 get rid of calling do_notify_resume when returning to kernel mode if we end up calling do_notify_resume with it does nothing do_signal explicitly bails out and we cant get there with tif_notify_resume in such situations then we jump to resume_userspace_sig which rechecks the same thing and bails out to resume_kernel thus breaking the loop its easier and cheaper to check calling do_notify_resume and bail out to resume_kernel immediately and kill the check in note that on amd64 we cant get there with at all asm glue takes care of that
6982d429a9194e5069c5249e751422def87658a6	i40e remove a redundant filter addition remove a redundant filter addition to stop fw complaints about a redundant filter removal change-id i22bef6b682bd8d43432557e6e2b3e73ffb27b985
1fb89448871500e5d5e7ad93d6dae68ee4fa464a	perf probe make a copy of exec path for passing to basename the basename function may modify the string passed to it so the string should not be marked const link
1a10ae6ba8c3df4af9bcdb6f40348af71e72bd13	workaround enable underrun on enabling sprite0 when sprite1 has already been enabled may lead to an underrun this only happens when sprite0 fifo size is zero prior to enabling it hence an effective workaround is to always allocate at least one cacheline for sprite0 when sprite1 is active ive not observed this sort of failure during any other type of plane sequence v2 for consistency with other platforms testcase
acafc892b0c71bba8cb5f83b8dd5df4a3000be36	scsi mpt2sas perform target reset instead of hba reset when a sata_passthrough cmd timeout happens
8d19534a8d539bb2e598e56e017a423f205e909e	spi sh-msiof use the core cs_gpio field and make it optional in current implementation cs is controlled by gpio which is passed through however the msiof hw module has a function to output cs by itself which is already enabled and actual switch will be done by pinmux store the gpio number in the core cs_gpio field and ignore it if it is an invalid negative gpio number loosely based on a patch from takashi yoshii
9389c3c943da7e5f903eebf79d596601537afe01	tcm_qla2xxx tcm_qla2xxx_handle_tmr can be static
50509e5cfe6cb7dffde71a454c3266fbb55fbff1	media use module_platform_driver macro this patch removes some code duplication by using module_platform_driver
c22d2672c826a67a84fa60c17797315f4c94cedb	iio mxs-lradc check ranges of ts properties the devicetree binding for mxs-lradc defines ranges for the touchscreen properties in order to avoid unexpected behavior like division by zero we better check these ranges during probe and abort in error case additionally this patch adds an important note from the reference manual about the range of sample delay
ab522e33f91799661aad47bebb691f241a9f6bb8	fix fixed point arithmetic width for shares and effective load since commit enable increased load resolution on kernels we now have two different fixed point units for load shares in calc_cfs_shares has __number__ bit fixed point unit on kernels therefore use scale_load on min_shares wl in effective_load has __number__ bit fixed point unit therefore use scale_load_down on which has __number__ bit fixed point unit on kernels link
7509edd6e95e5bef2d60b1ca0adc9859b8775694	net stmmac silence ptp init errors on hw without ptp logging a ptp error on hw which simply does not support ptp is not very useful moreover this message gets logged on every if-up and if there is no cable inserted networkmanager will re-try the ifup every __number__ seconds
0c4c8bbbfdfc61c2ab2cc1026b5a05ae52396c93	usb phy omap-usb2 enable clock for omap5 usb_otg_ss_refclk960m is needed for usb2 phy present in omap5 for omap4 the clk_get of this clock will fail since it does not have this clock
03e64e967180181510de06eecae3be44e648b692	xhci correct misplaced newlines logging messages end in newlines not have them put in the middle of messages
c6d5fefaa35eda3dcab5c78a16def6ed555b685c	octeon remove deprecated syststamp timestamp hardware timestamps can be exposed to userspace in raw hardware format hwtstamp as well as converted to system time syststamp the second variant is deprecated and only implemented by this driver the preferred method of hardware timestamp generation is to combine hwtstamp with a device ptp clock octeon has its own ptp library that relies on a shared memory interface to the ptp clock device
63da0d087c9e1d3ba785470a234ba7be6f1c78b3	staging comedi gsc_hpdi rename init_hpdi for aesthetics rename this function so it has namespace associated with the driver
55dacd22dba7da4d4f2ccd646cd77886e2c90dd1	should put mle when goto kill in dlm_assert_master_handler in dlm_assert_master_handler the mle is get in dlm_find_mle should be put when goto kill otherwise this mle will never be released
5d758b98fab68055854134b8012cf0cf1774b7e1	staging comedi dt3000 use comedi_handle_events cfc_handle_events is just a wrapper around comedi_handle_events
76424a0a50982e4026c7d1d5a0cddc92eecc5969	media em28xx move printk lines outside mutex lock theres no reason to still be holding the device list mutex for either of these printk statements
5a9b5855c248d0298eac4d5490c7bc11c2f1983b	arm sched_clock remove unused needs_suspend member the needs_suspend member is unused now that we always do the handling see arm sched stop sched_clock during suspend
bd0ed561356db935d0b5a68e2be32d976e6963c4	atm solos-pci use to_pci_dev use to_pci_dev instead of open-coding it
4d6c2a677fe5a903ed6483865cc14ff00a2054b5	net mvpp2 remove mvpp2_txq_pend_desc_num_get function the mvpp2_txq_pend_desc_num_get function only selects a tx queue and reads the number of pending descriptors it is used in only one place in mvpp2_txq_clean where the tx queue has already been selected by a write to mvpp2_txq_num_reg therefore this function is useless and the caller can simply read the value of the mvpp2_txq_pending_reg register instead
3f14e6231858f4d9a2e965f54202f7a3f69c79d0	no needed braces
48907c23ea3307a6b6368698c1e786152cd45588	fix the error return code in gm20b_secboot_tegra_read_wpr the error return code ptr_errmc is always __number__ since mc is equal to __number__ in this error handling case
17db84eba18eaa20fab687bf38418a2286cb085a	staging wilc1000 avoid null pointer dereference on error the host_int_init function can dereference the pstrwfidrv pointer while it is null on its error path jump directly to the _fail_ error label in the end of the error handling path to avoid that by doing that we also skip stopping our kthread and destroying our message queue but they were not started or created yet in that case anyway this fixes the following coccinelle error error pstrwfidrv is null but dereferenced
32c5844abb302e3fb1637ba6afe3d8132c64e57f	scsi_debug increase the reported optimal transfer length the optimal transfer length reported by scsi_debug is __number__ blocks which translates to with the default logical block size thats much lower than what real storage devices typically report to bump the optimal transfer length to __number__ blocks
9b42bb750f24f5925d2fffed3f071726af72763a	tty convert sak messages to tty_notice use tty_notice for unified message format from the tty core fix each message to accurately reflect the cause of each termination
efaf956ad6852a7ae0cc4c78bd31079f8039daa6	nfc st21nfca clean up macros alignment align every macros on the same column
5e5e3a42c653c5ef1c281651f1882411601129bd	regulator of add support for parsing initial and suspend modes some regulators support their operating mode to be changed on startup or by consumers when the system is running while others only support their operating mode to be changed while the system has entered in a suspend state the regulator device tree binding documents a set of properties to configure the regulators operating modes from a fdt this patch builds on regulator of add support for parsing regulator_state for suspend state and adds support to parse those properties and fill the regulator constraints so the regulator core can call the right suspend handlers when the system enters into sleep the modes are defined in the device tree using the hardware specific modes supported by the regulators regulator drivers have to define a translation function that is used to map the hardware specific modes to the standard ones
3e0aa8d83bf8e6d414e538cf1046a3a7b48017bc	asoc core if component doesnt have of_node use parents node instead if an asoc component device does not have a device tree node use its parents node instead when looking for a matching dai based on a device tree reference this allows video device drivers to register a separate child device for their asoc side audio functionality and mfds in general broonie
9b2035a0b9ee9745c236cc2ec1ec0b0eae692a1a	usb gadget mv_udc reduce the delay interval there are several places use udelayloops_usec to wait the status to be changed but the delay interval is a bit too long so reduce it to enhance the performance
e572f6491a4b8ffbf31c59e2ad0eb8ee9244bf58	arm pxa magician remove duplicated i2c pins declaration magician has gpio117_i2c_scl and gpio118_i2c_sda pins declared twice
191f57c137bcce0e3e9313acb77b2f114d15afbb	x86 cpufeature define the intel mpx feature flag define the intel mpx memory protection extensions cpu feature flag in the cpufeature list link
7ab71f3244e9f970c29566c5a67e13d1fa38c387	hw_breakpoint simplify the weight usage in toggle_bp_slot paths change toggle_bp_slot to make weight negative if this way we can always use weight without additional if enable check and toggle_bp_task_slot no longer needs this arg link
9ddabbe72e41ca6794cb4947c70929c9410e6752	kvm kvm steal time interface to implement steal time we need the hypervisor to pass the guest information about how much time was spent running other processes outside the vm this is per-vcpu and using the kvmclock structure for that is an abuse we decided not to make in this patchset i am introducing a new msr kvm_msr_steal_time that holds the memory area address containing information about steal time this patch contains the headers for it i am keeping it separate to facilitate backports to people who wants to backport the kernel part but not the hypervisor or the other way around
e7a1aa62823d8cc861aaad078006e6742c114a0e	staging comedi ni_labpc fix labpc_eeprom_insn_write the comedi core expects the operations to write values and return the number of values actually wrote make this function work like the core expects as ian abbott pointed out we really only need to write the last value to the eeprom the preceding data would be overwritten anyway also remove the noise about invalid channels
c1931090a22b96b223f2a3b8420076f044da7531	update to use pci dma aliases amd-vi already has a concept of an alias provided via the ivrs table now that pci-core also understands aliases we need to incorporate both aspects when programming the iommu ivrs is generally quite reliable so we continue to prefer it when an alias is present for cases where we have an ivrs alias that does not match the pci alias or where pci does not report an alias report the mismatch to allow us to collect more quirks and dynamically incorporate the alias into the device alias quirks where possible this should allow amd-vi to work with devices like marvell and ricoh with dma function alias quirks unknown to the bios
eea618e6d5a819f2a739d441efccc444e57e68c2	autofs remove obsolete sb fields these two were left from commit aa55ddf340c9 autofs4 remove unused ioctls which removed unused ioctls link
17b682a04841233f827073b327c6533e478dfcd4	openvswitch fix parsing invalid ethertypes before this patch if an packet with oui had an ethertype less than __number__ the flow key given to userspace in the upcall would contain the invalid ethertype for example __number__ if userspace attempted to insert a kernel flow for this key it would be rejected by ovs_flow_from_nlattrs this patch allows ovs to pass the oftest
39de7d95f88d95a07f64b047c985fff31c006b5c	media vpx3220 signedness bug in vpx3220_fp_read the intent was to return on error and thats what the callers expect but the current code returns ushrt_max instead
3b2f8f82dad7d1f79cdc8fc05bd1c94baf109bde	i2c omap switch to threaded irq support for omap2 we can easily switch over to threaded irqs on the i2c driver this will allow us to spend less time in hardirq context trivial formating changes
e01ea5e2a3f2a127ace8b671a830a5c789f07510	scsi lpfc replace bug with bug_on replace bug with bug_on using coccinelle
de3748f66f21642543e6f1acb1002937a8d2de2e	input adi remove an unnecessary check the input_free_device function tests whether its argument is null and then returns immediately thus the test around the call is not needed this issue was detected by using the coccinelle software
4e26ad80cbd3a6b0d606201892e81a9a9c6864ce	asoc rt5616 add support sample rate to reference the trm the alc5616 support one interface for stereo dac and stereo adc
6c6baa841662e1ab46353fee3c618d9f347ce06e	staging gdm724x use min instead of ternary operator this patch replaces ternary operator with macro min as it shorter and thus increases code readability macro min return the minimum of the two compared values made a semantic patch for changes type t t x t y x y x y x y x y
ef1ce51e7b35c0785b2bb1b03f4202de4a702a43	sb_edac allow different interleave lists this is in preparation for ivy bridge support
396fa99e0e58198f400110f2b6432b5b6522476b	mxsfb fix driver registration the driver should be registered with mxsfb_driver not with mxsfb_devtype this caused obvious null pointer dereference and crash
9343862945fdd3dd5cb7648bb24cabe40faa9ad9	cgroup convert cgroupfs_root flag bits to masks and add cgrp_ prefix theres no reason to be using bitops which tends to be more cumbersome to handle root flags convert them to masks also as theyll be moved to and its generally a good idea add cgrp_ prefix note that flags are assigned from __number__ __number__ the first bit will be used by a flag which will be added soon
698c937b0d17dd55227622b919482fc720cc1095	nfsv4 clean up lookup of secinfo_no_name use the minor version ops cached in struct nfs_client instead of looking them up again
e23754f880f10124f0a2848f9d17e361a295378e	aio dont bother with async freeing on failure in ioctx_alloc
8e47e15e917fca36945c2f03de28cfda0c8499f0	log aer_inject error injections log successful error injections so that injected errors can be differentiated from real errors
699cc1962c85351689c27dd46e598e4204fdd105	media tt-budget s2-3200 cannot tune on hb13e dvbs2 transponder the fec fix patch fixed locking on ghz but not on ghz for me
800df627e2eabaf4a921d342a1d5162c843b7fc2	resource fix the case of null pointer access richard and daniel reported that uml is broken due to changes to resource traversal functions problem is that can be null and new code does not consider that possibility old code used a for loop and that loop will not even execute if p was null revert back to for loop logic and bail out if p is null i also moved sibling_only check out of resource_lock there is no reason to keep it inside the lock following is backtrace of the uml crash rip __number__ rsp __number__ eflags __number__ rax __number__ rbx __number__ rcx __number__ rdx __number__ rsi __number__ rdi __number__ rbp __number__ r08 __number__ r09 __address__ r10 __address__ r11 __number__ r12 __number__ r13 __number__ r14 __number__ r15 __number__ kernel panic not syncing segfault with no mm cpu __number__ pid __number__ comm swapper not tainted stack __number__ __number__ __address__ __number__ call trace fixes resource provide new functions to walk through resources
57bdf7f42be05640f8080b06844c94367ad1884b	net add skb_get_hash_raw function to just return without checking to see if it needs to be recomputed
46a12dfdbea523b5cd89a59f2705bad684e5037c	remove unused values in xgi340_eclkdata in the lookup table xgi340_eclkdata only the first three lines are used thus the remaining entries can be removed rationale uses as the index for xgi340_eclkdata is assigned the return value of xginew_getxg20dramtype which can only be __number__ __number__ or __number__ only the first three values are used remove the remeining entries
30982583e4e57c4648fee4a4d6511e23b6e5db2b	move useless assignment control is transfered to unacquire_none when is equal to null so the assignment to null is useless and it is moved above unacquire_none link
7a93cbbb51c56d021907ba6863d469feee73f379	da8xx-fb save and restore lcdc context across cycle save and restore register context of lcdc respectively before suspend and after resume
972a31367f94967716b000fd8fac33d259ebcfed	p54 pass interface setup errors back to mac80211
3411d035eb31138b8b756a788056b9e9ccd5f656	goldfish_pipe fix unlikely misuse move the close parenthesis
9ade8b98d77a43bb90cf3ef351b764dbaf087870	drm qxl atomic phase __number__ wire up state object handlers link
ed4cf5b23f9d21c441e5c8feead86f2e4a436923	acpi sleep avoid interleaved message on errors got this dmesg log on an acer aspire __number__ __float__ acpi supports s0acpi exception ae_not_found while evaluating sleep state __float__ acpi exception ae_not_found while evaluating sleep state __float__ s3 s4 s5 avoid this interleaving error messages
0193f0c74445ab0da0b8870c18ea5ef071fa1ec1	drm omapdrm dont dispc in omap_crtc_flush the omap_crtc_flush function is always called with a reference to the dispc held remove unnecessary calls to dispc_runtime_get and dispc_runtime_put
1f17011039f0d53f24503a01a1dcd48ae28e5305	brcmfmac use struct brcmf_if in brcmf_configure_opensecurity
9978cf50426bc8d386a0753f74ab895e4d6da554	i915 remove silly test is an array comparing it with null is somewhat less useful than a chocolate teapot possibly we should be testing bus null each iteration of the loop instead gcc could help by warning too
4b74f6ea8417e48bb1fc65880a0574134a8b4745	exofs fix __r4w_get_page when offset is beyond i_size it is very common for the end of the file to be unaligned on stripe size but since we know its beyond files end then the xor should be preformed with all zeros old code used to just read zeros out of the osd devices which is a great waist but what scares me more about this situation is that we now have pages attached to the files mapping that are beyond i_size i dont like the kind of bugs this calls for fix both birds by returning a global zero_page if offset is beyond i_size
c755201eb5c1e09f3477d0e83ae1e3aadac0e8d1	ramoops update parameters only after successful init if a platform device exists on the system but ramoops fails to attach to it the module parameters are overridden before ramoops can fall back and try to use passed module parameters move update to end of init routine
431c6c1df36d1511d48ccbd38b9561a486142d42	rtc rtc-v3020 use functions use functions to make cleanup paths simpler
15cf17d26e08ee95c2e392a3a71f55d32e99e971	memcg initialize kmem-cache destroying work earlier fix a warning from lockdep caused by calling cancel_work_sync for uninitialized struct work this path has been triggered by destructon kmem-cache hierarchy via destroying its root kmem-cache cache __address__ obj __address__ cache __address__ obj __address__ cache __address__ info trying to register non-static key the code is fine but needs lockdep annotation turning off the locking correctness validator pid __number__ comm insmod tainted g o call trace kmem_test example module to demonstrate int __init mod_initvoid int size __number__ struct kmem_cache void struct page cache kmem_cache_createkmem_cache_test size size __number__ null if return printkcache cache obj kmem_cache_alloccache gfp_kernel if obj page virt_to_head_pageobj printkobj cache obj kmem_cache_freecache obj flush_scheduled_work obj kmem_cache_alloccache gfp_kernel if obj page virt_to_head_pageobj printkobj cache obj kmem_cache_freecache obj kmem_cache_destroycache return module_initmod_init module_licensegpl
081ee14ab4452bbf7bab9b4df61519bb48a44375	greybus control remove some braces remove some no-longer-needed braces around an error path
0953dbea1d9a84c8443b5f5bb45229a6c9d7f9f3	scsi isci fix start oob split scu_link_layer_start_oob function to reset and enable and add flush after all steps
283c2491416ef0be3e89ac5a70a870d765a4ac76	iwlwifi mvm trim sched scan delay down to for lmac as well in theory lmac scans can handle a delay but since waiting for over __number__ hours to start the scan is a bit silly and to keep it aligned with umac scans which only support delays trim it down to this makes the lmac vs umac and the umac reg scan vs umac sched scan code more similar
7ff4bdd45448936363dc6dc6c851112b5c08e209	mei fix waiting for wr_ctrl for corner cases a control message reply may not be received if either a link reset has occurred or disconnection is initiated by the fw in the both cases the client state will be set straight to disconnected and the driver will wait till timeout adding disconnected state in the waiting condition will release the client from the stall
310e158cc3b7a6adf41e778d52be746c4dc88561	net respect gfp_dma in __netdev_alloc_skb few drivers use gfp_dma allocations and netdev_alloc_frag doesnt allocate pages in dma zone
d9b78f33d9c1b699b66f10ad2329487f813c4642	usb renesas_usbhs tidyup for smatch warnings this patch tidyup below smatch complaint usbhsh_queue_done warn variable dereferenced before check urb see line __number__ special thanks to dan
4179bc30b2fe85f827d93e0ae7ae8f49ad3afc02	md uuid debug statement now in processor byte order previously the uuid debug statements were printed in little-endian format which wasnt consistent in machines that might not be in little-endian byte order with this change the output will be consistent for all machines with different byte-ordering
1a14f53271aee500da0ed450ff62ce848213c60a	arm samsung print cpu id on probe its useful to get the cpu printed during boot sometimes so add a line with that information given that the fields have moved within the register over time dont try to be clever and parse it just print the raw values for now
def84bd9a11954d32d380c461eb884d1f0b2a8b7	staging vt6656 s_nsinterruptusbiocompleteread remove usb_fill_bulk_urb no need to fill urb in again just resubmit it
0871d7d86ce3788ba40391df3a259df2285776cd	usb uas fix abort properly report aborted commands also dont access cmdinfo after kicking task management it may not be valid any more once it returns
2c64580046a122fa15bb586d8ca4fd5e4b69a1e7	netlink wake up netlink listeners sooner v2 this patch changes it to yield sooner at halfway instead still not a cure-all for listener overrun if listner is slow but works much reliably
16c6c56bab1d9942c8089b7ea8a7382799fba5d8	refactor gmch hpd irq handling pull all the gmch platform hotplug interrupt handling into one function v2 move the iir check to the caller danvet add posting read comment suggested by chris
ba093a6d9397da8eafcfbaa7d95bd34255da39a0	mm refuse wrapped vm_brk requests the vm_brk alignment calculations should refuse to overflow the elf loader depending on this but it has been fixed now no other unsafe callers have been found link
91ca689a04cf95d5658384617e514fcc2d60af79	fix the rc6 status debug print the parsing was incorrect for ilk and vlv
fbe359f12ce40e3126bea959b135656e4a305897	clk sunxi fix return value check in sun8i_a23_mbus_setup in case of error the function of_io_request_and_map returns err_ptr and never returns null the null test in the return value check should be replaced with is_err
2874bf3ec453f50cfe1f7bf000efdadeb6f30db6	media tc358743 print timings only when debug level is set prevent unnecessary kernel log spamming
50ab97d71b488a8c9e1fc97815566e3dd4d291d9	isdn hisax hfc4s8s_l1 remove some unused functions removes some functions that are not used anywhere read_hfc32 write_hfc32 write_hfc16 this was partially found by using a static code analysis program called cppcheck
165148396d8a220c0fb62e30101ea99b0223864e	lib crc32 reduce number of cases for we can safely reduce the number of test cases by a tenth there is no particular need to run as many as were running now for that gives us still tests were doing if people run kernels with crc selftests enabled which is perfectly fine
c3aa6556659fe25b2fb27b86e65c6610b4066950	greybus operation use the bundle struct device instead of the connector we are removing struct device from the gb_connection structure in the near future the gb_bundle structures struct device should be used as a replacement this patch moves the operation code to use to use the bundle pointer instead of the connection pointer when printing out error messages
f080a493860094a79c613bf64b7d6e0444896e3f	clk uniphier continue probing even if some clocks fail to register do not let the entire probe function fail even if some clocks fail to register lets continue with succeeded clocks this will give the system more chances to boot and allow us to investigate the cause of the failure
5140d2344f1036dadffbb949a60af971b6dde0d3	add option to skip dma sync as a part of mapping this change allows us to pass dma_attr_skip_cpu_sync which allows us to avoid invoking cache line invalidation if the driver will just handle it later via a sync_for_cpu or sync_for_device call link
37f07c0c974d78bfcdc9f3267438c91163fc3ae5	greybus audio fix memory leak topology data pointer was mistakenly set to null before freeing it fix this
c67f866dbb9b36593d0f6af177e99047ecebf95a	serial efm32 add module_exit add missing specification of efm32_uart_exit as module_exit this fixes the following compilation warning warning defined but not used
d2b805d89510737ea80c1469f854a16480d19778	cciss fix invalid use of sizeof in cciss_find_cfgtables sizeof when applied to a pointer typed expression gives the size of the pointer not that of the pointed data acked-by
6e2a60b57a83ea134c06c5226aaff20e7e9ce221	ixgbe make __ixgbe_setup_tc static this function is only used in resolves a missing prototype warning when building the driver with
43c27fb5c21eb238ce5ffc7766bc59ab773bfd7c	update pd while updating vm as well change-id i93a861cd6707f7d91672b9e19757cc50008cd7a2
f0b20e7120849ea68b2d7f0ec36ea45643265b09	asoc rsnd remove gen2 only comment gen1 support had been removed gen2 only comment is no longer needed
c6e39da02e17bf3521f1c08df1555b6ffa77dee4	rtl8xxxu rename rtl8723au_update_rate_mask to rtl8xxxu_update_rate_mask all currently supported gen1 parts use the same function for updating the rate mask so rename it to reflect this
2a58364da0c04f8dc42cdfe7a4de9d17e536cda8	pch_uart change type to u8 target uart register access size is however is used at __number__ points this patch modifies type unsigned int to unsigned char
9bb5ec8872312751f992cdac9968805fe03e81aa	sh cmt introduce events routines introduce routines for sh cmt clock event devices and modify the routines for sh cmt clock sources such that if those devices belong to a pm domain the generic pm domains framework will be notified that the given domain may be turned off during system suspend or that it has to be turned on during system resume
e821303c428eedcc20746224d590b11c7000a7e5	iw_cxgb4 use dsgl by default enable the use of dsgl by default and determine whether dsgl is supported from lld info
c97e0602bcfeaabf303b125e07ed7ba35c656495	remove redundant check daemon_sleep is an unsigned so testing if its __number__ or less than __number__ does the same thing
00d2ec0c5f5ae8507931efd8feb174f30370c12e	brcmsmac replace with kzalloc in ai_attach space is allocated for an si_info struct immediately after the allocation routine ai_doattach is called and that allocated space is set to zero as no other routine calls ai_doattach kzalloc can be utilized
baba2e0d2bf5d68e4ec0d8a4d700724ef866249f	alsa usb-audio add missing error checks in snd_ebox44_create_mixer
495c765d7d1ff72b4039bd9a7ba3c627b80ba4d8	net smsc911x use dev_get_platdata use the wrapper function for retrieving the platform data instead of accessing directly this is a cosmetic change to make the code simpler and enhance the readability
8b82fa8388db5ccd50bad172d3e885dcea22596d	staging unisys remove comparison the comparison is always true as the dev_t has been initialized in the init function and we are sending that initialized dev_t to the cleanup
6d37b171929a94b41214dfabc65881f60c9da095	staging lustre lnet o2iblnd use swap in kiblnd_dev_failover use macro definition thanks to julia lawall for coccinelle scripting support
92367fe7f24159d6ba83276bc7a0f45c6f663837	ath9k always use sifs times from ofdm for mhz mhz channels should always use sifs times as defined in ieee ofdm phy characteristics this makes it compatible to ath5k which does the same
1a8862863a7171e8b97fe8833bb3a78770a8aaee	greybus firmware firmware image name has instead of thats how the bootrom-tool names it and thats how the kernel should expect it
f07df98063ff1ffa6224184eb15935c1cd416d0f	remove redundant calls to drm_connector_register_all up to now the recommendation was for drivers to call drm_dev_register followed by drm_connector_register_all now that drm_connector_register is safe against multiple invocations we can move drm_connector_register_all to drm_dev_register and not suffer from any backwards compatibility issues with drivers not following the more rigorous init ordering link
b9555f6627656309c01b0c077dcecbee0ac9343f	igb mask off check of frag_off as we only want fragment offset we were incorrectly checking the entire frag_off field when we only wanted the fragment offset as a result we were not pulling in tcp headers when the dnf flag was set to correct that we will now check for frag off using the ip_offset mask
d98817d4961b9ef75062d1e129829d283b3dac57	cgroup dont print subsystems for the default hierarchy it doesnt make sense to print subsystems on mount option or for the default hierarchy file at the root of the default hierarchy lists the currently attached controllers the default hierarchy is catch-all for unmounted subsystems the default hierarchy doesnt accept any mount options suppress subsystem printing on mount options and for the default hierarchy
c79aa0d96548aee50570209eb2d45c8f4ac49230	events protect access via task_subsys_state_check the following rcu splat indicates lack of rcu protection __float__ __float__ info suspicious rcu usage __float__ not tainted __float__ __float__ suspicious rcu_dereference_check usage __float__ __float__ other info that might help us debug this __float__ __float__ __float__ rcu_scheduler_active __number__ debug_locks __number__ __float__ __number__ lock held by __float__ at __number__ __float__ __float__ stack backtrace __float__ call trace __float__ __number__ __number__ unreliable __float__ __number__ __number__ __float__ __number__ __number__ __float__ __number__ __number__ __float__ __number__ __number__ __float__ __number__ __number__ this commit therefore adds the required rcu read-side critical section to perf_event_comm link
800f35d773b038677fc7d6d0b2fc34a31005dd23	staging comedi jr3_pci reset all dsps the various jr3 pci models have from __number__ to __number__ dsps one per subdevice prior to loading the firmware to all the dsps the initialization code in jr3_pci_auto_attach resets the first dsp as far as i can tell it should reset all of them change it to do so
e59b9afecf7ddf52d31d24e800b473f19c23cfe0	iio double unlock on error path we should be holding the mutex when we goto error_free_chans
0b57075deb3c082db6fbf528f3f6a3854b81bd83	hpsa rearrange start_io to avoid one sequence in main io path
d286de796aab9e306e674c6d23c4f3c1f55e394c	libceph primary_temp decode bits add a common helper to decode both primary_temp full map and new_primary_temp inc map same and switch to it
66ef950d1841487c852d68d00977726f1cd9f053	propagate error-value from ir_parse_ioapic_hpet_scope propagate the error-value from the function ir_parse_ioapic_hpet_scope in parse_ioapics_under_ir and cleanup its calling loop
e8cb64db81e8c88c5c824ca74c2e57b4c6919ca6	scsi ufs fix static checker warning in ufshcd_parse_clock_info this patch fixes newly introduced static checker warning in ufshcd_parse_clock_info introduced by ufs power management series warning ufshcd_parse_clock_info warn passing devm_ allocated variable to kfree clkfreq to fix it we remove the kfreeclkfreq statement in addition we removed the redundant goto label
58d1246db340793c408b22884598e4ce4d1d4aba	mmc sdhci specify maximum discard timeout in general sdhc hardware timeout cannot be avoided accordingly the maximum timeout is specified to limit the maximum discard size
dded45fc179a07f4463ce37fc376977568655836	openvswitch specify the minimal length of ovs_packet_attr_packet in the policy specifying the minimal length in the policy makes it reuseable and documents the interface
566830fdb1b666b5159709a9e66ed5f2c85f58b7	greybus es2 update the bulk_ep_set value accepted by map_to_cpor_ep the endpoint set __number__ is currently considered as invalid but __number__ mean muxed cports on ep1 and ep2 then it must not return
24b4315051ef2b9155d23ccbad528daab3b65eb6	regulator add epes to the module_alias for wm831x-dcdc
6096ce0b02c1cb5a5df6a726c5727c267b2468e0	stmmac update the driver version aug_2011 v3
15532f4761bb50a1ea55f0ab16fa9c4126aa73ca	ehci remove duplicate debug_async_open prototype in this patch removes the duplicate of debug_async_open prototype following three lines below the debug_async_open declaration
1e48d542e751f766d0ff03aa97bef22d90a98041	hid plantronics remove superfluous remove redundanct probe callback as it isnt doing anything extra that hid core wouldnt do by default
edce5e6f33a365c879b453286191bf397cc5efb4	uio fix false positive __might_sleep warning splat andy has reported a __might_sleep warning __float__ warning cpu __number__ pid __number__ at __float__ do not call blocking ops when set at __address__ uio __float__ modules linked in tcm_loop target_core_user uio target_core_pscsi target_core_file target_core_iblock iscsi_target_mod target_core_mod uinput fuse nfsv3 nfs_acl nfs lockd grace fscache sunrpc microcode i2c_piix4 virtio_balloon i2c_core xfs libcrc32c crc32c_intel virtio_net virtio_blk __float__ cpu __number__ pid __number__ comm tcmu-runner not tainted __float__ hardware name qemu standard pc i440fx piix __number__ bios __float__ __address__ __address__ __address__ __number__ __float__ __address__ __address__ __address__ __address__ __float__ __address__ __number__ __number__ __address__ __float__ call trace __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ uio __float__ __address__ uio __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ uio __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__ the warning is a false positive because uio_read doesnt depent on task_interruptible after copy_to_user so it is safe to silence the warning by an explicit setting the state to task_running in the path which might call into task_running
8bd313453736d8efa82afee01c899774b29362ac	spi coldfire-qspi remove unused dev field from struct mcfqspi also remove unused variable in mcfqspi_remove
438831fc6ee66a34f27522ef3f0f9eac4b4da8bc	rtc rtc-davinci remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure since commit device-core ensure drvdata null when no driver is bound thus it is not needed to manually clear the device driver data to null
b026f6e8d607f40f9fcdc0bc9966db4bde4a1129	staging wilc1000 linux_mon fix error code of kmalloc this patch fixes error codes as instead of using if kmalloc is failed
20a6264abf8bd77bbfcbfc9e7a279203f1630410	fix variable type declaration fix the following sparse warnings generated by and-ing constant with a normal integer warning restricted fmode_t degrades to integer
e4cdcb7cce2949fb36a04b9848f856a107a0a2da	use embedded tcon pointer to get the tcons output port node a pointer to the underlying tcon of the crtc was added to the sun4i_crtc structure in add backend and tcon pointers to sun4i_crtc however the crtc init function was still using the copy from sun4i_drv to set this was an oversight when the patches were reordered switch to using the embedded tcon pointer to get the tcons ouptut port and assign it to this makes it possible to remove the usage of sun4i_drv completely in subsequent patches
4f2864a49bf058184e85c9f5a2f4578f11992c7d	alsa hda enable sync_write and reset for conexant codecs this is an attempt to fix s3-resume problems reported for a few laptops with different conexant codecs they show the communication stalls at some time in s3 and the driver falls back into the single-cmd mode this leads to the silent output or the lack of auto-mute feature as a workaround here enables the sync_write and the bus-reset flags to make the communication more stable bugzilla bugzilla
84ce1ddfefc3d5a8af5ede6fe16546c143117616	init ipv6hdr buffer to zero this patch simplify the handling to set fields inside of struct ipv6hdr to zero instead of setting some memory regions with memset to zero we initialize the whole ipv6hdr to zero this is a simplification for parsing the header for the upcomming patches
a32826e4aefa905b392d2d862d51365d50d4829b	asoc tegra fix maxburst settings in dmaengine code the i2s controllers are programmed with an attention level of __number__ dwords this must match the configuration passed to the dma driver so that when they burst in data they dont overflow the available fifo space also the burst size is relevant to the destination for playback and source for capture not vice-versa as originally written
bfd1ff6375c82930bfb3b401eee2c96720fa8e84	bitops introduce bit_ull adding bitx equivalent for unsigned long long type bit_ullx also added bit_ull_mask and bit_ull_word
ff7158b2277d2bb942e2d09dd1df9a9d8a7598ab	kvm s390 allow null parameter for kvm_s390_get_regs_rre were not always interested in both registers that are specified for an rre instruction so allow null as parameter too to indicate that we do not need the corresponding value
7969e77a73164b418da851cbae35cdd6c1b43fee	btrfs send add missing error check for calls to path_loop the function path_loop can return a negative integer signaling an error __number__ if theres no path loop and __number__ if theres a path loop we were treating any non zero values as meaning that a path loop exists fix this by explicitly checking for errors and gracefully return them to user space
711fec5d22e15f24b11b6c7f79cc39cb96f52b13	ethernet amd use devm_ioremap this patch replace ioremap with the devm_ioremap so that the resource will be freed automatically with the probe failed
2eca0d6ceea1f108b2d3ac81fb34698c4fd41006	avoid cache flush beyond its_basern memory size function its_alloc_tables maintains two local variables order and and alloc_size to hold memory size that has been allocated to its_basen we dont always refresh the variable alloc_size whenever value of the variable order changes causing the following two problems cache flush operation with size more than required information reported by pr_info is not correct use a helper macro that converts page order to size in bytes instead of variable alloc_size to fix both the problems
bda96e8c6a751d8f57a5564e18adf33f2a2d857e	net ipw2x00 remove redundant d0 power state set pci_enable_device will set device power state to d0 so its no need to do it again in ipw2100_pci_init_one
4c24f2c9b671a1dacf2e25a3b059b54bb8899de1	serial mxs drop superfluous driver core already takes care of refcounting no need to do this on driver level again
7256c476f79d2b50a32cecb0330362afd2fa0b50	hwrng omap remove duplicated function call platform_set_drvdata is called twice in driver probe removing the duplicated call
45094a58b1f56fd5942545659f7c1829ae4520eb	gfs2 eliminate a nonsense goto this patch just removes a goto that did nothing
06cda529d27d778f55690d5b09af8ae4448e796b	dont log iscsi login negotiation failed twice theres no need for iscsi_target_init_negotiation to print iscsi login negotiation failed on failure since its only caller __iscsi_target_login_thread prints exactly the same message if it gets an error return back
c53a62f64a072ea1ba31aa657e5962cf2a8f360e	staging comedi dt282x remove dt2821_size define this define is only used in the comedi_request_region call to specify the size of the region remove it and just open code the value
60ba16e35b887008eececcb935c835026504cef5	staging fix some typos typos in comments fix ring_sw module description
853532d3b5c440d9824b10c6aee478ef77aef3b7	staging vt6655 rxtx change s_ugetrtsctsrsvtime to always return __le16 s_ugetrtsctsrsvtime always needs to return little endian __le16
98eafce6bda705529e90d33b7f23706b346a6c8a	perf trace pack struct trace initial struct stats size __number__ cachelines __number__ members __number__ sum members __number__ holes __number__ sum holes __number__ last cacheline __number__ bytes after reorg pahole trace tail size __number__ cachelines __number__ members __number__ padding __number__ last cacheline __number__ bytes link
5576cd6ca555bd79e76a2d798aec44b28851d369	f2fs avoid unneeded setpageuptodate in f2fs_write_end we have already set page update in so we should remove redundant setpageuptodate in
93050db2065726c7fd0db1b9a53311a74eee94c3	input alps fix memory leak when detection fails this fixes memory leak introduced by commit a09221e83e13e09a33109b9b037484eade901cea
7c7b9cf53d284fe12eeab6e13d3098b18cff4692	asoc simple-card fixup cpu_dai_name clear case f687d900d30a61dda38db2a99239f5284a86a309 asoc simple-card cpu_dai_name creates confusion when dt case cleared cpu_dai_name for caring fmt_single_name case and asoc simple-card remove when dt cared multi dai-link case but cpu_dai_name matching is required when fmt_multiple_name was used
a0dfe0ab6bf194805ce9d6a2dc81efab7a4a7fda	bluetooth debug print amp_mgr refcnt improve debug output
7653620de341f45dc259d74d79c8d85df7e11326	drbd converted drbd_wait_for_connect from mdev to tconn
589ce5f447b8610df0dbd6935b56d5cda17b9cec	fix accesses the gicv3 architecture specification mentions that a register can be accessed using two accesses what it doesnt mention is that this is only guaranteed on a system that implements aarch32 and a pure aarch64 system is allowed not to support this this causes issues with the gicr_typer and gits_typer registers which are both ro registers in order to solve this this patch switches the typer accesses to the gic_read_typer macro already used in other parts of the driver this makes sure that we always use a access on systems and two accesses on system
11b538cd6df398c86f4f0e09049c41e3058af10d	use for_each_port_masked in bxt phy init for clarity make it easier to see which ports are configured for each phy no functional changes link
aeaf5d86faa5d8c64674465da544c26c97e9404a	staging ks7010 fix two memory leaks on error return path on the error case where there is an invalid mac address there is memory leak on packet and pp on the error return free these first before returning to fix the leak
8aad6f14c09d78862fc04e47214d398add9bb8ce	qed fix copy of uninitialized memory in qed_ll2_start_ooo the ll2_info variable is uninitialized and then passed to qed_ll2_acquire_connection where it is copied into a new memory space this shouldnt cause any issue as long as non of the copied memory is every read but the potential for a bug being introduced by reading this memory is real detected by coverityscan uninitialized scalar variable
7284a00f17290114d304528fc49aeee5c2b9b433	pm opp set to a valid dev_opp we dev_opp after using its value to fill right now move this to a later point where dev_opp is valid
9fc0944a85e4ae5ce9217b1de63c58363e405a53	staging rtl8187se remove pt_regs irq handler parameter struct pt_regs pointer is no longer passed as a irq handler argument v2 remove rtl8180_interrupt cast to void
c05cdb1b864f548c0c3d8ae3b51264e6739a69b1	netlink allow large data transfers from user-space i can hit enobufs in the sendmsg path with a large batch that is composed of many netlink messages here that limit is __number__ mbytes of skbuff data area as kmalloc does not manage to get more than that while discussing atomic rule-set for nftables with patrick mchardy we decided to put all rule-set updates that need to be applied atomically in one single batch to simplify the existing approach however as explained above the existing netlink code limits us to a maximum of __number__ rules that fit in one single batch without hitting enobufs iptables does not have such limitation as it is using vmalloc this patch adds netlink_alloc_large_skb which is only used in the netlink_sendmsg path it uses alloc_skb if the memory requested is one memory page that should be the common case for most subsystems else vmalloc for higher memory allocations
cf8039036a6e9c5f7144841925f212a957faf1aa	ext4 prevent stack overrun in ext4_file_open in ext4_file_open the filesystem records the mountpoint of the first file that is opened after mounting the filesystem it does this by allocating a stack buffer calling d_path to grab the mount point through which this file was accessed and then memcpying __number__ bytes into the superblocks s_last_mounted field starting from the return value of d_path which is stored as cp however if cp buf which it frequently is since path components are prepended starting at the end of buf then we can end up copying stack data into the superblock writing stack variables into the superblock doesnt sound like a great idea so use strlcpy instead andi kleen suggested using strlcpy instead of strncpy
2d40390337dcc4a02f06574a18119bfbeb798867	usb misc ldusb dont print error when allocating urb fails kmalloc will print enough information in case of failure
48fd6b71d60ef66ef2d791045d750168c0d09201	lguest suppress keyboard polling while hacking on getting out to the lguest launcher i noticed that returning for the keyboard status made it spin for a while thinking there was a key pending fix this by returning __number__ instead of
3a74ca0140f64ae3c61c2f6230bc0c07efc0343b	use list_for_each_safe to simplify code use list_for_each_entry_safe instead of list_entry to simplify code
fee6fdfa69396da33bb8a816b36150afcbe9d1a0	ditch null hook assignments gcc does this for us and these hooks will be gone soon
09db529cb52f84865b754e944d584972a1665098	staging wilc1000 remove unused define this patch removes infinite_sleep_time that is not used in the driver so just remove it
ec5cc0f9b019af95e4571a9fa162d94294c8d90b	restrict gpu boost to the rcs engine make the assumption that media workloads are not as latency sensitive for __wait_seqno and that upclocking the gpu does not affect the blt engine under that assumption we only wait to forcibly upclock the gpu when we are stalling for results from the render pipeline
b69e5c672d57fa300fef368106ab61c9214a760d	i2c octeon remove superfluous check in octeon_i2c_test_iflg remove superfluous check and stray newline
2542787430fc46b4e07e0da4c6ec80ed230032e5	usb gadget dummy_hcd use dummy_pullup instead of open coding the removed code does the same thing as dummy_pullup the only difference is that in dummy_udc_stop the first dummy_pullup did not call usb_hcd_poll_rh_status
8708ecf01d454607f15fe1b378c8b88de3b9c34b	mlxsw resources add acl related resources add couple of resource limits related to acl
54a06dde40f6a01e323d49390d78b8c9f1dfacc0	arm shmobile r8a7778 add missing call to shmobile_init_late add the missing call to shmobile_init_late to r8a7778_init_late this should make sure suspend-to-ram and cpuidle are setup as expected on bockw
f32198176598fffdc8dca65a1a719dd9fba7d581	input twl4030-pwrbutton switch to using twl_module_pm_master define to facilitate upcoming cleanup in twl stack switch from using twl4030_module_pm_master define to usingtwl_module_pm_master there are no functional changes
4087c471e74064650a1f2eec79bcf97acbb99fb1	hdaps fix for trivial fix for some compiler warnings
a7cf13caad8bf368a28f31dbb4807d61bc9ace18	rename pnv_pci_ioda2_tce_invalidate_entire as in fact pnv_pci_ioda2_tce_invalidate_entire invalidates tces for the specific pe rather than the entire cache rename it to pnv_pci_ioda2_tce_invalidate_pe in later patches we will add a proper pnv_pci_ioda2_tce_invalidate_entire
ec5a11a91eecd81ef19b8044a243b4ea56c809e6	serial __number__ validate dmaengine rx chan meets requirements __number__ dma support requires the dmaengine driver support error-free and better-than-descriptor residue granularity query slave caps to determine if necessary are supported disable dma if not note this means dmaengine driver must support slave caps reporting as well
a50dcc500170eca8164e72f1c7eaf4402193b10c	drm virtgpu rely on the default behavior the virtgpu output exposes a relationship between connectors and encoders and the driver is relying on the atomic helpers we can drop the custom implementation and let the core call drm_atomic_helper_best_encoder for us link
54c33e7f95284539e52ec2d99dcdf6efd29b247f	vfs do_last make enoent exit rcu safe this will allow this code to be used in rcu mode
3009c0377f25c29852b218a6933a969d02cbdc5d	drm free atomic state during cleanup the current state of crtcs planes and connectors currently leaks during drm driver unless drivers explicitly clean it up since there is nothing driver-specific about it that cleanup can be done within the drm core
ec4622f5fdfa2467befa6d750675db3d3258edc5	perf annotate handle perf_record_exit events noticed annotate wasnt handling those events while introducing link
136c489b1cdcaad8f3da31298b839b5861d9de6d	usb gadget f_mass_storage use null instead of __number__ the local variables such as filename vendor_name and product_name are pointers thus use null instead of __number__ to fix the following sparse warnings warning using plain integer as null pointer warning using plain integer as null pointer warning using plain integer as null pointer
ad3f71244c93412087ae93aabce39c4a9fb12891	iwlagn define valid init calibration mask use the valid calibration mask for init calibration
4453641fe85f2ffda653e2e61b6a554dba1f0581	__d_materialise_dentry flip the order of arguments thus making it much closer to now unreachable btw is_rootdentry case in __d_move a bit more and itll fold in
e4fda9f264e154946c678ca7ff07023f573abf6a	drm perform ioctl command validation on the stored kernel values userspace is free to pass in any command bits it feels like through the ioctl cmd and for example trinity likes to fuzz those bits to create conflicting commands so instead of relying upon userspace to pass along the correct flags for the ioctl use the flags as expected by the kernel this does have a side-effect that null pointers can not be substituted by userspace in place of a struct this feature was not being used by any driver but instead exposed all of the command handlers to a user triggerable oops link
54f834cd5501fb5fc801e4719a3ad0c894a3af2c	nfs convert struct nfs_fattr to use kuid_t and kgid_t
3fec6b6d5a53d37194735268b9e220f75ca37f19	asoc set for all platform dapm contexts the asoc core currently defaults to using standby rather than off for idle asoc platform devices which causes a permanent pm_runtime_get on them this keeps the device active unnecessarily this can be especially problematic when the asoc platform device and dai device are the same device the distinction between off and standby is likely not relevant for asoc platform drivers since they arent analog devices so solve this issue by hard-coding idle_bias_off __number__ for all asoc platform devices if this turns out to be a problem this value could be sourced from the snd_soc_platform_driver similarly to soc_probe_codec note prior to this change this caused a large __number__ runtime_active count for the tegra i2s controller even when not in use and a leak in that value as streams were started and stopped this change probably hides a bug
1f03bf06e4e3b8ed9a69e7fc4cdb1be4c6c6c819	bcma fix invalid pmu chip control masks commit b9562545ef0b bcma complete workaround for bcma43224 and bcm4313 introduced the wrong masks for setting the chip control registers the mask parameter is inverse it should be the mask of bits changed which is admittedly a bit non-intuitive the incorrect mask not only causes the driver to not work correctly on the chips affected eg the bcm43224 on the macbook air but the state persists over a soft reset causing the next boot to not necessarily see the device correctly
62f49226b03b6464b6fa71ad926932f9b3c8232a	pinctrl rockchip support unrouted iomuxes per bank on the upcoming rk3288 soc contain some unrouted pins in their banks so while for example pin8 of bank5 stays pin8 with all its settings register offset etc pins __number__ to __number__ are not routed outside the soc at all therefore add a flag to mark these unrouted iomuxes to prevent people from using them
46f3cc176210b2db5db89d9c0e62796cad7e3cdc	block drop q argument from bsg_validate_sgv4_hdr bsg_validate_sgv4_hdr doesnt care about the request_queue so drop it from its arguments
0fe8f5d7a59f3d4d6d7dbdf624a665d11c6faf15	staging silicom checkpatch tab and space cleanup fourth chunk of cleanup
389ae05f8bf5f1e63212baf4a8aa9621148b188a	clk fixed-rate export clk_fixed_rate_register export this symbol so that modules can register fixed rate clocks
4134f5c88dcd5b00e4a5f37c3842b2b831a61ee1	ext4 recalculate journal credits as inode depth changes currently in ext4_alloc_file_blocks the number of credits is calculated only once before we enter the allocation loop however within the allocation loop the extent tree depth can change hence the number of credits needed can increase potentially exceeding the number of credits reserved in the handle which can cause journal failures fix this by recalculating number of credits when the inode depth changes note that even though ext4_alloc_file_blocks is only currently used by extent base inodes we will avoid recalculating number of credits unnecessarily in the case of indirect based inodes
c1a15d08f497150a91ba4e61bab54b8f5c8b49b9	xen-blkback print stats about persistent grants
5fec8b900237ecc8ba1bbc3d051a655d43b6881c	media v4l ov9740 correct print in ov9740_reg_rmw the register width of the ov9740 is so correct the debug print to reflect this
4d1b80bf7a5ae9829b8c741bfab7d9e03533e6b1	dma ipu remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
2b5fbb824f99c5a31e9ff175e96257c1d49e2e15	dmaengine rcar-hpbdma tidyup residue_granularity the driver doesnt support residue reporting at all residue_granularity should be set to dma_residue_granularity_descriptor special thanks to laurent
64ad08605e8433b86249fef29b671812ccca65a5	wlcore print the sdio buffer after reading it fix an issue where we printed the sdio buffer before actually read it
d4fc9dc200acc339370e22a0578725e8fb45da0d	cxgb4 set coalesce parameters on all queues the coalesce parameters was set only on the first queue which caused interrupt rates to be larger on all the other queues this patch allows interrupt rates to be reduced for certain workloads and colaesce parameters by
083fe3b035d286d79071fd77d2a2c5abfdef495b	drm make sure visible is set to false if fb is null we cant let visible set true while the fb is null some places of the code only check for visible to base its decisions
e7b32d12a287a79f2831c1246baf3de0aed95dcc	perf tools normalize sq_quote_argv error reporting it already returns whatever returns in case of failure so just return in the only case where it was dieing when it returns its only caller will call die anyway so no need to be so eager die later link
d819387ef7ca97b4cb3494bfaba9c0cd510122a0	alsa hda clean up redundant fg checks just refactoring no functional changes
16d56963e832339fc2dff6a4afce14138fb61932	crypto rockchip use devm_add_action_or_reset if devm_add_action fails we are explicitly calling the cleanup to free the resources allocated lets use the helper devm_add_action_or_reset and return directly in case of error as we know that the cleanup function has been already called by the helper if there was any error
78a629e95137bb4d39d5e05d03273685401dce06	usb use specifier in mikrotek driver there is a specifier that allows to dump small buffers this patch converts the code to use the specifier
964598f239c37cd6df73d94458beaabec3dc6928	backlight jornada720 use devm_lcd_device_register use devm_lcd_device_register to make cleanup paths simpler and remove unnecessary remove
ff8742279ff163e36ee50bb4e75090af1d7d6e3b	coresight fixing indentation problem
baf70211280c8ca7148d21bea7ea174a0d48b7ee	media coda add compressed flag to format enumeration output correctly flag compressed formats in the enum_fmt ioctl output
b941f067ead3099eeeb3562d9de25664af3949f4	staging rtl8188eu core rtw_security remove return statement from void function remove the return statement from the end of a void function to clean up the code issue found by script
49cf10c67bfbd68bc646390cd1f4cbe77aea12d5	staging dwc2 fix sparse non static symbol warning fixes the following sparse warning warning symbol dwc2_set_param_uframe_sched was not declared should it be
a25c75d5ad04df0a7abd09585231b4021a91a358	btrfs cleanup use consistent lock naming it confuses smatch that we use two names for the same lock plus the shorter name is nicer this doesnt change how the code works its just a cleanup
bd5ebdf0722e5624292c05456057e00547e7e2c4	staging comedi ni_pcidio use comedi_handle_events cfc_handle_events is just a wrapper around comedi_handle_events
784c2213e79c094ffd9c1118722ac9ee5fce5e77	parisc whitespace cleanups in clean up whitespaces and mark unused syscalls as such
630c7ed9ca0608912fa7c8591d05dfc8742dc9e6	rcu dont wake kthreads on nocb cpus chris friesen notice that kthreads were consuming cpu even on nocb cpus this makes no sense because the only purpose or these kthreads is to invoke normal non-offloaded callbacks of which there will never be any on nocb cpus this problem was due to a bug in cpu_has_callbacks_ready_to_invoke which should have been checking for null but which was instead incorrectly checking because is never null the only effect is to cause the kthread to execute when it should not do so this commit therefore checks which is null for nocb cpus
8408427e6b9f37bc5ce09933947e670f87568b77	remove unused arch hook with s390 dropping support for emulated hugepages the last user of arch_prepare_hugepage and arch_release_hugepage is gone
c5dc3b98fffaf183bb3d5bf690bfab9f6705c5e1	media fc0012 remove unused callback and correct one comment there is no need to keep dummy sleep callback implementation as dvb-core checks existence of it before calls callback due to that we can remove it fc0012 is based of direct-conversion receiver architecture aka zero-if where is no if used due to that if is always __number__ hz fix comment to point that
37b6fea57b4fcc03689368b7aab1a897f6e9e6b7	scsi ufs drop owner assignment from platform_drivers a platform_driver does not need to set an owner it will be populated by the driver core
132bd96bc56f9cafd24b71de389984d0e83a0956	alsa hda fix number of devices query on hotplug the new regmap code seems to cache this which isnt helpful for the hotplug dock situation where this gets updated use the uncached query for this
72da70e77f885ec9a79af9c13ff1c79b6136b75f	pwm imx remove enabled field from struct imx_chip we can test pwmf_enabled bit to know if pwm is enabled or not thus remove enabled field from struct imx_chip
9b2de7ff424220c731276aaef9025cdd1d4052a8	crypto octeon dont disable bottom half in octeon-md5 dont disable bottom half while the crypto engine is in use as it should be unnecessary all kernel crypto engine usage is wrapped with crypto engine state so if we get interrupted by softirq that uses crypto they should save and restore our context this actually fixes an issue when running octeon md5 with interrupts disabled tcrypt theres a warning because the module is trying to enable the bottom half with irqs disabled __float__ cut here __float__ warning cpu __number__ pid __number__ at __float__ modules linked in __float__ __address__ __float__ __address__ __float__ __address__ __float__ __address__
5eea84f478537de769330079dc068414f9d417f4	if_tun add ifreq flags field is only __number__ bit wide so setting iff_vnet_le there has no effect doesnt fit in two bytes the tests passed apparently because they have an even number of bugs all cancelling out luckily we didnt release a kernel with this flag so its not too late to fix this add to really achieve the purpose of iff_vnet_le this has an added benefit that if we ever want a be flag we wont have to deal with weird configurations like setting both le and be at the same time iff_vnet_le will be dropped in a follow-up patch
67cb4b4dd4b3bb38626a841200638a4e953ea3fd	drm unconditionally clean up dma buffers of closing clients with the last patch to ditch dma_queue support we should be able to call the dma cleanup uncoditionally even when the master has disappeared do so because it just makes more sense
d0f66df5392aaf771c647436e32849e3a4c4e3ff	bcma fix three coding style issues more than __number__ characters per line three lines with more than __number__ characters per line have been split in several lines
73a85069f91d35f6921fd9d9b2603f482b9c9bd1	mmc mxs-mmc implement cmd23 support this patch implements support for multiblock transfers bounded by set_block_count cmd23 on the mxs mmc host driver
3bb398d925ec73e42b778cf823c8f4aecae359ea	netfilter nf_ct_helper disable automatic helper assignment four years ago we introduced a new sysctl knob to disable automatic helper assignment in netfilter nf_ct_helper disable automatic helper assignment this knob kept this behaviour enabled by default to remain conservative this measure was introduced to provide a secure way to configure iptables and connection tracking helpers through explicit rules give the time we have waited for this lets turn off this by default now worse case users still have a chance to recover the former behaviour by explicitly enabling this back through sysctl
8f4055035edbf2a81c1e78b8b7501f059d5f603b	missing setting echo seq for it should set echo seq before do echo otherwise echo_client will regard it as the object with mdt0 sequence picked echo client part for upstream kernel submission intel-bug-id lustre-change
a5900554a8b5fbc4fb731c6f9896ed265683f94e	mtd mxc-nand kill the we kill the by the following way __number__ before we call the nand_scan_ident we allocate a temporary buffer whose size is page_size __number__ after we finish the nand_scan_ident we have already getten the page size and oob size we will allocate the right buffer size again
4c192665f0183150cff38b6954687752f3461e13	greybus loopback functionally decompose calculation of turn-around times we have a pattern similar to this over and over again good software practice dictates we functionally decompose this this patch decomposes into gb_loopback_calc_latency
c6622216ffaacc6286189121e63cdaae1b6bcbce	greybus camera fix endian conversion issues convert all greybus operation fields between cpu and protocol endianness
cddc11412d604ad673709e91e7a35e9f10c68b39	mfd pcf50633 check return value of platform_device_add the return value of platform_device_add is checked after every other use throughout the kernel were also sliding in another cheeky dev_err dev_warn change as were not actually erroring out here rather reporting the fact that somethings gone wrong but carrying on regardless
10bfa766efa19c23f72f50727952a26cb1512256	internal sram before any write uses techenology for sram this tech has known limitaion for sram byte select is not supported hence read modify write is implemented in ifc for any system side write into sram buffer reading an uninitialized memory results in ecc error from sram wrapper hence we must sram buffer by any data before writing anything in sram from system side to initialize sram user can use readid nand command with read bytes equal to sram size it will be a one time activity post boot
8fe73691f905a172fa6aa6800a9c08016c460b06	staging comedi comedi_bond change return value of bonding_attach bonding_attach is the comedi attach handler for the driver any non-negative return value is treated as successful but __number__ is the preferred return value on success
b2addb4a112eb2fbf242558e01115b4ac2f6f13b	fix unreachable code mag3110_read_raw info ignoring unreachable code __number__ case iio_chan_info_scale __number__ switch __number__ case iio_magn __number__ __number__ __number__ __number__ __number__ return iio_val_int_plus_micro __number__ case iio_temp __number__ __number__ __number__ return iio_val_int __number__ default __number__ return __number__ __number__ return iio_val_int_plus_micro introduced by mag3110 scale factor missing
0b1017aab197271a78169fde3d7e487bb721997c	scsi bfa squelch lockdep complaint with a spin_lock_init spotted this while looking at another info trying to register non-static key the code is fine but needs lockdep annotation turning off the locking correctness validator pid __number__ comm udevd not tainted call trace __address__ __address__ __address__ __address__ __address__ __address__ bfa __address__ __address__ bfa __address__ bfa __address__ bfa __address__ bfa __address__ bfa __address__ bfa __address__ bfa __address__ bfa __address__ bfa __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ bfa __address__ __address__ __address__
1b5836492de6a753f6bb420f500848761c6f84f3	print ring name in amdgpu_ib_schedule if the ring isnt ready lets print out which ring name to help debugging
0670307992a69a2028e01e6a5fb5f4ab23167954	mac80211 allow lowest basic rate for unicast management for mesh allow lowest basic rate to be used for unicast management frame in mesh otherwise the lowest supported rate is used for unicast management frame such as for and for rename the rc_send_low_broadcast to re_send_low_basicrate since now it is also applied to unicast management frame in mesh
99e97b7106d492a3cac4f7963f4a89935d2fbca4	add ioport_map stubs add ioport_map stubs to make vfio build on s390
3d2409d4f1d459ad734718ab19c731a934968ec0	staging speakup fix a bug when translate octal numbers there are actually overflow bug and typo and bug was never happened due to the typo
631c52737379f2f1e0b67fbb008107a9ea17b789	at76c50x-usb use ether_addr_equal_64bits ether_addr_equal_64bits is more efficient than ether_addr_equal and can be used when each argument is an array within a structure that contains at least two bytes of data beyond the array the structures involved are at76_priv defined in and ieee80211_mgmt defined in this was done using coccinelle
1aef866968223ddfd7268457b642a9233f0b8006	bluetooth rename le and acl connection functions these names were causing much confusion so we rename these functions that send hci commands to be more similar in naming to the actual hci commands that will be sent
adb28c9d3371c845c7a28bfd4fb163aca0d0dc37	ipv6 compute net once in raw6_send_hdrinc
6df3dbc83fb8043a5975d75970d296d6d14f7273	nvme freeze admin queue on device failure this fixes a race accessing an invalid address when a controllers admin queue is in use during a reset for failure or hot removal occurs the admin queue will be frozen to prevent new users from entering prior to the doorbell queue being unmapped
4d0698d98f501b86d3bef38c46a54a702e0469a0	arm omap4 hwmod fix dss clock data the omap4 hwmod data currently contains errors with dss clocks dss_hdmi and dss_venc have their main_clks wrong the clocks should be dss_48mhz_clk and dss_tv_clk respectively these problems were temporarily fixed with the dss patches hack omap dss2 clk hack for and df5d3ed23cf73ee0763a8963003bda9b69d9620f omap dss2 hdmi fix hdmi clock name which can be reverted after this patch
8be3b69259ce2b9efc9a822ff3bf48a42460f133	ath10k fix error return code return a negative error code on failure a simplified version of the semantic match that finds this problem is as follows identifier ret expression if return ret ret __number__ when ret e1 when when ret e2 when forall return ret
200939940e040fa11609956a09c78a5782310c61	target refactor transport_generic_get_mem to target_alloc_sgl this patch refactors transport_generic_get_mem to target_alloc_sgl for accepting length and zero_page as function parameters in order to be used for both allocations
bd46a80110dcc5c0216ee25acd8b1303ab23455f	staging ks7010 remove braces around single statement blocks fixes checkpatch warning are not necessary for single statment blocks
b7efdf3b1be423d21fa3106aede5a8bcb9c4d152	remove unneeded casts of
b7a1da695f3fb33d093e6de20b1dfc238e3c9587	loopdev ignore negative offset when calculate loop device size negative offset may cause loop device size larger than backing file size fallocate a losetup __address__ a blockdev __number__ ls a __number__ root root __number__ jan __number__ a cat cat error it makes no sense to do that only apply offset when its positive fix a typo in the comment by the way
e46e08b843d8ff8c46ad8d7b0b95acaacc4e6195	net phy check for aneg completion before setting state to phy_running phy_state_machine should check whether auto-negotiatin is completed before changing from phy_nolink to phy_running if auto-negotiation is not completed should be set to phy_an
56c5da00271e656466d34b853d6c2b5f3ce3ee5a	add define to set down-spread in max_downspread register support of down-spread is required for displayport specification version __float__ sink
49cbb1c1e6fd8fb069ef9fbfadc97042168f93bf	forcedeth add transmit timestamping support insert an skb_tx_timestamp call in both ndo_start_xmit routines tested to work for the nv_start_xmit_optimized case
4808f721627c2a23b5d749f9bbd20d4529ea2b8d	media add missing vendor-specific messages the header was missing support for these three vendor-specific messages cec_msg_vendor_command cec_msg_vendor_command_with_id cec_msg_vendor_remote_button_down add wrappers for these messages i originally postponed adding these wrappers due to the fact that the argument is just a byte array which cec-ctl couldnt handle at the time and then i just forgot to add them once the cec framework was finalized it wasnt until an attempt to transmit a vendor specific command was made that i realized that these wrappers were missing
c17c654d18d0c14fb366bdad00e49fdf82a73aa4	remove assertions from intel_crtc_disable since we merged runtime pm support for dpms it is possible that these assertions will be called when the power wells are disabled but a mode is set resulting in failed assertion and device suspended while reading register warns to reproduce the bug disable all screens using mode unset do a modeset on one screen disable it using dpms then try to do a mode unset on it again to see the warns v2 the first version of this patch changed the assertions to also check the power domains daniel suggested that it would be better to just remove the assertions the modeset state checker will already notice when weve failed to turn off the pipe and we check cursors and plane state in the enable sequence too since we use these asserts a lot to lock down the precise modeset sequence i actually prefer if theyre a bit dumb and dont check the power wells testcase testcase
17d966a325a7ccfb5970839fb5b2ebb9e3909a6f	usb gadget s3c-hsotg pass struct usb_request to usb_gadget_unmap_request struct usb_request should be passed to usb_gadget_unmap_request as the second argument however struct s3c_hsotg_req is used fixed build warnings as below in function s3c_hsotg_unmap_dma warning passing argument __number__ of usb_gadget_unmap_request from incompatible pointer type enabled by default note expected struct usb_request but argument is of type struct s3c_hsotg_req warning unused variable req
65405c51bb2e9d2a348f5402443e31f82411aabb	mwifiex fix typo in del_virtual_intf function interface counters should be incremented in add_virtual_intf and decremented in del_virtual_intf function this patch corrects it
7b4b98fa0c4d3a975b36bfe9984e4cd117f2ddff	fix incorrect detection of bank count on newer chipsets has an extra bit here compared to chipsets
959e4083cd9c43fb3e818984926f9c590ee0aa2b	asoc wm5110 use async writes when writing the patch write to the device asynchronously allowing better performance when used with a bus like spi which supports this by minimising the need to context switch back to the driver to get the next bit of data
465893e18878e119d8d0255439fad8debbd646fd	tty goldfish support platform_device with id when the platform bus sets the platform_device id to platform_devid_none use an incrementing counter for the tty index instead
0ee5c6d632324a4b278cb0b29eb8effce4c8a358	vfs dont treat fl_type as a bitmap the rules for fl_type are rather convoluted typically its treated as holding specific values except in the case of lock_mand in which case it can be ored with on some arches f_wrlck __number__ and f_unlck __number__ so anding with f_wrlck will also catch the f_unlck case its unlikely in either case here that wed ever see f_unlck since those shouldnt end up on any lists but its still best to be consistent
fcf621dd2ba2950a3a6717fc0a3c1f908107a546	remove deprecated create_singlethread_workqueue alloc_ordered_workqueue with wq_mem_reclaim set replaces deprecated create_singlethread_workqueue this is the identity conversion the workqueue mcg_wq queues work items and the workqueue clean_wq queues work item mcg_clean_task both have been identity converted wq_mem_reclaim has been set to ensure forward progress under memory pressure
15486fd20cbe45cf56805ee5a67f7b25642efa9d	search only the bo list for vm mappings make vm emulation more efficient
4ca7deb1e15e0030d04051cf4285e88249ebe252	asoc topology use kcalloc instead of kzalloc for array allocation also remove unnecessary memset
b59c93c0090d14556d988607e5bdb297d6e380a7	lp8727_charger make lp8727_charger_get_propery simpler charger has only one valid property online if the property is not online then just return quickly
7e94e51525d3a289ed0c60b57dff36630a8413e4	mfd sm501 constify gpio_chip structures these structures are only used to copy into other structures so declare them as const the semantic patch that makes this change is as follows disable identifier i position p static struct gpio_chip identifier expression e position p e position p identifier struct gpio_chip e on disable identifier static struct gpio_chip i
949d7fa158b2b1af533bdb1af0dda8ab103ac58d	scsi ufs dont check unsigned type for a negative value fix compilation warning warning comparison of unsigned expression __number__ is always false if value ufs_pm_lvl_0 value ufs_pm_lvl_max
d54322d8f69344d7248cfea038b5810fa2ba1b35	arm at91 cam60 fix incorrect placement of __initdata tag __initdata tag should be placed between the variable name and equal sign for the variable to be placed in the intended section
0547c2f56e6e4795d5366ba3b8483b668920a947	smmu remove unnecessary cleanups with remove unnecessary cleanup procedures with functions
26c21dd9885a2d8a4f4d539917c4877ffd399286	r8a7778 irlm setup support works the same as on r8a7779 link
8358f6242dd447a4f694c7bc949bbfc842ca5db1	driver tty vt remove cast for kmalloc return value remove cast for kmalloc return value
aea7b1dc2bb7405f2d7827b202788fbee3912c1a	staging iio accel add error check go to error_ret if sca3000_read_ctrl_reg failed
132aba090d2dd98adb45c8f8cc38e21ccbfb98b3	staging rts5208 make some vars to lower case to keep the style consistent this patch fixes the warning warning comparisons should place the constant on the right side of the test
0ef68ab4dd8d16c10e7b36796f11b6a209acc1de	fix spacing coding style in the following errors and warnings fixed error code indent should use tabs where possible warning please no spaces at the start of a line
906aaf5a195b59fbafc1a36d06be5a52894904fd	media fix stats report report the fixed per-transponder symbolrate instead of per-ts ones add output ts-id report
d66c295031aec712e179d21de66602d631390f34	bluetooth use same le connection event length during update during le connection establishment the value __number__ is used for connection event length so use the same value when the peripheral is requesting an update of the the connection paramters for some reason the value got used in the connection update and __number__ in the connection creation using the same value for both just makes sense
91f30a17024ff0d8345e11228af33ee938b13426	mutexes give more informative mutex warning in the case when mutex debugging is enabled and an imbalanced mutex_unlock is called we get the following slightly confusing warning __float__ current but in that case the warning is due to an imbalanced mutex_unlock call and the is null so the message is misleading so improve the message by testing for this case specifically link improved the changelog changed the patch to use consistently
7c4a54b963b68eee5ef3bd7ca740630d965616e2	tipc rate limit broadcast retransmissions as cluster sizes grow so does the amount of identical or overlapping broadcast nacks generated by the packet receivers this often leads to nack crunches resulting in huge numbers of redundant retransmissions of the same packet ranges in this commit we introduce rate control of broadcast retransmissions so that a retransmitted range cannot be retransmitted again until after at least __number__ ms this reduces the frequency of duplicate redundant retransmissions by an order of magnitude while having a significant positive impact on overall throughput and scalability
321fe304f1dd2dca025141b1d3211415af59020f	make lrc pinning own a reference to the context will simplify the following fix and sounds logical v2 add some whitespace to separate logic better chris wilson
96e92021d4fad8543d598b5e4926cb34fd40c4c4	rcu make use of rcu_preempt_has_tasks given that there is now arcu_preempt_has_tasks function that checks to see if the list is non-empty this commit makes use of it
0385c58207771efed179670549573fb779c15dc9	arm omap3 hwmod initialize clkdm from clkdm_name dt clocks are mostly missing clkdm info now and this causes an issue with counter32k which makes its slave idlemode wrong and prevents core idle fixed by initializing the hwmod clkdm pointers for omap3 also which makes sure the clkdm flag matching logic works properly this patch also changes the return value for _init_clkdm to __number__ for incorrect clkdm_name as this a warning not a fatal error
1bc4b813e8e5bda23a31892712e04905f0c7ffba	namei lift open-coded terminate_walk into callers of get_link
64f7f0510c7e6f61eab080e3f51d314849f47ac1	vhost switch to exclusively most places in vhost can use rather than since addresses are pre-validated this should be good for performance but this also will help make code sparse-clean macros dont play well with __virtioxx bitwise tags switch to to __ variants everywhere in vhost theres one exception for consistency switch that as well and add an explicit access_ok check
dba72cb30b6a4811038128c8a98b268d18ca60fe	btrfs fix balance range usage filters in theres a regression in since commit bc3094673f22 btrfs extend balance filter usage to take minimum and maximum in that existing non-ranged balance with no longer works all chunks are skipped after staring at the code for a while and wondering why a non-ranged balance would even need min and max thresholds then were not set correctly leading to the bug i realized that the only problem was the fact that the filter functions were named wrong thanks to patching copypasta simply renaming both functions lets the existing btrfs-progs call balance with and now the non-ranged filter function is invoked properly using only a single chunk limit
3f8a9e76672202bfb55cc83b5fdc66306d3d170a	iwlwifi fix radio reset scan dwell vs quiet time my previous commit to shorten the radio reset time caused issues as the firmware checks the active dwell time against the quiet time asserting that the dwell is quiet time this isnt really needed in case of passive scanning like here but of course we need to pass that check to fix this override the quiet time to be the same as the radio reset dwell time
282dadbc4994030b0bec7ea3d59345bde5ab2d82	remove braces in sd_search_final_phase fixed below checkpatch warnings braces are not necessary for any arm of this statement braces are not necessary for single statement blocks
50e0e9b12914dd82d1ece22d57bf8c146a1d1b52	netfilter connlimit make same_source_net signed currently returns __number__ if theyre the same make it work like so it can be used as rbtree search function
63ba534ecf78c301df87b25267406002cc1af14a	handle cdclk limits on broadwell as the comment indicates this can only fail gracefully when called from compute_config fortunately this is now whats happening so the fixme can be removed and the drm_error downgraded
1cdb09056b27b2a06b06dc7187d2c33d57082d20	netfilter nfnetlink_queue use xor hash function to distribute instances thanks to eric dumazet for suggesting this during the nfws
e60aa2fba4678d4e7e2d28ef4f2110084d0b150a	openrisc add thread-local storage tls support historically openrisc gcc has reserved r10 which we now use to hold the thread pointer for thread-local storage tls
2af830e5919b6371e109b71597ceca977d23199c	qla3xxx convert to skb paged frag api
379d7cfa9bcae3b89299fdcb135ec0e2810e97bc	input ff-core silence an underflow warning my static checker complains that value comes from the user in evdev_do_ioctl and we check that its not too large here but we dont check that its negative its harmless because the and functions truncate it to a valid u16 value but we may as well fix it just to make the static checker happy
23f72215bc030d1eea437713abfef91c635e2e1f	ip6_gre fix get_size calculation for gre6 tunnel do not include attribute ifla_gre_tos
5a1e73ffe57a86a196c08dffcbd9866776594a38	pci pci-lantiq remove duplicate check on resource sanity check on resource happening with devm_ioremap_resource patchwork
ef5e0d8237287db3a12d84f08fb2483d7a30a943	bridge fix potential deadlock on multicast_lock is taken in softirq context so we should use spin_lock_bh in userspace call-chain in softirq context run_timer_softirq br_multicast_query_expired call-chain in userspace sysfs_write_file store_multicast_snooping br_multicast_toggle
6cd22668e8c8e2618c1883c835de10e11395123b	nfsd remove unneeded values in nfsd4_open
234699a8f3228754fa4c0dfe90170c8a043fedab	leds convert sun fire led driver to devm_kzalloc and cleanup error exit path
6fd63087d87329a2a84f28d0adec875fd9efb782	spi fsl-dspi fix clock rate scale values previous algorithm had an outer loop with the values and an inner loop with and would pick the first value over the required scaling value where the total scale was the two numbers multiplied since the inner loop went up to __number__ it would always pick a value of __number__ for pbr and a much higher than necessary value for br the desired scale factor was being divided by two i believe to compensate for the much higher scale factors the divide by two not specified in the reference manual updated to check all values and find the smallest scale factor possible without going over the desired clock rate
a5e0f69c983a142daa95b70f709a3dabf76cb55f	staging ced1401 fix missing unlock on error in freecircblock add the missing unlock on the error handle path in function freecircblock
00d18339276d35bc6b7ae6ae1a64ebf2242b89f6	i7core_edac properly handle error count instead of generating a burst of errors or reporting the error count via driver-specific details use the new way provided by edac_mc_handle_error
a3220b89bd396ff5b83ede05d7925564d277a9ea	staging ft1000 flatten nesting in dsp_broadcast_msg_id the function dsp_broadcast_msg_id has four levels of nesting move the handling for failed allocation for from the else block at the end to the block immediately following the test reverse the sense of the test and exit with an error code if the allocation fails this eliminates descending into an if block if the allocation is successful move all lines inside the removed block one tab to the left and join lines that will fall under the __number__ char limit
ba2ac29ed6afa4e4a6a42170e7a7aa64199321be	staging rtl8712 fix multiple spaces after return type fix issues with multiple spaces after return type in
24988d3a253303be63c460071dd99bd4674c0880	greybus hd fix host-device-removal race make sure to tear down the svc and flush any on-going hotplug processing before removing the remaining interfaces this fixes crashes due to host-device removal racing with svc processing at unipro restart testing done verified that this fixes crashes reproducible on sdb when unloading the host-device driver module while generating events
8d274e7c0a111e91a7a3f25877af8103ddf05261	media s5p-fimc ensure proper s_stream call order in the isp datapaths since the fimc-is firmware communicates with an image sensor directly through the isp i2c bus controllers data streaming cannot be simply enabled from left to right or disabled from right to left along the processing pipeline thus a subdev index to call s_stream on is looked up from a table rather than doing the op call based on indexes
a0186bcf7c21907c78ab2b4bc50f3fb2b5047806	acpi sysfs add support to allow leading missing in trace_method_name since can be used as relative path from root and can be easily converted into internal trace_method_name format we allow users to specify trace_method_name using relative paths from root note this is useful for grub2 for which users failed to pass from the grub configuration file
3173463418af18b6c7b30bc6a94777780129291d	hv change variable type to bool the variable execute_shutdown is only assigned the values true and false change its type to bool the simplified semantic patch that find this problem is as follows type t identifier b t bool b when any b
546edd83abe4f03472d721c60011c5ff95e25474	pinctrl fix pinconf_pins_show iteration commit pinctrl correct a offset while enumerating pins modified the variable used by pinconf_pin_shows for loop but didnt update the for loop test expression
f1776dade17cd54562f4bc1d01de89c4908b4dd0	virtio_net use non-reentrant workqueue michael s tsirkin also noticed that we could run the refill work multiple cpus if we kick off a refill on one cpu and then on another they would both manipulate the queue at the same time they use napi_disable to avoid racing against the receive handler itself tejun points out that this is what the wq_non_reentrant flag is for and that there is a convenient system kthread we can use
ea7b4887e7266b93fa0c203cc452a926a0fef4f0	cifs fix cifs_do_create error hadnling commit d2c127197dfc0b2bae62a52e1e0d3e3ff493919e caused a regression in cifs_do_create error handling fix this by closing a file handle in the case of a get_inode_info_unix error also remove unnecessary checks for newinode being null
4fe6311734986220e40afe4bf72d62383c1e8d6c	prepare job should be common code path
cb44cdeacd693ca964deab9d9f698920bb73529d	regulator max77686 use array to save pointer to rdev max77686_regulators is known in compile time use array to save pointer to rdev makes the code simpler
863e52769d43a5adbd1de99c70d6db0759529970	staging comedi amplc_pci230 sample types are unsigned sample values in comedi are generally represented as unsigned values replace all uses of short to handle sample values in the amplc_pci230 driver with unsigned short for consistency
65e3b087d55b224a8c036976535601dd66a7cebd	usb serial use module_usb_serial_driver this converts the driver to use the module_usb_serial_driver call instead of having to have a function saving a lot of duplicated code
769161fd2d90fc5b5304c73a0f2be7298c5ce430	media media omap4iss csi2 fix irq handling when stopping module when stopping the csi2 receiver the s_stream handler will wait for the irq handler to notice the stop request the receiver automatically disabled by the hardware after each frame is then not reenabled by the irq handler as it returns immediately as the irq handler check is performed before handling the context irq the context irq source isnt cleared and the csi2 irq is then fired again immediately the irq handler then fails to notice that the module is being stopped processes the irq normally and reenables the csi2 hardware the problem goes unnoticed at stream stop time but depending on the irq and s_stream scheduling timings the csi2 receiver can end up being hanged and will not produce any interrupt the next time it gets enabled despite being soft-reset then fix this by checking for module stop after clearing the context irq source
109ec2309eb996fbe03302fbd40dec9014c6f849	bluetooth move canceling security_timer into smp_chan_destroy all places needing to cancel the security timer also call smp_chan_destroy in the same go to eliminate the need to do these two calls in multiple places simply move the timer cancellation into smp_chan_destroy
1e2c8e7a2f3f5b339a7bd972ad09c66ea52acea8	print details in case of a protect fault interrupt
59b9023c356c54e5f468029fa504461d04c0f02b	usb fix regression in superspeed endpoint descriptor parsing commit b37d83a6a414 usb parse the new usb __float__ superspeedplus isoc endpoint companion descriptor caused a regression in and fails to parse superspeed endpoint companion descriptors the new superspeedplus isoc endpoint companion parsing code incorrectly decreased the the remaining buffer size before comparing the size with the expected length of the descriptor this lead to possible failure in reading the superspeed endpoint companion descriptor of the last endpoint displaying a message like no superspeed endpoint companion for config __number__ interface __number__ altsetting __number__ ep __number__ using minimum values fix it by decreasing the size after comparing it also finish all the ss endpoint companion parsing before calling ssp isoc endpoint parsing function
67d02a1bbb334558e9380409a3cd426b36d4578b	driver-core platform probe of-devices only using list of compatibles there are several indications that make a platform device match a platform driver for devices that are instantiated by a device tree matching by name id table or acpi mechanisms doesnt make sense and might result in surprising effects so limit matching to use the drivers of_match_table for these
73e64fa4f417b22d8d5521999a631ced8e2d442e	netvsc deal with rescinded channels correctly we will not be able to send packets over a channel that has been rescinded make necessary adjustments so we can properly cleanup even when the channel is rescinded this issue can be trigerred in the nic hot-remove path
e98ddb77166a4d7ba6235b20a1328ecb137debb2	skip finding bus for vf resets when the pe used in pnv_eeh_reset is that of a vf pnv_eeh_reset_vf_pe is used unlike the other reset functions called in pnv_eeh_reset the vf reset doesnt require a bus and if a bus was missing the function would error out before resetting the vf pe to avoid this reorder the vf reset function to occur before finding and checking the bus
3f5d3ea64f1783f0d4ea0d35890ae3297f045a8b	rcu consolidate duplicate callback-list initialization there are a couple of open-coded initializations of the rcu_data structures rcu callback list this commit therefore consolidates them into a new init_callback_list function
c3fa201e7855ab5056c7728c9d948eee55b840b5	arm omap board-4430sdp mux configuration for sys_nirq2 the sys_nirq2 is used for twl6040 make sure the pin is configured correctly
7f966ac7a939633ff6fa8cec58982676c243b4f8	usb pl2303 clean up type handling merge types __number__ and __number__ whose differences are unknown and have always been treated the same add type_-prefix to both types test for type_01 rather than for legacy device quirks
33fb0d01ce60fe4c0c12c4f0c134c5cdb818ac5a	ahci do not acquire from single irq handler there is no need to acquire spinlock from hardware context single irq interrupt handler since the handler does not access host data that could be altered by concurrent processors
577f5f974c874228573451b9a521df7962f8b7de	greybus core re-use gb_module_find in gb_remove_module also fix print message
670ab5d21c7e168c89a36fdd2c69fb7af63d35a1	perf help fix for builtins it seems that commit cc5848213329 perf help remove use of die and handle errors caused the problem it changed the initial value of help_format from help_format_man to help_format_none this broke the option for all builtins that would produce no output while man perf-top would work it manpath is properly setup link
940d156f52d27c16f3e0890e82974d500e40e64f	batman-adv iv_ogm_aggregate_new simplify error handling it is just a bit easier to put the error handling at one place and let multiple error paths use the same calls
2c2f3080de7341f58a5d0e8ea31cc66dd369b8f4	watchdog ziirave use watchdog infrastructure to create sysfs attributes the watchdog core now supports creating driver specific sysfs attributes when creating the watchdog device
f80132613d576e7e705344d0c33f3b5e65d9e16a	scsi cxlflash refactor wwpn setup commit cxlflash remove dual port online dependency logically removed the ability for the wwpn setup routine afu_set_wwpn to return a non-success value this routine can safely be made a void to simplify the code as there is no longer a need to report a failure
6fde0f307cdc3cdf7a11a13c5335e11627f9ef24	ubi drop redundant ubi error string the ubi_err macro automatically prefixes ubi error before the message by also using it here we get a log like so ubi error ubi_init ubi error cannot initialize ubi error
44b8185007d66d61793be08f0c9b2248e6d56ecf	remove unused entries in xgi340new_mclkdata and xgi27new_mclkdata in the lookup tables xgi340new_mclkdata and xgi27new_mclkdata only the first three lines are used thus the remaining fields can be removed rationale uses as the index for is assigned the return value of xginew_getxg20dramtype which can only be __number__ __number__ or __number__ is assigned to either xgi340new_mclkdata or xgi27new_mclkdata in only the first three values are used the rest can be removed
7d76173d40bef0516068dbf38195470abf979c8a	staging rtl8723au fix resource leak firmware was not released properly if kmemdup fails addresses-coverity-id __number__
67e51ec4ed09482b53a81fb33df81a2d5a15aa2f	uwb staticize local symbols these local symbols are used only in this file fix the following sparse warnings warning symbol uwb_rsv_reason_code was not declared should it be warning symbol uwb_rsv_companion_reason_code was not declared should it be
599b87809594e2b8f742cbd318db31935689cceb	staging emxx_udc remove parentheses around the right hand side of assignment remove parentheses around the right hand side of assignments as they are not needed semantic patch used expression a b c a b c a b
55878e88c59221c3187e1c24ec3b15eb79c374c0	sparsemem add build_bug_on when sizeof mem_section is non-power-of-2 instead of leaving a hidden trap for the next person who comes along and wants to add something to mem_section add a big fat warning about it needing to be a power-of-2 and insert a build_bug_on in sparse_init to catch mistakes right now non-power-of-2 mem_sections cause a number of warns at boot which dont clearly point to the size of mem_section as an issue but the system limps on temporarily at least this is based upon dave hansens earlier rfc where he ran into the same issue sparsemem fix boot when sections_per_root is not power-of-2
a52c0282721e8e2a39679f865dc5ec72005a948f	ath10k add missing goto this prevents warning spamming if peer creation fails during sta_state in some cases
e0c508ab099bda4629768107d14bbe9afa5c6705	ath10k add missing debug prints
6fcb8a3a3a542ca078dc739fe0ea97191bc59e74	mfd fix generic irq chip ack function name for jz4740-adc in commit replace irq_gc_ack with variants irq_gc_ack was renamed to irq_gc_ack_set_bit the jz4740-adc driver still uses the old name which results in a compile error
5d3c1f633ea2984602bbbfe84e3e858050cb36f3	asoc samsung s2c24xx-i2s remove redundant error message there is no need to report the resource request error in the driver as it is already handled within devm_ioremap_resource while at it also drop a redundant variable initialization
e4dcbb375cd829e1649b12e0ab7d7e5b7efcb5a5	mac80211 fix ie buffer len remove size of ssid ie from the ie buffer in scan and sched scan since this ie isnt added to this buffer
18afbc54c4944b6c93f3888d97db0d1257a4b5e9	mtd gpio-nand ability to use driver for configurations without rdy-pin in some configurations of gpio-nand rdy-pin may be not connected this patch allow to use driver for these configurations in this case we are assume that device always ready
a14ef24b07b63669d58c16d836ddbadcce3e7ad0	w1 fix for loop exit condition in w1_seq_show the w1_42_finished_byte is so the cast means the condition is never true
585d84b4838ac061f935b5d5c84550ec9f5dee82	staging lustre remove unnecessary braces for single statement blocks remove unnecessary braces for single line statement blocks
ab5beca895335856ed9cb749aee8a2aabde0c247	bracket interrupt handler with nv_pmc_intr_en this looks to be what nvidia do pretty much everywhere since forever
2b8ddd9337ee0d001b22507f95596648a1a90992	kvm extend struct kvm_msi to hold a device id the arm gicv3 its msi controller requires a device id to be able to assign the proper interrupt vector on real hardware this id is sampled from the bus to be able to emulate an its controller extend the kvm msi interface to let userspace provide such a device id for pci devices the device id is simply the bus-device-function triplet which should be easily available to the userland tool also there is a new kvm capability which advertises whether the current vm requires a device id to be set along with the msi data this flag is still reported as not available everywhere later we will enable it when its emulation is used
9e556dcc55774c9a1032f32baa0e5cfafede8b70	spi spi-imx only enable the clocks when we start to transfer a message current code keeps the clocks enabled all the time it wastes the power when there is no operaiton on the spi controller in order to save the power this patch adds the two hooks spi_imx_prepare_message enable the clocks for this message spi_imx_unprepare_message disable the clocks this patch also disables the clocks in the end of the probe
06957e8fe6945e2d3c4ab01d36e52bf31a93a05c	f2fs clean up f2fs_lookup this patch cleans up to avoid deep indentation
933623c38f014b10db564f0ec44f9db64a5ced84	update driver to address issues this driver has a number of issues this patch resolves them by replacing rtc_time_to_tm with rtc_time64_to_tm replacing rtc_tm_to_time with rtc_tm_to_time64 changing mxc_rtc_set_mmss to use rtc_class_opss set_mmss64 after this patch the driver should not have any remaining issues link
a24f64a648376766497fddd8bc24b1ca5b906431	regmap reset device debugfs when reinitialising the cache most of the data exposed via debugfs is for or from the cache so reset all the debugfs configuration to make sure everything is up to date with the latest configuration especially if were changing cache type
84bc0db53b3a425fb992d5fed25b575e4434167a	bluetooth dont take any action in smp_resume_cb if not encrypted when smp_resume_cb is called if were not encrypted the callback wasnt called because the connection became encrypted we shouldnt take any action at all this patch moves also the security_timer cancellation behind this condition
e18d1f8df176527332761ac29ee3097f8584c478	replace rdtscl with native_read_tsc this is only used if baycom_debug is defined acked-by thomas sailer link
bd9c504bfd659e58d3537123e6798a9b83a2263d	iwlwifi dvm main use setup_timer convert a call to init_timer and accompanying intializations of the timers data and function fields to a call to setup_timer a simplified version of the semantic match that fixes this problem is as follows expression d f
9598c82dcacadc3b9daa8170613fd054c6124d30	sched dont update shares twice on on_rq parent in dequeue_task_fair we bail on dequeue when we encounter a parenting entity with additional weight however we perform a double shares update on this entity as we continue the shares update traversal from this point despite dequeue_entity having already updated its queuing cfs_rq avoid this by starting from the parent when we resume link
e19898077cfb642fe151ba22981e795c74d9e114	set privileged attribute to default instead of unprivileged currently the driver sets all the device transactions privileges to unprivileged but there are cases where the iommu masters wants to isolate privileged supervisor and unprivileged user so dont override the privileged setting to unprivileged instead set it to default as incoming and let it be controlled by the pagetable settings
6ebdb5a02948d09093af486b237a9692fd21c998	use new atomic iterator macros in wm code the watermark code needs to look at the new allocations so use for_each_new_crtc_in_state everywhere
ad41550666f89b5af9335fcde9e98b61190daf99	enable hdmi audio by default seems to be stable enough for the majority of users it can be disabled on the fly via connector attributes
4344672830d8500eac97d82976b03e41580c3a04	staging rtl8192e fix printk style warning this fixes the following warnings warning prefer subsystem eg netdev_infosubsystemdev then dev_infodev then to printkkern_info
60815d4a78204915f5cdf79a536bc96d5d23ae5f	media cec fix ioctl return code when not registered dont return the confusing error code when the device is not registered instead return which is the proper thing to do in this situation
cf2cf0f50c14e86e04cda2c684357eed77922666	lguest read offset of device_cap later read the offset of the capability with type virtio_pci_cap_device_cfg only when were sure were going to need it which is when all checks have passed and we know we have a virtio console with an emerg_wr field link
ad87a766479d027f5966c781605bc9f7bf8bab67	use use the wrapper functions for getting and setting the driver data using platform_device instead of using with so we can directly pass a struct platform_device
8537483a17038f08c68c1f0a561f0fe686e5706f	asoc rsnd recover pio mode for new dma interface renesas sound driver needs dma interface and dma is using dmaengine and is using local method now dma had been dmaengine but it was moved to local method by previous patchset but then it lost pio mode fallback when probe this patch recovers it
dc9db95017d24fd1e2f324b3977077c030d8e830	staging rtl8192u space required after this is a fix to add spaces after commas in
9f55bca2b82a77a3cc3204900db2fc40ab30019e	aic94xx set an error code on failure we recently did some cleanup here and now the static checkers notice that there is a missing error code when ioremap fails lets set it to
23d1f8f589df4a537751f4d6accc5841ed6cb24e	mips octeon delete legacy hack for broken bootloaders delete legacy hack for broken bootloaders the warning has been in kernel for several years and if there are still users using such bootloaders they can fix the boot by supplying a proper dtb patchwork
87648cc925222f16c3bd119af8ae8e8fb2f3fe1d	sfc fix internal indices of ethtool stats for the indices in need to match the ef10_stat_whatever enum values in efx_nic_update_stats only mask gaps are removed in efx_ef10_update_stats
3b772b96b8338bca2532839b2cd7802800e66037	tracing update some tracing_map constants and comments make it clear exactly how many keys and values are supported through better defines and add __number__ to the vals count since normally clients want support for at least a hitcount and two other values also note the error return value for in the comments link
1f856175e44bc2b8c5c961854abe80fb6c106229	hwmon nct6683 use permission-specific device_attr variants use device_attr_rw for attributes this simplifies the source code improves readbility and reduces the chance of inconsistencies the conversion was done automatically using coccinelle it was validated by compiling both the old and the new source code and comparing its text data and bss size groeck updated description
34c93c8657935d30649e777c4aa05f74f16aa418	dma mv_xor add a device_control function the dmatest module for dma engines calls dma_terminate_all __number__ after completing the tests the documentation in suggests this function is optional and dma_async_device_register also does not bug_on when not passed a function however dmatest is not the only code in the kernel unconditionally calling device_control so add an implementation indicating all operations are not implemented
8835cf6e47cb2ff3d518305d0a9d9dc4ab10dedc	arm am43x prcm init initialise am43x hwmod powerdomains and clockdomains
fdb3c32cb7b80d28f23f005543eb4f0d6e88c2a3	staging hv mouse change the jump label cleanup to cleanup change the jump label cleanup to cleanup
cea4c9e46c4f656a81c93f09b5e3bde38bebb160	media media soc-camera remove superfluous jpeg checking explicit checks for the jpeg pixel format in soc_mbus_bytes_per_line and soc_mbus_image_size are superfluous because also without them these functions will perform correctly the former will return __number__ based on packing soc_mbus_packing_variable and the latter will simply multiply the user-provided line length by the image height to obtain a frame buffer size estimate the original version of the media soc_camera dont clear in jpeg mode patch was correct and my amendment adding these two checks was superfluous
02918c0066b1c990a4e60c0dd4702eb9639b760b	staging comedi amplc_pc236 check bus type in detach routine when detaching the device in pc236_detach mirror the bus type checks performed by pc236_attach the existing tests are safe but rely on being __number__ when comedi_to_pci_devdev is null
e4c5d8489a41209534699220021dab409e4d4f55	f2fs introduce update_ckpt_flags to clean up this patch add update_ckpt_flags to clean up the flow
33158fefc88e58fa17a46fdd90ba5231c3c8c89a	iwlwifi mvm advertise vht capabilities update the nvm parsing functions to add vht capabilities they are only added for __number__ ghz of course this assumes that all devices with nvm reading rather than eeprom that support __number__ ghz have vht which is true right now
cb2c02821c44522f7284fcd57a7f11e11657255b	media coda add sequence counter offset the coda decoder also counts pic_runs where no frame was decoded but a frame was rotated out marked as ready to be displayed this causes an offset between the incoming encoded frames sequence number and the decode sequence number returned by the coda this patch introduces a sequence counter offset variable to keep track of the difference
51f72f4a0f92e4abde33a8bca0fac9667575d035	sysctl an easier to read version of find_subdir
6f7fd0953cf9c2bb1cc7ef5a8810e0ddf5827dc5	staging lustre llite removed uneeded return variables removed variables used only for return purposes and replaced them for the return value itself found using coccinelles semantic patch local idexpression ret expression e e ret
0f3982308b5fc7373c8d4e6dcfc8a02ee5a3408d	hid sony relax duplicate checking for usb-only devices some usb-only devices which masquerade as sixaxis controllers report the same generic bluetooth address for all hardware when queried via the hid report this causes these devices to be wrongly rejected as duplicates when more than one is connected at once this introduces a connection type comparison when checking for duplicates and only rejects the newly connected device if the existing matching device is connected using a different connection protocol the results of the connection type comparison are also used when registering power supply info as the device bluetooth address is used as the unique identifier string in cases where more than one valid device has the same bluetooth address the device id is now appended to the power supply name string to avoid name collisions when registering the power supply information
f18befb57b0779094ac7658fa7be5cf559da835f	mtd nand omap use dt specified bus-width only for scanning nand device this patch calls nand_scan_ident using bus-width as passed by dt removes double calls to nand_scan_ident in case first call fails then omap_nand_probe just returns error
ccbedf117f015d4f415130069b47d63c359bc110	virtio_scsi support multi hw queue of blk-mq since virtio_scsi has supported multi virtqueue already it is natural to map the virtque to hw-queue of blk-mq
8a49943f5bc5ff4f835d50451ecf2380eab44d2e	nfc nci call nci_hci_clear_all_pipes at hci initial activation when session_id is filled to the pipe configuration is probably incorrect and needs to be cleared
fbd48a69a0b576dd8cba01b2b4fc24fad76f1b68	switch devtmpfs to umode_t
55df45843901847f33816f8246ca2538aadd339a	clk rockchip export some necessary rk3399 clock ids we export some clock ids for the reference drivers need them
d93814cfadb131fb219359d4b7008c728421c552	xhci kick khubd when usb3 resume really completes xhci roothubs go through slightly different port state machines when either a device initiates a remote wakeup and signals resume or when the host initiates a resume according to section of the xhci __float__ spec on host-initiated resume the xhc port state machine automatically goes through the u3exit state into the u0 state setting the port link state change plc bit in the process when a device initiates resume the xhci port state machine goes into the resume state and sets the plc bit then the xhci driver writes u0 into the port link state register to transition the port to u0 from the resume state we cant be sure the device is actually in the u0 state until we receive the next port status change event with the plc bit set we really dont want khubd to be polling the roothub port status bits until the device is really in u0
6a8ddc71b77b9f88a41a336dea383582f8eddbd6	staging hv vmbus get rid of the timer based handling of channel events get rid of the timer based handling of channel events
18d4689643b08c61e15b11bc78830e1d6d28df63	usb gadget u_ether link socket buffers to the device for received packets socket buffers should be linked to the network device that allocated the buffers __netdev_alloc_skb performs this task
43d0be75af8d05654b88d1da494cf292714fbdec	fix io subchannel event race if the subchannel event function is called from irq context and we observe that the subchannel in question is gone we flag the attached device as not operational and schedule the event function to be called again from process context where the subchannel gets deregistered however if the subchannel reappeared at the time the event function gets called from process context we would do nothing and leave the device in not operational state recognize this case in sch_get_action and trigger reexamination of the
749a2b66f49de322ae472d57e1451e5f623d82f1	clear completion flags in isr at least in the cadence ip core on the xilinx zynq soc the flags are not auto-cleaned as these flags are evaluated they need to be cleaned
95486e4979e56e7da2fbb4fd32eb54d672b1e074	mips fix flood of warnings about comparsion being always true warning comparison of unsigned expression __number__ is always true the default value of arch_pfn_offset is __number__ thus triggering this warning for all platforms using the default value
4524df83c7fc4f44702099a2db7b3cc938eb111f	regulator max77686 initialize opmode explicitly to normal mode minor nit initialize the opmode for each regulator to normal mode in a readable explicit way
ae970eb45d8a1ea4506be23c3f776225b9575d0e	alsa fix error return code initialize rc before returning on failure as done elsewhere in the function a simplified version of the semantic match that finds this problem is as follows return ret __number__ when ret e1 when when ret e2 when forall return ret
b3824404ebbd489858f3a7097c715120118fa5cd	perf evlist fix use of uninitialized variable fixes valgrind complaint syscall param writebuf points to uninitialised bytes at __write_nocancel in by perf_evlist__start_workload by cmd_record by run_builtin by main address is on thread stack link
4816bd1c6d5589135523b4263be2e1b8b8c97599	mfd arizona clean up on failed runtime resume make sure that we dont leave the device enabled needlessly
523d5daf86e5e8b540bdc91e090197b5665f0519	usb musb ux500 fix module autoload for of platform driver this platform driver has a of device id table but the of module alias information is not created so module autoloading wont work
f87c4318af8bd5daec361e436c69f9d71a43b261	btrfs remove stale define after removing ordered operations last user removed in commit btrfs disable strict file flushes for renames and truncates
fc000154d7a63dee209aab1c13f2c19abdcf6b59	ia64 allow binding user memory to the agp gart dmesg reports __float__ ttm agp bind memory failed __float__ radeon __number__ object_init failed for __number__ __number__ __float__ radeon __number__ create wb bo failed __float__ radeon __number__ disabling gpu acceleration __float__ drm radeon cp finalized __float__ drm radeon cp finalized __float__ ttm finalizing pool allocator __float__ ttm zone used memory at exit __number__ kib __float__ ttm zone dma32 used memory at exit __number__ kib __float__ drm radeon ttm finalized __float__ drm forcing agp to pci mode this patch allows binding user memory to the agp gart on zx1-based systems dmesg thus no more complains about agp bind memory failure disabled gpu acceleration or agp mode forced to pci original work from francisco jerez in
62eb4b07f0803d0426eb695bfe6755dd6a2cafb2	acpi scan allow platform device creation without any io resources currently acpi platform device creation is aborted when there are no valid io resources for the device this approach will not work if the device has only gpio as its resource or some custom resources remove zero resource check and allow platform device creation even without any valid io resources rjw changelog
759af179c72005e61a4dd6dcf909320a134bfeee	arm pxa hx4700 use macros consistently this patch replaces the remaining inline struct resource definitions with equivalent macro calls the source file is reduced in size the object file is unchanged
f0eede10fd401a1c5193e020cd372d7b7014d9f3	sunrpc use jiffies_to_msecs for converting jiffies use jiffies_to_msecs for converting jiffies as it handles all of the corner cases reliably and also helps readability
57b7cb024422bbe85366ef28f5e192997bd16943	remove superfluous check of msi type arch_setup_msi_irqs hook can only be called from the generic msi code which ensures correct msi type parameter
1276f24eeef207e5572649d069ba1b531b2e2c3a	packet use common code for virtio_net_hdr and skb gso conversion replace open coded conversion between virtio_net_hdr to skb gso info with virtio_net_hdr_from_skb
555d5b70f1597906dc2e31085f5e70b49d03a536	ppp clarify parsing of user supplied data in ppp_set_compress split big conditional statement check ccp_max_option_length only once dont read ccp_option1 if not initialised reading uninitialised ccp_option1 was harmless because this could only happen when was __number__ or __number__ so even then we couldnt pass the ccp_option1 __number__ ccp_option1 test anyway
4130b5d7b733c94055c53056b43aa887dc163d99	powerpc remove abs_to_virt now all users have been fixed
0f08ffd6633fe8b8306229593027009e90f86c8c	kill rmw from ilk reset code all the other bits in the gdsr register are read-only so we dont have to preserve them when we perform a gpu reset
3d55ea3e2233c994649d9e5dc9eff58f915cd81d	usb remove err usage err was a very old usb-specific macro that i thought had gone away this patch removes it from being used in the driver and uses dev_err instead
323c9dd26b6176fd7f16bcf3202df708c419b20c	trivial dont touch with ioremap fixes this is a partial revert of treewide convert uses of struct resource to resource_sizeptr as the code is rewritten in the sound tree and thus the change is obsolete
34154e05bc135f16804584d81a8c810611a4abe9	lpfc initiator sends wrong bbcredit value for either flogi or flogi_acc
21c66101b41bbc4753a6fc8f9e429729180d41bb	arm s3c64xx delete unnecessary assignment for the field owner the field owner is set by the core thus delete an unneeded initialization
03ae834faac9831181ae471543d9f640b75c652b	mac80211 disable ht advertising unless ap supports it if the ap doesnt support ht or more importantly if it does but we have to disable it because its ies are broken dont advertise ht support in our association request otherwise we configure our channel to be a __number__ mhz non-ht channel but the ap might still think we support ht or even __number__ mhz
9b87bfb2e8e1bbd685489a84f4841250cab493ca	asoc rsnd use for_each_rsnd_mod_xxx on rsnd_rdai_continuance_probe now we have for_each_rsnd_mod lets use it
bcebd81d00a062af5a4cf900b08c8ca22a26d52f	rtc m41t80 avoid out of range year values avoid saving an out of range year value to the rtc reading that value from the rtc again returns a totally wrong time value for example timedatectl set-ntp no timedatectl set-time reboot rtc-m41t80 setting system clock to utc __number__
0e6c5a219a6ee69c014c598f3edd04126fecea57	move to sysfs move max_read_ahead_per_file_mb file from to
e5f7825cda366809153701e8bb89123bd973be00	add device tree support support for loading the renesas hspi driver via devicetree
b8e0251730775cc970d2453dedd454b8ae071dd9	sfc delete redundant page_addr variable from efx_init_rx_buffers_page
2253efc850c4cf690516bbc07854eeb1077202ba	blk-mq move more code into blk_mq_direct_issue_request move the hctx stopped test and the insert request calls into blk_mq_direct_issue_request rename that function into blk_mq_try_issue_directly to reflect its new semantics pass the hctx pointer to that function instead of looking it up a second time these changes avoid that code has to be duplicated in the next patch
63f409a444fa295247363a28381314683d6f4596	media add missing ok key to pctv ir keymap hi the following patch adds the ir code for the missing ok key to the pinnacle pctv hd map this map is now used by the pctv dvb-t2 device whose remote control has __number__ buttons
a7442b93cf32c1e1ddb721a26cd1f92302e2a222	fix races on fbdev the callback invokes intel_fbdev_restore_mode and has been witnessed to run before intel_fbdev_initial_config_async has finished we might likewise receive hotplug events before weve had a chance to fully set up the fbdev fix by waiting for the asynchronous thread to finish v2 an async_synchronize_full was also added to intel_fbdev_set_suspend in v1 which turned out to be entirely gratuitous it caused a deadlock on suspend discovered by ci thanks to damien lespiau and tomi sarvela for ci support and was unnecessary since a device is never suspended until its callback and all asynchronous tasks it scheduled have finished see dpm_prepare which calls wait_for_device_probe which calls async_synchronize_full bugzilla link
6aa800ca65b1788e8c2e4ffd1e57a4c4355fe0ed	spi imx use proper functions for driver messages add a struct device member to the private driver data and use it to print messages using functions rather than
c53026722b5e5aaaf434565ddbe4d918c7d2a80d	pstore replace calls to kmalloc and memcpy with kmemdup replaced calls to kmalloc and memcpy with a single call to kmemdup this patch was found using coccicheck
20d93338bf250f3f6adeb71cc234fca966ef51d7	media st-hva fix a copy-and-paste variable name error the second check for an error on appears to be a copy-and-paste error it should be instead
b6dfdc9b7f0d7859ea146b6c869aa2cfe6d713f3	enable ips for bpp __number__ art confirms that this should work fine since most panels are with dithering from the existing code wouldnt be enabled in most cases
0138b6fe8f7ea6aa83ed7ccfcabc89b490528ce8	btrfs simplify expression in btrfs_calc_trans_metadata_size simplify expression in btrfs_calc_trans_metadata_size
dc30a436903ccf180b0313d3fc3f44278a1d44c8	sound fix possible access out of array added a fix for hardware dependence bug where a sound card failure should not result in reading beyond array memory index
f7a960affc6e5a33e8c7fcef065affc4f0461041	kvm fix prefix handling for diag __number__ balloon the old handling of prefix pages was broken in the diag10 ballooner we now rely on gmap_discard to check for start end and do a slow path if the prefix swap pages are affected __number__ discard the pages from start to prefix __number__ discard the absolute __number__ pages __number__ discard the pages after prefix swap to end
7396fa818d6278694a44840f389ddc40a3269a9a	make background page replacement logic account for rss_stat counters background page replacement logic adds a new anonymous page instead of a file backed while inserting a breakpoint anonymous page while removing a breakpoint hence the uprobes logic should take care to update the counters accordingly this bug became apparent courtesy of commit c3f0327f8e9d mm add rss counters consistency check link
0014048e091da8bfdbe6f5a15d4045d3747d1335	staging comedi dt3000 change return type of dt3k_send_cmd to void none of the callers check the return value just make it a void flip the status check at the end of the function to check for an error before outputing the dev_dbg use __func__ for the function name in the message
bcac364a24c894c4cf8cf219b7863c192cd34079	target fix race between multiple invocations of target_qf_do_work when work is scheduled with schedule_work the work can end up running on multiple cpus at the same time this happens if the work is already running on one cpu and schedule_work is called on another cpu this leads to list corruption with target_qf_do_work which is roughly doing do stuff with multiple cpus running this code one cpu can end up deleting the list entry that the other cpu is about to work on fix this by splicing the list entries onto a local list and then operating on that in the work function this way each invocation of target_qf_do_work operates on its own local list and so multiple invocations dont corrupt each others list this also avoids dropping and reacquiring the lock for each list entry
822115ff4bd7141a6069dcc17b35dfd823a44dff	input atmel_mxt_ts do not read extra checksum byte atmel_mxt devices will send a checksum byte at the end of a message if the msb of the object address is set however since this driver does not set this bit the checksum byte isnt actually sent so dont even try to read it
3fd2f1b9d91284afb957ab9899a83279d0e09f29	inet remove bug_on in twsk_destructor kernel will crash the same if one of the pointer is null anyway
13b79a0d88e350ec874e45fdbd08cb6f37fa4a48	staging sm750fb use pcim_enable_device devm_ functions allocate memory that is released when a driver detaches replace pci_enable_device with the managed pcim_enable_device and remove corresponding pci_disable_device from probe and suspend functions of a pci_dev also an unnecessary label has been removed by replacing it with a direct return statement
7a29a391ec8e615fab4d37add5708a4cc76421a7	staging vc04_services fix debugfs write functions write functions need to return ssize_t not int so fix the functions up for the correct prototype
97eb001f03494758a938300908b88929163650ce	add opal call to resync timebase on wakeup during fast-sleep and deeper power savings state decrementer and timebase could be stopped making it out of sync with rest of the cores in the system add a firmware call to request platform to resync timebase using low level platform methods
456dedc9e70d2d99b928d215baa881c03369c613	phy berlin do not use sata name in usb phy driver copy and paste error from berlin sata phy driver
fddfb02ad0d0d3b479c2a26a8ae7e6411b34706b	cgroup move list add after list head initilization cgroup initialize in init_cgroup_housekeeping initializes in init_cgroup_housekeeping then in init_cgroup_root we should call init_cgroup_housekeeping before adding it to otherwise we are initializing an entry already in a list
a6016c523ef2f86d4ec60b87b480dd1a2c5ae33a	regulator axp20x fix wrong call to of_find_node_by_name the of_find_node_by_name function will search for a dt node named regulators after the provided np node but will not ensure that this node is a child of np this might result in retrieving a regulators node that is not related to the axp20x pmic
add69d2248ddb6465d00e2ee24554e9d3bfbaf84	staging lustre fix issues found by klocwork insight tool the functions sfw_test_buffers and sfw_unload_test from lnet selftest both assume sfw_test_instance_t being passed in is never null this is corrected here intel-bug-id reviewed-on
f4b734c35e98c343cd99824153de09e48867b97e	acpi hotplug drop unfinished global notification handling routines there are two global hotplug notification handling routines in acpi_bus_check_device and acpi_bus_check_scope that have never been finished and dont do anything useful so drop them
7f47d56c5b05006892a5e3e9d122b19c358e86ef	staging iio adc ad7816 fix symbolic permissions coding style issue octal permissions should be used instead of symbolic ones for easier reading
2f0aff4151e13fff669b1fab4b93b7613b3b4be5	i40e negate phy int mask bits the phy interrupt mask bits mask out the events we dont want so we need to negate the bitmask of events we want change-id i273244da5a8d285b6abc84fd68a90f1e6fa0393e
98e821a2a927b6dc0f7adc4b64ad29bec1b6ff89	net fix psock_fanout on sparc64 the packetsocket fanout test uses a packet ring use tpacket_v2 instead of tpacket_v1 to work around a known bit issue in the older ring that manifests on sparc64
29d679ffd850ea37a303bb930142be14982611e4	x86 printk add missing kern_cont to nmi selftest fix this behaviour nmi testsuite remote ipi ok local ipi ok revealed due to a new modification to printk link
f7986a9e7341e8f4c69cc36a60e1f778a01471ee	staging remove out label in tpci200_request_irq remove the out label from tpci200_request_irq as it can directly return the error code instead of jumping
3f991aa0b665c8e9bb702421a4e5005c3588fb62	usb chipdata replace the extcon api this patch uses the resource-managed extcon api for extcon_register_notifier and replaces the deprecated extcon api as following extcon_get_cable_state_ extcon_get_state
9446f248d2f1006f0e5eafe5f828f6ab985f1808	nfc st21nfcb fix warning invalid free of devm_ allocated data ndlc pointer got allocated with devm_kzalloc in ndlc_probe function this gives this error message warning invalid free of devm_ allocated data
1676a2b35cd5a548da17d1106fb0d4d238c0d191	park the signaler before sleeping if the signal to park arrives before we sleep then we need to check kthread_should_park before sleeping to avoid missing the signal otherwise if the signal arrives whilst we are processing completed requests we will reset the back to task_interruptible and so miss the wakeup link cherry picked from commit b1becb88268beb72df6495e35d3d76c138d215bb
fa4dce2022241f3c938372af0faf9d263061f6a9	usb gadget f_sourcesink quit if usb_ep_queue returns error since now we may have more than one request during the test and it is better we just quit once the error occurs instead of try queueing further requests
cfc0849c66099dc62ed6d879d8128977bd087aa7	mfd ab8500-debug print banks in hex this patch changes bank prints to use hex value
a0b8e76facbb1f12e4b43a2b7b88bd5d18a3faf5	dont add bogus empty resources to phbs when converting to use the new pci_add_resource_offset we didnt properly account for empty resources __number__ flags and add those bogons to the phbs the result is some annoying messages in the log
6c9b27ab08aaf46426515b8b858ad9c60731c7a1	dm log userspace use list_move replace list_del followed by list_add with list_move
eb17ea3b1ce6302e7416c4ba58754fd70ee3ab62	bluetooth use devm_kzalloc in file devm_kzalloc eliminates the need to free memory explicitly thereby saving some cleanup code
5a40c57af55b17dabe25854c9245171515bb5d23	asoc omap-mcpdm use to get resources get the needed resources in a correct way and avoid using defines for them
4e701d7b37789d1aeb0015210b373912e5d30733	memcg only check memcg_kmem_skip_account in __memcg_kmem_get_cache __memcg_kmem_get_cache can recurse if it calls kmalloc which it does if the cgroups kmem cache doesnt exist because kmalloc may call __memcg_kmem_get_cache internally again to avoid the recursion we use the flag however theres no need checking the flag in memcg_kmem_newpage_charge because theres no way how this function could result in recursion if called from memcg_kmem_get_cache so lets remove the redundant code
0811ef7e2f5470833a353426a6fbe0b845aea926	bus arm-ccn fix pmu interrupt flags currently the irq core is permitted to make the ccn pmu irq handler threaded and will allow userspace to change the cpu affinity of the interrupt behind our back both of these could violate our synchronisation requirements with the core perf code which relies upon strict cpu affinity and disabling of interrupts to guarantee mutual exclusion in some cases as with the cpu pmu drivers we should request the interrupt with irqf_nobalancing and irqf_no_thread to avoid these issues
169c82a294e3722eb1e82b7dac58b35fe2119b80	arm omap2 am33xx-hwmod fix register offset null check bug am33xx_cm_wait_module_ready checks if register offset is null int am33xx_cm_wait_module_readyu16 inst s16 cdoffs u16 clkctrl_offs int i __number__ if return __number__ in case of am33xx clkctrl register offset for different clock domains are not uniformly placed an example of this would be the rtc clock domain with clkctrl offset at in such cases the module ready check is skipped which leads to a data abort during boot-up when rtc registers is accessed remove this check here to avoid checking module readiness for modules with clkctrl register offset at koen kooi notes that this patch fixes a crash on boot with with
1b461d7631f17804257ab1734bd95c05ab655f8b	m68knommu fix __number__ local setting of timer interrupt handler compiling for __number__ based targets fails with in function error implicit declaration of function at top level error conflicting types for note previous declaration of was here changes made to hw_timer_init didnt get updated in the __number__ timer code so process and call the handler arg that is now passed into that hw_timer_init function
4e71c9545b9afaa47f178b7ffda0bc630c8ad2c7	pm sleep remove unused symbol suspend_cpu_hotplug remove the suspend_cpu_hotplug declaration which doesnt correspond to an existing variable rjw added the changelog
74eb8cc5a5f8ec85b8f6b8daebbce05a27e77e2a	fold do_path_lookup into both callers
2a37daa634416a617bb8e9032626ab491004e7da	drivers net xgene get channel number from device binding this patch gets ethernet to cpu channel prefetch buffer number from the newly added channel property thus decoupling linux driver from resource management
5298b8365832e13158e41e205a31a9505eef4c94	extcon axp288 set extcon_usb when extcon_chg_usb_sdp was set according to the documentation we should set the extcon_usb when one sdp charger connector was reported
00776511da7134b25dd3ea45e2bf38ea08738a64	enable runtime pm enable runtime pm for skylake platform v2 after adding dmc ver __float__ support rebased on top of nightly animesh issue viz-2819
03e39104d9fd72238264576462138ed4b011b24b	move the intel_fbc_can_choose call out of the loop we can just call it earlier so do it the goal of the loop is to get the planes crtc state and we dont need it in order to call intel_fbc_can_choose
069a4b5690a952e74157fd489833c71c73f012b3	rbd kill the rbd_device structure has an embedded rbd_options structure such a structure is needed to work with the generic ceph argument parsing code but theres no need to keep it around once argument parsing is done use a local variable to hold the rbd options used in parsing in rbd_get_client and just transfer its content its just a read_only flag into the field in the rbd_mapping sub-structure that requires that information
4f0614a020524547d46e85ae5327f531e33cdf47	mtd nand diskonchip request memory region prior ioremap this patch adds request_mem_region prior ioremap for diskonchip driver this will allow to check if memory region is occupied by any other device for example in case if we have memory region for several optional devices and only one device can be used at once
b7302ca05871e50208bc328cbc8199a21f5d876e	pegasus fixes urb buffer allocation size usb_fill_bulk_urb receives buffer length parameter __number__ bytes larger than whats allocated by alloc_skb this seems to be a problem with older pegasus devices which may silently return more data than the maximal packet length
c2dcef835e40f5a63b14f6eeada8b08b37da263f	media em28xx use v4l2_disable_ioctl to disable ioctls vidioc_g_audio and vidioc_s_audio instead of checking the device type and returning inside the ioctl functions use v4l2_disable_ioctl to disable the ioctls vidioc_g_audio and vidioc_s_audio if the device doesnt support audio
817a8aa8cfa1ebfb7bf27afb53ebb1ec3d49b564	bnx2x force on __number__ phy should be autoneg with only advertised from yaniv rosner broadcom.com
c32fa99f0b4252633aa464e28d1cb925bd2a79df	bitops fix signedness of compile-time hweight implementations enabling compiler warnings on code that includes can generate the following warning in file included from from in function hweight_long error signed and unsigned type in conditional expression converted to an error with this is due to the use of the logical negation operator in the __const_hweight8 macro in the use of that operator here results in a signed value fix by explicitly casting the __const_hweight8 macro expansion to unsigned int while here clean up several warnings link
e53a59dc55a53c2317271464c29c8989b76be20e	media s5p-tv hdmiphy remove deprecated video-level dv timings operation the video enum_dv_timings operation is deprecated and unused remove it
bc909f27f55ceb8f950ced5cf3a26d6b26e86ca6	da9052-battery fix da9052_determine_vc_tbl_indexs return value the patch fixes the following warnings check warning symbol da9052_determine_vc_tbl_index was not declared should it be cc in function da9052_determine_vc_tbl_index warning control reaches end of non-void function
8efaf5ed4d442068a1b76f218c0a90e6a5989f11	clk imx increase axi clock rate to for on axi clock rates design target is but by default it is only set to which is not good enough for performance this patch increases axi clock rate from to to meet the design target this is done by switching its parent clock periph from pfd to pll
afd12939a09ca8f96cf8349c913dc143471c9b3c	e1000e cleanup rx checksum offload code __number__ cleanup whitespace in e1000_rx_checksum function header comment __number__ do not check hardware checksum when rx checksum is disabled __number__ reduce duplicated calls to le16_to_cpu by just using it within e1000_rx_checksum instead of in each call to the function v2 use swab16 instead of le16_to_cpu htons and corrected type for the passed-in csum
1e4b4348753ba555ea93470ea8af821425d9c826	usb ehci-platform increase ehci_max_rsts to __number__ socionext ld11 soc needs to handle __number__ reset lines for ehci
478feaf6cc420e66c071c0a743b334abfe8f18c9	add shadow flag v2 indicate if need to sync between bo and shadow where sync to where v2 rename to backup_shadow
738662c35c491fc360bb6adcb8a0db88d87b5d88	increase xen_e820_map to e820_x_max possible entries on systems with sufficiently large tables and several ioapics it is possible for the xenmem_machine_memory_map callback and its counterpart xenmem_memory_map to attempt to return an table with more than __number__ entries this callback adds entries to the bios-provided table to account for ioapic registers which on sufficiently large systems can result in an table that is too large to copy back into xen_e820_map this change simply increases the size of xen_e820_map to e820_x_max to ensure that there is enough room to store the entire map returned from this callback
b86280aa48b67c8119ed8f6c6bebd8c0af13a269	fix when theres no symbol at the address __sprint_symbol should restore original address when kallsyms_lookup failed to find a symbol its reported when dumpstack shows an address in a dynamically allocated trampoline for ftrace __float__ __address__ __float__ __address__ __float__ __address__ kpatch __float__ __address__ __address__ you can see a difference in the hex address c4 and c3 fix it
f64255b5072d9c46cef8655d51cf7e10285abed7	revert of fix premature bootconsole disable with stdout-path this reverts commit the assumption that at least __number__ preferred console will be registered when the stdout-path property is set is invalid which can result in _no_ consoles
21b3de881b38a84002c07b1b4bfb91892644e83f	alsa als3000 check for the kzalloc return value
05b92610eef4646c252171d059a84c705b66ede5	staging brcm80211 replace simple_strtoul usage in brcmfmac the usage of simple_strtoul is not preferred instead kstrtoul should be used this patch fixes this for the brcmfmac driver
f56531d019f3f13d56c48619d9deeee34efccefb	asoc codec duplicated callback function goes to component on wm8782 codec driver and component driver has duplicated callback functions and codec side functions are just copied to component side when register timing this was quick-hack but no longer needed this patch moves these functions from codec driver to component driver
1da661759f5f34f218d4d65c8872d271146d561b	staging comedi prefer using the bit macro as suggested by use the bit macro to define the register bits
042f05ebd5df26be499c970dba4d7a74cad87283	staging rtl8192e rename r8192_wx_force_reset use naming schema found in other rtlwifi devices rename r8192_wx_force_reset to _rtl92e_wx_force_reset
ced7a04e394fe1df41d13b833baab5cfcb1d03b3	pkt_sched fq increase max delay from __number__ ms to one second has a clamp of delay of __number__ ms to avoid some possible harm it turns out this delay is too small to allow pacing low rates some isp setup very aggressive policers as low as now tcp stack has spurious rtx prevention it seems safe to increase this fixed parameter without adding a qdisc attribute
30c0702246ac1ba955aa97d698610169242f59f1	alsa seq fix passing wrong pointer in function call of compatibility layer this commit is a fix for linux in former commit a function call of compatibility layer for alsa sequencer core was obsoleted by an alternative although the alternative gets a pointer to kernel stack due to mis-programming as a result alsa sequencer core unexpectedly refers over kernel stack
1b21401307a6a705688faf1bc9e6e02663708ec1	clk spear fix adc clock definition on spear600 there is no spear600 device named adc instead the description of the adc was recently added to the device tree and the device name is so we should associate the adc gatable clock to this device name
c17dda40a6a4ed95f035db38b7ba4fab0d99da44	slub separate out kmem_cache_cpu processing from deactivate_slab processing on fields of kmem_cache_cpu is cleaner if code working on fields of this struct is taken out of deactivate_slab
6faecba0b3da7b617bf72bef422bf0d3bb6dfe7d	driver adm1275 set the and r coefficients correctly for power seems like coefficient values for m b and r under power have been put in the wrong order rearranging them properly to get correct values of coefficients for power for specs please refer to table __number__ page __number__ on
8bef7178a630dc41ca5868e6bb54ffee91e1c83a	mmc sdhci-st add macros for register offsets and bitfields for mmcss glue regs the stih407 family socs have additional glue registers in the flashss which are used to configure the arasan controller this patch adds macros for the register offsets and bitfields which will be used by subsequent patches to support stih407 family socs
48a0d1e07d99ecfd1e5922dd22986d5813f17207	arm shmobile kzm9g-reference enable cmt1 in device tree
681432d9ca55c7761fb4bf0ef72c28ca81624070	wadisablerhwooptimizationforrenderhang isnt applicable to hsw cant find wadisablerhwooptimizationforrenderhang listed for hsw
d0d3913895e5b50623bd4dafd876e41c1169031d	perf script fix a null pointer dereference if perf script was called with a which contains no tracepoint event itd segfault due to null pevent pointer fix it link
1917e7f916352d82f0a88f769b7c6ac7bc76f5af	staging sbe-2t3e3 fix coding style issues in this patch fixes a pointer_location errorchanged bar to foo and an assign_in_if errormoved assignment out of if condition
de5ba8eb9cefff78ac4951bd68633d2b7a0fc5c1	add __number__ level support in insert_entries and clear_range when is enabled gen8_ppgtt_insert_entries needs to read the page map level __number__ pml4 before it selects which page directory pointer pdp it will write to similarly gen8_ppgtt_clear_range needs to get the correct range this patch was inspired by bens depend exclusively on map and unmap_vma v2 rebase after v3 remove unnecessary pdpe loop in gen8_ppgtt_clear_range_4lvl and use clamp_pdp in gen8_ppgtt_insert_entries akash v4 merge gen8_ppgtt_clear_range_4lvl into gen8_ppgtt_clear_range to maintain symmetry with gen8_ppgtt_insert_entries akash v5 do not mix pages and bytes in insert_entries akash v6 prevent overflow in sg_nents page_shift when inserting at once v7 rebase after mikas ppgtt cleanup scratch merge patch series use gen8_px_index functions and remove unnecessary number of pages parameter in insert_pte_entries v8 change gen8_ppgtt_clear_pte_range to stop at pdp boundary instead of adding and extra clamp function remove unnecessary variables akash v9 instead of to get the length akash v10 remove pdp warning check ingen8_ppgtt_insert_pte_entries until this commit akash
acc89612a70e370a5640fd77a83f15b7b94d85e4	timekeeping make the conversion call chain consistently unsigned propagating a unsigned value through signed variables and functions makes absolutely no sense and is just prone to reintroduce subtle signed vs unsigned issues as happened recently clean it up link
5af86c2691b9e0fc1f993cdcd4aa27eb684c1c17	media s5p-fimc make sure an interrupt is properly requested use dev_name for requesting an interrupt so we dont get an interrupt requested with same name for multiple device instances
f2ddc1dab61018becf4c5e275bb559d96eec8035	mmc omap_hsmmc use devm_regulator api use devm_regulator api while at it use devm_regulator_get_optional for optional vmmc_aux supply
1f54b0c055b9322f4e7acb49c492edc5accd15ae	virtio-blk drop config_mutex config_mutex served two purposes prevent multiple concurrent config change handlers and synchronize access to config_enable flag since commit dbf2576e37da0fcc7aacbfbb9fd5d3de7888a3c1 workqueue make all workqueues non-reentrant all workqueues are non-reentrant and config_enable is now gone get rid of the unnecessary lock
e561a705a61e8d4c32a1259c611703a3976347aa	e1000e potentially incorrect return for e1000_init_hw_ich8lan in the unlikely event that e1000_setup_link_ich8lan returns an error the returned error code value is not propagated to the caller of e1000_init_hw_ich8lan
565678ab1ba760ffd31bcd4e7ee9ea6511296ed4	staging gdm72xx add space around add space around operator problem found using check spaces preferred around that
713d5512740e90bfc6db4b1e05b171391a95ec1a	staging comedi adl_pci9118 tidy up comedi_lrange tables tidy up the whitespace in the comedi_lrange tables
8b45c79649d4abeb9191dc40017afbde33ae69ce	sparc32 fix sparse warnings in fix following warnings warning symbol pmc_leon_fixup_ids was not declared should it be warning symbol pmc_leon_need_fixup was not declared should it be warning symbol pmc_leon_idle_fixup was not declared should it be warning symbol pmc_leon_idle was not declared should it be add static to definitions
e2a641922a3592b5ea226624d5abeb13eb49622c	xfs corruption needs to respect endianess too at least if we want to be able to recognize the pattern add a missing byte swap to the corruption injection case in xlog_sync
dd5abb742071a962be4403f171063ed1e9d4202d	asoc topology avoid uninitialized kcontrol_type when num_kcontrols is zero gets set to an uninitialized local variable in function soc_tplg_dapm_widget_create error kcontrol_type may be used uninitialized in this function i could not figure out which of the valid types would be appropriate here so this sets it to __number__ which is invalid but at least well-defined here there is probably a better way to address the issue
e4678afeffa3c3c8020050448af2c226f6c49c56	serial samsung remove unused irq parameter this parameter is not used anywhere so we can get rid of it
bf2fda157a9ab50f65da60a365ede3a5b529d025	simplefb add goto error path to probe use the usual kernel style of goto error_foo to free resources on probe error this is a preparation patch for adding clocks support while at it also update ioremap_wc error return from enodev to enomem
91ff81cf48f0c8f9cd608acbd83f0e98a228807b	thermal exynos fix potential null pointer dereference null pointer was being dereferenced in its own error message changed it to the correct device pointer
24597bf8012cf3fa5703c38e1bb13df3118d7588	i2c-eg20t add initialize processing in case i2c-error occurs in case disconnecting physical connection need to initialize i2c device for retry access this patch adds initialize process in case bus-idle fails and lost arbitration
7f8bea7f75618165d015f083c77f1db3e4584f88	mmc davinci_mmc set module_alias to allow autoloading davinci mmc platform devices as in use davinci_mmc as their name to allow autoloading of the relevant driver the module needs to set the module_alias
eb9001cd8ffff9c9b1ed1ea85d36c862bea964c0	hid picolcd use proper device as input_dev parent
f6c699680cfaf50482577c3475d468a6902415e5	media vez1820 convert set_fontend to use dvbv5 parameters instead of using dvb_frontend_parameters struct that were designed for a subset of the supported standards use the dvbv5 cache information also fill the supported delivery systems at dvb_frontend_ops struct
3d2e423e0f0f0a3de504a6acae858c651599ba25	add defines for downstream port types detailed cap info at address is not available with dpcd ver __float__ whether such devices exist in the wild i dont know but there should be no harm done in having the defines for downstream port __number__ in address
462125b4ad255eafcd114e17bdc924d755da1567	staging flexfb remove initialization to __number__ the initial post had a typo in the short summary reposting this fixes some of the code style issues in the flexfb driver by removing unnecessary initializations of static variables to __number__ or to null
aa4ce5f7f3ced49f6b0986b08d529c7ed336b508	media em28xx remove the i2c_set_adapdata call in em28xx_i2c_register it is no longer needed since nobody is calling i2c_get_adapdata anymore
a4dff1bc492ee4a2184d384ae8b5bcab5859e150	sunrpc skip dead but not buried clients on pipefs events these clients cant be safely dereferenced if their counter in __number__
a118e61edc3e54bd727a6f6d7193e40270cd3711	media smiapp unify setting up sub-devices the initialisation of the source sub-device is somewhat different as its not created by the smiapp driver itself remove redundancy in initialising the two kind of sub-devices
24ccfc5541b11f1e6ffcf10f5ce94370440d6c75	omapdss hdmi omap4 remap speaker order to match alsa order as of today the only know user of the dss hdmi audio support is asoc hence it makes sense to remap the speaker order to match the alsa speaker order in the future a dynamic mapping mechanism may be implemented remapping is needed as the hdmi speaker order is while the alsa order is refer to cea-861 section for further details
ee40d32fc2a8749a89c1a372a46d619158c2d367	media pctv452e fix sparse warnings warning using plain integer as null pointer warning using plain integer as null pointer warning using plain integer as null pointer warning using plain integer as null pointer
684309e5043efaaa94d9b4e65f53f7fdde1f6675	pwm lpss avoid potential overflow of base_unit the resolution of base_unit is derived from base_unit_bits and thus must be equal to __number__ otherwise frequency and therefore base_unit might potentially overflow prevent the above by substracting __number__ in all cases where base_unit_bits or derivative is used
9d23f9e946ad757344792a20ba5152f3a921688b	firewire core fix multichannel ir with buffers larger than __number__ gb with a i computing might result in an overflow and in an eventual sign-extension
587f83e8dd50d22bc0c62e32ec49fd319b0912fe	use rtas_get_sensor in ras code we have rtas_get_sensor so we may as well use it
f9902f24fc2d6bcc836622aa70e77f7f9dfb30a9	i7core_edac use edacs own way to print errors
0339d3dbbfd51348dda584796e59a740a57a7e32	staging ozwpan reduced size of oz_evtlist structure this structure is used in an ioctl definition and was causing the powerpc build to fail the size of the array in the structure has been reduced to fix this
4e5a4d8a8e970bd6b96c1c710cd636770b776697	media vb2 fix regression commit vb2 improve file emulation to handle buffers in any order broke support if the size of the buffer being is less than the size of the image when the commit was tested originally i used qv4l2 which calls read with exactly the size of the image but if you try cat then it will fail and typically hang after reading two buffers this patch fixes the behavior by adding a new cur_index field that contains the index of the field currently being or it is num_buffers in which case a new buffer needs to be dequeued the old index field has been renamed to initial_index in order to be a bit more descriptive this has been tested with both read and write
9b239b22df3ced4629af97e7edda558f1e7531b6	media v4l2-ioctl allow all controls if ctrl_class __number__ the check_ext_ctrls function in checks if all controls in the control array are from the same control class as however that check should only be done if __number__ a __number__ value means that this restriction does not apply so return __number__ ok if __number__ found by running v4l2-compliance on the uvc driver
ec5e34c074793a1f80faaf75e9468dd2f39ec1dc	remove length restrictions remove limitations on the size of a read write request afaik theres no consequence to allowing the upper layers to specify different read write sizes this is needed to support running ext4 on goldfish bug
6e814800a232afdee3f8abf5b9d49829015c67a7	move variables to narrower scope in irq handlers
4eaa3a6cc4c577103d678492ec50979b3aa360a4	media drivers media platform vivid fix possible null derefrence check for dev_fmt being null before derefrencing it to assign it to planes found using coccinelle
dabf24d168ae7da5c3dc8c383db64b200e9ab483	bna fill the magic in bnad_get_eeprom instead of validating a driver should fill magic field of ethtool_eeprom struct in and validate it in the bna incorrectly validates it in both and this makes its interface unusable
52c31bd5294d838315ea0211a991cfcd60b625ff	xhci put warning message on a single line this allows someone to grep for the complete warning message as in xhci-hcd usb core suspending device not in
fe26980e03f435164777184a91c1e5f3b4ed22a5	iio adc ti_am335x_adc avoid double free of buffer the driver is missing the iio_buffer_attach call as such it will attempt to free the buffer twice on removal introduced in commit iio add reference counting for buffers
99e65ae09a1c853fe36a89d9333fdcbff07de327	pm devfreq exynos-ppmu fix error path in exynos_ppmu_probe iounmap needs to be called in case of memory allocation for devfreq-event devices failure fix it
ae52e527c9c0b05bff9cfcea11f1e1b4ce94325a	staging rtl8712 rewrite the right hand side of an assignment this patch rewrites the right hand side of an assignment for expressions of the form a a b to be a b where this issue was detected and resolved using the following coccinelle script identifier i expression e i e e identifier i expression e i e e
c50037496113e2eb04cfeec86a5c2490786c3dd5	staging r8712u reduce maximum receive buffer size to a more sensible value the current value for the maximum receive buffer size is __number__ which is too large for long-running systems memory fragmentation may make it difficult to obtain the buffers of o2 needed for aggregation buffers of o3 are even worse particularly when not needed the new size is set to __number__ which will allow aggregation
aee175f55a5968ce250a9afde26af106ac6caa9c	staging use null instead of __number__ use null instead of __number__ for pointers
b51d5275016c6edbf4656eaee30d836fef127016	clk renesas r8a7796 add watchdog module clock add the module clock for the watchdog timer wdt controller on the renesas r-car m3-w r8a7796 soc
ff1176f6164f3d151ee64c05d3f7b6662a81b982	ethernet aquantia fix dma_mapping_error test dma_mapping_error returns __number__ if there is an error and __number__ if not
194f74ebc68f0655d40e9cb4e8a70ef8e8d4d261	usb dwc2 gadget fix below build warning in function s3c_hsotg_irq_enumdone warning ep_mps may be used uninitialized in this function
f074051ff550f9f1f1a8ab4868277d049a7fd7aa	xfs squash prealloc while over quota free space as well from brian foster redhat.com commit introduced heavy prealloc squashing to catch the case of requesting too large a prealloc on smaller filesystems leading to repeated flush and retry cycles that occur on enospc now that we issue eofblocks scans on squash the prealloc against the minimum available free space across all applicable quotas as well to avoid a similar problem of repeated eofblocks scans
393c525b5bea6989380c4b57508ec901488079f0	virtio_blk make serial attribute static its never declared so no need to make it extern
8aaa81a166d80ac9bf2813984e5b4c2503d0fe08	always enable the scaler on ironlake as i do not see the output update without the scaler enabled on my i3-330m always enable it
e953583456005823d7c20fefe5212f0f60a93fb6	regulator dont disable unused regulators we dont have permission for in the spirit of conservatism that governs our general approach to permissions it is better if we dont touch regulators we werent explicitly given permissions to control this avoids the need to explicitly specify unknown regulators in dt as always on if a regulator is not otherwise involved in software control it can be omitted from the dt regulators explicitly given constraints in dt still need to have an always on constraint specified as before
1746babbb15594ba2d8d8196589bbbc2b5ff51c9	have task_move_group_fair also detach entity load from the old runqueue since we attach the entity load to the new runqueue we should also detatch the entity load from the old runqueue otherwise load can accumulate rewrote the changelog link
cce5fbadb65568015706d3ae169b419cc1c7a25f	pcnet32 factor out pcnet32_clr_suspend move the code to clear suspend flag to a separate function to simplify code
e234b5f2079414b3d772286e3ee00e7bbf6da833	ubifs fix non-debug configuration build fix a brown paperbag bug introduced by me in the previous commit i was in hurry and forgot about the non-debug case completely artem amend the commit message and tweak the patch to preserve alignment this made the patch a bit less readable though
bc034ef5573ef4d81daa666c02a3df1ad28e24a7	crypto drbg remove unnecessary sanity checks the drbg_make_shadow function contains sanity checks which are not needed as the function is invoked at times where it is ensured that the checked-for variables are available
83a2af88f80ebf8104c9e083b786668b00f5b9ce	dont use the hdmi port color range bit on valleyview vlv docs still list the the color range selection bit for the hdmi ports but for dp ports it has been repurposed i have no idea whether the hdmi color range selection bit still works on vlv but since we now have to use the pipeconf color range bit for dp we might as well do the same for hdmi
1fa68bed560cdc443f931546c6a297385e1c5e64	davinci_emac support the get_ts_info ethtool method
4553f733c68b66ef49f838aa24470d58caf76ff5	gem take into account iommu aperture the iommu may not always be able to address __number__ gib of memory on tegra20 the gart supports __number__ mib starting at __number__ also the aperture on tegra30 and later is in fact the full __number__ gib rather than just __number__ gib as currently assumed
e230dd8bb201bf8e51a8ebca51a21118dfd0c386	staging lustre libcfs remove whitespace in one last white space is still left in lets remove it
d64d45cb95e6f9edf58fab49cfc5a7a60ff1a122	i2c sirf tune the divider to make i2c bus freq more accurate in prima2 and atlas7 due to some hardware design issue we need to adjust the divider ratio a little according to i2c bus frequency ranges since i2c is open drain interface that allows the slave to stall the transaction by holding the scl line at __number__ the rtl implementation is waiting for scl feedback from the pin after setting it to high-z __number__ this wait adds to the high-time interval counter few cycles of the input synchronization depending on the scl_filter_reg field and also the time it takes for the board pull-up resistor to rise the scl line for slow scl settings these additions are negligible but they start to affect the speed when clock is set to faster frequencies this patch is based on the actual tests and it makes scl more accurate
3969cc094a9dbb40e624b259caa73c7a2056b249	perf top use set_term_quiet instead of open coded equivalent link yanked this out of a patch containing this and some other change
a5df0e199cf6b31400fa86f6c3f73fa6e127e9ed	drbd default to detach on-io-error old default behaviour was pass-on which is not useful in production at all
4466fc45007c346971ae537cc64e82a8a4961160	staging comedi cb_pcidas remove unused io region size defines the defines for the size of the io regions are not used in the driver also this information can be found using the pci helper pci_resource_len remove the defines
8ed995ff6bb9c5436db64b3653a0c62a0cd18f08	i40evf use capabilities flags properly use the capabilities passed to us by the pf driver to control vf driver behavior in the process clean up the vlan code so its not a horrible morass of ifdefs change-id i1050eaf12b658a26fea6813047c9964163c70a73
d3da1cbaef8d92b1bb4103feee03b888f5bead24	staging speakup coding style rewrite comparisons to null rewrite comparisons to null so they dont show any checkpatch errors anymore null
e379de1297a1edc05250c408af7f474b2a1cbacc	rt2800 initialize bbp_r65 bbp_r66 on all subroutines except __number__
ccbf3bfaee0e4f1ddf8103884fd4bf9f35f31f08	tcp shortcut listeners in tcp_get_info being lockless in tcp_get_info is hard because we need to add specific synchronization in tcp fast path like seqcount following patch will change inet_diag_dump_icsk to no longer hold any lock for non listeners so that we can properly acquire socket lock in get_tcp_info and let it return more consistent counters
c18eee31812d42ecd0aa5c39d21d41c15b30eaab	asoc add bitfield definitions for wm8958 micbias registers
b9c11a2333db7215876eca4ff5a39ee4f94909f2	w1 silence an uninitialized variable warning if kstrtoint returns then tmp is uninitialized
00b41b58cdb115ffc28de1adad63a59a61428db8	mmc core remove mmc_free_ext_csd let callers of mmc_free_ext_csd do kfree directly instead
4978cc93d9ac240b435ce60431aef24239b4c270	preserve shared dpll information in new pipe_config when a new pipe_config is calculated the fields related to shared dplls are reset under the assumption that they will be recalculated as part of the modeset which is true with the current state of the code as we convert to atomic however it will be possible to calculate a new pipe_config and skip the modeset in that case after the state swap we still want the shared dplls to be preserved
4ac52a0fd066cd33b12d79b09e30fd8bdb52f8d8	nfc st-nci i2c drop two useless checks in acpi probe path when st_nci_i2c_acpi_request_resources gets called we already know that the entries in have matched acpi id of the device in addition i2c client pointer cannot be null in any case otherwise i2c core would not call for the driver in the first place drop the two useless checks from the driver
e2f716561b7eb6fd5c5962ee0bdbfc7ce2b21243	clk tegra disable spread spectrum on pll_d2 enabling spread spectrum on pll_d2 can lead to issues with display modes hdmi monitors for example would report signal error and some modes driven over displayport would generate fuzzy horizontal bands
f3bff6318fa0f54956b02ed451d9b120441006ea	kvm force vmexit with virtual interrupt delivery need the eoi to track interrupt deliver status so force vmexit on eoi for rtc interrupt when enabling virtual interrupt delivery
e09d9c3e9f85b8190ca1e495890f4cf5ee30baf6	watchdog add missing del_timer call we do a setup_timer at init stage of the module but we didnt de-activate the time using del_timer
aaf9522d62d18626a60f7f2080671d853d9e8681	netiucv hold rtnl between name allocation and device registration fixes a race condition between concurrent initializations of netiucv devices that try to use the same name sysfs cannot create duplicate filename call trace __number__ __number__ __number__ __number__ __number__ __number__ __number__ netiucv
f58001fa95703ac275efe7d53fb7ca8613618b09	brcmfmac allow device tree node without interrupts property as described in the device tree bindings for nodes the interrupts property is optional so adding a check for the presence of this property before attempting to parse and map the interrupt if not present or parsing fails return and fallback to in-band sdio interrupt
20db88e32d139e7646c61b23b027a7471f343fae	samsung-laptop fix seclinux rfkill and us it as fallback
1d2bdbc3a8f93b8c1dfc95b2df89c266dd6ce9d0	arm shmobile let koelsch multiplatform boot with koelsch dtb let the multiplatform koelsch support boot with the legacy dts for koelsch as well as the koelsch reference dts
22b958d8cc5127d22d2ad2141277d312d93fad6c	sched refine the code in unthrottle_cfs_rq directly use rq to save some code link
9d1cb9147dbe45f6e94dc796518ecf67cb64b359	avoid unclaimed registers when capturing the error state even though we only check for unclaimed registers while were writing registers if we read a bad register well still trigger a cpu error interrupt and well print an unclaimed register drm_error due to that to avoid this error just avoid touching power domains that are not enabled use kzalloc so were sure all the disabled domains will be zeroed on the error state file we already print the information that is enough to discover if the power well is enabled on the error state file so this should not be a problem bugzilla
b17b4ab8ce3894744b487e6c880ecea807ed5f86	mmc sdhci-iproc define mmc caps in platform data this patch moves the definition of the mmc capabilities from the probe function into iproc platform data after that we are able to add support for another platform more easily
9da01759636f519967c0922ae12bd9fff739db9a	pwm convert class code to use dev_groups the dev_attrs field of struct class is going away soon dev_groups should be used instead this converts the pwm class code to use the correct field
8827a642a4635d5e696037f9213cb1d015d4cec3	mfd cros_ec_spi repair comparison ordering issue warning comparisons should place the constant on the right side of the test bug_onec_msg_preamble_count warning comparisons should place the constant on the right side of the test bug_onec_msg_preamble_count total __number__ errors __number__ warnings __number__ lines checked
afc10301f70350b490ca518ceb793928854b5453	video imxfb fix imxfb_info configuration order the devtype field for fbi struct imxfb_info must be set after memset call to avoid some wrong behaviour pixel size
e1bcbee6f95301197e1039b4e4104cbdc4a332a6	revert export of_default_bus_match_table this reverts commit b80443c2211c7daaabd20fbbe9e7beb3fa3408e0 after covering to use helper of_platform_default_populate to populate the default bus no need to export of_default_bus_match_table anymore
ce6b658dc040cf4aa3a30f56115e81d15d91596e	gpio davinci preparation for switch to common clock framework as a first step towards migrating davinci platforms to use common clock framework replace all instances of clk_enable with clk_prepare_enable and clk_disable with clk_disable_unprepare until the platform is switched to use the config_have_clk_prepare kconfig variable this just adds a might_sleep call and would work without any issues this will make it easy later to switch to common clk based implementation of clk driver from davinci specific driver
50ac64cfc39dad2ba0d8ad553d2d87dfc738cbba	net ethernet stmmac dwmac-socfpga fix use-after-free on probe errors make sure to call stmmac_dvr_remove before returning on late probe errors so that memory is freed clocks are disabled and the netdev is deregistered before its resources go away reset controller
5f3b90dcc0f0dec654112d28c5a07ef47ad61d0f	arm s3c24xx use common macro to define resources on
bdc98b13716eafc454457e068d6c8aaffaaa71e4	iwlwifi mvm check if vif is null before using it wdev_to_ieee80211_vif might return null check that vif null before dereferencing it
251f426fddd9217ce6e4478653d3ee33df518030	perf evsel actually show symbol offset in stack trace when requested symbol offset is one of the fields that can be requested in perf-script currently you do not get that data when requested perf script gcc __number__ __float__ __address__ update_curr __address__ dequeue_entity __address__ dequeue_task_fair __address__ dequeue_task __address__ deactivate_task with this patch you get the offset gcc __number__ __float__ __address__ __address__ __address__ __address__ __address__ link
c0e0fcdaa9b307047e8f15a1e92bda0ba63f1b53	mfd max77686 make error checking consistent error checking across the driver is mostly consistent besides a few exceptions so change these exceptions for consistency
b2e3a479a6ae937b32aa0a8fffc541e4e7778734	iphc remove check on null this memory is placed on stack and cant be null so remove the check on null
0280f4d99a1e9ff2883a3df20ad2c995110ed011	usb gadget pxa27x_udc dont touch udc-core now handles that for us which means we can remove it from our driver
e696a1dd7e80ee64fd930982d9e1c6b152635534	rtc rv3029 add of device id table the driver doesnt have a struct of_device_id table but supported devices are registered via device trees this is working on the assumption that a i2c device registered via of will always match a legacy i2c device id and that the modalias reported will always be of the form but this could change in the future so the correct approach is to have an of device id table if the devices are registered via of
8538c4075e8fab89e23d35cf27cd5e7e33f7e71e	regulator lp872x remove from struct lp872x current code is using devm_regulator_register so we dont need to store in struct lp872x for clean up also clean up lp872x_probe a bit to remove unnecessary goto and num_regulators variable
397304b52d9b726a4aed0bf9086612bba429d420	netfilter ctnetlink remove null test before kfree fix checkpatch warning warning kfreenull is safe this check is probably not required
6d021b724481fbb908eb29384898deb9f00dfe70	arm dump pgd pmd and pte states on unhandled data abort faults it can be useful to dump the page table entries when an unhandled data abort fault occurs this can aid debugging of these situations for example a strex instruction causing an external abort on non-linefetch fault as has been reported recently
fe4561680519019cc15d660862dce513ded2f3a7	drm increase drm_object_max_property to __number__ before kernel __float__ no one was checking for the return value of drm_connector_attach_property so we never noticed that we were unable to create some properties commit drm warn when drm_connector_attach_property fails added a warn when we fail to create a property and the transition from connector properties to object properties changed the warning message a little bit on i915 machines with many tv connectors we hit the maximum number of properties since each tv connector uses a lot of properties so we get a few backtraces in our logs this commit increases the maximum number of properties to __number__ hoping well have enough room for everybody chris suggested that we convert this code to lists but i believe this conversion can come after we make sure peoples dmesgs are not spammed by our driver
7a1e5552af61dce180f70c6fafe31553254b3728	nfc trf7970a prefix tx data when refilling fifo when refilling the fifo with more tx data using a new spi transaction the driver must prefix the tx data with a write to the fifo register this tells the trf7970a that the following data is destined for the fifo so it can be transmitted to accomplish this the driver cannot simply push the prefix data just before the next set of tx data that is to be transmitted because that will overwrite part of the tx data provided by the digital layer instead separate the prefix data and the tx data when calling trf7970a_transmit trf7970a_transmit can then send the prefix and tx data from different memory locations with one spi_sync operation this also means that the driver doesnt require any skb tx_headroom as provided by the digital layer see nfc_digital_allocate_device and digital_skb_alloc also ensure that the prefix is of type u8 and not char
f398ab17b2d702620431ad71bc05265e936cc9f1	fix logical continuations place logical operators at the end of the previous line when using a multi-line statement found by checkpatch
f4211d1a6b3c77dced986aea4eb0023f1d6dc6c1	staging unisys visorbus remove unused module parameters removes unused module parameters from in response to findings by sonarqube
23c4919c6fd15e76fe245ad0158f8739a3fa0747	media marvell-ccic drop free_irq for devm_request_irq allocated irq irq allocated with devm_request_irq should not be freed using free_irq because doing so causes a dangling pointer and a subsequent double free
cd009355cd43692e0490b39c983c674e0da3c72e	gma500 convert spaces to tabs in convert the spaces within the file to tabs in order to comply with the coding style of the kernel trimmed to subset relevant to current tree
83b711cbf4ff42a9996c5f092762b3967d307d73	debugfs unproxify files created through debugfs_create_blob currently the struct file_operations fops_blob associated with files created through the debugfs_create_blob helpers are not file lifetime aware thus a lifetime managing proxy is created around fops_blob each time such a file is opened which is an unnecessary waste of resources implement file lifetime management for the fops_bool file_operations namely make read_file_blob safe gainst file removals by means of debugfs_use_file_start and debugfs_use_file_finish make debugfs_create_blob create its files in non-proxying operation mode by means of debugfs_create_file_unsafe
edeea102857e33b5e9b17a3a2640da390732a693	hwmon f75375s make writable for the f75387
8e740cd19fd3878453a3794e53c5252110697581	change edp default scaling mode to respect aspect ratio jani ripped this change separate from the scaling mode change support
ca4d44ea2a91b922e1514f5ed77f6bcf3657fd67	usb dwc3 gadget always enable csp csp bit of trb control is useful for protocols such cdc where were transferring in blocks of mtu-sized requests usually mtu is __number__ bytes we know we will always have a short packet after two for hs wmaxpacketsize packets and usually we will have a long-ish queue of requests for our g_ether gadget we have at least __number__ requests instead of always stopping the queue processing to interrupt giveback and restart lets tell dwc3 to interrupt but continue processing following request if we have anything already pending in the queue this gave me a considerable improvement of on my test setup
c9c75143a5962c4c26d2f2c99b7a6e06f421f5e1	pci fix calculation of bridge windows size and alignment in case that one devices alignment is greater than its size we may get an incorrect size and alignment for its buss memory window in pbus_size_mem fix this case
5b64234081fcbd48c4ae207ce2cc3c31f859f8a4	sync header with firmware the patch synchronizes firmware header file for pci error injection
62dd4cf01a99ad77f0e39c12b2240143d5ededb3	staging unisys fix up camelcase in struct init_chipset_guestpart fix up camelcase names buscount bus_count switch_count switch_count
42e6cae1b35b186650f5abc7b24c20ab6986c5a0	sfc revert changes to nic revision numbers the revision enum values eg efx_rev_hunt_a0 form part of our api and are included in ethtool if these are inconsistent then ethtool will print garbage for a register dump ethtool
622fd4942dc301cb9fcd38243c92218cfa5bd7f5	staging rtl8192e replace with max all get_key implementations return either or small buffers so cast is not a problem
ab1a187bba5c4e5ed8aa6e7bb7dcd7cd7e065aef	pci check device_attach return value always previously we checked the device_attach return value only when that caused this warning in builds where config_bug is not set warning variable retval set but not used check the return value of device_attach always and clean up after failure
574502caed4c11c7bbb6b4532a8bb544f626f2dc	staging rtl8188eu os_dep usb_intf clean up tests if null returned on failure some functions like return null on failure when null represents failure is commonly used this was done using coccinelle expression identifier l1 e e null
1e0bf16cae6d50f9a10738c89957468c977c6f89	mmc tmio fixup compile error this patch fixes the below compile error in function tmio_mmc_probe error res_ctl undeclared first use in this function note each undeclared identifier is reported only once for each function it appears in
d04257b07f2362d4eb550952d5bf5f4241a8046d	vhost-net dont open-code kvfree commit vhost-net extend device allocation to vmalloc added another open-coded version of kvfree which is available since nuke it
16fbcc3b1139e90fe560fde5619169db74dc02c2	regulator fix up a confusing dev_warn when dt lookup fails of_parse_phandle returns null either if the property name itself does not exist or if it exists and does not reference a valid phandle giving out a warn like the one below that the property references an invalid phandle can be confusing when the property itself does not exist in the node fix it with a more sensible message and make it a dev_dbg instead of a dev_warn
fcff0c0887f7286eda3ce47d8934acb3a78e1076	brcm80211 remove attributes config_hotplug is going away as an option as result the markings will be going away remove use of __devinit __devexit_p __devinitdata __devinitconst and __devexit
c4ca5d80e03559fd95c526ece5ce39fc732a2511	arm shmobile move sysc base variable to inside ifdefs move the rcar_sysc_base variable to inside to avoid triggering build warnings in case pm or smp is not selected
5c883b462aa5ecde3da6cabdca00f6abac22aa74	hexagon use correct translation for vmalloc_start
add56ba711627c223e9e356d9398642abf7fa32d	dma intel_mid_dma remove redundant pci_set_drvdata calls call pci_set_drvdata once in intel_mid_dma_probe is enough remove redundant pci_set_drvdata calls in dma_suspend and dma_resume
ac20976dcaeea3e77e40e9aac8f3799d2a22ea2b	mac80211 allow single vif mac address change with addr_mask when changing the mac address of a single vif mac80211 will check if the new address fits into the address mask specified by the driver this only needs to be done when using multiple bssids hence check the new address only against all other vifs also fix the mac address assignment on new interfaces if the user changed the address of a vif such that perm_addr is not covered by addr_mask anymore resolves
b58fa554e9b940083a0691f7234c13240fc09377	xfs btree block lsn escaping to disk uninitialised when testing lsn ordering code for v5 superblocks it was discovered that the the lsn embedded in the generic btree blocks was occasionally uninitialised these values didnt get written to disk by metadata writeback they got written by previous transactions in log recovery the issue is here that the when the block is first allocated and initialised the lsn field was not initialised it gets overwritten before io is issued on the buffer but the value that is logged by transactions that modify the header before it is written to disk and initialised contain garbage hence the first recovery of the buffer will stamp garbage into the lsn field and that can cause subsequent transactions to not replay correctly the fix is simply to initialise the bb_lsn field to zero when we initialise the block for the first time
3f808bdae75eaf464b1b2710894950772a3784f8	usb dwc2 host always increment available host channel during release when releasing a channel increment even in case a periodic channel is released
1387ff53568ba409eef072087fa02359b3a3551b	mfd mt6397 irq domain should initialize before mfd_add_devices some sub driver like rtc module need irq domain from parent to create irq mapping when driver initialize so move mt6397_irq_init before mfd_add_devices
a9dd53adbb84c12f769a862ba2c80404873c2c99	bcache warn when a device is already registered
4d1a4765426fb57439164089b3cb537ec65356eb	block_dev fixed direct bio sector calculation a direct alignment must be always checked against the device blocks size but the offset must always use sector unit and not the actual logical block size
15dcd3502160a46acf11e5cb5e80e9d90a6f9f60	port the infoframe code to the shared infrastructure signed-off-by paulo zanoni at signed-off-by thierry reding at
8bf8180feb1b31ca8d4488d9afde8429f46d259e	fix a few kerneldoc typos while at it adjust the drm_gem_handle_create function declaration to be more consistent with other functions in the file
85d77047c4eaa247bc19a581dba968571dd87e55	propagate error value from smbus functions dont replace the value we got from the i2c layer just pass it on
69d269d38910e697e461ec5677368f57d2046cbe	diagnostic hw counters are not supported in slave mode modify the mlx4_ib_diag_counters to avoid the following error in the hypervisor when the slave tries to query the hardware counters in sr-iov mode mlx4_core __number__ unknown accepted from
95dc140a5e9210c6305b4f8b91cf2e654e1bba1e	staging comedi dt282x use use the that was setup in the device attach instead of accessing the array directly
490ecd635e8ec4aa9619cbed736934f07f4ef62f	media dib8000 remove the old dvbv3 struct from it and add delsys this driver only uses the dvbv5 struct all it needs is to remove the non-used params var and to add the isdb-t to the delivery systems
ce8716e97149d15379603890c4c7a2acfcf4a7ee	mtd nand jz4780 fixup device structure assigned at probe is already assigned to in the probe function remove the duplicate assignment done in jz4780_bch_get acked-by acked-by harvey hunt
70f36507d0c3277e4a5424ca0c6c2a002ae42768	mac802154 fix flags bit definitions order this patch fixes commits mac802154 cleanup ieee802154 hardware flags bcbfd2078d9b11277d9c9ce0c30ba73c750503c9 and mac802154 cleanup address filtering flags by starting the flags definitions at bit0 which is same like the previous behaviour
ff7bbff3bc6f12dee4fc180a79c964c5c3eea8b2	usb wusbcore wa-xfer dont print error when allocating urb fails kmalloc will print enough information in case of failure
79de2ee469aaef0afb25dde7d65d7fbc91600573	iio accel mma8452 claim direct mode during write raw driver was checking for direct mode but not locking it use helper functions to guarantee the device stays in direct mode during all write raw operations
405bea7a9e6427db0ca60fee99bfbef7fcaba977	call drm_put_dev directly from hook we need to chase one pointer here
18f95a3640dbf421ab9532e517070a0c1cd4d582	drivers cpuidle remove cpuidle-arm64 duplicate error messages current cpuidle driver for arm64 machines spits errors upon idle state initialization and cpuidle driver registration failures these error messages are already printed in core code so there is no need to print them again this patch removes the duplicate print messages from the cpuidle-arm64 driver
4b8c861a7c79806fb9ee564c87f517dc26fc2d1e	block move bdev_unhash_inode after invalidate_partition move bdev_unhash_inode after invalidate_partition as invalidate_partition looks up bdev and it cannot find the right bdev inode after bdev_unhash_inode is called thus invalidate_partition would not invalidate page cache of the previously used bdev also use part_devt when calling bdev_unhash_inode instead of manually creating the device number
5f916e289894e97f3b4c3a91a44debf9a47d1b85	use of_get_named_gpio to get hdmi hpd gpio cleanup by removing flags variable from drm_hdmi_dt_parse_pdata which is not used anywhere swtiching to of_get_named_gpio instead of of_get_named_gpio_flags solved this
eb63efb4f263f1f4c2375731d3a9e2040030bc6a	ps3_gelic fix memcpy parameter the size allocated for and the number of bytes copied in it should be consistent
5f5c9ae56c38942623f69c3e6dc6ec78e4da2076	serial_core unregister console in uart_remove_one_port if the serial port being removed is used as a console it must also be unregistered from the console subsystem using unregister_console will release resources iounmap the serial port registers causing a crash on subsequent kernel output if the console is still registered
2c4fabec8790384b91473aa3d0d28d4407168ef9	arm pxa add memory resource to sa1100 rtc device the drivers for the sa1100 and pxa rtcs are now mutually exclusive so add the memory resource for the sa1100-rtc device since the memory resource is already present in the pxa_rtc_resources that makes sa1100_rtc_resources and pxa_rtc_resources equivalent so use pxa_rtc_resources for both devices and remove the duplicate sa1100_rtc_resources
f2aee319d95fcba3d29424aeaf6d39d4c2a7890a	omapdss dispc fix row_inc for omap3 pixel_inc and row_inc work differently on and dss on dss the pixel_inc is _not_ added by the hw at the end of the line after the last pixel whereas on it is the driver currently works for but does not handle correctly which leads to tilted image when row_inc is used this patch adds a flag to dispc driver so that the pixel_inc is added when required
3229ff343c70163b5425e54cce1f313a9be6b85e	staging android modify memory allocation style in modify memory allocation style in order to silence a warning
954e3dd8308501bb00cae4ed655968282dc65314	dont use pages there is a bug in the hardware that will be triggered when this page size is used make sure this does not happen
d984ea604943bbeedde4e9715984eb942a298383	fs move i_readcount on a system a hole exists in the inode structure after i_writecount this patch moves i_readcount to fill this hole
172a1ae141a20f8279dfa285d99ff0541b7eb044	dont call dpms funcs after set_mode because our current set_mode implementation doesnt bother to adjust for the dpms state we just forcefully update it so stop pretending that were better than we are and rip out this extranous call note that this totally confuses userspace because the exposed connector property isnt actually updated
665d1eca03cb9c7a1fb7d74186459b75b4a6ba7c	qlcnic enhance tx timeout debug data collection collect a firmware dump on first tx timeout if netif_msg_tx_err is set log receive and status ring info on tx timeout in addition to tx ring info log additional tx ring info if netif_msg_tx_err is set
2090456a01289e0c91685c649645614953026b15	crypto caam fixes __number__ fix hdr_start_idx_mask hdr_sd_share_mask hdr_jd_share_mask define hdr_start_idx_mask consistently with the other masks mask bitmask offset __number__ op_alg_type_class1 and op_alg_type_class2 must be shifted __number__ fix fifo_store output data type value for afha s-box __number__ fix operation pkha modular arithmetic source mask __number__ rename ldst_srcdst_word_class1_icv_sz to ldst_srcdst_word_class1_iv_sz it refers to iv not icv
426fa950595af017f5e96ff8bde972e06605ed34	greybus remove unused max_cports_per_module and max_strings_per_module are not used anywhere anymore so remove them lest someone thing we have limits
14da04b5ff8e1e70b53f9f927e915e32a56651e1	alsa fm801 no need to suspend absent codec in case of tuner only card there is no need to take care of the codec which is anyway absent
7074ed3df1e23acf68dc398207b6b4bc6a26cac7	staging rtl8712 rtl8712_io remove unnecessary cast typecasting should be removed from variables as it is not required semantic patch used type t t e identifier x t x te
cc67dc28b33917227214a692534d817d727fb934	vt support bright foreground colors these codes are supported by all major terminals thus they occasionally see some use despite being redundant with or less exactly
711ea882a0ce853521cc444ce07c167992c44d0f	scsi lpfc fixed bad book keeping in posting els sgls to port
9cbbffe2ded494429b0d005a51a88242bd9b3095	mac80211 set need_txprocessing for perr frames a user reported warnings in ath5k due to transmitting frames with no rates set up the frames were mesh perr frames and some debugging showed an empty control block with just the vif pointer __float__ xxx txinfo __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __float__ xxx txinfo __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ b8 f2 db __number__ __number__ __number__ __number__ __float__ xxx txinfo __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ set the ieee80211_tx_intfl_need_txprocessing flag to ensure that rate control gets run before the frame is sent
4d4f270f1880e52d89a33c944ee86f23d6c85541	xen-blkback move free persistent grants code move the code that frees persistent grants from the red-black tree to a function this will make it easier for other consumers to move this to a common place
e4a9f8cea50406a57c8dc5429d9aca6429d82436	iwlwifi pcie disable l0s exit timer for __number__ hw family this configuration is invalid for this family
3cd7ca58827234c40bb683de2d1d8512631be8e4	asoc stac9766 use just replace with the helper macros no functional change at all
647ff514d8a099fcce029283c1ecc38519b218d6	hwmon gl520sm convert to use devm_ functions convert to use devm_ functions to reduce code size and simplify the code
6473bbfd7e85a9f834ed668b4daa31638c73ff53	input drv2667 fix misuse of regmap_update_bits using mask __number__ with mask following __number__ k and k greater than __number__ is wrong indeed _regmap_update_bits will perform mask __number__ which results in __number__ if lsb of mask is __number__ thus the call mask __number__ is in reality equivalent to mask __number__ in such a case the correct use is mask mask this driver is performing such a mistake with the drv2667_standby mask which equals __number__ __number__ fix the driver to make it consistent with the api and fix the alignment problem at the same time please note that this change is untested as i do not have this piece of hardware testers are welcome
e2e24e8ebf0e96571fbbac95c215df6a2cebbc5b	mtd style fixups in multi-line comment indentation
59d7b91a1d89168d44f07c8f8fb0ad0dc65a140f	media go7007 add log_status support
f52ede2ac1159f844994519ae0386def308a296b	serial clps711x disable break-state before port startup
d7270d619aaf4ce0e3d079fbdcae274476883e47	iwlwifi pcie re-configure ivar table after suspend-resume during the flow some hw blocks are reset this causes the ivar table to be completely erased this table is where interrupt causes are bound to specific irqs when the table is empty the interrupt handlers are not called correctly fix this by reconfiguring the ivar table after resume
29355c3904e1765948c7721719a028b7eb5dfe1d	d_prune_alias just lock the parent and call __dentry_kill the only reason for games with was __d_drop which was needed only to force dput into killing the sucker off note that lock_parent can be called under and wont drop it so dentry is safe from somebody managing to kill it under us it wont happen while we are holding __dentry_kill is called only with being __number__ here and when picked from shrink list or __number__ dput and dropping the ancestors in shrink_dentry_list so it will never be called twice the first thing its doing is making negative and once that happens nothing will increment it
d9f5efade2cfd729138a7cafb46d01044da40f5e	dmaengine usb-dmac fix endless loop in usb_dmac_chan_terminate_all this patch fixes an issue that list_for_each_entry in usb_dmac_chan_terminate_all is possible to cause endless loop because this will move own desc to the desc_freed so this driver should use list_for_each_entry_safe instead of list_for_each_entry
f96600873e368e9fae53c3485972db2252f9f12c	gpio max732x be sure to clamp return value as we want gpio_chip calls to be able to return negative error codes and propagate to drivers we need to go over all drivers and make sure their return values are clamped to we do this by using the ret design pattern also start to propagate the error code here as the end of the series fixes this to work for all drivers
9ed44bb209d0ece90abb6b4279d8b18e17680476	serial sh-sci correct scif type on r-car for brg the compatible value is currently used for the scif variant in all renesas socs of the r-car family however the variant used in the r-car family is not the common sh-4a variant but a derivative with added baud rate generator for external clock brg which is also present in sh7734 use the family-specific scif compatible values for r-car gen1 gen2 and gen3 socs to differentiate the compatible value can still be used as a common denominator for scif variants with the sh-4a register layout ignoring the serial extension mode register scemr and the new brg-specific registers
ae421e33bce78c7d624ecbf079cdaa5248f167b6	can gs_usb fix typo in function name this fixes typos in where receive is misspelled as recieve
9d9f71a804314e7d50e2fa9e6e61bc77e2d6ae1c	dmaengine sh fix print specifier warnings as documented in we should use specifiers for size_t type variables for the code to compile on different architectures this is uncovered as compile_test has been enabled recently for this driver in function shdma_prep_dma_cyclic warning format expects argument of type int but argument __number__ has type size_t __func__ buf_len period_len slave_id warning format expects argument of type int but argument __number__ has type size_t
0a3f3a1916bcac44a86ca89c874cdcad5e7746e9	mtd nand pxa3xx replace by theres no need to privately store the device page size as its available in mtd structure field also this removes the hardcoded page size value leaving the auto-detected value only
0d9b2ab1c3760a7ca28293c0ae48c2302d71ce96	fec use devm_request_irq using devm_request_irq can make the code smaller and cleaner
1c07b20eaa0e001b3f7811cb3e1dafc4f00648c3	usb dwc2 gadget free tx fifo after killing requests as kill_all_requests potentially flushes tx fifo we should should free fifo after calling it otherwise fifo could stay unflushed properly
ecf026dc340f9700ed3c485344913a8a2b10e2e3	arm fix error-valued pointer dereference in clk_register_gate2 the error-valued pointer clk is used for the arg of kfree it should be kfreegate if clk_register return err_ptr dpatch engine is used to auto generate this patch
fd6f578822fdc2ecd74f4f51550c1144a3c9c613	use static const for seq_operations lprocfs_stats_seq_sops is only used in static int lprocfs_stats_seq_open with seq_open as const struct seq_operations
aec0eb50e5f71f6c28cc0a4739b34ec109fe1a56	asoc wm8350 remove the set_cache_io entirely from asoc probe as we can set the codec while snd_soc_register_codec so the calling of set_cache_io from codec asoc probe could be removed entirely and then we can set the codec in the device probe instead of codec asoc probe as earily as possible
8ee2db3cf1dc02ff9f2c65ac8bd7f478ba79abbe	ensure to not cross a dma segment boundary when we use the iommu_area_alloc helper to get dma addresses we specify the boundary_size parameter but not the offset called shift in this context as long as the offset start_dma is a multiple of the boundary were ok on current machines start_dma always seems to be dont leave this to chance and specify the offset for iommu_area_alloc
cbe47ec559c33a68b5ee002051b848d1531a8adb	protect some more code with other places that change or follow and take the device_lock as well as the so it should really be held in these places too also doing so will allow to be discarded with merged fixes by namhyung kim gmail.com
aede45b2f6cd995f9949297b0e3234f495ec93f1	gpu ipu-v3 set correct full sensor frame for set the sensor full frame based on whether the passed in mbus_fmt is ntsc or pal
596a65d152fdc777ee7a2c7cbea9a7916350bed1	gpu ipu-v3 reset ipu before activating irq if we dont come out of a clean reset make sure no irq is fired before everything is setup by resetting the ipu before activating the interrupt handlers
8620a3a908da34e1a0db9ad457136bc96340911f	consolidate a bit theyre indentical so just kill one also give the other a prefix to distinguish it from the functions this add_request function is not really generic code v2 fixup commit message as noted by ben widawsky
6aa9751679b04b351bf4b2e2678bc11ea7d0fea4	input drv260x remove unused defines removing some that are not and should never be used pertaining to i2c removing define drv260x_allowed_r_bytes __number__ define drv260x_allowed_w_bytes __number__ define drv260x_max_rw_retries __number__ define drv260x_i2c_retry_delay __number__
f1ffdfcc52744ed264041741020364cfbad9c0de	staging comedi fix too early cleanup in comedi_auto_config comedi_auto_config is usually called from the probe routine of a low-level comedi driver to allocate and auto-configure a comedi device part of this involves calling the low-level drivers auto_attach handler and if that is successful comedi_device_postconfig tries to complete the configuration of the comedi device if either of those fail comedi_device_detach is called to clean up and comedi_release_hardware_device is called to remove the dynamically allocated comedi device unfortunately comedi_device_detach clears the hw_dev member of the struct comedi_device indirectly via comedi_clear_hw_dev and that stops comedi_release_hardware_device finding the comedi device associated with the hardware device so the comedi device wont be removed properly since comedi_release_hardware_device also calls comedi_device_detach assuming it finds the comedi device associated with the hardware device the fix is to remove the direct call to comedi_device_detach from comedi_auto_config and let the call to comedi_release_hardware_device take care of it
4d479cf010d56ec9c54f3099992d039918f1296b	btrfs sectorsize align offsets in fiemap weve been hitting bugs in btrfs_cont_expand and btrfs_fallocate and anywhere else that calls btrfs_get_extent while running xfstests __number__ in a loop this is because fiemap is calling btrfs_get_extent with non-sectorsize aligned offsets which will end up adding mappings that are not sectorsize aligned which will cause problems in some cases for subsequent calls to btrfs_get_extent for similar areas that are sectorsize aligned with this patch i ran xfstests __number__ in a loop for a couple of hours and didnt hit the problem that i could previously hit in at most __number__ minutes thanks
0a8d4c3ef8f14cbd26d97767e3676722d4eebee5	dm btree remove unused dm_block_t root parameter in btree_split_sibling
a00f4f6e048dff90e64c6d1bde2bb4587c6d2234	mac80211 fix chantype recalc warning when a device driver is unloaded list is cleared if there was more than __number__ interface running and connected bound to a chanctx then chantype recalc was called and it ended up with compat being null causing a call trace warning warn if compat becomes null as a result of incompatible of interfaces bound to a given channel context only the call trace looked like this warning cpu __number__ pid __number__ at modules linked in ath10k_pci- ath10k_core ath cpu __number__ pid __number__ comm rmmod tainted g w hardware name qemu standard pc i440fx piix __number__ bios bochs __number__ __address__ __address__ __number__ __address__ __address__ __address__ __address__ __number__ __address__ __address__ __address__ call trace __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ __address__ ath10k_core __address__ ath10k_core __address__ ath10k_pci __address__ __address__ __address__ __address__ __address__
9e08ef1afb109c2059e7c1e4755fcafd9be37260	nfs correctly report misuse of migration mount option the current test on valid use of the migration mount option can never report an error as it will only do so if __number__ and some other condition but if that test would succeed then the previous test has already gone-to out_minorversion_mismatch so change the to an to get correct semantics
3e1d9c6f241961e2e21b8df9de5ee12e3dc6f177	power olpc_battery clean up eeprom read function the change removes redundant sysfs binary file boundary check while reading eeprom content from userspace the check is done on caller side in if binary attribute size is not zero
a64e2e2354679ad1742b4c43ac665ffa075ef8a0	rndis_wlan release bss structures returned by cfg80211_inform_bss patch fixes rndis_wlan to release referenced bss structure returned by cfg80211_inform_bss
20697434b6ea9c6d895ebc5217a46f18850a109f	dont return errors from poll_cq remove returning errors from mlx4 poll_cq function polling cq operation in kernel never fails by mellanox hca architecture and respective driver design
421ae6e3db690a5679192aca2463662bc0c1a1da	usb io_edgeport remove unused defines remove unused timeout defines
4d0a4c3c6dd2359c3d5facac7a306d513d79bff2	asoc wm8580 cleanup manual bias level transitions since the asoc core now takes care of setting the bias level to snd_soc_bias_off when removing the codec there is no need to do it manually anymore either the manual transition to snd_soc_bias_standby at the end of codec probe can also be removed as the core will automatically do this after the codec has been probed
a751d3155dee38cb2a8e46d8cf3fa6998b2f3239	mtd fsl_upm fix a memory leak in fun_chip_init error path
45870a441361d1c05a5f767c4ece2f6e30e0da9c	drivers hv ring_buffer remove stray smp_read_barrier_depends smp_read_barrier_depends does nothing on almost all arcitectures including x86 and having it in the beginning of hv_get_ringbuffer_availbytes does not provide any guarantees anyway
98a65b59f8109cfafcc3c13b34895087b90dc630	wil6210 report reset time useful to detect hardware problems
27c62c2da177178771517744acaced08767214e2	usb chipidea otg initialization is only needed when the gadget is supported we have only needed to enable otg initialization when both of below conditions are satisfied the controller is otg capable the gadget function is enabled if the controller is otg capable but is host-only configuration we do not need to access register otgsc and do any otg operations eg create otg workqueue
48f125ce1cc3ff275f9587b5bf56bf0f90766c7d	net ipv6 fix error return code initialize return variable before exiting on an error path the initial initialization of the return variable is also dropped because that value is never used a simplified version of the semantic match that finds this problem is as follows return ret __number__ when ret e1 when when ret e2 when forall return ret
051fc06dfaa322e1079edc476e6e2500220c562d	mfd omap-usb-host use clock names as per function for reference clocks use a meaningful name for the reference clocks so that it indicates the function update the usb host node as well to be in sync with the changes
aec39680b02ed55fcbb2bc87ad96eba16a651546	nfsd4 fix spurious __float__ post-reboot failures in the case this could cause a spurious nfsd failed to write recovery record err please check that exists and is writable
ae6e00b4c01f701a9a268adf35371c018396cd05	rtc s3c dont print an error on probe deferral the clock and source clock looked up by the driver may not be available just because the clock controller driver was not probed yet so printing an error in this case is not correct and only adds confusion to users however knowing that a drivers probe was deferred may be useful so it can be printed as a debug information
b86d8d363ece8fb9a7ec7e951c7f041f47f0f552	log using the ctrl named device align with the rest of the nvme subsystem
7213fe7eec174fb2b958ecc3ce04a6f811c2d4da	media v4l vsp1 create pad links after subdev registration the vsp1 driver creates the pads links before the media entities are registered with the media device this doesnt work now that object ids are used to create links so the media_device has to be set move entities registration logic before pads links creation
79afd8efdb4895747f98b1b9f7712489ce57d46c	h8300 missing checks of return values
70ce6aee664a3e61ca5b4278d61db6da0996cade	asoc run speyside wm8962 at ensure we have access to all the advanced dsp functinality offered by the wm8962 by running the system clock at
54bf1ce633f6649b1f3682c25712b9e42acb174b	assume no scaling is available when things are not as expected cdclk crtc_clock is not allowed and suggests a different problem elsewhere in the code it is more robust and safe to assume no scaling is possible in this case with no other downsides since it will also warn_on_once so that this definitely gets noticed call it an assert to help new platform bring-up in simulation v2 better commit msg and use warn_on_once to signify the unexpectedness v3 move zero crtc_clock check under the warn ville
b682d7baf11ab0d29d511632eb0195b5fa004295	asoc wm8988 constify struct regmap_config and snd_soc_codec_driver the regmap_config struct may be const because it is not modified by the driver and regmap_init accepts pointer to const make struct snd_soc_codec_driver const as well snd_soc_register_codec accepts pointer to const
656a22a105c8135a515daae3d79ede7b472c18ec	asoc mid-x86 use warn_on instead of bug_on bug_on is rather useless for debugging as it leads to panic use warn_on and handle the error cases accordingly
3c5913b53fefc9d9e15a2d0f93042766658d9f3f	bonding primary_slave curr_active_slave are not cleaned on enslave failure on enslave failure primary_slave can point to new_slave which is to be freed and the same applies to curr_active_slave so check if this is the case and clean up properly after err_detach because thats the first error code path after theyre set
b57efda1f0372d6107ced5a255384be9fd449260	asoc wm8988 constify rate constraints the rate constraints in this driver are shared between all device instances it should not be and is not modified at runtime so make them const
7a9f957b395fc08edc47620c01e8bb5b798caddb	spi sh-msiof fix transmit-only dma transfers fix mixup which broke transmit-only transfers introduced by commit spi sh-msiof fix leaking of unused dma descriptors
1b0ef827d9edbc7e702ad50c363293d5cea6bb76	staging comedi pcl726 rename boardtypes boardtypes is pretty generic rename this static const variable
d72e01a0430f8a1ae7adb3cbf0b2e73fcd99252e	ftgmac100 use a scratch buffer for failed rx allocations we can occasionally fail to allocate new rx buffers at runtime or when starting the driver at the moment the latter just fails to open which is fine but the former leaves stale dma pointers in the ring instead use a scratch page and have all rx ring descriptors point to it by default unless a proper buffer can be allocated it will help later on when re-initializing the whole ring at runtime on link changes since there is no clean failure path there unlike open
61eee41ae135517392d05cbf1177523a02f12727	ia64 remove redundant valid_mmap_phys_addr_range from pci_mmap_page_range we know we are within a valid mmio bar by the time this function gets called theres no need to check
213ade8ca8c854435d99e4d2927655b2ae4191e9	vmxnet3 enable gro support when receiving packets from another guest on the same hypervisor its generally possible to receive large packets because no segmentation is necessary and these packets are handled by lro however when doing routing or bridging we must disable lro and lose this benefit in these cases gro can still be used and it is very effective because the packets which are segmented in the hypervisor are received very close together and can easily be merged
e47851f13d3300f67ca8c7c73780d029ccaa5d74	skge dma_sync the whole receive buffer the dma sync should sync the whole receive buffer not just part of it fixes log messages dma_sync_check
c42c65c1d5863bca54e45ea25ecb24a3def29f59	mwifiex memory corruption in mwifiex_tdls_add_vht_capab there is a typo here because the names are confusingly similar the intent was sizeofstruct ieee80211_vht_cap size __number__ but sizeofstruct ieee80211_ht_cap size __number__ was used anway its cleaner to just specify the variable instead of the type
97f4ad29dae24861dc08bfea48b1b446fc195d99	mips cpu add noftlb kernel command line option to disable the ftlb add new noftlb kernel command line option to disable the ftlb since the kernel command line is not available when probing and enabling the cpu features in cpu_probe we let the kernel configure the ftlb during the config4 decode operation and we disable the ftlb later on once the command line has become available to us this should have no negative effects since ftlb isnt used so early in the boot process ftlb increases the effective tlb size leading to less tlb misses however sometimes its useful to be able to disable it when debugging memory related core features or other hardware components patchwork
82791940545be38810dfd5e03ee701e749f04aab	writeback do strict bdi dirty_exceeded this helps to reduce dirty throttling polls and hence cpu overheads typically only helps when suddenly starting dds on a disk in which case the dds may need to poll balance_dirty_pages earlier than
547a1c99d0052c8bee0a8fe4091e6a9094c3cde3	hwmon ibmaem fix error paths i am under the impression that error paths in functions aem_init_aem1_inst and aem_init_aem2_inst are incorrect in several cases the function returns __number__ on error which i suspect is not intended fix this by properly tracking error codes
d72f88a42bf9761e3a92e58879d25a65712ca87a	pinctrl sunxi fix error return code in sunxi_pinctrl_probe fix to return a negative error code from the devm_clk_get error handling case instead of __number__ as done elsewhere in this function introduced by commit pinctrl sunxi add clock support
e4d6c4b79cc189c1b0d65f8e3875c4411e097bee	fmc support carriers with no mezzanine at registration and unregistration time i was checking for fmc_device_no_mezzanine to skip initialization and cleanup for empty slots the check was wrong instead of but registration failed anyways as expected because we had no eeprom this commit fixes one such checks and removes the other so to actually accept slots with no mezzanines thats because the carrier may offer some support anyways the spec does and working on the carrier with no mezzanine-specific driver is common during development
fa24198897ff0e8d34876be0e61f9b35d3c0d467	media remove definition for audio_get_pts while this ioctl is defined inside it is not docummented at the api specs nor implemented on any driver inside the linux kernel so it doesnt make sense to keep it here as this is not used anywere removing it is not a regression so theres no need to use the normal features-to-be-removed process
baa9e60927331c3324fccf4c39485e857d8472eb	brcmfmac read firmware console without trap indication firmware console output can be read also when there was no trap indication
3069f0c07f8d64ebf6ff5d2d1553e0a6dad4316e	of use proper types for checking memory overflow commit a67a6ed15513541579d38bcbd127e7be170710e5 of check for phys_addr_t overflows in early_init_dt_add_memory_arch corrected early_init_dt_add_memory_arch to account for overflows but did so in an unclean way using ulong_max there is no guarantee that sizeofunsigned long sizeofphys_addr_t check against phys_addr_t instead
b9e1d435fdf4ae0b925070d44b65d608f2707688	ovl_lookup_real use lookup_one_len_unlocked
5f01f7f301db567a7a2b99d012db1c408ce0e9de	staging quickstart fix compilation warning on __number__ bit arch acpi_size is u32 or u64 depending on architecture cast it to unsigned long and use for printing this fix following build warning in function warning format expects argument of type but argument __number__ has type
7b9f72c62ed047a200b1ef8c70bee0b58e880af8	arm perf clean up event group validation currently event group validation compares each events pmu pointer against the static pmu pointer this limits the code to supporting only __number__ pmu this patch changes the behaviour to consider an events group leaders pmu pointer as canonical for validation this should ease later generalisation of the code to support multiple pmus at once
4b3576e450a1539492e26e2d7b1e2e69578c032e	btrfs error handle for get_ref_objectid_v0 in relocate_block_group we need error checking code for get_ref_objectid_v0 in relocate_block_group to avoid unpredictable result especially for accessing uninitialized valuewhen function failed after this line
ff118479a76dbece9ae1c65c7c6a3ebe9cfa73e0	apparmor allow sys_cap_resource to be sufficient to prlimit another task while using apparmor sys_cap_resource is insufficient to call prlimit on another task the only other example of a apparmor mediating access to another already running task ignoring is ptrace the apparmor model for ptrace is that one of the following must be true __number__ the tracer is unconfined __number__ the tracer is in complain mode __number__ the tracer and tracee are confined by the same profile __number__ the tracer is confined but has sys_cap_ptrace __number__ __number__ and __number__ are already true for setrlimit we can match the ptrace model just by allowing cap_sys_resource we still test the values of the rlimit since it can always be overridden using a value that means unlimited for a particular resource
f2f79cca13e36972978ffd1fb6483c8a1141b510	ndisc bool initializations should use true and false
af8e50cc7d546c508e9091bbbdf3cf8b243bd8cd	selinux use define for number of bits in the mnt flags mask we had this random hard coded value of __number__ in the code i put it there for the number of bits to check for mount options this is stupid instead use the we already have which tells us the number of mount options
4d10cc0f861ed776f6cf953fd1df933c8b5c9812	delay deref for legacy ioctls past the check for driver_modeset avoids races with userspace opening a master and our sarea setup
78119fd1068cc068f6112a57a5f6de0e5b20245a	fix bug in interrupt parsing refactor commit refactor interrupt-map parsing introduced a bug the irq parsing will fail for some nodes that dont have a reg property it is fixed by deferring the check for reg until it is actually needed also adjust the testcase data to catch the bug
b51dbec68c8732caac2495f558659556523e8322	convert simple_strtoul to kstrtouint sysctl_hung_task_panic has been changed to unsigned int use kstrtouint instead of obsolete simple_strtoul
5127c4f8a314b798459985d93f7829cf9cf9bbc3	dma ipu_idmac reuse is_slave_direction helper the is_slave_direction helps to check if the transfer type is slave
68b04f1f342d35d439f11b675c5adbcaa85a75be	staging unisys properly move version file into bus attr simplify things by moving the version file handling into the core
272420214d261e97f08a4c555defb3924de06ae8	dmaengine add dma_ctrl_reuse this adds new descriptor flag for reusing a descriptor by submitting multiple times by a client for example video buffer add helper apis for this as well
55bb1d8355ce91662dc8760f24f578db5a595819	memory tegra mc add missing of_node_put for_each_child_of_node performs an of_node_get on each iteration so to break out of the loop an of_node_put is required found using coccinelle the semantic patch used for this is as follows expression e local idexpression n n when of_node_putn when e n return n of_node_putn return
cd238a3ecf2bf7f3d1a155a32b4bddd87dbd3d23	i40e fix the tx ring qset handle when dcb reconfigures when dcb is reconfigured to single tc the driver did not reset the tx ring qset handle to the correct mapping which caused tx queue disable timeouts change-id i4da5915ec92a83c281b478d653fae6ef1b72edfe
dc9b5a0c631115118267255837ac9df682fb79d1	psr simplify port and link standby checks current code not just block link_standby for non ddi platforms but also block psr from work on other ports so besides change any behaviour lets just fix the mess a bit here and reuse hsw check to block the other ports and reduce the second if only to link stadnby request
e839c42d0b8789edc9814b69dcbedd3e1ad7c544	removed assignments from if statements in
31e09b18c863718939e3e9c30eee55f9011d85ee	print non-volatile flag in srat with the addition of nvdimm support a question came up as to whether nvdimm ranges should be in the srat with this bit set i think the consensus was no because the ranges are in the nfit with proximity domain information there acpi is not clear on the meaning of this bit in the srat if someone is setting it we might want to ask them what they expect to happen with it right now this bit is only printed if all the acpi debug information is turned on link
569884e3d47d54d943c13eb14d653a6100937f14	use maxrender media for baytrail busyness calculation currently we sum the render and media cycles on different engines to compute a percentage but we fail to factor in the duplication into the threshold calculations this makes us very eager to upclock if we just consider the maximum busy cycles of either counter we should have an accurate reflection on whether there are cycles to spare to handle the workload at this frequency
19da34b40e779992442e66d42f3e9bcbfc1c5874	clk rockchip add clock ids for the pvtm clocks process-voltage-temperature monitor has two clocks pvtm_core and pvtm_gpu
098303caaf3a24e43a67d9a6e7d2f7d3033a601f	staging comedi ni_labpc_cs cleanup pcmcia_driver for aesthetic reasons reorder the pcmcia_driver variables and add some whitespace
2ce601b033376905d585e0825d5499616a22b565	staging goldfish coding style add spaces around the to conform to checkpatch added a space around the at to clear up a checkpatch check
b686784d03e66f8515198de4850d1e372b729880	rtlwifi btcoexist fix if else warnings in the kernel test infrastructure reports the following warning possible condition with no effect if else warning possible condition with no effect if else reported-by
63c8a58d226a0701272b54015a8d73643d72cd3d	mfd fix off-by-one value range checking for tps65912_i2c_write if bytes tps6591x_max_register __number__ we have a buffer overflow when doing src bytes
c12f964357fc6de54252a4134720083d687caa22	take runtime pm reference even if dma is not supported we always need the device to be runtime pm enabled to use it so just skip the dma initialisation not the entire prepare when polling
48c25cf441182e629e52e7f9fa56c2019e75fb00	mtd nand vf610_nfc use nand_check_erased_ecc_chunk helper
3dcba280f739772a4156fbcdae39229d6bb5e02b	asoc core dont break component searching if both id and num_dai are __number__ the commit asoc core fix the dai name getting added a break within the if id __number__ id while the original design of the search didnt break the loop if that condition contented but only mark the ret error and let it go on to search the next component in a case like dmaengine whichs not a dai but as a component sharing an identical name with a dai both the id and here could be __number__ if we break the search we may never find the dai we want as it might be placed behind its dmaengine in the component list so this patch fixes the issue above by following the original design to let the search carry on
dbb004294a934d030a9d716692a1dd6f677fc90e	dma fix spacing for method declaration coding style issue in
75a1812230ad7ad16e5a06b5ef2220f765b12da5	kvm s390 optimize paths where get_vcpu_asce is invoked during dynamic address translation the get_vcpu_asce function can be invoked several times its ok for usual modes but will be slow if cpus are in ar mode lets call the get_vcpu_asce once and pass the result to the called functions
51bd88146fc49b21c87f66eb61ec49cf5e14085c	staging lustre lnet fixed sparse warnings this fixes few sparse warnings for missing static in functions warning symbol lnet_get_routes was not declared should it be warning symbol lnet_get_networks was not declared should it be warning symbol lnet_init_locks was not declared should it be warning symbol lnet_fini_locks was not declared should it be warning symbol lnet_assert_wire_constants was not declared should it be warning symbol lnet_find_lnd_by_type was not declared should it be warning symbol lnet_create_interface_cookie was not declared should it be warning symbol lnet_res_container_cleanup was not declared should it be warning symbol lnet_res_container_setup was not declared should it be warning symbol lnet_prepare was not declared should it be warning symbol lnet_shutdown_lndnis was not declared should it be warning symbol lnet_startup_lndnis was not declared should it be
7c7faa11ecf3eec17699ae73fc6e336cbf993081	remove device_to_iommu call from domain_remove_dev_info this was problematic because it works by and we want to make device_to_iommu use only a struct device for handling non-pci devices now that the iommu pointer is reliably stored in the device_domain_info we dont need to look it up
9369c97cc7eca4a73baf382cfabe92ed20ea04ed	mmc mmci cascade eprobe_defer from regulators
cd7293ef3939d1220c280b9e11a520ce4ba57d56	staging wilc1000 change data type of result in handle_set_ip_address this patch changes data type of result variable from s32 to int result is used to get return value from wilc_send_config_pkt that has return type of int
05e0be7c900797e9164976a6014d534ce3035909	input synaptics-rmi4 fix reversed conditions in these tests are reversed a warning should be displayed if an error is returned not on success
d2ce70a119f844225c10f133f8b957d540027b0f	dm table remove superfluous variable reset if allocation fails the local var is not used any more after kfree dont need to reset it to null remove the unnecesary null set here
c54c06290428554bc0e26d58f21a7865cbe995af	bpf mlx5 fix various refcount issues in mlx5e_xdp_set there are multiple issues in mlx5e_xdp_set __number__ the batched bpf_prog_add is currently not checked for errors when doing so it should be done at an earlier point in time to makes sure that we cannot fail anymore at the time we want to set the program for each channel the batched refs short-cut can only be performed when we dont need to perform a reset for changing the rq type and the device was in opened state in case the device was not in opened state then the next mlx5e_open_locked will aquire the refs from the control prog via mlx5e_create_rq same when we need to perform a reset __number__ when swapping the then no extra reference count must be taken since we got that from call path via dev_change_xdp_fd already otherwise wed never be able to release the program also bpf_prog_add without checking the return code could fail
a90e56e5b1779836132645e3352c7d5b60cddca8	dmaengine ste_dma40 only calculate residue if txstate exists there is no point calculating the residue if there is no txstate to store the value
54075a7d75732147c32f7a99af5218f7d0f62596	make the panel fitter work on pipes b and c on haswell this goes on a separate patch since it wont apply on the stable trees and theres nothing using panel fitter on hsw on the older kernels
c60923cb9cb5e042790839d553ed77e68ef45adf	virtio_ring fix complaint by sparse make warning incorrect type in assignment different base types expected unsigned int unsigned assigned i got restricted __virtio16 usertype next warning incorrect type in assignment different base types expected unsigned int unsigned assigned i got restricted __virtio16 usertype next warning incorrect type in assignment different base types expected unsigned int unsigned assigned i got restricted __virtio16 usertype next warning incorrect type in initializer different base types expected unsigned short unsigned usertype nextflag got restricted __virtio16 warning restricted __virtio16 degrades to integer
22b8708725c20ce57d79e51a7e98628b382420a4	greybus uart add runtime pm support this adds runtime pm support for the uart driver testing done using the test daughter board let the gpb bridge enter standby and do a uart transfer operation
355c822847fa70fa1df6a7451b7ecf76116efcd2	disable vce init on cayman v2 cayman does not have vce there were a few places in the shared code where we were trying to do vce stuff v2 remove check
233b594bdf6d846f03816eec1c19ccbd7e4618c0	scsi ufs fix static checker errors in ufshcd_system_suspend this patch fixes newly introduced sparse warning in ufshcd_system_suspend introduced by ufs power management series sparse warning ufshcd_system_suspend error we previously assumed hba could be null see line __number__ to fix it we return __number__ in case hba is not initialized or is not powered
7acd57070649da4ac3923f1d2075c084d83da1f4	target do not special-case loop and iscsi fabric module loads these modules along with other fabrics should be loaded as-needed by the lio userspace tools
413fd1e9aa3e0441e64ed4703ce1bba164e135c0	usb ehci-omap get rid of omap_ehci_init as it does almost nothing get rid of omap_ehci_init and move the initialization part into probe also remove the outdated todo list from header
896b4db685cf06bd7d50ed22c53ebd069e0b90e9	amd-xgbe fix irq processing when running in single irq mode when running in single irq mode the additional irq routines were being skipped because only the xgmac interrupt status was being checked update the code so that the additional irq routines are checked whenever an interrupt is received
9393996761e23280f259d706133c8f0cd139fd58	rtc mt6397 fix build on some platforms on some platforms the following compilation error happens because of the division on a value in mtk_rtc_read_time in function mtk_rtc_read_time undefined reference to __divdi3 undefined reference to __moddi3 use div_s64 as done in rtc_time64_to_tm to solve that
709fb1f961ea5c287107c3f903e81c9529224c8b	xtensa wire up new syscalls
a10315e5efb86c689142a7e7927125889f3682e6	iommu only allow for paging domains check for the new __iommu_domain_paging flag before calling into the iommu drivers and call-backs
f830b0223cabfc614552a73dabff920859191f2e	net revert fib_trie use seq_file_net rather than this reverts commit fib_triestat is surrounded by a big lie while it claims that its a seq_file fib_triestat_seq_open fib_triestat_seq_show it isnt static const struct file_operations fib_triestat_fops this_module fib_triestat_seq_open seq_read seq_lseek single_release_net yes fib_triestat is just a regular file a small detail assuming is that while for seq_files you could do seq_file_net to get the net ptr doing so for a regular file would be wrong and would dereference an invalid pointer the fib_triestat lie claimed a victim and trying to show the file would be bad for the kernel this patch just reverts the issue and fixes fib_triestat which still needs a rewrite to either be a seq_file or stop claiming it is
426245a44d6dc03a7e32c8836eb334e32e6d12ee	staging lustre lmv release request in lmv_revalidate_slaves in lmv_revalidate_slaves ensure that the request returned by md_intent_lock is properly released on all paths intel-bug-id reviewed-on
3c2d0ed221a22ce2c1c9fe1e2d6142374917642e	serial bfin_uart rts and cts mmrs can be either width or width change hardware flow control code to adapt to both bf5xx and bf60x disabled serial device before set termios for bf60x
8d1043a30fc23a3f8a95b972beb694dd948bbe45	greybus bundle fix double freeing of bundle structure the bundle will be released by gb_bundle_release once all references for the bundle are dropped and so there is no need to free it in the error path specially
ed9c77d2612316fba202cf1d69fc903969e474c8	explicitly use ddi buf trans entry __number__ for hdmi when the ddi port is in mode it automagically uses the buffer translations values from entry __number__ lets make that explicit in the code
d9f2a202877c15818d98268f47d6b4bcfcb84437	asoc fsl_ssi fix samples being dropped at playback startup if the capture is already running while playback is started it is highly probable in a __number__ channels scenario that samples are lost between the dma and tx fifo the reason is that is set before leaving a time window where the fifo doesnt receive the samples written by the dma this particular case happened only if capture is already enabled as is already set at the playback startup instant
abefe12a2f3b1cd701158d6bd6a826e057dec2b4	media ir-sony-decoder shutup smatch warnings there are some false-positive warnings produced by smatch ir_sony_decode warn missing reassigning ir_sony_decode warn missing reassigning ir_sony_decode warn missing reassigning this is due to the logic used there to detect the need of a break while those are false positives it is easy to get rid of them without any drawbacks the side effect is a cleaner function with is good
c88f2096136416b261bd3647cc260935f6e95805	perf do not check perf_event_state_exit on syscall read path revert perf_event_state_exit check on read syscall path it breaks standard way to read counter which is to open the counter wait for the monitored process to die and read the counter link
fa92dd77ec5623cc0546acb77ee61a0a7ea4f0f0	alsa usb avoid unnecessary sample rate changes on usb __float__ clock sources the scarlett seems to take almost __number__ ms to set the sample rate even if the clock is currently set to that value this patch speeds up prepare of the device by avoiding setting the clock to something it already is
5dce16e51aaf6e948d982a310f0338a1b395b6ca	staging comedi ni_mio_common use the in ni_e_init sets the to the analog input subdevice use that instead of accessing the array directly
4591ce4f2d22dc9de7a6719161ce409b5fd1caac	do not trap hinting faults for shared libraries numa hinting faults will not migrate a shared executable page mapped by multiple processes on the grounds that the data is probably in the cpu cache already and the page may just bounce between tasks running on multipl nodes even if the migration is avoided there is still the overhead of trapping the fault updating the statistics making scheduler placement decisions based on the information etc if we are never going to migrate the page it is overhead for no gain and worse a process may be placed on a sub-optimal node for shared executable pages this patch avoids trapping faults for shared libraries entirely link
4a065c7bdbec9536f7b899241b125b9c3b5ba97a	usb dwc2 host add missing spinlock in dwc2_hcd_reset_func the dwc2_hcd_reset_func function is only ever called directly by a delayed work function as such no locks are already held when the function is called doing a read-modify-write of cpu registers and setting fields in the main hsotg data structure is a bad idea without locks lets add locks the bug was found by code inspection only it turns out that the dwc2_hcd_reset_func is only ever called today if the host_support_fs_ls_low_power parameter is enabled and no code in mainline enables that parameter thus no known issues in mainline are fixed by this patch but its still probably wise to fix the function
474799f073763b868e158b04b74f8ddd1da38da2	usb dwc3 pci make build-in device properties available setting the acpi companion before calling dwc3_pci_quirks the acpi companion will be set unconditionally as the primary fwnode overriding any previously set primary fwnode this will make sure that any build-in properties added to the platform device will be added as the secondary fwnode in cases where also acpi companion exists
8f5af6f1f2d09fe5eac86a5dc1731a5917c1503a	rcu rcu_fast_no_hz detection of callback adoption in the present implementations of cpu hotplug the outgoing cpu is guaranteed to run its stop-machine process on the way out which will guarantee that rcu_fast_no_hz forces the cpu out of dyntick-idle mode however new versions of cpu hotplug might not work this way this commit therefore removes this design constraint by explicitly notifying cpus when they adopt non-lazy rcu callbacks
ac0d1516a2903226c19f3b4a4b323a9ffbede7d0	arm s5p64x0 replace irq_gc_ack with irq_gc_ack_set_bit according to commit replace irq_gc_ack with variants this should be fixed
dba968c4fea0f9368e709966666d6e35dfe05e62	staging iio ad7280 replace mlock with driver private lock the iio subsystem is redefining to be used by the iio core only for protecting device operating mode changes ie changes between indio_direct_mode modes in this driver mlock was being used to protect hardware state changes replace it with a lock in the devices global data
9e4904c17560b8936a94aeadca8db909ba777ed8	staging iio tsl2x7x_core remove redundant break break after return is redundant remove it
56b427678cc3c1c4e305a96c9cfa8ba985c70a48	gpio use container_of to resolve cs5535_gpio_chip from gpio_chip use container_of instead of casting first structure member
062e008a6e83e7c4da7df0a9c6aefdbc849e2bb3	mwifiex pcie use posted write to wake up firmware depending on system factors the pcie link pm state the first read to wake up the wifi firmware can take a long time there is no reason to use a blocking non-posted read at this point so lets just use a write instead write vs read doesnt matter functionality-wise its just a dummy operation but lets make sure to re-write with the correct ready signature since we check for that in other parts of the driver this has been shown to decrease the time spent blocking in this function on rk3399
3400606d8ffd64ea7ffb5969f7c96daebeff36f3	microblaze add new fpga families add new fpga families where microblaze can run on
53985a7bfa7b947c91f35c6adcdc9cacc6fef07f	perf tools remove redundant checks from _sort__sym_cmp we already check that sym_l and sum_r are non-nulls no need to do it twice link
0932966b1ca03217c6e0c18375867b1a99ee5af0	staging ccg print mac addresses via
eece5de59c090cf6cc04622a0abedb1553383cdc	scsi mpt2sas fix for max_sectors warning message is stating the incorrect range when specifying the command line option max_sectors less than __number__ then warning message should provide correct upper boundary value __number__ instead of __number__
a7878ca140084ec267ede48fce64d7e60f6d873e	nfs flexfilelayout remove v3-only data server limitation flexfilelayout supports data servers which talk nfs v3 and however this code path is disabled and v3 only servers are accepted this change removes this limitation
f9541f8239a5765595543b021b2dce6a8d6653ab	staging lustre orthography coding style orthography and coding style corrections
1dc042885456dff457d0b758b69209dcafa688ec	dmaengine make __dma_request_slave_channel_compat name argument constant inline function __dma_request_slave_channel_compat doesnt modify name argument but passes it to dma_request_slave_channel which already takes it as a constant
ad942cb19b416fc64f17871372ee0932878861c0	staging rtl8723au rtl8723a_bt-coexist remove unused variable a variable is initialized and then assigned values in the code but is never used and therefore should be removed semantic patch used type t identifier i constant c position p t when i i c
9fb3fc70ca6c22c701321822a17fe18e74c9ebec	clean up crtc hooks those are all no longer needed for a pure atomic driver
6347b3c433a4cff00eb2299c7f2c7d1d8b24c1fc	btrfs fix off-by-one error of the same page check in btrfs_punch_hole start len is the start of the adjacent extent not the end of the current extent so we should not use it to check the hole is on the same page or not
c9d9f2394c6a953585874a1a6cb2ecea853fdcf2	make use of struct iommu_device register hardware iommus seperatly with the iommu-core code and add a sysfs representation of the iommu topology
c33e7b05f1411b97cd0260ae682fc1cdb27bfaa4	ipv6 anycast convert ipv6_sk_ac_lock to spinlock since all users are write-lock it does not make sense to use rwlock here use simple spinlock
5c165aeca3e357fbc9760e5f66b6de8ef994e3c7	ppc kvm make nx bit available with magic page because old kernels enable the magic page and then choke on nxed trampoline code we have to disable nx by default in kvm when we use the magic page however since commit we have successfully fixed that and can now leave nx enabled so tell the hypervisor about this
b81ea968706bdb5c2f2af62c5700573a32ab310a	clk add missing clk_get_sys stub when compiling with the compile_test option set the clps711x does not compile because of the clk_get_sys noop stub missing
4e038e8919e072c9fa1b5462a7c89d8c95ac8657	phy miphy28lp unlock on error in miphy28lp_init we need to unlock before returning the here
a607d3c2bc9839fbc3ee8a8c99beeb7b3a3844c2	staging brcm80211 add braces to si_info macro definition the additional braces allow the casted parameter to be indirected immediately here is an example to clarify x si_infoy z z
5b1ebbffc0b2dd47a45380ba68da36f792a2977e	staging emxx_udc fix compile warnings discarding const qualifier
7f28197560116f08c4c27342974f9e64cab2cbb1	mac80211 call driver commands after drv_start in mac80211 restart code ideally initialization is complete after the drv_start routine in mac80211 restart code ieee80211_reconfig defer calling the driver commands setup fragmentation threshold rts threshold and coverage class till drv_start routine is called v2 removed extra blank line added
bc83c78871037b67d41d6fe70c7937ea89868d3b	mtd nand mxc return error code of on error the returns an appropriate error value when it fails use it instead of the fixed error code
b26803ebfba8d81e2e8fb392c1248df2ebd1ba83	clk sunxi improve divider_clk error handling and reporting we now report a failing ioremap failing output names parsing failures in table registration and in the final step also there was a bug where clk_register_divider_table would return an err_ptr value instead of null which we were checking for we now implement proper rollback in case of an error
8d21d4c91efaed3eb60cc64d43889665a4bd7a36	apei ghes cleanup unnecessary function for lockless list we have a generic function to reverse a lockless list kill homegrown copy link boris correct commit msg
3092242caf3d25e44d34dd5cf07f4def753eea6b	get rid of references in comments now that the sysfs conversion is complete also convert all the remaining comments
c440525cb96780c369879e15083c29a479eb0598	clk remove unneeded null checks as clk_unprepare_unused_subtree and clk_disable_unused_subtree are always called with a valid struct clk
c7bd3ec0531aa636ad57ed9f27e637cbd247e64a	genirq create helper for flow handler entry check all flow handlers except the per cpu ones check for an interrupt in progress and an eventual concurrent polling on another cpu create a helper function for the repeated code pattern
f5cfc8db28e63d992d293d5b49d7cb8ec5214c56	staging octeon set sso group mask properly on cn68xx cn68xx uses sso instead of pow patchwork
e35d7223de18e01df8922676464572db8b1453a1	use wait_event_timeout for safety usage there could be the case that the page flip operation isnt finished correctly with some abnormal condition such as panel reset so this patch replaces wait_event with wait_event_timeout to avoid waiting for page flip completion infinitely and clears in exynos_drm_crtc_page_flip when exynos_drm_crtc_mode_set_commit is failed
db562e8154035b2dec9fc8e506450bc52a9adbe1	staging lustre check kzalloc return value check the return value of kzalloc before accessing the memory pointer
b226e5c411759eec29308f0ea38e918aa695dc7f	cfq-iosched print sync-noidle information in blktrace messages currently we attach a character s or a to the to represent whether queues is sync or async add one more character n to represent whether it is sync-noidle queue or sync queue so now three different type of queues will look as follows cfq1234s sync queus cfq1234sn sync noidle queue cfq1234a async queue previously classification was being printed only if group scheduling was enabled this patch also makes sure that this classification is displayed even if group idling is disabled
b77c6bcef2082a7cd96124daf15df8da5b670ebe	arm shmobile lager disable mmcif command completion signal add clk_ctrl2 mmcif on r8a7790 doesnt support command completion signal but it does implement a ce_clk_ctrl2 register platform parameters have to be added to account for these features on lager
2a89d7c2e9ed61f5e032e41f9bf1d9e4fe9fd2ea	classmate-laptop fix sparse warning __number__ as null fix the following sparse warning warning using plain integer as null pointer
972cfd5502cc87d388a6d358eae717ac48ca4817	mips pci-rt3883 drop unneeded of_node_get for_each_child_of_node performs an of_node_get on each iteration so no of_node_get is needed on breaking out of the loop when the device_node structure is saved in another variable a simplified semantic match that finds this problem is as follows expression root local idexpression child for_each_child_of_noderoot child of_node_getchild break patchwork
a600f4589fdbb51a0ad885408f996ec0f1f90be9	staging gdm724x gdm_usb added error checking in do_tx added error checking for alloc_tx_struct in do_tx
f3a6a4b6cfc80e57bf16bb12f9425bec1a5731a9	usb add helper macro for usb_driver boilerplate this patch introduces the module_usb_driver macro which is a convenience macro for usb driver modules similar to module_platform_driver it is intended to be used by drivers which section does nothing but the usb driver by using this macro it is possible to eliminate a few lines of boilerplate code per usb driver based on work done by lars-peter clausen for other busses i2c and spi
89bc856e5a7462e47d90d5a3f5396bd5795efd0c	usb dwc3 gadget dont prepare trbs if no space if trbs_left __number__ we dont have any space left in the trb ring so dont prepare anything
7087f83c4d3356da13dbcd24c08ade1a5938b6ed	remove braces in ext_sd_get_rsp fixed below checkpatch warnings braces are not necessary for single statement blocks
f994c43d19a9116727d4c228d3f13db595bff562	sunrpc clean up rpc_bind_new_program we can and should use the rpc_create_args and __rpc_clone_client to change the program and version number on the resulting rpc_client
739c3eea711a255df5ed1246face0a4dce5e589f	blk-mq add req_sync early add req_sync early so rq_dispatched in blk_mq_rq_ctx_init is set correctly
a9e64931eec57b17d1e7c71c93f8aea57a3435b2	no need to irq status in intel_breadcrumbs_fake_irq timer callback is a known context so it is correct to always disable interrupts
6807d64d21e0721e9ff8b57c62824f9bcce31a63	staging comedi cb_pcimdda remove subdevice pointer math convert the comedi_subdevice access from pointer math to array access
252e07ca5f64dd31fdfca8027287e7d75fefdab1	nl80211 sanity check the channel switch counter value the nl80211 channel switch count attribute nl80211_attr_ch_switch_count is specified as u32 but the specification uses u8 for the counter to make sure strange things dont happen without informing the user sanity check the value and return if it doesnt fit in u8
d0dcaa8d4eff40b2999d5265f2218c29e82e24cc	staging rtl8192e pointer math bug in rtllib_rx_delba the pointer math here was totally wrong so we were reading nonsense information from beyond the end of the buffer it could lead to an oops if that memory wasnt mapped the preasoncode pointer is assigned but never used so i deleted it with-fix-from mateusz kulikowski gmail.com
13a3328638dd009e76d4bb86e18dc8f3ae4f11dd	dmaengine tegra-apb avoid unnecessary channel base address calculation everytime a dma channel register is accessed the channel base address is calculated by adding the dma base address and the channel register offset avoid this calculation and simply calculate the channel base address once at probe time for each dma channel
b3c17f10fa2cfc29cf35e4821275e046e725213e	kvm s390 wake up when the vcpu cpu timer expires when the vcpu cpu timer expires we have to wake up just like when the ckc triggers for now setting up a cpu timer in the guest and going into enabled wait will never lead to a wakeup this patch fixes this problem just as for the ckc we have to take care of waking up too early we have to recalculate the sleep time and go back to sleep please note that the timer callback calls kvm_s390_get_cpu_timer from interrupt context as the timer is canceled when leaving handle_wait and we dont do any vcpu cpu timer in that function we can be sure that we will never try to read the vcpu cpu timer from the same cpu that is currentyl updating the timer deadlock
f55889128a776b51581394b20abd0b470304cf95	mac802154 common tx error path this patch introduce the common error path on failure of tx by inserting the label err_tx
35066c0d798906d46c352c3f12844d2a162d057d	export confirm_error_lock this exports so that can be used to freeze the affected pe in pci surprise hot remove path
f02ae59b1230853693d09a1003075d671f1a6f7d	net rfkill gpio clean up clock handling use a simple flag to see the state of the clock and make the clock available even without a name also get rid of have_clk dependency
30df2d1879ff65af7b269ee94e9c7fc276b54105	iio dac mcp4725 fix warnings ptr_err should access the value just tested by is_err generated by
d93f27b732062bbd7f93275613fc3f4081cda381	staging most use list_first_entry instead of list_entry this patch replaces list_entry with list_first_entry as it makes the code more clear done using coccinelle expression e list_first_entrye list_last_entrye
0cdd192cf40fb6dbf03ec3af1c670068de3fd26c	dont try to resolve kprobe faults from userspace this commit commit author masami hiramatsu hitachi.com date thu apr __number__ __number__ call exception handlers directly from appears to have inadvertently dropped a check that the int3 came from kernel mode trying to dereference addr when addr is user-controlled is completely bogus link
7134b3e941613dcb959b4b178cc4a35e45cbbc0d	add enqueue_noclock to enqueue_restore in all cases enqueue_restore should also have enqueue_noclock because dequeue_save will have done an update_rq_clock
28538df0389a59ede9ccd6f327d2031f0044db87	gpio mpc8xxx dont allow input-only pins to be output for mpc5121 add a reject if an input-only pin is requested to be output see in the refman also rewrite mach-specific quirk setup to consume less lines which scales better fixed build error
c871bd0b2e627ff387d0ff055d8175879c80d01f	asoc core fix splitting of log messages dont wrap log messages over multiple lines it makes them hard to grep for
ac61d19559349e205dad7b5122b281419aa74a82	scsi set correct completion code in scsi_send_eh_cmnd returns __number__ for successful command submission so we need to set the correct scsi midlayer return value when calling scsi_log_completion
e3818697e1d9140d0b990fecf4429d40c41ca0b5	flush untouched framebuffers before display on on a non-llc system the objects are created with cache_none and so the transition to uncached for scanout is a no-op however if the object was never written to it will still be in the cpu domain having been zeroed out by shmemfs those cachelines need to be flushed prior to display reported-and-tested-by vito caputo link cherry picked from commit
8c0a4273306d2bf95d2448ff457847d7c59bec52	remove empty function after the switch to devm_ functions and the removal of rtc_device_unregister the remove function does not do anything delete it
5b40db99099ddebe31e9b1b759894cf09c0c6679	null_blk use device addressing mode the linear addressing mode was removed in make null_blk instead expose the ppa format geometry and support the generic addressing mode
e2934ed183b94cff7626a517877ecc9bbe82cdc8	scsi lpfc fix lpfc_wwn_set return code check when i reversed the patch to re-add the lpfc_soft_wwn parameter feature it re-added code that had a long-standing bug thats what i get i guess as dan carpenter pointed out error checks looked at wrong polarity __number__ is success is failure updated checks
886aa71bd4c3d22b1879cae3a4cd60d09b3fc25f	media v4l2 platform rcar_jpu switch off clock on release later give jpu peripheral chance to finish current job dont switch off clock until context release
034633ccb24d675850f99bf85c1c5880c831e4b6	printk return really stored message length i wonder if anyone uses printk return value but it is there and should be counted correctly this patch modifies log_store to return the number of really stored bytes from the text part also it handles the return value in vprintk_emit note that log_store is used also in cont_flush but we could ignore the return value there the function works with characters that were already counted earlier in addition the store could newer fail here because the length of the printed text is limited by the cont buffer and dict is null
0fc9fd4016ae03b0f5da5d7156644755c94783c4	scsi hpsa use check_signature use check_signature to find a signature in the mmio address
499d05ecf990a7a7bbf9e0a273f9969f8ec69efc	mm make task in balance_dirty_pages killable there is no reason why task in balance_dirty_pages shouldnt be killable and it helps in recovering from some error conditions like when filesystem goes in error state and cannot accept writeback anymore but we still want to kill processes using it to be able to unmount it there will be follow up patches to further abort the generic_perform_write and other filesystem write loops to avoid large write sigkill combination exceeding the dirty limit and possibly strange oom
9e210be68a396da0f1d030289c323f1785f29d33	simplefb use write-combined remapping framebuffers shouldnt be cached and it is usually very uncommon to read them therefore use ioremap_wc to get significant speed improvements on systems which provide it on all other systems its aliased to ioremap_nocache which is also fine
06c5e362ce1fbb29cb9505b4a1191d9489d8bdd2	serial tegra remove unused variable the local mcr variable is never used in the tegra_uart_set_mctrl function so it should be removed
f107ae11f04aa32c9ae1e6629e9a5b886a7034bd	power_supply replace strict_strtol with kstrtol the usage of strict_strtol is not preferred because strict_strtol is obsolete thus kstrtol should be used
ce611ef81ff73fe64962fb1b22d8279aab205ad3	improve pcbr debug information always print the final pcbr register value on both vlv and chv and also tell us whether the bios was a good citizen or not
aa690a9edc5750bb5955b524dd7db842e36004eb	drm atmel-hlcdc add the missing drm_atomic flag the atmel-hlcdc driver already supports atomic operations add the missing drm_atomic flag to expose the atomic features to userspace
9640388b63556b4cfecbb5aaf91a5c99d272f429	ftrace fix function tracing recursion self test the function tracing recursion self test should not crash the machine if the resursion test fails if it detects that the function tracing is recursing when it should not be then bail dont go into an infinite recursive loop
57f3224c3f838844cdae5e4a9d63e03152013f9a	drbd convert to vzalloc
466bc7f2307e47ad53c0b520c56b0a4c45b6d0a2	staging rtl8192e fix sparse warning of cast to restricted __le32 in this patch fixes the following sparse warnings in warning cast to restricted __le32 warning cast to restricted __le32 warning cast to restricted __le32
d930655d4a25021b70285976745e6eee107ac0bb	ftgmac100 work around hw bug in runt frame detection the hw incorrectly calculates the frame size without the vlan tag and compares that against __number__ it will thus flag frames with a vlan tag as frames runt packets which well then drop thus we end up dropping arp packets on vlans it does that whether vlan tag stripping is enabled or not this works around it by ignoring the runt error bit of the frame has been vlan tagged and is at least __number__ bytes
ecaa80fbe589d2638b8a8a075916b1862a1124e2	switch hpux_getdents to fget_light
895a11b868347ca8e287f152f7816862ad4b179d	btrfs reada simplify processing no need to decrease in __readahead_hooks internal and reada_extent_put reada_extent_put have no chance to decrease in free operation because reada_extent have additional refcnt when scheduled to a dev we can put inc and dec operation for to one place instead to make logic simple and safe and move useless to a bool flag instead
72835ee6b99b2254fe577b4c9922fada00e1e79b	unused enum macros and function declaration
5a7bbe86b0b99b1075b97d812946a84ed5fda9ff	video au1100fb remove casting the return value which is a void pointer casting the return value which is a void pointer is redundant the conversion from void pointer to any other pointer type is guaranteed by the c programming language
8a00785edd166361e08c6cf710bf3acdd6038005	can janz-ican3 fix type mismatch in assignment return type of wait_for_completion_timeout is unsigned long not int this patch removes the type mismatch by moving the call into the condition
ad1d219974a3d13412268525309c5892f6779ae9	set only after rcs the initialized flag is used to specify a context has been initialized and its context is safe to load ie the state is setup properly with full ppgtt we emit the address space loads during context switch and this currently marks a context as initialized with full ppgtt patches if a client first emits a batch to then later rcs the code will mistake the context as initialized and try to reload an uninitialized context __number__ context __number__ blit context marked as initialized but isnt __number__ context __number__ render loads random state from step __number__ it is really easy to hit this with a planned upcoming patch which makes default context reuse possible note this should only effect full ppgtt branches ie current drm-intel-nightly thanks to chris for helping me track this down danvet simplify the failure scenario in the commit message according to chris review a bit
2f35fb3c8a6018a0a5fe4a7fb0948b853c157256	drivers sh enable pm runtime for new r-car gen2 socs the pm runtime code should also be enabled for r8a7792 r-car v2h r8a7793 r-car m2-n r8a7794 r-car e2
63bb5c390bf2f975f0936b6523af6784af811b49	switch to new-style timer macros
0e1147b001793593624e80b3c0a1790822b6baca	ext4 add action of moving index in ext4_ext_rm_idx for punch hole the old function ext4_ext_rm_idx is used only for truncate case because it just remove last index in extent-index-block when punching hole it usually needed to remove middle index therefore we must move indexes which after it forward i create a file with __number__ depth extent tree and punch hole in the middle of it the last index in index-block strangly gone so i find out this bug
7f4f6e0a3f6db9c214de38c792c483b8076bcd6a	btrfs only update disk_i_size as we remove extents this fixes a problem where if we fail a truncate we will leave the i_size set where we wanted to truncate to instead of where we were able to truncate to fix this by making btrfs_truncate_inode_items do the disk_i_size update as it removes extents that way it will always be consistent with where its extents are then if the truncate fails at all we can update the in-ram i_size with what we have on disk and delete the orphan item thanks
d670ffd87509b6b136d8ed6f757851a8ebe442b2	free the pte page table on collapse for thp page cache with thp page cache when trying to build a huge page from regular pte pages we just clear the pmd entry we will take another fault and at that point we will find the huge page in the radix tree thereby using the huge page to complete the page fault the second fault path will allocate the needed pgtable_t page for archs like ppc64 so no need to deposit the same in collapse path depositing them in the collapse path resulting in a pgtable_t memory leak also giving errors like bug non-zero nr_ptes on freeing mm __number__ link
f27792f5b7e0ba8407fcdeabb5db778fe929ab78	udf remove useless check in udf_adinicb_write_begin as al properly points out len is guaranteed to be smaller than page_size when we reach udf_adinicb_write_begin as otherwise we would have converted the file to the normal format
0b672e9b21942fdfa63519fb66df4a40d6fafe35	extcon max8997 use devm_kzalloc devm_kzalloc is a device managed function it makes error handling and cleanup code a bit simpler
4480361c3c592fcbce3ef74e030719f0715e3a7e	tracing remove trace_event_type enum definition trace_event_type enum is not used at present remove it link
d763448286377b8a0e3f179372e9e292bef3c337	btrfs update to use fs_state bit now that we use bit operation to check fs_state update btrfs_free_fs_roots checker otherwise we get back to memory leak case
ff14c1d01576fb839a925a42596582f6c68a1a1a	x86 mm use max_dma_pfn for zone_dma on use max_dma_pfn which represents the __number__ mb isa dma limit on x86 just like we do on link
42bdf991f4cad9678ee2b98c5c2e9299a3f986ef	kvm x86 fix maintenance of xcr0 state emulation of xcr0 writes zero guest_xcr0_loaded variable so that subsequent vm-entry reloads cpus xcr0 with guests xcr0 value however this is incorrect because guest_xcr0_loaded variable is read to decide whether to reload hosts xcr0 in case the vcpu thread is scheduled out after the guest_xcr0_loaded __number__ assignment and scheduler decides to preload fpu switch_to __switch_to __math_state_restore restore_fpu_checking fpu_restore_checking if use_xsave fpu_xrstor_checking xrstor64 with cpus xcr0 guests xcr0 fix by properly restoring hosts xcr0 during emulation of xcr0 writes
c93a98c9024d687e91a3414cb3d5f74d0abf3068	arm omap3 clock data treat all am35x devices the same the init for specific clocks depends on the ordering of cpu_is checks is error prone and confusing there are __number__ separate checks for cpu_is_omap3505 remove the checking since ck_3505 flag is not used and treat all am35x clocks the same this means that the sgx clock the only am35x clkdev not currently flagged for __number__ will now be registered on __number__ but that is harmless that can be cleaned up when the clkdev nodes are removed in favor of them being registered by hwmod
567627bfb2b5837315fe467e52c1bbca634acc00	media mn88473 check if firmware is already running before loading it
0ebeb79ce920bed3a4a55113534951d95a444fbb	smp remove unused list_head from csd now that we got rid of all the remaining code which fiddled with lets remove it
5e8599d21bdd8010e43f407c0f0cbef32f23bea8	fix whitespace related errors fixes the following types of issues error space required after that warning please no spaces at the start of a line
47f698a9f2fc49711f3a43ca6713e83f0e76ea5e	use vm_iomap_memory use vm_iomap_memory instead of io_remap_pfn_range vm_iomap_memory gives us much simpler api to map memory to userspace and reduces possibilities for bugs
76e20522b709f3772e415d70b108028454a86ad5	perf script perl do error checking on new backtrace routine this ended up triggering these warnings when building on ubuntu in function perl_process_callchain error value computed is not used error value computed is not used error value computed is not used error value computed is not used error value computed is not used cc1 all warnings being treated as errors mv cannot stat no such file or directory make4 error __number__ fix it by doing error checking when building the perl data structures related to callchains
48a8c3943d1010c81d8144cc773f81c30bf59246	asoc dapm convert pin switches to use snd_soc_card since the addition of the non-codec control adds card controls like the dapm pin switch have been broken as they are expecting the private data for the control to be the codec but its now the card fix that for the pin switches an audit of other drivers is required
f615bca4ccb9a91b33f0d378503b070fad97e181	remove arch-specific pcibios_enable_device on systems with pci_probe_only set we rely on bar assignments from firmware previously we did not insert those resources into the resource tree so we had to skip pci_enable_resources because it fails if resources are not in the resource tree now that we insert resources even when pci_probe_only is set we no longer need the arm64-specific pcibios_enable_device remove it so we use the generic version bhelgaas changelog
c300366b6b978fcb84f8eeb6205e5980cc0c40c3	sfc constify pci_error_handlers structures this pci_error_handlers structure is never modified like all the other pci_error_handlers structures so declare it as const done with the help of coccinelle
dfc9ef2fb0ba01ad8256f4dfa9a8e8fcc6288fc4	set in common ring setup code eventually we want to scale the ring size depending upon available gtt space for now just consolidate this instead of replicating it over all ringbuffer templates
d3f02d60eecfc43088a3cb95d35e0cf75b4b8266	alsa read the cached pinctl value in fixups instead of reading the value from the codec at each time
4df2cce4722d35eb35bb9371e7c9a600a84558f9	power supply sbs-battery dont ignore the first external power change a mechanism to ignore the first external power change notification was put in place years ago to ignore the power_supply_register notification however this doesnt apply to the current situation anymore as the first notification is always the result of a legitimate power change this removes this deprecated mechanism which puts back the drivers state machine to a sane state an ignored first notification previously caused a status inversion
a4b6fec977020a508ff04b05f0fa01221a4ecf29	thermal fix bug on cpu_cooling cooling devices id conflict problem this patch fixes small bug on cpu_cooling cpu cooling device has own id generated with idr mathod however in the previous version it swapped to all same id at last stage of probing as __number__ this makes ids collision and also occures error when it releases that id
486d8b9f88cd0871a716e2f16873e811ee6c1ece	use
01a7a9fef44e5b2f994174c2c1fda80178214d8d	i40e removing unnecessary code which caused supported link mode bug removing this code which wasnt allowing to show up in the supported link modes for phys change-id iada2eafa7ef6b4bac9a2a1380ff533ae5de51e1d
d17e53bdcd72fa06e06f7408779fb17dcefdb930	bnx2 advertise nothing when speed is forced the current code does not reset the advertisement register when the speed is forced leaving the default advertisement value of __number__ mbps this does not work with some link partners when the next patch enables auto-mdix set advertisement register to __number__ if the speed is forced
4927c3f1c48fff3473b684d2dac5b4e432861b4e	media davinci vpbe fix build error when config_video_adv_debug is enabled fix build error when config_video_adv_debug is enabled declare the vpbe_dev variable
1ad2f8932a72bf375361727949ced2cb4e8cfcef	nvme handle bios that contain non-virtually contiguous addresses nvme scatterlists must be virtually contiguous like almost all however when the filesystem lays out files with a hole it can be that adjacent lbas map to non-adjacent virtual addresses handle this by submitting one nvme command at a time for each virtually discontiguous range
46f21949eb77a9dfc14a00071539929d11bcf69b	usb ohci-platform move platform_data checks into the probe function this puts all of the platform_data checks in the same place and removes the need for a custom callback
f5ae371aca34bd0660a75f8838198466e9d5166c	media em28xx respect the message size constraints for i2c transfers the em2800 can transfer up to __number__ bytes per i2c message all other chips can transfer at least __number__ bytes per message i2c adapters should never split messages transferred via the i2c subsystem into multiple message transfers because the result will almost always not be the same as when the whole data is transferred to the i2c client in a single message if the message size exceeds the capabilities of the i2c adapter should be returned
2a0ff7a602714990b10a8749e908dad48401138e	dmaengine intel_mid_dma error path fix add missing iounmap in error path
7a11e2058f02feb6884efb067f328012c318a13f	rcu move tiny_preempt_rcu away from raw_local_irq_save the use of raw_local_irq_save is unnecessary given that local_irq_save really does disable interrupts also it appears to interfere with lockdep therefore this commit moves to local_irq_save
c0fb754bd81fafcd63644d5482ba9669d3e4fe9c	brcmsmac null dereferences in brcms_c_detach_mfree the brcms_c_attach_malloc function can call this with a null or also i threw in a bonus cleanup by deleting an obvious comment and a no-op null assignment
a89be2cc51f6602e803f2f9a9c8c4f59a0bd58b3	iser-target convert to ib_alloc_mr
1e82b94790709fb2a22d16d53bb04d751fb3878d	show actual ending addresses in efi_print_memmap adjust efi_print_memmap to print the real end address of each range not __number__ byte beyond this matches other prints like those for srat and nosave memory while investigating grub persistent memory corruption issues it was helpful to make this table match the ending address convention used by the kernels table prints bios-e820 mem __address__ reserved the kernels nosave memory prints pm registered nosave memory mem __address__ the kernels acpi system resource affinity table prints srat node __number__ pxm __number__ mem __address__ grubs lsmmap and lsefimmap commands reserved __address__ __number__ uc wc wt wb nv the uefi shells memmap command reserved __number__ __number__ __number__ for example if you grep all the various logs for __address__ you wont find the kernels line if it uses __number__ also change the closing to to match the opening old efi mem61 persistent memory __number__ new efi mem61 persistent memory __address__ link
716f479d279fb456f58be44180d7479da75e5a4e	hugetlb_cgroup convert away from in preparation of conversion to kernfs cgroup file handling is being consolidated so that it can be easily mapped to the seq_file based interface of kernfs all users of can be easily served usually better by seq_file and other methods update hugetlb_cgroup_read to return u64 instead of printing itself and rename it to hugetlb_cgroup_read_u64 this patch doesnt make any visible behavior changes
72523425fb434e81c0c9f611bd880ce339c4e06b	fuse dont bug on no write file dont bug if theres no writable files found for page writeback if ever this is triggered a warn_on helps debugging it much better then a bug_on
77cb8ee67582ad815310c4544c7c408056fe59bf	clk imx27 add missing of_node_put for_each_compatible_node performs an of_node_get on each iteration so a break out of the loop requires an of_node_put the semantic patch that fixes this problem is as follows local idexpression n expression e of_node_putn e n of_node_putn break when n
790eff4429e45b850859f1bb8117846dafd5f86a	bluetooth use gfp_kernel in mgmt events functions cmd_status cmd_complete and mgmt_event functions are executed in process context and they are not called inside atomic sections thus they should use gfp_kernel for memory allocation instead of gfp_atomic
5086c5082f1e31b332b2be3662cd75cd3e353bdc	fixed linebreak and printk issue fixed a linebreak within an error message string coding style issue reported by and dev_err format parameters
41c4d25f78c01ede13efee1f2e979f3f35dd26f6	mm update file times from fault path only if is not set filesystems wanting to properly support freezing need to have control when file_update_time is called after pushing file_update_time to all relevant implementations we can just stop calling file_update_time when filesystem implements
adf67abff09110b527431512bf05461a60ef2a72	use irq_flags instead of triggering the drm_handle_vblank should be called whenever be vsync te interrupt means vsync on i80 interface
6db685c35e89cc9b639185349498690ce9157e55	staging addac fix line over __number__ characters fix issues with line over __number__ characters in
cdfc8ed6904d7b0c0ca23d619b387b32070703b1	powerpc remove unused function trace_syscall this function has been unused since commit powerpc merge enough to start building in so remove it
f60f35609f89ef4fee73776bc1ef697923251995	media cec fix race between configuring and unconfiguring this race was discovered by running cec-compliance with the cec module debug parameter set to __number__ suddenly the test would fail it turns out that this happens when the test configures the adapter in non-blocking mode then it waits for the cec_event_state_change event and once the event is received it unconfigures the adapter what happened was that the unconfigure was executed while the configure was still transmitting the report features and report physical address messages this messed up the internal state of the cec_adapter the fix is to transmit those messages with the mutex held this will just queue them up in the internal transmit queue and not actually transmit anything yet only unlock the mutex once everything is done the main thread will dequeue the messages from the internal transmit queue and transmit them one by one unless an unconfigure was done and in that case any messages are just dropped
fb1a38a92ba8ed98f754aeaf9aa9ea5ea3323a23	clear shared dpll based on old state v2 atomic resume was preserving the dpll state because it was required for clearing pll state correctly if we look at the old_crtc_state for pll to clear this is not needed and the hack can be removed changes since v1 rename dpll variable to old_dpll ville
1cc8e3458b5110253c8f5aaf1890d5ffea9bb7b7	drivers of of_reserved_mem fixup the alignment with cma setup there is an alignment mismatch issue between the of_reserved_mem and the cma setup requirement the of_reserved_mem will try to get the alignment value from the dts and pass it to __memblock_alloc_base to do the memory block base allocation but the alignment value specified in the dts may not satisfy the cam setup requirement since cma setup required the alignment as the following in the code align page_size maxmax_order __number__ pageblock_order the sanity check in the function of rmem_cma_setup will fail if the alignment does not setup correctly and thus cma will fail to setup this patch is to fixup the alignment to meet the cma setup required mailing-list-thread
af3d7c1e55a6c3ce92ac86d5e1a3b606028c0145	smsc95xx fix error checking of usbnet_resume without this patch the two lines below wont ever execute
756b50895f8d47499b38b3f7328347f46f10a673	net phy micrel fix checkpath errors checkpatch spotted a few spaces vs tabs errors fix them
c95ea16254c7affa1654804c8542d1f054a40f9f	fix connector detect when there is no hpd gpio some platforms may not have a hpd gpio line to detect hot plug signal from the connector they need to rely only on reading reg_hdmi_hpd_int_status for hpd modify hdmi_connector_detect logic such that it checks for hpd only using the status register if there is no hpd gpio
f97ef759999485df485fe19a440d6af02d561140	fix possible null dereference if mmu_find_ops returns null then we are allocating memory for gms using kzalloc but kzalloc can return null and we were dereferencing gms in gru_dbg
b472c2faf471b72e7f3ffe35200dfb3d227487b7	pm domains handle errors from genpds callback the optional genpds callback is invoked from __pm_genpd_add_device lets add error handling from the response from this callback and propagate the error code when __pm_genpd_add_device is invoked through the generic of-based pm domain look-up path the device is being probed returning an error will mean the device wont be attached to its pm domain errors of get special treatment and is propagated to the driver core therefore this change also enables the callback to be able to request for a deferred probe sequence
64bb81383afed5e87d54d8102baeebc9aeb97b8f	scsi mpt2sas set the phy identifier of the end device to the phy number of the parent device it is linked to the phy_identifier inside the routine _transport_set_identify is set to this returns the phy number of the parent device this device is linked to
beb2ced51b70a6cbccd8676b450e282fecf65565	add uvd doorbell initialization for sriov add uvd doorbell for sriov
d891fa70876b37941a5c5bed813e73beb53ebcf7	null_blk fix softirq completions for queue_mode __number__ only blk-mq completions have payload attached to the request for request_fn mode we have stored it in this fixes an oops with and softirq completions
ba1066d2e9686a5c96c5c0dfcbda7f874fa7b88d	media tuner-core map audmode to stereo for radio devices fixes a v4l2-compliance error setting audmode to a value other than mono or stereo for a radio device should map to mode_stereo the spec specifies that for radio devices only mono and stereo audmodes are valid if the user specifies another audmode in v4l2_tuner then that should be mapped to valid audmode that didnt happen here note that tuner drivers might decide to limit the possible audmode even further if it only supports mono in that case the tuner driver can set audmode to mono however that new value wasnt copied back to and that has been fixed as well in this patch
a96c92b69d48a4b69f367f229aa82ce58938aba9	video fbdev arkfb suppress build warning this patch fixes following build warning in function warning cast to pointer from integer of different size void __iomem
370d550ea4eda6889ae2fb8a5e9845d2276f1567	scsi qla2xxx fix for continuous rescan attempts in arbitrated loop topology stale information in the temporary fcport created in qla2x00_configure_local_loop causes qla2x00_get_port_database call to fail this reschedules scan which gets stuck continuously in the rescheduling-of-scan loop due to the failure
28c0ada62d39eaafef03d88a4e6f4c5bcb6e1b6c	extcon optimising the check_mutually_exclusive function rather than re-inventing the wheel we can use the hamming function to calculate the number of bits set to check for violation of exclusivity
8e428d5040629dbbdfd6610026cb0b15b93830e0	media coda add coda_estimate_sizeimage and use it in set_defaults call coda_estimate_sizeimage from both try_fmt and set_defaults to avoid this v4l2-compliance warning on the decoder video device g_fmt __number__ __number__ __number__ __number__ __number__ __number__ __number__ feedcafe __number__ __number__ __number__ __number__ __number__ __number__ __number__ feedcafe fail video capture s_fmtg_fmt g_fmt
e58da16f716c0e7822e64a5d8a1f413041bc912e	mips bcm47xx rename early_nvram_init to nvram_init patchwork
d1e81428826221d7ff8e4d83db784d099cd232a7	asoc core clean up dapm before the card debugfs both the card and dapm cleanups recursively delete their debugfs directories since the dapm debugfs subdirectory for the card is located within the card debugfs this means we end up trying to double free the dapm subdirectory reorder the cleanup to free the card debugfs after weve cleaned up dapm and it has deleted its own subdirectory
c2c6629ba3f57d19b1385554b7fadb671bc7ab30	e1000e cleanup remove e1000_force_speed_duplex remove the function e1000_force_speed_duplex and replace the single call to it with the same function pointer that it would call the function pointer is always set so there is no risk of a null pointer dereference
0f7aa005c85917f114c376e937d88f5d941fb389	arm pm use hwmod name instead of dev pointer replace the struct device parameter of omap2_set_init_voltage by the hwmod name it will avoid having to store explicitely the device pointer into a static variable moreover it will be a little bit more scalable if we introduce new dvfs devices
74727c571517692ae24d0562676f2c61a86b9090	lp8727_charger use devm_kzalloc use devm_kzalloc rather than to make the private data simpler
3380f4589f6d9725e275525fd0580c8ee2b5cbbc	blk-mq remove unused blk_mq_clone_flush_request prototype
50c7b948adbd1f8f0475fa0c92abb51c8a49f847	nfsd minor consolidation of mach_cred handling code minor cleanup no change in functionality
534123f458f196bcc269f97d20ccf125925c2e7b	perf tools add basic event modifier sanity check updating event parser to allow any non zero string containing ukhpgh characters for event modifier the modifier sanity is checked later in parse-event object logic the check validates modifier to contain only one instance of any modifier apart from p present v2 added length check suggested namhyung kim link
667f4bab81ea8357d260aa14bb6fb1a4834248d5	hwmon adm9240 handle temperature readings below __number__ unlike the temperature thresholds the temperature data is a signed value this allows and additional __float__ degrees of precision on the reading but makes handling negative values slightly harder in order to have sign-extension applied correctly the value is stored in the upper bits of a signed value when presenting this in sysfs the value is shifted and scaled appropriately
cbb2864aa48977205c76291ba5a23331393b2578	xfs add pluging for bulkstat readahead i was running some tests on bulkstat on crc enabled filesystems when i noticed that all the io being issued was in size regardless of the fact taht we are issuing sequential buffers for inodes clusters the io size should be for __number__ byte inodes and for __number__ byte inodes but this wasnt happening blktrace showed that there was an explict plug and unplug happening around each readahead io from _xfs_buf_ioapply and the unplug was causing the io to be issued immediately hence no opportunity was being given to the elevator to merge adjacent readahead requests and dispatch them as a single io add plugging around the inode chunk readahead dispatch loop in bulkstat to ensure that we dont unplug the queue between adjacent inode buffer readahead ios and so we get fewer larger io requests hitting the storage subsystem for bulkstat
7264abc7000d601726aefb05189ea524ee3995ba	spi rspi fixes bogus received byte in qspi_transfer_in in qspi_transfer_in when receiving the last n or len bytes of data one bogus byte was written in the receive buffer this code leads to a buffer overflow jffs2 jffs2_scan_eraseblock magic bitmask not found at __number__ instead jffs2 jffs2_scan_eraseblock magic bitmask not found at instead the error message above happens when trying to mount unmount and remount a jffs2-formatted device this patch removed the bogus write to fixes spi rspi supports buffer for dual and quad and here is geerts comment spi rspi fix bogus received byte in qspi_transfer_in when there are less than qspi_buffer_size remaining bytes to be received qspi_transfer_in writes one bogus byte in the receive buffer possibly leading to a buffer overflow this can be reproduced by mounting unmounting and remounting a jffs2-formatted device causing lots of warnings like jffs2 jffs2_scan_eraseblock magic bitmask not found at __number__ instead remove the bogus write to fix this
a500a185462d08f63ec3c8a0ba3185d1b84cb85d	media sh_mobile_ceu_camera use managed memory and resource allocations use managed allocations to simplify error handling and clean up paths
076e29f225bb7a5d97fa95b78b8dca61599b4198	keep tidy something already got misplaced although its from a patch from before paulos cleanup move it to the right spot v2 remove the line to keep a neat block requested by paulo
d020be9246735ff1fc49b99bea0574a597592709	hid wiimote add force-feedback support the wiimote has a single rumble motor this adds force feedback support for wiimote devices with ff_rumble the rumble motor is very simple and only supports an switch so no complex ff-effects are supported this also removes the event callback that was registered before but unused the ff-device overwrites this callback anyway
964c150e99690f2cd1c05bdad62eb0bf7f8904ac	link parent ccw device during ur device creation when creating the virtual unit record ur device specify the parent ccw device
ad080d7916a4701fda29a442a69be4fd54d19a2e	mmc sdhci add irq wake up support dont disable sd host irq during suspend if it is wake up source enable wakeup event during suspend
cba1e47f4d641459e05eacaaa50a26d5e3d28818	scsi qla2xxx move initialization of some variables before iospace_config some variables need to be initialized before we config pci config space or else strange firmware initialization errors may occur
d2ca24c7c32bf35d150e58e5ca6cd24fced1df0f	staging octeon-ethernet allow to use only __number__ cpu for packet processing module parameter max_rx_cpus has off-by-one error fix that
41a9f1f6b38664fc08431674d87871a57d763be1	cifs avoid extra allocation for small keys the keytype always allocates memory to hold the payload from userspace in the common case where were translating a sid to a uid or gid were allocating memory to hold something thats less than or equal to the size of a pointer when the payload is the same size as a pointer or smaller just store it in the union member instead that saves us an extra allocation on the sid_to_id upcall note that we have to take extra care to check the datalen when we go to dereference the pointer in the union but the callers now check that as a matter of course anyway
d49b1c254c997195872a9e8913660a788298921e	correct zram_zero flag bit position in struct zram_table_entry the element contains obj size and obj zram flags bit __number__ to bit zram_flag_shift __number__ represent obj size and bit zram_flag_shift to the highest bit of unsigned long represent obj zram_flags so the first zram flagzram_zero should be from zram_flag_shift instead of zram_flag_shift __number__ this patch fixes this cosmetic issue also fix a typo page in now accessed page is now accessed
206a443fc44f63d378c22cbec5d3c8e2d75c498c	staging brcm80211 rename key endian conversion functions the key endian conversion functions in have been renamed as the old names were misleasing
0f82b6cf76516063fe26dac15e93544387c681eb	regulator dummy specify a struct device this will be becoming mandatory
11bce6459fa3b9d7768a0a0d71c695e85f398c55	fix error return code initialize return variable before exiting on an error path a simplified version of the semantic match that finds this problem is as follows return ret __number__ when ret e1 when when ret e2 when forall return ret
0519c520dc38e9950f4032d0f41f2b72b2c3c940	race hazard avoidance in user sdma driver set the errcode before the state and add the smb_wmb to avoid a potential race condition with the user
c2dea97429788d920bf51d33cba6c4cf72617726	staging comedi amplc_dio200 replace macros with inline functions replace the is_isa_board and is_pci_board functionlike macros with inline functions is_isa_board and is_pci_board also call is_pci_board in dio200_find_pci_board instead of an explicit comparison operator
13712713caba0c1b8c2c0070a4c1f4487def8dee	xfs eliminate the pos variable in xfs_file_dio_aio_write
49fd46d2ffc92de3f4bd2e337f60b8b6052dc8b6	alsa snd-usb drop unused varible assigments dont assign len in cases where we dont make use of the returned value
12db14163e6beb20398499d523685c05d3fb07f0	staging comedi ni_mio_common remove forward declaration __number__ move ni_rtsi_insn_bits to remove the need for the forward declaration
5f371582180572f06f74dcac55c54d2072e672bc	rtc rtc-m48t59 remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure since commit device-core ensure drvdata null when no driver is bound thus it is not needed to manually clear the device driver data to null
7920aa5a9d841fc7a10ff53a5a775f821d7a6ba1	fix condition and vs or the if condition isnt right because was intended instead of but actually p is the list cursor and so its always non-null and we can just remove that bit we can remove the another similar check as well
253beebd5a255e07d6a8b65515491f33664e82a2	btrfs double unlock bug in error handling the caller expects this function to return with the lock held and releases it immediately on error
1ea146a7dc9acbdbecadf9adc9eb2a75fa722a3f	tty serial constify dev_pm_ops structures declare dev_pm_ops structures as const as they are only stored in the pm field of a device_driver structure this field is of type const so dev_pm_ops structures having similar properties can be declared const too size details after cross compiling the file for blackfin architecture file size before text data bss dec hex filename __number__ __number__ __number__ __number__ f44 file size after text data bss dec hex filename __number__ __number__ __number__ __number__ f44
e074a2e2874aaa96da3e54d98ecb886201d96435	greybus es2 rename misnamed cport_max into cport_count rename the misnamed macro cport_max into cport_count cport_max could let people think that the macro is holding the value of the last cport id usable
1d7b47a3c78e0b5391a18246f9637752a4565e5b	net emac remove field for driver remove field if calls are used which set it automatically generated by
3ba316037470bbf98c8a16c2179c02794fb8862e	xfs fix memory reclaim deadlock on agi buffer note xfs_iget can be called while holding a locked agi buffer if it goes into memory reclaim then inode teardown may try to lock the same buffer prevent the deadlock by calling radix_tree_preload with gfp_nofs
4ab799df6d71694ce091780af31484d6a63c2939	staging dwc2 remove specific fifo size constants a generic set of constants is defined which applies to all fifo size and offset registers it is already used for both the gnptxfsiz and hptxfsiz registers but it applies to dptxfsizn as well some of these also had specific constants defined this patch removes the specific constants and documents to use the generic constants note that the removed constants werent actually used instead most of the related code uses hardcoded masks and shifts but given that subsequent patches will be moving that code around and introducing the constants in the process this patch leaves those untouched also note that the grxfsiz register also contains a fifo size but there is no corresponding start address register it is always the first fifo in memory the layout of the grxfsiz register is different and cannot use the same constants
50e92b3c971129c96a5fffb51dd42691e2ee4004	kvm fix __set_bit race in mark_page_dirty during dirty logging it is possible that the __set_bit in mark_page_dirty is called simultaneously on the same region of memory which may result in only one bit being set because some callers do not take mmu_lock before mark_page_dirty this problem is hard to produce because when we reach mark_page_dirty beginning from tdp_page_fault mmu_lock is being held during __direct_map making kvm-unit-tests dirty log api test write to two pages concurrently was not useful for this reason so we have confirmed that there can actually be race condition by checking if some callers really reach there without holding mmu_lock using spin_is_locked probably they were from kvm_write_guest_page to fix this race this patch changes the bit operation to the atomic version note that nr_dirty_pages also suffers from the race but we do not need exactly correct numbers for now
2c0027cd54cc3ed856e87d9aeddb6ef00f5f17f4	inetpeer remove dead code remove various inlined functions not referenced in the kernel
1ae6d00ad05730bca283dc09e7a9c162c2f22b01	bluetooth hci_qca use setup_timer kernel api instead of init_timer replace init_timer function with setup_timer reported by coccinelle
1882c19c2d5aacc839fc3b78cf0becb5409d7bbb	staging vt6656 s_nsbulkinusbiocompleteread remove replace with
2de6a3c73180ef4071b45185756be51a6c767924	ocfs2 return the physical address in ocfs2_write_cluster to support direct io in ocfs2_write_begin_nolock ocfs2_write_end_nolock direct io needs to get the physical address from write_begin to map the user page this patch is to change the arg phys of ocfs2_write_cluster to a pointer so it can be retrieved to write_begin and we can retrieve it to the direct io procedure
2a91a6d1422f6dc3cb27689e18e16b8c98ec1c73	staging dt3155v4l remove use of __devinit config_hotplug is going away as an option so __devinit is no longer needed
1e74a324465e5a4f8e3ee7c423aef92c54de8a72	initialize pps timestamps on the pps timestamp initialization was accidentally lost on in commit a4a5d2f8a96e09844a91469e889f15bd5e927399 author ville syrjl linux.intel.com date thu sep __number__ __number__ track which port is using which pipes power sequencer restore it so that we avoid introducing random delays into the pps operations driver init time
dc63364691322014e313d1eb740df1ade2a3b13d	staging comedi addi_apci_3xxx remove iobase from private data the private data iobase is the same as the comedi_device iobase use the one in the comedi_device instead
3eda95de19e1781612091869e866a5014257f462	rtlwifi remove extra debugging message accidentally left in in commit b0302aba812bcc39291cdab9ad7e37008f352a91 an extra debugging message that is spamming the logs was not deleted before submission
b66231183a8542de1414e42326dd1c6bc4af75f4	fix generic domain chip wreckage the num_ct argument of irq_alloc_domain_generic_chips tells the core code how many chip types for different control flows should be allocated it does not control how many generic chip instances are created because thats determined from the irq domain size and the number of interrupts per chip the dw-apb init abuses the num_ct argument for allocating one or two chip types depending on the number of interrupts thats completely wrong because the alternate type is never used this code was obviously never tested on a system which has more than __number__ interrupts as that would have never worked due to the unitialized second generic chip instance hand in the proper and fixup the chip initialization along with the interrupt handler link
875f0e3da1e88f166940cbb5e530b05eb64ccc1f	media tm6000 fix bad indentation function parameters on subsequent lines should never be aligned with the function name but rather be indented
d33fb008e4dd807e451cdbcf90712a3d44bc011f	phy rockhip-usb use devm_add_action_or_reset if devm_add_action fails we are explicitly calling the cleanup to free the resources allocated lets use the helper devm_add_action_or_reset and return directly in case of error as we know that the cleanup function has been already called by the helper if there was any error
ac61d515f14fd205d8c917a34b27a767b4fe9e05	igb fix sparse warning in igb_ptp_rx_pktstamp this change fixes a sparse warning triggered by us casting the timestamp in the packet as a u64 instead of as a __le64 this change corrects that in order to resolve the sparse warning
7871597a73b7b8daa7beeba3c36d68f9047d38c2	media tvp5150 restructure version detection move the version detection code to a separate function and restructure it to prepare for tvp5151 support
8c4152951cab90b52406afc72b62e9590bbe2d85	asoc fsi rename to this is preparation for dmaengine support
ecbf1d5afe993f05f0c513a4b99256589ab5c810	use correct fb what is passed to drm_fb_helper_fill_var should be rather than the surface size
5f0b3f9998ceca8414dfb7d0dba69209f11b44af	usb otg ab8500-usb make probe work again the probe function will always fail because were testing the wrong variable
79c7d849777bc24d995371a066ded2ab2b359a18	usb chipidea udc dont assign directly udc-core provides a better way to handle release methods lets use it
997beda3daa6fcf1bbc5d6a92b6111c32c881345	staging comedi usbdux move firmware into the last step the usb_driver does before handing off to the comedi_driver is requesting and uploading the firmware move the into the so we can use the comedi_load_firmware helper cc ian abbott
1eb59443e72c69edbb836626f9f7f7e82427eeac	net dsa provide a slave mii bus if needed mimic what does and provide a slave mii bus by default which will be created if the driver implements a phy_read method
53dd9b5f95dda95bcadda1b4680be42dfe1f9e5e	perf annotate simplify header dotted line sizing no need to use strlen etc to figure that out just use the return from printf it will tell how wide the following line needs to be link split from a larger patch
5950ae518f0bf9affbbb4b2178c27e516e4cacc5	staging comedi das16m1 use __comedi_request_region use __comedi_request_region to request the additional region used by this driver remove the error message when the request_region fails comedi_request_reqion will output the error message if necessary
3694bd76781b76c4f8d2ecd85018feeb1609f0e5	asm-generic fix local variable shadow in __set_fixmap_offset currently __set_fixmap_offset is a macro function which has a local variable called addr if a caller passes a phys parameter which is derived from a variable also called addr the local variable will shadow this and the compiler will complain about the use of an uninitialized variable to avoid the issue with namespace clashes addr is prefixed with a liberal sprinkling of underscores turning __set_fixmap_offset into a static inline breaks the build for several architectures fixing this properly requires updates to a number of architectures to make them agree on the prototype of __set_fixmap it could be done as a subsequent patch series
b20519fd5007908c6a816cab1b9db911915e9fbd	bus arm-ccn handle correctly no-more-cpus case when migrating events the driver picks another cpu using cpumask_any_but function which returns value nr_cpu_ids when there is none available not a negative value as the code assumed fixed now
b13a714923fe4d444977dccb7a0f7ad1346724cf	alsa aaci convert to modern pm ops even if the config_pm explicity is undefined lets convert to the modern pm ops
7badc90d218dc7900147ec080ec72a5cbc99c381	staging comedi rti802 remove subdevice pointer math convert the comedi_subdevice access from pointer math to array access
8604bc28365c0673d932b0bfa6e52abb5d4dd62c	asoc tas2552 use devm_gpiod_get_optional for enable-gpio commit ea178d1456dc asoc tas2552 make the enable-gpio really optional makes enable-gpio optional devm_gpiod_get_optional is the better function for optional gpio so lets switch to use it
80e1ca692107b0bc5b088fd9c4a20726fb1a66a2	mtd mtk-nor adjust sequence of trigger function and assignment function move write data register before excute command to avoid missing first byte write to nor flash
082ec9063749bd58f557196249eb4b87120ee4a6	pinctrl pistachio use devm_pinctrl_register for pinctrl registration use devm_pinctrl_register for pin control registration
eb6d1abf1bd8bf1beb45b5401c8324bdb8f893c4	rhashtable better high order allocation attempts when trying to allocate future tables via bucket_table_alloc it seems overkill on large table shifts that we probe for kzalloc unconditionally first as its likely to fail only probe with kzalloc for more reasonable table sizes and use vzalloc either as a fallback on failure or directly in case of large table sizes
df8c66189dd42f719c75800a526bdc901f300f41	asoc ams-deltea register jacks at the card level the jacks are card level elements so use snd_soc_card_jack_new instead of snd_soc_jack_new to register them
a0d44cbcc0b92d1dbec5dda3a5b7ea929c05d522	hwmon k8temp convert to use devm_ functions convert to use devm_ functions to reduce code size and simplify the code
4c4ed22632bfafd5367a5a864a8039f5b6efbbab	media s5p-fimc fix control creation function fixed the size of the v4l2_cid_colorfx control cluster prior to this fix v4l2_cid_rotate was also icluded in the cluster preventing application from enabling rotation
84603c7c2e94bd1394f29fbfbd289432565ee2e8	i2c-ocores use struct dev_pm_ops for power management make the opencores i2c controller driver define its pm callbacks through a struct dev_pm_ops object rather than by using legacy pm hooks in struct platform_driver
57f27cca7ab59cec05adc85cef97e9b4f7d28d78	hotplug add missing call to notify_cpu_starting the scheduler depends on receiving the cpu_starting notification without which we end up into a lot of trouble so add the missing call to notify_cpu_starting in the bringup code
c1f415c9acb5877c408d9311eb837d7d50636a68	drm atomic helper do not unreference error pointer didnt quite fix the issue of dealing with an error pointer we cant an error pointer so reset it to null many thanks to dan carpenter for pointing this out again link
0a8cf9e28c094cd934deaedfd3ec07830f2a63cf	probe failures use pr_debug and padding reduced fixup for add support for the hv gpci get performance counter info interface makes the not enabled message less awful and hidden unless debugging
adcf7d5e7605e8134a99d415b7afd13f03c4bf23	asoc rsnd tidyup rsnd_ssi_master_clk_start parameter renesas sound has src sampling rate converter but the hw implementation depends on its generation it was part of sru on gen1 and scu on gen2 this scu needs dma transfer to use it current rsnd driver is using it as dma transfer buffer no rate convert and gen1 is only supported at this point this patch cleanup it with focusing about src and gen2 part ssi clock which is calculated from rsnd_ssi_master_clk_start should have flexibility since renesas sound has src sampling rate converter but current implementation is using directly this patch tidyup rsnd_ssi_master_clk_start parameter as preparation of future src support
7c3d2579160659da732a14cf7e8608be85a39e6f	staging rtl8192e fix oom_message warnings remove alloc failed messages where not needed to make happy
f1811cf632bd00947c3a2f7e538148c99d794daf	further clean up hfi1_ioctl parameter checks final clean up of the clause for the parameter checks of hfi1_ioctl
6122de8f8c6acbe16c2acd31e3334e87e82ae7ac	hwmon max197 remove unnecessary oom messages the site-specific oom messages are unnecessary because they duplicate the mm subsystem generic oom message
f8ab481066e7246e4b272233aa0b6948f5069f41	powerpc export cpu_to_core_id export cpu_to_core_id this will be used by the lpfc driver this enables topology_core_id from defined to cpu_to_core_id in to be used by non-builtin modules that is arch-neutral already used by eg but it is builtin obj-y in makefile thus didnt need the export since the module uses topology_core_id and this is defined to cpu_to_core_id it needs the export otherwise error cpu_to_core_id undefined tested on next-20160601
c04d002ac22614c0d9789c8bd80cb2bf868a9eda	staging rtl8723au use bit instead of bitx
8b2dcebae330fb6dffc7717b740aa4b2c4d00451	revert remove code duplication this reverts commit as it breaks working machines
7deb2b450df9975ab05deb885e386d59a16213a9	asoc tegra fix some checkpatch warnings error trailing whitespace error code indent should use tabs where possible warning please no spaces at the start of a line error foo bar should be foo
4cd3b6ebff8510b2139d64024411207090cfe0a9	scsi qla2xxx fix extraneous ref on sps after adapter break hung task timeouts can result if a qlogic board breaks unexpectedly while running these tasks become hung because command srb reference counts are not going to zero hence the affected srbs and commands do not get freed this fix accounts for this extra reference in the srbs in the case of a board failure
3ad48062233f32a8dd2649403f5afc076710f86b	spi pxa2xx choose closest lower speed as per discussion __number__ the best choice is to set closest speed which is not going over the asked one do the same approach for intel quark boards __number__
54485116cd77b361864c17c40c3280b97b6fbecc	usb musb core log vbus error vbus_error is a serious error that the driver often doesnt recover from in my tests so we should at least inform the user about it
5dc3443eb0d9d3688a6e5a3b4ebb9000d81ff6ba	bq27x00_battery fix reporting battery temperature reported temperature can be also negative so cache value in non negative kelvin degree
f70e3c4f8b6ab61f713e040822ec51f5de498146	cma correct unlock target cma remove potential deadlock situation introduces per cma area mutex for bitmap management it is good but there is one mistake when we cant find appropriate area in bitmap we release cma_mutex global lock rather than and this is a bug so fix it
5e757bc58d15b9fc7d36bb4fcc6f068489e2d29d	staging unisys use kcalloc instead of kzalloc to allocate array the advantage of kcalloc is that will prevent integer overflows which could result from the multiplication of number of elements and size and it is also a bit nicer to read
57538f1d2e02cad08575c9ad118a332ccd75f2dd	usb ehci-octeon remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure since commit device-core ensure drvdata null when no driver is bound thus it is not needed to manually clear the device driver data to null
3159d36ad799a117eb2f898de4c6b7777e4dc045	kvm x86 use generic function for msi parsing
b81a48ea877e1a104dace1392d92f708ff208f97	perf bench fix failing assertions in numa bench patch adds more subtle handling of and parameters in functions when there isnt enough numa nodes or cpus present instead of assertion and terminating benchmark partial test is skipped with error message and perf will continue to the next one fixed problem can be easily reproduced on machine with only one numa node running running main perf bench numa mem running ram-bw-remote perf bench numa mem __number__ __number__ __number__ __number__ __number__ perf parse_setup_node_list assertion __number__ bind_node_0 failed aborted link
a0bc3487e431eaea381c2c882a41274e9a02f028	sfc fix rx drop filters for when we insert an filter the firmware checks that the given rx queue index is in range even if it will not be used in case were inserting a drop filter pass the value __number__
e796cb419237f54b96442ae7feca1859c693865c	rxrpc delete unused rxrpc_kernel_free_skb delete rxrpc_kernel_free_skb as its unused
776ffc16b74a5c19285135cfbc6dd02e1c733f25	usb chipidea udc move zlt flag change to ep_enable its not necessary and also not specified in the datasheet to change the zlt flag before every ep_prime this patch moves this to the ep_enable and applies it only for non configuration endpoints
50657fc4dfa7e345a1008f7c1de0bf930bbecca9	writeback fix ppc compile warnings on do_divlong long unsigned long fix powerpc compile warnings in function bdi_position_ratio warning comparison of distinct pointer types lacks a cast enabled by default warning comparison of distinct pointer types lacks a cast enabled by default also fix gcc uninitialized var warnings
0f55159d091cb1e555ee52abc1b2455f301b99a8	kallsyms fix absolute addresses for kaslr currently symbols that are absolute addresses are incorrectly displayed in if the kernel is loaded with kaslr the problem was that the file which generates the array of symbol names and addresses uses an relocatable value for all symbols even absolute symbols this patch fixes that several kallsyms output in different boot states for comparison egrep __number__ d __per_cpu_start __number__ d __per_cpu_end __address__ t _stext egrep __number__ d __per_cpu_start __number__ d __per_cpu_end __address__ t _stext egrep __number__ d __per_cpu_start __number__ d __per_cpu_end __address__ t _stext egrep __number__ d __per_cpu_start __number__ d __per_cpu_end __address__ t _stext
549cc1c560128d583698ba9a73af283fe87dbab8	cfg80211 regulatory restore proper user alpha2 restore_regulatory_settings should restore alpha2 as computed in restore_alpha2 not raw user_alpha2 to behave as described in the comment just above that code this fixes endless loop of calling crda for __number__ and __number__ countries after resume from suspend on my laptop looks like others had the same problem too
bc285799f7e8c61eaacdd73aa8644b1eaf504bb4	media davinci-vpif-capture delete an error message for a failed memory allocation omit an extra message for a memory allocation failure in this function link
bcdf1d36ef19724dd7d50aff78201cd1727f68d1	staging ced1401 fix ced_disconnect rename camel case locals in function ced_disconnect
78c7a4a6592cde3e2ecba1732727d3ed3866a653	staging comedi ni_tiocmd tidy up ni_tio_input_inttrig remove the bug_oncounter null if this can never happen and it if did the driver should have died long before this function is called for aesthetics rename the local variable retval to simply ret
0fd80a77e4d2f34e9fe66a73edf81d4a30bd4ca4	input update input_mt_report_pointer_emulation to support hovering for devices that are incapable of reporting per-contact distance and can only report abs_distance just distance is not enough for upper layers of os to determine whether contact is leaving the area or if it is continuing hovering we need btn_tool_finger for that contact state inactive hovering active far away inside hover area touching surface btn_touch __number__ __number__ __number__ btn_tool_finger __number__ __number__ __number__ abs_distance __number__ __number__
cb4f9988f86746fff3183d31381deb2b2a421a3a	chip ram use resource_size to fix off-by-one error
6b70a43c7e0202cf285c864bc9f20f607c42e432	mac802154 cleanup address filtering flags this patch changes the address filtering flags to enums and setting the flag values with the bit macro additional this patch changes the commenting style for matching usual kernel style
6a73b571b63075ef408c83f07c2565b5652f93cc	sch_drr update backlog as well
7664cfe00151dcd801cee0c52ebc8688e1899110	dmaengine rapidio tsi721 rename device_control rename the device_control callback of the txx9 dma driver to terminate_all since its all its really doing that will eventually be used to retrieve slave capabilities
db2fb60cd35d2d03699e570906ced73b4c05586e	mfd syscon add a dt property to set value width currently syscon has a fixed configuration of __number__ bits for register and values widths in some cases it would be desirable to be able to customize the value width for example certain boards like the ones manufactured by technologic systems have a fpga that is memory-mapped but its registers are only wide this patch adds an optional reg-io-width dt binding for syscon that allows to change the width for the data bus val_bits if this property is provided it will also set the register stride to reg-io-widths value if not provided the default configuration is used
b4308f046a38dffc270b8865256320cbe2a2b1f8	net dsa mv88e6xxx take switch out of reset before probe the switch needs to be taken out of reset before we can read its id register on the mdio bus
b09eed7f811de64f1352634baa48ca8aecddac51	pinctrl samsung remove an always false test samsung_pinctrl_probe can be called only after matching the driver by the compatible string so this already implies a non null remove the always false test and related error trace while at it drop another error log in case of memory allocation failure any errors are logged by the memory subsystem
76e39ccf9c36352a8fc7c084ec25b735010685fd	fix backward compatibility on vfs commit set uar page size to regardless of system page size introduced dependency where old vf drivers without this fix fail to load if the pf driver runs with this commit to resolve this add a module parameter which disables that functionality by default if both the pf and vfs are running with a driver with that commit the administrator may set the module param to true the module parameter is called enable_4k_uar
d6ecf158148883be1588859c46d6d424513e2e0d	ata ahci_mvebu add support this commit adds support to the ahci_mvebu driver the suspend hook doesnt do anything special despite calling the generic ahci_platform_suspend_host function however the resume hook has to restore the mbus windows configuration as well as the regret option tested on marvell armada __number__ gp
f6cee191fc6b286f9056a13456c4c8ade0aeb890	intel_idle use explicit broadcast oneshot control function replace the clockevents_notify call with an explicit function call link
d936622c36273a9ecfbb4aacf26cd29405995159	only warn if the intra-domain offset actually exceeds the limit fixes spurious warnings
490c1b444ce653d0784a9a5fa4d11287029feeb9	jbd2 do not fail journal because of frozen_buffer allocation failure journal transaction might fail prematurely because the frozen_buffer is allocated by gfp_nofs request __float__ do_get_write_access oom for frozen_buffer __float__ ext4-fs aborting transaction out of memory in __ext4_journal_get_write_access __float__ ext4-fs error device sda1 in out of memory __float__ do_get_write_access oom for frozen_buffer __float__ ext4-fs aborting transaction out of memory in __ext4_journal_get_write_access __float__ do_get_write_access oom for frozen_buffer __float__ ext4-fs aborting transaction out of memory in __ext4_journal_get_write_access __float__ aborting journal on device sda1-8 __float__ ext4-fs sda1 remounting filesystem read-only this wasnt a problem until mm page_alloc do not lock up gfp_nofs allocations upon oom because small gpf_nofs allocations never failed this allocation seems essential for the journal and gfp_nofs is too restrictive to the memory allocator so lets use __gfp_nofail here to emulate the previous behavior
4fadf6b6570edc40c01eb7760055f9adc19971a5	fix sdma queue init in non-hws mode this patch fixes the sdma queue initialization when running in non-hws mode the first fix is to move the initialization of sdma vm parameters before the initialization of the sdma mqd the second fix is to load the mqd to an hqd after the initialization of the mqd
96067adf55bd93618cec4b6de08aebaad8203c9b	gma500 silence gcc warnings in mid_get_vbt_data add a cast here to silence a gcc warning warning cast from pointer to integer of different size
8fbdce659549d93dfb257ec4eabacf63a188e506	implement iommu_device_group just use the amd_iommu_alias_table directly
8dc8641e619228153ab0bc609f9f534126e87c08	hid wacom use calculated pkglen for wireless touch interface commit introduced the wacom_compute_pktlen function which automatically determines the correct value for an interfaces pkglen by scanning the hid descriptor this function returns the correct value for the wireless receivers touch interface removing the need for us to set it manually here
53f10659f9994df8efe788f82d3da78d48e650c5	btrfs find_next_devid root fs_info find_next_devid knows which root to search so it should take an fs_info instead of an arbitrary root
3dc5dbe9a1b815b659a6b04540fc6fd4b4e3831b	rcu move lock_class_key to local scope currently the rcu_node_class rcu_fqs_class and rcu_exp_class arrays needlessly pollute the global namespace within this commit therefore converts them to static local variables within rcu_init_one
b57cd6f6407d420d522ab71b9c0dd11993e49ba1	arm kvm change kvm_call_hyp return type to unsigned long having u64 as the kvm_call_hyp return type is problematic as it forces all kind of tricks for the return values from hyp to be promoted to le has the lsb in r0 and be has them in r1 since the only user of the return value is perfectly happy with a value lets make kvm_call_hyp return an unsigned long which is on arm this solves yet another headache
b6d808525aef6703f2bf7662c7ef99f5e7349bb4	greybus es2 fix endpoint requirement check the current es2 implementation only checks for no in or out bulk endpoints but still assumes there are precisely num_bulks of each specifically urbs could be allocated and initialised to default values which amounts to bulk urbs being submitted to the control endpoint we should be able to handle any number of endpoints but for now lets just require num_bulks of each
4f73113c63bae5cd092c93c2a9835b9d3c7f0b54	rds mark message mapped before transmit rds_send_xmit marks the rds message map flag after which is clearly wrong we need to maintain the ownership between transport and rds also take care of error path
a7ceffbbbd0886f955f10a2ab1ad38ae42df359c	btrfs raid56 remove unused variable in lock_stripe_add variable walk in lock_stripe_add is not used remove it
1451b91ffef5a2ac7df28a6d8fc270ccbee5d8ac	i2c-designware use usleep_range in the busy-loop this is not an atomic context so there is no need to use mdelay but instead use usleep_range
78c9b7e71d90f32ce19d4a575a1a206cfe7c6a00	drop init_dpio shouldnt be needed this is a reset feature we dont actually need danvet make it compile
3947b74d0f9d0738335d8b2bca2bde057f9141be	nfsv4 dont request a getattr on open_downgrade if were not closing the file completely there is no need to request close-to-open attributes
e272d95f8c0544cff55c485a10828b063c8e417c	media rcar_vin fix interrupt enable in progressive the progressive input is captured by the field interrupt therefore the end of frame interrupt is unnecessary
5f68d04d39eeb16b9ea7639f62c4ae59163b4813	dont check resource with devm_ioremap_resource devm_ioremap_resource does sanity checks on the given resource no need to duplicate this in the driver
8804b8d5b05bbf5aea205e49fa4ed8240eb1728d	enable sysfs interface for powerplay same interface exposed in pre-powerplay dpm code
4d8007ee2626066dbfd3917e813f7c2e47f96392	change xxx_request_resources header simplify st33zp24_spi_acpi_request_resources st33zp24_spi_of_request_resources and st33zp24_spi_request_resources to have the same prototype and using spi_get_drvdata
c1085b10925a3271f90cb9619f22835e701e8657	ixgbe fix incorrect phy register reads fix some register reads that had the opcode and register parameters swapped also use define instead of a magic number
8de1b23efaede0e355cba017992ab032e983c61c	do not wait atomically when stopping engines i do not see that this needs to be done atomically and up to one second is quite a long time to busy loop
20c4cb792de2b5839537a99a469f4529ef1047f5	tcp remove unused tcp_fin parameters tcp_fin only needs socket pointer we can remove skb and th params
8bfd4f7f18050535892b74e6ec3aa2ca598c6a64	mtd mxc_nand add missing clk_disable_unprepare in mxcnd_remove clock source is prepared and enabled by clk_prepare_enable in mxcnd_probe function but no in mxcnd_remove
e25bfb56ea7f046b71414e02f80f620deb5c6362	set alias dte in with this we dont have to create dev_data entries for non-existent devices which only exist as request-ids
3619ef76b37d4803bc9daee9d03d82c8526db378	perf annotate fix symbolic link of build-id cache the commit perf annotate fix a bug following symbolic link of a build-id file changed to use dirname to follow the symlink but it only considers new-style build-id cache names so old names fail on readlink and force to use system path which might not available link
5efeb0970794933f86af70a0fa8282e9255a1ca2	update cifs version number with smb2 support update from version __float__ to __float__ to make it easier for users to recognize which version has smb2 support
f4a6c5b41ced4737c6b811e295d947a76a41262a	regulator arizona-ldo1 remove redundant error message kzalloc prints its own oom message upon failure
13a86b85aca24f825c7843cdcd81eaff19fa4ea9	cr clock gating is recommend to be set on pineview the specs recommend that this bit be set on pineview no reason is given but it sounds like a powersaving bit that we should expect the bios to be v2 rebase on top of _masked_enable_bit
f9e93acc14d1867176afaf3ab9bded914cd012f5	regulator ltc3676 constify regulator_ops structure declare regulator_ops structure as const as it is only stored in the ops field of a regulator_desc structure this field is of type const so regulator_ops structures having this property can be made const too file size before text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ file size after text data bss dec hex filename __number__ __number__ __number__ __number__ __number__
0b305ccc1b545d3389068ddc3548cbc877513b97	gpio fix missing spin_lock_init for ack_lock
8eb988f1be98e13d33c786ad1511f9870d3038fb	media saa7134 remove unused status var in function warning variable set but not used
d31e954e07c838f44183addeecc7115d25e83266	regulator wm831x convert to regulator_list_voltage_linear only the alive ldos can actually use this as all the other regulators have two linear ranges
26a6980cf40c67182bc36fa0b088ebed79796110	fix cs error handling v2 stop double freeing the the bo list by pulling the content of amdgpu_cs_parser_prepare_job into the ioctl function again v2 better commit message
a629c08fdb98ebb184d745553af9dda4f05941bf	watchdog imgpdc fix probe null pointer dereference the img pdc watchdog probe function calls pdc_wdt_stop prior to watchdog_set_drvdata causing a null pointer dereference when pdc_wdt_stop retrieves the struct pdc_wdt_dev pointer using watchdog_get_drvdata and reads the register base address through it fix by moving the watchdog_set_drvdata call earlier to where various other fields are initialised
26b47ff65bcdff8473b87680d8f876c66208087b	btrfs change the members order of btrfs_space_info structure to reduce the cache miss it is better that the position of the lock is close to the data which is protected by it because they may be in the same cache line we will load less cache lines when we access them so we rearrange the members position of btrfs_space_info structure to make the lock be closer to the its data
08913c2d2445da9f17a32186418e61baa4ae85b6	arm remove duplicate omap4430_init_late declaration commit omap2 use machine specific hook for late accidentally added two declarations for omap4430_init_late remove the duplicate declaration
41df7b02db82cf6c14f094757bac3830d10a827f	fnic fnic driver crashed with null pointer reference when issuing request if the completes before returning from fnic_queuecommand we may be referencing scsi_cmnd structure that may be freed by interrupt handler acquring io lock would synchronize fnic_queuecommand and interrupt handler increment fnic version from to
96d20c32f68b058b4430a6f711124511a2d9b361	usb gadget m66592-udc let udc-core manage by simply setting a flag we can drop some boilerplate code
357b66fdc8ad4cea6e6336956a70742f961f0a4d	ext4 ext4_split_extent should take care of extent zeroout when ext4_split_extent_at ends up doing zeroout conversion to initialized instead of split conversion ext4_split_extent gets confused and can wrongly mark the extent back as uninitialized resulting in end io code getting confused from large unwritten extents and may result in data loss the example of problematic behavior is lblk len lblk len ext4_split_extent ext4_split_extent_at split at __number__ ext4_ext_insert_extent enospc ext4_ext_zeroout extent is now initialized ext4_split_extent_at split at __number__ mark_uninit1 mark_uninit2 extent is split and parts marked as uninitialized fix the problem by rechecking extent type after the first ext4_split_extent_at returns none of split_flags can not be applied to initialized extent so this patch also add bug_on to prevent similar issues in future testcase
a16a96d032b434ea348a3978fc160e2d8a3f3e42	video fbdev vt8623fb suppress build warning this patch fixes following build warning in function warning cast to pointer from integer of different size void __iomem
bb15b2170c80b96ea78c0f8c8a6e0ed75fa91c10	nfc nci add t1t support notification add t1t matching with jewel during notification it was causing the target found does not have the desired protocol to show up
527d10ef3a315d3cb9dc098dacd61889a6c26439	dont unfreeze phb pe after reset on powernv platform the pe is kept in frozen state until the pe reset is completed to avoid recursive eeh error caused by mmio access during the period of eeh reset the pes frozen state is cleared after bars of pci device included in the pe are restored and enabled however we neednt clear the frozen state for phb pe explicitly at this point as there is no real pe for phb pe as the phb pe is always binding with we actually clear which is wrong it doesnt incur any problem though this checks if the pe is phb pe and doesnt clear the frozen state if it is
9e3410b764b79670a59d6c1ccdcad483b92c058c	powercap convert class code to use dev_groups the newly added power capping framework uses the obsolete field of struct class however this field will be removed in __float__ so convert the code to use the field instead
d6b22ebbbf1f71f9ebbc622c96bab93d554937e7	arm ux500 remove platform specific device registration when dt is enabled most devices have now been successfully and each supported platform has its own device tree source file hence the majority of the platform specific device registration calls can now be successfully removed
eadb29a9c52eb14a84b94fc29bb1cfa93ddc653e	silence the error message from i915_wait_request this error message has since been superseded by the hangcheck and does not add any salient information beyond that already printed by hangcheck discovering the gpu hang that lead to i915_wait_request bombing out in the first place
92dd6c3d4d4e0a26c9bb987b3f2f08c1da86d9ce	move dereference below null test spatch with a semantic match is used to found this
86d6275a8f1b7ba64b79a46c7616264302f44410	tifm fix error return code in tifm_7xx1_probe fix to return enodev in the pci ioremap error handling case instead of __number__ as done elsewhere in this function
03130a77d52bd738cdcee17627aa5e3d19fdbeeb	greybus fix op_cycle logic the function that computes the operation id for a connection is wrongly using mod rather than and fix that
a0fb6ad7ae28a4dce34c010028dc070eeacae1d9	fix fb refcounting in pan_display_atomic in commit bbb1e52402b2a288b09ae37e8182599931c7e9df author rob clark gmail.com date tue aug __number__ __number__ atomic weve forgotten to do the refcount dance for pan_display_atomic which can result in refcount leaks if the current configuration is not from fbcon which apparently can happen when vt-switching fbcon does a pan first before a set_par ocd-align function parameters while at it v2 actually git add the ocd bugzilla
bfcef5d2135ea1200ac1ea44661619ab8785c9f0	reduce missing tps3 support errors to debug logging per spec tps3 support is mandatory for downstream devices that support hbr2 weve therefore logged errors on hbr2 without tps3 since commit date thu sep __number__ __number__ ignore link rate in tps3 selection however it seems there are real world devices out there that just arent spec compliant and still work at hbr2 using tps2 so reduce the error message to debug logging bugzilla
228b82211b47b597fa75dff2ac146b40eaaddf18	s390 replace weird use of ptr_ret saves repeating void __force but its less clear using the output of ptr_ret to determine the error rather than just testing is_err is odd for example i __gptr_to_uptr never returns because the __ret would be __number__ for the old code the new version is clearer imho it would try to get_user on that address if you hate this variant i can just instead
794a79a6b00db14c535c951b03820ea5199c82a3	clear after we unmap it we dont seem to be using the pointer after its unmapped so this patch doesnt fix any bug i can reproduce
07f9b61c3915e8eb156cb4461b3946736356ad02	mmconfig check earlier for mmconfig region at address zero we can check for addr being zero earlier and thus avoid the mutex_unlock cleanup path bhelgaas drop warning printk
d4511e694ed9b903d8d3d3957180cabf23d2ee7f	sparc32 export leon_dma_ops to modules
9c5a05bc350c29285a89d6e1f3b68c8c7f308207	block fix pfn_mkwrite dax fault handler previously the pfn_mkwrite fault handler for raw block devices called bldev_dax_fault __dax_fault to do a full dax page fault really what the pfn_mkwrite fault handler needs to do is call dax_pfn_mkwrite to make sure that the radix tree entry for the given pte is marked as dirty so that a follow-up fsync or msync call will flush it durably to media
50bbfbffa5c894def440ce8157dfe53e60960d35	remove fimd_mode_fixup the only thing mode_fixup was doing was set the to __number__ but it already has the value of __number__ when the fimd_mode_fixup is called that means this call is actually pointless and can be removed
61c8e8aa9fa266d3b917621d69cd8086a0db558d	thermal devfreq_cooling make power a u64 the prototype of do_div is uint32_t do_divuint64_t uint32_t base make power u64 to avoid the following warning in function get_dynamic_power warning comparison of distinct pointer types lacks a cast enabled by default warning right shift count width of type enabled by default warning passing argument __number__ of __div64_32 from incompatible pointer type enabled by default note expected uint64_t but argument is of type long unsigned int
36b99b22877bd25162239f1b00477ee6ae2d01ee	acpica update version to __number__ version __number__
71d7472f63385f4f6fb7c8548450b2e4665dc542	arm shmobile bockw enable global use of fpga this patch enables global use of fpga since it will be used from many devices
84e4d632b5455082b458844b8b8cf48406e001ce	kvm powerpc mark page accessed when mapping a guest page mark the guest page as accessed so that there is likely less chances of this page getting swap-out
1aeb5b615cd10db7324d4e4d167c4916dfeca311	media radio-bcm2048 dont ignore errors remove this warning in function bcm2048_set_rds_no_lock warning variable err set but not used int err by returning the error code
e4dbe796285d96976586487fe0555f678c95b60f	input ab8500-ponkey fix module autoload for of platform driver this platform driver has a of device id table but the of module alias information is not created so module autoloading wont work
f767f7acee328933be4e7936a2115560f44846d5	backlight l4f00242t03 remove redundant spi_set_drvdata driver core sets driver data to null upon failure or remove
0fae799e869b9b1ece8c04c714d0529da0b0bade	perf bench numa make no args mean run all tests if we call just perf bench numa mem it will present the same output as perf bench numa mem ask for instructions about what to run while that is kinda ok using run all tests as the default making no parms be equivalent to perf bench numa mem will allow perf bench numa all to actually do what is asked run all the bench tests instead of responding to that by asking what to do that in turn allows perf bench all to actually complete for the same reasons and after that the tests that come after that and that at some point hit a null deref will run allowing me to reproduce a recently reported problem that when you have the needed numa libraries which wasnt the case for the reporter making me a bit confused after trying to reproduce his report so make no parms mean link
63d1157dedd79e37bbc3f68f6a9886c5eeb99c27	iio imu inv_mpu6050 remove casting the return value which is a void pointer casting the return value which is a void pointer is redundant the conversion from void pointer to any other pointer type is guaranteed by the c programming language
042dd765bdf401c0ccdeb16717b0c2a0b1405f18	introduce a local variable in srp_add_one this patch makes the srp_add_one code more compact and does not change any functionality
2d4072a5470621c552f46d51cd54965aeb033893	mac80211 flush ap_vlan stations when tearing down the bss ap change to flush stations with ap flush in second loop
f7f129ce2e33f9bd444c1889216ab92f2ec69d91	media v4l vb2-dma-contig shorten vb2_dma_contig prefix to vb2_dc
38f57532ede565a3c71da7b7727369f374c51acb	asoc cs35l32 fix compile warning for i2c_probe forgot to add a return for err_disable goto statement causes compile warning of control reaching end of non-void
7523d834dd1573610078eb1ac0933f6490232f90	nvme fix off-by-one when filling in prp lists if the last element in the prp list fits on the end of the page theres no need to allocate an extra page to put that single element in it can fit on the end of the page
20d2cecbb7b9c35235c97f0dfa520525c28f8841	asoc tlv320aic32x4 implement resistors on input pins the input pins of the aic3204 have resistors inline with them the current code assumes that you want a resistor inline with your inputs and implements it as a simple switch this patch creates an enum for each pin and allows you to switch between not connected and ohm values this more closely models the acutal aic3204 part these pin settings are documented in tis slaa557 pages __number__ and __number__
9b8ad4ac790041b40146a3cb7aefe1a5a5db953d	pata_sil680 constify tables constify tables in
9d1d0a38bd7f0ee22081beabb2baac89ce6a4e58	staging fbtft fix braces are not necessary for single statement blocks this patch fixes the following warning braces are not necessary for single statement blocks
60f8cc60fa41b8c44662a3a4d99862e3b81cfa6f	ath9k_hw do not recalculate the descriptor checksum in ar9003_hw_fill_txdesc reduces the number of accesses to uncached descriptor memory
5acd7dfbd7851446fb1d2c947661d365e4c635a0	asoc core use snd_soc_register_dais on codec snd_soc_register_dais considers dai counts inside snd_soc_register_codec does not need to care for it
89b9e08f186a203c250872a663c9eab09cdc583a	xen-platform fix error return code in platform_pci_init fix to return a negative error code from the error handling case instead of __number__ otherwise the error condition cannt be reflected from the return value
7877a0ba5ec63c7b0111b06c773f1696fa17b35a	remove extra cost in task_cputime there is an extra cost in task_cputime and task_cputime_scaled when nohz_full is not activated when vtime accounting is not enabled we dont need to get deltas of utime and stime under vtime seqlock this patch removes that cost with adding a shortcut route if vtime accounting is not enabled use context_tracking_is_enabled to check if vtime is accounting on some cpu in which case only we need to check the tickless cputime delta link
455e5cd6f736478d63a076086c732d287623e366	mmc omap_hsmmc pin remux workaround to support sdio interrupt on am335x the am335x cant detect pending cirq in pm runtime suspend this patch reconfigures dat1 as a gpio before going to suspend sdio interrupts are detected with the gpio the gpio will only wake the module from suspend sdio irq detection will still happen through the ip block idea of remuxing the pins by tony lindgren code contributions from tony lindgren and balaji t k
afc3eda2a897b402e59f42f22eb89bba52297dd3	f2fs fix incorrect iputs during the dentry recovery flow in the dentry recovery process __number__ f2fs_iget __number__ set fi_delay_iput to __number__ add to the dirty_dir_list __f2fs_add_link recover_dentry __number__ iput by remove_dirty_dir_inode sync_dirty_dir_inodes write_chekcpoint if i_count is not __number__ root dir remove_dirty_dir_inode is called later and then iput is triggered again due to the fi_delay_iput flag so lets unset the flag properly once iput is triggered
5bb5428956d3eecb428e72e7f521ff6ac767384b	gpio gpio-davinci remove duplicate check on resource sanity check on resource happening with devm_ioremap_resource
851bdd11ca8b855ee946f50dac0850a4bec875c9	inetpeer_gc_worker trivial cleanup do not initialize list twice list_replace_init already takes care of initializing list we dont need to initialize it with list_head beforehand
f95732e2e0a649c148be0242b72e3c7473092687	audit kill audit_prepare_user_tty now that netlink messages are processed in the context of the sender tty_audit_push_task can be called directly and audit_prepare_user_tty which only added looking up the task of the tty by process id is not needed
eaa8e7ab99d1b33db9362f35c1d65df8df39dea9	fix a bit of a thinko in nv_wri2cr helper functions
d0d272771035a36a7839bb70ab6ebae3f4f4960b	vfs make sure we dont have a stale root path if unlazy_walk fails when i moved the rcu walk termination into unlazy_walk i didnt copy quite all of it for the successful rcu termination we properly add the necessary reference counts to our temporary copy of the root path but for the failure case we need to make sure that any temporary root path information is cleared out since it does _not_ have the proper reference counts from the rcu lookup we could clean up this mess by just always dropping the temporary root information but al points out that that would mean that a single lookup through symlinks could see multiple different root entries if it races with another thread doing chroot not that i think we should really care we had that before too back before we had a copy of the root path in the nameidata al says he has a cunning plan in the meantime this is the minimal fix for the problem even if its not all that pretty
9cb60e202631d71b7b8d38fa84ae7663805244b6	mips correct isa masking in fpu feature determination correct an isa level determination problem introduced with mips kernel add support for mips r6 reverting explicit masking against individual macros in fpu feature determination feature macros such as cpu_has_mips_r cannot be used here because they operate on cpu and we want to refer to the current cpu instead they cannot be used for masking against the current cpu either because they mask against cpu too define cpu_has_mips32r1 mips_cpu_isa_m32r1 patchwork
a2ceb1fbaa875172345f611a3d37c3662f7e5082	libfcoe fix meaningless log statement ctlr_dev was initialized to null and never re-assigned this caused the log statement to always report failure this patch removes the unused variable and fixes the log statement to always report success as that is what should be logged if the code reaches this point
f8192880a102849d84fe0f5e27bc8625a33e031c	regulator tps65086 fix ranges for buck regulators __number__ __number__ and __number__ these regualtors output when vsel is __number__ the datasheet will be updated to reflect this
f200c02beb5ddf4d886b4aca53f9f9f8bf332d06	asoc switch over to use snd_soc_register_component on mpc5200 i2s
6a8a21546507a3ec88e81c2ec927a3fb63efa8ff	nbd stop leaking sockets this was introduced in the multi-connection patch weve been leaking sockets ever since
38190dfb7056678e388f85cb9c79f8e479a4b263	i2c octeon thunderx remove double-check after interrupt commit i2c octeon improve performance if interrupt is early added a double-check around the wait_event_timeout condition the performance problem that this commit tried to work-around could not be reproduced it also makes the wait condition more complicated then it should be therefore remove the double-check
c29dc2d771411850777eb027756b12106b5f6cd5	net fec handle optional clk_ptp more gracefully when the optional clk_ptp is absent we can just set it to null and clk api will just handle it gracefully it saves us from checking clk_ptp whenever calling into clk api also since clk_ptp is optional the ret variable shouldnt be set in case that the clock is absent
365a0442f6def11b0b3012778d6a838c7a8e6912	usb mos7840 remove redundant condition this patch removes redundant condition length length __number__ can be reduced to a single evaluation tested by compilation only caught by cppcheck
fd4edf197544bae1c77d84bad354aa7ce1d08ce1	bcma fix handling of big addrl the return value of bcma_erom_get_addr_desc is a unsigned value and it could wrap around in the two complement writing this happens for one core in the bcm4708 soc
ae89254da6879cffa6a17327e5f3f60217b718cf	sunrpc fix compile on non-x86 current_task appears to be x86-only oops lets just delete this check entirely any developer that adds a new user without setting rq_task will get a crash the first time they test it i also dont think there are normally any important locks held here and i cant see any other reason why killing a server thread would bring the whole box down so the effort to fail gracefully here looks like overkill
187b26a97244b1083d573175650f41b2267ac635	convert remaining timespec to timespec64 in xen_pvclock_gtod_notify
892a2b90ba15cb7dbee40979f23fdb492913abf8	cgroup only need to check once in cgroup_attach_proc it is now sufficient to only check that once now that we are using threadgroup_lock during the migrations oldcgrp will not change
3bcc6fa971c06151d6bf90cb0dc80807f71b93f6	cpufreq intel-pstate use separate max pstate for scaling systems with configurable tdp have multiple max non turbo p state intel p state uses max non turbo p state for scaling but using the real max non turbo p state causes underestimation of next p state so using the physical max non turbo p state as before for scaling
84117da5b79ffb4077bb05d64c86dfa4d746115c	convert printk to pr_foo no level printk converted to pr_warn if err no level printk converted to pr_info disabling non-boot cpus other printk converted to respective level
20fe4ae19d58766a87af6f74a97027a2eb0c85c3	staging dgap a pr_info this patch just fixes a pr_info is not proper at this point in time
e36f1dfce0b45d347927568efe1088821758cc3c	bdi remove unused stuff two flags and one bdi_writeback field are no longer used remove them
5af76d5c0882435241841186b054262407e9eabb	asoc rt286 correct the or to and here it should be to check the status
3943875e7b73fdd94dd9e911d69f0cee9ab66a89	fix vma page_prot bit manipulation fix a long-standing ttm issue where we manipulated the vma page_prot bits while mmap_sem was taken in read mode only we now make a local copy of the vma structure which we pass when we set the ptes
89116bf962a358a6ad964a01a658d0392019a2de	fix pl08x warnings in function pl08x_desc_free warning passing argument __number__ of dma_descriptor_unmap from incompatible pointer type note expected struct dma_async_tx_descriptor but argument is of type struct pl08x_txd
b4d0fe9c906deb00ad0b1690817f96aff21aee29	mfd lpc_ich convert to module_pci_driver use module_pci_driver instead of make code cleaner
7be58a6488a9d36886d9423a1ed54fe104c7b182	skip synic vector check for qemu side qemu zero-inits hyper-v synic vectors we should allow that and dont reject zero values if set by the host
ae014c23d5267e1bd2bbafab0e1c741c202496a5	staging fsl-mc add quirk handling for dpseci objects __float__ dpseci objects __float__ are not coherent-- in spite of the fact that the mc reports them to be coherent in certain versions add a special case to set the no shareability flag for dpseci objects __float__ stuart reworded commit message updated comment in patch
e05a1fd9468bc99bf67bd81601d46d84d93c21c8	usb wusbcore return for unlinked urbs return for unlinked urbs
ea102d0ec475e4cd6e74a8b61b45708fbf6b582e	firewire core convert ar-req handler lock from _irqsave to _bh fw_core_handle_request is called by the low-level driver in tasklet context or process context and is called by mid- or high-level code in process context so convert address_handler_lock accesses from those which disable local irqs to ones which just disable local softirqs
11870d714a1b744a0225e90b0b395346357defe9	perf symbols introduce filename__readable to check readability introduce filename__readable to check readability by opening the file directly since the accessr_ok just checks the readability based on real it is ignored that the effective and capabilities for some special file filename__readable directly opens given file with o_rdonly so that the kernel checks it by effective and capabilities link
66573991c47f3e826f294b6ab4aa1cf967d5f426	staging comedi addi_apci_3xxx stub in analog input command support the analog input subdevice in this driver is broken the attach of this driver requests the irq and sets the to the analog input subdevice but it does not setup the subdevice to support commands stub in the command support functions so we can fix the subdevice
86f343b50bb9f56cce60fade22da9defff28934c	rcu fix config_rcu_fast_no_hz stall warning message the print_cpu_stall_fast_no_hz function attempts to print when the is not pending but unsigned arithmetic causes it to instead print ulong_max which is __number__ on systems and __number__ on systems neither of these are the most reader-friendly values so this commit instead causes timer not pending to be printed when is not pending
ddf47ccbfebc12add813cf729ecfc2d5ab59ca19	usb gadget udc-core remove protection when setting now that no udc driver touches we can assign our release function to it without being afraid of breaking anything
001d1953eae7089ab148ec32e13848be8d0b3874	w1 mxc_w1 check the clk_prepare_enable return value
9adb9254f4b0f591282f713de5356a9e75a44da3	ide hpt366 convert to use match_string helper the new helper returns index of the mathing string in an array we would use it here
af0b8ee32c831e6e8fbfe0b311b9ac017d14b78d	drop pointless forward declaration
f7ff6945d0651fbeb61dc80f3b14059e808b3535	scrap to_iio_buffer as it no longer has meaning now buffers do not have a specific dev structure this is garbage
54ef487241e863a6046536ac5b1fcd5d7cde86e5	vfs lookup_open expand lookup_hash copy __lookup_hash into lookup_open the next patch will insert the atomic open call just before the real lookup
7f717b91dd68db1fa01d396d03997ed1b748659f	revert bluetooth remove rfcomm_carrier_raised this reverts commit f86772af6a0f643d3e13eb3f4f9213ae0c333ee4 this is the first of a revert together with revert bluetooth always wait for a connection on rfcomm open and revert bluetooth move rfcomm_get_device before rfcomm_dev_activate commit bluetooth always wait for a connection on rfcomm open open-codes blocking on tty open rather than using the default behavior implemented by the tty port the reasons for reverting that patch are detailed in that changelog this patch restores required functionality for that revert
6168d5670bd764557b5e06b1842964a44cf34a45	dw_dmac dont call platform_get_drvdata twice there is no need to call platform_get_drvdata twice as we have it already in dw variable
e54b2e2d723f138df35de0bf1f8262da116ca6fa	gfs2 convert to using callback convert gfs2 to use callback instead of
0b65ba9981d8fe80fd099f26dd96c60e07729aeb	asoc tlv320aic3x fix data delay configuration fix the issue introduced by __number__ asoc tlv320aic3x add tdm support the ctrlc register were not receiving the correct delay configuration which will corrupt dsp_a audio mode
6f288cc52f478e6f58d96158e7cd857fedb6d111	can ti_hecc fix unintialized variable in ti_hecc_xmit local variable data is not initialized before being used this initialization got inadvertently removed in the following patch can unify droping of invalid tx skbs and netdev stats
adde04c62886c668d2380186f5e60dc75113b5d0	usb move assignment out of if block we should not be doing assignments within an if block so fix up the code to not do this change was created using coccinelle
06777c4ec78a43977b63f1d5045def057227c2c5	dmaengine pxa_dma fix debug message in a very tight timeframe the debug message in the transfer completion handler can be misleading as the completion test report can change just after the message and the code flow cannot be deduced from the debug message this is just a cleanup to make debugging easier
14d94a3d82ab3ef6b3a9f881e134d5b48323b202	ignore pipe select bit when checking for lvds register initialization the lenovo thinkpad t410 has the lvds_pipeb_select bit set in the lvds register when booted with the lid closed even though the lvds hasnt really been initialized ignore this bit so that the vbt value will be used instead
dfc065f19fe0ce4ef7a52011801c5c19131e6529	staging ozwpan fix wrong error check schedule_work returns true if succeeded false on failure error check was doing exactly reverse also removes extra variable
515619f209114697fabd21eed1623bfa69746815	avoid if is empty perf_trace_buf_prepare perf_trace_buf_submit make no sense if this has no active counters change uprobe_perf_print to return if note this is not uprobe-specific we can change other users too
b182837ac111e87f8e82cbcb0046449d9412187f	use rbtree postorder iteration instead of opencoding use rbtree_postorder_for_each_entry_safe to destroy the rbtree instead of opencoding an alternate postorder iteration that modifies the tree
405c91fc2ca2541ce8efa173154d83ec1fe4e38b	staging dgrp fixed warning space prohibited before semicolon this patch fixes warning space prohibited before semicolon in driver dgrp
c9aa763fe9690a334d0636f88e6eb85340f36f89	prevent log mangling on add missing newline to to prevent the following kernel log line getting appended to the current one after switching the integrated gpu and suspending the discrete gpu
1dd9290a7ef8877d12a9df28c2df677fde145dfe	allocate chip state with iio_dev
803926825fa4db007437f76654e3e63bafb9b906	regulator qcom-rpm add missing state flag in call to rpm this adds the missing state parameter to the call down to the rpm this is currently hard coded to the active state as thats all were supporting at this moment
6d3c1afe7367447c8f7d2fec7a132f723834efd1	make i2c_adapter_names static not used outside of the file so declaration should be static picked up by sparse warning symbol i2c_adapter_names was not declared should it be
4739a0d40b668ed4d60e048ee8ff03cd863e0987	drm rcar-du skip disabled outputs when a dt node connected to a du output is disabled no bridge will ever be instantiated for it skip the output in that case
965c0aaafe3e75d4e65cd4ec862915869bde3abd	xen balloon use correct type for frame_list this is now a xen_pfn_t
41bbe835f1cd48a14af2cd3a3a9b41e1528f07dc	staging comedi pcl818 remove ai_n_chan from private data this member of the private data is just a copy of the
0f8066bd48785058c339061fef05be0dcfa8dc08	sunrpc remove sk_no_check setting setting sk_no_check to udp_csum_norcv seems to have no effect
ee64f08ea9832b8127aeb808411e350bc4463399	net ethernet broadcom fix build errors commit phy add api for an mdio device to a bus introduces an api to access mii_bus structures but missed to update the sb1250 driver this results in the following build error in function sbmac_mii_probe error struct mii_bus has no member named phy_map use phy_find_first instead of open coding it commit phy centralise print about attached phy introduces the following build error in function sbmac_mii_probe error phydev undeclared
8693607ae4efe065aa65e26fd6dda8aab7e18ea7	no llc_mlc for hsw the mid-level cache or as its more commonly referred to now as l3 is not setup this way on hsw
d4fb0f256028f16de8e33da7007fcf711c817929	staging comedi icp_multi remove ranglist_ao from boardinfo this variable is not used by the driver remove it
80cc64863aed80efdf89fcc9b30e7940683cb916	staging comedi pcl818 fix board resource region request some of the pcl-818 compatible boards have a fifo that can be used when running analog input async commands this fifo increased the resource range used by the driver request the correct resources used by the board even if the fifo is not used this prevents another driver from trying to use the space modify the attach so that the usefifo flag is only set if we have and irq the board has a fifo and the user wahts to use it fix pcl818_reset so that the fifo is always flushed and disabled if it exists
aedbfd9649c5a9ee8e601f8f35e74ea617371ae5	asoc wm9081 use soc_enum_single_decl just replace with the helper macro no functional change at all
1ce87dd2f0bb8dee1378ec3bff94c4454feaaa30	clk renesas mstp reformat cpg_mstp_clock_register for git diff as the function header of cpg_mstp_clock_register is split in an unusual way git diff gets confused when changes to the body of the function are made and attributes them to the wrong function reformat the function header to fix this
f2d5cf2add74ac066572b5215ba8a33dfcf0b85c	batman-adv main batadv_compare_eth return bool declare the returntype of batadv_compare_eth as bool the function called inside this helper function ether_addr_equal_unaligned also uses bool as return value so there is no need to return int
7b4af793a7a4f8e04175eb6600ba9c8ba855ad20	asoc wm_adsp acknowledge controls should also check the dsp is running we should not be writing acknowledge controls until the firmware is running as in the case of preloaded firmwares the dsp memory may be unaccessible to whilst in the preloaded state this means a write to the control during this time could be lost
218189b7dc847681516285a1af89b6fb0b17a061	staging rtl8723au remove unused struct ndis_802_11_key
430a672c83c3e2e9a96c777a874f345c8d21f929	media media-entity increase max number of pads the dvb drivers may have __number__ pads get the next power of two that would accomodate that amount
7e810a38e6c7166b91968e83dee4cf7a4ef5dc80	kvm lapic rename to rename to since they will handle both apic timer mode and tsc-deadline mode
0cdfe18ad5ae0fbb9417ac2b5808189aaaa54230	remove double extern affs_symlink_inode_operations affs_symlink_inode_operations was already declared extern in
8804f2525a56261b93576a1900185ac2691d138a	acpica update version to __number__ acpica commit e714615fda31cce3df9cfd95ee03c1f2c74b2b5e version __number__ link
30cd85dd6edc86ea8d8589efb813f1fad41ef233	hold reference to fence when creating sync_file fence referencing was out of balance it was not taking any ref to the fence at creating time but it was putting a reference when freeing the sync file this patch fixes the balancing issue by getting a reference for the fence when creating the sync_file link
1c8f52a5e9539600543347bcdefafa1854e07986	btrfs introduce btrfs_next_old_item we introduce btrfs_next_old_item that uses btrfs_next_old_leaf instead of btrfs_next_leaf btrfs_next_item is also changed to simply call btrfs_next_old_item with time_seq being __number__
27504be5c10bdc61761ec0126b3645428598ad91	spi-topcliff-pch add tx-memory clear after complete transmitting currently in case of reading date from spi flash command is sent twice the cause is that tx-memory clear processing is missing this patch adds the tx-momory clear processing
c5136a033fbbb4c452fcc7fcfe6c912cda03c762	video amba-clcd remove unnecessary amba_set_drvdata driver core clears the driver data to null after device_release or on probe failure so just remove it from here driver core change device-core ensure drvdata null when no driver is bound sha1
4f967f6d73746f66514528cc1191025f0b5d69b3	hid sony fix memory issue when connecting device using both bluetooth and usb a previous patch moved most input initialization from sony_probe to sony_input_configured to avoid some race conditions the driver has some special logic to prevent the device to get registered twice in case the user connects it both over bluetooth and usb when this condition happens sony_input_configured returns a failure but sony_probe continues as hid_hw_start doesnt fail as was discussed on linux-input it is acceptable for this function to fail this patch adds a check for the hid_claimed_input flag within sony_probe to determine whether initialization succeeded correctly the flag is not set by the hid layer when sony_input_configured fails
8d3e375e77f09174038b9bfb02b8423cbb187959	convert pointless error checks in set_config to bugs because they all are the ioctl command never calls us with any of these violated also drop a equally pointless empty debug message and also in set_cursor while were at it with all these changes intel_crtc_set_config is neatly condensed down to its essence the actual modeset code or fb update calling code v2 the fb helper code is actually stretching semantics a bit it calls it with null but null
9a30ae2df29c27eca58581862928ee2c7bbdfa76	alsa firewire-tascam off by one in identify_model lets leave space for the nul char otherwise the static checkers complain that we go beyond the end of the array
86d5e657d27851beb0e3e7bf48f13263acc5196a	arm scoop be sure to clamp return value as we want gpio_chip calls to be able to return negative error codes and propagate to drivers we need to go over all drivers and make sure their return values are clamped to we do this by using the ret design pattern
f5c9598b735c55e56998fbd0c2df61d12a418167	staging unisys get rid of devnum pool and dev num devnum pool and devnum are no longer needed
bddd8ddd9f08c7b38b0b311e89a28d74d449d279	constify struct regmap_config the regmap_config struct may be const because it is not modified by the driver and regmap_init accepts pointer to const
263bc3fd6a8e50dc3ef423f36a1ec9cd951a76b8	use dev_get_platdata use the wrapper function for retrieving the platform data instead of accessing directly
7cd10a60c3d0db95bc94073587725adc6c813cc3	ia64 fix a node distance bug in arch ia64 has following definition extern u8 numa_slitmax_numnodes max_numnodes numa_slitfrom num_online_nodes to num_online_nodes is a variable value it can be changed after a node in my practice i found node distance is wrong after offline a node in ia64 platform for example system has __number__ nodes node distances node __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ cat distance __number__ __number__ __number__ __number__ cat distance __number__ __number__ __number__ __number__ after offline node2 cat distance __number__ __number__ __number__ cat distance __number__ __number__ __number__ value is __number__ __number__ __number__
2849a7becb9586a09553680a8b752fdb517b26e3	prevent small buffer overflow in nvme_nvm_identify there are two closely named structs in lightnvm struct nvme_nvm_addr_format and struct nvme_addr_format the first struct has __number__ reserved bytes at the end the second does not gdb p sizeofstruct nvme_nvm_addr_format __number__ gdb p sizeofstruct nvm_addr_format __number__ in the nvme_nvm_identify function we memcpy from the larger struct to the smaller struct we incorrectly pass the length of the larger struct and overflow by __number__ bytes lets not do that
272bf3146f0ae35b17f2f27f4d63fa0392d0eeda	staging csr remove struct csrthread nobody use struct csrthread so remove it
17a68dd7bc25b3671d54b3b371df9b5baf985b20	iwlagn warn about buggy fw that doesnt set seq_rx_frame the way we check if there is host command that should be reclaimed is way too complicated we should have a clear indication from the fw the fw is expected to set the seq_rx_frame bit if the frame was originated by the fw which indicates to the driver that there is no host command to free somehow there seem to have been buggy fw out there hence the very old comment this code checks if we have still buggy fw out there
118b4515aa6916ee7751f29c8b2a3af95abc9783	stm class dummy_stm make nr_dummies parameter read-only changing nr_dummies after the module has been loaded doesnt actually change anything so just make it read-only
54a94fcf2f00c9deb9491d5ab2b5a4022332f47e	add missing error code in spufs_mkgang we should return if alloc_spu_gang fails
12182affc74a8ce1e95bd4feeb1638c55d2ab6fd	mmc core use a default maximum erase timeout in cases when the isnt specified the calculated number of maximum discard sectors defaults to uint_max this may cause a too long timeout for a discard request avoid this by using a default maximum erase timeout of used when we calculate the maximum number of sectors that are allowed to be discarded per request do note that the minimum number of sectors to be discarded is still at least one preferred erase size
165c70f07fee46abcbdbb885f8e90388dbe7ce60	crypto mv_cesa remove redundant of_match_ptr the data structure of_match_ptr protects is always compiled in hence of_match_ptr is not needed
ce657aa81005ddfbdd9c89ec9de31ff713c05ea6	staging unisys check return code properly on visor_copy_fragsinfo_from_skb one call site for visor_copy_fragsinfo_from_skb was checking for an rc of but thhe function doesnt return that it returns correct it
8958f5811ca5f602cfb2987f7977744a458421af	staging wilc1000 rename result in handle_set_ip_address this patch renames result to ret that is used to get return value from wilc_send_config_pkt some functions are used as result others are used as ret it will be changed as ret in all functions to match variable name
15b10c6a60e28f2065389da7fc8af538ea727604	arm kirkwood make kirkwood_disable_mbus_error_propagation static the kirkwood_disable_mbus_error_propagation is not exported or declared elsewhere so make it static to avoid the following warning warning symbol kirkwood_disable_mbus_error_propagation was not declared should it be
7fca40eb003009e09614fb70edb6e48851f3fefc	brcmfmac add module_firmware macros for bcm4356 pcie device the bcm4356 pcie wireless device was added recently but overlooked the fact that the module_firmware macros were missing for the firmwares needed by this device
91d19cd8d589c6a25ed502435a575f026f33d09f	arm mach-shmobile clock-sh7372 remove un-necessary index it is not necessary to have sh7372_xxxx index on static variable
de35c94178d6315f6def773a2137bc82a840f3d8	staging comedi ni_65xx add ni_65xx_num_ports add a function to return the total number of digital digital input and digital output ports on the board each port has __number__ channels bits
01bd90819e670a60c680dd7e1c1d8bb1aad60322	atari_ncr5380 fix transfered typo
d8058469606bfd1b0d6fca830a997ba06f83e5dc	asoc sdp4430 no need to call dapm_pin_enable at init time widgets are connected by default
a5af092245a33965a4b089e8ba489c2db0f7db16	generic-adc-battery fix checking return value of request_any_context_irq on failure request_any_context_irq returns a negative value on success it returns either irqc_is_hardirq or irqc_is_nested
896ddd600ba4a3426aeb11710ae9c28dd7ce68ce	drivers bus check cci device tree node status the arm-cci driver completes the probe sequence even if the cci node is marked as disabled add a check in the driver to honour the cci status in the device tree
138bec76296851e9bb151a451b2b324089cffdf2	staging comedi jr3_pci replace with the jr3_pci driver currently uses the iobase member of its private device data struct jr3_pci_dev_private to store a pointer to its ioremapped register region use the mmio member of the struct comedi_device to store this instead and remove the iobase member the iobase member was of type struct jr3_t __iomem with the boards complicated register layout described by struct jr3_t the mmio member is a generic void __iomem so its value needs converting to a struct jr3_t __iomem for our purposes change the clean-up in jr3_pci_detach to call comedi_pci_detach instead of comedi_pci_disable as that will iounmap for us
3433bf0798356abf2e8b6145ac5633a610c0a8ec	asoc rsrc-card enable multi for dpcm current rsrc-card is assuming __number__ fe cpu __number__ be codec on card but it will support multi card this is prepare for it
e124a32043416ddefaec3c54cc945b7667c00628	ext2 cleanup the confused goto label cleanup the confused goto label since the big lock has been removed
1cc9bd68617f2a92dcd6e4398288341d16cfb5c1	make convert_delimiter use strchr instead of open-coding it take advantage of accelerated strchr on arches that support it also no caller ever passes in a null pointer get rid of the unneeded null pointer check
50730604c9aef89025bf2bed57e9afb15d8b1148	staging vt6656 replace dbg_prt debug messages replace with dev_dbg
066258f4293128bb489e42790637dd6d9b7ff206	arm pxa remove sharpsl_fatal_check function the sharpsl_fatal_check has not been used since pavel machek removed the caller in zaurus c3000 aka spitz fix resume nobody has complained since __number__ so its safe to assume we can just remove the function without this patch building corgi_defconfig results in warning sharpsl_fatal_check defined but not used
7927096868061ff10fdb33b295dc0bcfebe2b35b	drm missed clflushopt in drm_clflush_virt_range with this commit x86 use clflushopt in drm_clflush_virt_range if clflushopt is available on the system we use it instead of clflush in drm_clflush_virt_range there were two calls to clflush in this function but only one was changed to clflushopt this patch changes the other clflush call to clflushopt
f44f07cf3910f84b15b2a78c4933d5946bf409cf	alsa line6 clamp values correctly the usages of clamp macro in are just wrong the low and high values are swapped
268914f4e7a013a4798b5544cce9d9584de99889	dmaengine at_xdmac use format string for dma_addr_t dma_addr_t may be defined as __number__ or __number__ bit depending on configuration so it cannot be printed using the normal format strings as gcc correctly warns in function at_xdmac_interleaved_queue_desc warning format expects argument of type unsigned int but argument __number__ has type dma_addr_t long long unsigned this changes the format strings to use the special format string that prints a dma_addr_t and changes the arguments so we pass the address by reference as required
0b5492d6b53251acab99b1906a328fac56e08be3	add gen to the gpu hang ecode for the brothers in triage
3852587ac62d249f26f89e3fef28c0474cc25729	staging rts5139 rts51x_chip fixed brace coding style issue fixed a coding style issue
4d3ba7e4456e5442df2bd0b77bd1aa4adc137835	use major_minor version for filename load guc firmware from file with major_minor number in filename instead of using symolic link with only major number this change is so that new firmwares can only be used with a kernel change this in case there is a regression with a new firmware it wont be used by default without some testing issue viz-7713 reviewed-by
881f7e86a1e0322fbda42c92a36b13c44120bca2	bluetooth bpa10x add support for set_diag driver callback the bpa-10x devices support tracing operation use the set_diag driver callback to allow enabling and disabling that functionality
4da28766140449e04270246fae310c137180652d	media it913x fix firmware loading errors on some systems the device does not respond or give obscure values after cold warm or firmware reboot this patch retries to get chip version and type __number__ times if it fails it applies chip version and type this patch does not fix warm cycle problems from other operating systems and indeed the reverse applies users should power off cold boot
a3060858c207d944194a30478d30d3e1822e23f3	e1000 look in the page and not in for the last byte the code seems to want to look at the last byte where the hw puts some information since the area is never seen by the hw i guess it does not work as expected we pass the page address to the hw so i in order to get to the last byte where the information might be one should use the page buffer and take a look this is of course not more than just compile tested
1ffd57c1da2a73b0a0e5cd7a6dd52cc49e36bef9	fix device tree linkage of i2c buses properly set the parent device of i2c buses before registering them so that they will show at the right place in the device tree rather than in directly
11b4c175d99481b239993242b14961299477491d	media omap3isp use for boolean vars instead of using __number__ or __number__ for boolean use the defines
fab683eb12e71ac6057dc42dc7d1e5e71e5cba5e	scsi qla2xxxx avoid type mismatch in comparison a recent bug fix added code that does bool logged_out status if logged_out ctio_port_logged_out this looks wrong because we are comparing a boolean with an integer constant ang gcc warns about it accordingly in function qlt_do_ctio_completion warning comparison of constant __number__ with boolean expression is always false logged_out ctio_port_logged_out the correct fix is presumably to make that variable an int
bc4d2c074ac1b55a95a2011bffe1c5ebb590e886	consolidate chained irq handler chained irq handlers usually set up handler data as well we now have a function to set both under replace the two calls with one search and conversion was done with coccinelle expression e1 e2 e3 irq_set_handler_datae1 e2 __number__ bug e2 e3 e3 e2 expression e1 e2 e3 irq_set_handler_datae1 e2 __number__ bug e2 e3 e3 e2
24a42d50efdbb279f26c179e980e3420532fdf2a	qla2xxx incorrect linked list semantic in qlafx00_get_fcport
408bd629badbd4353b238ab6f58001529b274d73	get rid of pointless allocations and copying in ecryptfs_follow_link switch to generic_readlink while we are at it
4096ec993f108b7817900c1b01f364e843d9ded4	staging rts5139 fix quoted string split across lines this patch fixes the quoted string split across lines in
5a772eee5544f4f84139868f7cd05806b805610d	mips use __kernel_off_t not off_t
d61e23e5250e2d189f6bcdac71abf3e997398714	pinctrl sunxi define enable disable irq callbacks some drivers use disable_irq enable_irq and do the work clearing the source in another thread instead of using a threaded interrupt handler the irqchip used not having irq_disable and irq_enable callbacks in this case will lead to unnecessary spurious interrupts on a disable_irq in a chip without a handler for this the irq core will remember the disable but not actually call into the irqchip with a level triggered interrupt where the source has not been cleared this will lead to an immediate retrigger at which point the irq-core will mask the irq so having an irq_disable callback in the irqchip will save us the interrupt firing a time for nothing drivers using disable enable_irq like this will call enable_irq when they finally have cleared the interrupt source without an enable_irq callback this will turn into an unmask at which point the irq will trigger immediately because when it was originally acked the level was still high so the ack was a nop
7c22e645cd742b82ec232e4f2328fc53d247ccea	pcmcia use kstrdup in pcmcia_device_query use kstrdup instead of kmalloc and strncpy
85e2d4f992868ad78dc8bb2c077b652fcfb3661a	dont miss the update currently dl tasks will actually return at the very beginning of rt_mutex_adjust_prio_chain in cases if if goto out_unlock_pi out here else requeue false as the deadline value of blocked deadline taskswaiters without changing their sched_classthus prio doesnt change never changes this seems reasonable but it actually misses the chance of updating rt_mutex_waiters dl_runtimeperiod_copy if a waiter updates its deadline parametersdl_runtime dl_period or boosted waiter changes to class thus force deadline task not out by adding the condition link link
91b0da570722faf2e6a06f999e789405161943b5	staging comedi me_daq fix me_ao_insn_read this function is supposed to return the analog output value for a specified channel the channel number is packed in which is an unsigned int and unpacked using the cr_chan macro currently this function is trying to use the chanspec as an array this works only if a single data value is read fix the function so that the desired channel is determined and all the data returned is from that channel also fix the return the comedi core expects insn_read functions to return the number of data values
23536dfaa3ef5b4e61272ea65ed6c1b15db022ec	remove redudant label there are __number__ labels to mark the same statements replace the __number__ labels with one versatile labe
071aee138410210e3764f3ae8d37ef46dc6d3b42	memcg support hierarchical the file was not hierarchical memory charged to the children was not shown in parents numa_stat this change adds the hierarchical_ stats to the existing stats the new hierarchical stats include the sum of all childrens values in addition to the value of the memcg tested create cgroup a and run workload under b the values of b are included in the under a cd echo __number__ mkdir a run workload in echo cat bash the hierarchical_ fields in parent a show use of workload in cat cat
baa1dee18a0f15477f8b109227c0c8e7a92b7048	visstrim_m10 register i2c devices after i2c busses have been added
11f20322e00fb48e53ac66d2889cec3341a8e814	move the null sg handling out from rotate_pages rotate_pages checks to see if it got called with a null sg and then goes to extract it from it always gets called with a null sg for the first plane so moving the initial assignment out into intel_rotate_fb_obj_pages seems less special-casey
e8fdea21e167f2f7ddc8c42b967a261f55482626	staging rtl8192e remove dead code cmpk_handle_query_config_rx remove cmpk_handle_query_config_rx function it is called once does some calculation but generates no output it has neither return value nor modify its parameters
241896ce8d112f10dae5538be41fad9eeb9e5e46	regulator ab8500 optimize ab8540_aux3_regulator_get_voltage_sel we can save a register read operation in some case if read expand_register first if bit is set no need to read voltage_reg
2a0bdff6b958d1b2523d2754b6cd5e0ea4053016	ahci_xgene fix the dma state machine lockup for the identify device pio mode command this patch fixes the dma state machine lockup due to the processing of identify device pio mode command the x-gene ahci controller has an errata in which it cannot clear the bsy bit after the pio setup fis the dma state machine enters cmfatalerrorupdate state and locks up this patch also removes the dma restart workaround from the read_id function as the read_id function is only called by libata layer for ata_internal commands but for some cases eg port multiplier and udev the framework will enumerate using scsi commands and it will not call read_id function
368504c00a2dfce637a55fcbf0cc0339f9ff5ca3	usb renesas_usbhs kill dead code in usbhs_probe usbhsc_drvcllbck_notify_hotplug always returns __number__ so its rather pointless to store and check its result for being __number__
f94833929032ad23412d3970beed6769a2fdbc19	perf stat add support for metrics in interval mode now that we can modify the metrics printout functions easily its straight forward to support metric printing for interval mode all that is needed is to print the time stamp on every new line pass the prefix into the context and print it out v2 move wrong hunk to here committer note before perf stat __number__ sleep __number__ time counts unit events __float__ instructions __float__ cycles __float__ instructions __float__ cycles after perf stat __number__ sleep __number__ time counts unit events __float__ instructions __float__ insn per cycle __float__ cycles __float__ instructions __float__ insn per cycle __float__ cycles link
b7126ef78612a3d4a37aadf39125cff048cebb9b	perf utils use sizeofbuf __number__ in readlink call ensure that we have space for the null byte in buf link
f288cf416ec22de3c5bc18148b6f7620aa32409b	rtc rtc-davinci use devm_kzalloc use devm_kzalloc and remove the error path free and the unload free as devm functions take care of freeing resources
37888f71e2c98b62a82a33133ff89899264f862f	i2c i2c-bcm2835 deprecate class based instantiation warn users that class based instantiation is going away soon in favour of more robust probing and faster bootup times
72e53aed1d077166b63537b2b08dc89af60d6c9a	greybus svc change gb_svc_type_link_config to the greybus specification reserves svc type for timesync svc add support for the link config operation allocated the next available type which conflicts with the specification change the type to to ensure kernel and specification agree
f12ebb3911d742e5c217df52b3f1a3c224f566f9	staging lustre include linux libcfs remove spaces at the start of a line this patch fixes warning in file warning please no spaces at the start of a line
4620020b5d7ca34d1c03fa98b0ca457320cb7d71	iwlwifi set rfkill in internal state of the transport we didnt update the internal of the pcie transport when we read the rfkill state directly fix that
fe2a4297b40c0ccee0e2276b06fb0afe1fc63da4	usb gadget pxa27x fix registration whenever gets called gadget driver has already being bound to the udc controller which means that had to be already initialized and added to driver model this patch fixes pxa27x mistake
ff9e7621586ff8b86a18cfbb7c437c277ebc1970	iio adc xilinx remove field for driver there is no need to init field based on the patch from peter griffin mmc remove field for drivers using module_platform_driver this patch removes the superflous field for drivers which use the module_platform_driver api as this is overriden in platform_driver_register anyway
819f1a64beb6c962218bd348a6f19aff718cde6c	acpica update to version __number__ version __number__
250a51caa65cc7637f3596300d3591a2c924b32e	media missing break statement added in fix missing break that so that n_layers are not accidentally incorrect kernel version
267cbe047cb4f6a3a6337029fc60862be1cf437d	can at91_can directly define at91_mb_rx_last of deriving it from at91_mb_rx_first and at91_mb_rx_num this removes a level of computation when switching the driver from compile time constants to runtime values
0ed35abc2b569e94498705d250c4767c5284f643	perf report fix output alignment when used current perf report output is broken if is used combination with make things worse this patch fixes it as follows before sleep k trace_hardirqs_off sleep k __find_get_block_slow sleep k lock_release_holdtime sleep k native_write_msr_safe after sleep k trace_hardirqs_off sleep k __find_get_block_slow sleep k lock_release_holdtime sleep k native_write_msr_safe link
6e6cc9f319bf81b292ceb281228ab1d261172cac	iwlwifi disable greenfield transmissions as a workaround theres a bug that causes the rate scaling to get stuck when it has to use single-stream rates with a peer that can do gf and sgi the two are incompatible so we cant use them together but that causes the algorithm to not work at all it always rejects updates disable greenfield for now to prevent that problem the mvm driver currently only works on devices that dont support greenfield anyway but better be safe and not allow us to forget about this
2bdd163cfd262914e8f6152e37aebea2034f801e	hid wacom set default device name to value from allocated input devices should not use the pen_name by default since we do not know at that point in time if that is an appropriate choice of name instead use the tool-agnostic name that is stored in the devices wacom_features structure this also has the nice side-effect of requring us to be explicit about the naming of the pen device as we already are for touch and pad devices
64dbbdfef245f67504ec403a5aebfcc7b92bd8c1	add connectx-5 to list of supported devices add the upcoming connectx-5 devices pf and vf to the list of supported devices by the mlx5 driver
0e378df15cd87f540f1ba9503e4aa039e1c72741	btrfs cut down stack usage in btree_write_cache_pages this adds noinline_for_stack to two helpers used by btree_write_cache_pages it shaves us down from __number__ bytes on the stack to __number__
a9196b0bd3284fa3388998c9208a708a8f2e4c83	rtc-puv3 irq remove irqf_disabled this flag is deprecated so is removed now
a25fc871b002c51944c05b9a09f1526dfbe32d39	use apis in apis are device managed and make error handling and code cleanup simpler
467e081d23e67f6216cbe0df911bd5017f1f0b55	mmc atmel-mci use probe deferring if dma controller is not ready yet return probe defer if requesting a dma channel without a dma controller probed
0b25e9fa01fc9ed333d266172128ba37d44cd7be	staging add missing releases in mg_get_local_ekb and mg_get_icv mg_get_local_ekb and mg_get_icv used to return with an error code before releasing all resources this patch add a jump to the appropriate label ensuring that the resources are properly released before returning this issue was found with hector
9e295ac14d6a59180beed0735e6a504c2ee87761	acpi ec reduce ec_poll by referencing the last register access timestamp timeout in the ec_poll doesnt refer to the last register access time it thus can win the competition against the acpi_ec_gpe_handler if a transaction takes longer than but individual register accesses are less than in some cases it can make the following silicon bug easier to be triggered gpe en is not wired to the gpe trigger line so when gpe sts is already set when __number__ is written to gpe en no gpe can be triggered this patch adds register access timestamp reference support for ec_poll to reduce the number of ec_poll invocations
236c5441d70312242b5b32d229259930046a80e5	media v4l make sure we hold a reference to the v4l2_device before using it v4l2_device_disconnect calls dev_get_drvdata and dev_set_drvdata on the device it received in v4l2_device_register get a reference to the device in v4l2_device_register to make sure it wont disappear as long as we need it
0c4e4020f0145ed84b0ef9e3fb79c4a022e77e47	qdisc meta return enomem on alloc failure rather than returning earlier value einval return enomem if kzalloc fails found while reviewing to find another einval condition
b8a5a7cebded23eb311b8db73a11ed23b4135170	hwmon smm665 convert to use devm_kzalloc marginally less code and eliminate the possibility of memory leaks
4b6b35f55ca81d3bfdec63b0adb61798702ceb2e	kvm add constant to represent kvm msrs enabled bit in interface this patch is simple put in a different commit so it can be more easily shared between guest and hypervisor it just defines a named constant to indicate the enable bit for kvm-specific msrs
48e48a70c08a8a68f8697f8b30cb83775bda8001	openvswitch make generic netlink group const generic netlink tables can be const
34722277045f84d0ee618865d02030a44b1ed257	bluetooth fix check for re-enabling advertising there are many different places that can disable le scanning but we only want to re-enable advertising in hci_cc_le_set_scan_enable for a very specific use case which is when the active scanning part of start discovery is complete because of this fix the discovery state check to test for the exact state
59948db3be76099b14c7103d0f46c5454b173c3a	nfs fix pnfs regression with directio reads commit nfs create an read_pageio_init function did not modify the call in preventing direct io from using pnfs this reintroduces that capability
f8cc3465fbe730c536b2fd8a461b9e0db30087e8	scsi qla4xxx remove unused code from qla4xxx_set_ifcb removing unused code as fw does not need any value in mbox-5
496259048e6c75a212fa1c5bb863cfd6b008903c	drm fix typo in correct spelling unsuported to unsupported in
0e03e3f8ea2c8c1f1fe099932c1c4f34d44d5231	serial bfin_uart remove casting the return value which is a void pointer casting the return value which is a void pointer is redundant the conversion from void pointer to any other pointer type is guaranteed by the c programming language
752f5216f1eaabb0cfa84eaecd0ce17d79c7d2cf	round up msi-x requests the pseries firmware currently refuses any non power of two msi-x request unfortunately most network drivers end up asking for that because they want a power of two for rx queues and one or two extra for everything else this patch rounds up the firmware request to the next power of two if the quota allows it if this fails we fall back to using the original request size
81be24d263dbeddaba35827036d6f6787a59c2c3	lockup in d_invalidate with simultaneous calls its not hard to trigger a bunch of d_invalidate on the same dentry in parallel they end up fighting each other any dentry picked for removal by one will be skipped by the rest and well go for the next iteration through the entire subtree even if everything is being skipped morevoer we immediately go back to scanning the subtree the only thing we really need is to dissolve all mounts in the subtree and as soon as weve nothing left to do we can just unhash the dentry and bugger off
c9733b78ca4734a10e1c9b7a23b44fc1736d9daa	greybus firmware fix incorrect firmware files name all the id-fields are __number__ bit long instead of __number__ bits and so we will need __number__ characters per field instead of four also the stage field is only one byte long and so needs just two characters to represent it
7b711623e1924b4ca1b06610f694c71b0feb05f9	qla2xxx incorrect debug level on mailbox command print
c0f5b82cd1a839090db19009ab126a8ad4a7602d	catch abuse of a bit tricky since __number__ is also a valid constant v2 add drm_debug chris testcase
8b6e70fccff27121430114b4507f0adfb790752f	arm64 traps correctly handle with xzr currently we hand-roll xzr-safe register handling in user_cache_maint_handler though we forget to do the same in ctr_read_handler and may erroneously write back to the user sp rather than xzr use the new helpers to handle these cases correctly and consistently
1cedfa317eb15a82b4e44ed868f4e451238d5aea	staging sep fix typo in printk within sep driver correct spelling typo in printk
fceb55d41508c01ac05f1c9382d7efddcdf71409	net mvpp2 add support for an additional clock needed for the variant of the network controller needs an additional clock the mg clock in order for the ip block to operate properly this commit adds support for this additional clock to the driver reworking as needed the error handling path
99672f32aa4ba0f0cc3e8a15f3c0614e63c2851b	mtd mtd_speedtest use prandom_bytes use prandom_bytes instead of equivalent local function
26cbd3073394b966654294c8cb9cb2fec870c567	regulator da9055 fix checking wrong value in da9055_gpio_init check for the case gpi pin is muxed with regulator to select the regulator register set for voltage ramping
b569ad34926defcff998f214afeb260331165985	nfsv4 nfs4_proc_async_renew should use a gfp_nofs allocation we shouldnt allow the renew daemon to do direct reclaim on the nfs partition
fae7e4d39373305cf505d1f0871a4491897d56f9	fix branch condition evaluates to a garbage value in complains that warning branch condition evaluates to a garbage value if this can happen in p80211knetdev_hard_start_xmit if if wlan_device_open evaluates to true the execution flow then continues at the failed label where is used without being initialized first initialize the data field to null to fix this issue
f13c2ef368d94b7f0bb7b89ad45a9370e3044ce0	extract i9xx_set_pll_dividers these two writes are the very last hw writes from the on pre-gen5 hardware as usual vlv is a bit different so this here is just warm-up
756a2eed67e61e9596c2b49a787441c2e0daf1e1	usb wusbcore set packet count correctly on isoc transfers this patch correctly sets the dwnumofpackets field of the hwa transfer request for isochronous transfers with multiple segments previously all segments used the value that was set for the first segment which may not be correct
56189b5f2f0f386838f278e93654d2e2cbb51c9a	ipmi_ssif remove an unused module parameter
f474ba9d9f275fc3bfe459b48bfc17ddd8e1f4cb	mips pci make pcibios_set_cache_line_size an initcall in preparation for allowing configurations in which pcibios_init is not included make pcibios_set_cache_line_size an initcall arch_initcall is used such that it runs before the pcibios_init subsys_initcall for platforms that continue to use it patchwork
de82a01befdd33f6a1c050c7f888e2fa9949f48e	x86 msr fix cpu hotplug callback registration subsystems that want to register cpu hotplug callbacks as well as perform initialization for the cpus that are already online often do it as shown below get_online_cpus for_each_online_cpucpu init_cpucpu put_online_cpus this is wrong since it is prone to abba deadlocks involving the cpu_add_remove_lock and the when running concurrently with cpu hotplug operations instead the correct and race-free way of performing the callback registration is cpu_notifier_register_begin for_each_online_cpucpu init_cpucpu note the use of the double underscored version of the api cpu_notifier_register_done fix the msr code in x86 by using this latter form of callback registration
d5025da5e6cdbd992f341e99d976dd67f87e368b	remove extra space before line removed extra space at beginning of a statement to resolve checkpatch errors and meet kernel coding standards in
8ade6039b8404a28a7f76eac37a92c464b69499a	eeprom fix warnings no need to set here the core will do it generated by
162d1b10d4d38065efec690c2b05ee90dfcf170c	introduce helper domain_pfn_within_range to simplify code introduce helper function domain_pfn_within_range to simplify code and improve readability
6bce1974f64aba108ad344cb2ef0110d9c09ebd2	soc samsung pm_domains add new exynos5433 compatible add a new compatible string for exynos5433 because it uses the value instead of for domain registers
02519d3397b57bf723f6df69c92b0b66ecafb11a	thermal kirkwood fix valid check for thermal register the correct value is obtain by first shifting the register by the offset later applying the valid mask and finally invert the result this check was lacking an extra parenthesis to be strictly correct
1b09a0c29034eaf68bad9f8821531ebd194af3f7	fix a sparse warning fix the warning about the usage of plain integer as null pointer
7378c184218227c5b936e3d50c6f03c9e127af00	media pvrusb2 clean up pvr2_hdw_get_detected_std move full implementation of pvr2_hdw_get_detected_std actually include pvr2_hdw_get_detected_std
f6f926885faa07aa9f54617b4e59fa33074500f5	mmc sdhci disable interrupt before free_irq current code missed disabling interrupts before free irq which is shared notice below comments for function free_irq on a shared irq the caller must ensure the interrupt is disabled on the card it drives before calling this function original code has below issue during when multiple sd hosts share the same irq __number__ assume there are two hosts host1 for emmc while host2 for sd share the same mmc irq __number__ when system suspend host2 will be suspended before host1 so the sequence is below step1 irq handler for host2 removed step2 irq handler for host1 removed and irq disabled system suspended system resumed step3 irq enabled and the irq handler for host1 restored step4 irq handler for host2 restored __number__ so there is the buggy time slot that the irq is enabled but the irq handler for host2 is removed then host2 interrupt can be triggered but cant be handled at that moment
9d4d65748a5ca26ea8650e50ba521295549bf4e3	vfs make mounts and mountstats honor root dir like mountinfo does as we already show mountpoints relative to the root directory thanks to the change made back in __number__ change show_vfsmnt and show_vfsstat to skip out-of-root mountpoints the same way as show_mountinfo does
ca9f9f703950e5cb300526549b4f1b0a6605a5c5	fix bad use of dev_id dev_id should be set for multiple netdevs sharing the same mac which is not the case here
f6085cb45b0805f9daee9b68079c1a33c039d7ac	staging comedi rti802 use comedi_subdevice readback use the new comedi_subdevice readback member and the core provided for the readback of the analog output subdevice channels
c1109558ae0f07a3434357cd26203bfc7adfea75	nfs fix error handling in __nfs_pageio_add_request handle the case where nfs_create_request returns an error
1a85d66bcc90e2cbdf04f70d6586b82532142e85	remove duplicate check in pcibios_fixup_bus pci_read_bridge_bases already checks if the pci bus is root bus or not so we neednt do same check in pcibios_fixup_bus and just remove it
bc88f11baf5a7e6671eac6fe3131c087d71a646f	remove redundant runtime pm management the device already asks the core to hold a runtime pm reference while it is active so it is redundant to open code that in the driver itself
1e4cf249a43da5c441c1025aca588ca65185fb61	rt2800 allow to reduce tx power on devices not exporting power limit some rt2800 devices dont have their calibrated max eirp tx power in their calibration data for those devices reduce tx power according to difference between regulatory max channel power and requested tx power this patch is based on helmut schaa work
0e93cdd4a94c16f646ad7d10ed5d0ca64e8de424	trim the flush for the execlists request emission at the start of request emission we flush some space for the request estimating the typical size for the request body the common tail is now much larger than the typical body so we can shrink the flush substantially
9a3ca7240bc2d300cb6b9b977bbaf475648113da	staging rtl8188eu standardize test for null the test for null of the return variable of functions was changed from ret null to to match the standard coccinelle was used with semantic patch expression e identifier id f statement s id when any when id e if if s
154a0fddd4275aa93f4683705579a7d8ec3d177b	asoc wl1273 fix enum ctl accesses in a wrong type codec mode and audio switch ctls in wl1273 codec driver are enum while the current driver accesses wrongly via they have to be via instead
0e5ffb317d7f861c309b0ab679ed2f59e9f72adf	perf evlist tolerate null maps in propagate_maps tolerating null maps in perf_evlist__propagate_maps so we dont need to pass evlist with both cpus and threads maps defined link
211816eccb494b25f96e6bd492292d9d1f6ffda5	exclude ccid for platforms without it
3f30849f1f18b852f60ed04c7136967ec3a314a7	stmmac dwmac-socfpga remove redundant dev_err call in socfpga_dwmac_parse_data there is a error message within devm_ioremap_resource already so remove the dev_err call to avoid redundant error message
d9098c551a5d96df61cd4703866e727d7b1a2af8	staging rtl8192u correct open brace placement this is a patch to move open braces to the appropriate lines in two instances in
2379bdbc6c37ad9db6538dbe8f56f18968b566ad	staging fsl-mc fixed warn_on in fsl_mc_resource_pool_remove_device check that resource is not null before de-referencing it
51c4491457e996200db64fda51fe456c124b738a	staging xgifb drop some more useless defines setlcdstdmode is not supported as of staging xgifb drop code for legacy vga modes disablelcd24bpp defined to zero was never realy useful and went away with aa56b2790a8b staging xgifb vb_table delete xgi21_lcdcaplist
774cce1ebc94bd31fb21123102b646571a98ddd8	staging rtl8188eu use module_usb_driver macro
e4e55360dd6b2263bbbc83bf0f04b0bd9bb1f8fd	greybus core rename greybus_module_match greybus_module_match doesnt match modules anymore but bundle devices and should be named correctly though we can use greybus_bundle_match as well rest of the kernel uses terminology like greybus_match_device and so choosing that instead compile tested
46571889ec435f1bf29d9094f062948b26630723	usb musb core remove unnecessary reg access from resume irq when musb is operating as host and a remote wakeup fires up a resume interrupt will be raised at that point suspendm bit is automatically cleared and resume bit is automatically set remove those two from irq handler
e29f0d55e2b98f630d86892688a00a9d820b9989	video fbdev bt431 correct cursor format control macro the bt431 cursor generator supports simultaneous generation of a __number__ x __number__ and a cross hair cursor in which the cursor format control bit bit d4 of the command register specifies whether the contents of the cursor ram are to be logically exclusive-ored logical zero or ored logical one with the cross hair cursor rename the relevant macro accordingly references __number__ bt431 monolithic cmos __number__ x __number__ pixel cursor generator brooktree corporation document number l431001 rev j
9aaf2cea4e63ed5ccec728f550e87bab61a571e4	scsi qla2xxx only complete dcbx_comp and lb_portup_comp for virtual port index __number__
7738789fba09108a28a5fb4739595d9a0a2f85fe	selftests fix spelling mistake itertation iteration fix spelling mistake in print test pass message
0d749519f0441144f7da53e157d11f0680c15313	staging lustre drop unnecessary cast this patch does away with the cast on void as it is unnecessary semantic patch used is as follows expression x e type t identifier f t t t e
85e945253955f399c2aacd220423a5e298e963b8	virtio_net call dev_kfree_skb_any instead of dev_kfree_skb replace dev_kfree_skb with dev_kfree_skb_any in start_xmit which can be called in hard irq and other contexts start_xmit only frees skbs that it is dropping
c994ead62ce9599e56344be9b3bead08f242aa79	clarify and extend wb setup on apus and asics use family rather than dce check for clarity also always use wb on apus there will never be agp variants
d06cc416f517a25713dedd9e2a9ccf4f3086c09a	bluetooth fix deadlock and crash when smp pairing times out the l2cap_conn_del function tries to cancel_sync the security timer but when its called from the timeout function itself a deadlock occurs subsequently the null thats supposed to protect multiple calls to l2cap_conn_del never gets cleared and when the connection finally drops we double frees etc which will crash the kernel this patch fixes the issue by using the hci_conn_le_smp_pend for protecting against this the same flag is also used for the same purpose in other places in the smp code
e13dcc1ab593452b99c39de2cb588c39f6d6a7e9	ppc epapr create define for return code value of success
5673bc5a863bd4391eab5bb85277f0f1dd1dca50	switch to request_irq the current code uses setup_irq while it could perfectly use the much simpler request_irq switch to that link
363dc73acacbbcdae98acf5612303e9770e04b1d	udp be less conservative with sock rmem accounting before commit udp use its own memory accounting schema the udp protocol allowed sk_rmem_alloc to grow beyond the rcvbuf by the whole current packets truesize after said commit we allow sk_rmem_alloc to exceed the rcvbuf only if the receive queue is empty as reported by jesper this cause a performance regression for some small values of rcvbuf this commit is intended to fix the regression restoring the old handling of the rcvbuf limit
7baf04261062826ea225ab23e07c541e279143fa	mtd cmdlinepart make the partitions rule more strict huang shijie explains assume we have a nand chip and we set the partitions in the command line like this in this case the partition truncating occurs the current code will get the following result cat dev size erasesize name mtd0 __number__ __number__ boot mtd1 __number__ __number__ kernel it is obvious that we lost the truncated partition rootfs which should be in this case also forbid partitions
1ae2605e55c6ef640238fb2e03d044119acd9a37	ieee802154 improve packet registration this patch improves the packet registration handling instead of registration with module init we have a open count variable and registration the lowpan packet handler when its needed the open count variable should be protected by rtnl
43b6329f982092d8fe5c953940609ca8ee3055df	net phy use network device in phy_print_status phy_print_status currently uses which will usually result in printing something along those lines for device tree aware drivers libphy __number__ link is down libphy __number__ link is up this is not terribly useful for network administrators or users since we expect a network interface name to be able to correlate link events with interfaces update phy_print_status to use netdev_info with which is the backing network device for our phy device the leading dash is removed since netdev_info prefixes the messages with already
3d04dd2f960aa01a09593576f4df56a052ef32a7	fmc staticize local symbols this local symbol is used only in this file fix the following sparse warnings warning symbol fwe_probe was not declared should it be warning symbol fwe_remove was not declared should it be
734b5a2addd333829a6d647ee14a3609c7a87c44	usb gadget add endpoint capabilities flags introduce struct usb_ep_caps which contains information about capabilities of usb endpoints supported transfer types and directions this structure should be filled by udc driver for each of its endpoints and will be used in epautoconf in new ep matching mechanism which will replace ugly guessing of endpoint capabilities basing on its name
fedc00455ccc1f928066528da87b0c7b143de647	btrfs fix typo in log message when starting a balance the recent change titled btrfs check metadata redundancy on balance already in linux-next left a typo in a message for users metatdata metadata
8f27c4abc2cd7a31adb896a6b4861cdcb921d063	asoc topology only use valid names of pcm for the kernel dai dai link user space may not always set a valid fe dai drivers name fe dai links name stream name or cpu dai name in such cases there are all zero in these name string buffers of a topology pcm object this patch will only duplicate valid name strings for kernel fe dai driver and dai link when creating them from topology and free the name strings when destroying them
e6cbd6a44d8e263073808da9f295e502d15dc3fe	ecryptfs remove check for if an array is null it doesnt make sense to check if an array is null the compiler just removes the check
6b442bc81337913eb775965a67ffdb8a36935422	nohz fix hang simon horman reported this crash on a system with high-res timers disabled but nohz enabled cut here kernel bug at so something enabled interrupts in the periodic tick handling machinery and that code path indeed has a pair in tick_nohz_switch_to_nohz which causes havoc fix it this patch also fixes a hang reported by ingo molnar link
1d8a1337f3c8346447cbf1db6af468df6cf58c76	consolidate init_hw vfunc
79aa05a24f01bcb0cfbac3deea4f12d9b4f64ba9	fcc fixing a bug causing to fcc port lock-up the patch fixes fcc port lock-up which occurs as a result of a bug during handling within the tx_startup function in the address of last bd is not calculated correctly as a result of wrong calculation of the last bd address the next transmitted bd may be set to an area out of the transmit bd ring this actually causes to port lock-up and it is not recoverable
8c5c6fad61f9540a977e5731a8ae3bd8ba9083cb	signedness bug in the problem here is that unsigned i is always greater than or equal to zero these loops mostly have a second check for i __number__ so only the last two are actually buggy the rest is just cleanup bug __number__ kv_force_dpm_highest doesnt have an i __number__ check so its a potential forever loop bug __number__ in kv_get_sleep_divider_id_from_clock there is a typo and the test is reversed vs so we never enter the loop that means normally we return kv_max_deepsleep_divider_id __number__ the return value from here is saved in and i wasnt able to determine how that is used this is a static checker fix and i have not tested it
f0b4405687f8b35173575be8493bf2af84b85091	fix fp cb tuning limits for lvds only on ibx should we set the limiting factor to __number__ unconditionally for dual-channel mode on __number__ only applies when the lvds refclock is
ed9831407bcc73abd6cb80549d5d028a8809a488	openrisc idle delete pm_idle pm_idle on openrisc was dead code
b84830527645dfe7b7a5cc03518e3c791b4ee9e0	n_tty fix unsafe update of available buffer space receive_room is used to control the amount of data the flip buffer work can push to the read buffer this update is unsafe cpu __number__ cpu __number__ n_tty_read n_tty_set_room left of n_tty_receive_buf data to n_tty_set_room left of left left receive_room is now updated with a stale calculation of the available buffer space and the subsequent work loop will likely overwrite unread data in the input buffer update receive_room atomically with the calculation of the available buffer space
0f51c4fa7f60838a87cd45e8ba144dddcd4c066c	pmem flag pmem block devices as non-rotational they are effectively ssds as far as userspace is concerned
606c7e6c1b02054febd78aac1d3cff448c7bd052	iio remove led3 input channel input channel led3 is only an alias for stage aled2 this virtual channel does nothing for us remove this channel
f90272f432f7515044d9e13a6fa2c8bf1ac14838	staging media omap1 replace clk_get with devm_clk_get devm_clk_get allocated resources get released when a driver detaches replace clk_get with devm_clk_get and remove corresponding data releasing function clk_put from probe and remove functions of a platform device also remove an unnecessary label this change was made with the help of the following coccinelle semantic patch identifier p probefn removefn struct platform_driver p probefn removefn identifier pdev expression e probefnstruct platform_device e clk_get devm_clk_get depends on identifier
d329581493802cede83ca672093588f399d02a65	crypto sha512_generic set cra_driver_name sha512_generic should set driver name now that there is alternative sha512 provider sha512_ssse3
6f901b737691ef8b8c09de4a807f9831264ea0de	net phy mdio_bus fix checkpath error
4302055b29cbc8566aaa5eb7f594ea9cc78ebf41	be more careful to drop the gt wakeref since we can retire requests from multiple paths we cannot assume that i915_gem_retire_requests is the sole path on which we can transition to __number__ a consequence of this is that we would skip the function if we had already retired all the requests and not scheduled the idle worker this is fallout from changing the routine from considering active_engines for which it was the only consumer to active_requests v2 move kicking the idle working to i915_gem_request_retire otherwise we could postpone the idle callback everytime we called retire_requests even though we did no work v3 we only need to move the idle work kicking v4 drop the as we may be called from the shrinker in the middle of constructing a request before we have marked the device awake v5 add a bug_on for active_requests underflow upon retirement joonas
fd26981cf53ee91951a92fae53416e4ce639164c	ath9k_hw fix regression of register offset of the commit ce407afc10 introduced regression for register offsets some of the register offsets are common for except ar9380 fix that
cd9003a200ad1fdde20e7e687d8e376b62e171cf	asoc switch over to use snd_soc_register_component on sh4 ssi
c20151dff8a6d503c0d0cc4387c33a618cdabcb7	spi add support for specifying mode via device tree this patch allows to specify that a spi device is connected in mode via device tree
96b585267f552d4b6a28ea8bd75e5ed03deb6e71	revert acpi hotplug pci runtime resume bridge before rescan this reverts commit bisection showed that it was the root cause for a resume hang on a bog-standard all-intel laptop sony vaio pro __number__ and reverting fixes the hang
15c6f6562317eb18e686a89735aa8c524d88096e	make sure that the multisampling is off by default svga device creates nonmaskable multisampling surfaces in which case multisamplecount of __number__ means the first quality setting of nonmaskable multisampling surface lets change it to make sure that the backends know that multisampling is really off
e5f6f564fd191d365fcd775c06a732a488205588	bnxt add a missing rcu synchronization add a missing synchronize_net call to avoid potential use after free since we explicitly call napi_hash_del to factorize the rcu grace period
5bc5c307653cbf8fe9da6cbd8ae6c6bd5b86ff4b	netfilter nf_tables use rcu-safe list insertion when replacing rules the patch netfilter nf_tables add insert operation did not include rcu-safe list insertion when replacing rules
08a72e4c0a8086074f7a499306c45d33c50a8981	media media coda use full device name for request_irq this will help to debug driver allows us to see the full name of the device through cpu0 __number__ __number__ mxc-avic __number__
b51ca34a262f5a3556eb6f1d05fd88503927d3ae	sfc efx_ethtool_get_ts_info can be static
eb82fbcf82965c18da11ada92b82f1400b36e0ad	orangefs silence harmless integer overflow warning the issue here is that in orangefs_bufmap_alloc we do bits_per_long gfp_kernel if we choose a like then it means the div_round_up ends up having an integer overflow the result is that kzalloc returns the zero_size_ptr and there is a static checker warning but this bug is harmless because on the next lines we use to do a kcalloc that has integer overflow checking built in so the kcalloc fails and we return an error code anyway it doesnt make sense to talk about negative sizes and blocking them silences the static checker warning
5db496b9c808270e9e569fa721d1ecdd8f145142	serial __number__ simplify capabilities reset at port unregister since has just reset to port_unknown capabilities are reset to which is __number__ removes unnecessary dependency on uart_config
2632d18d3ae75f6bdb79550134d1087fbd809e5f	remove counters table allocation from vf flow since virtual functions get their counters indices allocation from the pf allocate counters indices bitmap only in case the function isnt virtual also check that the device has counters to allocate before creating the indices bitmap table
b2dde6fca37e947628b82ae8f35e183ff112d07c	f2fs retrieve io write stat from the right place in the following patch f2fs split journal cache from curseg cache journal cache is split from curseg cache so io write statistics should be retrived from journal cache but not otherwise it will get __number__ and the stat is lost
55d990592f83cbfabfefde6e32bf27d4e7493d0c	mac80211 allocate only one rx queue we dont have multiple rx queues so theres no use in allocating multiple use alloc_netdev_mqs to allocate multiple tx but only one rx queue
fb51ff40956ddef8f7d9448265ad3edc67eb0b2b	log significant events at the info level currently to establish whether guc firmware has been loaded or submission enabled default drm log level one has to detect the absence of the message saying that the load has been skipped and infer the opposite it is better to log the fact guc firmware has been loaded submission enabled explicitly to avoid any guesswork when looking at the logs v2 log message polish chris future proof by reporting found firmware version michal link
2ab9ba0fdfa20e81c4454c57f534585a264cb238	iwlwifi pcie returning positive instead of negative there is a missing character here so we return positive enomem instead of negative the caller doesnt care all non-zero returns are translated to in iwl_pcie_nic_init this is just a cleanup
5f7cab0a9b0651e8cb125eb7ce2b1cb21f48b24f	staging comedi cb_pcimdas remove thisboard and devpriv macros these macros rely on a local variable having a specific name remove them and use the comedi_board helper to get the thisboard pointer
a426f99c91d1036767a7819aaaba6bd3191b7f06	avoid redundant idle_cpu call in update_sg_lb_stats part of the responsibility of the update_sg_lb_stats function is to update the idle_cpus statistical counter in struct sg_lb_stats this check is done by calling idle_cpu the idle_cpu function in turn checks a number of fields within the run queue structure such as and with the current layout of the run queue structure and are in separate cachelines the variable is checked first followed by nr_running as nr_running is also accessed by update_sg_lb_stats earlier it makes no sense to load another cacheline when nr_running is not __number__ as idle_cpu will always return false in this case this patch eliminates this redundant cacheline load by checking the cached nr_running before calling idle_cpu link
70efde2a2920c12f2b14eb640944ca7e61b2c02d	pci rename pci_release_bus_bridge_dev to pci_release_host_bridge_dev this renames pci_release_bus_bridge_dev to pci_release_host_bridge_dev and moves it next to pci_alloc_host_bridge no functional change bhelgaas split rename move out of symmetry patch
441fbd25954c30d821187203f7dc941bf7b6d792	scsi fnic host reset returns nonzero valueerrno on success fixed appropriate error codes that returns negative error number on failure and __number__ on success fnic_reset is used directly by the fc transport callback issue_fc_host_lip which requires a negative error number on failure
ac01efebb1075a51a2803237159a440b71383117	mtd nand atmel use the mtd instance embedded in struct nand_chip struct nand_chip now embeds an mtd device make use of this mtd instance
e4245ea898797f606cf2260c9c1970414b96af78	drm prevent null deref in drm_name_info if a driver does not have a parent or never sets the unique name for itself then we may proceed to chase a null dereference through testcase link
6b9c75aca6cba4d99a6e8d8274b1788d4d4b50d9	x86 handler set page to cover only per we only map a single __number__ mib page per even though we should be able to do this a full gigabyte at a time with no additional memory cost this is a workaround for a broken amd reference bios and its derivatives in shipping system which maps a large chunk of memory as wb in the mtrr system but will if the processor wanders off and tries to prefetch that memory which can happen any time the memory is mapped in the tlb link hpa rewrote the patch description
51a00daf7369b581e5241c5cae5924886deda261	tipc fix bug in socket reception function in commit c637c1035534867b85b78b453c38c495b58e2c5a tipc resolve race problem at unicast message reception we introduced a time limit for how long the function tipc_sk_eneque would be allowed to execute its loop unfortunately the test for when this limit is passed was put in the wrong place resulting in a lost message when the test is true we fix this by moving the test to before we dequeue the next buffer from the input queue
70039aa7c6c182c488ec23a9669d9f6b21aebe16	bonding convert bond_has_slaves to use the neighbour list the same way as it was used for its own slave_list
f130c2205dba8f02372c794c6c4e6cc4906376f4	simplify channel state management the only allowed channel state changes are those that change the channel state into a state with a higher numerical value this allows to merge the functions srpt_set_ch_state and srpt_test_and_set_ch_state into a single function
f64ffda60e2c9b69ff2125e90cfca234b2eece2b	uart enable tx wakeup bit for wer reg wer has tx wakeup bit available enable the same by populating the necessary tx wakeup flag for the applicable module ip blocks and use the same while configuaring wer reg also wer is not context restored restore wer when context is lost for changes
26ee97672eaee9725bd7d66c3964579c4af7037d	powerpc return the_cpu_ spec from identify_cpu commit af9eef3c7b1ed004c378c89b87642f4937337d50 caused cpu_setup to see the_cpu_spec rather than the source struct however on the return value of identify_cpu was being used for feature fixups and identify_cpu was returning the source struct so if cpu_setup patches the feature bits the update wont affect the fixups
50c22cd154e5f7d13072d98ef3e2baba3c074734	hwmon sht3x add humidity heater element control the enables control of the sht31 sensors heating element that can turned on to remove excess humidity
c361016adeb5acb17a67000689602b7515930f13	vfs check attribute names in posix acl xattr handers the get and set operations of the posix acl xattr handlers failed to check the attribute names so all names with or as a prefix were accepted reject invalid names from now on
48bf7e1a9dce24adf79ea118ef001e781fb0e2e4	media af9035 use module_usb_driver macro lets save a few lines of code using the module_usb_driver macro
ca54b8107f6ad8c161fa102920dd70dfef19cd2e	always use adpa_reg instead of using in various parts of intel_crt code just use adpa_reg which always contains the correct value for the platform
f7bc63802d53139f7e6b62b222f2b26dca3f5e89	pci rcar fix some checkpatch warnings the r-car pcie driver causes __number__ warnings from lets fix at least __number__ easier ones line over __number__ characters blank line missing after declarations statements not starting on a tabstop
76fecd8275be6de76513430e7526825944ab932f	mpls in mpls_egress verify the packet length reobert shearman noticed that mpls_egress is failing to verify that the bytes to be examined are in fact present in the packet before mpls_egress reads those bytes as suggested by david miller reduce this to a single pskb_may_pull call so that we dont do unnecessary work in the fast path
bc3a334cc2c49779c90d7057c42c4537cd36256f	tipc rename udp_port in struct udp_media_addr context implies that port in struct udp_media_addr is referring to a udp port
c72f57377c4168a1aed68b4250a109a2505bdd62	staging comedi cb_pcidas64 remove unused pr_fmt macro this macro is not used remove it
9747a9f31756362e1b9d0b2347c25ae5120c3319	bluetooth track not yet received keys in smp to make is easier to track which keys weve received and which ones were still waiting for simply clear the corresponding key bits from as they get received this will allow us to simplify the code for checking for smp completion in subsequent patches
ef65e96e0762cb98d9abeb6737c721ca840f8092	perf trace fixup thread refcounting in trace__vfs_getname and when checking if a thread is filtered in trace__process_sample we were not dropping the reference obtained via machine__findnew_thread fix it link
fa13849f58dcecbb14ce9f40a15b8c9b26df004d	staging vt6655 add missing whitespace some whitespace were missing causing checkpatch warnings and altering readability
cee10c8cd3fde3da428ffafd4eb8847892a34d52	serial __number__ unfold __number__ char lines
7d71e994cdef8055edf2d4dc1b7490e439602859	mlx4_en_netpoll should schedule tx not rx i am not sure mlx4_en_netpoll is doing anything useful right now mlx4 has different napi structures for rx and tx and netpoll only wants to drain tx queues lets schedule napi polls on tx not rx
defa37ea9b9396ddc3ba9f556c1f89fec15c260b	greybus control use the bundle struct device instead of the connector we are removing struct device from the gb_connection structure in the near future the gb_bundle structures struct device should be used as a replacement this patch moves the control code to use the bundle pointer instead of the connection pointer for printing out error messages
e28f4d595186cc02beaffd1952b82d3d8147c556	net ns83820 remove unnecessary pci_set_drvdata the driver core clears the driver data to null after device_release or on probe failure thus it is not needed to manually clear the device driver data to null
35cfa2b0b491c37e23527822bf365610dbb188e5	allocate mmu_notifier in advance while allocating mmu_notifier with parameter gfp_kernel swap would start to work in case of tight available memory eventually that would lead to a deadlock while the swap deamon swaps anonymous pages it was caused by commit e0f3c3f78da29b init notifier if necessary info inconsistent lock state not tainted inconsistent usage takes at state was registered at irq event stamp __number__ hardirqs last enabled at __number__ hardirqs last disabled at __number__ softirqs last enabled at __number__ softirqs last disabled at __number__ null simply back out the above commit which was a small performance optimization
c269887c2da49ad55ff59217255b0e95b0cec0e9	media adv7604 inline the to_sd function this one line function is called in a single location inline it
fa64354ff32a06dc8f392c2b3e0ddd57e2eb0357	staging bcm remove typedef for _classification_rule this patch removes typedef for _classification_rule because it is not being used
717b6d83664646963c71d014c71babaa802333b9	net-netlink fix diag to export ipv4 tos for dual-stack ipv6 sockets
fa656308622fdaf54f2ff9ce8a70e4260f701b5d	input auo-pixcir-ts set input direction for interrupt gpio previously the gpio was not configured at all
c688b8b334d20acbc79b0383af2816ecf7365741	gfs2 add non-try locks back to get_local_rgrp this upstream patch had what i believe is an unintended consequence the patch changed function get_local_rgrp such that it only used try locks for rgrp searches prior to that patch the code used try locks during the first loop and if that was unsuccessful it used normal blocking locks on subsequent searches this patch changes it back to the old way
fcdeefe4df5c0fa457f2dc181ef4e3b2b26de781	fix checking of msaa renderbuffers on r600-r700 the msaa checking was mostly unimplemented on r600-r700 the userspace submits gpu commands and the kernel driver computes how much memory the gpu will access and checks if its all within buffer bounds the userspace allocated this patch fixes the computations of the size of msaa surfaces in memory
be21a084c104de45d8bfab0a0ad3a73ed902db25	remove the initialisation of interfacetag and its comment in handle_bh_error the interfacetag is actually initialised in for loop of this function and its not needed to initialise it before for loop and also remove the comment that is obvious about this variable
09afd2a8d6ad2c40f3c1ae0b3f83784864cf4c15	md-cluster allow spare devices to be marked as faulty if a spare device was marked faulty it would not be reflected in receiving nodes because it would mark it as activated and continue continue the operation so it may be set as faulty
3f2ab1721f77935eb4ee50b78c6ecfe24b3a2648	i40evf fix typo correct a missing word in a log message change-id id94da7d9f842382d073b3947e0b616503e2f8e91
9ee8ff4867d07a6429991a0b748fa9c1586a7764	gpio tegra make lockdep class file-scoped commit b546be0db955 gpio tegra get rid of all file scoped global variables moved all file scoped variables into the driver-private structure to allow potentially multiple instances of the driver the change also included turning the lockdep class into a driver-private field which doesnt work and produces error messages such as this __float__ bug key __address__ not in make the lockdep class file-scoped again to fix this issue
2dad6e4688bc7fecf50e6f895b84f3a0987b0af1	staging ft1000-pcmcia fixed four checkpatch fixed four checkpatch error complains specifically error space prohibited after that error space prohibited after that error space prohibited before that close parenthesis error space prohibited before that close parenthesis
42e8b0d7fed0628e21ec93e8cd547aef616e68f7	crypto talitos static code checker fixes from u64 to unsigned int to silence checker warnings this is safe since nbuf value is hash_max_block_size unused value read from talitos_ccpsr there is no requirement to read upper before reading lower of a register sec rm mentions reads can always be done by byte word or dword unused return value of sg_to_link_tbl len parameter of map_single_talitos_ptr and to_talitos_ptr_len to unsigned int later cpu_to_be16 will __force downcast the value to unsigned short without any checker warning
dd42baf1f64d7257258fa4f20064aee5160df369	perf tools fix assertion failure on dynamic entry the dynamic entry is created for each field in a tracepoint event since they have no fixed hpp format index it should skip when perf_hpp__reset_width is called this caused following assertion perf record sleep __number__ perf report perf perf_hpp__reset_width assertion perf_hpp__max_index failed link
f532e744a4693677452da67c48ade5de707f3c1c	net systemport start with carrier off the systemport driver uses libphy to determine the carrier state so make sure we start with a carrier off until libphy has completed the link training process
64968f60e73d7b3f9fca1ca5cd985d75b2cbca44	powerpc only use initrd_end as the limit for alloc_bottom if its inside the rmo as the kernels and initrds get bigger boot-loaders and possibly kexec-tools will need to place the initrd outside the rmo when this happens we end up with no lowmem and the boot doesnt get very far only use initrd_end as the limit for alloc_bottom if its inside the rmo
09ca71cae2df6c8426ed3347f4de591812d92e2d	can at91_can add module_device_table this patch adds a module_device_table for the platform bindings so that the module can be loaded automatically by udev
db93991bf515916e181aa3ddb5a6cbc8b86bdc42	only attempt to signal the request once from the interrupt handler check that request has not been signaled before acquiring a reference to the request for signaling later in the interrupt handler the loading of the cacheline for should be free when followed by the locked increment of the which then sets the cacheline to exclusive mode the cost of test_bit prior to an atomic_inc should be negligible this should benefit us when we have a pile of bare breadcrumbs interrupted execbuf where we may get interrupts faster than we can get rid of the intel_wait or if the device is too slow to run the bottom-half between interrupts
f14e600a3bb62905fe9e4e0350048af4ead54ca9	tools hv check retrun value of strchr call check return value of strchr call and dereference it only if it is not null
33f7d55f07ab964055d73d38774346f8d4821f00	bnxt_en shutdown link when device is closed let firmware know that the driver is giving up control of the link so that it can be shutdown if no management firmware is running
b9600b4b1cf8b8f06b6a5d025eff160f41950485	asoc ab8500-codec add missing ad_to_slot definitions according to the ab8500 user manual ad to slot register multiplexer accept values from __number__ to __number__ where __number__ to __number__ corresponds to ad_outx slots __number__ to __number__ corresponds to zero output __number__ to __number__ sets the output in tristate mode update enum_ad_to_slot_map array to reflect this definition this also allows alsamixer to properly display the default configuration as all controls are set to tristate at reset
e3837b00b6bb2b0344dd28c601edda8eba42de7f	use kobj_to_dev use kobj_to_dev instead of open-coding it
ad9ee2053f3f2babebc09ebc4970daa66c56c7ee	btrfs fix hang when failing to submit bio of directio the hang is uncoverd by btrfs_endio_direct_write skips the finish_ordered_fn part when it hits an error thus those added ordered extents will never get processed which block processes that waiting for them via btrfs_start_ordered_extent this fixes the above and meanwhile finish_ordered_fn will do the space accounting work
261c73f3f6ce0f64ad7da46fd69600f57eec1c11	of remove redundant memset in overlay memset in of_build_overlay_info is redundant the ovinfo has been zeroed in of_fill_overlay_info when error
fa9f3a526459ef33f1ca54aad231c5a23071f37f	clk samsung exynos7 fix cmu topc block clock corrects the bit width of div_topc3 register these are wrongly set to __number__ which should be __number__ bit wide as per um this also adjusts the mux clock order
05a926227742b0bcbef366bbd710c4f6631c7d9f	pm core fix bug in the error handling of async suspend if async_suspend is enabled for parent and child devices then pm framework has to ensure that parents async suspend gets called only after childs async suspend is done in case if childs async suspend fails with error then parents async suspend must not be invoked the current code uses async_error to ensure this but there is a problem with it in __device_suspend this function notifies the completion of childs async suspend before updating its error via async_error variable as a result parents async suspend gets invoked even though its child suspend has failed fix this bug by updating the async_error before notifying the childs completion rjw rearranged wthitespace
79b45a0ff001946378f9c36469487326a0e9d2b2	fix lines starting with spaces in this patch fixes lines starting with spaces
2a9ceb8daab01a4ee27383e4d344e4a8b781c165	cs_ib_fill should use chunk_ib instead of ib otherwise the logic is incorrect
bcbd63dfc90a3ae515013b0f300e4f3ce62f7249	dpaux clean-up on probe failure if the probing of the dpaux fails then clocks are left enabled and the dpaux reset de-asserted add code to perform the necessary clean-up on probe failure by disabling clocks and asserting the reset
4f8a428dac431e7bd09673b404769d87df948eef	arm omap fix wrapped error messages in while trying to debug my omap platforms they emitted this message omap_hwmod enabled state can only be entered from initialized idle or disabled state the following backtrace said it was from a function called _enable which didnt provide much clue grepping didnt find it either the message is wrapped so unwrap the message so grep can find it do the same for three other messages in this file
100bcb851b8ce09824215cfc2afd661ae8d454c9	scsi_dh_alua uninitialized variable in alua_check_vpd the pg_updated variable is support to be set to false at the start but it is uninitialized
9aa5aad8724fc7dd9d57a71d8894415850ed349f	remove sps suffix from samplerate attribute this is not part of the abi
29b858471b266be7e56b69cfcee7ba94d9427dd3	staging android fixed a space warning in this patch fixes a simple tab-space warning in found by checkpatch tool
a3650d53ba16ec412185abb98f231e9ba6bcdc65	resource handle resource flags properly resource flags consist of resource types and modifier bits therefore checking an resource type in flags must be performed with a bitwise operation fix find_next_iomem_res and region_intersects that simply compare flags against a given value also change __request_region to set from resource_type and resource_ext_type of the parent so that children nodes will inherit the extended resource type link
0c18acc1ed57d54195427d16316d5ea09d840b0e	yellowfin stop using
ee556fe5fcc1c4f67fc854865f3108cf17714128	isdn fix typo in correct spelling reseting to resetting in
158e92185075184ebc5f25bab61fdd598693e28d	bluetooth preparation for new connect procedure currently when trying to connect to already paired device that just rotated its rpa mac address old address would be used and connection would fail in order to fix that kernel must scan and receive advertisement with fresh rpa before connecting this patch adds some fields to hci_conn_params in preparation to new connect procedure explicit_connect will be used to override any current auto_connect action and connect to device when ad is received hci_auto_conn_explicit was added to auto_connect enum when this value will be used explicit connect is the only action and params can be removed after successful connection hci_conn_scanning is added to hci_conn flags when its set connect is scan phase it gets cleared when advertisement is received and hci_op_le_create_conn is sent
f734dfff2f2bc2d92c392fbcfe2039893a8cdd08	i40e trivial cleanup use of this patch makes use of a pointer called hw consistent in the i40e_remove function change-id idacc7ff0a09a68289c57457a78618bf5497de077
86e7e874635ea76fee8608646afcb103414c6e72	xtensa use setup_timer use setup_timer instead of explicit assignments
f950a30e2433f049c17fc47caced1397d25373a6	bluetooth fix pair device command reply if adapter is powered off according to bluetooth management api specification pair device command should generate command complete event on both success and failure this fix replying with command status which lacks address info when adapter is powered off
1b5ca928e7d09c5ce0cefe6aec7392e4a3aa1d3b	usb input fix up dev_err usage we should always reference the input device for dev_err not the usb device fix up the places where i got this wrong
5de8bbf5536fe79c1353c5476c31409531b5393f	enable ddi edp now that all the edp enablement bits are there we can actually try to use the edp
f96acec8c8020807429d21324547f4b904c37177	fix lfb_size calculation the field is shifted by __number__ bits in case of vbe this has historical reasons since vbe advertised it similarly however in case of efi framebuffers the size is no longer shifted fix the x86 simple-framebuffer setup code to use the correct size in the non-vbe case while at it avoid variable abbreviations and rename len to length and use the correct types matching the screen_info definition link
74be9510876a66ad9826613ac8a526d26f9e7f01	btrfs optimize btrfs_lookup_extent_info if were looking for a metadata item in the tree and the search fails with return value of __number__ and the slot doesnt point to the first item in the leaf check if the previous item in the leaf corresponds to an extent item for the same object id if it does then dont do another tree search to get it this optimization is already done by btrfs-progs v2 updated commit message
1085cbf271e4f9fe8c4064877d39335d327e662f	media vcodec mediatek remove double parentheses the extra pairs of parentheses are not needed and cause clang warnings like this error equality comparison with extraneous parentheses if __number__ note remove extraneous parentheses around the comparison to silence this warning if __number__ note use to turn this equality comparison into an assignment if __number__
20b454a61fba59be13de52b4493898583ea26d20	cgroup suppress spurious de-populated events during task migration tasks may transfer between two css_sets which are associated with the same cgroup if those tasks are the only tasks in the cgroup this currently triggers a spurious de-populated event on the cgroup fix it by bumping up populated count before bumping it down during migration to ensure that it doesnt reach zero spuriously
e95a2f7509f5219177d6821a0a8754f93892ca56	increase wm memory latency values on snb on snb the bios provided wm memory latency values seem insufficient to handle high resolution displays in this particular case the display mode was a which makes the pixel clock __float__ mhz it was empirically found that a memory latency value if __float__ usec is enough to avoid underruns whereas the bios provided value of __float__ usec was clearly too low incidentally __float__ usec is what the typical bios provided values are on ivb systems increase the wm memory latency values to at least __float__ usec on snb hopefully this wont have a significant effect on power consumption v2 increase the latency values regardless of the pixel clock bugzilla
e5619b1350946d7aabe8ed6b0210458a7057dd24	staging rts5208 remove unnecessary cast on void pointer the following coccinelle script was used to detect this expression x e type t identifier f t e
889746917193ab3007a779d65231510715b20fb6	locks encapsulate the fl_link list handling move the fl_link list handling routines into a separate set of helpers also ensure that locks and requests are always put on global lists last after fully initializing them and are taken off before unintializing them
2b1ecc3d1a6b10f8fbac7f83d80db30b5a2c2791	signals use hrtimer for sigtimedwait weve converted most timeout related syscalls to hrtimers but sigtimedwait did not get this treatment convert it so we get a reasonable accuracy and remove the user space exposure to the timer wheel properties link
6504b9bdf6f330dc66667e8b2e0a91a2ffa84e33	staging sm750fb convert pr_err to dev_err replace pr_err calls with respective dev_err counterpart change is safe since pdev is not null this was identified by hand semantic patch used to detect and apply the transformation identifier position p s identifier dev struct s struct device dev identifier expression fmt position fmt
ed8c80d0a4c65c062ee520cd167649b80afce16f	staging comedi ni_labpc tidy up labpc_8255_mmio the __number__ driver callback now includes the comedi_device pointer instead of passing the cast pointer to subdev_8255_init pass the iobase of the __number__ registers dio_base_reg
88e412ea5ebc377bbb51aeb685c5a11f364ba841	fs debugfs remove trailing whitespace fixes trailing whitespace errors
fa55583797d12b10928a1813f3dcf066637caf5e	fixup the fixup code we need to check whether the _other plane is on our pipe not whether our plane is on the other pipe otherwise if not both are active we wont properly clean up the mess and set up our desired mapping v2 fixup the logic ive totally fumbled it noticed by chris wilson v3 ive checked bspec and the flexible mapping is a feature so test for that instead of pch_split v4 check whether we indeed have __number__ pipes before checking the other pipe to avoid upsetting noticed by chris wilson bugzilla bugzilla
2e5db86dd4166fd88a042bbb229dfc7081df3e92	mips lantiq fix mtd registration of nor device the __number__ functions add_mtd_partitions and del_mtd_partitions were renamed to mtd_device_register and mtd_device_unregister patchwork
4dc69c1c1fff2f587f8e737e70b4a4e7565a5c94	bna ethtool avoid reading past end of buffer using memcpy from a string that is shorter than the length copied means the destination buffer is being filled with arbitrary data from the kernel rodata segment instead use strncpy which will fill the trailing bytes with zeros this was found with the future config_fortify_source feature
65ff442f6bca0e2247ff7acac6014bcea69d1f7e	fix power domain hw state cleanup on error path move the cleanup of the power domain hw state on the error path to the same function where the corresponding init call was called from i noticed this problem when loading the module with load failure injection enabled making i915_load_modeset_init fail
19d8ceddda8b3a806a0960106ae6aa4dcc21df3b	usb phy remove exported function from __init section the symbol usb_bind_phy is exported and annotated __init it looks like section mismatch fix by removing the __init annotation of usb_bind_phy found by linux driver verification project
99cca91e370ab9224755365dda98b78eb5a5417f	use the asn1_long_tag and asn1_indefinite_length constants use the asn1_long_tag and asn1_indefinite_length constants in the general decoder instead of the equivalent numbers
941ec5c6b02a93710c397e69b50671949f3b9dd3	nfc st21nfcb add iso15693 support add support for __number__ rf technology and type __number__ tags
849f3127bb46ef75a66dffc1b9b0d3f5f43fa395	switch to
17e9f796bd92cddec17d781c459376f82340fa44	btrfs dont bug_on alloc_path errors in btrfs_balance dealing with this seems trivial the only caller of btrfs_balance is btrfs_ioctl which passes the error code directly back to userspace there also isnt much state to unwind if im wrong about this point we can always safely move the allocation to the top of btrfs_balance anyway
a446b47d5d815865c2715da8fab1a7c06f1338ca	staging lustre lnet lnet fix quoted string split warning this patch fixes quoted string split across lines warning in
9022e24e8946400d53719a761815069c3183e2bd	dma-buf check return value of anon_inode_getfile anon_inode_getfile might fail so check its return value
e8d266cf8d24e52eac65bdab24afd6f4cfc0ad07	ubi init by assignment vol is a newly allocated value by kzalloc initialize it by assignment instead of
fcc0d3db28922f9ba21ea6c7b23ea10ffb5d3521	media v4l add argb555x and xrgb555x pixel formats the existing rgb555x pixel format is ill-defined in respect to its alpha bit and its meaning is driver dependent create new standard argb555x and xrgb555x variants with clearly defined meanings and make the existing variant deprecated the new pixel formats values have been selected to match the drm for the same in-memory formats
e3789b0c54442fef9cdb5541b89b677b76c8673a	staging rtl8188eu remove explicit null comparison remove explicit null comparison and write it in its simpler form replacement done with coccinelle expression e null
235959be9a7054151eaad692040d4a22bb6217fb	ppc epapr fix hypercall on le guest we get an array of instructions from the hypervisor via device tree that we write into a buffer that gets executed whenever we want to make an epapr compliant hypercall however the hypervisor passes us these instructions in be order which we have to manually convert to le when we want to run them in le mode with this fixup in place i can successfully run le kernels with kvm pv enabled on pr kvm
dde109fb46256f61642ba9bf0199418dfaaca12b	asoc mcasp fix data rotation for playback enables audio playback u32 rotate __number__ word_length __number__ this implementation is wrong but it works only for __number__ or __number__ bit audio data rotation for __number__ or __number__ bit is same as in code i present mcasp rotated data in __number__ bits max value then masks them that data are sended to i2s bus for __number__ bit or __number__ bit or other data formats this code rotates data badly and you hear somethink like noise you need to use u32 rotate word_length __number__ to proper data rotation
f855b2f544d664cfa3055edb7ffd20e9ae0e2dce	wire up ioremap_cache the default implementation of ioremap_cache is aliased to ioremap on powerpc ioremap creates cache-inhibited mappings by default which is almost certainly not what you wanted
841bac2c87fc21c3ecf3bc3354855921735aeec1	blk-mq get rid of manual run of queue with __blk_mq_run_hw_queue two cases __number__ blk_mq_alloc_request needlessly re-runs the queue after calling into the tag allocation without nowait set we dont need to do that __number__ blk_mq_map_request should just use blk_mq_run_hw_queue with the async flag set to false
3f40b839712fc10b9f981e44a04fd65d3c1d638f	brcmfmac fix build regression this fixes a build regression for x86_64 target that showed up in due to commit author hante meuleman broadcom.com date thu sep __number__ __number__ brcmfmac add hostap supoort
fd9f069d876d6a96eb0f731b1e293145352d5f4f	asoc wm5100 fix spelling mistake micropone microphone trivial fix to spelling mistake in dev_err message
3661cdf16df8121be01d3a9d8fae8f420c918d2d	staging octeon fix unnecessary space after function pointer name the patch fixes the following warnings warning unnecessary space after function pointer name
8baa5dae60adf95c44d52be3dae2367e3d5e9530	thermal core move mode attribute to moving mode attribute to requires the implementation of a callback the condition returned by of the mode attribute group is kept the same we allow the attribute to be visible only if is set by the thermal driver
96a9fdd778037799f63c9ae272ec915dd3ad83dc	drm fix confusing debug message in drm_update_vblank_count now that drm_update_vblank_count can be called even when were not about to enable the vblank interrupts we shouldnt print debug messages stating otherwise
7ebeb7fe74bb855bc76a72154e669f00dc614729	nfsv4 if recovery failed for a specific open stateid then dont retry
333055f2aaabadb951b5ecd90f6a20a9aee38c29	bluetooth dont use locks anymore those locks are not shared between interrupt and process context anymore so remove the part that disable interrupts we are still safe because preemption is disabled
2a6da97ff530650d26570a6a1ec0ac1deac927bd	usb wusbcore fix potential double list_del on urb dequeue this patch locks around the entire transfer segment cleanup loop in wa_urb_dequeue instead of just one case of the switch statement this fixes a race between __wa_xfer_delayed_run and wa_urb_dequeue where a transfer segment in the wa_seg_delayed state could be removed from the rpipe seg_list twice leading to memory corruption it also switches the spin_lock call to use the non-irqsave version since the is already held and irqs already disabled
bc329ad7b018c8f6725cb025bf4d192925db84e6	arm pxa fix wrong parsing gpio event on spitz gpio_bitspitz_gpio_key_int gplr0 gpio_bitspitz_gpio_sync after using gpio_get_value the statement should be in below gpio_bitspitz_gpio_key_int gpio_get_valuespitz_gpio_sync
eb79a8fe94c8a16687112e0a3abcce8225447f6f	rt2800 replace mdelay by usleep on vco calibration this procedure can sleep hence mdelay is not needed
23c6acb9684ac87c2e752f61900c7a1a2dd543ac	usb pl2303 add quirk for legacy devices add quirk for legacy devices type __number__ and __number__ rather than testing on device type throughout the driver
5bf8f501e05930364b345ed8710c5b1a13207134	serial add member to struct pci_serial_quirk this function if present is called early on by the probe it can be used to reject devices meant for parport_serial the function cannot be used for this purpose as it is also called by parport_serial
5dcd7d843950edfc9108246eab94c858b6dc5d6f	improve error handling when leaving dle mode avoid cascading warnings when leaving dle mode fails by clearing the dle flag before entering recovery
dc7aadb5133846f738c59da7af3261335af35ad3	bnxt_en increase maximum supported mtu to __number__
36814028ad720165a6febcf9ddd7de20833fd240	mpt3sas call dma_mapping_error api after mapping an address with dma_map_single api added dma_mapping_error api after mapping an address with dma_map_single api otherwise when config_dma_api_debug is enabled in the kernel then it complains about mpt3sas driver not calling dma_mapping_error after mapping an address with dma_map_single
d1e458fe671baf1e60afafc88bda090202a412f1	svcrdma remove rdma_create_qp failure recovery logic in svc_rdma_accept if rdma_create_qp fails there is useless logic to try and call rdma_create_qp again with reduced sge depths the assumption i guess was that perhaps the initial sge depths chosen were too big however they initial depths are selected based on the rdma device attribute max_sge returned from ib_query_device if rdma_create_qp fails it would not be because the max_send_sge and max_recv_sge values passed in exceed the devices max so just remove this code
52fbc7796a6936dac4189f7ebda7ae7c2c813ad2	rtc rtc-tile add missing platform_device_unregister when module exit we have registered platform device when module init and need unregister it when module exit
a1d704509d5b96756d3d4cfb7f10a555efeadb87	bluetooth fix sending incorrect new_settings for mgmt_set_powered the socket from which a mgmt_set_powered command was received should only receive the command response but no new_settings event the mgmt_powered function which is used to handle the situation with the hci_auto_off flag tries to check for a pending command to know which socket to skip the event for but since the pending command hasnt been added this will not happen this patch fixes the issue by adding the pending command for the hci_auto_off case and thereby ensures that mgmt_powered will skip the right socket when sending the new_settings event but still send the proper response to the socket where the command came from
80ace3e40390ad0a85606b3a1450eb723070c9a9	btrfs dont access the bio directly in the code just use bio_for_each_segment_all to iterate over all segments
7c4d577367fb710ea74a56955c5e3546fe5dd7ac	hid i2c-hid fix length for report in i2c hid with the current i2c hid driver report does not work as expected for sensor hub properties like power state frequency etc is not set properly on the device as a result we do not get events the problem is that i2c hid driver in function i2c_hid_request sets length equal to default buffer size for which the sensor hub does not respond on commands use report length and calculate it based on report size and id
025d1f675c401da7c1efa0e37d5eada1abebdc5a	staging comedi extra clock and gate sources for amplc_dio200 add constants to for the extra clock and gate sources allowed by the new pcie cards supported by the amplc_dio200 driver
48b9b6d4699e23cda45756b6a1fe5d481ba45914	use to_platform_device use to_platform_device instead of open-coding it
1c2a7eb7169b855f6c3e9db036c6767052528ffe	arm shmobile r8a73a4 add irqc clock to device tree link the external irq controllers irqc0 and irqc1 to the irqc module clock so they can be power managed using that clock horms corrected typo in changelog to refer to r8a73a4
4a9ed1009b8b01409bdda899c0ff0d7fd2c6d094	fix use of interruptible waiting __number__ the signal interrupt can affect the expected behaviour __number__ there is no good mechanism to handle the corresponding error when signal interrupt happens unpin is not called as a result inside amdgpu the statistic of pin size will be wrong
84b919fdb8559a8cd5432d8fa0002219df59cb32	clk qcom lcc-msm8960 fix pll rate detection regmap_read returns __number__ on success not the value of the register that is read fix it so we properly detect the frequency plan controller lcc driver
c374ed27c93698c794f99c5d41d9ad3062c4c207	block pci config access on bcm5718 during eeh recovery similar to what is done in commit b6541db13952 block pci config access upon frozen pe we need block pci config access for bcm5719 when recovering frozen error on them otherwise an unexpected recursive fenced phb error is observed ethernet controller broadcom corporation netxtreme bcm5718 gigabit ethernet pcie rev __number__ ethernet controller broadcom corporation netxtreme bcm5718 gigabit ethernet pcie rev __number__
86cd747c6dd6cdbc825e36ad5f0029f3c5a37776	fix error return code if pci_register_driver fails we return err which is known to be __number__ return the error instead
dd64694208d7c902ba7a5bcd2bf012c1087ba0f0	type-safe register accessor macros these require an explit struct nvkm_device pointer unlike the previous macros which take a void and assume its any old nvkm_subdev
33a44c2873ba64c54d11a9364b6b43271761d245	fm10k validate vlan id in fm10k_update_xc_addr_pf currently fm10k_update_xc_addr_pf has an issue where it does not properly drop the upper-most four bits of the vlan id due to type promotion resolve the issue not by masking off the bits but by throwing an error if the vlan id is out-of-bounds
283dc01fb0ca32254bd5111c22cd9d9d4c4a0216	greybus audio use the bundle struct device instead of the connector we are removing struct device from the gb_connection structure in the near future the gb_bundle structures struct device should be used as a replacement this patch moves the audio driver to use the bundle pointer instead of the connection pointer
344a7024e01fc45a5ff52b171596f702815bd6eb	wil6210 track privacy connection attribute for the sta interface track privacy refactor safety checks to always print connection params always check ie size validity require rsn ie for secure connection
611ac099289736176e16aedd75f980f21b00d974	setup notify mad agent callbacks for rdmavt qib needs to be notified when mad agents are created and freed there is some counter maintenance that needs to be performed add those callbacks at registration time with rdmavt
e72f8762f8c8f81d4692c485dc85020b3ad160da	staging vt6655 dont leak when returning in vt6655_hostap_ioctl make sure we always freeparam and remove a redundant goto out just before well hit the label anyway
430a05f91d6051705a6ddbe207735ca62e39bb80	kasan print page description after stacks moves page description after the stacks since its less important link
f734c89cc96e9b6f903865cd2656d9d8a7e160e7	direct-io use clean_bdev_aliases instead of handmade iteration use new provided function instead of an iteration through all allocated blocks
2d4456c73a487abe53863e10641c2f73537edf5c	block xen-blkback add null check to avoid null pointer dereference add null check before calling xen_blkif_put to avoid potential null pointer dereference addresses-coverity-id __number__
1511c75be01d0511df36096561ef2cbaaa36fa07	omapdss fix am43xx minimum pixel clock divider am43xx supports pixel clock divider of __number__ just like all socs fix the minimum divider value
84d923ce4a70858c0b23afa5efb812df791b29f2	ptp cpts use helpers for converting ns to timespec this patch changes the driver to use ns_to_timespec64 and timespec64_to_ns instead of open coding the same logic compile tested only
09dd7a01c3436344fb4c3974b275e016264e0a27	btrfs cleanup btrfs_bio_counter_inc_blocked __number__ remove no-need define_waitwait __number__ add likely for btrfs_fs_state_dev_replacing condition __number__ use while loop instead of goto
c078d78aa96ceafab7379b6a50e92d9d8e2f97b5	pinctrl exynos5440 fix invalid use of sizeof in exynos5440_pinctrl_probe sizeof when applied to a pointer typed expression gives the size of the pointer not that of the pointed data
47b0e50ac724d97c392f771bb46f11d9d1575242	nvme fix removal in case of active namespace list scanning method in case of the active namespace list scanning method a namespace that is detached is not removed from the host if it was the last entry in the list fix this by adding a scan to validate namespaces greater than the value of prev this also handles the case of removing namespaces whose value exceed the devices reported number of namespaces
63b5aed37b769d6b9f5b322e1e29f31c18da5d17	pinctrl bcm281xx constify struct regmap_config the regmap_config struct may be const because it is not modified by the driver and regmap_init accepts pointer to const make also of_device_id array const
8431706b4d1e684efee4b9e91e655f1161e883a8	be2net dont report evb for older chipsets when sr-iov is disabled the evb virtual bridge functionality should be disabled on older be3 and lancer chips if sr-iov is disabled in the nics bios this setting is identified by the zero value of total vfs reported by the card the get_hsw_config command cannot be used as it is not supported by these older chipsets fw v2 added the comment
1b024d2f60bdceefdc4a03855eb4bd241a403828	arm omap4 hwmod data make as the main_clk of ocp2scp made as the main_clk for ocp2scp since this ocp2scp module does not have any fck but does have a single opt_clock it is added as the main_clk for ocp2scp also removed phy_48m as the optional clock since it is now made as the main clock by this the driver need not phy_48m clk separately and will take care of that
64ddba4d8a381b65bebee24c8da4eb80080c64a4	mtd nand fsmc update of of support add nand bank selection and timings to the device tree bindings added some documentation
7ead55119ba58523c31f52365b5eb33f3bb34b3e	assign ret only when rtc_register_driver fails at the probe we are assigning ret to return value of ptr_err right after the rtc_register_driver as we would have done it in the if is_errptr check since the function fails and goes inside that case
238fc95e836917d290931b9700ab2f711b879629	mmc usdhi6rol0 use to_delayed_work use to_delayed_work instead of open-coding it
8aada63cc408874916a19341ba514f941096e424	ath5k debugfs null-terminate strings avoid processing garbage data by null terminating the strings
796038799a72adb279d785c9154df6eeb98b6e8d	x86 realmode mask out when saving trampoline efer some amd processors apparently if is set in wrmsr rather than ignoring it thus we need to mask it out link
8cbb5e3f9d0ba08fd151a3bb404d9183bb86be1a	staging dgap fix printk related errors as reported by checkpatch this patch fixes some printk related errors report by checkpatch
8d4124cb94c0613d79a2e3e5727b35a36497ffb7	wm8350_power use permission-specific device_attr variants use device_attr_ro for read only attributes this simplifies the source code improves readbility and reduces the chance of inconsistencies the semantic patch that makes this change is as follows declarer name device_attr identifier device_attrx x_show null x x_show if not x_show then false declarer name device_attr_ro identifier device_attrx x_show null device_attr_rox
046ef24d256bccc3767eb6feef1dbe07338fc5c5	enable type checking on skb_to_pkt and pkt_to_skb arguments let the compiler check the type of the arguments passed to skb_to_pkt and pkt_to_skb
6500fc0c9fd9a0c3cde1b498541a259d1ba078ba	handle cg in dpm code clockgating needs to be disabled around certain parts of dpm setup otherwise the smc gets into a bad state and dpm doesnt work properly
4ecae7855841fa6f0347064b80b2c9a52f12a0e6	constify function pointer structs moves a bunch of junk to from __number__ __number__ __number__ __number__ link
95f87b928376690a23137944239d8d9121c6abae	staging media davinci_vpfe drop owner assignment from platform_drivers a platform_driver does not need to set an owner it will be populated by the driver core
2458df4324b802e51c830e2a7ff851dbe18df9bb	media gspca sonixj increase the exposure for sensor soi768 lower exposure values give too dark images
c8bb0c8bd22a4b9d1c457a9c2b1c192d8271831a	btrfs cleanup compress_file_range remove unnecessary checks in compress_file_range minor coding style fixups
b059efdf52a27819b78aa30f171f1e8e439152b6	perf trace support in expressions so that we can ask for all but a set of syscalls to be traced link
91dcc7f437d3e8224dec51f2e0808ba8171309a9	arm add flexcan support
cded80f869aef94853e056ab9c21e305b0c26138	arm shmobile r8a7791 add msiof clocks in device tree
8ba5905c163cbfcc4c21ecef7574626649977439	pinctrl st activate strict mux mode this activates strict mode muxing for the st pin controllers as these do not allow gpio and functions to use the same pin simultaneously
a904a08b5fee5317ff0f7b8212aa5d0776795a52	iwlwifi mvm advertise support for ap channel width change the iwlmvm driver supports channel width change in ap mode add the proper flag
4ef2e4f84c523ebbc930ce05fa27b9b1350f4a4b	fix pnfs_put_lseg races pnfs_layoutreturn_free_lseg_async can also race with inode put in the general case we can now fix this and also simplify the code
1fdc7fe18e396d02f9c2dfec3de6975dc8314b60	ath6kl small cleanup in ath6kl_htc_pipe_rx_complete its harmless but smatch complains if we use before doing the bounds check
1283f849dce2e64690e610216cd8dc3df9789bae	media media-entity add a helper function to create interface as well be adding other interface types in the future put the common interface create code on a separate function
e2a3fde75079efeb22cf1e5098d5689b664bf1d5	ext2 remove i_mutex use from ext2_quota_write we dont need i_mutex in ext2_quota_write because writes to quota file are serialized by dqio_mutex anyway changes to quota files outside of quota code are forbidded and enforced by noatime and immutable bits
2ff8a35bd79e5a67137f6201b7d44515f19cf726	staging iio tsl2583 remove unnecessary chip status checks in the device probing and the code checks a flag internal to the driver that determines whether or not the chip is in a working state these checks are not needed this patch removes the unnecessary checks it will do no harm to the hardware if the chip is reinitialized if it is already powered on
aec27311c23a8ce8eaf490762249d3ed74be83b6	packet fix leak in pre-defrag support when we clone the skb we forget about the original one avoid this problem by using skb_share_check
6fa79bcaecdbb0eb417afbc7fb0a8fa204308b62	nosy-dump check for allocation failure behavior of null pointer dereference is undefined in the c language portably implement the desired behavior
1009f9a36d30f87676ede4c69f97a4eb45001f15	usb chipidea udc add set_selfpowered gaget ops the gadget power property will be used at get_status request
83bfea42190b72acc1a1653bc10b21e741490087	ath9k_hw fix ar9462 switch on full reset on full reset mci reset will put lna update on mode and whenever is forced at the end of full reset lna update should not be skipped not doing so is affecting wlan rx and causing beacon loss when btcoex is enabled on ar9462
6f7aa56bae6ff38727d5c8bf6ee7d4202b4e3865	ptp use kcalloc when allocating arrays kcalloc is more semantically correct when allocating arrays of objects and overflow-safe
5c3ef39738f74a3759918cc1a1ad099504f9d1b7	ata sata_mv check for errors when parsing nr-ports from dt if the nr-ports property is missing ata_host_alloc_pinfo is called with n_ports __number__ this results in null which later makes mv_init_host oops when dereferencing this pointer instead be a bit more cooperative and fail the probing with an error message
6aeaa48b0dd3a4261804be1cccaea46d82be3fcb	use kthread_create_on_node since create_comp_task creates percpu kthread it makes sense to use kthread_create_on_node to get proper numa affinity for kthread stack
dd3a55fc688b835b25fc73a16f17a75b6059858d	extcon axp288 fix the module not auto-loading add a module_device_table to fix the module not auto-loading
743b57d830b8834026508050bd138c1247fccd4a	theres no need to mask all bits on snb the need to set all of the mask bits for was required only for pre-production hardware
4fda99627dc037d3b316c3b3250075645cfcbe4d	i2c st fix return in case of arbitration lost this patch fixes the error returned to the i2c_transfer function to in case of arbitratin lost so that the retry mechanism can be used
8533eb24a9515c2a9e6779cfd377ab0c46ed8a77	asoc sgtl5000 replace direct snd_soc_codec dapm field access the dapm field of the snd_soc_codec struct is eventually going to be removed in preparation for this replace all manual access to with snd_soc_codec_get_bias_level
65e291acd806fae8cb6fff73a93def84d0ad327a	iwlagn merge iwl_pci_down and iwl_pci_remove the latter was the only place that called the first the two functions were split when the iwl_pci_probe called iwl_pci_down upon failure in the probe since iwl_pci_probe undoes its work by itself there is no need to split between iwl_pci_down and iwl_pci_remove thanks to pavel roskin for pointing that out
481fe17e973fb97aa3edf17c69557afe88d8334f	nilfs2 potential integer overflow in nilfs_ioctl_clean_segments there is a potential integer overflow in nilfs_ioctl_clean_segments when a large is passed from the userspace the subsequent call to vmalloc will allocate a buffer smaller than expected which leads to out-of-bound access in nilfs_ioctl_move_blocks and lfs_clean_segments the following check does not prevent the overflow because nsegs is also controlled by the userspace and could be very large if nsegs goto out_free this patch clamps to uint_max and returns when overflow
c5d5474425c4e7e291a98e739ea65f8acd0d8d5c	i2c ocores move grlib functions into config_of block this moves the grlib set and get functions into the config_of block to avoid warnings of unimplemented functions when compiling with when config_of is not defined
6363c6b599ae67b779d01a48642a7c0d7d721814	ftrace use kasprintf in ftrace_profile_tracefs use kasprintf instead of kmalloc and snprintf link
08f75463c15e26e9d67a7c992ce7dd8964c6cbdd	rbd protect against duplicate client creation if more than one rbd image has the same ceph cluster configuration same options same set of monitors same keys they normally share a single rbd client when an image is getting mapped rbd looks to see if an existing client can be used and creates a new one if not the lookup and creation are not done under a common lock though so mapping two images concurrently could lead to duplicate clients getting set up needlessly this isnt a major problem but its wasteful and different from whats intended this patch fixes that by using the control mutex to protect both the lookup and if needed creation of the client it was previously used just when creating this resolves
f1bda29c2bfa84c2c022e1f443528e21607bf360	smmu move bus_set_iommu after probe for multi arch for a single image to support multiple
0113f22ee49ff1972de55632dda44eb9299e625d	spi-topcliff-pch missing platform_driver_unregister on error in pch_spi_init add the missing platform_driver_unregister before return from pch_spi_init in the error handling case
ea54a6d6e06cc456559befbcd26a903d24709253	prism54 replace open-coded array_size with macro
d49cd15550d9d4495f6187425318c245d58cb63f	omapdss dispc lock access to dispc_control dispc_config dispc driver presumes that the callers handle locking for all normal functions however omapdrm doesnt handle this and presumes that all overlay manager registers are private to that overlay manager and thus presumes that configurations for overlay managers can be written via different threads freely for many registers the above is true the exceptions are dispc_control and dispc_config registers which contain bits for both lcd and tv overlay managers fixing this properly in omapdrm means a big omapdrm rewrite so for now add locking to dispc for the problematic registers
f58d88b336c1c83a35d6b2582d45cd87cb2ca406	btrfs provide enumeration for __merge_refs mode argument replace hardcoded numeric values for __merge_refs mode argument with descriptive constants
7476dfdaade5b373db4679555706546bd5b4bd6c	btrfs sink blocksize parameter to tree_block_processed
a900705491e6f377966711aa95df753b5ae16dd3	alsa firewire-lib use protocol error when detecting wrong value in cip header when detecting zero in dbs field of cip header this packet streaming should be aborted because of avoiding division-by-zero this is an error in an aspect of iec thus protocol error this commit use eproto instead of eio actually the returned value is not used for userspace and this commit has no effect
4baf0df7010e8d975edcd778604fc1b1fce30f37	usb devio fixed error do not use assignment in if condition this patch fixes error do not use assignment in if condition in
3301d4092106ff07e14d7acbf12243d782600930	psr fix dp_psr_no_train_on_exit logic since the beginning there is a missunderstanding on the meaning of this dpcd bit this bit shouldnt indicate whether to use link standby or not but just be used to configure tp1 tp2 and tp3 times and tell hw aux should be skiped since hw is the responsible one even with help of frontbuffer tracking hw is still fully responsible for psr exit logic dp training dp_psr_no_train_on_exit means the source doesnt need to do the training but it doesnt tell to avoid tp patterns so we will send minimal tp1 and avoid tp2 it also means that sink itself can take up to __number__ idle frames for training __number__ in our case since we might be off by __number__ so we also increment idle_frames by __number__ here v2 fix and improve commit message durga v3 use minimal tp1 time avoiding tp2 and increase idle frame
45c5b0a69016b68142d93f7609000c8efd51fdde	clk samsung exynos3250 enable armclk down feature enable armclk down feature on exynos3250 soc the frequency of armclk will be reduced upon entering idle mode wfi or wfe the feature behaves like very fast cpufreq ondemand governor the patch uses simillar settings as exynos5250 except it disables clock up feature
f36eb5a899d3ea57e3d167427260848e116e27a0	add pin refcounting to omap_framebuffer omap_framebuffer_pin and omap_framebuffer_unpin are currently broken as they cannot be called multiple times pin pin unpin unpin which is what happens in certain cases this issue causes the driver to possibly use __number__ as an address for a displayed buffer leading to ocp error from dss this patch fixes the issue by adding a simple pin_count used to track the number of pins
021162cf02fcfa80cbae5f3b7304e9cb392962eb	perf report do not restrict option by other options it seems theres no reason to suppress per-thread event stat by option when or option is used make it work with those options link
1be300f4cc1ddf975f158b4ab2f880854b29306b	perf tools make the mmap length autotuning more robust if is not power of __number__ page_size_in_kb and we let the perf tools do mmap length autosizing based on that then for non-cap_ipc_lock users when is then we get an that ends up in trace usleep __number__ invalid argument perf record usleep __number__ failed to mmap with __number__ invalid argument after this fix trace usleep __number__ __float__ __float__ ms munmapaddr len __number__ __number__ __float__ __float__ ms brk __float__ __float__ ms brkbrk __float__ __float__ ms brk __float__ __float__ ms nanosleeprqtp __number__ __float__ __float__ ms exit_group perf record usleep __number__ perf record woken up __number__ times to write data perf record captured and wrote __float__ mb samples link
13bce4821fb9d0bd2525e06d29025b6408bfdded	declare correct flags when accepting a connection iser target does not support zero based virtual addresses and send with invalidate so it should declare that it doesnt
5b653b2a1c3b5634368fde2df958a1398481e580	xfrm fix freed block size calculation in xfrm_policy_fini missing multiplication of block size by sizeofstruct hlist_head can cause xfrm_hash_free to be called with wrong second argument so that kfree is called on a block allocated with vzalloc or __get_free_pages or free_pages is called with wrong order when a namespace with enough policies is removed bug introduced by commit versions are affected
c4ae2adedb38240be5a1a16588406980b948a3e7	pci pciehp leave power indicator on when enabling already-enabled slot if an error occurs when enabling a slot pciehp_power_thread turns off the power indicator but if the only error is that the slot was already enabled we should leave the power indicator on return success if called to enable an already-enabled slot this is in the same spirit of the special handling for eexists when pciehp_configure_device determines the slot devices already exist
d0319bd52e373c661f9bc0c04dec85d6f87ac517	mm remove bogus warning in copy_huge_pmd sasha levin reported the following warning being triggered warning cpu __number__ pid __number__ at call trace this warning was introduced by mm numa avoid unnecessary disruption of numa hinting during migration for paranoia reasons but the warning is bogus i was thinking of parallel races between numa hinting faults and forks but this warning would also be triggered by a parallel reclaim splitting a thp during a fork remote the bogus warning
2292d64c53e8acd4980eb3688c088e00fe8bf98b	staging comedi hwdrv_apci3501 change printk to dev_err dev_err is preferred to printk in device drivers
81fec905f1f82c8d0f94ae998b6d5eed20c5c788	staging comedi pcl730 replace comedi_board calls the comedi_boarddev inline function calls just return expand the inline function calls
feada066c851a45e63e6aeeabada5605bde0af66	staging rtl8192u fix alignment in this patch fixes alignment issues in to improve code readability
1980bd4d829a87ccd21b949f8a11ff1b426f5b0b	sunrpc xprt_complete_bc_request must also decrement the free slot count calling xprt_complete_bc_request effectively causes the slot to be allocated so it needs to decrement the backchannel free slot count as well
b03fbab0c4d502510400b7ee5fb3d5bab6d859bf	wil6210 ignore selected wmi events some events are ignored for purpose such events should not be treated as unhandled events replace info message saying unhandled with debug one saying ignore to reduce dmesg pollution
3b1f9f53b18b2007803de17ab79cea736d5baf81	dont use spacr64 at least spits this back
fb0e139d93f50f0cfa3ff4377d34c70dbc542797	usb gadget atmel_usba fix crash when no endpoint are specified if no endpoints are present in the device tree the kernel will crash with the following error unable to handle kernel paging request at virtual address __number__ composite_dev_prepare from composite_bind from udc_bind_to_driver from usb_gadget_probe_driver from do_one_initcall from kernel_init_freeable from kernel_init from code end trace kernel panic not syncing attempted to kill init __number__ this checks for that case and returns an error not allowing the driver to be loaded with no endpoints
a51b89698ccc93c7e274eb71377fae49c4593ab2	rt2800 set minimum mpdu and psdu lengths to sane values
f37d4298aa7f8b74395aa13c728677e2ed86fdaf	hwpoison fix race with changing page during offlining when a hwpoison page is locked it could change state due to parallel modifications the original compound page can be torn down and then this page becomes part of a differently-size compound page is is a standalone regular page check after the lock if the page is still the same compound page we could go back grab the new head page and try again but it should be quite rare so i thought this was safest a retry loop would be more difficult to test and may have more side effects the hwpoison code by design only tries to handle cases that are reasonably common in workloads as visible in page-flags im not really that concerned about handling this likely rare case just not crashing on it
5cf700ac9d50353dc5b8194a57c6f40bf1fc4424	phy phy-sun4i-usb fix optional gpios failing probe the interrupt __number__ is not a valid interrupt number in the event where the retrieval of the vbus-det gpio would return null the gpiod_to_irq callback would return __number__ while the current code makes the assumption that it is a valid interrupt and would go on calling request_irq obviously this would fail preventing the driver from probing properly while the vbus and id gpios are optional
7fb4a3a31ffc8c7fa69258e92336ccf78ca5e2b5	remove dead code from failing case coverity points out that if we end up in the failed label thats precisely because we couldnt retrieve a fixed mode ie fixed_mode is null and then if fixed_mode is always false remove that dead code
f414bb19b79ec9ca1d4bd19a7964b1471146b341	iio accel mma7455_i2c add of device id table the driver doesnt have a struct of_device_id table but supported devices are registered via device trees this is working on the assumption that a i2c device registered via of will always match a legacy i2c device id and that the modalias reported will always be of the form but this could change in the future so the correct approach is to have an of device id table if the devices are registered via of
ff3a2b73b7d6d79038512d60690de18cd7aa4e21	fix decimal permissions these should have been octal
f4acb1086bc972f69e1ae14ec5b4473bc6c02dd5	batman-adv avoid sysfs name collision for netns moves the kobject_put is only removing the sysfs entry and corresponding entries when its reference counter becomes zero this tends to lead to collisions when a device is moved between two different network namespaces because some of the sysfs files have to be removed first and then added again to the already moved sysfs entry warning cpu __number__ pid __number__ at kobject_add_internal failed for batman_adv with dont try to register things with the same name in the same directory but the caller of kobject_put can already remove the sysfs entry before it does the kobject_put this removal is done even when the reference counter is not yet zero and thus avoids the problem
14be7a5c29c2bf3b9567da1e41a514c4bbcdacdf	move intel_dsi_clear_device_ready move the intel_dsi_clear_device_ready function to higher up in this pairs it with intel_dsi_device_ready and pairs with without intel_dsi_clear_device_ready sitting in the middle of them this commit purely moves code around it does not make any changes what-so-ever
8d1c6ef67a4530ee5dbd5038d2959a54593013b1	pinctrl imx fix the logic checking if not able to find pin reg map current code sets pin_reg in each loop iteration so in the case of no-match pin_reg is not null
5110e51d127221c93f331841e601612b187b60f4	dmaengine pl08x add support for different maximum transfer size pl080s has separate register to store transfer size in allowing single transfer to be much larger than in standard pl080 this patch makes the amba-pl08x driver aware of this and removes writing transfer size to reserved bits of ch_control register on pl080s which was not a problem witn transfer sizes fitting the original bitfield of pl080 but now would overwrite other fields
5f4e0be3a72325fbc4d349a847cc9b2edd85b6d2	clk sunxi make factors_clk_setup return the clock it registers we will be needing this to register a factor clock as parent with leaf divisors on a single call
0f02c4e749bc79975dd23ddcc9bfe38bf76afb67	avoid undefined behaviour the mdc value can be quite big like __number__ so we are in undefined territory when doing the multiplication with the also signed fcx_max_data_factor as outlined by ubsan ubsan undefined behaviour in signed integer overflow __number__ __number__ cannot be represented in type int cpu __number__ pid __number__ comm not tainted workqueue events_unbound async_run_entry_fn __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ call trace __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ as this is a runtime value there is actually no risk of any sane compiler to detect and abuse this undefinedness but lets make the multiplication defined by making mdc unsigned
0d4b729dac35bb265533c79b554578a5ec6df384	cxgb4 fix uld_send for ctrl pkts without any uld being loaded uld_txq_info will be null uld_send is also used for sending control work requestsfor eg setting filter that dont require any ulds to be loaded hence move uld_txq_info assignment after ctrl_xmit also added a null check for uld_txq_info of resources for uld
9161e9311c29e905c8b1cf9f10f5010239d49975	staging most fix usb babble on in pipe this patch prevents the hdm usb from submitting an urb with a buffer size unaligned to __number__ bytes to the usb subsystem
7598968d6fdbe8960b941246cc6ebef725899c59	at86rf230 fix register read for part version the driver was reading the part_num register for both the part number type of device and the part version the version is actually in register version_num i believe that this was a copy-paste error tested on at86rf212b where the part is detected to be the expected part number and version on mine
11b9ce622a8c29740707e5fbb54cddf8d7892398	asoc wm8711 use snd_soc_update_bits for read-modify-write use snd_soc_update_bits for read-modify-write register access instead of open-coding it using snd_soc_read and snd_soc_write
1066f7724c73fca9ddb978c7f5b7411c54032047	kvm ppc book3s hv put huge-page hptes in rmap chain for base address currently when a huge page is faulted in for a guest we select the rmap chain to insert the hpte into based on the guest physical address that the guest tried to access since there is an rmap chain for each system page there are many rmap chains for the area covered by a huge page __number__ for pages when page_size and the huge-page hpte could end up in any one of them for consistency and to make the huge-page hptes easier to find we now put huge-page hptes in the rmap chain corresponding to the base address of the huge page
050276ab8ce9f30c1d2d74c42a349ed54701905f	remove duplicate defines of data div bits remove duplicate definition accidentally introduced in and re-group definitions nicely
8480c2e7b0484b8ec741bbb908455fce748f9798	pinctrl tegra-xusb fix allocation of pins commit e5b3b2d9ed20 pinctrl allows not to define the get_group_pins operation allows pin controllers not to register the get_group_pins function however a side-effect of not registering this function is that pins are not allocated and potentially multiple devices could attempt to configure the same pins __number__ although this problem exists in the pinctrl core because only a few devices are impacted by this fix this for tegra-xusb by adding the get_group_pins function please note that in addition to adding the get_group_pins functions the for the tegra-xusb also need to be registered when calling pinctrl_register this also allows the current pinmux state to be viewed by the debugfs node pinmux-pins for the tegra-xusb pad controller __number__
a5aa63a5f7352aa8991f64d46854dcb8d3788d55	drain the free slab as much as possible slabs_tofree implies freeing all free slab we can do it with just providing int_max
c1f1f6663b3c749dd9eba9eaeb178859080104e2	orinoco orinoco_tmd use msecs_to_jiffies for conversion this is only an api consolidation and should make things more readable it replaces var hz __number__ by msecs_to_jiffiesvar
3d11df7abbff013b811d5615320580cd5d9d7d31	kvm s390 fix vcpu_load handling in interrupt code recent changes kvm make processes waiting on vcpu mutex killable now requires to check the return value of vcpu_load this triggered a warning in s390 specific kvm code turns out that we can actually remove the since schedule will do the right thing via the preempt notifiers
531f67bb9ff4069b629762dd5a560e23fc4c5478	perf tests dont fail if a matching vmlinux isnt found skip that test now that jiri introduced test_skip dont fail on the first test just skip it link
d5e660ba801e333657e7c6d10cd806f277c438fb	ia64 pci remove unused fallback_dev there are no users of fallback_dev so remove it
0549d95216710e52cd8d9cc5e399d11365435bed	net sunbmac use use the wrapper functions for getting and setting the driver data using platform_device instead of using with so we can directly pass a struct platform_device
9c1c204fb3c7969f07cdbbed8e3bb2595e7a49c9	staging lustre llite remove mode from ll_create_it remove the unused mode parameter from ll_create_it intel-bug-id reviewed-on
4f7df337fe79bba1e4c2d525525d63b5ba186bbd	netlink nla_ok nla_ok consists of __number__ clauses __number__ int rem intsizeofstruct nlattr __number__ u16 nla_len sizeofstruct nlattr __number__ u16 nla_len int rem the statement is that clause __number__ is redundant what it does is ensuring that rem is a positive number so that in clause __number__ positive number will be compared to positive number with no problems however u16 fully fits into int and integers do not change value when upcasting even to signed type negative integers will be rejected by clause __number__ just fine small positive integers will be rejected by transitivity of comparison operator note all of the above does not apply to nlmsg_ok where is so __number__ clauses and a cast to int are necessary obligatory space savings report kb function old new delta validate_scan_freqs __number__ __number__ tcf_em_tree_validate __number__ __number__ dcbnl_ieee_del __number__ __number__ __number__ __number__ ovs_nla_put_actions __number__ __number__ netlbl_cipsov4_add_std __number__ __number__ nl80211_parse_sched_scan __number__ __number__ ip_tun_from_nlattr __number__ __number__
65ade7d34bb6436104f1fdcce899bd81707da2e1	fixed topology boundary checking for screen targets for a screen target capable display device the display topology is limited by svga_reg_max_primary_bounding_box_mem two values are checked against this limit __number__ size of the bounding box enclosing all the displays and __number__ size of the total number of displays framebuffers the limitations above mean we do not have exact max width and height for the topology the best current option is to set those to the maximum texture
0fd927f578e96fe56f1acbfe97e6c71e6c3a4b11	serial max310x fix sparse warnings sparse warnings new ones prefixed by sparse incorrect type in argument __number__ different address spaces expected void const noderef got struct serial_rs485 sparse incorrect type in argument __number__ different address spaces expected void noderef got struct serial_rs485
431296a4cf0e9c951457cf3f6786760f63dee7f5	rtc rtc-ab8500 remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure since commit device-core ensure drvdata null when no driver is bound thus it is not needed to manually clear the device driver data to null
ad3cba989e8b1bbefe078eece29f0e8d8aaea1d6	net mediatek only wake the queue if it is stopped the current code unconditionally wakes up the queue at the end of each tx_poll action change the code to only wake up the queues if any of them have actually been stopped before
1471f35efa86407fc180ca6d55363c684d166ef6	ipvs sh support scheduling packets consistently source_hash the dest fields if its an inverse packet
0ebfd313fd4baf3fa1bd02d5f106e377595d4987	fix return value of the return value of gets passed to user space however we do not convert a positive return value from to therefore these functions and the calling system calls my incorrectly return a positive number bytes not copied instead of
c1f7d3114454f5ae2211e7ea872397071fb296f2	staging comedi fix printk issue in this is a patch to the file that fixes up a printk warning found by the tool added kern_facility levels for printks
9c8747167e204b3fe0ff143e1642c921e382e1d6	block atari return early for unsupported sector size for lba or very large disks atari_partition can easily get tricked into thinking it has found an atari partition table depending on the data in the disk it ends up creating partitions with awkward lengths we saw logs like this while playing with fio __float__ nvme2n1 ahdi p2 __float__ nvme2n1 p2 size __number__ extends beyond eod truncated people has had issues with misinterpreted ahdi partition tables for a long time see this bsd thread from __number__ for example since the atari partition according to the spec doesnt even support sector sizes with more than __number__ a quick sanity check is reasonable to just bail out early before even attempting to read sector __number__
cf22f9a2b83e72082c43ef5c942d5daf9301da8e	ipv6 remove unused argument to addrconf_dad_start
2f6f0ffb2b073a0a5a9ffe5705b8e8cc43558d3a	asoc samsung make secondary i2s dai device a child of primary more for neatness than for any great utility really we shouldnt be creating the child device at all refactoring will follow
e46a2cf9e1dea9267e8a3f5284aea908e5aac5c6	mac80211 fix kernel panic in ibss due to a regression kernel panic occurs when we create an ibss mode and leave it for sometime without any joiner and this is introduced by the commit ec2b774e7c91094d8c00de579646f1162b87b01e where we dont put proper braces for list_for_each_entry_safe and we pass an invalid sta pointer to __sta_info_destroy eip is at eax ebx __number__ ecx edx __number__ esi __number__ edi __number__ ebp esp ds es fs gs ss __number__ process pid __number__ stack __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ call trace mac80211 mac80211 mac80211 mac80211 mac80211 mac80211 mac80211 mac80211
6c308fecb4d1f928d52f9586d976f79b37149388	initialise userptr mmu_notifier serial to __number__ during the range invalidate we walk the list of buffers associated with the mmu_notifer and find the ones that overlap the range an optimisation is made to speed up the iteration by assuming the previous iter is still valid whilst the tree is unmodified this exposes a bug when a range invalidate is triggered after we have just created the mmu_notifier but before attaching any buffers in that case we presume we have an unmodified list and start walking from the last iter which is null oops the easiest fix is then to initialise the serial of the tree to __number__ testecase
95106753878fc3e60dde6346a71f4d0cb388cb48	extract intel_fbc_find_crtc i want to make this code a little more complicated so lets extract the function first
5d62a378ffff85ac9e581c228a9b505fb486e697	remove never used return variable get rid of the useless err variable since the return is treated farther down without the use of it
6b4657667ba06cd2e07206c65e630acdf248bfd1	add rename exchange process rename_exchange in affs_rename2 adding static affs_xrename based on affs_rename we remove headers from respective directories then affect bh to other inode directory entries for swapping
82bed4d5f8189a2f9db5d1bb6489ac2615426d65	block remove new annotations on ramsam driver
55a8d62a3bd2a0536d526da817fd4f49e6470770	fix check for null instead of is_err the ocrdma_alloc_lkey function never returns null pointers it returns err_ptrs
378596f99460ebd255dc3f5c1bc67a9ff09273f3	pinctrl ssbi-gpio use gpiochip data pointer this makes the driver use the data pointer added to the gpio_chip to store a pointer to the state container instead of relying on container_of
e3bf4c61da801c7967d0efff0c3f6b22d2c0e544	sparc64 fix bpf jit wrt branches and ldimm64 instructions like other jits sparc64 maintains an array of instruction offsets but stores the entries off by one this is done because jumps to the exit block are indexed to one past the last bpf instruction so if we size the array by the program length we need to record the previous instruction in order to stay within the array bounds this is explained in arm jit commit arm64 bpf fix out-of-bounds read in bpf2a64_offset but this scheme requires a little bit of careful handling when the instruction before the branch destination is a load immediate it takes up __number__ bpf instruction slots therefore we have to fill in the array entry for the second half of the load immediate instruction rather than for the one for the beginning of that instruction
f1691dc6159489e8928300cf674fb859f5b5dd12	bnx2x remove non-necessary assignment
87aca73737e379f079993802d2c43606f7c5d26c	nfc microread drop platform data header file originally i only wanted to drop the unneeded inclusion of but then noticed that struct microread_nfc_platform_data isnt actually used and microread_driver_name is redefined in the only file where it is used so we can get rid of the header file and dead code altogether
9da3545d827cdb9163697a1dc4471fbb5540e85f	alias for new zcrypt device driver base module the zcrypt device driver has been split into module api-module card modules and message type modules the base module has been renamed from z90crypt to ap a module alias with the well-known z90crypt identifier will be introduced that enable users to use their existing way to load the zcrypt device driver
e7808df1af8801cf4f2ac16be25db1b079b5da4c	added validation of edid for vidi connection if edid of vidi from user is invalid size calculated from a number of cea extensions can be wrong so validation should be checked changelog v2 just code cleanup declare raw_edid only if is enabled
61d49d2f9888ace06ab127cf6f063bed7c3b2e53	locktorture change longdelay_us to longdelay_ms the locktorture long delays are in milliseconds rather than microseconds so this commit changes the name of the corresponding variable from longdelay_us to longdelay_ms
ff2d6d340f8ddc074584dd9b285823c3e576549b	staging comedi addi_apci_1710 remove the these values in the boardinfor were used in the common addi-data attach code to work out use of the pci bars since this driver has a localized attach we already know the use of the bars so this information in the boardinfo is unnecessary
c82f8d113e354588fe3351b10e0c1ea154f5c600	rtl8xxxu move loading of agc table to device specific function this moves the loading of the agc table into init_phy_bb and reduces the if clutter
280e762e9c72ea1292fcc5321d5b6e31ad05967f	ath10k enable ipq4019 device probe in ahb module all the necessary patches to make wifi running over ahb on ipq4019 soc are ready now its good to enable ipq4019 wifi device probing in ahb module and remove work in progress debug print device tree change is there in the public review by below commit message qcom ipq4019 add wifi nodes to ipq4019 soc device tree
5ad02fb813a9d8f39af1ccb1f2166cc80fd76f09	usb dwc3 gadget move isoc endpoint check to unlocked set_halt __dwc3_gadget_ep_set_halt is the function which handles the actual halt feature in order to cope with some extra cleanup comming as a follow-up patch lets move the isochronous endpoint check there too
f60d16a8923201bb27ad7c09016abab2818cf8ce	btrfs avoid buffer overrun in mount option handling there is an off-by-one error allocating room for a maximal result string but without room for a trailing nul that can lead to returning a transformed string that is not nul-terminated and then to a caller reading beyond end of the mallocd buffer rewrite to remove unwarranted use of strncpy the result is guaranteed to fit remove dead strlen at end and change a few variable names and comments
f7e1ad1a1e23af97419cd8d5adff67fedf7cf169	use gfp_kernel instead of gfp_user gfp_user means honour cpuset nodes-allowed beancounting these are regular old kernel objects and there seems no reason to give them this treatment
345d4f92e72964e2d2f482c635bc949b04f861ed	iio dac max517 remove redundant variable remove an inconsequential print message and return directly thereby eliminating an intermediate variable
18f35fa6584fb28c674014674de20ed82bb84618	fix mpeg engine initialization is null which leads to a null deref down the line
b349feb36cc2b7ed41a5222a0b681153f3525369	raid5-cache refactor bio allocation split out a helper to allocate a bio for log writes
60af1066913162c5dd13fad3b872a67b1eb7da0f	pm sleep use wait queue to signal no wakeup events in progress the current wakeup source deactivation code doesnt do anything when the counter of wakeup events in progress goes down to zero which requires pm_get_wakeup_count to poll that counter periodically although this reduces the average time it takes to deactivate a wakeup source it also may lead to a substantial amount of unnecessary polling if there are extended periods of wakeup activity thus it seems reasonable to use a wait queue for signaling the no wakeup events in progress condition and remove the polling
2fd1db8819fbf73b5f74b4b4a205ab7be0957944	thermal dove fix thermal sensor formula the currently formula has been taken from the soc datasheet which is not exactly correct the correct value for the temperature in celcius of the sensor present in this soc is celsius
d44fc387997c0750125cfb0c2c803a3171b649f4	remove duplicate variable declaration in filelayout_clear_request_commit inode is declared twice for no good reason
e70b0915124942204dec8064bb25756e8723b81a	tile cpu topology remove stale macro arch_provides_topology_pointers macro arch_provides_topology_pointers is pointless now remove it
1a0ce16d713679be86a023f7bd0f9c54f2c07e8a	orangefs adjust unwind on module init failure
58f01aa93ff590ddd6a77cde41c25b6022d93769	bluetooth fix uuid values in debugfs file the uuid entry struct is used for the uuid byte stream that is actually the wrong value the correct value is besides fixing this up use the modifier to print the uuid string however since the uuid is stored in big endian with reversed byte order change the byte order before printing
c00bc5df7c01a189843cb048cf29e2a445e0037a	drivers cpuidle add idle-state-name description to arm idle states on arm machines where generally speaking the idle state numbering has no fixed and standard meaning it is useful to provide a description of the idle state inner workings for benchmarking and monitoring purposes this patch adds a property to the idle states bindings that if present gives platform firmware a means of describing the idle state and export the string description to user space the patch updates the dt parsing code accordingly to take the description if present into consideration
500d0c0fbb85b59e5e75fc83ff701b7d8aa285f9	rbd move stripe_unit and stripe_count into header this commit added fetching if fancy striping parameters rbd get and check striping parameters they are almost unused but the two fields storing the information really belonged in the rbd_image_header structure this patch moves them there
f065fd099fc475333fc7a55677a7f64764445d55	cifs fix possible freed pointer dereference in cifs_sesssetup
b467e08a15563dede0d37d3233baa24fb97a7310	clk sunxi-ng fix recalc_rate formula of nkmp clocks in commit e66f81bbd746 clk sunxi-ng implement factors offsets the final formula of nkmp clocks recalc_rate is refactored however the refactored formula broke the calculation due to some c language operand priority problem the priority of operand is lower than and makes the formula being parsed as parent_rate n k p m but it should be parent_rate n k p m add the pair of parentheses to fix up this issue this pair of parentheses used to exist in the old formula
b9c2446695cf3f98aec32e3b3f942ad1514068d2	scsi esas2r fix potential format string flaw this makes sure format strings cannot leak into the printk call via the constructed buffer
66459c5a50a787c474b734b586328f7111ab6df0	spi imx adjust watermark level according to transfer length previously dma watermark level is configured to dma mode can be used only when transfer length can be divided by watermark level bpw which makes dma mode not pratical this patch adjusts watermark level to largest number no bigger than which can divide tranfer length bpw for each transfer
66f5dcef137beef14560f1f6eba6717028b89089	ocfs2 dont open-code kernel_sendmsg
2fa3dc4ea7c1cdf4eed288de9a6cc5d3a8befddd	media vb2 fix compilation breakage when commit media vb2 dont warn when is __number__ for multiplanar buffers uses the __warn macro which isnt defined when config_bug isnt set this introduces a compilation breakage fix it by using warn_on instead the commit was also broken in that it merged v1 of the patch while a new v2 version had been submitted reviewed and acked fix it by incorporating the changes from v1 to v2
860c0aaff75e714c21d325f32d36a37572b4fffb	audit dont pass pid or uid to audit_log_common_recv_msg the only place we use the uid and the pid that we calculate in audit_receive_msg is in audit_log_common_recv_msg so move the calculation of these values into the audit_log_common_recv_msg simplify the calcuation of the current pid and uid by reading them from current instead of reading them from netlink_creds
93eac3b1c1e5554410d34d80160bc228462eaa77	staging vt6656 remove static declaration vnt_submit_rx_urb_complete moving vnt_submit_rx_urb in visibility of vnt_submit_rx_urb_complete
e587b8b270d3706147c806d42cc4ac78232caac7	xhci make warnings greppable this changes debug messages and warnings in to be on a single line so grep can find them grep must have precedence over the __number__ column limit sarah fixed two issues with split lines introduced by this commit
39e24d8ffbb6aa90222527dbd5991ec49fbbf323	sched fix a trivial syntax misuse use if statement instead of while loop link
8fe8c25ef92ffc773a49c4b0dab2938a6fd64489	asus-wmi fix section mismatch
b451cec4bbd913688f5381efad407762a64a92ce	ufs fix reserved blocks check a honour dont just go with default __number__ b dont bother with capability checks until we know well need them
3947b335bba390701619bd5c76ed8016f71d3017	hwrng bcm63xx remove unused variables these variables where left as unused in commit hwrng bcm63xx make use of devm_hwrng_register fixes the following warning in function bcm63xx_rng_probe warning unused variable rng struct hwrng warning unused variable clk struct clk
c7ef144c12033052c956ca9d80b2dfc19c73d939	hp-wmi cleanup wireless functions use the new hp_wmi_read_int function and add a warn_once to the tbd regarding passing the error through these are used in a null return function unfortunately
2230adffe4eae30ffce605daa81a116cb71b5960	btrfs delete unused member from superblock __bdev has never been used since __number__
abdad50d1d184e0c663b57015d9bbc11701207e7	dmaengine s3c24xx use correct print specifiers for size_t this driver warns in function s3c24xx_dma_prep_memcpy warning format expects argument of type int but argument __number__ has type size_t warning format expects argument of type int but argument __number__ has type size_t we should use to print size_t values
14247d7ce769cfc2269a8b6a58157abb26813f3e	drm bridge dw-hdmi enable csc even for dvi if the input pixel format is not rgb the csc must be enabled in order to provide valid pixel to dvi sinks this patch removes the hdmi only dependency on the csc enabling link
bb77082fa2584f0855e614e99b5ffd40b9cf4251	mtd nand remove unused function input parameter the nand_get_flash_type parameter busw input value is not used by any branch and it is updated before use it in the function so remove it define the busw as an internal variable
378a8b099fc207ddcb91b19a8c1457667e0af398	kvm x86 fix use of uninitialized memory as segment descriptor in emulator if vmx reports segment as unusable zero descriptor passed by the emulator before returning such descriptor will be considered not present by the emulator
c0ee62734e8e840b0096827f02b1aaac71ef5105	media s5k5baf fix potential null pointer dereferencing dereference fw after the null check
b701da39edeaa6f3f209f76b8f965700090ad60f	staging wilc1000 remove unnecessary extern function declaration function networkinforeceived gnrlasyncinforeceived and host_int_scancompletereceived are declared in the header file already just removes the declaration and comments
1ad38fd719da87980480886f21130053c73007ac	ath10k fix typo in addr calculation core_ctrl_address is offset in register address space it does not make sense to or it to derive the final address it looks like its a typo so fix it
e6e5f7adc9cb357a543b75ebb9a78d68275b8e92	alsa add more codec rename some vendor has special bonding options
8e0e7aedadb877d91a6e66611464165c969bc0a9	i40iw enable remote access rights for stag allocation fix to enable remote access rights when allocating stag
135444126a1175912b43366f6109cb297018f034	when mirrored retry failed reads by switching mirrors if the file is mirrored and a read to one mirror fails then we should bump the mirror index so that we retry to a different mirror once weve iterated through all mirrors and all failed we can return the layout and issue a new layoutget
2c96c25d114083c7661936ad4d27e6a2c46c527d	netfilter nft_hash use set global element counter instead of private one now that nf_tables performs global accounting of set elements it is not needed in the hash type anymore
7ba5fef7d9e1880635cbb2fd698e8a24dc366d0f	remove interrupt disable in __switch_to we currently turn irqs off in __switch_to0 but this is unnecessary as its already disabled in the caller this removes the irq disable but adds a check to make sure it is really off in case this changes in future
18259cac98884522a46c24a73ef8d4879d824607	lp8727_charger fix checkpatch warning fix the warning on module_author
967580598f46997ce5eeeea812686f5220bb49de	mfd cros_ec spi fix end of transfer on devices with no spi-msg-delay cros_ec_spi makes the assumption that a message will put the spi chip select back to normal non cs_toggle mode this used to be the case back on on the spi-s3c64xx driver but doesnt appear to be true anymore it seems like it was a pretty questionable assumption to begin with so lets fix the code to be more robust we know that a message with a single segment _will_ put things back in order change cros_ec_spi to handle this this wasnt a problem on the main user of cros_ec_spi upstream tegra because it specified
189c88ced169d5197c806828e275c6f063b1d499	asoc rt5631 adding device tree compatibility to realteks codec driver
6da4dc629b8e20332570cca9e29a1d83b83464e5	net ethoc remove empty mdio bus function ethoc_mdio_reset does nothing useful and is optional for the mdio bus code so lets just remove it
70d7f98722a7a1df1a55d6a92d0ce959c7aba9fd	uprobes fix the wrong usage of in uprobe_copy_process commit aa59c53fd459 uprobes change uprobe_copy_process to dup xol_area has a stupid typo we need to setup but the code wrongly uses even with this bug dup_xol_work works in practice but only because get_unmapped_areanull task_size page_size likely returns the same address every time
47981787092aecb87dc3cb2d478455dcfb77516a	sysctl remove an unused variable links is never used so we can remove it
41445999aeec1f0fdf196ab55b2c770473b2ea01	ceph dont include used caps in cap_wanted when copying files to cephfs file data may stay in page cache after corresponding file is closed cached data use fc capability if we include fc capability in cap_wanted mds will treat files with cached data as open files and journal them in an eopen event when trimming log segment
0aa48783979d40a1de59eb5b04989e1398400c3c	psr organize psr enable function we dont need to setup everything else if it doesnt match all conditions
18c2d52249fff156ff2db2e18cefe5184078af72	drbd rename drbd_pp_first_pages_or_try_alloc to __drbd_alloc_pages
c573972c111eb4c6b3f3250ad71e7c75cc799833	net ethernet sun drop unused variable commit bfd428d net ethernet sun initialize variables directly dropped the only loop that was using i but did not remove the actual variable therefore causing a warning when building this patch drops the now redundant line
684e563858018d27acb8f00e30c026215bbd0ffb	nfsd4 cleanup lock clientid handling in sessions case id rather the ignore clientid in sessions case rule be enforced in just one place
99e37d0ea607623f286b4841cc355e65b297170c	irqchip crossbar set cb pointer to null in case of error if crossbar_of_init returns with a error then set the cb pointer to null link
889c5e9b668670c91dcd3a8f2b15a0b2086f4827	iio dht11 whitespace changes to make happy add spaces around binary operators in cases where it reduces readability align multiline statements around opening parenthesis in message-id gmx.de
7b957b6e603623ef8b2e8222fa94b976df613fa2	add support for et_dyn binaries add support to for handling relocatable pie executables whose elf type is et_dyn not et_exec other than adding support for the new type no changes are needed
72143b9e947c593555fa2a869a4bc08b9745b105	rtl8xxxu set the correct thermal meter register for older chips use rf register to set the thermal meter newer chips use register this change makes sure to set the correct thermal meter register depending on the chip
db8310183ae493d5229e9a4018bc5df59cc31d98	iscsi fix check keys we report a bogus printk due to a missing break
11feeb498086a3a5907b8148bdf1786a9b18fc55	kvm optimize away thp checks in kvm_is_mmio_pfn the checks on pg_reserved in the page structure on head and tail pages arent necessary because split_huge_page wouldnt transfer the pg_reserved bit from head to tail anyway this was a forward-thinking check done in the case pagereserved was set by a driver-owned page mapped in userland with something like remap_pfn_range in a vm_pfnmap region but using hugepmds not possible right now it was meant to be very safe but its overkill as its unlikely split_huge_page could ever run without the driver noticing and tearing down the hugepage itself and if a driver in the future will really want to map a reserved hugepage in userland using an huge pmd it should simply take care of marking all subpages reserved too to keep kvm safe this of course would require such a hypothetical driver to tear down the huge pmd itself and splitting the hugepage itself instead of relaying on split_huge_page but that sounds very reasonable especially considering split_huge_page wouldnt currently transfer the reserved bit anyway
c364796a473db467b9201ea31a096bc0cf23547a	asoc imx-pcm-dma dt support this patch removes the no_dt flag the pdev pointer may have a proper of_node with the dmas property so we can use it to request dma channels
c9b3a7d227068ccf25f435b1b0720ccc73ee5178	pinctrl single call whenever irq mask is changed on omaps the io ring must be rearmed each time the pad wakeup configuration is changed so call from pcs_irq_set as pinctrl-single is now an interrupt controller in some cases we should follow the standards and keep the interrupts enabled constantly and not just for wake-up events the tracking of runtime vs wake-up interrupts can be handled separately for the automated runtime pm solution when we have it in the future
cd9ae5fe47dfb9820976c3c38c70f4b07a5a1c36	kvm x86 fix page-tables reserved bits kvm does not handle the reserved bits of x86 page tables correctly in pae bits are reserved in the pdpte in ia-32e bit __number__ is not reserved
ca4b3f302c90de5e516296e581c31c80125cd24b	only free wait_table if its allocated by vmalloc may be allocated from bootmem it can not be freed
b44b96a060f3fd06456214cac7dfdd3ddf0caf2b	uartlite adding a kernel parameter for the number of uartlites the number of uartlites should be set by a kernel parameter instead of using a this allows the user to set the number of uartlites using only kconfig and not modifying kernel source the uartlite is used by fpgas that support a basically unlimited number of uarts so limiting it at __number__ dosnt make sense as users might need more than that
fc489a528728dcce38df10a74cc1539522b670e7	staging vme devices merges two lines of code and removes unused variable this patch merges an assignment with an immediately following return of the assigned variable the following coccinelle semantic patch was used to make this transformation expression ret identifier f ret
b94c820f37804a461376205b4919eef300ff3abe	i2c cpm make use of the new infrastructure for quirks
50fc08f8c023d1e698207342e003f1b6d4bca1f5	greybus manifest dont free unallocated resources
161f693460772ef269ab35cbd145b6431e935eac	fix issue in computing domains iommu_snooping flag iommu units may dynamically attached from domains so we should scan all active iommu units when computing iommu_snooping flag for a domain instead of only scanning iommu units associated with the domain also check snooping and superpage capabilities when hot-adding dmar units
d2233325e5b7891914901867ca5355347d59df14	spi spi-fsl-dspi remove clk reference when regmap_mmio initialize it is unnecessary for dspi to clk when access dspi register and it will reduce efficiency
accad1ba7d62543ab3bcf08813726ea87d237bb6	greybus power_supply fix use after free of power supply individual power supply were being freed and checked using the wrong pointers and at the wrong place which would make several issues like used after free and so on fix it by freeing all allocated memory after release individual power supply
ed8dda0bf74b4fb8e73d8880c78effabd3285fd8	kvm s390 enable all facility bits that are known good for passthrough some facility bits are in a range that is defined to be ok for guests without any necessary hypervisor changes enable those bits
dbeca583f9b8e35aa08279b81d5340dac3a60aff	iwlwifi dont warn if transports allocation failed the allocation failure will already be very verbose
b02b07adb159166f57d5e66e67ab1ae9de254229	pci tegra set up pads_refclk_cfg1 the registers pads_refclk_cfg are an array of data one entry per pcie root port for tegra30 we therefore need to write a entry in this array doing so makes the mini-pcie slot on beaver operate correctly while were at it add some to partially document the fields within these values
546b1b6a40999b6fb23cb45aaffa72d02076306c	store the active context object on all engines upon error with execlists we have context objects everywhere not just rcs so store them for post-mortem debugging this also has a secondary effect of removing one more unsafe list iteration with using preserved state from the hanging request and now we can cross-reference the requests context state with that loaded by the gpu
aa5b2bab9c3eeb1f8135ba5e30c3ce712e099d81	ipmi remove deprecated irqf_disabled this patch proposes to remove the use of the irqf_disabled flag its a noop since and it will be removed one day
581da2cab557fa6e8a954c148c487eb7e0658979	async export current_is_async introduced by workqueue implement current_is_async
22001f619f29ddf66582d834223dcff4c0b74595	rbd only set disk to read-only once rbd_open called every time the device is opened calls set_device_ro theres no reason to set the device read-only or read-write every time it is opened just do this once during device setup using set_disk_ro instead because the struct block_device isnt available to us there
b852ac51e25789846cb6257e737a9a1734a0d171	rx51_battery use devm_kzalloc use devm_kzalloc to make cleanup paths more simple
a1940805d0636c6cdf37636f55b43b9681d53e73	nfs get rid of the unused field
5434b203156ef245b7847128c446c5b54f12a6d4	ata ahci_platform fix devm_ioremap_resource return value checking devm_ioremap_resource returns a pointer to the remapped memory or an err_ptr encoded error code on failure fix the check inside ahci_platform_get_resources accordingly also while at it remove a needless line break
d54313cf00ecfbfad975ca6e2dbeecd6c1b4322e	staging netlogic coding style fixup remove unnecessary return at end of a void function part of the eudyptula challenge
c859aa83113dcad165d986e66aa21c5b73745f42	use kvfree in ipc_rcu_free use kvfree instead of open-coding it
f558461335922afeb21650a3bddb1b58d183ab7f	media saa7134 constify nxt200x_config structures declare nxt200x_config structures as const as they are only passed as an argument to the function dvb_attach dvb_attach calls its first argument on the rest of its arguments the first argument of dvb_attach in the changed cases is nxt200x_attach and the parameter of this function to which the object references are passed is of type const so nxt200x_config structures having this property can be made const file size before text data bss dec hex filename __number__ __number__ __number__ __number__ __number__ file size after text data bss dec hex filename __number__ __number__ __number__ __number__ __number__
a4302ede92d143dd6c0f3dfbe25bcce852249e61	alsa pcsp remove redundant platform_set_drvdata commit device-core ensure drvdata null when no driver is bound removes the need to set driver data field to null
bf458746b2832599838558a87ac0ad85050edefd	media s5p-mfc update scratch buffer size for mpeg4 update the mpeg4 decoder scratch buffer size as per the new v6 firmware this updation is increasing the size and so is backward compatible with older v6 firmwares
3fe296cf5a66a82bc9077865b89075ce813f7f5d	clk max77686 remove unnecessary null checking for container_of container_of never returns null thus remove the null checking for it also rename get_max77686_clk to to_max77686_clk for better readability
f1ae924d1871391f5a8b21d8220531830475a902	add a simple request selftest for waiting a trivial kselftest to submit a request and wait upon it
2daf71ad8da6cb57f919c9c876ee7e42530371df	asoc rsnd avoid pointless loop in rsnd_mod_interrupt current renesas sound driver doesnt have relationship between stream mod because it is supporting mix because of this reason rsnd_mod_interrupt is searching correspond mod by for loop but this loop is not needed because each mod has own type this patch avoid pointless loop by using this patch is good for ssi-parent support because stream might have __number__ ssi as ssi interrupt handler will be called twice if stream has ssi-parent without this patch
e9137d4b93078b6a9965acfb18a2a2ad91cf8405	blk-mq fix null pointer updating nr_requests a contexts tags are freed if it was not assigned a cpu check if the context has tags before updating the depth
a2f195a73eba807006fb0cb882ecb552c06eea00	bluetooth bcm203x dont print error when allocating urb fails kmalloc will print enough information in case of failure
d703a5ae3ab33226d143917051666fe20b528d9e	bcma extract some basic info about board from sprom
f13edb8b281cf7fa762b14323238d6884df38792	asoc rsnd dvc add rsnd_dvc_halt based on datasheet process
30f468b2ea7a75aa7e212b7d89eb136a55462ee8	misc panel remove panel_version hardcoded driver versions are so pre-git
bad007bca7b7643fea786737071c86088ba2803b	tw68-core use pci_set_dma_mask insted of pci_dma_supported this ensures the dma mask that is supported by the driver is recorded in the device structure
36387a2b1f62b5c087c5fe6f0f7b23b94f722ad7	k3dma fix memory handling in preparation for cyclic mode with cyclic mode the shared virt-dma logic doesnt actually manage the descriptor state nor the calling of the descriptor free callback this results in leaking a desc structure every time we start an audio transfer thus we must manage it ourselves the k3dma driver already keeps track of the active and finished descriptors via ds_run and ds_done pointers so cleanup how we handle those two values so when we tear down everything in terminate_all call free_desc on the ds_run and ds_done pointers if they are not null note hikey doesnt use the non-cyclic dma modes so im not been able to test those modes but with this patch we no longer leak the desc structures
4af971064977b00a437c1ed8ead8876db4e3b58a	pci of add address recognition without lpae support if non-lpae kernel is booted up on a machine with pci resources pci controller probe fails with pci host bridge __number__ ranges io __address__ __number__ mem __address__ __number__ mem __address__ __number__ pci-host-generic __number__ resource collision mem __address__ conflicts with __number__ mem __number__ pci-host-generic probe of __number__ failed with error this happens because assignment in of_pci_range_to_resource truncates the upper part of the address because is of phys_addr_t type which is on non-lpae kernels this patch adds explicit recognition of resources preventing from potential problems when e g __number__ would be converted to __number__
b6abc90480a6bff2c2ff4904b7ae708f51ce8c03	tty ipwireless check ppp register worked otherwise we start trying to use a bogus channel ungood
c4dc12167db8c7c22b38ab5180afdd5c2acba783	i2c i2c-bcm2835 match return type of wait_for_completion_timeout return type of wait_for_completion_timeout is unsigned long not int as time_left is used for wait_for_completion_timeout exclusively here its type is simply changed to unsigned long
34a78b488f144e011493fa51f10c01d034d47c8e	nfsd4 read encoding cleanup trivial cleanup no change in functionality
1419d8151be990f115c38deac497ad84d26434dd	pinctrl berlin fix an error code in berlin_pinctrl_probe we are returning success here because ptr_errnull is zero we should be returning
eb0ac4207f2db7245f07606a2b7929e604b875bd	rocker set feature netif_f_hw_switch_offload this patch sets the netif_f_hw_switch_offload feature flag on rocker ports
f0ec8cd5eb49e0360ce6ba865d5f2267b28d1f84	greybus audio fix incorrect direction value when enabling rx the direction value passed to gb_audio_apbridgea_register_cport in the gbaudio_module_enable_rx routine is tx and not rx like it should be so fix it testing done recorded microphone data from a headset
2ec1cb760582f8e666fb493ed1ccec7d5cc3d8c6	staging rtl8812ae replace strict_strtoul with kstrtoul the usage of strict_strtoul is not preferred because strict_strtoul is obsolete thus kstrtoul should be used
2b693005b833ba309c7cb8426cd023d8e80da31e	ocfs2 fix xattr check in ocfs2_get_xattr_nolock ocfs2_get_xattr_nolock checks whether inode has any extended attributes ocfs2_has_xattr_fl if not it just sets ret to but continues with checking inline and external attributes anyway which is pointless although it does not harm just return immediately when we know there are no extended attributes in the inode coverity id __number__
7281b16423cd9b8795ea319c65140f38fd8187a2	iwlwifi mvm rs fix a warning message warn_on_once doesnt take a message it only takes a condition i have changed this to warn1
e8b8b8ad6e5218e2073a9dddcd9f97d6b4fc514e	scsi qla2xxx fix incorrect test after list_for_each_entry exits list_for_each_entry never leaves the iterator pointing to null
28446acb1f8268cda4b2076f72519534f84d6a36	mtd atmel nand fix gpio missing request without this the gpio will not be muxed as a gpio by the current custom pinmux or later by the pinctrl
45937b5b5e1fcb362332a071e4eb5f4eb270bb20	pinctrl exynos remove eint_gpio_init call-back for exynos7 alive pinctrl block the alive pin controller on exynos7 does not support external gpio interrupts hence remove the eint_gpio_init call-back for it this fixes the following error message seen during exynos7 boot-up samsung-pinctrl __number__ irq number not available
c675949ec58ca50d5a3ae3c757892f1560f6e896	do not setup backlight if not available according to vbt some machines use an external ec for controlling the backlight info about this is present in the vbt do not setup native backlight control if no pwm backlight is available or supported according to vbt the acpi_backlight interface appears to work for the ec control in most cases there has been no harm done but it looks like there are machines out there that have both an ec and our pwm line connected to the same wire this obviously does not end well this should fix the regression caused by commit bc0bb9fd1c7810407ab810d204bbaecb255fddde date thu nov __number__ __number__ remove quirk_no_pch_pwm_enable afaict the quirk removed by the above commit effectively resulted in i915 not driving the backlight pwm output thus not messing things up additionally this should fix the regression caused by commit fbc9fe1b4f222a7c575e3bd8e9defe59c6190a04 author aaron lu intel.com date fri oct __number__ __number__ acpi video do not register backlight if win8 and native interface exists which left some machines without a functioning backlight interface bugzilla reference bugzilla tested-by
b78f3f3c898c824bf56ab55cfa59fc72be49c349	prevent deep idle if no broadcast device available add a check for a installed broadcast device to the oneshot control function and return busy if not split out from a larger combo patch link
b5738413c96126e8191bc506b403cd55950b8f9a	usb gadget dummy_hcd move selection of speed into the configuration is static however we only know the speed after we have connected with the other side
258f8667a29d72b1c220065632b39c0faeb061ca	tipc add lock nesting notation to quiet lockdep warning tipc accept call grabs the socket lock on a newly allocated socket while holding the socket lock on an old socket but lockdep worries that this might be a recursive lock attempt info possible recursive locking detected is trying to acquire lock at tipc but task is already holding lock at tipc other info that might help us debug this possible unsafe locking scenario cpu0 locksk_lock-af_tipc locksk_lock-af_tipc deadlock may be due to missing lock nesting notation tell lockdep that this locking is safe by using lock_sock_nested this is similar to what was done in commit for sctp code sctp lock_sock_nested in sctp_sock_migrate also note that this is isnt something that is seen normally as it was uncovered with some experimental work-in-progress code not yet ready for mainline so no need for stable backports or similar of this commit
6f262ecfdcda004804d1f444285b99c7e92ddbd9	mfd sun6i-prcm add support for the ir-clk add support for the ir-clk which is part of the sun6i soc prcm module
fa57560c5d4d58591dda2b160731eb4da3619016	staging vt6656 remove dead code rts_cts void
fd8563ced8f50c5029fdf8e57735138e2e630423	nvme-rdma support ctrl_loss_tmo before scheduling a reconnect attempt check nr_reconnects against max_reconnects if not exhausted or max_reconnects is not schedule a reconnect attempts otherwise schedule ctrl removal
99ca1772e52d8825172100a24e461a0ffe11e125	arm l2c implement l2c-310 erratum __number__ as a method override implement l2c-310 erratum __number__ by overriding the flush_all method in the outer_cache operations structure this allows us to sensibly contain the erratum code in one place without affecting other locations or implementations
3f6d439f202243a1594f2e1b86620af0d342bbe6	clk reverse default clk provider initialization order in of_clk_init this restores the default clocks registration order as parsed from devicetree as before commit clk respect the clock dependencies in of_clk_init for when there is no explicit parent clock dependencies between clock providers specified in the device tree it prevents regressions boot failure division by __number__ errors on imx and exynos platforms
c51a3fd66c3881b692335a7fe1654b0b08a90a21	drm store vendor ids directly in the edid quirk structure edid vendor ids are always __number__ characters long __number__ with the terminating __number__ it doesnt make any sense to have a possibly pointer to the id string in the quirk structure
3449ca859a2ea8466b58794b256892508ea0c1b0	increase ddi buf idle timeout for bxt ddi buf idle timeout delay needs to be increased to since this is a timeout value and we return as soon as the condition is realized no penalty incurred for other platforms v2 remove timeout macro used only at a single place daniel
cb147c0f0b33f5ba37dfd07014f2973a53bc5d62	m32r io implement dummy relaxed accessor macros for writes are implemented by some architectures in order to permit memory-mapped accesses with weaker barrier semantics than the non-relaxed variants this patch adds dummy macros for the write accessors to m32r in the same vein as the dummy definitions for the relaxed read accessors
1ad75b9e16280ca4e2501a629a225319cf2eef2e	prctl add minimal address test to pr_set_mm make sure the address being set is greater than mmap_min_addr as suggested by kees cook
b25f77815021ec6e7400a82c4984b9c80699ce80	asoc ak4554 add dt support support for loading the ak4554 codec module via devicetree
a1a3580cb322f71cc5aa7e9180ffb6df609b530d	sh-pfc dont overallocate memory for the gpio chip pins array the gpio driver uses an array of sh_pfc_gpio_pin structures to store per-gpio pin data the array size is miscomputed at allocation time by using the number of the last pin instead of the number of pins when the pin space contains holes this leads to memory overallocation fix it
601e3ad9def147f714c1b66fd397d138ba5dbd3b	mn10300 add functions these functions are used in various drivers including the latest version of the __number__ driver the latter causes the following build failure in function mem32be_serial_out error implicit declaration of function iowrite32be in function mem32be_serial_in error implicit declaration of function ioread32be accesses
1605cda06ba58f1b3b9570ae9ea13e9793aeca2a	staging bcm2835-audio fixed that open brace should be on previous line error in fixed error that open brace should be on the previous line one coding style correction for better readable code
e8ca413558de8ea235a1223074c4ed09616b9034	bump driver version and release date
a3f50d1bdd47dfa07cb42f7d954739389664f166	arm shmobile bockw switch to use dai info for r-car sound now r-car sound driver supports dai info settings switch to use it
d9df0ef1eb9e1048f0ab4a6e93c85f60c5594c2f	watchdog sp805_wdt add support routines are required for required on some platforms to run part of clk routines from contexts that can schedule this patch adds support for these routines in sp805 driver
338a95a95508537e23c82d59a2d87be6fde4b6ff	implement support for disable_gfx_power_gating_in_uvd flag some asic revisions need to disable pg when uvd is active
266068eabb1077adf7d74a66de6610e7a6205d02	kvm vgic-v2 limit itargetsr bits to number of vcpus the gicv2 spec says in section that a cpu targets field bit that corresponds to an unimplemented cpu interface is currently we allow the guest to write any value in there and it can read that back mask the written value with the proper cpu mask to be spec compliant
558de5c13871e3665c9088f1ba0bac619bb380be	dont keep dpms state in encoder this patch removes the dpms state tracking in encoder this state is at best confusing and at worst incorrect since the display drivers can turn on and off without propagating the value
e3ce7633ba38a97c2203ab60f381ce1642940328	remove sync_0 the code directly uses the registers and
0db96de6258ca3851c95c7c4349b7188ac524891	ath6kl cosmetic change in checking for free vif slot a minor optimization is done in finding the free slot available for the new virtual interface in the firmware
f6194213cbe871341cd5dfcfe31b4de78ef9503f	clk at91 change to using endian agnositc io change to using endian agnostic _relaxed io accessors instead of __raw
882be7c3be72f6d72ae7a81e707154287ea5d289	scsi megaraid_sas mask off flags in ioctl path mask off flags in the ioctl path to prevent memory scribble with older megacli versions
24996edce547fd981c089db9a12717fd76a51160	reorder scm_remove do not reset drvdata before the block device is cleaned up with a non-empty block queue drvdata could be accessed
a755af52f8ef278985d1475070c0647f2e6e47a7	spi fsl-espi simplify fsl_espi_setup_transfer simplify fsl_espi_setup_transfer a little
74a2b3ea2d8c6c1f73103a0fcb50b5c214c0d864	arm_pmu factor out pmu registration currently arm_pmu_device_probe contains probing logic specific to the platform_device infrastructure and some logic required to safely register the pmu with various systems this patch factors out the logic relating to the registration of the pmu this makes arm_pmu_device_probe a little easier to read and will make it easier to reuse the logic for an acpi-specific probing mechanism
f2229ab8611e6e79992b6357db3fb4faf70e74a9	iio iadc wait_for_completion_timeout time in jiffies the timeout value to wait_for_completion_timeout is in jiffies but the value being passed seems like it was intended to by microseconds note that the timeout was extremely long thus it might be too short now in any case it probably should be passed through usecs_to_jiffies or msecs_to_jiffies patch is against linux-next patch was only compile-tested x86_64_defcofnig
9ab98d42401d50d6ab5f6ef59e1d63c486391f1c	staging rtl8723au cfg80211_rtw_connect remove obfuscating pointers dst_ssid and dst_bssid were just obfuscating that we were in fact looking at pnetwork
efe8072316a899294212055c147d3d9adca940a4	arm fix oops for gpmc free if gpmc_cs_remap fails we will get an error because we are calling release_resource on an uninitialized resource lets fix that by checking the resource flags and while at it lets also make gpmc_cs_delete_mem use the res pointer that we already have to avoid confusion without this patch we can get the following error omap-gpmc __number__ cannot remap gpmc cs __number__ to unable to handle kernel null pointer dereference at virtual address __number__ code
175f1244c199f589d23f54fcc3e178fe24d80b7a	remove an unused variable and an unused argument the variable av is not used so remove it since that change removes the last user of the wqe argument remove that argument too
e9e01846c7e18a3b5682b54e50f1005949737bd9	sfc avoid assignment in an if-statement reported by checkpatch fix the following error error do not use assignment in if condition
679e7c2999f963e542c6f4c3d3c9a0688b5d3587	n_tty uninline tty_copy_to_user merge the multiple tty_copy_to_user calls into a single copy sequence within tty_copy_to_user
2385f3c3c757b6ffb766c320df4a7f7a45593f24	usb remove err usage err was a very old usb-specific macro that i thought had gone away this patch removes it from being used in the driver and uses dev_err instead
a636df9673e1e4627722777fe6075943372e76be	input tsc2005 improve readability of register defines improve defines for first control byte by removing prefix the defines are for __number__ bit values and not for __number__ bit values and expose register structure by exposing the shift
41f44d1389c0bfd19d7ff92aafc80d42308eac70	r8169 modify the mothod for phy settings of rtl8111g replace the current settings with rtl_writephy and rtl_readphy for the hardware the settings are same with previous ones this make the setting method like the previous chips
53cd2681e02bee59e433b20934bf71f4db5a87d8	mtd nand orion use the mtd instance embedded in struct nand_chip struct nand_chip now embeds an mtd device make use of this mtd instance
3e4ae1dcbb8c821b855c39d75ae0f412ad1ab71a	print pid as integer not sure why somebody thought that this is a long
76ba0aae673075c77a8b775e9133c8e8b1a44563	net generalize checksum_init functions create a general __skb_checksum_validate function actually a macro to subsume the various checksum_init functions this function can either init the checksum or do the full validation logically a flag specifies if full vaidation is performed also there is a flag to the function to indicate that zero checksums are allowed to support optional udp checksums added several stub functions for calling __skb_checksum_validate
9da7d69357389ea63893434fe3b17b9fbc2c2d2d	fix locking in drrs hooks we must acquire the mutex before we can check otherwise someone might sneak in with a modeset clear the pointer after weve checked it and then the code will oops this issue has been introduced in commit a93fad0f7fb8a3ff12e8814b630648f6d187954c author vandana kannan intel.com date sat jan __number__ __number__ drrs calls based on frontbuffer v2 dont blow up on uninitialized mutex and work item by checking whether drrs is support or not first also unconditionally initialize the item to avoid future trouble
41ba6b711a40b83a877ae8242a4b3e692de91f97	asoc dmaengine_pcm use dmaengine cyclic wrapper commit added extra parameter to device_prep_dma_cyclic this is not required if we use the wrapper over cyclic api this is split from alexedres patch
cff109768b2d9c03095848f4cd4b0754117262aa	net update the per network namespace sysctls to be available to the network namespace owner allow anyone with cap_net_admin rights in the user namespace of the the netowrk namespace to change sysctls allow anyone the uid of the user namespace root the same permissions over the network namespace sysctls as the global root allow anyone with gid of the user namespace root group the same permissions over the network namespace sysctl as the global root group
6ef1ccac50b08a73835649adff10a0166fc7db21	clk qoriq replace kzalloc with kmalloc where the memset is not necessary
485f07d349a3e5059413b886a3bc1996c4b3d14d	x86 uv correct reset_with_ipi fix reset_with_ipi to look up a cpu for a blade based on the distribution map being indexed by the potentially sparsely numbered pnode this patch is critical to tlb shootdown on a partitioned uv system or one with nonconsecutive blade numbers the distribution map bits represent pnodes relative to the partition base pnode previous to this patch it had been assuming bits based on consecutive blade ids link __number__
ea875ec94eafb858990f3fe9528501f983105653	replace racy task affinity logic the mmustat_enable sysfs file accessor functions must run code on the target cpu this is achieved by temporarily setting the affinity of the calling user space thread to the requested cpu and reset it to the original affinity afterwards thats racy vs concurrent affinity settings for that thread resulting in code executing on the wrong cpu and overwriting the new affinity setting replace it by using work_on_cpu which guarantees to run the code on the requested cpu protection against cpu hotplug is not required as the open sysfs file already prevents the removal from the cpu offline callback using the hotplug protected version would actually be wrong because it would deadlock against a cpu hotplug operation of the cpu associated to the sysfs file in progress link
ec10665cbf271fb1f60daeb194ad4f2cdcdc59d9	arm dma-mapping fix potential memory leak in atomic_pool_init when either of __alloc_from_contiguous or __alloc_remap_buffer fails to provide a valid pointer allocated memory is freed up and an error is returned pages was however not freed before returning error
8712f901c9952bbad52e499fe350434294efbcff	staging comedi pcl711 use comedi_async scans_done to detect eoa remove the private data member ntrig and use the comedi_async scans_done member to detect the end-of-acquisition
7dc20319660d12d2ef642e572e8802c228b6c1cd	asoc rsnd adg audio-clkoutn asynchronizes support audio-clkoutn can asynchronizes with clock audio-clkoutn synchronizes with clock is now default behavior
4b86c459c7bee3acaf92f0e2b4c6ac803eaa1a58	netfilter nf_ct_expect change __nf_ct_expect_check return value commit netfilter nf_ct_expect nf_ct_expect_insert returns void inadvertently changed the successful return value of nf_ct_expect_related_report from __number__ to __number__ due to __nf_ct_expect_check returning __number__ on success prevent this regression in the future by changing the return value of __nf_ct_expect_check to __number__ on success
a0368d4e48fc9ad65a66f6819a801f3f542b4f0f	mm hugetlb use get_page_foll in follow_hugetlb_page get_page_foll is more optimal and is always safe to use under the pt lock more so for hugetlbfs as theres no risk of race conditions with split_huge_page regardless of the pt lock
9c4ad466d1dd2e067d5fdb2fcdbcc30fc5c145f9	drm virtio fix virtio_gpu_mode_dumb_create lookup format using virtio_gpu_translate_format instead of hardcoding it fixes xorg display on bigendian guests ppc64
e7e664fd688a4a882ce571575ad721203f0cd584	protect the channel data processing with a spinlock we protect important data such as tx buffer pointer nb_bytes counter and status registers of the device from accessing several times at the same time
afa6ac4aa59e0255cf380d561a7c4e5ac9f33f52	staging comedi adl_pci9111 cleanup pci9111_hr_ai_range for aesthetic reasons rename the symbol and fix the whitespace
e4c536b72fd6b25c7f4f9c6f293f43ba287b8e8f	staging silicom add some range checks to proc functions if you tried to cat more than __number__ characters the last character is for the terminator to these proc files then it would corrupt kernel memory
25c5cc9194f241d9180b4ca76a1845efd0a02769	media omap3isp move non-critical code out of the mutex-protected section the isp_video_pix_to_mbus and isp_video_mbus_to_pix calls in isp_video_set_format only access static fields of the isp_video structure they dont need to be protected by a mutex
ddf3a21a03d0f01c5ba83deaecd2d0c381d5ef42	libceph enable osdmap_enc feature bit announce our support for new v7 split and separately versioned client and osd sections osdmap enconding
350649cc24358ab0cfff7179c06818d0cfef698b	media tw5864-core remove excessive irqsave as warned by smatch tw5864_h264_isr error double lock tw5864_h264_isr error double unlock two different spinlocks are obtained so having two calls is correct but second irqsave is superfluous and using same flags variable is just wrong
c3147965384f1a5ace685dc34e78f9bb201f357d	ozwpan replace alloc_skb with dev_alloc_skb in this patch replaces the calls to alloc_skb with calls to dev_alloc_skb dev_alloc_skb has gfp_atomic priority so the replacement does not change the code semantics
bb6d19846d1cee7cc977ce3aa736ec60d7163d3a	check the timeout passed to i915_wait_request we have relied upon the sole caller wait_ioctl validating the timeout argument however when waiting for multiple requests i forgot to ensure that the timeout was still positive on the later requests this is more simply done inside __i915_wait_request fixes regression introduced in commit b47161858ba13c9c7e03333132230d66e008dd55 author chris wilson chris-wilson.co.uk date mon apr __number__ __number__ implement inter-engine read-read optimisations the impact of the regression is __number__ jiffie for each extra active ring for a wait_ioctl with a timeout i dont think anyone has noticed link
e29deb48189cea0be8b24f5912d8c21a18cb0244	asoc wl1273 add stub dapm support in order to ensure that the device continues to work with dapm support being mandatory provide stub dapm widgets and routes note that the public information on the device appears to make no mention of the fm support the driver appears to have
cdf310ce119989353bb6848ca8327814ae1012e2	asoc rsnd fixup ssiu control timing ssiu should be controlled after ssi this patch fix up it
0b09628948bce970e14ef61a6788caa93285a132	rtl8xxxu add interrupt bit definitions for gen2 parts these are primarily needed for parts but the vendor driver still sets them for some usb devices
f529f18255ed5fbb888498cfaa8cad63eab629e4	stmmac dwmac-rk use rk_gmac_ops as of match data remove the setup glue callback and use rk_gmac_ops as of match data so it can used directly when calling rk_gmac_setup
19b6317b8c78a51c41b3d7abf14fdbb0df8f41b7	asoc bf5xx-tdm-pcm staticize non exported struct the bf5xx_tdm_pcm_ops struct is only used in so make it static
e971ac9a564a4f3fbaeaae111079837928226870	gpio ml-ioh use resource management for irqs use device resource managed variants of irq_alloc_descs and request_irq and remove the code manually freeing irq resources
bffacb9132a306b7e22bb6366e5b277f20f67465	kasan remove duplicate definition of the macro kasan_free_page remove duplicate definition of the macro kasan_free_page in
e3e29f990cc77c5b23280c77275812a3f010cc41	nios2 add missing ptrace registers defines these are all register available in nios2
5a0950c27236dc6f6a3e9d13259c1a2e89fd1cf7	tipc ensure that link congestion and wakeup use same criteria when a link is attempted woken up after congestion it uses a different more generous criteria than when it was originally declared congested this has the effect that the link and the sending process sometimes will be woken up unnecessarily just to immediately return to congestion when it turns out there is not not enough space in its send queue to host the pending message this is a waste of cpu cycles we now change the function link_prepare_wakeup to use exactly the same criteria as tipc_link_xmit however since we are now excluding the window limit from the wakeup calculation and the current backlog limit for the lowest level is too small to house even a single maximum-size message we have to expand this limit we do this by evaluating an alternative minimum value during the setting of the importance limits
497826af60f812240ed5b6ba80541f7c9f2154d9	nfs fix compiler warnings the struct inode was only used in a dprintk so compiling with config_sunrpc_debug off triggers a warning to get around this i remove the struct inode variable and instead change the dprintks to use instead
464d8a54a0ca7827a2278e2122e5eb22462ae044	video i740fb make i740fb_init static i740fb_init is referenced only in this function make it static
795d855d56c6d172f50a974f603ba923ac93ee76	mac80211 fix rate control mask matching call the order of parameters was mixed up introduced in commit mac80211 improve the rate control api
8904120b52e0ca35597ca743bb67db5d273ecd2c	slip remove unnecessary break after goto
70c963ec4f15a13197524611875168f23acc4a97	drm bridge dw-hdmi embed drm_bridge in struct dw_hdmi the drm_bridge instance is always needed theres no point in allocating it separately link
05c3274d56ee783cb291a779ec2b369e9d172450	iwlwifi mvm include wildcard ssid in scans fix a copy paste bug that didnt copy wildcard ssids to scan requests this bug causes scan with only wildcard ssid to be passive and scans with more than one ssid to send only the direct probes
1cecd54f327fdddbeefa15126f2f58b26b6c39e2	usb gadget f_mass_storage eliminate abuse of data since is not used for endpoint claiming neither for state storing we can reduce number of places where we read or modify its value as now it has no particular meaning for function or framework logic in case of f_mass_storage we only need to store in pointer to struct fsg_common which is used in bulk_in_complete and bulk_out_complete callbacks all other uses of are now meaningless and can be safely removed
4c5930e8056127e9a89bb7836bfa34318a89ab14	fix warning coverity reports a warning due to unitialized attr structure in one code path reported by coverity cid __number__
26cfdbe30d81c209a5e81c4c311b02b10b5821c3	mips lantiq initialize the usb core on boot there is a dwc2 usb core in these socs to make usb work we need to first reset and power the state machine these are soc specific registers and not part of the actual usb core patchwork
2ac863719e518ae1a8f328849e64ea26a222f079	vmwgfx snoop dma transfers with non-covering sizes enough to get cursors working under wayland
1c11b37669a5209bd11fb857a103634afef971e8	kvm x86 emulator add support for vector alignment x86 defines three classes of vector instructions explicitly aligned if unaligned explicitly unaligned and default which depends on the encoding avx is unaligned sse is aligned add support for marking an instruction as explicitly aligned or unaligned and mark movdqu as unaligned
b64b9c3f900a0522fb926f1436088e2e36807594	pm opp rename routines specific to old bindings with _v1 clearly distinguish routines based on what version of bindings they parse we have already postfixed routines properly with _v2 for new bindings postfix the older ones now with _v1
b54db778858bc83f9231e5b358cb978f559f7016	iommu change iommu driver to call attach_device_to_domain trace event change iommu driver to call attach_device_to_domain trace event this iommu_device class event can be enabled to trigger when devices are attached to a domain trace information includes device name testing added trace calls to iommu_prepare_identity_map for testing some of the conditions that are hard to trigger here is the trace from the testing __number__ __float__ attach_device_to_domain iommu __number__
3e358ac2bb5bb9c9f4842145ca0da2384d13fd98	firmware be a bit more verbose about direct firmware loading failure the direct firmware loading interface is a bit quiet about failures failures that occur during loading are masked if firmware exists in multiple locations and may be masked entirely in the event that we fall back to the user mode helper code it would be nice to see some of the more unexpected errors get logged so in the event that you expect the direct firmware loader to work like if config_fw_loader_user_helper is enabled and something goes wrong you can figure out what happened
9b6a065e797e525e94d949bba1abc257527b3f87	media add rc keytable for technisat ts35 the ts35 remote is distributed with technisat cablestar hd2 cards mantis chipset the exact protocol type is unknown making this rc map probably only usable by mantis cards
361763127f8734b460e2452cf882272c93c26c56	alsa hdac add missing to end of dev_err messages trival fix some dev_err messages are missing a so add it
0a1eb2d474edfe75466be6b4677ad84e5e8ca3f5	stop reporting eip and esp in reporting these fields on a non-current task is dangerous if the task is in any state other than normal kernel code they may contain garbage or even kernel addresses on some architectures x86_64 used to do this i bet lots of architectures still do with it can oops too as far as i know there are no use programs that make any material use of these fields so just get rid of them link
286259ef4b30bff092b223c530c7fa4dc5fd792d	clk bcm2835 fix compiler warnings on builds
3797ef6b6bc041755318917855d63879679c6dd9	hid wacom set input bits before registration we shouldnt change the event flags of input devices after they get registered otherwise udev will not get notified of these flags and cannot setup the devices properly this fixes the probing to set the input event flags on the input_mapped callback instead of the probe function
d82acb353246d3989377761ca26f5489264a4793	i40evf use correct types dont use uint32_t type the kernel use u32 instead no functional change change-id i77bbf3b6464edaef747c7104b43534032a4dba63
91a6c4aded58cb49f99320480bad62493c288761	md wake up personality thread after array state update when array fails to write to one of the drives the request is added to bio_end_io_list and finished by personality thread the thread doesnt handle it as long as md_change_pending flag is set in case of external metadata this flag is cleared however the thread is not woken up it causes request to be blocked for few seconds until another action on the array wakes up the thread or to get stuck indefinitely wake up personality thread once md_change_pending has been cleared moving restart_array call after the flag is cleared it not a solution because in read-write mode the call doesnt wake up the thread
86c9ffcc1ed17497a5df473232a7e654fa8cfa1f	powerpc define pvr value for power8nvl processor
ea8dd8e585761c2811d0566938983868d89976a8	tty xuartps dont consider circular buffer when enabling transmitter restarting the transmitter even if the circ buffer is empty may be necessary to push out remaining data when the port is restarted after being stopped
441dc45aa21ea7e1a6283e62489b940fdb3969d8	asoc omap rx51 use static const char const arrays mark the array and the string const by using static const char const foo instead of static const foo
bdcb2c9e2f9e40639e4b212d08d8cdba54932c0d	ath10k get rid of superfluous call to pci_disable_msi the documentation states that pci_enable_msi_block returns the number of requests could have been allocated not could allocate iow msis are enabled if a positive value returned kvalo add commit log based on alexanders email
bbf3dbd7dd5e4a798936cf1ce624d76f5ec37780	staging wilc1000 rename update_tcp_track_session function this patch rename the update_tcp_track_session function to update_tcp_session to avoid camelcase naming convention
a8ccbb7701d41a772d839acb3d81d7f9ac84c678	
1a08e3d9e0ac4577ba89dbdb38f593fe050f88fc	drivers firmware psci use __pa_symbol for kernel symbol __pa_symbol is technically the macro that should be used for kernel symbols switch to this as a pre-requisite for debug_virtual which will do bounds checking
4a3aeb13b774a941823b58715eb4144acedae92a	chang indentation of some comments in the comments were not lined up properly so i just re-indented them this also fixes a stupid checkpatch issue unknowingly
037b559a167c76f3457582d1b84b4d1e36e38925	wireless mwifiex print hw address via
c2a4bf47089823bb76d2498eebda922ecf99546d	pinctrl st introduce a get pin function call this call fetches the numerical function value a specified pin is currently operating in function zero is more often than not the gpio function greater than zero values represent an alternative function youd need to either look those up in the device tree sources or the programmers manual
aee9ffabec81d96d68d8537ccc6fedfbb0e6c468	asoc wm8995 cleanup manual bias level transitions since the asoc core now takes care of setting the bias level to snd_soc_bias_off when removing the codec there is no need to do it manually anymore either the manual transition to snd_soc_bias_standby at the end of codec probe can also be removed as the core will automatically do this after the codec has been probed
ca1aa54f272d47bec77baa292f803df7a81f966b	netfilter xt_log add missing string format in nf_log_packet in function log_tg error format not a string literal and no format arguments
3a5d1c0e7cb5ba91aabbd7e28626e3cc925f8093	inet reqsk_alloc needs to take care of dead listeners well soon no longer take a refcount on listeners so reqsk_alloc can not assume a listener refcount is not zero we need to use atomic_inc_not_zero
a7147db0f5184954687546d430aed65cce483ffa	gpio vf610 use irq_set_handler_locked use irq_set_handler_locked as it avoids a redundant lookup of the irq descriptor search and replacement was done with coccinelle
bdd43cb39f1b1e897c5d7992d05d0b9f0dd786d1	drivers dma-contiguous refactor dma_alloc_from_contiguous the dma_alloc_from_contiguous function returns either a valid pointer to a page structure or null the error code set when pageno is not used at all and can be safely removed this commit also changes the function to avoid goto and have only one exit path and one place where mutex is unlocked fixed compilation break caused by missing semicolon
bd9cb12febe86124998314c4c2f08a0e6e1f80c3	staging lustre lov cleanup lov_check_set in make the code clearer by introducing a local variable and removing the unnecessary if statement
321a1b3026ea194dd084cf3bda1e235b2986b0af	only reprobe display on encoder which has received an hpd event v2 instead of calling into the drm helper layer to poll all connectors for changes in connected displays probe only those connectors which have received a hotplug event v2 resolved conflicts with changes in previous commits renamed function and and added a warn_on to warn of intel_hpd_irq_event from being called without held suggested by jani nikula
c18b4c52c755175dc62aed7b409dca24f028ce76	rtc pcf85063 do not register a rtc device if chip is not present add a sanity check to see if chip is present if we can not communicate with the chip there is no point in registering a rtc device
81852b6abcdfce80ce60294c7910ac85e83105ba	add local fb variables add a local fb variable to a few places to get rid of the stuff looks neater and helps me with my ppor coccinelle skills later
fb334fee60ebd1aea23cc5daf3abac10139c9a24	bluetooth rename into the variable for the out-of-band random number was badly named and with that confusing just rename it to local_rand so it is clear what value it represents
0f1e54ae52b950ed79074ae794d027d6c97fd34e	sfc explain why efx_mcdi_exit_assertion ignores result of efx_mcdi_rpc fix cid __number__ in coverity report on linux this is the one instance where we dont and shouldnt check the return code from efx_mcdi_rpc it wasnt immediately obvious to me why we didnt so i think an explanation is in order
b57141c1abe41e26c09b1b1b7ece463464ba6de2	initialize ib_qp_init_attr with zeros initialize ib_qp_init_attr with zeros in order to avoid from garbage in fields that wont be set with user values
769ea33145b5f4c1f0d07e1d4db0121c4b98f81f	fix double free
a3ccfcc1e7b52047c840249e30008678ac1046c3	acpica update version to __number__ version __number__
ee81b210fe9f761a3d34f6c061c67e6313df06bc	staging comedi pcmuio return __number__ for successful attach returning __number__ for success is more common
2c25b7399570ebdcf737c5af67c9d26a1771c002	fix reporting of memory type on igps purely a cosmetic issue at this point
d9f897c912b4108076afb00036a139e3b8144a64	mips kernel cpu-probe report cpu id during probe patchwork
ad1cd720b18330599a9cabaf970095b74c9c3355	watchdog mei_wdt add activation debugfs entry add entry for displaying whether the device has activated or deactivated watchdog fw application cat activated deactivated
dea1c703f12ee1d141883f4702cf1f7dee32b860	mfd ti_am335x_tscadc use variable name for sizeof operator fix the code formatting to use the kernel preferred style of using the actual variables to determine the size using the sizeof operator
e10b2022f942f8414d9a5c1e717c5f6940948f8e	scsi lpfc fixed driver error messages after firmware download
486dd6d305ddf6229011e23226416b179425ca23	video imxfb make local symbols static these symbols are used only in this file make them static
84556d58efead4cf4e53d807e5c846c7919be4c9	dont depend on in intel_dp_compute_config move towards atomic by using the legacy modesets drm_atomic_state instead
3ed124b21e6bf388c63b182d9c2d766a6ca0e8be	rework ppgtt init code this rework will help if future platforms choose to be a bit different should have no functional impact v2 dont move around the vtable setup daniel v3 squash in the disable-by-default patch
efec381ced2c0416c3765abce076896cf464dc0c	pinctrl nomadik add clk_prepare call we now strictly require clk_prepare calls to be issued before any clk_enable calls
6ff432714e6064250e02ec55628836cadd923e91	staging rtl8723au core rtw_pwrctrl fix void function return statements style warning the following patch fixes the warning warning void function return statements are not generally useful
bf7471038840547c9328291b4d9d91c55581dcb8	revert misc eeprom sunxi add new compatibles this reverts commit f0de8e04a7201a2000f3c6d09732c11e7f35d42d it is incorrect a future patch will fix this up properly
a03b0545c26d88ae92cdfc662cad4364e8c627a3	asoc simple-card call of_node_put for dai_link we need to call of_node_put if we used of_get_child_by_name but missing it for dai-link loop
89f1b1c614253d7ea57543f769d93fced99d4d05	clk renesas add r8a7795 cpg core clock definitions add all r-car h3 clock pulse generator core clock outputs as listed in table list of clocks r-car h3 of the r-car gen3 hardware users manual rev
5055544e96ca2ef8a0b62e7ea3c21460698d43ef	b44 add support for byte queue limits this makes it possible to use some more advanced queuing techniques with this driver
b25c94c580c27bb6cff1e2f478746e77119215ad	btrfs fix a jump typo of nodatasum_case to avoid wrong warn_on if goto nodatasum_case nodatasum_case in above code nodatasum_case marker should be moved after warn_on
60a2708327f3c30c8e87c54cf3044f1e0c6a5d4b	staging unisys fix camelcase name in net_pkt_rcvpost fix the camelcase name in this struct uniquenum unique_num
171cb9a2807588630fed401f3e0b8ae22d91595f	crypto omap-sham remove unnecessary local variable
8d90d1ef88ddad5353888e9ecf1d30c75a5effff	dont fill in until after all vm setup done gpuobj has a condition of bar around usage to avoid some nasty ordering issues which ive now been reminded to add a todo about between bar and vm the part of the condition isnt currently necessary it used to be another change made bar always null where it matters so we got lucky that wont be the case for much longer
e279f84f304d5486291a2d6465105dc6f96cc8ca	nfc pn533 use dynamic debug for pn533 hex dumps those can be very verbose and we only want them when debugging pn533
24467cacc03cf8b156d4c6786697e5e5d13c9321	mm memcg remove needless fixup to init_mm when charging it does not matter to __mem_cgroup_try_charge if the passed mm is null or init_mm it will charge the root memcg in either case also fix up the comment in __mem_cgroup_try_charge that claimed the init_mm would be charged when no mm was passed its not really incorrect but confusing clarify that the root memcg is charged in this case
6bf9e97b69eab92482983419792104786b27f411	prepare locomo_handler for irq argument removal the irq argument of most interrupt flow handlers is unused or merily used instead of a local variable the handlers which need the irq argument can retrieve the irq number from the irq descriptor search and update was done with coccinelle and the invaluable help of julia lawall
03070e7c9d2dde754e49b189a195a7f5cc1ac7a1	asus-laptop fix is_visible return value with a lucid platform asus_sysfs_is_visible returned a boolean for ls_switch and ls_level attributes
3e5ccd866fdf3a1e1d4d2c08c81f861ad6798d32	dmatest return actual state in run file the following command should return actual state of the test cat to wait for test done the user may perform a busy loop that checks the state while y do echo sleep __number__ done echo
e276ae672fa2d727721b1a5a2508ff34bac85439	vfs do_last make exit rcu safe allow returning from do_last with lookup_rcu still set on the out and exit labels
a29ccf6ff3e07061253b9209a65edb8c0126f78d	intel_menlow reduce code duplication aux0_show and aux1_show consists of almost identical code pull that into a common helper and make them thin wrappers similarly for _store
e27414a04f1a571eeb0b214ebfc77e6dc9bb8a08	use rb_entry to make the code clearer use rb_entry instead of container_of to deal with rbtree link
817b6c480e330a5325ed9acb0cef8143923a52de	xfs fsx_nonblock is not used it is set if the filp is set ot non-blocking but the flag is not used anywhere hence we can kill it
ecf46abdd32a35fcd7dfeef72600a065425532b3	enable gup code for numa force get_user_page to take the slow path for numa migration pages
f2add9cd66c87baea6762b099ee38ee742207699	perf buildid-list add option to show the running kernel build id perf buildid-list useful when diagnosing build id problems in debuginfo packages etc link
c2ce92fc7912d0eb2f4ae5a40977fa8a0378e796	cntx_ctrl we need insert meta-init for to support sriov preemption v2 fix emit_frame_size
eba985e20c70d99a278c04ff5c492d90d53a20dd	watchdog orion remove unneeded atomic access the rstout register on the armada __number__ soc variant is a dedicated register not shared across orthogonal subsystems and so its not needed to write it atomically
1bf2138e9806ea436933d5a803547833f9524c8f	hwrng mxc-rnga remove unneeded goto label we can simplify the code by returning the error code immediately instead of jumping to a goto label
4e209001b86c53f51980292f0efd1933c0e55d66	bgmac write mac address to hardware in ndo_set_mac_address the generic implementation just changes the netdev struct and does not write the new mac address to the hardware or issues some command to do so
113b0b20fc123bc522ded68ea710d789b0415ebe	asoc es8328 fix shifts for mixer switches these are all off by one the playback and bypass switches are the top two bits of the registers which are at shifts __number__ and __number__ not __number__ and __number__
bb03694323561da47fb6a15d977a0b5275134cdd	staging comedi cb_pcidas remove forward declarations __number__ move the cb_pcidas_load_counters function to remove the need for the forward declaration
88ca3619001380a3147246a22cb356f6065ad713	media technisat-usb2 use dma buffers for i2c transfers the usb control messages require dma to work we cannot pass a stack-allocated buffer as it is not warranted that the stack would be into a dma enabled area on this driver most of the transfers are ok but the i2c one was using stack
b6789ee55b99fbc26aa16e4f485397e86498bf51	greybus sdio some cleanups in command function some cleanups in gb_sdio_command function ret does not need to be initialize and mrq is already pointing to request no need to get it from host
39495a2bea4d523c4d36f28f3739caa8d3a404c4	greybus svc refactor interface-route destruction add interface-route-destroy helper to tear down the route and release the interface device id note that we currently need to grab a reference to the interface to prevent it from being deallocated before tearing down the route
63a44583f3a4408b902a3d7ba18b4ab13d1309ab	qnx6 dont bother with in inode-freeing callback well initialize it in inode_init_always when we allocate that object again
2f729b10bb74f97797beb310113f6182f262d36a	kvm remove useless check of ret variable prior to returning the same value a trivial code cleanup this if is redundant message-id gnote
c2ba9e96376dbfdbdff27ff99a602691b265b0c9	staging comedi das08 rename das08_trig_12bit the das08_trig_12bit macro contains the offset to the write-only software trigger register for or analog-to-digital conversions rename the macro to das08_ai_trig_reg and add a comment
55b219440b255f9b9064c621550d29e5f4f8c20f	asoc rockchip remove redundant dev_err call in rockchip_i2s_probe there is a error message within devm_ioremap_resource already so remove the dev_err call to avoid redundant error message
aa736c36db3e583d249e1d23a3ac9223b1c55f95	selinux use kmemdup in security_sid_to_context_core
c562ccbf584f8017a153bbd5c1039a189e1f8be8	use iio_sw_buffer_preenable to avoid code repition using this generic function adds a little overhead to a slow path but reduces the amount of code repitition in exchange
d162eaad7726e5f10a2b5813bdfac9d55c8eba69	ocfs2_direct_io_write misses ocfs2_is_overwrite error code if ocfs2_is_overwrite failed ocfs2_direct_io_write mays till return success to the caller
2ca58f45cc986952dc2b2942fb170d9d7644735a	media ts2020 improve filter limit calc we dont need calculate channel bandwidth from symbol rate as it is calculated by dvb core use clamp to force limit of filter frequency upper limit should never exceeded bw in any case
7f240b7db0956a426075eca73cc7ddf9fefa22a9	tilepro pci fix bad bombing from the bombing to convert to accidentally modified a struct pci_dev site causing this file not to compile this commit reverts that code to use again
29b2780974767df4006d9b8cc7d412d23d99e9a7	staging unisys visorbus device_responder add error handling the function controlvm_respond returns proper error handling so now we can propagate the error up and handle it appropriately
61b0f5d7c41408ff523a5cd3925feafa82b971f5	iwlwifi mvm compare full command id when comparing command ids the group should be taken into account so the same from a different group doesnt trigger anything unexpected fix this by comparing to the wide id
146617b88b86c3d1f1309604d5d4cb38d5b24f1a	net stmmac tso init prepared for multiple queues this patch configures tso for all available tx queues
f8d56d8f892be43a2404356073e16401eb5a42e6	net eth cpsw correctly attach to gpio bitbang mdio driver when the gpio bitbang mdio driver is used instead of the davinci mdio driver we need to configure the phy_id string differently otherwise this string looks like this instead of gpio-0 and the phy is not found when phy_connect is called
5c457d039d917670f202fa5946d096a028c31903	iwlwifi change disable calibration bit-set to enum changed disable calibration bit field defines to enum
be36cefeca40ad6b31233859662a23937d6f35ee	staging bcm2835-audio simplify bcm2835_alsa_device_init fixes checkpatch warning missing a blank line after declarations
ed471d3402b0fa77e52007c6f8d79b16c4194000	wl12xx bet with while the fw with dynamic ps controls bet when going to psm and back internally within the fw theres still a need to enable it from the driver at least once so enable on every entry to auto_ps and disable it once we explicitly go back to station_active_mode bet isnt relevant for
7c0b6bce6e848a59cd15d1ade9db346d34d90c5a	staging octeon fix logic for waking octeon ethernet tx queue only wake tx queue when driver queue is back within bounds the logic here was just reenabling the queue when any buffers had been freed the queue was stopped whenever the length exceeded __number__ max_out_queue_depth but then was essentially immediately started again on a congested link the queue length would just keep increasing up to around __number__ for average size packets at which point the hardware would start refusing the packets and they would begin to be dropped this prevented the qdisc layer from effectively managing and prioritising packets as essentially all packets were being allowed into the driver queue and then were being dropped by the hardware this change only restarts the queue if the length is less than __number__ max_out_queue_depth
eb57da880b00b6c68f971e077ff3e4db9ef0deae	remove function roundup_gem_size the function roundup_gem_size can be merged in exynos_drm_gem_create
256f3ee3d1468660ca3b10ad3beab7e8f6cbd969	nfc llcp fix __number__ memory leaks once copied into the sk_buff data area using llcp_add_tlv the allocated tlvs must be freed with this patch nfc_llcp_send_connect and nfc_llcp_send_cc dont return immediately on success and now free the allocated tlvs
3dc2046ca78b3cac6c8c9098a4e3024cd91abdb4	media media ti-vpe vpe allow use of user specified stride was always overwritten by vpe to the most adequate value based on needed alignment however in order to make use of arbitrary size dma buffer it is better to use the user space provide stride instead the driver will still calculate an appropriate stride but will use the provided one when it is larger than the calculated one
a21361b9b9e0d9436a37951a2b0f25b022136fbb	regmap fix compile errors in due to stride changes commit f01ee60fffa4 regmap implement register striding caused the compile errors below fix them in function regmap_irq_sync_unlock error map undeclared first use in this function note each undeclared identifier is reported only once for each function it appears in in function regmap_irq_enable error map undeclared first use in this function in function regmap_irq_disable error map undeclared first use in this function
fc466ba3ee01cef840523f9bbbf6811e111168c3	asoc switch over to use snd_soc_register_component on samsung pcm
90667892c5a78b47080359883a569a260e9e87ed	nvme factor reset code into a common helper
c023b8b295ff71df223746e6d9fd0e56cfe72846	arm u300 register i2c bus drivers from device tree this adds the two i2c busses to the device tree so these probe properly
132ca7e1de1e3217af06bce2beb3aa13c3edc7f6	ceph fix mounting same fs multiple times now __ceph_open_session only accepts closed client an opened client will tigger bug_on
ad5b310228da567e35a2ea5dcb2fd62e3a36654e	net ipv4 fib_trie dont unnecessarily search for already found fib leaf weve already found leaf dont search for it again same is for fib leaf info
72e83577bc5bc02a92c7fd47d108de11c04dcbf0	mmc dw_mmc change the dw_mci_freq_min from to if there is no property clock-freq-min-max should be set to by default but some soc can be used when is used mmc core will try to check from to
000d399625b4b302935508f2fc9ce93ff1bd1ba4	arm kvm sanitize freeing of hyp page tables instead of trying to free everything from page_offset to the top of memory use the virt_addr_valid macro to check the upper limit also do the same for the vmalloc region where the io mappings are allocated
b184f16b7feb9ede7d658ee6f2c77434d580d764	sfc replace efx_rx_buf_eh with simpler efx_rx_buf_va efx_rx_buf_va returns the virtual address of the current start of the buffer the callers must add the hash prefix size themselves
f6c1c8ff439ccadc333b3920c7073e0792bcb9af	check acpi_resource_to_address64 return value we should check the acpi_resource_to_address64 return value which also removes the need to validate the resource type beforehand no functional change found by coverity cid __number__
f9e5de0f175d114a850630f4e86a2eed4f7a7a75	staging xgifb eliminate string comparison from mode search eliminate string comparison from the video mode search
2c869b262a10ca99cb866d04087d75311587a30c	ext4 fix growing of tiny filesystems the estimate of necessary transaction credits in ext4_flex_group_add is too pessimistic it reserves credit for sb resize inode and resize inode dindirect block for each group added in a flex group although they are always the same block and thus it is enough to account them only once also the number of modified gdt block is overestimated since we fit ext4_desc_per_blocksb descriptors in one block make the estimation more precise that reduces number of requested credits enough that we can grow __number__ mb filesystem which has __number__ mb journal __number__ reserved gdt blocks and flex group size __number__ by default
af96bab11b4cdc009fa78e55c328a0baccd7db90	staging lustre lnet correct position of lnet_ni_decref in fix the call to lnet_ni_decref should have followed the routines which are using the ni this patch correct that intel-bug-id reviewed-on
ee98fa3a8b148a234600a20f7cdc2b4b37f38083	ext4 fix collapse range test for bigalloc file systems blocks in collapse range should be collapsed per cluster unit when bigalloc is enable if bigalloc is not enable ext4_cluster_size will be same with ext4_block_size with this bug fixed patch enables collapse_range for bigalloc which fixes a large number of xfstest failures which use fsx
2886e93f5d28c559b3de9c4f75547af31e14504e	disable ddi_buf_ctl at the correct time and also properly wait for its idle bit you may notice that ddi_buf_ctl is enabled in but disabled in instead of yes the mode set sequence is not exactly symmetrical but lets assume the spec is correct unless we can prove its wrong
6c67050ab108bcce2576fa1d7a0557eb0376520a	mtd denali_dt fix incorrect error check the return value of devm_ioremap_nocache should be checked here instead of res
ba388fdd08ff458fabc8588e565b5d031191c50a	sfc remove early call to in efx_reset_up efx_reset_up calls once directly then again through efx_start_all efx_start_port this first call is also made too early to work properly on
24adaf7958847e0950b197ac05cced2ea9e0b4e7	remove redundant call to iio_sw_buffer_preenable the equivalent of iio_sw_buffer_preenable is now done in the iio buffer core so there is no need to do this from the driver anymore
809d9516da73345cca587743b57e45e9095d851e	input gpio-keys allow disabling individual buttons in dt add support to disable buttons from dt via status property if given button is not supported on given platforms this will help re-using existing dtsi files across multiple platforms
2e3ac940f2754d7dc616aba1643a668954fe892f	livepatch remove unnecessary call to klp_find_object_module klp_find_object_module is called from both the klp register and enable paths only the call from the register path is necessary because the module notifier will let us know if the patched module gets loaded or unloaded
502c80744fcac6b16f28699469c70db499fe2f69	staging rtl8712 fixed little endian problem fixed a sparse warning using function le16_to_cpus to avoid double assignment
03bb28fcfd20a883c82b41e1a2e4c53db61405f5	staging comedi pcl812 use comedi_bytes_per_scan this inline function is just a wrapper around comedi_bytes_per_scan
81118d165811581f2fe8a793f270e9961fc7e445	brcmfmac using zero instead of null sparse complains that we use zero instead of null here in fact the initialization is wrong and should be removed doing these kinds of bogus initializations means that gcc cant detect unitialized variables and leads to bugs
3f735131d9c2523eb54a6c5099fa8c60a4292d48	hv_netvsc fix the order of num_sc_offered decrement reorder the code in netvsc_sc_open so num_sc_offered is only decremented after vmbus_open is called this avoid pontential race of removing device before all channels are setup
71bde60191a9fa44d33b582c5e3713ffe99b0fef	ixgbe fix x540 completion timeout on topologies including few levels of pcie switching x540 can run into an unexpected completion error we get around this by waiting after enabling loopback a sufficient amount of time until tx data fetch is sent we then poll the pending transaction bit to ensure we received the completion only then do we go on to clear the buffers
0a137a1a38c64dbd4c61df7a4f3bce4dc12beecd	arm pxa mark unused eseries code as __maybe_unused two variables in are used on multiple platforms but are not referenced when those are all disabled warning e7xx_gpio_vbus defined but not used warning eseries_register_clks defined but not used marking them __maybe_unused is the nicest way to ensure that we never get the warning or end up with missing symbols if we get it wrong
92014b97edb6e90901849a6b2c7ca76e43e0fdbb	rocker move mac learn event back to no wait processing
24d05ff863e78544e8538a792e3234291cdd5650	initialize control register __number__ earlier change machine_check_init to an early_initcall this makes sure it will be called before all other cpus are online and therfore saves us a lot of pointless smp_call_function calls the control register settings will be forwarded to the other cpus when they will be brought online
e5eb925a1804c4a52994ba57f4f68ee7a9132905	mips change type of asid_cache to unsigned long asid_cache must be unsigned long otherwise on __number__ bit systems it will become __number__ if the value in get_new_mmu_context reaches __address__ and in the end the assumption of asid_first_version is not true anymore thus leads to more dangerous things initial patch by yong zhang
be6646bfbaec7af72ddf3fc98050ca6f19dc2b79	pci prevent xhci driver from claiming amd nolan usb3 drd device the amd nolan nl soc contains a designware usb3 dual-role device that can be operated either as a usb host or a usb device in the amd nl platform this device has a class code of pci_class_serial_usb_xhci which means the xhci driver will claim it but the dwc3 driver is a more specific driver for this device and wed prefer to use it instead of xhci to prevent xhci from claiming the device change the class code to which the pci spec defines as usb device not host controller the dwc3 driver can then claim it based on its vendor and device id
add332a1523a09cf6d429933f1e2fb4ccdfe6479	fix formatting of this patch alters format strings width to align all statistics at par with the longest struct sched_statistic member name under link
add98da7da79f38fd22d8852ed1066952d8b02aa	staging most core separate property showing links currently an aim has the following properties available to manage links write-only remove_link used to remove a link from a list add_link used to add a link to a list and display them this patch transfers the read functionality of add_link to the new read-only property links to build consistent set of properties to control the list of links
290d028e0478c5020d69875d817a8b529439874e	staging comedi usbdux use comedi_buf_write_samples use comedi_buf_write_samples to add the sample to the async buffer the async events comedi_cb_block and comedi_cb_eos will be detected and set by the core remove the unnecessary events in the driver
20dbe1a1cbf3f1f0a6a07581e5b95ae027c9bea0	changes required to enable dsi video mode on cht on cht changes are required for calculating the correct p with minimal error for the required dsi clock so that the correct dividor ctrl values are written in cck regs for dsi this patch has been tested on cht rvp with __number__ x __number__ panel v2 by jani rebased on earlier refactoring original at __number__ __number__
2c7c9ea429ba30fe506747b7da110e2212d8fefa	tg3 add support ring tx doorbell only if xmit_more is not set or the queue is stopped
9edebf11a4aa6349fecaedd673516fcf1999956a	improve checking of sysfs attribute buffer high values are always wrong for netiucvs sysfs attribute buffer but the current code does not detect values between and as invalid choosing type unsigned int for variable bs1 and making use of kstrtouint improves the syntax checking for buffer
9272d8bd4a56fcee4da827418b1dcf8b261cd380	arm omap board-devkit8000 use generic dpi panels gpio handling the devkit8000 board file currently requests gpios required to configure the innolux dpi panel and provides callbacks to configure them these tasks have been moved to the generic dpi panel driver itself and should be removed from the board files remove the gpio request and the platform callbacks from the board file configure the gpio information in generic dpi panels platform data so that its passed to the panel driver
5cddd5de8cc8b3bcf11ecd530f7e0cbcb283d968	mfd pm8921 remove unnecessary platform_set_drvdata the driver core clears the driver data to null after device_release or on probe failure since commit device-core ensure drvdata null when no driver is bound thus it is not needed to manually clear the device driver data to null
20eca054e9d90db3d6181e35d7425dfb79d5cd00	spider_net call dev_consume_skb_any instead of dev_kfree_skb replace dev_kfree_skb with dev_consume_skb_any in spider_net_release_tx_chain which can be called in hard irq and other contexts dev_consume_skb_any was choosen as it preserves the current dev_kfree_skb semantics dev_kfree_skb is consume_skb and is because it is correct most of the time as most packets will have been successfully transmitted not dropeed
a8cd1f4393032cd87e98803346865cdbceb15ad3	perf hists browser fix ui bug after zoom into when zoom into the stat is cleared in but is not cleared so if we toggle fold stat on the unfold entires nr_entries got a wrong value this bug can be reproduced as follows perf record ls perf report children self command shared object symbol ls _dl_get_ready_to_run ls _dl_load_shared_library _dl_load_shared_library zoom into _dl_get_ready_to_run _start in the new thread hists all entries reset to fold if we unfold the same entry as we previously unfolded nr_entries got wrong value and we cant move down cursor to bottom row thread ls children self command shared object symbol ls _dl_get_ready_to_run ls _dl_load_shared_library _dl_load_shared_library _dl_get_ready_to_run cursor may stop here cant move down _start this patch clear to fix this bug link
d222678426faa5b0a5c14a468f78c32beb089937	acpi apei einj fix malformed newline escape the pr_warn message has a malformed newline escape add in the missing
f4c72c70308897bd26f2918979d06b429916fd0e	android binder fix binder mmap failures binder_update_page_range initializes only addr and size fields in struct vm_struct tmp_area and passes it to map_vm_area before mm vmalloc add flag preventing guard hole allocation this was because map_vm_area didnt use any other fields in vm_struct except addr and size now get_vm_area_size used in map_vm_area reads vm_structs flags to determine whether vm area has guard hole or not binder_update_page_range dont initialize flags field so this causes following binder mmap failures cut here warning cpu __number__ pid __number__ at cpu __number__ pid __number__ comm healthd not tainted hardware name arm-versatile express unwind_backtrace from show_stack from dump_stack from warn_slowpath_common from warn_slowpath_null from vmap_page_range_noflush from map_vm_area from binder_update_page_range from binder_mmap from mmap_region from do_mmap_pgoff from vm_mmap_pgoff from sys_mmap_pgoff from end trace binder __number__ binder_alloc_buf failed to map page at __number__ in kernel binder binder_mmap __number__ b6bde000-b6cdc000 alloc small buf failed use map_kernel_range_noflush instead of map_vm_area as this is better api for binders purposes and it allows to get rid of vm_struct tmp_area at all
593dfbd9ca7d8d6f9a01020426b680b78b86bdb2	crypto drbg report backend_cra_name when allocation fails be more verbose and also report when crypto_alloc_shash or crypto_alloc_cipher fail in drbg_init_hash_kernel or drbg_init_sym_kernel correspondingly example drbg could not allocate digest tfm handle hmacsha256
4a0721bf84da588bec013220f74563add71c0bbe	staging emxx_udc replace gfp_kernel with gfp_atomic to avoid deadlock do not call blocking functions with spinlocks held replace gfp_kernel with gfp_atomic as the latter will fail if the pile doesnt have enough free pages but will not sleep and hence deadlock can be avoided found by coccinelle
35fb80b9de08024b375d76f08591ec5b7cc57995	staging sm750fb fix __iomem pointer types this patch annotates pointers as referring to mapped memory where they ought to be removes now unnecessary ugly casts eliminates an incorrect deref on mapped memory by using iowrite16 instead and updates the pointer arithmetic accordingly to take into account that the pointers are now byte-sized this fixes the following sparse warning cast removes address space of expression warning cast removes address space of expression
66ddb82129df66a94219844c509074adb4330a28	can flexcan fix typo in comment this patch fixes the typo disble disable
1201844e6ddc4e13dfc1a7ffbba0cfd180944679	ath10k increase max client to __number__ in qca99x0 when max client was set to __number__ in qca99x0 there was host memory alloc failure during wmi service ready event handling this issue got resolved now increasing max client limit from __number__ to __number__
0261370268193755c5ff1bef3d9d6339f314052c	crypto omap-sham use module_platform_driver macro module_platform_driver makes the code simpler by eliminating boilerplate code
1ebb7cc6a58321a4b22c4c9097b4651b0ab859d0	mm munlock batch nr_mlock zone state updates depending on previous batch which introduced batched isolation in munlock_vma_range we can batch also the updates of nr_mlock page stats after the whole pagevec is processed for page isolation the stats are updated only once with the number of successful isolations there were however no measurable perfomance gains
b9b6695cf0e1afebc207e28c7e9350c90547a426	fou reject ipv6 config fou does not really support ipv6 encapsulation after an udp socket is created in fou_create the encap_rcv callback is set either to fou_udp_recv or to gue_udp_recv both of those unconditionally assume that the received packet has an ipv4 header and access the data at network_header as it was an ipv4 header this leads to ipv6 flow label being interpreted as ip packet length etc disallow fou tunnel to be configured as ipv6 until real ipv6 support is added to fou
0f3696eb21ef39b7bb7ea7d0160e925904309281	use gfp_atomic when locks are held alloc_dummy_hdrq is called with locks held and thus should not use gfp_kernel the semantic patch that makes this report is available in
d23b4c3ee2d5cbdeaec9f8e7d8a9bdcc73836fb9	usb gadget f_midi check kstrdup return value kstrdup might fail so check its return value and react appropriately
1f66adfb5eb81428bc1a5700cffd22ba8e772272	gpio da9052 be sure to clamp return value as we want gpio_chip calls to be able to return negative error codes and propagate to drivers we need to go over all drivers and make sure their return values are clamped to we do this by using the ret design pattern
58da018053531b9cb91423a64f2a762ef0fe7456	bridge mdb fix vlan_enabled access when vlans are not configured instead of trying to access directly use the provided helper br_vlan_enabled
698570062d324e40d86294b585f2d08608caebde	asoc remove unused variable wm9090 in wm9090_probe eliminate below build warning cc in function wm9090_probe warning unused variable wm9090
43c9b9e8a4c64b1dd3026ab233703a4321ac6d7c	arm imx set up pllv3 power and bypass sequentially currently power and bypass bits are set up in a single write to pllv3 register this causes problem occasionally from the testing lets follow fsl bsp code to set up power bit relock and then bypass sequentially
9240c384f1c7cbf7ba15ccf818f37fad69fd4712	media m88ds3103 do not return error from get_frontend when not ready do not return error from get_frontend when status is queried but the frontend didnt lock yet the proper behavior is to only update the cache after having a lock
f00643888ca435ce6934482243733cc140281d10	ath5k fix reference clock usec duration setting restore enabling the sleep clock alters the ar5k_usec_32 field but disabling it didnt restore it
ca5b50501d6486bfbb73a07ed8b8821fb31dc065	alsa firewire-lib fix an unexpected byte sequence for micro sign the sign for microsecond micro sign was encoded to c2 b5 by utf-8 character encoding scheme but the byte sequence was converted to c3 __number__ c2 b5 in a previous commit as a result the byte sequence cannot represent microsecond sign in utf-8 or ascii this may confuse developers this commit replaces the sign to string expression with microseconds to purge superfluous troubles
2d9dd99b4470a2ef05509435465e055f50456330	allocate irq_desc dynamically for sparse_irq support do not use the board pdata for irq_base but allocate them dynamically to allow a proper support of sparse_irq fix an unneeded line wrap
421c7860c6e1989da3962fafdd6699316c9f8e20	avoid if is empty perf_trace_buf_prepare perf_trace_buf_submithead task null make no sense if hlist_emptyhead change to check beforehand link
9945cf9997b5fc10b47c010cdb40b2753ccc77d9	media media usb cpia2 use kmemdup instead of kmalloc and memcpy when some other buffer is immediately copied into allocated region replace calls to kmalloc followed by a memcpy with a direct call to kmemdup
4b1b865e4e97e336316f30e32af36d71e98bdabc	bonding use l4 hash if available if skb carries a l4 hash no need to perform a flow dissection performance is slightly better __number__ lpaa6 tcp_rr __number__ __number__ lpaa6 tcp_rr __number__ __number__ lpaa6 tcp_rr __number__ after patch __number__ lpaa6 tcp_rr __number__ __number__ lpaa6 tcp_rr __number__ __number__ lpaa6 tcp_rr __number__
c3c4d99485ea51cd354ed3cd955a8310703456b6	input hyperv-keyboard pass through prefix pass through the prefix so atkbd can properly parse the scancode data
1f8bb58ec522150d2ac816e809279ca5d21ed93b	staging xgifb this patch removes the unnecessary return statement using spatch this patch removes unnecessary return statement using spatch tool
7e845e76e656967366be04646d80d815e8704914	asoc wm9712 remove wrappers since the regmap conversion are just simple wrappers around use those instead directly and remove the wrappers also use snd_soc_update_bits were appropriate
2e109a2855bf6cf675a8b74dbd89b6492e8def42	workqueue rename workqueue_lock to wq_mayday_lock with the recent locking updates the only thing protected by workqueue_lock is list rename workqueue_lock to wq_mayday_lock this patch is pure rename
19664c6a000956290cce84c6924b13488ab794d6	net l3mdev remove netif_index_is_l3_master no longer used after e0d56fdd73422 net l3mdev remove redundant calls
e41eef8f317a4cfe43ec4de2527703a2e6f16087	eicon fixed checkpatch warning warning symbol driverrelease_didd was not declared should it be
9a69a829f9b656c2a220d65a94ecf7b5887c5da1	userfaultfd non-cooperative robustness check similar to the handle_userfault case also make sure to never attempt to send any event past the pf_exiting point of no return this is purely a robustness check link
37808d62afcdc420d98875c4b514c178d56f6815	mips bmips pretty print bmips5200 processor name just to ease debugging of multiplatform kernel make sure we print broadcom bmips5200 for the bmips5200 implementation instead of broadcom bmips5000 patchwork
2bcccaec9937a49a65c258789d33ecc5ee1f8fff	media v4l2 mx3_camera print codes in hexadecimal format codes are defined in as hexadecimal constants print them in the same form for easier recognition
cddf31b3b293fd20358ea506f22445611425811f	thermal rename to thermal_instance should be referenced by both thermal zone devices and thermal cooling devices rename to in this patch and will be introduced in next patch
f3b8a53c6d0145eae7f5e9b452a9f6f3d03e17cc	staging rtl8192u ieee80211 rtl819x_tsproc replace msecs with msecs_to_jiffies replace driver specific macro msecs with msecs_to_jiffies this was found using the following coccinelle semantic patch expression e msecse msecs_to_jiffiese
84d7238f937f11eced99b37f963b17dc03bfe1bc	staging lustre use unsigned int not unsigned use unsigned int rather than unsigned in header variable declaration for readability error found by checkpatch
e4c88f007be78d38eaef316c599a1ee2f0272c15	btrfs dont check for delalloc_bytes in cache_save_setup now that were doing free space cache writeback outside the critical section in the commit there is a bigger window for delalloc_bytes to be added after a cache has been written find_free_extent may do this without putting the block group back into the dirty list and also without a transaction running checking for delalloc_bytes in cache_save_setup means we might leave the cache marked as written without invalidating it consistency checks during mount will toss the cache but its better to get rid of the check in cache_save_setup and let it get invalidated by the checks already done during cache write out
ba42fad0964a41f0830e80c1b6be49c1e6bfcc01	be2net add dma_mapping_error check for dma_map_page the driver does not check value returned by dma_map_page the patch fixes this v2 removed the bugfix for non-bug thanks sathya
84dedd71cf3bc61cc65ca43a48f7252344a1bb68	mips ath79 set missing irq ack handler for ar7100-misc-intc irq chip the irq ack handler was forgotten while introducing of support only ar71xx and ar933x based devices require it patchwork
813b5e6971cbf1ae7dd0298fe44e39f7f2629f8d	replace the hardcoded __number__ with a call to intel_freq_opcode450
7cbe1ceeb6ab2e4bc334b3dab3254d4414b72a23	hwmon w83791d rename prototype parameter from register to reg gcc warns register is not at beginning of declaration because the compiler thinks the parameter has been marked as a register variable but the function prototype intended to name the parameter register which is a reserved keyword
8e8805d5bf704f24acb14d67d506cbd4c5893be5	dmaengine edma serve cyclic audio channels with high priority queue move the dma channel used in cyclic mode audio to the highest priority event queue which helps to reduce audio problems when the channel is terminated move it back to the default queue
3d18bd41a82fac69c82e1725c7beea25b17a0190	hid appleir force input to be set some weird remotes are not correctly creating the input device their report descriptor starts with usage page vendor defined page __number__ __number__ collection application __number__ whereas others which are correctly handled start with usage page consumer devices __number__ usage consumer control __number__ collection application __number__ the rest of the report descriptor is the same adding the quirk hid_quirk_hidinput_force forces hid-input to allocate the inputs and everything should be ok
8535736c27cc4e25b9948d857138315f45b6fa34	spi pl022 remove redundant pinctrl to default state in probe the driver core is now taking care of putting our pins into default state at probe thus we can remove the redundant call for it in probe
7cca2e0744a990bfa0ae93a40c886fd589fb37b7	clk samsung exynos7 correct nr_clk_ids for fsys0 this patch corrects the nr_clk_ids for fsys0 block which is wrongly set to number of clocks of the top1 cmu this also adjusts the gate clocks order
22e09dff089fe93d6e3ef7cc0fb8f645a87153c6	staging comedi ni_at_a2150 clarify __number__ timer programming refactor the __number__ timer programming to use the i8254_set_mode and i8254_write helpers instead of i8254_load this allows us to use the defines to clarify the code
13b7ea6377fb23f02784a38e894f8fad49816376	mips malta fix gic interrupt offsets the gic interrupt offsets are calculated based on the value of nr_cpus however this is wrong because nr_cpus may or may not contain the real number of the actual cpus present in the system we fix that by using the nr_cpu_ids variable which contains the real number of cpus in the system previously an mt core eg with __number__ vpes will fail to boot if nr_cpus was __number__ with the following errors cut here warning cpu __number__ pid __number__ at modules linked in cpu __number__ pid __number__ comm tainted g w __number__ stack __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ __number__ call trace end trace this is now fixed and the malta board can boot with any nr_cpus value which also helps supporting more processors in a single kernel binary patchwork
c33705188c493b7de3b8dc2956d67de91b444727	batman-adv treat net_xmit_cn as transmit successfully the tc could return net_xmit_cn as one congestion notification but it does not mean the packet is lost other modules like ipvlan macvlan and others treat net_xmit_cn as success too so batman-adv should handle net_xmit_cn also as net_xmit_success moved net_xmit_cn handling to batadv_send_skb_packet
8cbd20aa0de89eb344e05d51ae3bedfabeae360a	greybus battery use already defined macros we already have macros for these use them instead of writing fixed values
39654cb3a6a2a04bb055e62e8ece16d611c2e517	iwlwifi dont access a nonexistent register upon assert the commit below added code to dump the content of fifos that are present only on dual cpu products __number__ and up this broke whose firmware does advertise iwl_ucode_tlv_capa_extend_shared_mem_cfg but doesnt have __number__ cpus the current code does check the length of the fifo before dumping them and the nonexistent fifo has a __number__ length but we still accessed a register to set the fifo number and that made the dma unhappy the impact was a much longer recovery upon firmware assert
45e3cc7d9fe69844cd12d51c511e1e98d156bbe1	kvm x86 fix uninitialized return code this is a regression caused by
5dfc03f141993c101c626c84d639019e98a4f39c	asoc fsl imx-wm8962 dont update bias_level in machine driver if we update it here the set_bias_level of codec driver wont be normally called and we will then miss some essential procedures in set_bias_level of the codec driver thus drop it
b31115092724925a434905dc3dbf83a2e752ba4b	add workarounds directly to gen6_render_ring_flush since gen now run the new gen7_render_ring_flush function
bfa833558cc90517da1d3f0885a9f5ea04e6b021	add missing call to powergate vce not enabled yet but missing the call
1a1cee843c4a532f57083ffe8cbf4fcd3dcb381d	drop unused externs for hpte_init_beat_v3 we removed the beat support in __number__ in commit bf4981a00636 powerpc remove the celleb support these externs are unused since then
e883d73503205d1eaaf049b835bf135b46738f57	remove pinned check from madvise ioctl we dont need to incur the overhead of checking whether the object is pinned prior to changing its madvise if the object is pinned the madvise will not take effect until it is unpinned and so we cannot free the pages being pointed at by hardware marking a pinned object with allocated pages as dontneed will not trigger any undue warnings the check is therefore superfluous and by removing it we can remove a linear walk over all the vma the object has still despite it being an overzealous check that error code is part of the current abi and so we must proceed with caution
7c6cc8f2012f4146b05b8ec7238f98884100db8c	asoc fsi configure dma slave settings current fsi driver is assuming that of dmaengine will be set by platform data but it should be set via dmaengine_slave_config special thanks to arnd
7cb8957b894a6c4eae44d9ccbfd3a0034e298aba	staging iio meter ade7854-i2c code style improvements code reformatting based on with lines over __number__ characters were fixed
54cd640d20de46bb54747286ca19f3995be921f2	dm mpath use hw_handler_params if attached hw_handler is same as requested let the requested be used if the attached hardware handler is the same handler as requested with
2bf1a12340bda1bf621f27b9892094a51b1297fd	perf tools do not auto-remove children column if given depending on the configuration perf the children column in the output automatically but it might not be what user wants if she give option explicitly link
c6beca0e0dc70c439894337e82609ec3b79ed900	bluetooth allow hci user channel usage for controllers without address trying to setup hci user channel usage for le only controllers without a public address or configured static address will fail with an error saying that no address is available in case of hci user channel the requirement for a valid address is not needed so allow skipping this extra validation step
c590854dffc06095f38a63b3bdb9e4370282a53e	pinctrl abx500 fix some more bitwise and tests i sent a patch to fix some bitwise and tests but i guess i missed some sorry about that
afc49177b412dfe547c60740ac1f1db7f805da43	arm clps711x fix register definitions this patch contain some fixes fixes the address of register porte corrects name for daidr0 register removes unused definition for syncio_cfglen fixes definition syncio_frmlen
06d0ffcc5c12ad49786141fa9768da38485a8a61	asoc pcm512x more constification since the core now takes const strings for enums we should be constifying them and the regulator supplies while were at it
e558b1fbf5f43da83f91a31e595a6d65e663b100	net netcp add error check to netcp_allocate_rx_buf currently if netcp_allocate_rx_buf fails due no descriptors in the rx free descriptor queue inside the netcp_rxpool_refill function the iterative loop to fill buffers doesnt terminate right away so modify the netcp_allocate_rx_buf to return an error code and use it break the loop when there is error
da601ebc70f3b2d3a5c9b6f9f41e519abe76f47e	backlight adp8860 remove unnecessary module_alias the driver has a i2c device id table that is used to create the modaliases and also adp8860-backlight is not a supported i2c id so its never used
1ea7252d978637dca24f89c72dee887fe2bef689	media c8sectpfe combine three checks into a single if block the variable tsin was checked three times in a loop iteration of the c8sectpfe_tuner_unregister_frontend function this implementation detail could be improved by the combination of the involved statements into a single if block so that this variable will be checked only once there
4bf59ce248250f4c847a2a9d51713233c88f1d0f	staging comedi pcl818 sample types are unsigned sample values in comedi are generally represented as unsigned values change the interrupt data transfer functions in the pcl818 module to use unsigned types for consistency also remove the short member of struct pcl818_private as it is only assigned to and otherwise unused
50858ef96deeeeeb36b2113d49007f41d0410763	befs remove constant variable use macro directly instead of via assigning it to an unchanging variable
b5d721d761fccf491f92eefc611e318561683d0a	inet properly align icsk_ca_priv tcp_illinois and upcoming tcp_cdg require alignment of icsk_ca_priv x86 does not care but other architectures might
9b92da1f1205bd2591487051a93624dd6c258eef	regulator core fix default return value for _get now that we are defaulting to providing dummy regulators fix the logic for substituting a dummy by making the default return code
deb8a069e39b272c0a37bfa7a5f52d49600963a4	convert to skb paged frag api
98e35f5894cf208084688ec0c7bb7b713efc997f	printk git rid of sched_delayed message for printk_deferred commit printk remove separate printk_sched buffers and use printk buf instead hardcodes printk_deferred to kern_warning and inserts the string sched_delayed before the actual message however it doesnt take into account the prefix of the message that now ends up in the middle of the output sched_delayed hpet increased min_delta_ns to __number__ nsec fix this by just getting rid of the sched_delayed scnprintf the prefix is useless since anyway since from that moment printk_deferred inserts the message into the kernel printk buffer immediately so if the message eventually gets printed to console it is printed in the correct order with other messages and theres no need for any special prefix and if the kernel crashes before the message makes it to console then prefix in the printk buffer doesnt make the situation any better link
e13192f6c1e4aa064adab3865af321392a303c87	switch order of power domain init wrt irq install on vlv at least the display irq register access and functionality depends on its power well to be on so move the power domain hw init before we install the irqs
63088ec7c8eadfe08b96127a41b385ec9742dace	nvme dont allow unsupported flags the command flags can change the meaning of other fields in the command that the driver is not prepared to handle specifically the user could passthrough an sgl flag causing the controller to misinterpret the prp list the driver created potentially corrupting memory or data
13084c2d18bfee72594ba3a969dfdd972544e644	ath9k return early for error conditions do not try to cancel work instances and ani when the device is not present or wow triggers are not configured bail out early and use ath_err for such error conditions
22417352f6b7f623495cc426680de75d725197df	use polling mode on small transfers small transfers generally can be accomplished faster in polling mode this patch select the transfer which size is bellow the buffer size to be done on polling mode
9f8b97f888445b737ea3716ca53498663e18d971	fakelb dont deliver when one phy a real phy dont transmit the transmitted frame back to the phy this behaviour will confuse the and the upper ipv6 neighbour discovery cache we need now at least two virtual phys to creating a virtual wpan network
74685b08fbb26ff5b8448fabe0941a53269dd33e	drivers net cpsw-phy-sel clear rgmii_idmode on rgmii links support for setting the rgmii_idmode bit was added in the commit referenced below however that commit did not add the symmetrical clearing of the bit by way of setting it in mask add it here note that the documentation marks clearing this bit as reserved however according to ti support for delaying the clock does exist in the mac although it is not officially supported we tested this on a board with an rgmii to rgmii link that will not work unless this bit is cleared
bca74ee5fec06efd5615102790ff1ff773a2f717	staging unisys visornic replace symbolic perms with octal replace symbolic permissions s_irusr and s_iwusr for their octal counterparts
7bfe781edc26b01ebecef58be0aae91058544c9f	lpfc mark functions as static in mark functions as static in because they are not used outside this file this eliminates the following warnings in warning no previous prototype for warning no previous prototype for warning no previous prototype for warning no previous prototype for warning no previous prototype for
852801417a89375c0df4285e60d90c7821a1d730	asoc make return type of dpcm_state_string const char dpcm_state_string returns a pointer to a string literal modifying a string literal causes undefined behaviour so make the return type of the function const char to make it explicit that the returned value should not be modified this patch is purely cosmetic none of the users of dpcm_state_string attempt to modify the returned content
1198365625bf22294263267df3360cb2a4c76f2d	arm omap irq switch over to intc_readl on omap_intc_handle_irq an almost blind conversion from readl_relaxed to our newly introduced intc_readl while at that also remove some hardcoded register addresses
23bc9873ba60ee661d8e9f3a6b22fc3bcc4b7015	arm dmabounce separate out decision to bounce move the decision to perform dma bouncing out of map_single into its own stand-alone function
a3086791ebe0c50aff0753a24db565ae0da7be18	asoc wm8804 use devm_regulator_bulk_get using devm_regulator_bulk_get can make the code cleaner and smaller as we do not need to call regulator_bulk_free in the error and remove paths
20bb8095a467dde88bd09a55ed62c60fada2e5c9	let probing fail for the dt case without a valid alias when the uart device is instantiated by dt but dt doesnt provide an alias then better let probing fail instead of falling back to an unrelated device id used for the line number and no platform data
4a11bc2fdd7f526c70e013366171d66f27656203	asoc tlv320aic26 add basic dapm support provide external widgets for the codec to ensure the device continues to function with dapm mandatory and to make it easier to hook the device up to other components
8cb06c983822103da1cfe57b9901e60a00e61f67	n_tty remove alias ptrs in __receive_buf the char and flag buffer local alias pointers p and f are unnecessary remove them
1f6684235825684b6257b7169b122011494c8a4d	ipmi clean up the error handling for channel config errors the code to send the channel config errors was missing an error report in one place and needed some more information in another and had an extraneous bit of code clean all that up
ed6f6a50dc5f183c53e7b3b7fed4794bc50d9aa7	uprobes kill unlike set_swbp makes sense although it cant prevent all confusions but the usage of is_swbp_at_addr is equally confusing and it adds the extra get_user_pages we can avoid this patch removes but changes write_opcode to do the necessary checks before replace_page perhaps it also makes sense to ensure page_mapping_anon in unregister case find_active_uprobe becomes the only user of is_swbp_at_addr we can change its semantics
2b87965a1e6b6051435315d3f04627a5dbad979c	do no run cpu sync when there is only one cpu online moving enabling of function tracing to early boot even before scheduling is enabled means that it is not safe to enable interrupts when function tracing was enabled at boot up it use to happen after scheduling and the other cpus were brought up that required running a sync across all cpus when modifying the function hook locations in the code to do the synchronization interrupts had to be enabled now function tracing can be started before the other cpus are brought up and enabling interrupts in that case is dangerous as only tho boot cpu is active there is no reason to run the synchronization if the online cpu count is one do not bother doing the synchronization this removes the need to enable interrupts
f1552cbdc7d3cb42f3c9e88b2ad6cd5bfe90881a	staging vme simplfy string usage in vme_user_probe we can avoid usage of sprintf and magic-sized array with simple pointer assignment
996ecb8246676100af2a4dc1cfed747712a3c85f	net dsa mv88e6xxx enable sa learning on dsa ports in multi-chip systems dsa tag ports must learn sa addresses in order to correctly switch frames between interconnected chips this fixes cross-chip hardware bridging in a vlan filtering aware system because a bridge group gets implemented as an hardware vlan and thus dsa and user ports share the same fdb
7ee2eaa3641827a9ecdffa190cde31846024d2e3	hid alps fix memory leak a kfreereadbuf call was missed if hid_hw_raw_request fails fix it also avoid mixing direct return with goto in the error paths
f263ec622f06c3cf2da3a29e5ad0184dc50d1c2c	remove evict vram previous vm fault is since page talbe losts connection with vmid after gpu reset now the issue is fixed by recovery no need more if we want to save vram for some edc card we will need to consider a complete solution
4929fd8cb064e1bbee76b8c4cf6bd3f0e40bf66e	ip_tunnel delete unneeded call to netdev_priv netdev_priv is an accessor function and has no purpose if its result is not used a simplified version of the semantic match that fixes this problem is as follows local idexpression x when x
37c6393431bf526d6f465e095c1201c1b890dd51	fix pte clear range comparing pte index to a number of entries is wrong when clearing a range of pte entries use end marker of one past to correctly point adequate number of ptes to the scratch page v2 assert early instead of warning late chris v3 removed consts joonas bugzilla
d2ee88d0aaacac664aff6ca5fc0bd7705d8f2414	asoc au1x fix build d8b51c11ff5a70244753ba60abfd47088cf4dcd4 asoc ac97c use module_platform_driver broke the build cc error expected identifier or before token error pasting __initcall_ and does not give a valid preprocessing token error expected or before token error expected identifier or before token error pasting __exitcall_ and does not give a valid preprocessing token error expected or before token warning defined but not used make5 error __number__ make4 error __number__ make3 error __number__
8a1d7b09e7e3c2c7097712331ac64ccfdbcf8f6d	staging lustre lnet remove unnecessary parentheses on return removed three instances of parentheses in return calls that are unnecessary and do not contribute to readability
07868284e530d52f72b14b800398a8fefa7cf5d0	sctp reduce indent level on sctp_v4_get_dst paves the day for the next patch functionality stays untouched
27743e0bfdb227617017d14dcc7fa64f34d48671	expose module alias for loading from device-tree enable auto loading by udev when spi-imx is compiled as a module
696382f938d22597f4945865ed8e3f25e240cd41	cachefiles remove two unused pagevecs these two have been unused since commit c4d6d8dbf335c7fa47341654a37c53a512b519bb cachefiles fix the marking of cached pages in __float__
91efdb2718e0c5ff014f0cf98cac99f088a9a4d2	dont succeed in getters if fan is missing otherwise callers end up using uninitialized data
460604850a0cfcdb124fa627f56ca91529fb6c59	use module_pcmcia_driver in pcmcia drivers use the new module_pcmcia_driver macro to remove the boilerplate module code in the pcmcia drivers
bd48498487735a01abc68edb76e3d86393e096e1	remoteproc pass struct fw to load_segments and find_rsc_table prepare for introduction of custom firmware loaders by changing the functions rproc_find_rcs_table and rproc_load_segments to use struct firmware as parameter when the custom loader framework is introduced all calls into the firmware specific function must use struct firmware as parameter
f517f3bf07f1f776f12b2413dbefa21523021ac1	staging rtl8192u r8192u_core fix negative noise value is of type uint8 so it shouldnt be assigned a negative number assigning it __number__ which is the equivalent to dbm when iw_qual_dbm is set
2b55732ad23fcc9eaec05acc21fd579ef8a9f38b	use ptr_ret function used ptr_ret function instead of is_err and ptr_err patch found using coccinelle
2f26bd7227b80d002dfcd3f60e71bfad168e6517	stop using pointer the patch replaces accesses to pointer by container_of construct it will allow to remove ctx field in the future
024b05f4246e281ef50e019eff0fc53aedf069ac	i40e dont hold rtnl lock while waiting for vf reset to finish we made some effort to reduce the rtnl lock scope when resetting and rebuilding the pf unfortunately we still held the rtnl lock during the vf reset operation which meant that multiple pfs could not reset in parallel due to the global lock for now further reduce the scope by not holding the rtnl lock while resetting vfs this allows multiple pfs to reset in a timely manner change-id i2fbf823a0063f24dff67676cad09f0bbf83ee4ce
d50ce6c0b8afb958316fba15e329e3e53abfd968	alsa enable stereo mix input for cx20549 and cx20551 both cx20549 and cx20551 codecs have a mixer widget and it can be connected as the adc source like ad and via codecs enable the add_stereo_mix_input flag for these codecs
60fcdac8136b4275da42d6edf9ddb10439350289	pci hv dont leak buffer in hv_pci_onchannelcallback we dont free buffer on several code paths in hv_pci_onchannelcallback put kfree to the end of the function to fix the issue direct kfree return can now be replaced with a simple break
986eec4341729549778f374dfc97e69a991302df	fm10k fix missing braces after if statement while reviewing the code i noticed that one of the commits added an if statement followed by a for loop but the if statement was missing the braces around the loop this change corrects the coding style error
1e4d19ca6efba26964c9597b643a1dcda79ad296	iwlwifi mvm move the check if associated outside of the iterator for wowlan instead of checking if we are associated when suspending with wowlan enabled in the interface iterator allow it to return an unassociated vif and move the check to the main suspend function this will be needed by netdetect since it should also work when we are not associated but the vif is active
3121b1c44d0748f0286fd05b89a76232f40d1091	hid thingm add support for blink1 mk2 the blink1 mk2 is a new version of the blink1 usb rgb led the new generation has __number__ individually-controllable rgb chips this patch adds support for this device to the thingm driver which registers __number__ new standard led class instances for the second rgb chip note that the n set command does not support setting a color for a single rgb chip so it was changed to c fade with a timeout of __number__
a7da51ae10032a507ddeae6a490916eadbd1e10a	use need_resched instead of should_resched this code is used only when and only in non-atomic context xen_in_preemptible_hcall is set only in privcmd_ioctl_hypercall thus preempt_count is zero and should_resched is equal to need_resched
736d553886a72274e58ff8a0e8a2899978042b8f	tty serial meson implement earlycon support split off the bulk of the existing meson_serial_console_write implementation into meson_serial_port_write for implementing meson_serial_early_console_write use meson as the earlycon driver name courtesy of nicolas
7d5e9737efda16535e5b54bd627ef4881d11d31f	net rfkill gpio get the name and type from device property this prepares the driver for removal of platform data
683ede43dd412c6cad0d23578a018409ac9c683e	perf rework free paths primarily make perf_event_release_kernel into put_event this will allow kernel space to create per-task inherited events and is safer in general also document the free_event assumptions link
6248d0602f9932a437070dda598b7973b8770384	arm cache-l2x0 make outer_cache_fns a field of l2x0_of_data instead of having multiple functions belonging to outer_cache and filling this structure on the fly use a outer_cache_fns field inside l2x0_of_data and just memcopy it into outer_cache depending of the type of the l2x0 cache for non dt case the former code was kept rmk fixed a style issue
27bf69708394ca270f9ec53875aa7309c86dfc1d	net use dma_complete for dma completion status
14b058bbce9279ee432f0944ca14df69f4a0d170	mac80211 fix agg_status debugfs file alignment the rx active string is too long so the columns get shifted change it to just rx to avoid this
c58d1de5d94eee930d151f36cb6f63a30c6bf2bb	media v4l add enum_freq_bands support to tuner sub-device add vidioc_enum_freq_bands enumerate supported frequency bands ioctl support for sub-device tuners too
6437f51ec36af8ef1e3e2659439b35c37e5498e2	rtlwifi btcoexist avoid format string in printk since cl_printf only ever takes a single argument make sure a format string cannot leak into printk
8c1a7f5283e72306d1d23524f051501ffa1baf57	stmmac fix typo in correct spelling regiser to register in
977ff250755f4ae01ef50e98d792fabebb199c34	greybus arche-apb platform data apb is guaranteed to be valid platform data apb is guaranteed to be valid in arche_apb_ctrl_remove and so no need to check it
281e27c8092da95c83f6bc3df8fc11235f4b364c	iwlagn do nothing when disable agg in wrong state when disable aggregation request come in on wrong agg state ignore it
abcefe5fc357440bde93f97ba1c72c3b81e2cef5	add missing argument for tty_unlock commit d29f3ef39be4eec0362b985305fc526d9be318cf tty_lock localise the lock missed that d3a7b83f865b46bb7b5e1ed18a129ce1af349db4 add missing tty_unlock just added a new caller of tty_unlock in function error too few arguments to function
3d5e0ef746c13f8a26d0150f5dfd4f9b738a5130	omap dss2 add read_edid to omap_dss_driver struct read_edid can be used to get the edid information from the display
d0616613d9cf17919fbd46fa0274db4b0084ad62	net rfkill gpio add more broadcom bluetooth acpi ids this adds one more acpi id of a broadcom bluetooth chip
43bb95c7c06de358de7ab525d28bb89b470c1892	add protection related bits to inquiry this patch updates spc_emulate_evpd_86 extended inquiry to report grd_chk guard check and ref_chk reference check bits when dif emulation is enabled by the backend device
ad1830d504d85233392215c9966e5876b99c481e	fix pg cant be disabled by pg mask
858166f9f27a3a2d53eb50ef0429d13be8499875	staging ced1401 fix ced_read_char rename camel case arguments and locals in function ced_read_char
0d71068835e2610576d369d6d4cbf90e0f802a71	try to train dp even harder while debugging haswell link train failures i observed that we never try the maximum voltage configuration more than once consecutively we start the training the monitor keeps telling us to increase the voltage then when we reach the maximum we just go back to the start because of the memset above voltage_tries __number__ when we reach this point we keep alternating between the maximum and the minimum voltages until we give up the dp spec suggests that we should try the same voltage __number__ times before giving up this patch makes us try the maximum voltage at least __number__ times before going back to the minimum voltages this patch does not fix any particular bug im aware of
05623c4314cba3971f8476151aff73126127925f	asoc factor write of widget power out into a separate function split the decision about what the new power should be out from the implementation of that decision
b9c374b26cfb8a052e846f77482c5e4e0548e081	asoc cs42l52 remove duplicate module exit code in the conversion to module_init_i2c the original open coded module exit function was left remove it
